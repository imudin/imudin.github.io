{"version":3,"sources":["webpack:///assets/js/app.1ea447697a7b3f526cea.js","webpack:///./src/Tour.vue?952a","webpack:///./demos/components/demo-block.vue?916f","webpack:///./demos/App.vue?0551","webpack:///./src/Scene.vue?b8ef","webpack:///./src/Pano.vue?67fb","webpack:///./demos/components/demo-block.vue","webpack:///./src/lib/panolens.js","webpack:///./demos/pages/demo-cube-pano.vue","webpack:///./demos/pages/demo-pano.vue","webpack:///./demos/pages/demo-scene.vue","webpack:///./demos/pages/demo-tour.vue","webpack:///./demos/pages/demo-video-pano.vue","webpack:///./src/Scene.vue","webpack:///./src/Tour.vue","webpack:///./src/Tour.vue?3ec2","webpack:///./demos/components/demo-block.vue?6e72","webpack:///./demos/App.vue?8c56","webpack:///./demos/pages/demo-cube-pano.vue?d0a6","webpack:///./demos/pages/demo-pano.vue?c299","webpack:///./demos/pages/demo-video-pano.vue?e6e9","webpack:///./demos/pages/demo-scene.vue?4c58","webpack:///./src/Scene.vue?f0b5","webpack:///./src/Pano.vue?e317","webpack:///./demos/pages/demo-tour.vue?a913","webpack:///./src/Tour.vue?1a47","webpack:///./demos/components/demo-block.vue?9e40","webpack:///./demos/App.vue?0543","webpack:///./src/Scene.vue?6001","webpack:///./src/Pano.vue?5c12","webpack:///./src/Pano.vue","webpack:///./demos/router/index.js","webpack:///./demos/App.vue","webpack:///./demos/index.js","webpack:///./demos/pages/index.js","webpack:///App.vue","webpack:///demo-block.vue","webpack:///demo-cube-pano.vue","webpack:///demo-pano.vue","webpack:///demo-scene.vue","webpack:///demo-tour.vue","webpack:///demo-video-pano.vue","webpack:///Pano.vue","webpack:///Scene.vue","webpack:///Tour.vue"],"names":["webpackJsonp","129","module","exports","__webpack_require__","push","i","130","131","132","133","134","16","Component","27","__webpack_exports__","process","global","require","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default","__WEBPACK_IMPORTED_MODULE_8_three__","PANOLENS","REVISION","enableInlineVideo","e","r","t","d","a","start","stop","requestAnimationFrame","cancelAnimationFrame","stopImmediatePropagation","addEventListener","get","set","dispatchEvent","Event","resolve","then","Audio","crossOrigin","src","currentSrc","u","m","Date","now","h","currentTime","k","T","o","driver","video","duration","s","this","readyState","HAVE_FUTURE_DATA","hasAudio","playbackRate","loop","networkState","NETWORK_IDLE","buffered","length","load","ended","pause","c","g","webkitDisplayingFullscreen","E","paused","play","updater","HAVE_ENOUGH_DATA","v","w","p","bind","muted","autoplay","indexOf","l","f","y","everywhere","b","iPad","ipad","test","navigator","userAgent","classList","add","removeEventListener","platform","console","warn","document","head","style","matchMedia","matches","TWEEN","_tweens","getAll","removeAll","tween","remove","splice","update","time","preserve","undefined","window","hrtime","performance","getTime","Tween","object","_repeatDelayTime","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","Easing","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","_onStopCallback","to","properties","property","Array","concat","call","stopChainedTweens","end","numChainedTweens","delay","amount","repeat","times","repeatDelay","yoyo","easing","interpolation","chain","arguments","onStart","callback","onUpdate","onComplete","onStop","elapsed","value","charAt","parseFloat","isFinite","tmp","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","Back","Bounce","floor","fn","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","v0","v1","t2","root","define","domElement","getAutoRotationAngle","scope","autoRotateSpeed","getZoomScale","zoomSpeed","onMouseDown","event","momentumOn","momentumLeft","momentumUp","enabled","preventDefault","button","mouseButtons","ORBIT","noRotate","state","STATE","ROTATE","rotateStart","clientX","clientY","ZOOM","noZoom","DOLLY","dollyStart","PAN","noPan","panStart","NONE","onMouseMove","onMouseUp","startEvent","element","body","rotateEnd","rotateDelta","subVectors","rotateLeft","x","clientWidth","rotateSpeed","rotateUp","clientHeight","copy","eventPrevious","dollyEnd","dollyDelta","dollyIn","dollyOut","panEnd","panDelta","pan","endEvent","onMouseWheel","stopPropagation","delta","wheelDelta","detail","fov","maxFov","updateProjectionMatrix","minFov","changeEvent","onKeyUp","keyCode","keys","UP","keyUp","BOTTOM","keyBottom","LEFT","keyLeft","RIGHT","keyRight","onKeyDown","noKeys","momentumKeydownFactor","touchstart","touches","TOUCH_ROTATE","pageX","pageY","TOUCH_DOLLY","dx","dy","TOUCH_PAN","touchmove","scale","touchend","frameId","target","center","minDistance","maxDistance","Infinity","minZoom","maxZoom","keyPanSpeed","autoRotate","minPolarAngle","maxPolarAngle","momentumDampingFactor","momentumScalingFactor","minAzimuthAngle","maxAzimuthAngle","MIDDLE","theta","phi","panOffset","offset","phiDelta","thetaDelta","lastPosition","lastQuaternion","target0","clone","position0","position","zoom0","zoom","quat","setFromUnitVectors","up","quatInverse","inverse","type","setLastQuaternion","quaternion","getLastPosition","angle","panLeft","distance","te","matrix","elements","multiplyScalar","panUp","deltaX","deltaY","sub","targetDistance","tan","right","left","top","bottom","momentum","abs","dollyScale","max","min","ignoreUpdate","applyQuaternion","atan2","z","radius","lookAt","distanceToSquared","dot","reset","getPolarAngle","getAzimuthalAngle","prototype","constructor","camera","rotY","rotX","tempX","tempY","rotation","reorder","deviceOrientation","screenOrientation","alpha","alphaOffsetAngle","onDeviceOrientationChangeEvent","onScreenOrientationChangeEvent","orientation","onTouchStartEvent","onTouchMoveEvent","degToRad","updateAlphaOffsetAngle","setCameraQuaternion","beta","gamma","orient","vectorFingerY","zee","euler","q0","q1","fingerQY","fingerQX","setFromAxisAngle","multiply","setFromEuler","connect","disconnect","dispose","direction","axis","_sign","_cosh","exp","_sinhInverse","log","modify","geometry","thirdAxis","crossVectors","P","transpose","InverseP","getInverse","newVertices","oldVertices","anglesBetweenOldandNewVertices","meshGeometryBoundingBoxMaxx","meshGeometryBoundingBoxMinx","meshGeometryBoundingBoxMaxy","meshGeometryBoundingBoxMiny","vertices","applyMatrix4","meshWidthold","meshDepth","ParamB","oldMiddlex","oldMiddley","meshWidth","NewParamB","rightEdgePos","bendCenter","x0","y0","normalize","Q","addVectors","middle","O","acos","computeFaceNormals","verticesNeedUpdate","normalsNeedUpdate","fvNames","fl","faces","face","vertexNormals","vl","rotateMatrix","applyMatrix3","renderer","_camera","_scene","_stereo","aspect","_params","minFilter","magFilter","format","_renderTarget","scissorTest","texture","generateMipmaps","distortion","removeAttribute","toNonIndexed","positions","attributes","array","uvs","uv","count","positions2","Float32Array","uvs2","vector","scalar","material","map","mesh","setSize","width","height","pixelRatio","getPixelRatio","render","scene","updateMatrixWorld","parent","scissor","viewport","cameraL","cameraR","setEyeSeparation","eyeSep","size","getSize","autoClear","clear","setScissorTest","setScissor","setViewport","GSVPANO","PanoLoader","parameters","_zoom","_panoId","_parameters","_panoClient","google","maps","StreetViewService","_count","_total","_canvas","_ctx","_wc","_hc","copyright","levelsW","levelsH","widths","heights","gl","canvas","createElement","getContext","error","maxW","maxH","maxTexSize","getParameter","MAX_TEXTURE_SIZE","setProgress","loaded","total","onProgress","throwError","message","onError","adaptTextureToZoom","ceil","ptr","composeFromTile","px","py","drawImage","progress","round","panoId","onPanoramaLoad","loadFromId","id","composePanorama","url","self","useWebGL","loadTexture","img","Image","panoid","loadPano","getPanoramaById","result","status","StreetViewStatus","OK","onPanoramaData","location","pano","onNoPanoramaData","setZoom","DataImageSource","DataImage","Info","Arrow","FullscreenEnter","FullscreenLeave","VideoPlay","VideoPause","WhiteTile","ReticleIdle","Setting","ChevronRight","Check","ViewIndicator","ReticleDwell","Controls","DEVICEORIENTATION","Modes","UNKNOWN","NORMAL","CARDBOARD","STEREO","checkTouchSupported","msMaxTouchPoints","ImageLoader","onLoad","onImageLoaded","urlCreator","revokeObjectURL","image","cached","request","arrayBufferView","blob","reference","iconName","hasOwnProperty","setTimeout","URL","webkitURL","createElementNS","XMLHttpRequest","open","responseType","onprogress","lengthComputable","onloadend","Uint8Array","response","Blob","createObjectURL","send","TextureLoader","needsUpdate","CubeTextureLoader","urls","all","loadings","index","images","StereographicShader","uniforms","tDiffuse","resolution","transform","vertexShader","join","fragmentShader","Panorama","ImageQualityLow","ImageQualityFair","ImageQualityMedium","ImageQualityHigh","ImageQualitySuperHigh","animationDuration","defaultInfospotSize","container","linkedSpots","isInfospotVisible","linkingImageURL","linkingImageScale","side","visible","infospotAnimation","fadeIn","setContainer","onClick","setupTransitions","invertedObject","Infospot","method","data","scalePlaceHolder","intersects","traverse","HTMLElement","children","forEach","child","getZoomLevel","innerWidth","updateTexture","toggleInfospotVisibility","isVisible","show","hide","setLinkingImage","link","imageScale","imageSrc","spot","toPanorama","fadeInAnimation","fadeOutAnimation","enterTransition","leaveTransition","opacity","fadeOut","onEnter","onLeave","recursiveDispose","ImagePanorama","transparent","HTMLImageElement","GoogleStreetviewPanorama","gsvLoader","loadRequested","setupGoogleMapAPI","loadGSVLoader","script","onreadystatechange","setGSVLoader","onload","getElementsByTagName","appendChild","getGSVLoader","CubePanorama","edgeLength","shader","JSON","parse","BasicPanorama","tile","VideoPanorama","options","playsinline","videoElement","videoRenderObject","videoProgress","isIOS","isMobile","pauseVideo","resumeVideoProgress","toggleVideo","setVideoCurrentTime","setAttribute","onloadeddata","setVideoTexture","querySelectorAll","ontimeupdate","resetVideo","videoTexture","isVideoPaused","percentage","playVideo","isVideoMuted","muteVideo","unmuteVideo","getVideoElement","EmptyPanorama","color","LittlePlanet","source","ratio","EPS","createGeometry","createMaterial","dragging","userMouse","quatA","quatB","quatCur","quatSlerp","vectorX","vectorY","onWindowResize","registerMouseEvents","onContextMenu","unregisterMouseEvents","pinchDistance","onUpdateCallback","angleX","angleY","addZoomDelta","lowerBound","upperBound","slerp","makeRotationFromQuaternion","ImageLittlePlanet","Reticle","autoSelect","idleImageUrl","dwellImageUrl","dwellTime","dwellSpriteAmount","dwellInterval","IDLE","DWELLING","scaleIdle","scaleDwell","textureLoaded","idleTexture","dwellTexture","depthTest","currentTile","startTime","renderOrder","timerId","updateStatus","loadTextures","setupDwellSprite","select","completeCallback","completeDwelling","updateDwelling","clearTimer","wrapS","startDwelling","elasped","cancelDwelling","Tile","widthSegments","heightSegments","forceDirection","forceAxis","forceAngle","bendModifier","entity","animationFadeOut","animationFadeIn","animationTranslation","tweens","bend","originalGeometry","setEntity","unbend","name","toState","ripple","TileGroup","tileArray","verticalGap","depthGap","v_gap","d_gap","animationEasing","visibleDelta","setTexture","originalPosition","updateVisbility","imageArray","outline","updateAllTexture","scrollUp","tiles","scrollDown","getIndex","getTileCount","sharedFont","sharedTexture","pendingQueue","SpriteText","text","maxWidth","addText","generateTextGeometry","generateSDFShader","setBMFont","font","anisotropy","pop","textAnchor","computeBoundingBox","computeBoundingSphere","layout","textMesh","getLayout","Widget","DEFAULT_TRANSITION","TOUCH_ENABLED","PREVENT_EVENT_HANDLER","barElement","fullscreenElement","settingElement","mainMenu","activeMainItem","activeSubMenu","mask","addControlBar","bar","styleTranslate","styleOpacity","gradientStyle","float","webkitTransform","msTransform","background","transition","pointerEvents","isHidden","toggle","menu","createDefaultMenu","createMainMenu","createMask","removeChild","deactivate","handler","title","subMenu","addControlButton","createFullscreenButton","createSettingButton","createVideoControl","display","onTap","activated","activate","item","createCustomItem","backgroundImage","webkitTransition","_width","changeSize","unslideAll","tapSkipped","isFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","onFullScreenChange","stylesheetId","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","querySelector","sheet","innerHTML","controlButton","createVideoControlButton","seekBar","createVideoControlSeekbar","isDragging","mouseX","changedTouches","percentageNow","parseInt","progressElement","addControlListeners","onVideoControlDrag","percentageNext","onVideoControlStop","removeControlListeners","progressElementControl","getBoundingClientRect","offsetX","onDispose","backgroundColor","borderRadius","marginTop","createMenuItem","textContent","padding","textDecoration","cursor","slide","unslide","setIcon","icon","setSelectionTitle","selection","addSelection","fontSize","fontWeight","addIcon","flip","backgroundSize","addSubMenu","items","createSubMenu","createMenuItemHeader","header","borderBottom","paddingBottom","menus","onNextTick","slideAll","parentElement","createMenu","addItem","paddingLeft","setActiveItem","activeItem","addHeader","fontFamily","visibility","boxShadow","overflow","willChange","backgroundRepeat","backgroundPosition","webkitUserSelect","MozUserSelect","userSelect","filter","webkitFilter","mergeStyleOptions","animated","postLoad","naturalWidth","naturalHeight","startScale","scaleUpAnimation","scaleFactor","scaleDownAnimation","isHovering","cursorStyle","mode","HANDLER_FOCUS","showAnimation","hideAnimation","onHover","onHoverStart","onHoverEnd","onDualEyeEffect","onDismiss","setFocusMethod","getContainer","lockHoverElement","unlockHoverElement","mouseEvent","_height","locked","halfWidth","halfHeight","cloneNode","translateElement","verticalDelta","setElementStyle","setText","setCursorHoverStyle","addHoverText","maxHeight","textShadow","addHoverElement","el","removeHoverElement","focus","Viewer","controlBar","controlButtons","autoHideControlBar","autoHideInfospot","horizontalView","clickTolerance","cameraFov","reverseDragging","enableReticle","autoReticleSelect","viewIndicator","indicatorSize","output","innerHeight","antialias","viewIndicatorSize","reticle","tempEnableReticle","OrbitControls","DeviceOrientationControls","CardboardEffect","StereoEffect","controls","effect","panorama","widget","hoverObject","infospot","pressEntityObject","pressObject","raycaster","raycasterPoint","updateCallbacks","requestAnimationId","cameraFrustum","cameraViewProjectionMatrix","outputDivElement","HANDLER_MOUSE_DOWN","HANDLER_MOUSE_UP","HANDLER_MOUSE_MOVE","HANDLER_WINDOW_RESIZE","HANDLER_KEY_DOWN","HANDLER_KEY_UP","HANDLER_TAP","OUTPUT_INFOSPOT","tweenLeftAnimation","tweenUpAnimation","setPixelRatio","devicePixelRatio","setClearColor","sortObjects","passiveRendering","control","addReticle","addDefaultControlBar","addViewIndicator","reverseDraggingDirection","enableReticleControl","registerMouseAndTouchEvents","addOutputElement","registerEventListeners","animate","eventHandler","addPanoramaEventListener","setPanorama","buttonName","leavingPanorama","hideInfospot","afterEnterComplete","dispatchEventToChildren","activateWidgetItem","controlIndex","ControlMenuItem","ModeMenuItem","enableEffect","disableEffect","disableReticleControl","unregisterMouseAndTouchEvents","registerReticleEvent","updateReticleEvent","unregisterReticleEvent","toggleVideoPlay","onVideoUpdate","addUpdateCallback","removeUpdateCallback","showVideoWidget","hideVideoWidget","updateVideoPlayButton","setCameraControl","getControl","getScene","getCamera","getRenderer","getControlName","getNextControlName","getNextControlIndex","nextIndex","setCameraFov","enableControl","disableControl","toggleNextControl","getScreenVector","worldVector","widthHalf","heightHalf","project","checkSpriteInViewport","sprite","matrixWorldInverse","matrixWorld","multiplyMatrices","projectionMatrix","setFromMatrix","intersectsSprite","tweenControlCenter","ha","va","chv","cvv","hv","vv","vptc","ov","nv","getWorldDirection","getWorldPosition","angleTo","tweenControlCenterByObject","isUnderScalePlaceHolder","traverseAncestors","ancestor","invertXVector","windowWidth","windowHeight","expand","contains","documentElement","outputInfospotPosition","point","panoramaWorldPosition","outputPosition","intersectObject","toFixed","info","onTarget","toggleControlBar","intersect_entity","intersect","offsetLeft","offsetTop","setFromCamera","intersectObjects","getConvertedIntersect","passThrough","key","onChange","centerX","centerY","unregisterEventListeners","destory","onPanoramaDispose","loadAsyncRequest","loadViewIndicator","asyncEvent","viewIndicatorDiv","responseXML","indicator","setIndicatorD","currentPanoAngle","fovAngle","leftAngle","rightAngle","leftX","leftY","rightX","rightY","indicatorD","indicatorOnMouseEnter","indicatorOnMouseLeave","appendControlItem","option","group","Error","code","1","TextGeometry","opt","Base","_opt","assign","createLayout","inherits","createIndices","buffer","utils","TypeError","flipY","texWidth","common","scaleW","texHeight","scaleH","glyphs","glyph","bitmap","visibleGlyphs","indices","clockwise","attr","multipage","pages","boundingSphere","itemSize","computeSphere","isNaN","boundingBox","bbox","makeEmpty","computeBox","./lib/utils","./lib/vertices","layout-bmfont-text","object-assign","quad-indices","three-buffer-vertex-data","2","bounds","box","minX","minY","maxX","maxY","3","page","bw","bh","u0","u1","xoffset","yoffset","4","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor","5","TextLayout","_measure","computeMetrics","addGetter","wrapper","Function","getGlyphById","chars","glyphIdx","findChar","getXHeight","X_HEIGHTS","charCodeAt","idx","getMGlyph","M_WIDTHS","getCapHeight","CAP_HEIGHTS","getKerning","kernings","table","kern","first","second","getAlignType","align","ALIGN_CENTER","ALIGN_RIGHT","ALIGN_LEFT","wordWrap","xtend","number","TAB_ID","SPACE_ID","measure","tabSize","_setupSpaceGlyphs","lines","minWidth","maxLineWidth","reduce","prev","line","lineHeight","baseline","base","descender","letterSpacing","_descender","_baseline","_xHeight","_capHeight","_lineHeight","_ascender","lineIndex","lastGlyph","lineWidth","getGlyph","tx","xadvance","_linesTotal","_fallbackSpaceGlyph","_fallbackTabGlyph","space","tabWidth","curPen","curWidth","nextPen","nextWidth","as-number","indexof-property","word-wrapper","6","num","def","7","8","idxOf","chr","isWhitespace","whitespace","pre","lineStart","isNewline","newline","lineEnd","measured","greedy","testWidth","Number","MAX_VALUE","newLine","newlineChar","nextStart","monospace","substring","9","extend","Object","10","Buffer","isArrayBuffer","arr","toString","getBinaryOpts","xml2","req","overrideMimeType","xhr","noop","parseASCII","parseXML","readBinary","isBinaryFormat","cb","uri","binary","err","res","statusCode","isBuffer","encoding","trim","headers","./lib/is-binary","parse-bmfont-ascii","parse-bmfont-binary","parse-bmfont-xml","11","equal","HEADER","buf","slice","buffer-equal","12","equals","13","splitLine","replace","split","str","match","dt","parseData","out","parseIntList","val","lineData","file","14","readBlock","blockID","readUInt8","blockSize","readInt32LE","readInfo","readCommon","readPages","readChars","readKernings","readInt16LE","bitField","smooth","unicode","italic","bold","fixedHeight","charset","stretchH","readUInt16LE","aa","readInt8","spacing","readStringNT","packed","alphaChnl","redChnl","greenChnl","blueChnl","readNameNT","len","char","off","readUInt32LE","chnl","pos","every","byte","15","getAttribs","getAttribList","dict","attrib","mapName","nodeName","nodeValue","attribs","NAME_MAP","toLowerCase","parseAttributes","parseFromString","scaleh","scalew","stretchh","lineheight","alphachnl","redchnl","greenchnl","bluechnl","xmlRoot","pageRoot","getAttribute","childTag","./parse-attribs","xml-parse-from-string","obj","17","DOMParser","ActiveXObject","xmlDoc","async","loadXML","div","18","isEmpty","initParams","params","isFunction","createXHR","_createXHR","readystatechange","loadFunc","getBody","responseText","isJson","errorFunc","evt","clearTimeout","timeoutTimer","failureResponse","aborted","useXDR","rawRequest","getAllResponseHeaders","parseHeaders","once","cors","XDomainRequest","sync","json","onerror","ontimeout","username","password","withCredentials","timeout","abort","setRequestHeader","beforeSend","iterator","toUpperCase","global/window","is-function","parse-headers","19","20","string","alert","confirm","prompt","21","called","apply","proto","defineProperty","22","list","context","forEachArray","forEachString","forEachObject","23","24","isArray","arg","row","for-each","25","dup","26","toObject","propIsEnumerable","propertyIsEnumerable","from","symbols","dtype","anArray","CW","CCW","dir","numIndices","j","an-array","is-buffer","28","BYTES_PER_ELEMENT","29","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Float64Array","Uint8ClampedArray","30","_isBuffer","31","setIndex","isR69","newAttrib","updateAttribute","addAttribute","rebuildAttribute","flatten","attribLength","flatten-vertex-data","32","flattenVertexData","dim","dstLength","Ctor","33","34","alphaTest","precision","35","loadFont","tex","load-bmfont","36","createText","SDFShader","loadBMFont","fontObject","../","../shaders/sdf","./load","37","kMaxLength","TYPED_ARRAY_SUPPORT","fromNumber","fromString","fromObject","that","allocate","checked","byteLength","write","fromBuffer","fromArray","ArrayBuffer","fromTypedArray","fromArrayBuffer","fromArrayLike","fromJsonObject","__proto__","poolSize","rootParent","RangeError","SlowBuffer","subject","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","binarySlice","base64Slice","utf16leSlice","hexWrite","remaining","strLen","parsed","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","binaryWrite","base64Write","ucs2Write","utf16leToBytes","base64","fromByteArray","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","String","fromCharCode","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","stringtrim","INVALID_BASE64_RE","units","leadSurrogate","byteArray","hi","lo","toByteArray","dst","INSPECT_MAX_BYTES","foo","subarray","compare","isEncoding","inspect","byteOffset","arrayIndexOf","foundIndex","swap","toJSON","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt16BE","readUInt32BE","readIntLE","readIntBE","readInt16BE","readInt32BE","readFloatLE","read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","fill","base64-js","isarray","38","decode","elt","PLUS","PLUS_URL_SAFE","SLASH","SLASH_URL_SAFE","NUMBER","UPPER","LOWER","b64ToByteArray","b64","L","placeHolders","Arr","uint8ToBase64","uint8","encode","lookup","temp","extraBytes","base64js","39","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","40","315","316","317","318","319","320","321","322","_vm","_h","$createElement","_self","_c","staticStyle","margin","border","staticRenderFns","323","staticClass","_t","_v","ref","_s","_f","vueCode","htmlCode","324","attrs","325","vue-code","html-code","slot","on","on-load","directives","rawName","expression","326","327","328","links","on-load-start","onLoadStart","329","330","331","scenes","333","content","locals","334","335","336","337","41","62","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__pages__","use","routes","path","component","redirect","63","64","__WEBPACK_IMPORTED_MODULE_1__App_vue__","__WEBPACK_IMPORTED_MODULE_1__App_vue___default","__WEBPACK_IMPORTED_MODULE_2__router__","router","65","__WEBPACK_IMPORTED_MODULE_0__demo_pano__","__WEBPACK_IMPORTED_MODULE_0__demo_pano___default","__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__","__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default","__WEBPACK_IMPORTED_MODULE_2__demo_video_pano__","__WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default","__WEBPACK_IMPORTED_MODULE_3__demo_scene__","__WEBPACK_IMPORTED_MODULE_3__demo_scene___default","__WEBPACK_IMPORTED_MODULE_4__demo_tour__","__WEBPACK_IMPORTED_MODULE_4__demo_tour___default","66","67","__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__","__WEBPACK_IMPORTED_MODULE_1_highlight_js__","__WEBPACK_IMPORTED_MODULE_1_highlight_js___default","codeHandler","props","default","mounted","highlightBlock","$refs","filters","components","68","__WEBPACK_IMPORTED_MODULE_0__components_demo_block__","__WEBPACK_IMPORTED_MODULE_0__components_demo_block___default","__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__","__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default","loading","methods","Pano","DemoBlock","69","70","__WEBPACK_IMPORTED_MODULE_1__src_Scene_vue__","__WEBPACK_IMPORTED_MODULE_1__src_Scene_vue___default","sceneId","Scene","71","__WEBPACK_IMPORTED_MODULE_1__src_Tour_vue__","__WEBPACK_IMPORTED_MODULE_1__src_Tour_vue___default","rx","rz","ry","connections","Tour","initialScene","72","73","__WEBPACK_IMPORTED_MODULE_0__lib_panolens__","_log","viewer","created","onResize","destroyed","$el","offsetWidth","offsetHeight","watch","_this","$nextTick","setPano","$emit","74","addHotspot","hotspotData","__WEBPACK_IMPORTED_MODULE_1_three__","emissive","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","geometryBorder","materialBorder","circle","hotspot","merged","updateMatrix","merge","toRadian","targetScene","addArrow","currentPosition","arrowGeometry","makeArrowGeometry","arrowMaterial","arrow","x1","z1","x2","z2","ath","toDegree","arrowPos","sphereToWorld","DEG2RAD","moveTo","lineTo","atv","mY","mX","mZ","scene_index","hotspots","loadScene","_this2","initViewer","INTERSECTED","getSceneIndexByKey","mouse","intersectedObject","setHex","currentHex","getHex","translateZ","translateX","translateY","near","75","sceneIndex","arrowGroup","rate"],"mappings":"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","file":"assets/js/app.1ea447697a7b3f526cea.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 129:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(15)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"div[data-v-09ad1f51]{cursor:pointer}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 130:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(15)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:70%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:30%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .hljs{background:transparent}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 131:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(15)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.demos,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.demos-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.demos-header .title{font-weight:700;font-size:18px;display:inline-block}.demos-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.demos-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.demos-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.demos-menu .demos-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.demos-menu .demos-menu-item>a{display:block;width:100%;height:100%}.demos-menu .demos-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.demos-menu .demos-menu-item:hover>a{color:#39f}.demos-pages{height:100%;overflow:hidden}.demo-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.demo-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;animation:loading-rotate .75s 0s linear infinite}.demo-loading:after,.demo-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.demo-loading:after{height:100%;width:0}@keyframes loading-rotate{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(.6)}to{transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 132:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(15)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"div[data-v-66d382e3]{cursor:pointer}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 133:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(15)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".v-pano{width:100%;height:100%;margin:0;padding:0;border:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 134:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 16:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(334)\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(67),\n  /* template */\n  __webpack_require__(323),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 27:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process, module, global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_three__ = __webpack_require__(40);\nvar require;var require;\n\n\n\n\n\n\n\n\n\nvar PANOLENS = { REVISION: '9' };\n\nvar enableInlineVideo = function () {\n  'use strict';\n\n  function e(e, i, n, r) {\n    function t(n) {\n      d = i(t, r), e(n - (a || n)), a = n;\n    }var d, a;return { start: function start() {\n        d || t(0);\n      }, stop: function stop() {\n        n(d), d = null, a = 0;\n      } };\n  }function i(i) {\n    return e(i, requestAnimationFrame, cancelAnimationFrame);\n  }function n(e, i, n) {\n    function r(r) {\n      n && !n(e, i) || r.stopImmediatePropagation();\n    }return e.addEventListener(i, r), r;\n  }function r(e, i, n, r) {\n    function t() {\n      return n[i];\n    }function d(e) {\n      n[i] = e;\n    }r && d(e[i]), __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default()(e, i, { get: t, set: d });\n  }function t(e, i, n) {\n    n.addEventListener(i, function () {\n      return e.dispatchEvent(new Event(i));\n    });\n  }function d(e, i) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default.a.resolve().then(function () {\n      e.dispatchEvent(new Event(i));\n    });\n  }function a(e) {\n    var i = new Audio();return t(e, 'play', i), t(e, 'playing', i), t(e, 'pause', i), i.crossOrigin = e.crossOrigin, i.src = e.src || e.currentSrc || 'data:', i;\n  }function u(e, i, n) {\n    (m || 0) + 200 < Date.now() && (e[h] = !0, m = Date.now()), n || (e.currentTime = i), k[++T % 3] = 100 * i | 0;\n  }function o(e) {\n    return e.driver.currentTime >= e.video.duration;\n  }function s(e) {\n    var i = this;i.video.readyState >= i.video.HAVE_FUTURE_DATA ? (i.hasAudio || (i.driver.currentTime = i.video.currentTime + e * i.video.playbackRate / 1e3, i.video.loop && o(i) && (i.driver.currentTime = 0)), u(i.video, i.driver.currentTime)) : i.video.networkState === i.video.NETWORK_IDLE && i.video.buffered.length === 0 && i.video.load(), i.video.ended && (delete i.video[h], i.video.pause(!0));\n  }function c() {\n    var e = this,\n        i = e[g];if (e.webkitDisplayingFullscreen) return void e[E]();i.driver.src !== 'data:' && i.driver.src !== e.src && (u(e, 0, !0), i.driver.src = e.src), e.paused && (i.paused = !1, e.buffered.length === 0 && e.load(), i.driver.play(), i.updater.start(), i.hasAudio || (d(e, 'play'), i.video.readyState >= i.video.HAVE_ENOUGH_DATA && d(e, 'playing')));\n  }function v(e) {\n    var i = this,\n        n = i[g];n.driver.pause(), n.updater.stop(), i.webkitDisplayingFullscreen && i[w](), n.paused && !e || (n.paused = !0, n.hasAudio || d(i, 'pause'), i.ended && !i.webkitDisplayingFullscreen && (i[h] = !0, d(i, 'ended')));\n  }function p(e, n) {\n    var r = {};e[g] = r, r.paused = !0, r.hasAudio = n, r.video = e, r.updater = i(s.bind(r)), n ? r.driver = a(e) : (e.addEventListener('canplay', function () {\n      e.paused || d(e, 'playing');\n    }), r.driver = { src: e.src || e.currentSrc || 'data:', muted: !0, paused: !0, pause: function pause() {\n        r.driver.paused = !0;\n      }, play: function play() {\n        r.driver.paused = !1, o(r) && u(e, 0);\n      }, get ended() {\n        return o(r);\n      } }), e.addEventListener('emptied', function () {\n      var i = !r.driver.src || r.driver.src === 'data:';r.driver.src && r.driver.src !== e.src && (u(e, 0, !0), r.driver.src = e.src, i || !n && e.autoplay ? r.driver.play() : r.updater.stop());\n    }, !1), e.addEventListener('webkitbeginfullscreen', function () {\n      e.paused ? n && r.driver.buffered.length === 0 && r.driver.load() : (e.pause(), e[E]());\n    }), n && (e.addEventListener('webkitendfullscreen', function () {\n      r.driver.currentTime = e.currentTime;\n    }), e.addEventListener('seeking', function () {\n      k.indexOf(100 * e.currentTime | 0) < 0 && (r.driver.currentTime = e.currentTime);\n    }));\n  }function l(e) {\n    var i = e[h];return delete e[h], !e.webkitDisplayingFullscreen && !i;\n  }function f(e) {\n    var i = e[g];e[E] = e.play, e[w] = e.pause, e.play = c, e.pause = v, r(e, 'paused', i.driver), r(e, 'muted', i.driver, !0), r(e, 'playbackRate', i.driver, !0), r(e, 'ended', i.driver), r(e, 'loop', i.driver, !0), n(e, 'seeking', function (e) {\n      return !e.webkitDisplayingFullscreen;\n    }), n(e, 'seeked', function (e) {\n      return !e.webkitDisplayingFullscreen;\n    }), n(e, 'timeupdate', l), n(e, 'ended', l);\n  }function y(e, i) {\n    if (void 0 === i && (i = {}), !e[g]) {\n      if (!i.everywhere) {\n        if (!b) return;if (!(i.iPad || i.ipad ? /iPhone|iPod|iPad/ : /iPhone|iPod/).test(navigator.userAgent)) return;\n      }e.pause();var n = e.autoplay;e.autoplay = !1, p(e, !e.muted), f(e), e.classList.add('IIV'), e.muted && n && (e.play(), e.addEventListener('playing', function i() {\n        e.autoplay = !0, e.removeEventListener('playing', i);\n      })), /iPhone|iPod|iPad/.test(navigator.platform) || console.warn('iphone-inline-video is not guaranteed to work in emulated environments');\n    }\n  }var m,\n      b = (typeof document === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default()(document)) === 'object' && 'object-fit' in document.head.style && !matchMedia('(-webkit-video-playable-inline)').matches,\n      g = 'bfred-it:iphone-inline-video',\n      h = 'bfred-it:iphone-inline-video:event',\n      E = 'bfred-it:iphone-inline-video:nativeplay',\n      w = 'bfred-it:iphone-inline-video:nativepause',\n      k = [],\n      T = 0;return y;\n}();\n\n\nvar TWEEN = TWEEN || function () {\n  var _tweens = [];\n\n  return {\n\n    getAll: function getAll() {\n      return _tweens;\n    },\n\n    removeAll: function removeAll() {\n      _tweens = [];\n    },\n\n    add: function add(tween) {\n      _tweens.push(tween);\n    },\n\n    remove: function remove(tween) {\n      var i = _tweens.indexOf(tween);\n\n      if (i !== -1) {\n        _tweens.splice(i, 1);\n      }\n    },\n\n    update: function update(time, preserve) {\n      if (_tweens.length === 0) {\n        return false;\n      }\n\n      var i = 0;\n\n      time = time !== undefined ? time : TWEEN.now();\n\n      while (i < _tweens.length) {\n        if (_tweens[i].update(time) || preserve) {\n          i++;\n        } else {\n          _tweens.splice(i, 1);\n        }\n      }\n\n      return true;\n    }\n  };\n}();\n\nif (typeof window === 'undefined' && typeof process !== 'undefined') {\n  TWEEN.now = function () {\n    var time = process.hrtime();\n\n    return time[0] * 1000 + time[1] / 1000000;\n  };\n} else if (typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined) {\n    TWEEN.now = window.performance.now.bind(window.performance);\n  } else if (Date.now !== undefined) {\n      TWEEN.now = Date.now;\n    } else {\n        TWEEN.now = function () {\n          return new Date().getTime();\n        };\n      }\n\nTWEEN.Tween = function (object) {\n  var _object = object;\n  var _valuesStart = {};\n  var _valuesEnd = {};\n  var _valuesStartRepeat = {};\n  var _duration = 1000;\n  var _repeat = 0;\n  var _repeatDelayTime;\n  var _yoyo = false;\n  var _isPlaying = false;\n  var _reversed = false;\n  var _delayTime = 0;\n  var _startTime = null;\n  var _easingFunction = TWEEN.Easing.Linear.None;\n  var _interpolationFunction = TWEEN.Interpolation.Linear;\n  var _chainedTweens = [];\n  var _onStartCallback = null;\n  var _onStartCallbackFired = false;\n  var _onUpdateCallback = null;\n  var _onCompleteCallback = null;\n  var _onStopCallback = null;\n\n  this.to = function (properties, duration) {\n    _valuesEnd = properties;\n\n    if (duration !== undefined) {\n      _duration = duration;\n    }\n\n    return this;\n  };\n\n  this.start = function (time) {\n    TWEEN.add(this);\n\n    _isPlaying = true;\n\n    _onStartCallbackFired = false;\n\n    _startTime = time !== undefined ? time : TWEEN.now();\n    _startTime += _delayTime;\n\n    for (var property in _valuesEnd) {\n      if (_valuesEnd[property] instanceof Array) {\n        if (_valuesEnd[property].length === 0) {\n          continue;\n        }\n\n        _valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n      }\n\n      if (_object[property] === undefined) {\n        continue;\n      }\n\n      _valuesStart[property] = _object[property];\n\n      if (_valuesStart[property] instanceof Array === false) {\n        _valuesStart[property] *= 1.0;\n      }\n\n      _valuesStartRepeat[property] = _valuesStart[property] || 0;\n    }\n\n    return this;\n  };\n\n  this.stop = function () {\n    if (!_isPlaying) {\n      return this;\n    }\n\n    TWEEN.remove(this);\n    _isPlaying = false;\n\n    if (_onStopCallback !== null) {\n      _onStopCallback.call(_object, _object);\n    }\n\n    this.stopChainedTweens();\n    return this;\n  };\n\n  this.end = function () {\n    this.update(_startTime + _duration);\n    return this;\n  };\n\n  this.stopChainedTweens = function () {\n    for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n      _chainedTweens[i].stop();\n    }\n  };\n\n  this.delay = function (amount) {\n    _delayTime = amount;\n    return this;\n  };\n\n  this.repeat = function (times) {\n    _repeat = times;\n    return this;\n  };\n\n  this.repeatDelay = function (amount) {\n    _repeatDelayTime = amount;\n    return this;\n  };\n\n  this.yoyo = function (yoyo) {\n    _yoyo = yoyo;\n    return this;\n  };\n\n  this.easing = function (easing) {\n    _easingFunction = easing;\n    return this;\n  };\n\n  this.interpolation = function (interpolation) {\n    _interpolationFunction = interpolation;\n    return this;\n  };\n\n  this.chain = function () {\n    _chainedTweens = arguments;\n    return this;\n  };\n\n  this.onStart = function (callback) {\n    _onStartCallback = callback;\n    return this;\n  };\n\n  this.onUpdate = function (callback) {\n    _onUpdateCallback = callback;\n    return this;\n  };\n\n  this.onComplete = function (callback) {\n    _onCompleteCallback = callback;\n    return this;\n  };\n\n  this.onStop = function (callback) {\n    _onStopCallback = callback;\n    return this;\n  };\n\n  this.update = function (time) {\n    var property;\n    var elapsed;\n    var value;\n\n    if (time < _startTime) {\n      return true;\n    }\n\n    if (_onStartCallbackFired === false) {\n      if (_onStartCallback !== null) {\n        _onStartCallback.call(_object, _object);\n      }\n\n      _onStartCallbackFired = true;\n    }\n\n    elapsed = (time - _startTime) / _duration;\n    elapsed = elapsed > 1 ? 1 : elapsed;\n\n    value = _easingFunction(elapsed);\n\n    for (property in _valuesEnd) {\n      if (_valuesStart[property] === undefined) {\n        continue;\n      }\n\n      var start = _valuesStart[property] || 0;\n      var end = _valuesEnd[property];\n\n      if (end instanceof Array) {\n        _object[property] = _interpolationFunction(end, value);\n      } else {\n        if (typeof end === 'string') {\n          if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            end = start + parseFloat(end);\n          } else {\n            end = parseFloat(end);\n          }\n        }\n\n        if (typeof end === 'number') {\n          _object[property] = start + (end - start) * value;\n        }\n      }\n    }\n\n    if (_onUpdateCallback !== null) {\n      _onUpdateCallback.call(_object, value);\n    }\n\n    if (elapsed === 1) {\n      if (_repeat > 0) {\n        if (isFinite(_repeat)) {\n          _repeat--;\n        }\n\n        for (property in _valuesStartRepeat) {\n          if (typeof _valuesEnd[property] === 'string') {\n            _valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property]);\n          }\n\n          if (_yoyo) {\n            var tmp = _valuesStartRepeat[property];\n\n            _valuesStartRepeat[property] = _valuesEnd[property];\n            _valuesEnd[property] = tmp;\n          }\n\n          _valuesStart[property] = _valuesStartRepeat[property];\n        }\n\n        if (_yoyo) {\n          _reversed = !_reversed;\n        }\n\n        if (_repeatDelayTime !== undefined) {\n          _startTime = time + _repeatDelayTime;\n        } else {\n          _startTime = time + _delayTime;\n        }\n\n        return true;\n      } else {\n        if (_onCompleteCallback !== null) {\n          _onCompleteCallback.call(_object, _object);\n        }\n\n        for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n          _chainedTweens[i].start(_startTime + _duration);\n        }\n\n        return false;\n      }\n    }\n\n    return true;\n  };\n};\n\nTWEEN.Easing = {\n\n  Linear: {\n\n    None: function None(k) {\n      return k;\n    }\n\n  },\n\n  Quadratic: {\n\n    In: function In(k) {\n      return k * k;\n    },\n\n    Out: function Out(k) {\n      return k * (2 - k);\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k;\n      }\n\n      return -0.5 * (--k * (k - 2) - 1);\n    }\n\n  },\n\n  Cubic: {\n\n    In: function In(k) {\n      return k * k * k;\n    },\n\n    Out: function Out(k) {\n      return --k * k * k + 1;\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2);\n    }\n\n  },\n\n  Quartic: {\n\n    In: function In(k) {\n      return k * k * k * k;\n    },\n\n    Out: function Out(k) {\n      return 1 - --k * k * k * k;\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k;\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2);\n    }\n\n  },\n\n  Quintic: {\n\n    In: function In(k) {\n      return k * k * k * k * k;\n    },\n\n    Out: function Out(k) {\n      return --k * k * k * k * k + 1;\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In: function In(k) {\n      return 1 - Math.cos(k * Math.PI / 2);\n    },\n\n    Out: function Out(k) {\n      return Math.sin(k * Math.PI / 2);\n    },\n\n    InOut: function InOut(k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n\n  },\n\n  Exponential: {\n\n    In: function In(k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n\n    Out: function Out(k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n\n    InOut: function InOut(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1);\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    }\n\n  },\n\n  Circular: {\n\n    In: function In(k) {\n      return 1 - Math.sqrt(1 - k * k);\n    },\n\n    Out: function Out(k) {\n      return Math.sqrt(1 - --k * k);\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1);\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    }\n\n  },\n\n  Elastic: {\n\n    In: function In(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n    },\n\n    Out: function Out(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n    },\n\n    InOut: function InOut(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      k *= 2;\n\n      if (k < 1) {\n        return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n      }\n\n      return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n    }\n\n  },\n\n  Back: {\n\n    In: function In(k) {\n      var s = 1.70158;\n\n      return k * k * ((s + 1) * k - s);\n    },\n\n    Out: function Out(k) {\n      var s = 1.70158;\n\n      return --k * k * ((s + 1) * k + s) + 1;\n    },\n\n    InOut: function InOut(k) {\n      var s = 1.70158 * 1.525;\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s));\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    }\n\n  },\n\n  Bounce: {\n\n    In: function In(k) {\n      return 1 - TWEEN.Easing.Bounce.Out(1 - k);\n    },\n\n    Out: function Out(k) {\n      if (k < 1 / 2.75) {\n        return 7.5625 * k * k;\n      } else if (k < 2 / 2.75) {\n        return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n      } else if (k < 2.5 / 2.75) {\n        return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n      } else {\n        return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n      }\n    },\n\n    InOut: function InOut(k) {\n      if (k < 0.5) {\n        return TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n      }\n\n      return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n    }\n\n  }\n\n};\n\nTWEEN.Interpolation = {\n\n  Linear: function Linear(v, k) {\n    var m = v.length - 1;\n    var f = m * k;\n    var i = Math.floor(f);\n    var fn = TWEEN.Interpolation.Utils.Linear;\n\n    if (k < 0) {\n      return fn(v[0], v[1], f);\n    }\n\n    if (k > 1) {\n      return fn(v[m], v[m - 1], m - f);\n    }\n\n    return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n  },\n\n  Bezier: function Bezier(v, k) {\n    var b = 0;\n    var n = v.length - 1;\n    var pw = Math.pow;\n    var bn = TWEEN.Interpolation.Utils.Bernstein;\n\n    for (var i = 0; i <= n; i++) {\n      b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n    }\n\n    return b;\n  },\n\n  CatmullRom: function CatmullRom(v, k) {\n    var m = v.length - 1;\n    var f = m * k;\n    var i = Math.floor(f);\n    var fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n    if (v[0] === v[m]) {\n      if (k < 0) {\n        i = Math.floor(f = m * (1 + k));\n      }\n\n      return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n    } else {\n      if (k < 0) {\n        return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n      }\n\n      if (k > 1) {\n        return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n      }\n\n      return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n    }\n  },\n\n  Utils: {\n\n    Linear: function Linear(p0, p1, t) {\n      return (p1 - p0) * t + p0;\n    },\n\n    Bernstein: function Bernstein(n, i) {\n      var fc = TWEEN.Interpolation.Utils.Factorial;\n\n      return fc(n) / fc(i) / fc(n - i);\n    },\n\n    Factorial: function () {\n      var a = [1];\n\n      return function (n) {\n        var s = 1;\n\n        if (a[n]) {\n          return a[n];\n        }\n\n        for (var i = n; i > 1; i--) {\n          s *= i;\n        }\n\n        a[n] = s;\n        return s;\n      };\n    }(),\n\n    CatmullRom: function CatmullRom(p0, p1, p2, p3, t) {\n      var v0 = (p2 - p0) * 0.5;\n      var v1 = (p3 - p1) * 0.5;\n      var t2 = t * t;\n      var t3 = t * t2;\n\n      return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n    }\n\n  }\n\n};\n\n(function (root) {\n  if (typeof define === 'function' && __webpack_require__(339)) {\n    define([], function () {\n      return TWEEN;\n    });\n  } else if (typeof module !== 'undefined' && (typeof exports === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default()(exports)) === 'object') {\n    module.exports = TWEEN;\n  } else if (root !== undefined) {\n    root.TWEEN = TWEEN;\n  }\n})(this);\n\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"] = function (object, domElement) {\n  this.object = object;\n  this.domElement = domElement !== undefined ? domElement : document;\n  this.frameId;\n\n  this.enabled = true;\n\n  this.target = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  this.center = this.target;\n\n  this.noZoom = false;\n  this.zoomSpeed = 1.0;\n\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  this.minZoom = 0;\n  this.maxZoom = Infinity;\n\n  this.noRotate = false;\n  this.rotateSpeed = -0.15;\n\n  this.noPan = true;\n  this.keyPanSpeed = 7.0;\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0;\n  this.minPolarAngle = 0;\n  this.maxPolarAngle = Math.PI;\n  this.momentumDampingFactor = 0.90;\n  this.momentumScalingFactor = -0.005;\n  this.momentumKeydownFactor = 20;\n\n  this.minFov = 30;\n  this.maxFov = 120;\n\n  this.minAzimuthAngle = -Infinity;\n  this.maxAzimuthAngle = Infinity;\n  this.noKeys = false;\n\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n  this.mouseButtons = { ORBIT: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].LEFT, ZOOM: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].MIDDLE, PAN: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].RIGHT };\n\n  var scope = this;\n\n  var EPS = 10e-8;\n  var MEPS = 10e-5;\n\n  var rotateStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var rotateEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var rotateDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n  var panStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var panEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var panDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var panOffset = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  var offset = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  var dollyStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var dollyEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var dollyDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n  var theta;\n  var phi;\n  var phiDelta = 0;\n  var thetaDelta = 0;\n  var scale = 1;\n  var pan = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  var lastPosition = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n  var lastQuaternion = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n  var momentumLeft = 0,\n      momentumUp = 0;\n  var eventCurrent, eventPrevious;\n  var momentumOn = false;\n\n  var keyUp, keyBottom, keyLeft, keyRight;\n\n  var STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n  var state = STATE.NONE;\n\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  var quat = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]().setFromUnitVectors(object.up, new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0));\n  var quatInverse = quat.clone().inverse();\n\n  var changeEvent = { type: 'change' };\n  var startEvent = { type: 'start' };\n  var endEvent = { type: 'end' };\n\n  this.setLastQuaternion = function (quaternion) {\n    lastQuaternion.copy(quaternion);\n    scope.object.quaternion.copy(quaternion);\n  };\n\n  this.getLastPosition = function () {\n    return lastPosition;\n  };\n\n  this.rotateLeft = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle();\n    }\n\n    thetaDelta -= angle;\n  };\n\n  this.rotateUp = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle();\n    }\n\n    phiDelta -= angle;\n  };\n\n  this.panLeft = function (distance) {\n    var te = this.object.matrix.elements;\n\n    panOffset.set(te[0], te[1], te[2]);\n    panOffset.multiplyScalar(-distance);\n\n    pan.add(panOffset);\n  };\n\n  this.panUp = function (distance) {\n    var te = this.object.matrix.elements;\n\n    panOffset.set(te[4], te[5], te[6]);\n    panOffset.multiplyScalar(distance);\n\n    pan.add(panOffset);\n  };\n\n  this.pan = function (deltaX, deltaY) {\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n      var position = scope.object.position;\n      var offset = position.clone().sub(scope.target);\n      var targetDistance = offset.length();\n\n      targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n      scope.panLeft(2 * deltaX * targetDistance / element.clientHeight);\n      scope.panUp(2 * deltaY * targetDistance / element.clientHeight);\n    } else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n      scope.panLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth);\n      scope.panUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight);\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n    }\n  };\n\n  this.momentum = function () {\n    if (!momentumOn) return;\n\n    if (Math.abs(momentumLeft) < MEPS && Math.abs(momentumUp) < MEPS) {\n      momentumOn = false;\n      return;\n    }\n\n    momentumUp *= this.momentumDampingFactor;\n    momentumLeft *= this.momentumDampingFactor;\n\n    thetaDelta -= this.momentumScalingFactor * momentumLeft;\n    phiDelta -= this.momentumScalingFactor * momentumUp;\n  };\n\n  this.dollyIn = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale();\n    }\n\n    if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n      scale /= dollyScale;\n    } else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale));\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(changeEvent);\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n    }\n  };\n\n  this.dollyOut = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale();\n    }\n\n    if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n      scale *= dollyScale;\n    } else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale));\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(changeEvent);\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n    }\n  };\n\n  this.update = function (ignoreUpdate) {\n    var position = this.object.position;\n\n    offset.copy(position).sub(this.target);\n\n    offset.applyQuaternion(quat);\n\n    theta = Math.atan2(offset.x, offset.z);\n\n    phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y);\n\n    if (this.autoRotate && state === STATE.NONE) {\n      this.rotateLeft(getAutoRotationAngle());\n    }\n\n    this.momentum();\n\n    theta += thetaDelta;\n    phi += phiDelta;\n\n    theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta));\n\n    phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi));\n\n    phi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\n\n    var radius = offset.length() * scale;\n\n    radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\n\n    this.target.add(pan);\n\n    offset.x = radius * Math.sin(phi) * Math.sin(theta);\n    offset.y = radius * Math.cos(phi);\n    offset.z = radius * Math.sin(phi) * Math.cos(theta);\n\n    offset.applyQuaternion(quatInverse);\n\n    position.copy(this.target).add(offset);\n\n    this.object.lookAt(this.target);\n\n    thetaDelta = 0;\n    phiDelta = 0;\n    scale = 1;\n    pan.set(0, 0, 0);\n\n    if (lastPosition.distanceToSquared(this.object.position) > EPS || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n      ignoreUpdate !== true && this.dispatchEvent(changeEvent);\n\n      lastPosition.copy(this.object.position);\n      lastQuaternion.copy(this.object.quaternion);\n    }\n  };\n\n  this.reset = function () {\n    state = STATE.NONE;\n\n    this.target.copy(this.target0);\n    this.object.position.copy(this.position0);\n    this.object.zoom = this.zoom0;\n\n    this.object.updateProjectionMatrix();\n    this.dispatchEvent(changeEvent);\n\n    this.update();\n  };\n\n  this.getPolarAngle = function () {\n    return phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n    return theta;\n  };\n\n  function getAutoRotationAngle() {\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale() {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function onMouseDown(event) {\n    momentumOn = false;\n\n    momentumLeft = momentumUp = 0;\n\n    if (scope.enabled === false) return;\n    event.preventDefault();\n\n    if (event.button === scope.mouseButtons.ORBIT) {\n      if (scope.noRotate === true) return;\n\n      state = STATE.ROTATE;\n\n      rotateStart.set(event.clientX, event.clientY);\n    } else if (event.button === scope.mouseButtons.ZOOM) {\n      if (scope.noZoom === true) return;\n\n      state = STATE.DOLLY;\n\n      dollyStart.set(event.clientX, event.clientY);\n    } else if (event.button === scope.mouseButtons.PAN) {\n      if (scope.noPan === true) return;\n\n      state = STATE.PAN;\n\n      panStart.set(event.clientX, event.clientY);\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener('mousemove', onMouseMove, false);\n      document.addEventListener('mouseup', onMouseUp, false);\n      scope.dispatchEvent(startEvent);\n    }\n\n    scope.update();\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    if (state === STATE.ROTATE) {\n      if (scope.noRotate === true) return;\n\n      rotateEnd.set(event.clientX, event.clientY);\n      rotateDelta.subVectors(rotateEnd, rotateStart);\n\n      scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n      scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n      rotateStart.copy(rotateEnd);\n\n      if (eventPrevious) {\n        momentumLeft = event.clientX - eventPrevious.clientX;\n        momentumUp = event.clientY - eventPrevious.clientY;\n      }\n\n      eventPrevious = event;\n    } else if (state === STATE.DOLLY) {\n      if (scope.noZoom === true) return;\n\n      dollyEnd.set(event.clientX, event.clientY);\n      dollyDelta.subVectors(dollyEnd, dollyStart);\n\n      if (dollyDelta.y > 0) {\n        scope.dollyIn();\n      } else if (dollyDelta.y < 0) {\n        scope.dollyOut();\n      }\n\n      dollyStart.copy(dollyEnd);\n    } else if (state === STATE.PAN) {\n      if (scope.noPan === true) return;\n\n      panEnd.set(event.clientX, event.clientY);\n      panDelta.subVectors(panEnd, panStart);\n\n      scope.pan(panDelta.x, panDelta.y);\n\n      panStart.copy(panEnd);\n    }\n\n    if (state !== STATE.NONE) scope.update();\n  }\n\n  function onMouseUp() {\n    momentumOn = true;\n\n    eventPrevious = undefined;\n\n    if (scope.enabled === false) return;\n\n    document.removeEventListener('mousemove', onMouseMove, false);\n    document.removeEventListener('mouseup', onMouseUp, false);\n    scope.dispatchEvent(endEvent);\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n    if (scope.enabled === false || scope.noZoom === true || state !== STATE.NONE) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    var delta = 0;\n\n    if (event.wheelDelta !== undefined) {\n      delta = event.wheelDelta;\n    } else if (event.detail !== undefined) {\n      delta = -event.detail;\n    }\n\n    if (delta > 0) {\n      scope.object.fov = scope.object.fov < scope.maxFov ? scope.object.fov + 1 : scope.maxFov;\n      scope.object.updateProjectionMatrix();\n    } else if (delta < 0) {\n      scope.object.fov = scope.object.fov > scope.minFov ? scope.object.fov - 1 : scope.minFov;\n      scope.object.updateProjectionMatrix();\n    }\n\n    scope.update();\n    scope.dispatchEvent(changeEvent);\n    scope.dispatchEvent(startEvent);\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyUp(event) {\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = false;\n        break;\n\n      case scope.keys.BOTTOM:\n        keyBottom = false;\n        break;\n\n      case scope.keys.LEFT:\n        keyLeft = false;\n        break;\n\n      case scope.keys.RIGHT:\n        keyRight = false;\n        break;\n    }\n  }\n\n  function onKeyDown(event) {\n    if (scope.enabled === false || scope.noKeys === true || scope.noRotate === true) return;\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = true;\n        break;\n\n      case scope.keys.BOTTOM:\n        keyBottom = true;\n        break;\n\n      case scope.keys.LEFT:\n        keyLeft = true;\n        break;\n\n      case scope.keys.RIGHT:\n        keyRight = true;\n        break;\n    }\n\n    if (keyUp || keyBottom || keyLeft || keyRight) {\n      momentumOn = true;\n\n      if (keyUp) momentumUp = -scope.rotateSpeed * scope.momentumKeydownFactor;\n      if (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor;\n      if (keyLeft) momentumLeft = -scope.rotateSpeed * scope.momentumKeydownFactor;\n      if (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor;\n    }\n  }\n\n  function touchstart(event) {\n    momentumOn = false;\n\n    momentumLeft = momentumUp = 0;\n\n    if (scope.enabled === false) return;\n\n    switch (event.touches.length) {\n      case 1:\n\n        if (scope.noRotate === true) return;\n\n        state = STATE.TOUCH_ROTATE;\n\n        rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n        break;\n\n      case 2:\n\n        if (scope.noZoom === true) return;\n\n        state = STATE.TOUCH_DOLLY;\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        break;\n\n      case 3:\n\n        if (scope.noPan === true) return;\n\n        state = STATE.TOUCH_PAN;\n\n        panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n        break;\n\n      default:\n\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) scope.dispatchEvent(startEvent);\n  }\n\n  function touchmove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    switch (event.touches.length) {\n      case 1:\n\n        if (scope.noRotate === true) return;\n        if (state !== STATE.TOUCH_ROTATE) return;\n\n        rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n\n        scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n        scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n        rotateStart.copy(rotateEnd);\n\n        if (eventPrevious) {\n          momentumLeft = event.touches[0].pageX - eventPrevious.pageX;\n          momentumUp = event.touches[0].pageY - eventPrevious.pageY;\n        }\n\n        eventPrevious = {\n          pageX: event.touches[0].pageX,\n          pageY: event.touches[0].pageY\n        };\n\n        scope.update();\n        break;\n\n      case 2:\n\n        if (scope.noZoom === true) return;\n        if (state !== STATE.TOUCH_DOLLY) return;\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (event.scale < 1) {\n          scope.object.fov = scope.object.fov < scope.maxFov ? scope.object.fov + 1 : scope.maxFov;\n          scope.object.updateProjectionMatrix();\n        } else if (event.scale > 1) {\n          scope.object.fov = scope.object.fov > scope.minFov ? scope.object.fov - 1 : scope.minFov;\n          scope.object.updateProjectionMatrix();\n        }\n\n        scope.update();\n        scope.dispatchEvent(changeEvent);\n        break;\n\n      case 3:\n\n        if (scope.noPan === true) return;\n        if (state !== STATE.TOUCH_PAN) return;\n\n        panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        panDelta.subVectors(panEnd, panStart);\n\n        scope.pan(panDelta.x, panDelta.y);\n\n        panStart.copy(panEnd);\n\n        scope.update();\n        break;\n\n      default:\n\n        state = STATE.NONE;\n    }\n  }\n\n  function touchend() {\n    momentumOn = true;\n\n    eventPrevious = undefined;\n\n    if (scope.enabled === false) return;\n\n    scope.dispatchEvent(endEvent);\n    state = STATE.NONE;\n  }\n\n  this.domElement.addEventListener('mousedown', onMouseDown, false);\n  this.domElement.addEventListener('mousewheel', onMouseWheel, false);\n  this.domElement.addEventListener('DOMMouseScroll', onMouseWheel, false);\n\n  this.domElement.addEventListener('touchstart', touchstart, false);\n  this.domElement.addEventListener('touchend', touchend, false);\n  this.domElement.addEventListener('touchmove', touchmove, false);\n\n  window.addEventListener('keyup', onKeyUp, false);\n  window.addEventListener('keydown', onKeyDown, false);\n\n  this.update();\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"].prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"].prototype.constructor = __WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"];\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"] = function (camera, domElement) {\n  var scope = this;\n  var changeEvent = { type: 'change' };\n\n  var rotY = 0;\n  var rotX = 0;\n  var tempX = 0;\n  var tempY = 0;\n\n  this.camera = camera;\n  this.camera.rotation.reorder('YXZ');\n  this.domElement = domElement !== undefined ? domElement : document;\n\n  this.enabled = true;\n\n  this.deviceOrientation = {};\n  this.screenOrientation = 0;\n\n  this.alpha = 0;\n  this.alphaOffsetAngle = 0;\n\n  var onDeviceOrientationChangeEvent = function onDeviceOrientationChangeEvent(event) {\n    scope.deviceOrientation = event;\n  };\n\n  var onScreenOrientationChangeEvent = function onScreenOrientationChangeEvent() {\n    scope.screenOrientation = window.orientation || 0;\n  };\n\n  var onTouchStartEvent = function onTouchStartEvent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    tempX = event.touches[0].pageX;\n    tempY = event.touches[0].pageY;\n  };\n\n  var onTouchMoveEvent = function onTouchMoveEvent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    rotY += __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad((event.touches[0].pageX - tempX) / 4);\n    rotX += __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad((tempY - event.touches[0].pageY) / 4);\n\n    scope.updateAlphaOffsetAngle(rotY);\n\n    tempX = event.touches[0].pageX;\n    tempY = event.touches[0].pageY;\n  };\n\n  var setCameraQuaternion = function setCameraQuaternion(quaternion, alpha, beta, gamma, orient) {\n    var zee = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 0, 1);\n\n    var euler = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Euler\"]();\n\n    var q0 = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n    var q1 = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"](-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5));\n\n    var vectorFingerY;\n    var fingerQY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    var fingerQX = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n    if (scope.screenOrientation == 0) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX);\n    } else if (scope.screenOrientation == 180) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX);\n    } else if (scope.screenOrientation == 90) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX);\n    } else if (scope.screenOrientation == -90) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX);\n    }\n\n    q1.multiply(fingerQY);\n    q1.multiply(fingerQX);\n\n    euler.set(beta, alpha, -gamma, 'YXZ');\n\n    quaternion.setFromEuler(euler);\n\n    quaternion.multiply(q1);\n\n    quaternion.multiply(q0.setFromAxisAngle(zee, -orient));\n  };\n\n  this.connect = function () {\n    onScreenOrientationChangeEvent();\n\n    window.addEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n    window.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n    window.addEventListener('deviceorientation', this.update.bind(this), false);\n\n    scope.domElement.addEventListener('touchstart', onTouchStartEvent, false);\n    scope.domElement.addEventListener('touchmove', onTouchMoveEvent, false);\n\n    scope.enabled = true;\n  };\n\n  this.disconnect = function () {\n    window.removeEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n    window.removeEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n    window.removeEventListener('deviceorientation', this.update.bind(this), false);\n\n    scope.domElement.removeEventListener('touchstart', onTouchStartEvent, false);\n    scope.domElement.removeEventListener('touchmove', onTouchMoveEvent, false);\n\n    scope.enabled = false;\n  };\n\n  this.update = function (ignoreUpdate) {\n    if (scope.enabled === false) return;\n\n    var alpha = scope.deviceOrientation.alpha ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.alpha) + this.alphaOffsetAngle : 0;\n    var beta = scope.deviceOrientation.beta ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.beta) : 0;\n    var gamma = scope.deviceOrientation.gamma ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.gamma) : 0;\n    var orient = scope.screenOrientation ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.screenOrientation) : 0;\n\n    setCameraQuaternion(scope.camera.quaternion, alpha, beta, gamma, orient);\n    this.alpha = alpha;\n\n    ignoreUpdate !== true && this.dispatchEvent(changeEvent);\n  };\n\n  this.updateAlphaOffsetAngle = function (angle) {\n    this.alphaOffsetAngle = angle;\n    this.update();\n  };\n\n  this.dispose = function () {\n    this.disconnect();\n  };\n\n  this.connect();\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"].prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"].prototype.constructor = __WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"];\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"] = function () {};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"].prototype = {\n\n  constructor: __WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"],\n\n  set: function set(direction, axis, angle) {\n    this.direction = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();this.direction.copy(direction);\n    this.axis = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();this.axis.copy(axis);\n    this.angle = angle;\n    return this;\n  },\n\n  _sign: function _sign(a) {\n    return a < 0 ? -1 : a > 0 ? 1 : 0;\n  },\n\n  _cosh: function _cosh(x) {\n    return (Math.exp(x) + Math.exp(-x)) / 2;\n  },\n\n  _sinhInverse: function _sinhInverse(x) {\n    return Math.log(Math.abs(x) + Math.sqrt(x * x + 1));\n  },\n\n  modify: function modify(geometry) {\n    var thirdAxis = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();thirdAxis.crossVectors(this.direction, this.axis);\n\n    var P = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]();\n    P.set(thirdAxis.x, thirdAxis.y, thirdAxis.z, 0, this.direction.x, this.direction.y, this.direction.z, 0, this.axis.x, this.axis.y, this.axis.z, 0, 0, 0, 0, 1).transpose();\n\n    var InverseP = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]().getInverse(P);\n    var newVertices = [];var oldVertices = [];var anglesBetweenOldandNewVertices = [];\n\n    var meshGeometryBoundingBoxMaxx = 0;var meshGeometryBoundingBoxMinx = 0;\n    var meshGeometryBoundingBoxMaxy = 0;var meshGeometryBoundingBoxMiny = 0;\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      newVertices[i] = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();newVertices[i].copy(geometry.vertices[i]).applyMatrix4(InverseP);\n      if (newVertices[i].x > meshGeometryBoundingBoxMaxx) {\n        meshGeometryBoundingBoxMaxx = newVertices[i].x;\n      }\n      if (newVertices[i].x < meshGeometryBoundingBoxMinx) {\n        meshGeometryBoundingBoxMinx = newVertices[i].x;\n      }\n      if (newVertices[i].y > meshGeometryBoundingBoxMaxy) {\n        meshGeometryBoundingBoxMaxy = newVertices[i].y;\n      }\n      if (newVertices[i].y < meshGeometryBoundingBoxMiny) {\n        meshGeometryBoundingBoxMiny = newVertices[i].y;\n      }\n    }\n\n    var meshWidthold = meshGeometryBoundingBoxMaxx - meshGeometryBoundingBoxMinx;\n    var meshDepth = meshGeometryBoundingBoxMaxy - meshGeometryBoundingBoxMiny;\n    var ParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidthold;\n    var oldMiddlex = (meshGeometryBoundingBoxMaxx + meshGeometryBoundingBoxMinx) / 2;\n    var oldMiddley = (meshGeometryBoundingBoxMaxy + meshGeometryBoundingBoxMiny) / 2;\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      oldVertices[i] = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();oldVertices[i].copy(newVertices[i]);\n      newVertices[i].x = this._sign(newVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((newVertices[i].x - oldMiddlex) * ParamB);\n    }\n\n    var meshWidth = 2 / ParamB * this._sinhInverse(meshWidthold / 2 * ParamB);\n\n    var NewParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidth;\n\n    var rightEdgePos = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](meshWidth / 2, -meshDepth / 2, 0);\n    rightEdgePos.y = 1 / NewParamB * this._cosh(NewParamB * rightEdgePos.x) - 1 / NewParamB - meshDepth / 2;\n\n    var bendCenter = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, rightEdgePos.y + rightEdgePos.x / Math.tan(this.angle), 0);\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var x0 = this._sign(oldVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((oldVertices[i].x - oldMiddlex) * ParamB);\n      var y0 = 1 / NewParamB * this._cosh(NewParamB * x0) - 1 / NewParamB;\n\n      var k = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](bendCenter.x - x0, bendCenter.y - (y0 - meshDepth / 2), bendCenter.z).normalize();\n\n      var Q = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n      Q.addVectors(new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](x0, y0 - meshDepth / 2, oldVertices[i].z), k.multiplyScalar(oldVertices[i].y + meshDepth / 2));\n      newVertices[i].x = Q.x;newVertices[i].y = Q.y;\n    }\n\n    var middle = oldMiddlex * meshWidth / meshWidthold;\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var O = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](oldMiddlex, oldMiddley, oldVertices[i].z);\n      var p = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();p.subVectors(oldVertices[i], O);\n      var q = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();q.subVectors(newVertices[i], O);\n\n      anglesBetweenOldandNewVertices[i] = Math.acos(1 / this._cosh(ParamB * newVertices[i].x)) * this._sign(newVertices[i].x);\n\n      newVertices[i].x = newVertices[i].x + middle;\n      geometry.vertices[i].copy(newVertices[i].applyMatrix4(P));\n    }\n\n    geometry.computeFaceNormals();\n    geometry.verticesNeedUpdate = true;\n    geometry.normalsNeedUpdate = true;\n\n    var fvNames = ['a', 'b', 'c', 'd'];\n\n    for (var f = 0, fl = geometry.faces.length; f < fl; f++) {\n      var face = geometry.faces[f];\n      if (face.vertexNormals === undefined) {\n        continue;\n      }\n      for (var v = 0, vl = face.vertexNormals.length; v < vl; v++) {\n        var angle = anglesBetweenOldandNewVertices[face[fvNames[v]]];\n        var x = this.axis.x,\n            y = this.axis.y,\n            z = this.axis.z;\n\n        var rotateMatrix = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix3\"]();\n        rotateMatrix.set(Math.cos(angle) + (1 - Math.cos(angle)) * x * x, (1 - Math.cos(angle)) * x * y - Math.sin(angle) * z, (1 - Math.cos(angle)) * x * z + Math.sin(angle) * y, (1 - Math.cos(angle)) * y * x + Math.sin(angle) * z, Math.cos(angle) + (1 - Math.cos(angle)) * y * y, (1 - Math.cos(angle)) * y * z - Math.sin(angle) * x, (1 - Math.cos(angle)) * z * x - Math.sin(angle) * y, (1 - Math.cos(angle)) * z * y + Math.sin(angle) * x, Math.cos(angle) + (1 - Math.cos(angle)) * z * z);\n\n        face.vertexNormals[v].applyMatrix3(rotateMatrix);\n      }\n    }\n\n\n    return this;\n  }\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"CardboardEffect\"] = function (renderer) {\n  var _camera = new __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"](-1, 1, 1, -1, 0, 1);\n\n  var _scene = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Scene\"]();\n\n  var _stereo = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoCamera\"]();\n  _stereo.aspect = 0.5;\n\n  var _params = { minFilter: __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"], magFilter: __WEBPACK_IMPORTED_MODULE_8_three__[\"NearestFilter\"], format: __WEBPACK_IMPORTED_MODULE_8_three__[\"RGBAFormat\"] };\n\n  var _renderTarget = new __WEBPACK_IMPORTED_MODULE_8_three__[\"WebGLRenderTarget\"](512, 512, _params);\n  _renderTarget.scissorTest = true;\n  _renderTarget.texture.generateMipmaps = false;\n\n  var distortion = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"](0.441, 0.156);\n\n  var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneBufferGeometry\"](1, 1, 10, 20).removeAttribute('normal').toNonIndexed();\n\n  var positions = geometry.attributes.position.array;\n  var uvs = geometry.attributes.uv.array;\n\n  geometry.attributes.position.count *= 2;\n  geometry.attributes.uv.count *= 2;\n\n  var positions2 = new Float32Array(positions.length * 2);\n  positions2.set(positions);\n  positions2.set(positions, positions.length);\n\n  var uvs2 = new Float32Array(uvs.length * 2);\n  uvs2.set(uvs);\n  uvs2.set(uvs, uvs.length);\n\n  var vector = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var length = positions.length / 3;\n\n  for (var i = 0, l = positions2.length / 3; i < l; i++) {\n    vector.x = positions2[i * 3 + 0];\n    vector.y = positions2[i * 3 + 1];\n\n    var dot = vector.dot(vector);\n    var scalar = 1.5 + (distortion.x + distortion.y * dot) * dot;\n\n    var offset = i < length ? 0 : 1;\n\n    positions2[i * 3 + 0] = vector.x / scalar * 1.5 - 0.5 + offset;\n    positions2[i * 3 + 1] = vector.y / scalar * 3.0;\n\n    uvs2[i * 2] = (uvs2[i * 2] + offset) * 0.5;\n  }\n\n  geometry.attributes.position.array = positions2;\n  geometry.attributes.uv.array = uvs2;\n\n  var material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ map: _renderTarget.texture });\n  var mesh = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"](geometry, material);\n  _scene.add(mesh);\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height);\n\n    var pixelRatio = renderer.getPixelRatio();\n\n    _renderTarget.setSize(width * pixelRatio, height * pixelRatio);\n  };\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld();\n\n    if (camera.parent === null) camera.updateMatrixWorld();\n\n    _stereo.update(camera);\n\n    var width = _renderTarget.width / 2;\n    var height = _renderTarget.height;\n\n    _renderTarget.scissor.set(0, 0, width, height);\n    _renderTarget.viewport.set(0, 0, width, height);\n    renderer.render(scene, _stereo.cameraL, _renderTarget);\n\n    _renderTarget.scissor.set(width, 0, width, height);\n    _renderTarget.viewport.set(width, 0, width, height);\n    renderer.render(scene, _stereo.cameraR, _renderTarget);\n\n    renderer.render(_scene, _camera);\n  };\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"StereoEffect\"] = function (renderer) {\n  var _stereo = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoCamera\"]();\n  _stereo.aspect = 0.5;\n\n  this.setEyeSeparation = function (eyeSep) {\n    _stereo.eyeSep = eyeSep;\n  };\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height);\n  };\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld();\n\n    if (camera.parent === null) camera.updateMatrixWorld();\n\n    _stereo.update(camera);\n\n    var size = renderer.getSize();\n\n    if (renderer.autoClear) renderer.clear();\n    renderer.setScissorTest(true);\n\n    renderer.setScissor(0, 0, size.width / 2, size.height);\n    renderer.setViewport(0, 0, size.width / 2, size.height);\n    renderer.render(scene, _stereo.cameraL);\n\n    renderer.setScissor(size.width / 2, 0, size.width / 2, size.height);\n    renderer.setViewport(size.width / 2, 0, size.width / 2, size.height);\n    renderer.render(scene, _stereo.cameraR);\n\n    renderer.setScissorTest(false);\n  };\n};\nvar GSVPANO = GSVPANO || {};\nGSVPANO.PanoLoader = function (parameters) {\n  'use strict';\n\n  var _parameters = parameters || {},\n      _location,\n      _zoom,\n      _panoId,\n      _panoClient = new google.maps.StreetViewService(),\n      _count = 0,\n      _total = 0,\n      _canvas = [],\n      _ctx = [],\n      _wc = 0,\n      _hc = 0,\n      result = null,\n      rotation = 0,\n      copyright = '',\n      onSizeChange = null,\n      onPanoramaLoad = null;\n\n  var levelsW = [1, 2, 4, 7, 13, 26],\n      levelsH = [1, 1, 2, 4, 7, 13];\n\n  var widths = [416, 832, 1664, 3328, 6656, 13312],\n      heights = [416, 416, 832, 1664, 3328, 6656];\n\n  var gl = null;\n  try {\n    var canvas = document.createElement('canvas');\n    gl = canvas.getContext('experimental-webgl');\n    if (gl == null) {\n      gl = canvas.getContext('webgl');\n    }\n  } catch (error) {}\n\n  var maxW = 1024,\n      maxH = 1024;\n\n  if (gl) {\n    var maxTexSize = Math.max(gl.getParameter(gl.MAX_TEXTURE_SIZE), 6656);\n\n    maxW = maxH = maxTexSize;\n  }\n\n  this.setProgress = function (loaded, total) {\n    if (this.onProgress) {\n      this.onProgress({ loaded: loaded, total: total });\n    }\n  };\n\n  this.throwError = function (message) {\n    if (this.onError) {\n      this.onError(message);\n    } else {\n      console.error(message);\n    }\n  };\n\n  this.adaptTextureToZoom = function () {\n    var w = levelsW[_zoom] * 416,\n        h = levelsH[_zoom] * 416;\n\n    w = widths[_zoom];\n    h = heights[_zoom];\n\n    _wc = Math.ceil(w / maxW);\n    _hc = Math.ceil(h / maxH);\n\n    _canvas = [];_ctx = [];\n\n    var ptr = 0;\n    for (var y = 0; y < _hc; y++) {\n      for (var x = 0; x < _wc; x++) {\n        var c = document.createElement('canvas');\n        if (x < _wc - 1) c.width = maxW;else c.width = w - maxW * x;\n        if (y < _hc - 1) c.height = maxH;else c.height = h - maxH * y;\n        _canvas.push(c);\n        _ctx.push(c.getContext('2d'));\n        ptr++;\n      }\n    }\n  };\n\n  this.composeFromTile = function (x, y, texture) {\n    x *= 512;\n    y *= 512;\n    var px = Math.floor(x / maxW),\n        py = Math.floor(y / maxH);\n\n    x -= px * maxW;\n    y -= py * maxH;\n\n    _ctx[py * _wc + px].drawImage(texture, 0, 0, texture.width, texture.height, x, y, 512, 512);\n    this.progress();\n  };\n\n  this.progress = function () {\n    _count++;\n\n    var p = Math.round(_count * 100 / _total);\n    this.setProgress(_count, _total);\n\n    if (_count === _total) {\n      this.canvas = _canvas;\n      this.panoId = _panoId;\n      this.zoom = _zoom;\n      if (this.onPanoramaLoad) {\n        this.onPanoramaLoad(_canvas[0]);\n      }\n    }\n  };\n\n  this.loadFromId = function (id) {\n    _panoId = id;\n    this.composePanorama();\n  };\n\n  this.composePanorama = function () {\n    this.setProgress(0, 1);\n\n    var w = levelsW[_zoom],\n        h = levelsH[_zoom],\n        self = this,\n        url,\n        x,\n        y;\n\n    _count = 0;\n    _total = w * h;\n\n    var self = this;\n    for (var y = 0; y < h; y++) {\n      for (var x = 0; x < w; x++) {\n        var url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + _zoom + '&x=' + x + '&y=' + y + '&panoid=' + _panoId + '&nbt&fover=2';\n        (function (x, y) {\n          if (_parameters.useWebGL) {\n            var texture = __WEBPACK_IMPORTED_MODULE_8_three__[\"ImageUtils\"].loadTexture(url, null, function () {\n              self.composeFromTile(x, y, texture);\n            });\n          } else {\n            var img = new Image();\n            img.addEventListener('load', function () {\n              self.composeFromTile(x, y, this);\n            });\n            img.crossOrigin = '';\n            img.src = url;\n          }\n        })(x, y);\n      }\n    }\n  };\n\n  this.load = function (panoid) {\n    this.loadPano(panoid);\n  };\n\n  this.loadPano = function (id) {\n    var self = this;\n    _panoClient.getPanoramaById(id, function (result, status) {\n      if (status === google.maps.StreetViewStatus.OK) {\n        self.result = result;\n        if (self.onPanoramaData) self.onPanoramaData(result);\n\n        copyright = result.copyright;\n        self.copyright = result.copyright;\n        _panoId = result.location.pano;\n        self.location = location;\n        self.composePanorama();\n      } else {\n        if (self.onNoPanoramaData) self.onNoPanoramaData(status);\n        self.throwError('Could not retrieve panorama for the following reason: ' + status);\n      }\n    });\n  };\n\n  this.setZoom = function (z) {\n    _zoom = z;\n    this.adaptTextureToZoom();\n  };\n\n  this.setZoom(_parameters.zoom || 1);\n};(function () {\n  'use strict';\n\n  PANOLENS.DataImageSource = 'https://pchen66.github.io/Panolens/asset/icon/';\n\n  PANOLENS.DataImage = {\n    Info: PANOLENS.DataImageSource + 'information.png',\n    Arrow: PANOLENS.DataImageSource + 'arrow-up.png',\n    FullscreenEnter: PANOLENS.DataImageSource + 'fullscreen.png',\n    FullscreenLeave: PANOLENS.DataImageSource + 'fullscreen-exit.png',\n    VideoPlay: PANOLENS.DataImageSource + 'video-play.png',\n    VideoPause: PANOLENS.DataImageSource + 'pause.png',\n    WhiteTile: PANOLENS.DataImageSource + 'tiles.png',\n    ReticleIdle: PANOLENS.DataImageSource + 'reticle-idle.png',\n    Setting: PANOLENS.DataImageSource + 'setting.png',\n    ChevronRight: PANOLENS.DataImageSource + 'chevron-right.png',\n    Check: PANOLENS.DataImageSource + 'check.png',\n    ViewIndicator: PANOLENS.DataImageSource + 'view-indicator.svg',\n    ReticleDwell: PANOLENS.DataImageSource + 'reticle-animation.png'\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Controls = {\n\n    ORBIT: 0,\n\n    DEVICEORIENTATION: 1\n\n  };\n\n  PANOLENS.Modes = {\n    UNKNOWN: 0,\n\n    NORMAL: 1,\n\n    CARDBOARD: 2,\n\n    STEREO: 3\n\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils = {};\n\n  PANOLENS.Utils.checkTouchSupported = function () {\n    return window ? 'ontouchstart' in window || window.navigator.msMaxTouchPoints : false;\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils.ImageLoader = {};\n\n  PANOLENS.Utils.ImageLoader.load = function (url, onLoad, onProgress, onError) {\n    var cached, request, arrayBufferView, blob, urlCreator, image, reference;\n\n    for (var iconName in PANOLENS.DataImage) {\n      if (PANOLENS.DataImage.hasOwnProperty(iconName) && url === PANOLENS.DataImage[iconName]) {\n        reference = iconName;\n      }\n    }\n\n    cached = __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].get(reference || url);\n\n    if (cached !== undefined) {\n      if (onLoad) {\n        setTimeout(function () {\n          if (onProgress) {\n            onProgress({ loaded: 1, total: 1 });\n          }\n\n          onLoad(cached);\n        }, 0);\n      }\n\n      return cached;\n    }\n\n    urlCreator = window.URL || window.webkitURL;\n    image = document.createElementNS('http://www.w3.org/1999/xhtml', 'img');\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].add(reference || url, image);\n\n    function onImageLoaded() {\n      urlCreator.revokeObjectURL(image.src);\n      onLoad && onLoad(image);\n    }\n\n    if (url.indexOf('data:') === 0) {\n      image.addEventListener('load', onImageLoaded, false);\n      image.src = url;\n      return image;\n    }\n\n    image.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : '';\n\n    request = new XMLHttpRequest();\n    request.open('GET', url, true);\n    request.responseType = 'arraybuffer';\n    request.onprogress = function (event) {\n      if (event.lengthComputable) {\n        onProgress && onProgress({ loaded: event.loaded, total: event.total });\n      }\n    };\n    request.onloadend = function (event) {\n      arrayBufferView = new Uint8Array(this.response);\n      blob = new Blob([arrayBufferView]);\n\n      image.addEventListener('load', onImageLoaded, false);\n      image.src = urlCreator.createObjectURL(blob);\n    };\n\n    request.send(null);\n  };\n\n  __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].enabled = true;\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils.TextureLoader = {};\n\n  PANOLENS.Utils.TextureLoader.load = function (url, onLoad, onProgress, onError) {\n    var texture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\n    PANOLENS.Utils.ImageLoader.load(url, function (image) {\n      texture.image = image;\n      texture.needsUpdate = true;\n\n      onLoad && onLoad(texture);\n    }, onProgress, onError);\n\n    return texture;\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils.CubeTextureLoader = {};\n\n  PANOLENS.Utils.CubeTextureLoader.load = function (urls, onLoad, onProgress, onError) {\n    var texture, loaded, progress, all, loadings;\n\n    texture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"CubeTexture\"]([]);\n\n    loaded = 0;\n    progress = {};\n    all = {};\n\n    urls.map(function (url, index) {\n      PANOLENS.Utils.ImageLoader.load(url, function (image) {\n        texture.images[index] = image;\n\n        loaded++;\n\n        if (loaded === 6) {\n          texture.needsUpdate = true;\n\n          onLoad && onLoad(texture);\n        }\n      }, function (event) {\n        progress[index] = { loaded: event.loaded, total: event.total };\n\n        all.loaded = 0;\n        all.total = 0;\n        loadings = 0;\n\n        for (var i in progress) {\n          loadings++;\n          all.loaded += progress[i].loaded;\n          all.total += progress[i].total;\n        }\n\n        if (loadings < 6) {\n          all.total = all.total / loadings * 6;\n        }\n\n        onProgress && onProgress(all);\n      }, onError);\n    });\n\n    return texture;\n  };\n})();\n\nPANOLENS.StereographicShader = {\n\n  uniforms: {\n\n    'tDiffuse': { value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]() },\n    'resolution': { value: 1.0 },\n    'transform': { value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]() },\n    'zoom': { value: 1.0 }\n\n  },\n\n  vertexShader: ['varying vec2 vUv;', 'void main() {', 'vUv = uv;', 'gl_Position = vec4( position, 1.0 );', '}'].join('\\n'),\n\n  fragmentShader: ['uniform sampler2D tDiffuse;', 'uniform float resolution;', 'uniform mat4 transform;', 'uniform float zoom;', 'varying vec2 vUv;', 'const float PI = 3.141592653589793;', 'void main(){', 'vec2 position = -1.0 +  2.0 * vUv;', 'position *= vec2( zoom * resolution, zoom * 0.5 );', 'float x2y2 = position.x * position.x + position.y * position.y;', 'vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );', 'sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );', 'vec2 sampleUV = vec2(', '(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,', '(asin(sphere_pnt.z) / PI + 0.5)', ');', 'gl_FragColor = texture2D( tDiffuse, sampleUV );', '}'].join('\\n')\n\n};(function () {\n  'use strict';\n\n  PANOLENS.Panorama = function (geometry, material) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].call(this);\n\n    this.type = 'panorama';\n\n    this.ImageQualityLow = 1;\n    this.ImageQualityFair = 2;\n    this.ImageQualityMedium = 3;\n    this.ImageQualityHigh = 4;\n    this.ImageQualitySuperHigh = 5;\n\n    this.animationDuration = 1000;\n\n    this.defaultInfospotSize = 350;\n\n    this.container = undefined;\n\n    this.loaded = false;\n\n    this.linkedSpots = [];\n\n    this.isInfospotVisible = false;\n\n    this.linkingImageURL = undefined;\n    this.linkingImageScale = undefined;\n\n    this.geometry = geometry;\n\n    this.material = material;\n    this.material.side = __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"];\n    this.material.visible = false;\n\n    this.scale.x *= -1;\n\n    this.infospotAnimation = new TWEEN.Tween(this).to({}, this.animationDuration / 2);\n\n    this.addEventListener('load', this.fadeIn.bind(this));\n    this.addEventListener('panolens-container', this.setContainer.bind(this));\n    this.addEventListener('click', this.onClick.bind(this));\n\n    this.setupTransitions();\n  };\n\n  PANOLENS.Panorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].prototype);\n\n  PANOLENS.Panorama.prototype.constructor = PANOLENS.Panorama;\n\n  PANOLENS.Panorama.prototype.add = function (object) {\n    var scope, invertedObject;\n\n    scope = this;\n\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    if (object instanceof PANOLENS.Infospot) {\n      invertedObject = object;\n\n      if (object.dispatchEvent) {\n        this.container && object.dispatchEvent({ type: 'panolens-container', container: this.container });\n\n        object.dispatchEvent({ type: 'panolens-infospot-focus',\n          method: function method(vector, duration, easing) {\n            scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'tweenControlCenter', data: [vector, duration, easing] });\n          } });\n      }\n    } else {\n      invertedObject = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"]();\n      invertedObject.scale.x = -1;\n      invertedObject.scalePlaceHolder = true;\n      invertedObject.add(object);\n    }\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype.add.call(this, invertedObject);\n  };\n\n  PANOLENS.Panorama.prototype.load = function () {\n    this.onLoad();\n  };\n\n  PANOLENS.Panorama.prototype.onClick = function (event) {\n    if (event.intersects && event.intersects.length === 0) {\n      this.traverse(function (object) {\n        object.dispatchEvent({ type: 'dismiss' });\n      });\n    }\n  };\n\n  PANOLENS.Panorama.prototype.setContainer = function (data) {\n    var container;\n\n    if (data instanceof HTMLElement) {\n      container = data;\n    } else if (data && data.container) {\n      container = data.container;\n    }\n\n    if (container) {\n      this.children.forEach(function (child) {\n        if (child instanceof PANOLENS.Infospot && child.dispatchEvent) {\n          child.dispatchEvent({ type: 'panolens-container', container: container });\n        }\n      });\n\n      this.container = container;\n    }\n  };\n\n  PANOLENS.Panorama.prototype.onLoad = function () {\n    this.loaded = true;\n\n    this.dispatchEvent({ type: 'load' });\n  };\n\n  PANOLENS.Panorama.prototype.onProgress = function (progress) {\n    this.dispatchEvent({ type: 'progress', progress: progress });\n  };\n\n  PANOLENS.Panorama.prototype.onError = function () {\n    this.dispatchEvent({ type: 'error' });\n  };\n\n  PANOLENS.Panorama.prototype.getZoomLevel = function () {\n    var zoomLevel;\n\n    if (window.innerWidth <= 800) {\n      zoomLevel = this.ImageQualityFair;\n    } else if (window.innerWidth > 800 && window.innerWidth <= 1280) {\n      zoomLevel = this.ImageQualityMedium;\n    } else if (window.innerWidth > 1280 && window.innerWidth <= 1920) {\n      zoomLevel = this.ImageQualityHigh;\n    } else if (window.innerWidth > 1920) {\n      zoomLevel = this.ImageQualitySuperHigh;\n    } else {\n      zoomLevel = this.ImageQualityLow;\n    }\n\n    return zoomLevel;\n  };\n\n  PANOLENS.Panorama.prototype.updateTexture = function (texture) {\n    this.material.map = texture;\n\n    this.material.needsUpdate = true;\n  };\n\n  PANOLENS.Panorama.prototype.toggleInfospotVisibility = function (isVisible, delay) {\n    delay = delay !== undefined ? delay : 0;\n\n    var scope, visible;\n\n    scope = this;\n    visible = isVisible !== undefined ? isVisible : !this.isInfospotVisible;\n\n    this.traverse(function (object) {\n      if (object instanceof PANOLENS.Infospot) {\n        visible ? object.show(delay) : object.hide(delay);\n      }\n    });\n\n    this.isInfospotVisible = visible;\n\n    this.infospotAnimation.onComplete(function () {\n      scope.dispatchEvent({ type: 'infospot-animation-complete', visible: visible });\n    }).delay(delay).start();\n  };\n\n  PANOLENS.Panorama.prototype.setLinkingImage = function (url, scale) {\n    this.linkingImageURL = url;\n    this.linkingImageScale = scale;\n  };\n\n  PANOLENS.Panorama.prototype.link = function (pano, position, imageScale, imageSrc) {\n    var scope = this,\n        spot,\n        scale,\n        img;\n\n    this.visible = true;\n\n    if (!position) {\n      console.warn('Please specify infospot position for linking');\n\n      return;\n    }\n\n    if (imageScale !== undefined) {\n      scale = imageScale;\n    } else if (pano.linkingImageScale !== undefined) {\n      scale = pano.linkingImageScale;\n    } else {\n      scale = 300;\n    }\n\n    if (imageSrc) {\n      img = imageSrc;\n    } else if (pano.linkingImageURL) {\n      img = pano.linkingImageURL;\n    } else {\n      img = PANOLENS.DataImage.Arrow;\n    }\n\n    spot = new PANOLENS.Infospot(scale, img);\n    spot.position.copy(position);\n    spot.toPanorama = pano;\n    spot.addEventListener('click', function () {\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setPanorama', data: pano });\n    });\n\n    this.linkedSpots.push(spot);\n\n    this.add(spot);\n\n    this.visible = false;\n  };\n\n  PANOLENS.Panorama.prototype.reset = function () {\n    this.children.length = 0;\n  };\n\n  PANOLENS.Panorama.prototype.setupTransitions = function () {\n    this.fadeInAnimation = new TWEEN.Tween(this.material).easing(TWEEN.Easing.Quartic.Out).onStart(function () {\n      this.visible = true;\n      this.material.visible = true;\n\n      this.dispatchEvent({ type: 'enter-fade-start' });\n    }.bind(this));\n\n    this.fadeOutAnimation = new TWEEN.Tween(this.material).easing(TWEEN.Easing.Quartic.Out).onComplete(function () {\n      this.visible = false;\n      this.material.visible = true;\n\n      this.dispatchEvent({ type: 'leave-complete' });\n    }.bind(this));\n\n    this.enterTransition = new TWEEN.Tween(this).easing(TWEEN.Easing.Quartic.Out).onComplete(function () {\n      this.dispatchEvent({ type: 'enter-animation-complete' });\n    }.bind(this)).start();\n\n    this.leaveTransition = new TWEEN.Tween(this).easing(TWEEN.Easing.Quartic.Out);\n  };\n\n  PANOLENS.Panorama.prototype.fadeIn = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration;\n\n    this.fadeOutAnimation.stop();\n    this.fadeInAnimation.to({ opacity: 1 }, duration).onComplete(function () {\n      this.toggleInfospotVisibility(true, duration / 2);\n\n      this.dispatchEvent({ type: 'enter-fade-complete' });\n    }.bind(this)).start();\n  };\n\n  PANOLENS.Panorama.prototype.fadeOut = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration;\n\n    this.fadeInAnimation.stop();\n    this.fadeOutAnimation.to({ opacity: 0 }, duration).start();\n  };\n\n  PANOLENS.Panorama.prototype.onEnter = function () {\n    var duration = this.animationDuration;\n\n    this.leaveTransition.stop();\n    this.enterTransition.to({}, duration).onStart(function () {\n      this.dispatchEvent({ type: 'enter-animation-start' });\n\n      if (this.loaded) {\n        this.fadeIn(duration);\n      } else {\n        this.load();\n      }\n    }.bind(this)).start();\n\n    this.dispatchEvent({ type: 'enter' });\n  };\n\n  PANOLENS.Panorama.prototype.onLeave = function () {\n    var duration = this.animationDuration;\n\n    this.enterTransition.stop();\n    this.leaveTransition.to({}, duration).onStart(function () {\n      this.dispatchEvent({ type: 'leave-animation-start' });\n\n      this.fadeOut(duration);\n      this.toggleInfospotVisibility(false);\n    }.bind(this)).start();\n\n    this.dispatchEvent({ type: 'leave' });\n  };\n\n  PANOLENS.Panorama.prototype.dispose = function () {\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this });\n\n    function recursiveDispose(object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i]);\n        object.remove(object.children[i]);\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose();\n      }\n\n      object.geometry && object.geometry.dispose();\n      object.material && object.material.dispose();\n    }\n\n    recursiveDispose(this);\n\n    if (this.parent) {\n      this.parent.remove(this);\n    }\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.ImagePanorama = function (image, radius) {\n    radius = radius || 5000;\n\n    var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"SphereGeometry\"](radius, 60, 40),\n        material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ opacity: 0, transparent: true });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n\n    this.src = image;\n  };\n\n  PANOLENS.ImagePanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.ImagePanorama.prototype.constructor = PANOLENS.ImagePanorama;\n\n  PANOLENS.ImagePanorama.prototype.load = function (src) {\n    src = src || this.src;\n\n    if (!src) {\n      console.warn('Image source undefined');\n    } else if (typeof src === 'string') {\n      PANOLENS.Utils.TextureLoader.load(src, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this));\n    } else if (src instanceof HTMLImageElement) {\n      this.onLoad(new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"](src));\n    }\n  };\n\n  PANOLENS.ImagePanorama.prototype.onLoad = function (texture) {\n    texture.minFilter = texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\n    texture.needsUpdate = true;\n\n    this.updateTexture(texture);\n\n    window.requestAnimationFrame(function () {\n      window.requestAnimationFrame(function () {\n        PANOLENS.Panorama.prototype.onLoad.call(this);\n      }.bind(this));\n    }.bind(this));\n  };\n\n  PANOLENS.ImagePanorama.prototype.reset = function () {\n    PANOLENS.Panorama.prototype.reset.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.GoogleStreetviewPanorama = function (panoId, radius) {\n    PANOLENS.ImagePanorama.call(this, undefined, radius);\n\n    this.panoId = panoId;\n\n    this.gsvLoader = undefined;\n\n    this.loadRequested = false;\n\n    this.setupGoogleMapAPI();\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.ImagePanorama.prototype);\n\n  PANOLENS.GoogleStreetviewPanorama.constructor = PANOLENS.GoogleStreetviewPanorama;\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.load = function (panoId) {\n    this.loadRequested = true;\n\n    panoId = panoId || this.panoId || {};\n\n    if (panoId && this.gsvLoader) {\n      this.loadGSVLoader(panoId);\n    } else {\n      this.gsvLoader = {};\n    }\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI = function () {\n    var script = document.createElement('script');\n    script.src = 'https://maps.googleapis.com/maps/api/js';\n    script.onreadystatechange = this.setGSVLoader.bind(this);\n    script.onload = this.setGSVLoader.bind(this);\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader = function () {\n    this.gsvLoader = new GSVPANO.PanoLoader();\n\n    if (this.gsvLoader === {} || this.loadRequested) {\n      this.load();\n    }\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader = function () {\n    return this.gsvLoader;\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader = function (panoId) {\n    this.loadRequested = false;\n\n    this.gsvLoader.onProgress = this.onProgress.bind(this);\n\n    this.gsvLoader.onPanoramaLoad = this.onLoad.bind(this);\n\n    this.gsvLoader.setZoom(this.getZoomLevel());\n\n    this.gsvLoader.load(panoId);\n\n    this.gsvLoader.loaded = true;\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.onLoad = function (canvas) {\n    if (!this.gsvLoader) {\n      return;\n    }\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"](canvas));\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.reset = function () {\n    this.gsvLoader = undefined;\n\n    PANOLENS.ImagePanorama.prototype.reset.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.CubePanorama = function (images, edgeLength) {\n    var shader, geometry, material;\n\n    this.images = images || [];\n\n    edgeLength = edgeLength || 10000;\n    shader = JSON.parse(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderLib\"]['cube']));\n\n    geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BoxGeometry\"](edgeLength, edgeLength, edgeLength);\n    material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderMaterial\"]({\n\n      fragmentShader: shader.fragmentShader,\n      vertexShader: shader.vertexShader,\n      uniforms: shader.uniforms,\n      side: __WEBPACK_IMPORTED_MODULE_8_three__[\"BackSide\"]\n\n    });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n  };\n\n  PANOLENS.CubePanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.CubePanorama.prototype.constructor = PANOLENS.CubePanorama;\n\n  PANOLENS.CubePanorama.prototype.load = function () {\n    PANOLENS.Utils.CubeTextureLoader.load(this.images, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this));\n  };\n\n  PANOLENS.CubePanorama.prototype.onLoad = function (texture) {\n    this.material.uniforms['tCube'].value = texture;\n\n    PANOLENS.Panorama.prototype.onLoad.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.BasicPanorama = function (edgeLength) {\n    var tile = PANOLENS.DataImage.WhiteTile;\n\n    PANOLENS.CubePanorama.call(this, [tile, tile, tile, tile, tile, tile], edgeLength);\n  };\n\n  PANOLENS.BasicPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.CubePanorama.prototype);\n\n  PANOLENS.BasicPanorama.prototype.constructor = PANOLENS.BasicPanorama;\n})();(function () {\n  'use strict';\n\n  PANOLENS.VideoPanorama = function (src, options, radius) {\n    radius = radius || 5000;\n\n    var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"SphereGeometry\"](radius, 60, 40),\n        material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ opacity: 0, transparent: true });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n\n    this.src = src;\n    this.options = options || {};\n    this.options.playsinline = this.options.playsinline !== false;\n\n    this.videoElement = undefined;\n    this.videoRenderObject = undefined;\n    this.videoProgress = 0;\n\n    this.isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);\n    this.isMobile = this.isIOS || /Android|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent);\n\n    this.addEventListener('leave', this.pauseVideo.bind(this));\n    this.addEventListener('enter-fade-start', this.resumeVideoProgress.bind(this));\n    this.addEventListener('video-toggle', this.toggleVideo.bind(this));\n    this.addEventListener('video-time', this.setVideoCurrentTime.bind(this));\n  };\n\n  PANOLENS.VideoPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.VideoPanorama.constructor = PANOLENS.VideoPanorama;\n\n  PANOLENS.VideoPanorama.prototype.load = function (src, options) {\n    var scope = this;\n\n    src = src || this.src || '';\n    options = options || this.options || {};\n\n    this.videoElement = options.videoElement || document.createElement('video');\n\n    this.videoElement.muted = options.muted || false;\n    this.videoElement.loop = options.loop !== undefined ? options.loop : true;\n    this.videoElement.autoplay = options.autoplay !== undefined ? options.autoplay : false;\n    this.videoElement.crossOrigin = options.crossOrigin !== undefined ? options.crossOrigin : 'anonymous';\n\n    if (options.playsinline) {\n      this.videoElement.setAttribute('playsinline', '');\n      this.videoElement.setAttribute('webkit-playsinline', '');\n    }\n\n    var onloadeddata = function onloadeddata() {\n      scope.onProgress({ loaded: 1, total: 1 });\n      scope.setVideoTexture(scope.videoElement);\n\n      if (scope.videoElement.autoplay) {\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n      }\n\n      if (scope.isMobile) {\n        if (scope.videoElement.autoplay && scope.videoElement.muted) {\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n        } else {\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n        }\n      }\n\n      scope.onLoad();\n    };\n\n    if (this.videoElement.readyState > 2) {\n      onloadeddata();\n    } else {\n      if (!this.videoElement.querySelectorAll('source').length || !this.videoElement.src) {\n        this.videoElement.src = src;\n      }\n\n      this.videoElement.load();\n    }\n\n    this.videoElement.onloadeddata = onloadeddata;\n\n    this.videoElement.ontimeupdate = function (event) {\n      scope.videoProgress = this.duration >= 0 ? this.currentTime / this.duration : 0;\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: scope.videoProgress });\n    };\n\n    this.videoElement.addEventListener('ended', function () {\n      if (!scope.options.loop) {\n        scope.resetVideo();\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n      }\n    }, false);\n  };\n\n  PANOLENS.VideoPanorama.prototype.setVideoTexture = function (video) {\n    var videoTexture, videoRenderObject, scene;\n\n    if (!video) return;\n\n    videoTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"VideoTexture\"](video);\n    videoTexture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    videoTexture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    videoTexture.format = __WEBPACK_IMPORTED_MODULE_8_three__[\"RGBFormat\"];\n\n    videoRenderObject = {\n\n      video: video,\n      videoTexture: videoTexture\n\n    };\n\n    if (this.isIOS) {\n      enableInlineVideo(video);\n    }\n\n    this.updateTexture(videoTexture);\n\n    this.videoRenderObject = videoRenderObject;\n  };\n\n  PANOLENS.VideoPanorama.prototype.reset = function () {\n    this.videoElement = undefined;\n\n    PANOLENS.Panorama.prototype.reset.call(this);\n  };\n\n  PANOLENS.VideoPanorama.prototype.isVideoPaused = function () {\n    return this.videoRenderObject.video.paused;\n  };\n\n  PANOLENS.VideoPanorama.prototype.toggleVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      if (this.isVideoPaused()) {\n        this.videoRenderObject.video.play();\n      } else {\n        this.videoRenderObject.video.pause();\n      }\n    }\n  };\n\n  PANOLENS.VideoPanorama.prototype.setVideoCurrentTime = function (event) {\n    if (this.videoRenderObject && this.videoRenderObject.video && !__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default()(event.percentage) && event.percentage !== 1) {\n      this.videoRenderObject.video.currentTime = this.videoRenderObject.video.duration * event.percentage;\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: event.percentage });\n    }\n  };\n\n  PANOLENS.VideoPanorama.prototype.playVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoPaused()) {\n      this.videoRenderObject.video.play();\n    }\n\n    this.dispatchEvent({ type: 'play' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.pauseVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoPaused()) {\n      this.videoRenderObject.video.pause();\n    }\n\n    this.dispatchEvent({ type: 'pause' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.resumeVideoProgress = function () {\n    if (this.videoElement.autoplay && !this.isMobile) {\n      this.playVideo();\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n    } else {\n      this.pauseVideo();\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n    }\n\n    this.setVideoCurrentTime({ percentage: this.videoProgress });\n  };\n\n  PANOLENS.VideoPanorama.prototype.resetVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      this.setVideoCurrentTime({ percentage: 0 });\n    }\n  };\n\n  PANOLENS.VideoPanorama.prototype.isVideoMuted = function () {\n    return this.videoRenderObject.video.muted;\n  };\n\n  PANOLENS.VideoPanorama.prototype.muteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = true;\n    }\n\n    this.dispatchEvent({ type: 'volumechange' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.unmuteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = false;\n    }\n\n    this.dispatchEvent({ type: 'volumechange' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.getVideoElement = function () {\n    return this.videoRenderObject.video;\n  };\n\n  PANOLENS.VideoPanorama.prototype.dispose = function () {\n    this.resetVideo();\n    this.pauseVideo();\n\n    this.removeEventListener('leave', this.pauseVideo.bind(this));\n    this.removeEventListener('enter-fade-start', this.resumeVideoProgress.bind(this));\n    this.removeEventListener('video-toggle', this.toggleVideo.bind(this));\n    this.removeEventListener('video-time', this.setVideoCurrentTime.bind(this));\n\n    PANOLENS.Panorama.prototype.dispose.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.EmptyPanorama = function (radius) {\n    radius = radius || 5000;\n\n    var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Geometry\"](),\n        material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({\n      color: 0x000000, opacity: 1, transparent: true\n    });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n  };\n\n  PANOLENS.EmptyPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.EmptyPanorama.prototype.constructor = PANOLENS.EmptyPanorama;\n})();(function () {\n  PANOLENS.LittlePlanet = function (type, source, size, ratio) {\n    type = type || 'image';\n\n    type === 'image' && PANOLENS.ImagePanorama.call(this, source, size);\n\n    this.size = size || 10000;\n    this.ratio = ratio || 0.5;\n    this.EPS = 0.000001;\n    this.frameId;\n\n    this.geometry = this.createGeometry();\n    this.material = this.createMaterial(this.size);\n\n    this.dragging = false;\n    this.userMouse = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n    this.quatA = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    this.quatB = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    this.quatCur = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    this.quatSlerp = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n    this.vectorX = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n    this.vectorY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n\n    this.addEventListener('window-resize', this.onWindowResize);\n  };\n\n  PANOLENS.LittlePlanet.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.ImagePanorama.prototype);\n\n  PANOLENS.LittlePlanet.prototype.constructor = PANOLENS.LittlePlanet;\n\n  PANOLENS.LittlePlanet.prototype.createGeometry = function () {\n    return new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneGeometry\"](this.size, this.size * this.ratio);\n  };\n\n  PANOLENS.LittlePlanet.prototype.createMaterial = function (size) {\n    var uniforms = PANOLENS.StereographicShader.uniforms;\n    uniforms.zoom.value = size;\n\n    return new __WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderMaterial\"]({\n\n      uniforms: uniforms,\n      vertexShader: PANOLENS.StereographicShader.vertexShader,\n      fragmentShader: PANOLENS.StereographicShader.fragmentShader\n\n    });\n  };\n\n  PANOLENS.LittlePlanet.prototype.registerMouseEvents = function () {\n    this.container.addEventListener('mousedown', this.onMouseDown.bind(this), false);\n    this.container.addEventListener('mousemove', this.onMouseMove.bind(this), false);\n    this.container.addEventListener('mouseup', this.onMouseUp.bind(this), false);\n    this.container.addEventListener('touchstart', this.onMouseDown.bind(this), false);\n    this.container.addEventListener('touchmove', this.onMouseMove.bind(this), false);\n    this.container.addEventListener('touchend', this.onMouseUp.bind(this), false);\n    this.container.addEventListener('mousewheel', this.onMouseWheel.bind(this), false);\n    this.container.addEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false);\n    this.container.addEventListener('contextmenu', this.onContextMenu.bind(this), false);\n  };\n\n  PANOLENS.LittlePlanet.prototype.unregisterMouseEvents = function () {\n    this.container.removeEventListener('mousedown', this.onMouseDown.bind(this), false);\n    this.container.removeEventListener('mousemove', this.onMouseMove.bind(this), false);\n    this.container.removeEventListener('mouseup', this.onMouseUp.bind(this), false);\n    this.container.removeEventListener('touchstart', this.onMouseDown.bind(this), false);\n    this.container.removeEventListener('touchmove', this.onMouseMove.bind(this), false);\n    this.container.removeEventListener('touchend', this.onMouseUp.bind(this), false);\n    this.container.removeEventListener('mousewheel', this.onMouseWheel.bind(this), false);\n    this.container.removeEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false);\n    this.container.removeEventListener('contextmenu', this.onContextMenu.bind(this), false);\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseDown = function (event) {\n    var x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n    var y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\n    var inputCount = event.touches && event.touches.length || 1;\n\n    switch (inputCount) {\n      case 1:\n\n        this.dragging = true;\n        this.userMouse.set(x, y);\n\n        break;\n\n      case 2:\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        this.userMouse.pinchDistance = distance;\n\n        break;\n\n      default:\n\n        break;\n    }\n\n    this.onUpdateCallback();\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseMove = function (event) {\n    var x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n    var y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\n    var inputCount = event.touches && event.touches.length || 1;\n\n    switch (inputCount) {\n      case 1:\n\n        var angleX = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(x - this.userMouse.x) * 0.4;\n        var angleY = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(y - this.userMouse.y) * 0.4;\n\n        if (this.dragging) {\n          this.quatA.setFromAxisAngle(this.vectorY, angleX);\n          this.quatB.setFromAxisAngle(this.vectorX, angleY);\n          this.quatCur.multiply(this.quatA).multiply(this.quatB);\n          this.userMouse.set(x, y);\n        }\n\n        break;\n\n      case 2:\n\n        var uniforms = this.material.uniforms;\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        this.addZoomDelta(this.userMouse.pinchDistance - distance);\n\n        break;\n\n      default:\n\n        break;\n    }\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseUp = function (event) {\n    this.dragging = false;\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseWheel = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    var delta = 0;\n\n    if (event.wheelDelta !== undefined) {\n      delta = event.wheelDelta;\n    } else if (event.detail !== undefined) {\n      delta = -event.detail;\n    }\n\n    this.addZoomDelta(delta);\n    this.onUpdateCallback();\n  };\n\n  PANOLENS.LittlePlanet.prototype.addZoomDelta = function (delta) {\n    var uniforms = this.material.uniforms;\n    var lowerBound = this.size * 0.1;\n    var upperBound = this.size * 10;\n\n    uniforms.zoom.value += delta;\n\n    if (uniforms.zoom.value <= lowerBound) {\n      uniforms.zoom.value = lowerBound;\n    } else if (uniforms.zoom.value >= upperBound) {\n      uniforms.zoom.value = upperBound;\n    }\n  };\n\n  PANOLENS.LittlePlanet.prototype.onUpdateCallback = function () {\n    this.frameId = window.requestAnimationFrame(this.onUpdateCallback.bind(this));\n\n    this.quatSlerp.slerp(this.quatCur, 0.1);\n    this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp);\n\n    if (!this.dragging && 1.0 - this.quatSlerp.clone().dot(this.quatCur) < this.EPS) {\n      window.cancelAnimationFrame(this.frameId);\n    }\n  };\n\n  PANOLENS.LittlePlanet.prototype.reset = function () {\n    this.quatCur.set(0, 0, 0, 1);\n    this.quatSlerp.set(0, 0, 0, 1);\n    this.onUpdateCallback();\n  };\n\n  PANOLENS.LittlePlanet.prototype.onLoad = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\n    this.registerMouseEvents();\n    this.onUpdateCallback();\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'disableControl' });\n  };\n\n  PANOLENS.LittlePlanet.prototype.onLeave = function () {\n    this.unregisterMouseEvents();\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'enableControl', data: PANOLENS.Controls.ORBIT });\n\n    window.cancelAnimationFrame(this.frameId);\n\n    PANOLENS.Panorama.prototype.onLeave.call(this);\n  };\n\n  PANOLENS.LittlePlanet.prototype.onWindowResize = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n  };\n\n  PANOLENS.LittlePlanet.prototype.onContextMenu = function () {\n    this.dragging = false;\n  };\n})();(function () {\n  PANOLENS.ImageLittlePlanet = function (source, size, ratio) {\n    PANOLENS.LittlePlanet.call(this, 'image', source, size, ratio);\n  };\n\n  PANOLENS.ImageLittlePlanet.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.LittlePlanet.prototype);\n\n  PANOLENS.ImageLittlePlanet.prototype.constructor = PANOLENS.ImageLittlePlanet;\n\n  PANOLENS.ImageLittlePlanet.prototype.onLoad = function (texture) {\n    this.updateTexture(texture);\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, texture);\n    PANOLENS.LittlePlanet.prototype.onLoad.call(this);\n  };\n\n  PANOLENS.ImageLittlePlanet.prototype.updateTexture = function (texture) {\n    texture.minFilter = texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\n    this.material.uniforms['tDiffuse'].value = texture;\n  };\n})();(function () {\n  PANOLENS.Reticle = function (color, autoSelect, idleImageUrl, dwellImageUrl, dwellTime, dwellSpriteAmount) {\n    color = color || 0xffffff;\n\n    this.autoSelect = autoSelect != undefined ? autoSelect : true;\n\n    this.dwellTime = dwellTime || 1500;\n    this.dwellSpriteAmount = dwellSpriteAmount || 45;\n    this.dwellInterval = this.dwellTime / this.dwellSpriteAmount;\n\n    this.IDLE = 0;\n    this.DWELLING = 1;\n    this.status;\n\n    this.scaleIdle = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0.2, 0.2, 1);\n    this.scaleDwell = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0.8, 1);\n\n    this.textureLoaded = false;\n    this.idleImageUrl = idleImageUrl || PANOLENS.DataImage.ReticleIdle;\n    this.dwellImageUrl = dwellImageUrl || PANOLENS.DataImage.ReticleDwell;\n    this.idleTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n    this.dwellTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"SpriteMaterial\"]({ color: color, depthTest: false }));\n\n    this.currentTile = 0;\n    this.startTime = 0;\n\n    this.visible = false;\n    this.renderOrder = 10;\n    this.timerId;\n\n    this.updateStatus(this.IDLE);\n  };\n\n  PANOLENS.Reticle.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].prototype);\n\n  PANOLENS.Reticle.prototype.constructor = PANOLENS.Reticle;\n\n  PANOLENS.Reticle.prototype.show = function () {\n    this.visible = true;\n  };\n\n  PANOLENS.Reticle.prototype.hide = function () {\n    this.visible = false;\n  };\n\n  PANOLENS.Reticle.prototype.loadTextures = function () {\n    this.idleTexture = PANOLENS.Utils.TextureLoader.load(this.idleImageUrl);\n    this.dwellTexture = PANOLENS.Utils.TextureLoader.load(this.dwellImageUrl);\n\n    this.material.map = this.idleTexture;\n    this.setupDwellSprite(this.dwellTexture);\n    this.textureLoaded = true;\n  };\n\n  PANOLENS.Reticle.prototype.select = function (completeCallback) {\n    if (performance.now() - this.startTime >= this.dwellTime) {\n      this.completeDwelling();\n      completeCallback();\n    } else if (this.autoSelect) {\n      this.updateDwelling(performance.now());\n      this.timerId = window.requestAnimationFrame(this.select.bind(this, completeCallback));\n    }\n  };\n\n  PANOLENS.Reticle.prototype.clearTimer = function () {\n    window.cancelAnimationFrame(this.timerId);\n    this.timerId = null;\n  };\n\n  PANOLENS.Reticle.prototype.setupDwellSprite = function (texture) {\n    texture.wrapS = __WEBPACK_IMPORTED_MODULE_8_three__[\"RepeatWrapping\"];\n    texture.repeat.set(1 / this.dwellSpriteAmount, 1);\n  };\n\n  PANOLENS.Reticle.prototype.updateStatus = function (status) {\n    this.status = status;\n\n    if (status === this.IDLE) {\n      this.scale.copy(this.scaleIdle);\n      this.material.map = this.idleTexture;\n    } else if (status === this.DWELLING) {\n      this.scale.copy(this.scaleDwell);\n      this.material.map = this.dwellTexture;\n    }\n\n    this.currentTile = 0;\n    this.material.map.offset.x = 0;\n  };\n\n  PANOLENS.Reticle.prototype.startDwelling = function (completeCallback) {\n    if (!this.autoSelect) {\n      return;\n    }\n\n    this.startTime = performance.now();\n    this.updateStatus(this.DWELLING);\n    this.select(completeCallback);\n  };\n\n  PANOLENS.Reticle.prototype.updateDwelling = function (time) {\n    var elasped = time - this.startTime;\n\n    if (this.currentTile <= this.dwellSpriteAmount) {\n      this.currentTile = Math.floor(elasped / this.dwellTime * this.dwellSpriteAmount);\n      this.material.map.offset.x = this.currentTile / this.dwellSpriteAmount;\n    } else {\n      this.updateStatus(this.IDLE);\n    }\n  };\n\n  PANOLENS.Reticle.prototype.cancelDwelling = function () {\n    this.clearTimer();\n    this.updateStatus(this.IDLE);\n  };\n\n  PANOLENS.Reticle.prototype.completeDwelling = function () {\n    this.clearTimer();\n    this.updateStatus(this.IDLE);\n  };\n})();(function () {\n  PANOLENS.Tile = function (width, height, widthSegments, heightSegments, forceDirection, forceAxis, forceAngle) {\n    var scope = this;\n\n    this.parameters = {\n      width: width,\n      height: height,\n      widthSegments: widthSegments,\n      heightSegments: heightSegments,\n      forceDirection: forceDirection,\n      forceAxis: forceAxis,\n      forceAngle: forceAngle\n    };\n\n    width = width || 10;\n    height = height || 5;\n    widthSegments = widthSegments || 1;\n    heightSegments = heightSegments || 1;\n    forceDirection = forceDirection || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 0, 1);\n    forceAxis = forceAxis || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n    forceAngle = forceAngle !== undefined ? forceAngle : 0;\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneGeometry\"](width, height, widthSegments, heightSegments), new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ color: 0xffffff, transparent: true }));\n\n    this.bendModifier = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"]();\n\n    this.entity = undefined;\n\n    this.animationDuration = 500;\n    this.animationFadeOut = undefined;\n    this.animationFadeIn = undefined;\n    this.animationTranslation = undefined;\n    this.tweens = {};\n\n    if (forceAngle !== 0) {\n      this.bend(forceDirection, forceAxis, forceAngle);\n    }\n\n    this.originalGeometry = this.geometry.clone();\n  };\n\n  PANOLENS.Tile.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].prototype);\n\n  PANOLENS.Tile.prototype.constructor = PANOLENS.Tile;\n\n  PANOLENS.Tile.prototype.clone = function () {\n    var parameters = this.parameters,\n        tile;\n\n    tile = new PANOLENS.Tile(parameters.width, parameters.height, parameters.widthSegments, parameters.heightSegments, parameters.forceDirection, parameters.forceAxis, parameters.forceAngle);\n\n    tile.setEntity(this.entity);\n    tile.material = this.material.clone();\n\n    return tile;\n  };\n\n  PANOLENS.Tile.prototype.bend = function (direction, axis, angle) {\n    this.bendModifier.set(direction, axis, angle).modify(this.geometry);\n  };\n\n  PANOLENS.Tile.prototype.unbend = function () {\n    var geometry = this.geometry;\n\n    this.geometry = this.originalGeometry;\n    this.originalGeometry = this.geometry.clone();\n\n    geometry.dispose();\n    geometry = null;\n  };\n\n  PANOLENS.Tile.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this;\n    toState = toState || {};\n    duration = duration || this.animationDuration;\n    easing = easing || TWEEN.Easing.Exponential.Out;\n    delay = delay !== undefined ? delay : 0;\n    onStart = onStart || null;\n    onUpdate = onUpdate || null;\n    onComplete = onComplete || null;\n\n    if (!this.tweens[name]) {\n      this.tweens[name] = new TWEEN.Tween(object).to(toState, duration).easing(easing).delay(delay).onStart(onStart).onUpdate(onUpdate).onComplete(onComplete);\n    }\n\n    return this.tweens[name];\n  };\n\n  PANOLENS.Tile.prototype.ripple = function (scale, duration, easing) {\n    scale = scale || 2;\n    duration = duration || 200;\n    easing = easing || TWEEN.Easing.Cubic.Out;\n\n    var scope = this,\n        ripple = this.clone();\n\n    new TWEEN.Tween(ripple.scale).to({ x: scale, y: scale }, duration).easing(easing).start();\n\n    new TWEEN.Tween(ripple.material).to({ opacity: 0 }, duration).easing(easing).onComplete(function () {\n      scope.remove(ripple);\n      ripple.geometry.dispose();\n      ripple.material.dispose();\n    }).start();\n\n    this.add(ripple);\n  };\n\n  PANOLENS.Tile.prototype.setEntity = function (entity) {\n    this.entity = entity;\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.TileGroup = function (tileArray, verticalGap, depthGap, animationDuration, offset) {\n    var scope = this,\n        textureLoader;\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].call(this);\n\n    this.tileArray = tileArray || [];\n    this.offset = offset !== undefined ? offset : 0;\n    this.v_gap = verticalGap !== undefined ? verticalGap : 6;\n    this.d_gap = depthGap !== undefined ? depthGap : 2;\n    this.animationDuration = animationDuration !== undefined ? animationDuration : 200;\n    this.animationEasing = TWEEN.Easing.Exponential.Out;\n    this.visibleDelta = 2;\n\n    this.tileArray.map(function (tile, index) {\n      if (tile.image) {\n        PANOLENS.Utils.TextureLoader.load(tile.image, scope.setTexture.bind(tile));\n      }\n\n      tile.position.set(0, index * -scope.v_gap, index * -scope.d_gap);\n      tile.originalPosition = tile.position.clone();\n      tile.setEntity(scope);\n      scope.add(tile);\n    });\n\n    this.updateVisbility();\n  };\n\n  PANOLENS.TileGroup.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype);\n\n  PANOLENS.TileGroup.prototype.constructor = PANOLENS.TileGroup;\n\n  PANOLENS.TileGroup.prototype.updateTexture = function (imageArray) {\n    var scope = this;\n\n    imageArray = imageArray || [];\n    this.children.map(function (child, index) {\n      if (child instanceof PANOLENS.Tile && imageArray[index]) {\n        PANOLENS.Utils.TextureLoader.load(imageArray[index], scope.setTexture.bind(child));\n        if (child.outline) {\n          child.outline.material.visible = true;\n        }\n      }\n    });\n  };\n\n  PANOLENS.TileGroup.prototype.updateAllTexture = function (imageArray) {\n    this.updateTexture(imageArray);\n\n    if (imageArray.length < this.children.length) {\n      for (var i = imageArray.length; i < this.children.length; i++) {\n        if (this.children[i] instanceof PANOLENS.Tile) {\n          this.children[i].material.visible = false;\n          if (this.children[i].outline) {\n            this.children[i].outline.material.visible = false;\n          }\n        }\n      }\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.setTexture = function (texture) {\n    texture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    this.material.visible = true;\n    this.material.map = texture;\n    this.material.needsUpdate = true;\n  };\n\n  PANOLENS.TileGroup.prototype.updateVisbility = function () {\n    this.children[this.offset].visible = true;\n    new TWEEN.Tween(this.children[this.offset].material).to({ opacity: 1 }, this.animationDuration).easing(this.animationEasing).start();\n\n    if (this.children[this.offset].outline) {\n      this.children[this.offset].outline.visible = true;\n    }\n\n    for (var i = this.offset - 1; i >= 0; i--) {\n      if (this.tileArray.indexOf(this.children[i]) === -1) {\n        continue;\n      }\n\n      if (this.offset - i <= this.visibleDelta) {\n        this.children[i].visible = true;\n        new TWEEN.Tween(this.children[i].material).to({ opacity: 1 / (this.offset - i) * 0.5 }, this.animationDuration).easing(this.animationEasing).start();\n      } else {\n        this.children[i].visible = false;\n      }\n\n      this.children[i].outline && (this.children[i].outline.visible = false);\n    }\n\n    for (var i = this.offset + 1; i < this.children.length; i++) {\n      if (this.tileArray.indexOf(this.children[i]) === -1) {\n        continue;\n      }\n\n      if (i - this.offset <= this.visibleDelta) {\n        this.children[i].visible = true;\n        new TWEEN.Tween(this.children[i].material).to({ opacity: 1 / (i - this.offset) * 0.5 }, this.animationDuration).easing(this.animationEasing).start();\n      } else {\n        this.children[i].visible = false;\n      }\n\n      this.children[i].outline && (this.children[i].outline.visible = false);\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.scrollUp = function (duration) {\n    var tiles = this.tileArray,\n        offset;\n\n    duration = duration !== undefined ? duration : this.animationDuration;\n\n    offset = this.offset + 1;\n\n    if (this.offset < tiles.length - 1 && tiles[this.offset + 1].material.visible) {\n      for (var i = tiles.length - 1; i >= 0; i--) {\n        new TWEEN.Tween(tiles[i].position).to({ y: (i - offset) * -this.v_gap,\n          z: Math.abs(i - offset) * -this.d_gap }, duration).easing(this.animationEasing).start();\n      }\n\n      this.offset++;\n      this.updateVisbility();\n      this.dispatchEvent({ type: 'scroll', direction: 'up' });\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.scrollDown = function (duration) {\n    var tiles = this.tileArray,\n        offset;\n\n    duration = duration !== undefined ? duration : this.animationDuration;\n\n    offset = this.offset - 1;\n\n    if (this.offset > 0 && tiles[this.offset - 1].material.visible) {\n      for (var i = 0; i < tiles.length; i++) {\n        new TWEEN.Tween(tiles[i].position).to({ y: (i - offset) * -this.v_gap,\n          z: Math.abs(i - offset) * -this.d_gap }, duration).easing(this.animationEasing).start();\n      }\n\n      this.offset--;\n      this.updateVisbility();\n      this.dispatchEvent({ type: 'scroll', direction: 'down' });\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.reset = function () {\n    this.tileArray.map(function (child, index) {\n      child.position.copy(child.originalPosition);\n    });\n\n    this.offset = 0;\n    this.updateVisbility();\n  };\n\n  PANOLENS.TileGroup.prototype.getIndex = function () {\n    return this.offset;\n  };\n\n  PANOLENS.TileGroup.prototype.getTileCount = function () {\n    var count = 0;\n\n    this.tileArray.map(function (tile) {\n      if (tile.material.visible) {\n        count++;\n      }\n    });\n\n    return count;\n  };\n})();(function () {\n  'use strict';\n\n  var sharedFont, sharedTexture;\n  var pendingQueue = [];\n\n  PANOLENS.SpriteText = function (text, maxWidth, color, opacity, options) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].call(this);\n\n    this.text = text || '';\n    this.maxWidth = maxWidth || 2000;\n    this.color = color || 0xffffff;\n    this.opacity = opacity !== undefined ? opacity : 1;\n    this.options = options || {};\n\n    this.animationDuration = 500;\n    this.animationFadeOut = undefined;\n    this.animationFadeIn = undefined;\n    this.tweens = {};\n\n    this.addText(text);\n  };\n\n  PANOLENS.SpriteText.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype);\n\n  PANOLENS.SpriteText.prototype.constructor = PANOLENS.SpriteText;\n\n  PANOLENS.SpriteText.prototype.generateTextGeometry = function () {};\n  PANOLENS.SpriteText.prototype.generateSDFShader = function () {};\n\n  PANOLENS.SpriteText.prototype.setBMFont = function (callback, font, texture) {\n    texture.needsUpdate = true;\n    texture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearMipMapLinearFilter\"];\n    texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    texture.generateMipmaps = true;\n    texture.anisotropy = 8;\n\n    sharedFont = font;\n    sharedTexture = texture;\n\n    for (var i = pendingQueue.length - 1; i >= 0; i--) {\n      pendingQueue[i].target.addText(pendingQueue[i].text);\n    }\n\n    while (pendingQueue.length > 0) {\n      pendingQueue.pop();\n    }\n\n    callback && callback();\n  };\n\n  PANOLENS.SpriteText.prototype.addText = function (text) {\n    if (!sharedFont || !sharedTexture) {\n      pendingQueue.push({ target: this, text: text });\n      return;\n    }\n\n    var textAnchor = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"]();\n\n    this.options.text = text;\n    this.options.font = sharedFont;\n    this.options.width = this.maxWidth;\n\n    var geometry = this.generateTextGeometry(this.options);\n    geometry.computeBoundingBox();\n    geometry.computeBoundingSphere();\n\n    var material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"RawShaderMaterial\"](this.generateSDFShader({\n      map: sharedTexture,\n      side: __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"],\n      transparent: true,\n      color: this.color,\n      opacity: this.opacity\n    }));\n\n    var layout = geometry.layout;\n    var textMesh = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"](geometry, material);\n\n    textMesh.entity = this;\n    textMesh.position.x = -layout.width / 2;\n    textMesh.position.y = layout.height * 1.035;\n\n    textAnchor.scale.x = textAnchor.scale.y = -0.05;\n    textAnchor.add(textMesh);\n\n    this.mesh = textMesh;\n    this.add(textAnchor);\n  };\n\n  PANOLENS.SpriteText.prototype.update = function (options) {\n    var mesh;\n\n    options = options || {};\n\n    mesh = this.mesh;\n\n    mesh.geometry.update(options);\n    mesh.position.x = -mesh.geometry.layout.width / 2;\n    mesh.position.y = mesh.geometry.layout.height * 1.035;\n  };\n\n  PANOLENS.SpriteText.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this;\n    toState = toState || {};\n    duration = duration || this.animationDuration;\n    easing = easing || TWEEN.Easing.Exponential.Out;\n    delay = delay !== undefined ? delay : 0;\n    onStart = onStart || null;\n    onUpdate = onUpdate || null;\n    onComplete = onComplete || null;\n\n    if (!this.tweens[name]) {\n      this.tweens[name] = new TWEEN.Tween(object).to(toState, duration).easing(easing).delay(delay).onStart(onStart).onUpdate(onUpdate).onComplete(onComplete);\n    }\n\n    return this.tweens[name];\n  };\n\n  PANOLENS.SpriteText.prototype.getLayout = function () {\n    return this.mesh && this.mesh.geometry && this.mesh.geometry.layout || {};\n  };\n\n  PANOLENS.SpriteText.prototype.setEntity = function (entity) {\n    this.entity = entity;\n  };\n})();(function () {\n  PANOLENS.Widget = function (container) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].call(this);\n\n    this.DEFAULT_TRANSITION = 'all 0.27s ease';\n    this.TOUCH_ENABLED = PANOLENS.Utils.checkTouchSupported();\n    this.PREVENT_EVENT_HANDLER = function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    };\n\n    this.container = container;\n\n    this.barElement;\n    this.fullscreenElement;\n    this.videoElement;\n    this.settingElement;\n\n    this.mainMenu;\n\n    this.activeMainItem;\n    this.activeSubMenu;\n    this.mask;\n  };\n\n  PANOLENS.Widget.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n\n  PANOLENS.Widget.prototype.constructor = PANOLENS.Widget;\n\n  PANOLENS.Widget.prototype.addControlBar = function () {\n    if (!this.container) {\n      console.warn('Widget container not set');\n      return;\n    }\n\n    var scope = this,\n        bar,\n        styleTranslate,\n        styleOpacity,\n        gradientStyle;\n\n    gradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))';\n\n    bar = document.createElement('div');\n    bar.style.width = '100%';\n    bar.style.height = '44px';\n    bar.style.float = 'left';\n    bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)';\n    bar.style.background = '-webkit-' + gradientStyle;\n    bar.style.background = '-moz-' + gradientStyle;\n    bar.style.background = '-o-' + gradientStyle;\n    bar.style.background = '-ms-' + gradientStyle;\n    bar.style.background = gradientStyle;\n    bar.style.transition = this.DEFAULT_TRANSITION;\n    bar.style.pointerEvents = 'none';\n    bar.isHidden = false;\n    bar.toggle = function () {\n      bar.isHidden = !bar.isHidden;\n      styleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)';\n      styleOpacity = bar.isHidden ? 0 : 1;\n      bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate;\n      bar.style.opacity = styleOpacity;\n    };\n\n    var menu = this.createDefaultMenu();\n    this.mainMenu = this.createMainMenu(menu);\n    bar.appendChild(this.mainMenu);\n\n    var mask = this.createMask();\n    this.mask = mask;\n    this.container.appendChild(mask);\n\n    bar.dispose = function () {\n      if (scope.fullscreenElement) {\n        bar.removeChild(scope.fullscreenElement);\n        scope.fullscreenElement.dispose();\n        scope.fullscreenElement = null;\n      }\n\n      if (scope.settingElement) {\n        bar.removeChild(scope.settingElement);\n        scope.settingElement.dispose();\n        scope.settingElement = null;\n      }\n\n      if (scope.videoElement) {\n        bar.removeChild(scope.videoElement);\n        scope.videoElement.dispose();\n        scope.videoElement = null;\n      }\n    };\n\n    this.container.appendChild(bar);\n\n    this.mask.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true);\n    this.mask.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true);\n    this.mask.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true);\n    this.mask.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.mask.hide();\n      scope.settingElement.deactivate();\n    }, false);\n\n    this.addEventListener('control-bar-toggle', bar.toggle);\n\n    this.barElement = bar;\n  };\n\n  PANOLENS.Widget.prototype.createDefaultMenu = function () {\n    var scope = this,\n        handler;\n\n    handler = function handler(method, data) {\n      return function () {\n        scope.dispatchEvent({\n\n          type: 'panolens-viewer-handler',\n          method: method,\n          data: data\n\n        });\n      };\n    };\n\n    return [{\n      title: 'Control',\n      subMenu: [{\n        title: this.TOUCH_ENABLED ? 'Touch' : 'Mouse',\n        handler: handler('enableControl', PANOLENS.Controls.ORBIT)\n      }, {\n        title: 'Sensor',\n        handler: handler('enableControl', PANOLENS.Controls.DEVICEORIENTATION)\n      }]\n    }, {\n      title: 'Mode',\n      subMenu: [{\n        title: 'Normal',\n        handler: handler('disableEffect')\n      }, {\n        title: 'Cardboard',\n        handler: handler('enableEffect', PANOLENS.Modes.CARDBOARD)\n      }, {\n        title: 'Stereoscopic',\n        handler: handler('enableEffect', PANOLENS.Modes.STEREO)\n      }]\n    }];\n  };\n\n  PANOLENS.Widget.prototype.addControlButton = function (name) {\n    var element;\n\n    switch (name) {\n      case 'fullscreen':\n\n        element = this.createFullscreenButton();\n        this.fullscreenElement = element;\n\n        break;\n\n      case 'setting':\n\n        element = this.createSettingButton();\n        this.settingElement = element;\n\n        break;\n\n      case 'video':\n\n        element = this.createVideoControl();\n        this.videoElement = element;\n\n        break;\n\n      default:\n\n        return;\n    }\n\n    if (!element) {\n      return;\n    }\n\n    this.barElement.appendChild(element);\n  };\n\n  PANOLENS.Widget.prototype.createMask = function () {\n    var element = document.createElement('div');\n    element.style.position = 'absolute';\n    element.style.top = 0;\n    element.style.left = 0;\n    element.style.width = '100%';\n    element.style.height = '100%';\n    element.style.background = 'transparent';\n    element.style.display = 'none';\n\n    element.show = function () {\n      this.style.display = 'block';\n    };\n\n    element.hide = function () {\n      this.style.display = 'none';\n    };\n\n    return element;\n  };\n\n  PANOLENS.Widget.prototype.createSettingButton = function () {\n    var scope = this,\n        item;\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.mainMenu.toggle();\n\n      if (this.activated) {\n        this.deactivate();\n      } else {\n        this.activate();\n      }\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.Setting + '\")',\n        webkitTransition: this.DEFAULT_TRANSITION,\n        transition: this.DEFAULT_TRANSITION\n\n      },\n\n      onTap: onTap\n\n    });\n\n    item.activate = function () {\n      this.style.transform = 'rotate3d(0,0,1,90deg)';\n      this.activated = true;\n      scope.mask.show();\n    };\n\n    item.deactivate = function () {\n      this.style.transform = 'rotate3d(0,0,0,0)';\n      this.activated = false;\n      scope.mask.hide();\n\n      if (scope.mainMenu && scope.mainMenu.visible) {\n        scope.mainMenu.hide();\n      }\n\n      if (scope.activeSubMenu && scope.activeSubMenu.visible) {\n        scope.activeSubMenu.hide();\n      }\n\n      if (scope.mainMenu && scope.mainMenu._width) {\n        scope.mainMenu.changeSize(scope.mainMenu._width);\n        scope.mainMenu.unslideAll();\n      }\n    };\n\n    item.activated = false;\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createFullscreenButton = function () {\n    var scope = this,\n        item,\n        isFullscreen = false,\n        tapSkipped = true,\n        stylesheetId;\n\n    stylesheetId = 'panolens-style-addon';\n\n    if (!document.fullscreenEnabled && !document.webkitFullscreenEnabled && !document.mozFullScreenEnabled && !document.msFullscreenEnabled) {\n      return;\n    }\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      tapSkipped = false;\n\n      if (!isFullscreen) {\n        scope.container.requestFullscreen && scope.container.requestFullscreen();\n        scope.container.msRequestFullscreen && scope.container.msRequestFullscreen();\n        scope.container.mozRequestFullScreen && scope.container.mozRequestFullScreen();\n        scope.container.webkitRequestFullscreen && scope.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        isFullscreen = true;\n      } else {\n        document.exitFullscreen && document.exitFullscreen();\n        document.msExitFullscreen && document.msExitFullscreen();\n        document.mozCancelFullScreen && document.mozCancelFullScreen();\n        document.webkitExitFullscreen && document.webkitExitFullscreen();\n        isFullscreen = false;\n      }\n\n      this.style.backgroundImage = isFullscreen ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n    }\n\n    function onFullScreenChange(e) {\n      if (tapSkipped) {\n        isFullscreen = !isFullscreen;\n\n        item.style.backgroundImage = isFullscreen ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n      }\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onWindowResize', data: false });\n\n      tapSkipped = true;\n    }\n\n    document.addEventListener('fullscreenchange', onFullScreenChange, false);\n    document.addEventListener('webkitfullscreenchange', onFullScreenChange, false);\n    document.addEventListener('mozfullscreenchange', onFullScreenChange, false);\n    document.addEventListener('MSFullscreenChange', onFullScreenChange, false);\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n\n      },\n\n      onTap: onTap\n\n    });\n\n    if (!document.querySelector(stylesheetId)) {\n      var sheet = document.createElement('style');\n      sheet.id = stylesheetId;\n      sheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }';\n      document.body.appendChild(sheet);\n    }\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createVideoControl = function () {\n    var item;\n\n    item = document.createElement('span');\n    item.style.display = 'none';\n    item.show = function () {\n      item.style.display = '';\n    };\n\n    item.hide = function () {\n      item.style.display = 'none';\n      item.controlButton.paused = true;\n      item.controlButton.update();\n    };\n\n    item.controlButton = this.createVideoControlButton();\n    item.seekBar = this.createVideoControlSeekbar();\n\n    item.appendChild(item.controlButton);\n    item.appendChild(item.seekBar);\n\n    item.dispose = function () {\n      item.removeChild(item.controlButton);\n      item.removeChild(item.seekBar);\n\n      item.controlButton.dispose();\n      item.controlButton = null;\n\n      item.seekBar.dispose();\n      item.seekBar = null;\n    };\n\n    this.addEventListener('video-control-show', item.show);\n    this.addEventListener('video-control-hide', item.hide);\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createVideoControlButton = function () {\n    var scope = this,\n        item;\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused });\n\n      this.paused = !this.paused;\n\n      item.update();\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.VideoPlay + '\")'\n\n      },\n\n      onTap: onTap\n\n    });\n\n    item.paused = true;\n\n    item.update = function (paused) {\n      this.paused = paused !== undefined ? paused : this.paused;\n\n      this.style.backgroundImage = 'url(\"' + (this.paused ? PANOLENS.DataImage.VideoPlay : PANOLENS.DataImage.VideoPause) + '\")';\n    };\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createVideoControlSeekbar = function () {\n    var scope = this,\n        item,\n        progressElement,\n        progressElementControl,\n        isDragging = false,\n        mouseX,\n        percentageNow,\n        percentageNext;\n\n    progressElement = document.createElement('div');\n    progressElement.style.width = '0%';\n    progressElement.style.height = '100%';\n    progressElement.style.backgroundColor = '#fff';\n\n    progressElementControl = document.createElement('div');\n    progressElementControl.style.float = 'right';\n    progressElementControl.style.width = '14px';\n    progressElementControl.style.height = '14px';\n    progressElementControl.style.transform = 'translate(7px, -5px)';\n    progressElementControl.style.borderRadius = '50%';\n    progressElementControl.style.backgroundColor = '#ddd';\n\n    progressElementControl.addEventListener('mousedown', onMouseDown, false);\n    progressElementControl.addEventListener('touchstart', onMouseDown, false);\n\n    function onMouseDown(event) {\n      event.stopPropagation();\n\n      isDragging = true;\n\n      mouseX = event.clientX || event.changedTouches && event.changedTouches[0].clientX;\n\n      percentageNow = parseInt(progressElement.style.width) / 100;\n\n      addControlListeners();\n    }\n\n    function onVideoControlDrag(event) {\n      var clientX;\n\n      if (isDragging) {\n        clientX = event.clientX || event.changedTouches && event.changedTouches[0].clientX;\n\n        percentageNext = (clientX - mouseX) / item.clientWidth;\n\n        percentageNext = percentageNow + percentageNext;\n\n        percentageNext = percentageNext > 1 ? 1 : percentageNext < 0 ? 0 : percentageNext;\n\n        item.setProgress(percentageNext);\n\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext });\n      }\n    }\n\n    function onVideoControlStop(event) {\n      event.stopPropagation();\n\n      isDragging = false;\n\n      removeControlListeners();\n    }\n\n    function addControlListeners() {\n      scope.container.addEventListener('mousemove', onVideoControlDrag, false);\n      scope.container.addEventListener('mouseup', onVideoControlStop, false);\n      scope.container.addEventListener('touchmove', onVideoControlDrag, false);\n      scope.container.addEventListener('touchend', onVideoControlStop, false);\n    }\n\n    function removeControlListeners() {\n      scope.container.removeEventListener('mousemove', onVideoControlDrag, false);\n      scope.container.removeEventListener('mouseup', onVideoControlStop, false);\n      scope.container.removeEventListener('touchmove', onVideoControlDrag, false);\n      scope.container.removeEventListener('touchend', onVideoControlStop, false);\n    }\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      var percentage;\n\n      if (event.target === progressElementControl) {\n        return;\n      }\n\n      percentage = event.changedTouches && event.changedTouches.length > 0 ? (event.changedTouches[0].pageX - event.target.getBoundingClientRect().left) / this.clientWidth : event.offsetX / this.clientWidth;\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage });\n\n      item.setProgress(event.offsetX / this.clientWidth);\n    }\n\n    function onDispose() {\n      removeControlListeners();\n      progressElement = null;\n      progressElementControl = null;\n    }\n\n    progressElement.appendChild(progressElementControl);\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        width: '30%',\n        height: '4px',\n        marginTop: '20px',\n        backgroundColor: 'rgba(188,188,188,0.8)'\n\n      },\n\n      onTap: onTap,\n      onDispose: onDispose\n\n    });\n\n    item.appendChild(progressElement);\n\n    item.setProgress = function (percentage) {\n      progressElement.style.width = percentage * 100 + '%';\n    };\n\n    this.addEventListener('video-update', function (event) {\n      item.setProgress(event.percentage);\n    });\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createMenuItem = function (title) {\n    var scope = this,\n        item = document.createElement('a');\n    item.textContent = title;\n    item.style.display = 'block';\n    item.style.padding = '10px';\n    item.style.textDecoration = 'none';\n    item.style.cursor = 'pointer';\n    item.style.pointerEvents = 'auto';\n    item.style.transition = this.DEFAULT_TRANSITION;\n\n    item.slide = function (right) {\n      this.style.transform = 'translateX(' + (right ? '' : '-') + '100%)';\n    };\n\n    item.unslide = function () {\n      this.style.transform = 'translateX(0)';\n    };\n\n    item.setIcon = function (url) {\n      if (this.icon) {\n        this.icon.style.backgroundImage = 'url(' + url + ')';\n      }\n    };\n\n    item.setSelectionTitle = function (title) {\n      if (this.selection) {\n        this.selection.textContent = title;\n      }\n    };\n\n    item.addSelection = function (name) {\n      var selection = document.createElement('span');\n      selection.style.fontSize = '13px';\n      selection.style.fontWeight = '300';\n      selection.style.float = 'right';\n\n      this.selection = selection;\n      this.setSelectionTitle(name);\n      this.appendChild(selection);\n\n      return this;\n    };\n\n    item.addIcon = function (url, left, flip) {\n      url = url || PANOLENS.DataImage.ChevronRight;\n      left = left || false;\n      flip = flip || false;\n\n      var element = document.createElement('span');\n      element.style.float = left ? 'left' : 'right';\n      element.style.width = '17px';\n      element.style.height = '17px';\n      element.style['margin' + (left ? 'Right' : 'Left')] = '12px';\n      element.style.backgroundSize = 'cover';\n\n      if (flip) {\n        element.style.transform = 'rotateZ(180deg)';\n      }\n\n      this.icon = element;\n      this.setIcon(url);\n      this.appendChild(element);\n\n      return this;\n    };\n\n    item.addSubMenu = function (title, items) {\n      this.subMenu = scope.createSubMenu(title, items);\n\n      return this;\n    };\n\n    item.addEventListener('mouseenter', function () {\n      this.style.backgroundColor = '#e0e0e0';\n    }, false);\n\n    item.addEventListener('mouseleave', function () {\n      this.style.backgroundColor = '#fafafa';\n    }, false);\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createMenuItemHeader = function (title) {\n    var header = this.createMenuItem(title);\n\n    header.style.borderBottom = '1px solid #333';\n    header.style.paddingBottom = '15px';\n\n    return header;\n  };\n\n  PANOLENS.Widget.prototype.createMainMenu = function (menus) {\n    var scope = this,\n        menu = this.createMenu(),\n        subMenu;\n\n    menu._width = 200;\n    menu.changeSize(menu._width);\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      var mainMenu = scope.mainMenu,\n          subMenu = this.subMenu;\n\n      function onNextTick() {\n        mainMenu.changeSize(subMenu.clientWidth);\n        subMenu.show();\n        subMenu.unslideAll();\n      }\n\n      mainMenu.hide();\n      mainMenu.slideAll();\n      mainMenu.parentElement.appendChild(subMenu);\n\n      scope.activeMainItem = this;\n      scope.activeSubMenu = subMenu;\n\n      window.requestAnimationFrame(onNextTick);\n    }\n\n    for (var i = 0; i < menus.length; i++) {\n      var item = menu.addItem(menus[i].title);\n\n      item.style.paddingLeft = '20px';\n\n      item.addIcon().addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n      if (menus[i].subMenu && menus[i].subMenu.length > 0) {\n        var title = menus[i].subMenu[0].title;\n\n        item.addSelection(title).addSubMenu(menus[i].title, menus[i].subMenu);\n      }\n    }\n\n    return menu;\n  };\n\n  PANOLENS.Widget.prototype.createSubMenu = function (title, items) {\n    var scope = this,\n        menu,\n        subMenu = this.createMenu();\n\n    subMenu.items = items;\n    subMenu.activeItem;\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      menu = scope.mainMenu;\n      menu.changeSize(menu._width);\n      menu.unslideAll();\n      menu.show();\n      subMenu.slideAll(true);\n      subMenu.hide();\n\n      if (this.type !== 'header') {\n        subMenu.setActiveItem(this);\n        scope.activeMainItem.setSelectionTitle(this.textContent);\n\n        this.handler && this.handler();\n      }\n    }\n\n    subMenu.addHeader(title).addIcon(undefined, true, true).addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n    for (var i = 0; i < items.length; i++) {\n      var item = subMenu.addItem(items[i].title);\n\n      item.style.fontWeight = 300;\n      item.handler = items[i].handler;\n      item.addIcon(' ', true);\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n      if (!subMenu.activeItem) {\n        subMenu.setActiveItem(item);\n      }\n    }\n\n    subMenu.slideAll(true);\n\n    return subMenu;\n  };\n\n  PANOLENS.Widget.prototype.createMenu = function () {\n    var scope = this,\n        menu = document.createElement('span'),\n        style;\n\n    style = menu.style;\n\n    style.padding = '5px 0';\n    style.position = 'fixed';\n    style.bottom = '100%';\n    style.right = '14px';\n    style.backgroundColor = '#fafafa';\n    style.fontFamily = 'Helvetica Neue';\n    style.fontSize = '14px';\n    style.visibility = 'hidden';\n    style.opacity = 0;\n    style.boxShadow = '0 0 12pt rgba(0,0,0,0.25)';\n    style.borderRadius = '2px';\n    style.overflow = 'hidden';\n    style.willChange = 'width, height, opacity';\n    style.pointerEvents = 'auto';\n    style.transition = this.DEFAULT_TRANSITION;\n\n    menu.visible = false;\n\n    menu.changeSize = function (width, height) {\n      if (width) {\n        this.style.width = width + 'px';\n      }\n\n      if (height) {\n        this.style.height = height + 'px';\n      }\n    };\n\n    menu.show = function () {\n      this.style.opacity = 1;\n      this.style.visibility = 'visible';\n      this.visible = true;\n    };\n\n    menu.hide = function () {\n      this.style.opacity = 0;\n      this.style.visibility = 'hidden';\n      this.visible = false;\n    };\n\n    menu.toggle = function () {\n      if (this.visible) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    };\n\n    menu.slideAll = function (right) {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[i].slide) {\n          menu.children[i].slide(right);\n        }\n      }\n    };\n\n    menu.unslideAll = function () {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[i].unslide) {\n          menu.children[i].unslide();\n        }\n      }\n    };\n\n    menu.addHeader = function (title) {\n      var header = scope.createMenuItemHeader(title);\n      header.type = 'header';\n\n      this.appendChild(header);\n\n      return header;\n    };\n\n    menu.addItem = function (title) {\n      var item = scope.createMenuItem(title);\n      item.type = 'item';\n\n      this.appendChild(item);\n\n      return item;\n    };\n\n    menu.setActiveItem = function (item) {\n      if (this.activeItem) {\n        this.activeItem.setIcon(' ');\n      }\n\n      item.setIcon(PANOLENS.DataImage.Check);\n\n      this.activeItem = item;\n    };\n\n    menu.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true);\n    menu.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true);\n    menu.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true);\n\n    return menu;\n  };\n\n  PANOLENS.Widget.prototype.createCustomItem = function (options) {\n    options = options || {};\n\n    var scope = this,\n        item = options.element || document.createElement('span');\n\n    item.style.cursor = 'pointer';\n    item.style.float = 'right';\n    item.style.width = '44px';\n    item.style.height = '100%';\n    item.style.backgroundSize = '60%';\n    item.style.backgroundRepeat = 'no-repeat';\n    item.style.backgroundPosition = 'center';\n    item.style.webkitUserSelect = item.style.MozUserSelect = item.style.userSelect = 'none';\n    item.style.position = 'relative';\n    item.style.pointerEvents = 'auto';\n\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function () {\n      item.style.filter = item.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))';\n    });\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function () {\n      item.style.filter = item.style.webkitFilter = '';\n    });\n\n    item = this.mergeStyleOptions(item, options.style);\n\n    if (options.onTap) {\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false);\n    }\n\n    item.dispose = function () {\n      item.removeEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false);\n\n      options.onDispose && options.onDispose();\n    };\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.mergeStyleOptions = function (element, options) {\n    options = options || {};\n\n    for (var property in options) {\n      if (options.hasOwnProperty(property)) {\n        element.style[property] = options[property];\n      }\n    }\n\n    return element;\n  };\n\n  PANOLENS.Widget.prototype.dispose = function () {\n    if (this.barElement) {\n      this.container.removeChild(this.barElement);\n      this.barElement.dispose();\n      this.barElement = null;\n    }\n  };\n})();(function () {\n  PANOLENS.Infospot = function (scale, imageSrc, animated) {\n    var scope = this,\n        ratio,\n        startScale,\n        endScale,\n        duration;\n\n    scale = scale || 300;\n    imageSrc = imageSrc || PANOLENS.DataImage.Info;\n    duration = 500;\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].call(this);\n\n    this.type = 'infospot';\n\n    this.animated = animated !== undefined ? animated : true;\n    this.isHovering = false;\n    this.visible = false;\n\n    this.element;\n    this.toPanorama;\n    this.cursorStyle;\n\n    this.mode = PANOLENS.Modes.UNKNOWN;\n\n    this.scale.set(scale, scale, 1);\n    this.rotation.y = Math.PI;\n    this.scaleFactor = 1.3;\n\n    this.container;\n\n    this.HANDLER_FOCUS;\n\n    PANOLENS.Utils.TextureLoader.load(imageSrc, postLoad);\n\n    function postLoad(texture) {\n      texture.wrapS = __WEBPACK_IMPORTED_MODULE_8_three__[\"RepeatWrapping\"];\n      texture.repeat.x = -1;\n\n      texture.image.width = texture.image.naturalWidth || 64;\n      texture.image.height = texture.image.naturalHeight || 64;\n\n      ratio = texture.image.width / texture.image.height;\n      scope.scale.set(ratio * scale, scale, 1);\n\n      startScale = scope.scale.clone();\n\n      scope.scaleUpAnimation = new TWEEN.Tween(scope.scale).to({ x: startScale.x * scope.scaleFactor, y: startScale.y * scope.scaleFactor }, duration).easing(TWEEN.Easing.Elastic.Out);\n\n      scope.scaleDownAnimation = new TWEEN.Tween(scope.scale).to({ x: startScale.x, y: startScale.y }, duration).easing(TWEEN.Easing.Elastic.Out);\n\n      scope.material.side = __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"];\n      scope.material.map = texture;\n      scope.material.depthTest = false;\n      scope.material.needsUpdate = true;\n    }\n\n    function show() {\n      this.visible = true;\n    }\n\n    function hide() {\n      this.visible = false;\n    }\n\n    this.showAnimation = new TWEEN.Tween(this.material).to({ opacity: 1 }, duration).onStart(show.bind(this)).easing(TWEEN.Easing.Quartic.Out);\n\n    this.hideAnimation = new TWEEN.Tween(this.material).to({ opacity: 0 }, duration).onComplete(hide.bind(this)).easing(TWEEN.Easing.Quartic.Out);\n\n    this.addEventListener('click', this.onClick);\n    this.addEventListener('hover', this.onHover);\n    this.addEventListener('hoverenter', this.onHoverStart);\n    this.addEventListener('hoverleave', this.onHoverEnd);\n    this.addEventListener('panolens-dual-eye-effect', this.onDualEyeEffect);\n    this.addEventListener('panolens-container', this.setContainer.bind(this));\n    this.addEventListener('dismiss', this.onDismiss);\n    this.addEventListener('panolens-infospot-focus', this.setFocusMethod);\n  };\n\n  PANOLENS.Infospot.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].prototype);\n\n  PANOLENS.Infospot.prototype.setContainer = function (data) {\n    var container;\n\n    if (data instanceof HTMLElement) {\n      container = data;\n    } else if (data && data.container) {\n      container = data.container;\n    }\n\n    if (container && this.element) {\n      container.appendChild(this.element);\n    }\n\n    this.container = container;\n  };\n\n  PANOLENS.Infospot.prototype.getContainer = function () {\n    return this.container;\n  };\n\n  PANOLENS.Infospot.prototype.onClick = function (event) {\n    if (this.element && this.getContainer()) {\n      this.onHoverStart(event);\n\n      this.lockHoverElement();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onDismiss = function (event) {\n    if (this.element) {\n      this.unlockHoverElement();\n      this.onHoverEnd();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onHover = function (event) {};\n\n  PANOLENS.Infospot.prototype.onHoverStart = function (event) {\n    if (!this.getContainer()) {\n      return;\n    }\n\n    var cursorStyle = this.cursorStyle || (this.mode === PANOLENS.Modes.NORMAL ? 'pointer' : 'default');\n\n    this.isHovering = true;\n    this.container.style.cursor = cursorStyle;\n\n    if (this.animated) {\n      this.scaleDownAnimation && this.scaleDownAnimation.stop();\n      this.scaleUpAnimation && this.scaleUpAnimation.start();\n    }\n\n    if (this.element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0) {\n      if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n        this.element.style.display = 'none';\n        this.element.left && (this.element.left.style.display = 'block');\n        this.element.right && (this.element.right.style.display = 'block');\n\n        this.element._width = this.element.left.clientWidth;\n        this.element._height = this.element.left.clientHeight;\n      } else {\n        this.element.style.display = 'block';\n        this.element.left && (this.element.left.style.display = 'none');\n        this.element.right && (this.element.right.style.display = 'none');\n\n        this.element._width = this.element.clientWidth;\n        this.element._height = this.element.clientHeight;\n      }\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onHoverEnd = function () {\n    if (!this.getContainer()) {\n      return;\n    }\n\n    this.isHovering = false;\n    this.container.style.cursor = 'default';\n\n    if (this.animated) {\n      this.scaleUpAnimation && this.scaleUpAnimation.stop();\n      this.scaleDownAnimation && this.scaleDownAnimation.start();\n    }\n\n    if (this.element && !this.element.locked) {\n      this.element.style.display = 'none';\n      this.element.left && (this.element.left.style.display = 'none');\n      this.element.right && (this.element.right.style.display = 'none');\n\n      this.unlockHoverElement();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onDualEyeEffect = function (event) {\n    if (!this.getContainer()) {\n      return;\n    }\n\n    var element, halfWidth, halfHeight;\n\n    this.mode = event.mode;\n\n    element = this.element;\n\n    halfWidth = this.container.clientWidth / 2;\n    halfHeight = this.container.clientHeight / 2;\n\n    if (!element) {\n      return;\n    }\n\n    if (!element.left || !element.right) {\n      element.left = element.cloneNode(true);\n      element.right = element.cloneNode(true);\n    }\n\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      element.left.style.display = element.style.display;\n      element.right.style.display = element.style.display;\n      element.style.display = 'none';\n    } else {\n      element.style.display = element.left.style.display;\n      element.left.style.display = 'none';\n      element.right.style.display = 'none';\n    }\n\n    this.translateElement(halfWidth, halfHeight);\n\n    this.container.appendChild(element.left);\n    this.container.appendChild(element.right);\n  };\n\n  PANOLENS.Infospot.prototype.translateElement = function (x, y) {\n    if (!this.element._width || !this.element._height || !this.getContainer()) {\n      return;\n    }\n\n    var left, top, element, width, height, delta, container;\n\n    container = this.container;\n    element = this.element;\n    width = element._width / 2;\n    height = element._height / 2;\n    delta = element.verticalDelta !== undefined ? element.verticalDelta : 40;\n\n    left = x - width;\n    top = y - height - delta;\n\n    if ((this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) && element.left && element.right && !(x === container.clientWidth / 2 && y === container.clientHeight / 2)) {\n      left = container.clientWidth / 4 - width + (x - container.clientWidth / 2);\n      top = container.clientHeight / 2 - height - delta + (y - container.clientHeight / 2);\n\n      this.setElementStyle('transform', element.left, 'translate(' + left + 'px, ' + top + 'px)');\n\n      left += container.clientWidth / 2;\n\n      this.setElementStyle('transform', element.right, 'translate(' + left + 'px, ' + top + 'px)');\n    } else {\n      this.setElementStyle('transform', element, 'translate(' + left + 'px, ' + top + 'px)');\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setElementStyle = function (type, element, value) {\n    var style = element.style;\n\n    if (type === 'transform') {\n      style.webkitTransform = style.msTransform = style.transform = value;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setText = function (text) {\n    if (this.element) {\n      this.element.textContent = text;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setCursorHoverStyle = function (style) {\n    this.cursorStyle = style;\n  };\n\n  PANOLENS.Infospot.prototype.addHoverText = function (text, delta) {\n    if (!this.element) {\n      this.element = document.createElement('div');\n      this.element.style.display = 'none';\n      this.element.style.color = '#fff';\n      this.element.style.top = 0;\n      this.element.style.maxWidth = '50%';\n      this.element.style.maxHeight = '50%';\n      this.element.style.textShadow = '0 0 3px #000000';\n      this.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif';\n      this.element.style.position = 'absolute';\n      this.element.classList.add('panolens-infospot');\n      this.element.verticalDelta = delta !== undefined ? delta : 40;\n    }\n\n    this.setText(text);\n  };\n\n  PANOLENS.Infospot.prototype.addHoverElement = function (el, delta) {\n    if (!this.element) {\n      this.element = el.cloneNode(true);\n      this.element.style.display = 'none';\n      this.element.style.top = 0;\n      this.element.style.position = 'absolute';\n      this.element.classList.add('panolens-infospot');\n      this.element.verticalDelta = delta !== undefined ? delta : 40;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.removeHoverElement = function () {\n    if (this.element) {\n      if (this.element.left) {\n        this.container.removeChild(this.element.left);\n        this.element.left = null;\n      }\n\n      if (this.element.right) {\n        this.container.removeChild(this.element.right);\n        this.element.right = null;\n      }\n\n      this.container.removeChild(this.element);\n      this.element = null;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.lockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = true;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.unlockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = false;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.show = function (delay) {\n    delay = delay || 0;\n\n    if (this.animated) {\n      this.hideAnimation && this.hideAnimation.stop();\n      this.showAnimation && this.showAnimation.delay(delay).start();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.hide = function (delay) {\n    delay = delay || 0;\n\n    if (this.animated) {\n      this.showAnimation && this.showAnimation.stop();\n      this.hideAnimation && this.hideAnimation.delay(delay).start();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setFocusMethod = function (event) {\n    if (event) {\n      this.HANDLER_FOCUS = event.method;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.focus = function (duration, easing) {\n    if (this.HANDLER_FOCUS) {\n      this.HANDLER_FOCUS(this.position, duration, easing);\n      this.onDismiss();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.dispose = function () {\n    this.removeHoverElement();\n    this.material.dispose();\n\n    if (this.parent) {\n      this.parent.remove(this);\n    }\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Viewer = function (options) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].call(this);\n\n    if (!__WEBPACK_IMPORTED_MODULE_8_three__) {\n      console.error('Three.JS not found');\n\n      return;\n    }\n\n    var container;\n\n    options = options || {};\n    options.controlBar = options.controlBar !== undefined ? options.controlBar : true;\n    options.controlButtons = options.controlButtons || ['fullscreen', 'setting', 'video'];\n    options.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false;\n    options.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true;\n    options.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false;\n    options.clickTolerance = options.clickTolerance || 10;\n    options.cameraFov = options.cameraFov || 60;\n    options.reverseDragging = options.reverseDragging || false;\n    options.enableReticle = options.enableReticle || false;\n    options.dwellTime = options.dwellTime || 1500;\n    options.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true;\n    options.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false;\n    options.indicatorSize = options.indicatorSize || 30;\n    options.output = options.output ? options.output : 'none';\n\n    this.options = options;\n\n    if (options.container) {\n      container = options.container;\n      container._width = container.clientWidth;\n      container._height = container.clientHeight;\n    } else {\n      container = document.createElement('div');\n      container.classList.add('panolens-container');\n      container.style.width = '100%';\n      container.style.height = '100%';\n      container._width = window.innerWidth;\n      container._height = window.innerHeight;\n      document.body.appendChild(container);\n    }\n\n    this.container = container;\n\n    this.camera = options.camera || new __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"](this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 10000);\n    this.scene = options.scene || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Scene\"]();\n    this.renderer = options.renderer || new __WEBPACK_IMPORTED_MODULE_8_three__[\"WebGLRenderer\"]({ alpha: true, antialias: false });\n\n    this.viewIndicatorSize = options.indicatorSize;\n\n    this.reticle = {};\n    this.tempEnableReticle = this.options.enableReticle;\n\n    this.mode = PANOLENS.Modes.NORMAL;\n\n    this.OrbitControls;\n    this.DeviceOrientationControls;\n\n    this.CardboardEffect;\n    this.StereoEffect;\n\n    this.controls;\n    this.effect;\n    this.panorama;\n    this.widget;\n\n    this.hoverObject;\n    this.infospot;\n    this.pressEntityObject;\n    this.pressObject;\n\n    this.raycaster = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Raycaster\"]();\n    this.raycasterPoint = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n    this.userMouse = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n    this.updateCallbacks = [];\n    this.requestAnimationId;\n\n    this.cameraFrustum = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Frustum\"]();\n    this.cameraViewProjectionMatrix = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]();\n\n    this.outputDivElement;\n\n    this.HANDLER_MOUSE_DOWN = this.onMouseDown.bind(this);\n    this.HANDLER_MOUSE_UP = this.onMouseUp.bind(this);\n    this.HANDLER_MOUSE_MOVE = this.onMouseMove.bind(this);\n    this.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind(this);\n    this.HANDLER_KEY_DOWN = this.onKeyDown.bind(this);\n    this.HANDLER_KEY_UP = this.onKeyUp.bind(this);\n    this.HANDLER_TAP = this.onTap.bind(this, {\n      clientX: this.container.clientWidth / 2,\n      clientY: this.container.clientHeight / 2\n    });\n\n    this.OUTPUT_INFOSPOT = false;\n\n    this.tweenLeftAnimation = new TWEEN.Tween();\n    this.tweenUpAnimation = new TWEEN.Tween();\n\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n    this.renderer.setClearColor(0x000000, 1);\n    this.renderer.sortObjects = false;\n\n    this.renderer.domElement.classList.add('panolens-canvas');\n    this.renderer.domElement.style.display = 'block';\n    this.container.style.backgroundColor = '#000';\n    this.container.appendChild(this.renderer.domElement);\n\n    this.OrbitControls = new __WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"](this.camera, this.container);\n    this.OrbitControls.name = 'orbit';\n    this.OrbitControls.minDistance = 1;\n    this.OrbitControls.noPan = true;\n    this.DeviceOrientationControls = new __WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"](this.camera, this.container);\n    this.DeviceOrientationControls.name = 'device-orientation';\n    this.DeviceOrientationControls.enabled = false;\n    this.camera.position.z = 1;\n\n    if (this.options.passiveRendering) {\n      console.warn('passiveRendering is now deprecated');\n    }\n\n    this.controls = [this.OrbitControls, this.DeviceOrientationControls];\n    this.control = this.OrbitControls;\n\n    this.CardboardEffect = new __WEBPACK_IMPORTED_MODULE_8_three__[\"CardboardEffect\"](this.renderer);\n    this.CardboardEffect.setSize(this.container.clientWidth, this.container.clientHeight);\n\n    this.StereoEffect = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoEffect\"](this.renderer);\n    this.StereoEffect.setSize(this.container.clientWidth, this.container.clientHeight);\n\n    this.effect = this.CardboardEffect;\n\n    this.addReticle();\n\n    if (this.options.horizontalView) {\n      this.OrbitControls.minPolarAngle = Math.PI / 2;\n      this.OrbitControls.maxPolarAngle = Math.PI / 2;\n    }\n\n    if (this.options.controlBar !== false) {\n      this.addDefaultControlBar(this.options.controlButtons);\n    }\n\n    if (this.options.viewIndicator) {\n      this.addViewIndicator();\n    }\n\n    if (this.options.reverseDragging) {\n      this.reverseDraggingDirection();\n    }\n\n    if (this.options.enableReticle) {\n      this.enableReticleControl();\n    } else {\n      this.registerMouseAndTouchEvents();\n    }\n\n    if (this.options.output === 'overlay') {\n      this.addOutputElement();\n    }\n\n    this.registerEventListeners();\n\n    this.animate.call(this);\n  };\n\n  PANOLENS.Viewer.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n\n  PANOLENS.Viewer.prototype.constructor = PANOLENS.Viewer;\n\n  PANOLENS.Viewer.prototype.add = function (object) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    this.scene.add(object);\n\n    if (object.addEventListener) {\n      object.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n    }\n\n    if (object instanceof PANOLENS.Panorama && object.dispatchEvent) {\n      object.dispatchEvent({ type: 'panolens-container', container: this.container });\n    }\n\n    if (object.type === 'panorama') {\n      this.addPanoramaEventListener(object);\n\n      if (!this.panorama) {\n        this.setPanorama(object);\n      }\n    }\n  };\n\n  PANOLENS.Viewer.prototype.remove = function (object) {\n    if (object.removeEventListener) {\n      object.removeEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n    }\n\n    this.scene.remove(object);\n  };\n\n  PANOLENS.Viewer.prototype.addDefaultControlBar = function (array) {\n    var scope = this;\n\n    if (this.widget) {\n      console.warn('Default control bar exists');\n      return;\n    }\n\n    this.widget = new PANOLENS.Widget(this.container);\n    this.widget.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n    this.widget.addControlBar();\n    array.forEach(function (buttonName) {\n      scope.widget.addControlButton(buttonName);\n    });\n  };\n\n  PANOLENS.Viewer.prototype.setPanorama = function (pano) {\n    var scope = this,\n        leavingPanorama = this.panorama;\n\n    if (pano.type === 'panorama' && leavingPanorama !== pano) {\n      this.hideInfospot();\n\n      var afterEnterComplete = function afterEnterComplete() {\n        leavingPanorama && leavingPanorama.onLeave();\n        pano.removeEventListener('enter-fade-start', afterEnterComplete);\n      };\n\n      pano.addEventListener('enter-fade-start', afterEnterComplete);\n\n      (this.panorama = pano).onEnter();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.eventHandler = function (event) {\n    if (event.method && this[event.method]) {\n      this[event.method](event.data);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.dispatchEventToChildren = function (event) {\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent(event);\n      }\n    });\n  };\n\n  PANOLENS.Viewer.prototype.activateWidgetItem = function (controlIndex, mode) {\n    var mainMenu = this.widget.mainMenu;\n    var ControlMenuItem = mainMenu.children[0];\n    var ModeMenuItem = mainMenu.children[1];\n\n    var item;\n\n    if (controlIndex !== undefined) {\n      switch (controlIndex) {\n        case 0:\n\n          item = ControlMenuItem.subMenu.children[1];\n\n          break;\n\n        case 1:\n\n          item = ControlMenuItem.subMenu.children[2];\n\n          break;\n\n        default:\n\n          item = ControlMenuItem.subMenu.children[1];\n\n          break;\n      }\n\n      ControlMenuItem.subMenu.setActiveItem(item);\n      ControlMenuItem.setSelectionTitle(item.textContent);\n    }\n\n    if (mode !== undefined) {\n      switch (mode) {\n        case PANOLENS.Modes.CARDBOARD:\n\n          item = ModeMenuItem.subMenu.children[2];\n\n          break;\n\n        case PANOLENS.Modes.STEREO:\n\n          item = ModeMenuItem.subMenu.children[3];\n\n          break;\n\n        default:\n\n          item = ModeMenuItem.subMenu.children[1];\n\n          break;\n      }\n\n      ModeMenuItem.subMenu.setActiveItem(item);\n      ModeMenuItem.setSelectionTitle(item.textContent);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.enableEffect = function (mode) {\n    if (this.mode === mode) {\n      return;\n    }\n    if (mode === PANOLENS.Modes.NORMAL) {\n      this.disableEffect();return;\n    } else {\n      this.mode = mode;\n    }\n\n    var fov = this.camera.fov;\n\n    switch (mode) {\n      case PANOLENS.Modes.CARDBOARD:\n\n        this.effect = this.CardboardEffect;\n        this.enableReticleControl();\n\n        break;\n\n      case PANOLENS.Modes.STEREO:\n\n        this.effect = this.StereoEffect;\n        this.enableReticleControl();\n\n        break;\n\n      default:\n\n        this.effect = null;\n        this.disableReticleControl();\n\n        break;\n    }\n\n    this.activateWidgetItem(undefined, this.mode);\n\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode });\n\n    this.camera.fov = fov + 10e-3;\n    this.effect.setSize(this.container.clientWidth, this.container.clientHeight);\n    this.render();\n    this.camera.fov = fov;\n  };\n\n  PANOLENS.Viewer.prototype.disableEffect = function () {\n    if (this.mode === PANOLENS.Modes.NORMAL) {\n      return;\n    }\n\n    this.mode = PANOLENS.Modes.NORMAL;\n    this.disableReticleControl();\n\n    this.activateWidgetItem(undefined, this.mode);\n\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode });\n\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n    this.render();\n  };\n\n  PANOLENS.Viewer.prototype.enableReticleControl = function () {\n    if (this.reticle.visible) {\n      return;\n    }\n    if (!this.reticle.textureLoaded) {\n      this.reticle.loadTextures();\n    }\n\n    this.tempEnableReticle = true;\n\n    this.unregisterMouseAndTouchEvents();\n    this.reticle.show();\n    this.registerReticleEvent();\n    this.updateReticleEvent();\n  };\n\n  PANOLENS.Viewer.prototype.disableReticleControl = function () {\n    this.tempEnableReticle = false;\n\n    if (!this.options.enableReticle) {\n      this.reticle.hide();\n      this.unregisterReticleEvent();\n      this.registerMouseAndTouchEvents();\n    } else {\n      this.updateReticleEvent();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.toggleVideoPlay = function (pause) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      this.panorama.dispatchEvent({ type: 'video-toggle', pause: pause });\n    }\n  };\n\n  PANOLENS.Viewer.prototype.setVideoCurrentTime = function (percentage) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      this.panorama.dispatchEvent({ type: 'video-time', percentage: percentage });\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onVideoUpdate = function (percentage) {\n    this.widget && this.widget.dispatchEvent({ type: 'video-update', percentage: percentage });\n  };\n\n  PANOLENS.Viewer.prototype.addUpdateCallback = function (fn) {\n    if (fn) {\n      this.updateCallbacks.push(fn);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.removeUpdateCallback = function (fn) {\n    var index = this.updateCallbacks.indexOf(fn);\n\n    if (fn && index >= 0) {\n      this.updateCallbacks.splice(index, 1);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.showVideoWidget = function () {\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-show' });\n  };\n\n  PANOLENS.Viewer.prototype.hideVideoWidget = function () {\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-hide' });\n  };\n\n  PANOLENS.Viewer.prototype.updateVideoPlayButton = function (paused) {\n    if (this.widget && this.widget.videoElement && this.widget.videoElement.controlButton) {\n      this.widget.videoElement.controlButton.update(paused);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.addPanoramaEventListener = function (pano) {\n    var scope = this;\n\n    pano.addEventListener('enter-fade-start', this.setCameraControl.bind(this));\n\n    if (pano instanceof PANOLENS.VideoPanorama) {\n      pano.addEventListener('enter-fade-start', this.showVideoWidget.bind(this));\n      pano.addEventListener('leave', function () {\n        if (!(this.panorama instanceof PANOLENS.VideoPanorama)) {\n          this.hideVideoWidget.call(this);\n        }\n      }.bind(this));\n    }\n  };\n\n  PANOLENS.Viewer.prototype.setCameraControl = function () {\n    this.OrbitControls.target.copy(this.panorama.position);\n  };\n\n  PANOLENS.Viewer.prototype.getControl = function () {\n    return this.control;\n  }, PANOLENS.Viewer.prototype.getScene = function () {\n    return this.scene;\n  };\n\n  PANOLENS.Viewer.prototype.getCamera = function () {\n    return this.camera;\n  }, PANOLENS.Viewer.prototype.getRenderer = function () {\n    return this.renderer;\n  };\n\n  PANOLENS.Viewer.prototype.getContainer = function () {\n    return this.container;\n  };\n\n  PANOLENS.Viewer.prototype.getControlName = function () {\n    return this.control.name;\n  };\n\n  PANOLENS.Viewer.prototype.getNextControlName = function () {\n    return this.controls[this.getNextControlIndex()].name;\n  };\n\n  PANOLENS.Viewer.prototype.getNextControlIndex = function () {\n    var controls, control, nextIndex;\n\n    controls = this.controls;\n    control = this.control;\n    nextIndex = controls.indexOf(control) + 1;\n\n    return nextIndex >= controls.length ? 0 : nextIndex;\n  };\n\n  PANOLENS.Viewer.prototype.setCameraFov = function (fov) {\n    this.camera.fov = fov;\n    this.camera.updateProjectionMatrix();\n  };\n\n  PANOLENS.Viewer.prototype.enableControl = function (index) {\n    index = index >= 0 && index < this.controls.length ? index : 0;\n\n    this.control.enabled = false;\n\n    this.control = this.controls[index];\n\n    this.control.enabled = true;\n\n    switch (index) {\n      case PANOLENS.Controls.ORBIT:\n\n        this.camera.position.copy(this.panorama.position);\n        this.camera.position.z += 1;\n\n        break;\n\n      case PANOLENS.Controls.DEVICEORIENTATION:\n\n        this.camera.position.copy(this.panorama.position);\n\n        break;\n\n      default:\n\n        break;\n    }\n\n    this.control.update();\n\n    this.activateWidgetItem(index, undefined);\n  };\n\n  PANOLENS.Viewer.prototype.disableControl = function () {\n    this.control.enabled = false;\n  };\n\n  PANOLENS.Viewer.prototype.toggleNextControl = function () {\n    this.enableControl(this.getNextControlIndex());\n  };\n\n  PANOLENS.Viewer.prototype.getScreenVector = function (worldVector) {\n    var vector = worldVector.clone();\n    var widthHalf = this.container.clientWidth / 2;\n    var heightHalf = this.container.clientHeight / 2;\n\n    vector.project(this.camera);\n\n    vector.x = vector.x * widthHalf + widthHalf;\n    vector.y = -(vector.y * heightHalf) + heightHalf;\n    vector.z = 0;\n\n    return vector;\n  };\n\n  PANOLENS.Viewer.prototype.checkSpriteInViewport = function (sprite) {\n    this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld);\n    this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse);\n    this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix);\n\n    return sprite.visible && this.cameraFrustum.intersectsSprite(sprite);\n  };\n\n  PANOLENS.Viewer.prototype.reverseDraggingDirection = function () {\n    this.OrbitControls.rotateSpeed *= -1;\n    this.OrbitControls.momentumScalingFactor *= -1;\n  };\n\n  PANOLENS.Viewer.prototype.addReticle = function () {\n    this.reticle = new PANOLENS.Reticle(0xffffff, this.options.autoReticleSelect, PANOLENS.DataImage.ReticleIdle, PANOLENS.DataImage.ReticleDwell, this.options.dwellTime, 45);\n    this.reticle.position.z = -10;\n    this.camera.add(this.reticle);\n    this.scene.add(this.camera);\n  };\n\n  PANOLENS.Viewer.prototype.tweenControlCenter = function (vector, duration, easing) {\n    if (this.control !== this.OrbitControls) {\n      return;\n    }\n\n    if (vector instanceof Array) {\n      duration = vector[1];\n      easing = vector[2];\n      vector = vector[0];\n    }\n\n    duration = duration !== undefined ? duration : 1000;\n    easing = easing || TWEEN.Easing.Exponential.Out;\n\n    var scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv;\n\n    scope = this;\n\n    chv = this.camera.getWorldDirection();\n    cvv = chv.clone();\n\n    vptc = this.panorama.getWorldPosition().sub(this.camera.getWorldPosition());\n\n    hv = vector.clone();\n\n    hv.x *= -1;\n    hv.add(vptc).normalize();\n    vv = hv.clone();\n\n    chv.y = 0;\n    hv.y = 0;\n\n    ha = Math.atan2(hv.z, hv.x) - Math.atan2(chv.z, chv.x);\n    ha = ha > Math.PI ? ha - 2 * Math.PI : ha;\n    ha = ha < -Math.PI ? ha + 2 * Math.PI : ha;\n    va = Math.abs(cvv.angleTo(chv) + (cvv.y * vv.y <= 0 ? vv.angleTo(hv) : -vv.angleTo(hv)));\n    va *= vv.y < cvv.y ? 1 : -1;\n\n    ov = { left: 0, up: 0 };\n    nv = { left: 0, up: 0 };\n\n    this.tweenLeftAnimation.stop();\n    this.tweenUpAnimation.stop();\n\n    this.tweenLeftAnimation = new TWEEN.Tween(ov).to({ left: ha }, duration).easing(easing).onUpdate(function () {\n      scope.control.rotateLeft(this.left - nv.left);\n      nv.left = this.left;\n    }).start();\n\n    this.tweenUpAnimation = new TWEEN.Tween(ov).to({ up: va }, duration).easing(easing).onUpdate(function () {\n      scope.control.rotateUp(this.up - nv.up);\n      nv.up = this.up;\n    }).start();\n  };\n\n  PANOLENS.Viewer.prototype.tweenControlCenterByObject = function (object, duration, easing) {\n    var isUnderScalePlaceHolder = false;\n\n    object.traverseAncestors(function (ancestor) {\n      if (ancestor.scalePlaceHolder) {\n        isUnderScalePlaceHolder = true;\n      }\n    });\n\n    if (isUnderScalePlaceHolder) {\n      var invertXVector = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](-1, 1, 1);\n\n      this.tweenControlCenter(object.getWorldPosition().multiply(invertXVector), duration, easing);\n    } else {\n      this.tweenControlCenter(object.getWorldPosition(), duration, easing);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onWindowResize = function (windowWidth, windowHeight) {\n    var width, height, expand;\n\n    expand = this.container.classList.contains('panolens-container') || this.container.isFullscreen;\n\n    if (windowWidth !== undefined && windowHeight !== undefined) {\n      width = windowWidth;\n      height = windowHeight;\n      this.container._width = windowWidth;\n      this.container._height = windowHeight;\n    } else {\n      width = expand ? Math.max(document.documentElement.clientWidth, window.innerWidth || 0) : this.container.clientWidth;\n      height = expand ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : this.container.clientHeight;\n      this.container._width = width;\n      this.container._height = height;\n    }\n\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n\n    this.renderer.setSize(width, height);\n\n    if (this.options.enableReticle || this.tempEnableReticle) {\n      this.updateReticleEvent();\n    }\n\n    this.dispatchEvent({ type: 'window-resize', width: width, height: height });\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent({ type: 'window-resize', width: width, height: height });\n      }\n    });\n  };\n\n  PANOLENS.Viewer.prototype.addOutputElement = function () {\n    var element = document.createElement('div');\n    element.style.position = 'absolute';\n    element.style.right = '10px';\n    element.style.top = '10px';\n    element.style.color = '#fff';\n    this.container.appendChild(element);\n    this.outputDivElement = element;\n  };\n\n  PANOLENS.Viewer.prototype.outputInfospotPosition = function () {\n    var intersects, point, panoramaWorldPosition, outputPosition;\n\n    intersects = this.raycaster.intersectObject(this.panorama, true);\n\n    if (intersects.length > 0) {\n      point = intersects[0].point;\n      panoramaWorldPosition = this.panorama.getWorldPosition();\n\n      outputPosition = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](-(point.x - panoramaWorldPosition.x).toFixed(2), (point.y - panoramaWorldPosition.y).toFixed(2), (point.z - panoramaWorldPosition.z).toFixed(2));\n\n      switch (this.options.output) {\n        case 'console':\n          console.info(outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z);\n          break;\n\n        case 'overlay':\n          this.outputDivElement.textContent = outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z;\n          break;\n\n        default:\n          break;\n      }\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onMouseDown = function (event) {\n    event.preventDefault();\n\n    this.userMouse.x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n    this.userMouse.y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n    this.userMouse.type = 'mousedown';\n    this.onTap(event);\n  };\n\n  PANOLENS.Viewer.prototype.onMouseMove = function (event) {\n    event.preventDefault();\n    this.userMouse.type = 'mousemove';\n    this.onTap(event);\n  };\n\n  PANOLENS.Viewer.prototype.onMouseUp = function (event) {\n    var onTarget = false,\n        type;\n\n    this.userMouse.type = 'mouseup';\n\n    type = this.userMouse.x >= event.clientX - this.options.clickTolerance && this.userMouse.x <= event.clientX + this.options.clickTolerance && this.userMouse.y >= event.clientY - this.options.clickTolerance && this.userMouse.y <= event.clientY + this.options.clickTolerance || event.changedTouches && this.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance && this.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance && this.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance && this.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance ? 'click' : undefined;\n\n    if (event && event.target && !event.target.classList.contains('panolens-canvas')) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (event.changedTouches && event.changedTouches.length === 1) {\n      onTarget = this.onTap({ clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY }, type);\n    } else {\n      onTarget = this.onTap(event, type);\n    }\n\n    this.userMouse.type = 'none';\n\n    if (onTarget) {\n      return;\n    }\n\n    if (type === 'click') {\n      this.options.autoHideInfospot && this.panorama && this.panorama.toggleInfospotVisibility();\n      this.options.autoHideControlBar && this.toggleControlBar();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onTap = function (event, type) {\n    var intersects, intersect_entity, intersect;\n\n    this.raycasterPoint.x = (event.clientX - this.container.offsetLeft) / this.container.clientWidth * 2 - 1;\n    this.raycasterPoint.y = -((event.clientY - this.container.offsetTop) / this.container.clientHeight) * 2 + 1;\n\n    this.raycaster.setFromCamera(this.raycasterPoint, this.camera);\n\n    if (!this.panorama) {\n      return;\n    }\n\n    if (event.type !== 'mousedown' && PANOLENS.Utils.checkTouchSupported() || this.OUTPUT_INFOSPOT) {\n      this.outputInfospotPosition();\n    }\n\n    intersects = this.raycaster.intersectObjects(this.panorama.children, true);\n\n    intersect_entity = this.getConvertedIntersect(intersects);\n\n    intersect = intersects.length > 0 ? intersects[0].object : intersect;\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event });\n      }\n\n      this.pressEntityObject = undefined;\n    }\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect && this.pressObject === intersect && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event });\n      }\n\n      this.pressObject = undefined;\n    }\n\n    if (type === 'click') {\n      this.panorama.dispatchEvent({ type: 'click', intersects: intersects, mouseEvent: event });\n\n      if (intersect_entity && intersect_entity.dispatchEvent) {\n        intersect_entity.dispatchEvent({ type: 'click-entity', mouseEvent: event });\n      }\n\n      if (intersect && intersect.dispatchEvent) {\n        intersect.dispatchEvent({ type: 'click', mouseEvent: event });\n      }\n    } else {\n      this.panorama.dispatchEvent({ type: 'hover', intersects: intersects, mouseEvent: event });\n\n      if (this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity || this.hoverObject && intersects.length === 0) {\n        if (this.hoverObject.dispatchEvent) {\n          this.hoverObject.dispatchEvent({ type: 'hoverleave', mouseEvent: event });\n\n          this.reticle.cancelDwelling();\n        }\n\n        this.hoverObject = undefined;\n      }\n\n      if (intersect_entity && intersects.length > 0) {\n        if (this.hoverObject !== intersect_entity) {\n          this.hoverObject = intersect_entity;\n\n          if (this.hoverObject.dispatchEvent) {\n            this.hoverObject.dispatchEvent({ type: 'hoverenter', mouseEvent: event });\n\n            if (this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle) {\n              this.reticle.startDwelling(this.onTap.bind(this, event, 'click'));\n            }\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity) {\n          this.pressEntityObject = intersect_entity;\n\n          if (this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressstart-entity', mouseEvent: event });\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressObject != intersect) {\n          this.pressObject = intersect;\n\n          if (this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressstart', mouseEvent: event });\n          }\n        }\n\n        if (this.userMouse.type === 'mousemove' || this.options.enableReticle) {\n          if (intersect && intersect.dispatchEvent) {\n            intersect.dispatchEvent({ type: 'hover', mouseEvent: event });\n          }\n\n          if (this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressmove-entity', mouseEvent: event });\n          }\n\n          if (this.pressObject && this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressmove', mouseEvent: event });\n          }\n        }\n      }\n\n      if (!intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event });\n\n        this.pressEntityObject = undefined;\n      }\n\n      if (!intersect && this.pressObject && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event });\n\n        this.pressObject = undefined;\n      }\n    }\n\n    if (intersect && intersect instanceof PANOLENS.Infospot) {\n      this.infospot = intersect;\n\n      if (type === 'click') {\n        return true;\n      }\n    } else if (this.infospot) {\n      this.hideInfospot();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.getConvertedIntersect = function (intersects) {\n    var intersect;\n\n    for (var i = 0; i < intersects.length; i++) {\n      if (intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough) {\n        if (intersects[i].object.entity && intersects[i].object.entity.passThrough) {\n          continue;\n        } else if (intersects[i].object.entity && !intersects[i].object.entity.passThrough) {\n          intersect = intersects[i].object.entity;\n          break;\n        } else {\n          intersect = intersects[i].object;\n          break;\n        }\n      }\n    }\n\n    return intersect;\n  };\n\n  PANOLENS.Viewer.prototype.hideInfospot = function (intersects) {\n    if (this.infospot) {\n      this.infospot.onHoverEnd();\n\n      this.infospot = undefined;\n    }\n  };\n\n  PANOLENS.Viewer.prototype.toggleControlBar = function () {\n    this.widget && this.widget.dispatchEvent({ type: 'control-bar-toggle' });\n  };\n\n  PANOLENS.Viewer.prototype.onKeyDown = function (event) {\n    if (this.options.output && this.options.output !== 'none' && event.key === 'Control') {\n      this.OUTPUT_INFOSPOT = true;\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onKeyUp = function (event) {\n    this.OUTPUT_INFOSPOT = false;\n  };\n\n  PANOLENS.Viewer.prototype.update = function () {\n    TWEEN.update();\n\n    this.updateCallbacks.forEach(function (callback) {\n      callback();\n    });\n\n    this.control.update();\n\n    this.scene.traverse(function (child) {\n      if (child instanceof PANOLENS.Infospot && child.element && (this.hoverObject === child || child.element.style.display !== 'none' || child.element.left && child.element.left.style.display !== 'none' || child.element.right && child.element.right.style.display !== 'none')) {\n        if (this.checkSpriteInViewport(child)) {\n          var vector = this.getScreenVector(child.getWorldPosition());\n          child.translateElement(vector.x, vector.y);\n        } else {\n          child.onDismiss();\n        }\n      }\n    }.bind(this));\n  };\n\n  PANOLENS.Viewer.prototype.render = function () {\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      this.effect.render(this.scene, this.camera);\n    } else {\n      this.renderer.render(this.scene, this.camera);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.animate = function () {\n    this.requestAnimationId = window.requestAnimationFrame(this.animate.bind(this));\n\n    this.onChange();\n  };\n\n  PANOLENS.Viewer.prototype.onChange = function () {\n    this.update();\n    this.render();\n  };\n\n  PANOLENS.Viewer.prototype.registerMouseAndTouchEvents = function () {\n    this.container.addEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false);\n    this.container.addEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false);\n    this.container.addEventListener('mouseup', this.HANDLER_MOUSE_UP, false);\n    this.container.addEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false);\n    this.container.addEventListener('touchend', this.HANDLER_MOUSE_UP, false);\n  };\n\n  PANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents = function () {\n    this.container.removeEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false);\n    this.container.removeEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false);\n    this.container.removeEventListener('mouseup', this.HANDLER_MOUSE_UP, false);\n    this.container.removeEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false);\n    this.container.removeEventListener('touchend', this.HANDLER_MOUSE_UP, false);\n  };\n\n  PANOLENS.Viewer.prototype.registerReticleEvent = function () {\n    this.addUpdateCallback(this.HANDLER_TAP);\n  };\n\n  PANOLENS.Viewer.prototype.unregisterReticleEvent = function () {\n    this.removeUpdateCallback(this.HANDLER_TAP);\n  };\n\n  PANOLENS.Viewer.prototype.updateReticleEvent = function () {\n    var centerX, centerY;\n\n    centerX = this.container.clientWidth / 2 + this.container.offsetLeft;\n    centerY = this.container.clientHeight / 2;\n\n    this.removeUpdateCallback(this.HANDLER_TAP);\n    this.HANDLER_TAP = this.onTap.bind(this, { clientX: centerX, clientY: centerY });\n    this.addUpdateCallback(this.HANDLER_TAP);\n  };\n\n  PANOLENS.Viewer.prototype.registerEventListeners = function () {\n    window.addEventListener('resize', this.HANDLER_WINDOW_RESIZE, true);\n\n    window.addEventListener('keydown', this.HANDLER_KEY_DOWN, true);\n    window.addEventListener('keyup', this.HANDLER_KEY_UP, true);\n  };\n\n  PANOLENS.Viewer.prototype.unregisterEventListeners = function () {\n    window.removeEventListener('resize', this.HANDLER_WINDOW_RESIZE, true);\n\n    window.removeEventListener('keydown', this.HANDLER_KEY_DOWN, true);\n    window.removeEventListener('keyup', this.HANDLER_KEY_UP, true);\n  };\n\n  PANOLENS.Viewer.prototype.dispose = function () {\n    this.unregisterEventListeners();\n\n    function recursiveDispose(object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i]);\n        object.remove(object.children[i]);\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose();\n      }\n\n      object.geometry && object.geometry.dispose();\n      object.material && object.material.dispose();\n    }\n\n    recursiveDispose(this.scene);\n\n    if (this.widget) {\n      this.widget.dispose();\n      this.widget = null;\n    }\n\n    if (__WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"] && __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].enabled) {\n      __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].clear();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.destory = function () {\n    this.dispose();\n    this.render();\n    window.cancelAnimationFrame(this.requestAnimationId);\n  };\n\n  PANOLENS.Viewer.prototype.onPanoramaDispose = function (panorama) {\n    if (panorama instanceof PANOLENS.VideoPanorama) {\n      this.hideVideoWidget();\n    }\n\n    if (panorama === this.panorama) {\n      this.panorama = null;\n    }\n  };\n\n  PANOLENS.Viewer.prototype.loadAsyncRequest = function (url, callback) {\n    var request = new XMLHttpRequest();\n    request.onloadend = function (event) {\n      callback && callback(event);\n    };\n    request.open('GET', url, true);\n    request.send(null);\n  };\n\n  PANOLENS.Viewer.prototype.addViewIndicator = function () {\n    var scope = this;\n\n    function loadViewIndicator(asyncEvent) {\n      if (asyncEvent.loaded === 0) return;\n\n      var viewIndicatorDiv = asyncEvent.target.responseXML.documentElement;\n      viewIndicatorDiv.style.width = scope.viewIndicatorSize + 'px';\n      viewIndicatorDiv.style.height = scope.viewIndicatorSize + 'px';\n      viewIndicatorDiv.style.position = 'absolute';\n      viewIndicatorDiv.style.top = '10px';\n      viewIndicatorDiv.style.left = '10px';\n      viewIndicatorDiv.style.opacity = '0.5';\n      viewIndicatorDiv.style.cursor = 'pointer';\n      viewIndicatorDiv.id = 'panolens-view-indicator-container';\n\n      scope.container.appendChild(viewIndicatorDiv);\n\n      var indicator = viewIndicatorDiv.querySelector('#indicator');\n      var setIndicatorD = function setIndicatorD() {\n        scope.radius = scope.viewIndicatorSize * 0.225;\n        scope.currentPanoAngle = scope.camera.rotation.y - __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(90);\n        scope.fovAngle = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.camera.fov);\n        scope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2;\n        scope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2;\n        scope.leftX = scope.radius * Math.cos(scope.leftAngle);\n        scope.leftY = scope.radius * Math.sin(scope.leftAngle);\n        scope.rightX = scope.radius * Math.cos(scope.rightAngle);\n        scope.rightY = scope.radius * Math.sin(scope.rightAngle);\n        scope.indicatorD = 'M ' + scope.leftX + ' ' + scope.leftY + ' A ' + scope.radius + ' ' + scope.radius + ' 0 0 1 ' + scope.rightX + ' ' + scope.rightY;\n\n        if (scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius) {\n          indicator.setAttribute('d', scope.indicatorD);\n        }\n      };\n\n      scope.addUpdateCallback(setIndicatorD);\n\n      var indicatorOnMouseEnter = function indicatorOnMouseEnter() {\n        this.style.opacity = '1';\n      };\n\n      var indicatorOnMouseLeave = function indicatorOnMouseLeave() {\n        this.style.opacity = '0.5';\n      };\n\n      viewIndicatorDiv.addEventListener('mouseenter', indicatorOnMouseEnter);\n      viewIndicatorDiv.addEventListener('mouseleave', indicatorOnMouseLeave);\n    }\n\n    this.loadAsyncRequest(PANOLENS.DataImage.ViewIndicator, loadViewIndicator);\n  };\n\n  PANOLENS.Viewer.prototype.appendControlItem = function (option) {\n    var item = this.widget.createCustomItem(option);\n\n    if (option.group === 'video') {\n      this.widget.videoElement.appendChild(item);\n    } else {\n      this.widget.barElement.appendChild(item);\n    }\n\n    return item;\n  };\n})();(function e(t, n, r) {\n  function s(o, u) {\n    if (!n[o]) {\n      if (!t[o]) {\n        var a = typeof require === 'function' && require;if (!u && a) return require(o, !0);if (i) return i(o, !0);var f = new Error(\"Cannot find module '\" + o + \"'\");throw f.code = 'MODULE_NOT_FOUND', f;\n      }var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {\n        var n = t[o][1][e];return s(n || e);\n      }, l, l.exports, e, t, n, r);\n    }return n[o].exports;\n  }var i = typeof require === 'function' && require;for (var o = 0; o < r.length; o++) {\n    s(r[o]);\n  }return s;\n})({ 1: [function (require, module, exports) {\n    var createLayout = require('layout-bmfont-text');\n    var inherits = require('inherits');\n    var createIndices = require('quad-indices');\n    var buffer = require('three-buffer-vertex-data');\n    var assign = require('object-assign');\n\n    var vertices = require('./lib/vertices');\n    var utils = require('./lib/utils');\n\n    var Base = __WEBPACK_IMPORTED_MODULE_8_three__[\"BufferGeometry\"];\n\n    module.exports = function createTextGeometry(opt) {\n      return new TextGeometry(opt);\n    };\n\n    function TextGeometry(opt) {\n      Base.call(this);\n\n      if (typeof opt === 'string') {\n        opt = { text: opt };\n      }\n\n      this._opt = assign({}, opt);\n\n      if (opt) this.update(opt);\n    }\n\n    inherits(TextGeometry, Base);\n\n    TextGeometry.prototype.update = function (opt) {\n      if (typeof opt === 'string') {\n        opt = { text: opt };\n      }\n\n      opt = assign({}, this._opt, opt);\n\n      if (!opt.font) {\n        throw new TypeError('must specify a { font } in options');\n      }\n\n      this.layout = createLayout(opt);\n\n      var flipY = opt.flipY !== false;\n\n      var font = opt.font;\n\n      var texWidth = font.common.scaleW;\n      var texHeight = font.common.scaleH;\n\n      var glyphs = this.layout.glyphs.filter(function (glyph) {\n        var bitmap = glyph.data;\n        return bitmap.width * bitmap.height > 0;\n      });\n\n      this.visibleGlyphs = glyphs;\n\n      var positions = vertices.positions(glyphs);\n      var uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY);\n      var indices = createIndices({\n        clockwise: true,\n        type: 'uint16',\n        count: glyphs.length\n      });\n\n      buffer.index(this, indices, 1, 'uint16');\n      buffer.attr(this, 'position', positions, 2);\n      buffer.attr(this, 'uv', uvs, 2);\n\n      if (!opt.multipage && 'page' in this.attributes) {\n        this.removeAttribute('page');\n      } else if (opt.multipage) {\n        var pages = vertices.pages(glyphs);\n\n        buffer.attr(this, 'page', pages, 1);\n      }\n    };\n\n    TextGeometry.prototype.computeBoundingSphere = function () {\n      if (this.boundingSphere === null) {\n        this.boundingSphere = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Sphere\"]();\n      }\n\n      var positions = this.attributes.position.array;\n      var itemSize = this.attributes.position.itemSize;\n      if (!positions || !itemSize || positions.length < 2) {\n        this.boundingSphere.radius = 0;\n        this.boundingSphere.center.set(0, 0, 0);\n        return;\n      }\n      utils.computeSphere(positions, this.boundingSphere);\n      if (isNaN(this.boundingSphere.radius)) {\n        console.error('THREE.BufferGeometry.computeBoundingSphere(): ' + 'Computed radius is NaN. The ' + '\"position\" attribute is likely to have NaN values.');\n      }\n    };\n\n    TextGeometry.prototype.computeBoundingBox = function () {\n      if (this.boundingBox === null) {\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Box3\"]();\n      }\n\n      var bbox = this.boundingBox;\n      var positions = this.attributes.position.array;\n      var itemSize = this.attributes.position.itemSize;\n      if (!positions || !itemSize || positions.length < 2) {\n        bbox.makeEmpty();\n        return;\n      }\n      utils.computeBox(positions, bbox);\n    };\n  }, { './lib/utils': 2, './lib/vertices': 3, 'inherits': 4, 'layout-bmfont-text': 5, 'object-assign': 26, 'quad-indices': 27, 'three-buffer-vertex-data': 31 }],\n  2: [function (require, module, exports) {\n    var itemSize = 2;\n    var box = { min: [0, 0], max: [0, 0] };\n\n    function bounds(positions) {\n      var count = positions.length / itemSize;\n      box.min[0] = positions[0];\n      box.min[1] = positions[1];\n      box.max[0] = positions[0];\n      box.max[1] = positions[1];\n\n      for (var i = 0; i < count; i++) {\n        var x = positions[i * itemSize + 0];\n        var y = positions[i * itemSize + 1];\n        box.min[0] = Math.min(x, box.min[0]);\n        box.min[1] = Math.min(y, box.min[1]);\n        box.max[0] = Math.max(x, box.max[0]);\n        box.max[1] = Math.max(y, box.max[1]);\n      }\n    }\n\n    module.exports.computeBox = function (positions, output) {\n      bounds(positions);\n      output.min.set(box.min[0], box.min[1], 0);\n      output.max.set(box.max[0], box.max[1], 0);\n    };\n\n    module.exports.computeSphere = function (positions, output) {\n      bounds(positions);\n      var minX = box.min[0];\n      var minY = box.min[1];\n      var maxX = box.max[0];\n      var maxY = box.max[1];\n      var width = maxX - minX;\n      var height = maxY - minY;\n      var length = Math.sqrt(width * width + height * height);\n      output.center.set(minX + width / 2, minY + height / 2, 0);\n      output.radius = length / 2;\n    };\n  }, {}],\n  3: [function (require, module, exports) {\n    module.exports.pages = function pages(glyphs) {\n      var pages = new Float32Array(glyphs.length * 4 * 1);\n      var i = 0;\n      glyphs.forEach(function (glyph) {\n        var id = glyph.data.page || 0;\n        pages[i++] = id;\n        pages[i++] = id;\n        pages[i++] = id;\n        pages[i++] = id;\n      });\n      return pages;\n    };\n\n    module.exports.uvs = function uvs(glyphs, texWidth, texHeight, flipY) {\n      var uvs = new Float32Array(glyphs.length * 4 * 2);\n      var i = 0;\n      glyphs.forEach(function (glyph) {\n        var bitmap = glyph.data;\n        var bw = bitmap.x + bitmap.width;\n        var bh = bitmap.y + bitmap.height;\n\n        var u0 = bitmap.x / texWidth;\n        var v1 = bitmap.y / texHeight;\n        var u1 = bw / texWidth;\n        var v0 = bh / texHeight;\n\n        if (flipY) {\n          v1 = (texHeight - bitmap.y) / texHeight;\n          v0 = (texHeight - bh) / texHeight;\n        }\n\n        uvs[i++] = u0;\n        uvs[i++] = v1;\n\n        uvs[i++] = u0;\n        uvs[i++] = v0;\n\n        uvs[i++] = u1;\n        uvs[i++] = v0;\n\n        uvs[i++] = u1;\n        uvs[i++] = v1;\n      });\n      return uvs;\n    };\n\n    module.exports.positions = function positions(glyphs) {\n      var positions = new Float32Array(glyphs.length * 4 * 2);\n      var i = 0;\n      glyphs.forEach(function (glyph) {\n        var bitmap = glyph.data;\n\n        var x = glyph.position[0] + bitmap.xoffset;\n        var y = glyph.position[1] + bitmap.yoffset;\n\n        var w = bitmap.width;\n        var h = bitmap.height;\n\n        positions[i++] = x;\n        positions[i++] = y;\n\n        positions[i++] = x;\n        positions[i++] = y + h;\n\n        positions[i++] = x + w;\n        positions[i++] = y + h;\n\n        positions[i++] = x + w;\n        positions[i++] = y;\n      });\n      return positions;\n    };\n  }, {}],\n  4: [function (require, module, exports) {\n    if (typeof __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default.a === 'function') {\n      module.exports = function inherits(ctor, superCtor) {\n        ctor.super_ = superCtor;\n        ctor.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(superCtor.prototype, {\n          constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n          }\n        });\n      };\n    } else {\n      module.exports = function inherits(ctor, superCtor) {\n        ctor.super_ = superCtor;\n        var TempCtor = function TempCtor() {};\n        TempCtor.prototype = superCtor.prototype;\n        ctor.prototype = new TempCtor();\n        ctor.prototype.constructor = ctor;\n      };\n    }\n  }, {}],\n  5: [function (require, module, exports) {\n    var wordWrap = require('word-wrapper');\n    var xtend = require('xtend');\n    var findChar = require('indexof-property')('id');\n    var number = require('as-number');\n\n    var X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z'];\n    var M_WIDTHS = ['m', 'w'];\n    var CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\n\n    var TAB_ID = '\\t'.charCodeAt(0);\n    var SPACE_ID = ' '.charCodeAt(0);\n    var ALIGN_LEFT = 0,\n        ALIGN_CENTER = 1,\n        ALIGN_RIGHT = 2;\n\n    module.exports = function createLayout(opt) {\n      return new TextLayout(opt);\n    };\n\n    function TextLayout(opt) {\n      this.glyphs = [];\n      this._measure = this.computeMetrics.bind(this);\n      this.update(opt);\n    }\n\n    TextLayout.prototype.update = function (opt) {\n      opt = xtend({\n        measure: this._measure\n      }, opt);\n      this._opt = opt;\n      this._opt.tabSize = number(this._opt.tabSize, 4);\n\n      if (!opt.font) {\n        throw new Error('must provide a valid bitmap font');\n      }\n\n      var glyphs = this.glyphs;\n      var text = opt.text || '';\n      var font = opt.font;\n      this._setupSpaceGlyphs(font);\n\n      var lines = wordWrap.lines(text, opt);\n      var minWidth = opt.width || 0;\n\n      glyphs.length = 0;\n\n      var maxLineWidth = lines.reduce(function (prev, line) {\n        return Math.max(prev, line.width, minWidth);\n      }, 0);\n\n      var x = 0;\n      var y = 0;\n      var lineHeight = number(opt.lineHeight, font.common.lineHeight);\n      var baseline = font.common.base;\n      var descender = lineHeight - baseline;\n      var letterSpacing = opt.letterSpacing || 0;\n      var height = lineHeight * lines.length - descender;\n      var align = getAlignType(this._opt.align);\n\n      y -= height;\n\n      this._width = maxLineWidth;\n      this._height = height;\n      this._descender = lineHeight - baseline;\n      this._baseline = baseline;\n      this._xHeight = getXHeight(font);\n      this._capHeight = getCapHeight(font);\n      this._lineHeight = lineHeight;\n      this._ascender = lineHeight - descender - this._xHeight;\n\n      var self = this;\n      lines.forEach(function (line, lineIndex) {\n        var start = line.start;\n        var end = line.end;\n        var lineWidth = line.width;\n        var lastGlyph;\n\n        for (var i = start; i < end; i++) {\n          var id = text.charCodeAt(i);\n          var glyph = self.getGlyph(font, id);\n          if (glyph) {\n            if (lastGlyph) {\n              x += getKerning(font, lastGlyph.id, glyph.id);\n            }\n\n            var tx = x;\n            if (align === ALIGN_CENTER) {\n              tx += (maxLineWidth - lineWidth) / 2;\n            } else if (align === ALIGN_RIGHT) {\n              tx += maxLineWidth - lineWidth;\n            }\n\n            glyphs.push({\n              position: [tx, y],\n              data: glyph,\n              index: i,\n              line: lineIndex\n            });\n\n            x += glyph.xadvance + letterSpacing;\n            lastGlyph = glyph;\n          }\n        }\n\n        y += lineHeight;\n        x = 0;\n      });\n      this._linesTotal = lines.length;\n    };\n\n    TextLayout.prototype._setupSpaceGlyphs = function (font) {\n      this._fallbackSpaceGlyph = null;\n      this._fallbackTabGlyph = null;\n\n      if (!font.chars || font.chars.length === 0) {\n        return;\n      }\n\n      var space = getGlyphById(font, SPACE_ID) || getMGlyph(font) || font.chars[0];\n\n      var tabWidth = this._opt.tabSize * space.xadvance;\n      this._fallbackSpaceGlyph = space;\n      this._fallbackTabGlyph = xtend(space, {\n        x: 0,\n        y: 0,\n        xadvance: tabWidth,\n        id: TAB_ID,\n        xoffset: 0,\n        yoffset: 0,\n        width: 0,\n        height: 0\n      });\n    };\n\n    TextLayout.prototype.getGlyph = function (font, id) {\n      var glyph = getGlyphById(font, id);\n      if (glyph) {\n        return glyph;\n      } else if (id === TAB_ID) {\n        return this._fallbackTabGlyph;\n      } else if (id === SPACE_ID) {\n        return this._fallbackSpaceGlyph;\n      }\n      return null;\n    };\n\n    TextLayout.prototype.computeMetrics = function (text, start, end, width) {\n      var letterSpacing = this._opt.letterSpacing || 0;\n      var font = this._opt.font;\n      var curPen = 0;\n      var curWidth = 0;\n      var count = 0;\n      var glyph;\n      var lastGlyph;\n\n      if (!font.chars || font.chars.length === 0) {\n        return {\n          start: start,\n          end: start,\n          width: 0\n        };\n      }\n\n      end = Math.min(text.length, end);\n      for (var i = start; i < end; i++) {\n        var id = text.charCodeAt(i);\n        var glyph = this.getGlyph(font, id);\n\n        if (glyph) {\n          var xoff = glyph.xoffset;\n          var kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0;\n          curPen += kern;\n\n          var nextPen = curPen + glyph.xadvance + letterSpacing;\n          var nextWidth = curPen + glyph.width;\n\n          if (nextWidth >= width || nextPen >= width) {\n            break;\n          }\n\n          curPen = nextPen;\n          curWidth = nextWidth;\n          lastGlyph = glyph;\n        }\n        count++;\n      }\n\n      if (lastGlyph) {\n        curWidth += lastGlyph.xoffset;\n      }\n\n      return {\n        start: start,\n        end: start + count,\n        width: curWidth\n      };\n    };['width', 'height', 'descender', 'ascender', 'xHeight', 'baseline', 'capHeight', 'lineHeight'].forEach(addGetter);\n\n    function addGetter(name) {\n      __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default()(TextLayout.prototype, name, {\n        get: wrapper(name),\n        configurable: true\n      });\n    }\n\n    function wrapper(name) {\n      return new Function(['return function ' + name + '() {', '  return this._' + name, '}'].join('\\n'))();\n    }\n\n    function getGlyphById(font, id) {\n      if (!font.chars || font.chars.length === 0) {\n        return null;\n      }\n\n      var glyphIdx = findChar(font.chars, id);\n      if (glyphIdx >= 0) {\n        return font.chars[glyphIdx];\n      }\n      return null;\n    }\n\n    function getXHeight(font) {\n      for (var i = 0; i < X_HEIGHTS.length; i++) {\n        var id = X_HEIGHTS[i].charCodeAt(0);\n        var idx = findChar(font.chars, id);\n        if (idx >= 0) {\n          return font.chars[idx].height;\n        }\n      }\n      return 0;\n    }\n\n    function getMGlyph(font) {\n      for (var i = 0; i < M_WIDTHS.length; i++) {\n        var id = M_WIDTHS[i].charCodeAt(0);\n        var idx = findChar(font.chars, id);\n        if (idx >= 0) {\n          return font.chars[idx];\n        }\n      }\n      return 0;\n    }\n\n    function getCapHeight(font) {\n      for (var i = 0; i < CAP_HEIGHTS.length; i++) {\n        var id = CAP_HEIGHTS[i].charCodeAt(0);\n        var idx = findChar(font.chars, id);\n        if (idx >= 0) {\n          return font.chars[idx].height;\n        }\n      }\n      return 0;\n    }\n\n    function getKerning(font, left, right) {\n      if (!font.kernings || font.kernings.length === 0) {\n        return 0;\n      }\n\n      var table = font.kernings;\n      for (var i = 0; i < table.length; i++) {\n        var kern = table[i];\n        if (kern.first === left && kern.second === right) {\n          return kern.amount;\n        }\n      }\n      return 0;\n    }\n\n    function getAlignType(align) {\n      if (align === 'center') {\n        return ALIGN_CENTER;\n      } else if (align === 'right') {\n        return ALIGN_RIGHT;\n      }\n      return ALIGN_LEFT;\n    }\n  }, { 'as-number': 6, 'indexof-property': 7, 'word-wrapper': 8, 'xtend': 9 }],\n  6: [function (require, module, exports) {\n    module.exports = function numtype(num, def) {\n      return typeof num === 'number' ? num : typeof def === 'number' ? def : 0;\n    };\n  }, {}],\n  7: [function (require, module, exports) {\n    module.exports = function compile(property) {\n      if (!property || typeof property !== 'string') {\n        throw new Error('must specify property for indexof search');\n      }\n\n      return new Function('array', 'value', 'start', ['start = start || 0', 'for (var i=start; i<array.length; i++)', '  if (array[i][\"' + property + '\"] === value)', '      return i', 'return -1'].join('\\n'));\n    };\n  }, {}],\n  8: [function (require, module, exports) {\n    var newline = /\\n/;\n    var newlineChar = '\\n';\n    var whitespace = /\\s/;\n\n    module.exports = function (text, opt) {\n      var lines = module.exports.lines(text, opt);\n      return lines.map(function (line) {\n        return text.substring(line.start, line.end);\n      }).join('\\n');\n    };\n\n    module.exports.lines = function wordwrap(text, opt) {\n      opt = opt || {};\n\n      if (opt.width === 0 && opt.mode !== 'nowrap') {\n        return [];\n      }\n\n      text = text || '';\n      var width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE;\n      var start = Math.max(0, opt.start || 0);\n      var end = typeof opt.end === 'number' ? opt.end : text.length;\n      var mode = opt.mode;\n\n      var measure = opt.measure || monospace;\n      if (mode === 'pre') {\n        return pre(measure, text, start, end, width);\n      } else {\n        return greedy(measure, text, start, end, width, mode);\n      }\n    };\n\n    function idxOf(text, chr, start, end) {\n      var idx = text.indexOf(chr, start);\n      if (idx === -1 || idx > end) {\n        return end;\n      }\n      return idx;\n    }\n\n    function isWhitespace(chr) {\n      return whitespace.test(chr);\n    }\n\n    function pre(measure, text, start, end, width) {\n      var lines = [];\n      var lineStart = start;\n      for (var i = start; i < end && i < text.length; i++) {\n        var chr = text.charAt(i);\n        var isNewline = newline.test(chr);\n\n        if (isNewline || i === end - 1) {\n          var lineEnd = isNewline ? i : i + 1;\n          var measured = measure(text, lineStart, lineEnd, width);\n          lines.push(measured);\n\n          lineStart = i + 1;\n        }\n      }\n      return lines;\n    }\n\n    function greedy(measure, text, start, end, width, mode) {\n      var lines = [];\n\n      var testWidth = width;\n\n      if (mode === 'nowrap') {\n        testWidth = Number.MAX_VALUE;\n      }\n\n      while (start < end && start < text.length) {\n        var newLine = idxOf(text, newlineChar, start, end);\n\n        while (start < newLine) {\n          if (!isWhitespace(text.charAt(start))) {\n            break;\n          }\n          start++;\n        }\n\n        var measured = measure(text, start, newLine, testWidth);\n\n        var lineEnd = start + (measured.end - measured.start);\n        var nextStart = lineEnd + newlineChar.length;\n\n        if (lineEnd < newLine) {\n          while (lineEnd > start) {\n            if (isWhitespace(text.charAt(lineEnd))) {\n              break;\n            }\n            lineEnd--;\n          }\n          if (lineEnd === start) {\n            if (nextStart > start + newlineChar.length) nextStart--;\n            lineEnd = nextStart;\n          } else {\n            nextStart = lineEnd;\n\n            while (lineEnd > start) {\n              if (!isWhitespace(text.charAt(lineEnd - newlineChar.length))) {\n                break;\n              }\n              lineEnd--;\n            }\n          }\n        }\n        if (lineEnd >= start) {\n          var result = measure(text, start, lineEnd, testWidth);\n          lines.push(result);\n        }\n        start = nextStart;\n      }\n      return lines;\n    }\n\n    function monospace(text, start, end, width) {\n      var glyphs = Math.min(width, end - start);\n      return {\n        start: start,\n        end: start + glyphs\n      };\n    }\n  }, {}],\n  9: [function (require, module, exports) {\n    module.exports = extend;\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    function extend() {\n      var target = {};\n\n      for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    }\n  }, {}],\n  10: [function (require, module, exports) {\n    (function (Buffer) {\n      var xhr = require('xhr');\n      var noop = function noop() {};\n      var parseASCII = require('parse-bmfont-ascii');\n      var parseXML = require('parse-bmfont-xml');\n      var readBinary = require('parse-bmfont-binary');\n      var isBinaryFormat = require('./lib/is-binary');\n      var xtend = require('xtend');\n\n      var xml2 = function hasXML2() {\n        return window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest();\n      }();\n\n      module.exports = function (opt, cb) {\n        cb = typeof cb === 'function' ? cb : noop;\n\n        if (typeof opt === 'string') {\n          opt = { uri: opt };\n        } else if (!opt) {\n          opt = {};\n        }\n\n        var expectBinary = opt.binary;\n        if (expectBinary) {\n          opt = getBinaryOpts(opt);\n        }\n\n        xhr(opt, function (err, res, body) {\n          if (err) {\n            return cb(err);\n          }\n          if (!/^2/.test(res.statusCode)) {\n            return cb(new Error('http status code: ' + res.statusCode));\n          }\n          if (!body) {\n            return cb(new Error('no body result'));\n          }\n\n          var binary = false;\n\n          if (isArrayBuffer(body)) {\n            var array = new Uint8Array(body);\n            body = new Buffer(array, 'binary');\n          }\n\n          if (isBinaryFormat(body)) {\n            binary = true;\n\n            if (typeof body === 'string') {\n              body = new Buffer(body, 'binary');\n            }\n          }\n\n          if (!binary) {\n            if (Buffer.isBuffer(body)) {\n              body = body.toString(opt.encoding);\n            }\n            body = body.trim();\n          }\n\n          var result;\n          try {\n            var type = res.headers['content-type'];\n            if (binary) {\n              result = readBinary(body);\n            } else if (/json/.test(type) || body.charAt(0) === '{') {\n              result = JSON.parse(body);\n            } else if (/xml/.test(type) || body.charAt(0) === '<') {\n              result = parseXML(body);\n            } else {\n              result = parseASCII(body);\n            }\n          } catch (e) {\n            cb(new Error('error parsing font ' + e.message));\n            cb = noop;\n          }\n          cb(null, result);\n        });\n      };\n\n      function isArrayBuffer(arr) {\n        var str = Object.prototype.toString;\n        return str.call(arr) === '[object ArrayBuffer]';\n      }\n\n      function getBinaryOpts(opt) {\n        if (xml2) {\n          return xtend(opt, { responseType: 'arraybuffer' });\n        }\n\n        if (typeof window.XMLHttpRequest === 'undefined') {\n          throw new Error('your browser does not support XHR loading');\n        }\n\n        var req = new window.XMLHttpRequest();\n        req.overrideMimeType('text/plain; charset=x-user-defined');\n        return xtend({\n          xhr: req\n        }, opt);\n      }\n    }).call(this, require('buffer').Buffer);\n  }, { './lib/is-binary': 11, 'buffer': 37, 'parse-bmfont-ascii': 13, 'parse-bmfont-binary': 14, 'parse-bmfont-xml': 15, 'xhr': 18, 'xtend': 25 }],\n  11: [function (require, module, exports) {\n    (function (Buffer) {\n      var equal = require('buffer-equal');\n      var HEADER = new Buffer([66, 77, 70, 3]);\n\n      module.exports = function (buf) {\n        if (typeof buf === 'string') {\n          return buf.substring(0, 3) === 'BMF';\n        }\n        return buf.length > 4 && equal(buf.slice(0, 4), HEADER);\n      };\n    }).call(this, require('buffer').Buffer);\n  }, { 'buffer': 37, 'buffer-equal': 12 }],\n  12: [function (require, module, exports) {\n    var Buffer = require('buffer').Buffer;\n\n    module.exports = function (a, b) {\n      if (!Buffer.isBuffer(a)) return undefined;\n      if (!Buffer.isBuffer(b)) return undefined;\n      if (typeof a.equals === 'function') return a.equals(b);\n      if (a.length !== b.length) return false;\n\n      for (var i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) return false;\n      }\n\n      return true;\n    };\n  }, { 'buffer': 37 }],\n  13: [function (require, module, exports) {\n    module.exports = function parseBMFontAscii(data) {\n      if (!data) {\n        throw new Error('no data provided');\n      }\n      data = data.toString().trim();\n\n      var output = {\n        pages: [],\n        chars: [],\n        kernings: []\n      };\n\n      var lines = data.split(/\\r\\n?|\\n/g);\n\n      if (lines.length === 0) {\n        throw new Error('no data in BMFont file');\n      }\n\n      for (var i = 0; i < lines.length; i++) {\n        var lineData = splitLine(lines[i], i);\n        if (!lineData) {\n            continue;\n          }\n\n        if (lineData.key === 'page') {\n          if (typeof lineData.data.id !== 'number') {\n            throw new Error('malformed file at line ' + i + ' -- needs page id=N');\n          }\n          if (typeof lineData.data.file !== 'string') {\n            throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"');\n          }\n          output.pages[lineData.data.id] = lineData.data.file;\n        } else if (lineData.key === 'chars' || lineData.key === 'kernings') {} else if (lineData.key === 'char') {\n          output.chars.push(lineData.data);\n        } else if (lineData.key === 'kerning') {\n          output.kernings.push(lineData.data);\n        } else {\n          output[lineData.key] = lineData.data;\n        }\n      }\n\n      return output;\n    };\n\n    function splitLine(line, idx) {\n      line = line.replace(/\\t+/g, ' ').trim();\n      if (!line) {\n        return null;\n      }\n\n      var space = line.indexOf(' ');\n      if (space === -1) {\n        throw new Error('no named row at line ' + idx);\n      }\n\n      var key = line.substring(0, space);\n\n      line = line.substring(space + 1);\n\n      line = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '');\n      line = line.split('=');\n      line = line.map(function (str) {\n        return str.trim().match(/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g);\n      });\n\n      var data = [];\n      for (var i = 0; i < line.length; i++) {\n        var dt = line[i];\n        if (i === 0) {\n          data.push({\n            key: dt[0],\n            data: ''\n          });\n        } else if (i === line.length - 1) {\n          data[data.length - 1].data = parseData(dt[0]);\n        } else {\n          data[data.length - 1].data = parseData(dt[0]);\n          data.push({\n            key: dt[1],\n            data: ''\n          });\n        }\n      }\n\n      var out = {\n        key: key,\n        data: {}\n      };\n\n      data.forEach(function (v) {\n        out.data[v.key] = v.data;\n      });\n\n      return out;\n    }\n\n    function parseData(data) {\n      if (!data || data.length === 0) {\n        return '';\n      }\n\n      if (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0) {\n        return data.substring(1, data.length - 1);\n      }\n      if (data.indexOf(',') !== -1) {\n        return parseIntList(data);\n      }\n      return parseInt(data, 10);\n    }\n\n    function parseIntList(data) {\n      return data.split(',').map(function (val) {\n        return parseInt(val, 10);\n      });\n    }\n  }, {}],\n  14: [function (require, module, exports) {\n    var HEADER = [66, 77, 70];\n\n    module.exports = function readBMFontBinary(buf) {\n      if (buf.length < 6) {\n        throw new Error('invalid buffer length for BMFont');\n      }\n\n      var header = HEADER.every(function (byte, i) {\n        return buf.readUInt8(i) === byte;\n      });\n\n      if (!header) {\n        throw new Error('BMFont missing BMF byte header');\n      }\n\n      var i = 3;\n      var vers = buf.readUInt8(i++);\n      if (vers > 3) {\n        throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)');\n      }\n\n      var target = { kernings: [], chars: [] };\n      for (var b = 0; b < 5; b++) {\n        i += readBlock(target, buf, i);\n      }\n      return target;\n    };\n\n    function readBlock(target, buf, i) {\n      if (i > buf.length - 1) {\n        return 0;\n      }\n\n      var blockID = buf.readUInt8(i++);\n      var blockSize = buf.readInt32LE(i);\n      i += 4;\n\n      switch (blockID) {\n        case 1:\n          target.info = readInfo(buf, i);\n          break;\n        case 2:\n          target.common = readCommon(buf, i);\n          break;\n        case 3:\n          target.pages = readPages(buf, i, blockSize);\n          break;\n        case 4:\n          target.chars = readChars(buf, i, blockSize);\n          break;\n        case 5:\n          target.kernings = readKernings(buf, i, blockSize);\n          break;\n      }\n      return 5 + blockSize;\n    }\n\n    function readInfo(buf, i) {\n      var info = {};\n      info.size = buf.readInt16LE(i);\n\n      var bitField = buf.readUInt8(i + 2);\n      info.smooth = bitField >> 7 & 1;\n      info.unicode = bitField >> 6 & 1;\n      info.italic = bitField >> 5 & 1;\n      info.bold = bitField >> 4 & 1;\n\n      if (bitField >> 3 & 1) {\n        info.fixedHeight = 1;\n      }\n\n      info.charset = buf.readUInt8(i + 3) || '';\n      info.stretchH = buf.readUInt16LE(i + 4);\n      info.aa = buf.readUInt8(i + 6);\n      info.padding = [buf.readInt8(i + 7), buf.readInt8(i + 8), buf.readInt8(i + 9), buf.readInt8(i + 10)];\n      info.spacing = [buf.readInt8(i + 11), buf.readInt8(i + 12)];\n      info.outline = buf.readUInt8(i + 13);\n      info.face = readStringNT(buf, i + 14);\n      return info;\n    }\n\n    function readCommon(buf, i) {\n      var common = {};\n      common.lineHeight = buf.readUInt16LE(i);\n      common.base = buf.readUInt16LE(i + 2);\n      common.scaleW = buf.readUInt16LE(i + 4);\n      common.scaleH = buf.readUInt16LE(i + 6);\n      common.pages = buf.readUInt16LE(i + 8);\n      var bitField = buf.readUInt8(i + 10);\n      common.packed = 0;\n      common.alphaChnl = buf.readUInt8(i + 11);\n      common.redChnl = buf.readUInt8(i + 12);\n      common.greenChnl = buf.readUInt8(i + 13);\n      common.blueChnl = buf.readUInt8(i + 14);\n      return common;\n    }\n\n    function readPages(buf, i, size) {\n      var pages = [];\n      var text = readNameNT(buf, i);\n      var len = text.length + 1;\n      var count = size / len;\n      for (var c = 0; c < count; c++) {\n        pages[c] = buf.slice(i, i + text.length).toString('utf8');\n        i += len;\n      }\n      return pages;\n    }\n\n    function readChars(buf, i, blockSize) {\n      var chars = [];\n\n      var count = blockSize / 20;\n      for (var c = 0; c < count; c++) {\n        var char = {};\n        var off = c * 20;\n        char.id = buf.readUInt32LE(i + 0 + off);\n        char.x = buf.readUInt16LE(i + 4 + off);\n        char.y = buf.readUInt16LE(i + 6 + off);\n        char.width = buf.readUInt16LE(i + 8 + off);\n        char.height = buf.readUInt16LE(i + 10 + off);\n        char.xoffset = buf.readInt16LE(i + 12 + off);\n        char.yoffset = buf.readInt16LE(i + 14 + off);\n        char.xadvance = buf.readInt16LE(i + 16 + off);\n        char.page = buf.readUInt8(i + 18 + off);\n        char.chnl = buf.readUInt8(i + 19 + off);\n        chars[c] = char;\n      }\n      return chars;\n    }\n\n    function readKernings(buf, i, blockSize) {\n      var kernings = [];\n      var count = blockSize / 10;\n      for (var c = 0; c < count; c++) {\n        var kern = {};\n        var off = c * 10;\n        kern.first = buf.readUInt32LE(i + 0 + off);\n        kern.second = buf.readUInt32LE(i + 4 + off);\n        kern.amount = buf.readInt16LE(i + 8 + off);\n        kernings[c] = kern;\n      }\n      return kernings;\n    }\n\n    function readNameNT(buf, offset) {\n      var pos = offset;\n      for (; pos < buf.length; pos++) {\n        if (buf[pos] === 0x00) {\n          break;\n        }\n      }\n      return buf.slice(offset, pos);\n    }\n\n    function readStringNT(buf, offset) {\n      return readNameNT(buf, offset).toString('utf8');\n    }\n  }, {}],\n  15: [function (require, module, exports) {\n    var parseAttributes = require('./parse-attribs');\n    var parseFromString = require('xml-parse-from-string');\n\n    var NAME_MAP = {\n      scaleh: 'scaleH',\n      scalew: 'scaleW',\n      stretchh: 'stretchH',\n      lineheight: 'lineHeight',\n      alphachnl: 'alphaChnl',\n      redchnl: 'redChnl',\n      greenchnl: 'greenChnl',\n      bluechnl: 'blueChnl'\n    };\n\n    module.exports = function parse(data) {\n      data = data.toString();\n\n      var xmlRoot = parseFromString(data);\n      var output = {\n        pages: [],\n        chars: [],\n        kernings: []\n      };['info', 'common'].forEach(function (key) {\n        var element = xmlRoot.getElementsByTagName(key)[0];\n        if (element) {\n          output[key] = parseAttributes(getAttribs(element));\n        }\n      });\n\n      var pageRoot = xmlRoot.getElementsByTagName('pages')[0];\n      if (!pageRoot) {\n        throw new Error('malformed file -- no <pages> element');\n      }\n      var pages = pageRoot.getElementsByTagName('page');\n      for (var i = 0; i < pages.length; i++) {\n        var p = pages[i];\n        var id = parseInt(p.getAttribute('id'), 10);\n        var file = p.getAttribute('file');\n        if (isNaN(id)) {\n          throw new Error('malformed file -- page \"id\" attribute is NaN');\n        }\n        if (!file) {\n          throw new Error('malformed file -- needs page \"file\" attribute');\n        }\n        output.pages[parseInt(id, 10)] = file;\n      }\n\n      ['chars', 'kernings'].forEach(function (key) {\n        var element = xmlRoot.getElementsByTagName(key)[0];\n        if (!element) {\n          return;\n        }\n        var childTag = key.substring(0, key.length - 1);\n        var children = element.getElementsByTagName(childTag);\n        for (var i = 0; i < children.length; i++) {\n          var child = children[i];\n          output[key].push(parseAttributes(getAttribs(child)));\n        }\n      });\n      return output;\n    };\n\n    function getAttribs(element) {\n      var attribs = getAttribList(element);\n      return attribs.reduce(function (dict, attrib) {\n        var key = mapName(attrib.nodeName);\n        dict[key] = attrib.nodeValue;\n        return dict;\n      }, {});\n    }\n\n    function getAttribList(element) {\n      var attribs = [];\n      for (var i = 0; i < element.attributes.length; i++) {\n        attribs.push(element.attributes[i]);\n      }\n      return attribs;\n    }\n\n    function mapName(nodeName) {\n      return NAME_MAP[nodeName.toLowerCase()] || nodeName;\n    }\n  }, { './parse-attribs': 16, 'xml-parse-from-string': 17 }],\n  16: [function (require, module, exports) {\n    var GLYPH_DESIGNER_ERROR = 'chasrset';\n\n    module.exports = function parseAttributes(obj) {\n      if (GLYPH_DESIGNER_ERROR in obj) {\n        obj['charset'] = obj[GLYPH_DESIGNER_ERROR];\n        delete obj[GLYPH_DESIGNER_ERROR];\n      }\n\n      for (var k in obj) {\n        if (k === 'face' || k === 'charset') {\n          continue;\n        } else if (k === 'padding' || k === 'spacing') {\n          obj[k] = parseIntList(obj[k]);\n        } else {\n          obj[k] = parseInt(obj[k], 10);\n        }\n      }\n      return obj;\n    };\n\n    function parseIntList(data) {\n      return data.split(',').map(function (val) {\n        return parseInt(val, 10);\n      });\n    }\n  }, {}],\n  17: [function (require, module, exports) {\n    module.exports = function xmlparser() {\n      if (typeof window.DOMParser !== 'undefined') {\n        return function (str) {\n          var parser = new window.DOMParser();\n          return parser.parseFromString(str, 'application/xml');\n        };\n      }\n\n      if (typeof window.ActiveXObject !== 'undefined' && new window.ActiveXObject('Microsoft.XMLDOM')) {\n        return function (str) {\n          var xmlDoc = new window.ActiveXObject('Microsoft.XMLDOM');\n          xmlDoc.async = 'false';\n          xmlDoc.loadXML(str);\n          return xmlDoc;\n        };\n      }\n\n      return function (str) {\n        var div = document.createElement('div');\n        div.innerHTML = str;\n        return div;\n      };\n    }();\n  }, {}],\n  18: [function (require, module, exports) {\n    'use strict';\n\n    var window = require('global/window');\n    var once = require('once');\n    var isFunction = require('is-function');\n    var parseHeaders = require('parse-headers');\n    var xtend = require('xtend');\n\n    module.exports = createXHR;\n    createXHR.XMLHttpRequest = window.XMLHttpRequest || noop;\n    createXHR.XDomainRequest = 'withCredentials' in new createXHR.XMLHttpRequest() ? createXHR.XMLHttpRequest : window.XDomainRequest;\n\n    forEachArray(['get', 'put', 'post', 'patch', 'head', 'delete'], function (method) {\n      createXHR[method === 'delete' ? 'del' : method] = function (uri, options, callback) {\n        options = initParams(uri, options, callback);\n        options.method = method.toUpperCase();\n        return _createXHR(options);\n      };\n    });\n\n    function forEachArray(array, iterator) {\n      for (var i = 0; i < array.length; i++) {\n        iterator(array[i]);\n      }\n    }\n\n    function isEmpty(obj) {\n      for (var i in obj) {\n        if (obj.hasOwnProperty(i)) return false;\n      }\n      return true;\n    }\n\n    function initParams(uri, options, callback) {\n      var params = uri;\n\n      if (isFunction(options)) {\n        callback = options;\n        if (typeof uri === 'string') {\n          params = { uri: uri };\n        }\n      } else {\n        params = xtend(options, { uri: uri });\n      }\n\n      params.callback = callback;\n      return params;\n    }\n\n    function createXHR(uri, options, callback) {\n      options = initParams(uri, options, callback);\n      return _createXHR(options);\n    }\n\n    function _createXHR(options) {\n      var callback = options.callback;\n      if (typeof callback === 'undefined') {\n        throw new Error('callback argument missing');\n      }\n      callback = once(callback);\n\n      function readystatechange() {\n        if (xhr.readyState === 4) {\n          loadFunc();\n        }\n      }\n\n      function getBody() {\n        var body = undefined;\n\n        if (xhr.response) {\n          body = xhr.response;\n        } else if (xhr.responseType === 'text' || !xhr.responseType) {\n          body = xhr.responseText || xhr.responseXML;\n        }\n\n        if (isJson) {\n          try {\n            body = JSON.parse(body);\n          } catch (e) {}\n        }\n\n        return body;\n      }\n\n      var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n      };\n\n      function errorFunc(evt) {\n        clearTimeout(timeoutTimer);\n        if (!(evt instanceof Error)) {\n          evt = new Error('' + (evt || 'Unknown XMLHttpRequest Error'));\n        }\n        evt.statusCode = 0;\n        callback(evt, failureResponse);\n      }\n\n      function loadFunc() {\n        if (aborted) return;\n        var status;\n        clearTimeout(timeoutTimer);\n        if (options.useXDR && xhr.status === undefined) {\n          status = 200;\n        } else {\n          status = xhr.status === 1223 ? 204 : xhr.status;\n        }\n        var response = failureResponse;\n        var err = null;\n\n        if (status !== 0) {\n          response = {\n            body: getBody(),\n            statusCode: status,\n            method: method,\n            headers: {},\n            url: uri,\n            rawRequest: xhr\n          };\n          if (xhr.getAllResponseHeaders) {\n            response.headers = parseHeaders(xhr.getAllResponseHeaders());\n          }\n        } else {\n          err = new Error('Internal XMLHttpRequest Error');\n        }\n        callback(err, response, response.body);\n      }\n\n      var xhr = options.xhr || null;\n\n      if (!xhr) {\n        if (options.cors || options.useXDR) {\n          xhr = new createXHR.XDomainRequest();\n        } else {\n          xhr = new createXHR.XMLHttpRequest();\n        }\n      }\n\n      var key;\n      var aborted;\n      var uri = xhr.url = options.uri || options.url;\n      var method = xhr.method = options.method || 'GET';\n      var body = options.body || options.data || null;\n      var headers = xhr.headers = options.headers || {};\n      var sync = !!options.sync;\n      var isJson = false;\n      var timeoutTimer;\n\n      if ('json' in options) {\n        isJson = true;\n        headers['accept'] || headers['Accept'] || (headers['Accept'] = 'application/json');\n        if (method !== 'GET' && method !== 'HEAD') {\n          headers['content-type'] || headers['Content-Type'] || (headers['Content-Type'] = 'application/json');\n          body = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(options.json);\n        }\n      }\n\n      xhr.onreadystatechange = readystatechange;\n      xhr.onload = loadFunc;\n      xhr.onerror = errorFunc;\n\n      xhr.onprogress = function () {};\n      xhr.ontimeout = errorFunc;\n      xhr.open(method, uri, !sync, options.username, options.password);\n\n      if (!sync) {\n        xhr.withCredentials = !!options.withCredentials;\n      }\n\n      if (!sync && options.timeout > 0) {\n        timeoutTimer = setTimeout(function () {\n          aborted = true;\n          xhr.abort('timeout');\n          var e = new Error('XMLHttpRequest timeout');\n          e.code = 'ETIMEDOUT';\n          errorFunc(e);\n        }, options.timeout);\n      }\n\n      if (xhr.setRequestHeader) {\n        for (key in headers) {\n          if (headers.hasOwnProperty(key)) {\n            xhr.setRequestHeader(key, headers[key]);\n          }\n        }\n      } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error('Headers cannot be set on an XDomainRequest object');\n      }\n\n      if ('responseType' in options) {\n        xhr.responseType = options.responseType;\n      }\n\n      if ('beforeSend' in options && typeof options.beforeSend === 'function') {\n        options.beforeSend(xhr);\n      }\n\n      xhr.send(body);\n\n      return xhr;\n    }\n\n    function noop() {}\n  }, { 'global/window': 19, 'is-function': 20, 'once': 21, 'parse-headers': 24, 'xtend': 25 }],\n  19: [function (require, module, exports) {\n    (function (global) {\n      if (typeof window !== 'undefined') {\n        module.exports = window;\n      } else if (typeof global !== 'undefined') {\n        module.exports = global;\n      } else if (typeof self !== 'undefined') {\n        module.exports = self;\n      } else {\n        module.exports = {};\n      }\n    }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {});\n  }, {}],\n  20: [function (require, module, exports) {\n    module.exports = isFunction;\n\n    var toString = Object.prototype.toString;\n\n    function isFunction(fn) {\n      var string = toString.call(fn);\n      return string === '[object Function]' || typeof fn === 'function' && string !== '[object RegExp]' || typeof window !== 'undefined' && (fn === window.setTimeout || fn === window.alert || fn === window.confirm || fn === window.prompt);\n    }\n  }, {}],\n  21: [function (require, module, exports) {\n    module.exports = once;\n\n    once.proto = once(function () {\n      Object.defineProperty(Function.prototype, 'once', {\n        value: function value() {\n          return once(this);\n        },\n        configurable: true\n      });\n    });\n\n    function once(fn) {\n      var called = false;\n      return function () {\n        if (called) return;\n        called = true;\n        return fn.apply(this, arguments);\n      };\n    }\n  }, {}],\n  22: [function (require, module, exports) {\n    var isFunction = require('is-function');\n\n    module.exports = forEach;\n\n    var toString = Object.prototype.toString;\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    function forEach(list, iterator, context) {\n      if (!isFunction(iterator)) {\n        throw new TypeError('iterator must be a function');\n      }\n\n      if (arguments.length < 3) {\n        context = this;\n      }\n\n      if (toString.call(list) === '[object Array]') {\n        forEachArray(list, iterator, context);\n      } else if (typeof list === 'string') {\n        forEachString(list, iterator, context);\n      } else {\n        forEachObject(list, iterator, context);\n      }\n    }\n\n    function forEachArray(array, iterator, context) {\n      for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n          iterator.call(context, array[i], i, array);\n        }\n      }\n    }\n\n    function forEachString(string, iterator, context) {\n      for (var i = 0, len = string.length; i < len; i++) {\n        iterator.call(context, string.charAt(i), i, string);\n      }\n    }\n\n    function forEachObject(object, iterator, context) {\n      for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n          iterator.call(context, object[k], k, object);\n        }\n      }\n    }\n  }, { 'is-function': 20 }],\n  23: [function (require, module, exports) {\n    exports = module.exports = trim;\n\n    function trim(str) {\n      return str.replace(/^\\s*|\\s*$/g, '');\n    }\n\n    exports.left = function (str) {\n      return str.replace(/^\\s*/, '');\n    };\n\n    exports.right = function (str) {\n      return str.replace(/\\s*$/, '');\n    };\n  }, {}],\n  24: [function (require, module, exports) {\n    var trim = require('trim'),\n        forEach = require('for-each'),\n        isArray = function isArray(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n\n    module.exports = function (headers) {\n      if (!headers) {\n        return {};\n      }\n\n      var result = {};\n\n      forEach(trim(headers).split('\\n'), function (row) {\n        var index = row.indexOf(':'),\n            key = trim(row.slice(0, index)).toLowerCase(),\n            value = trim(row.slice(index + 1));\n\n        if (typeof result[key] === 'undefined') {\n          result[key] = value;\n        } else if (isArray(result[key])) {\n          result[key].push(value);\n        } else {\n          result[key] = [result[key], value];\n        }\n      });\n\n      return result;\n    };\n  }, { 'for-each': 22, 'trim': 23 }],\n  25: [function (require, module, exports) {\n    arguments[4][9][0].apply(exports, arguments);\n  }, { 'dup': 9 }],\n  26: [function (require, module, exports) {\n    'use strict';\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n    function toObject(val) {\n      if (val === null || val === undefined) {\n        throw new TypeError('Object.assign cannot be called with null or undefined');\n      }\n\n      return Object(val);\n    }\n\n    module.exports = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default.a || function (target, source) {\n      var from;\n      var to = toObject(target);\n      var symbols;\n\n      for (var s = 1; s < arguments.length; s++) {\n        from = Object(arguments[s]);\n\n        for (var key in from) {\n          if (hasOwnProperty.call(from, key)) {\n            to[key] = from[key];\n          }\n        }\n\n        if (__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default.a) {\n          symbols = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default()(from);\n          for (var i = 0; i < symbols.length; i++) {\n            if (propIsEnumerable.call(from, symbols[i])) {\n              to[symbols[i]] = from[symbols[i]];\n            }\n          }\n        }\n      }\n\n      return to;\n    };\n  }, {}],\n  27: [function (require, module, exports) {\n    var dtype = require('dtype');\n    var anArray = require('an-array');\n    var isBuffer = require('is-buffer');\n\n    var CW = [0, 2, 3];\n    var CCW = [2, 1, 3];\n\n    module.exports = function createQuadElements(array, opt) {\n      if (!array || !(anArray(array) || isBuffer(array))) {\n        opt = array || {};\n        array = null;\n      }\n\n      if (typeof opt === 'number') {\n          opt = { count: opt };\n        } else {\n        opt = opt || {};\n      }\n\n      var type = typeof opt.type === 'string' ? opt.type : 'uint16';\n      var count = typeof opt.count === 'number' ? opt.count : 1;\n      var start = opt.start || 0;\n\n      var dir = opt.clockwise !== false ? CW : CCW,\n          a = dir[0],\n          b = dir[1],\n          c = dir[2];\n\n      var numIndices = count * 6;\n\n      var indices = array || new (dtype(type))(numIndices);\n      for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n        var x = i + start;\n        indices[x + 0] = j + 0;\n        indices[x + 1] = j + 1;\n        indices[x + 2] = j + 2;\n        indices[x + 3] = j + a;\n        indices[x + 4] = j + b;\n        indices[x + 5] = j + c;\n      }\n      return indices;\n    };\n  }, { 'an-array': 28, 'dtype': 29, 'is-buffer': 30 }],\n  28: [function (require, module, exports) {\n    var str = Object.prototype.toString;\n\n    module.exports = anArray;\n\n    function anArray(arr) {\n      return arr.BYTES_PER_ELEMENT && str.call(arr.buffer) === '[object ArrayBuffer]' || Array.isArray(arr);\n    }\n  }, {}],\n  29: [function (require, module, exports) {\n    module.exports = function (dtype) {\n      switch (dtype) {\n        case 'int8':\n          return Int8Array;\n        case 'int16':\n          return Int16Array;\n        case 'int32':\n          return Int32Array;\n        case 'uint8':\n          return Uint8Array;\n        case 'uint16':\n          return Uint16Array;\n        case 'uint32':\n          return Uint32Array;\n        case 'float32':\n          return Float32Array;\n        case 'float64':\n          return Float64Array;\n        case 'array':\n          return Array;\n        case 'uint8_clamped':\n          return Uint8ClampedArray;\n      }\n    };\n  }, {}],\n  30: [function (require, module, exports) {\n\n    module.exports = function (obj) {\n      return !!(obj != null && (obj._isBuffer || obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)));\n    };\n  }, {}],\n  31: [function (require, module, exports) {\n    var flatten = require('flatten-vertex-data');\n\n    module.exports.attr = setAttribute;\n    module.exports.index = setIndex;\n\n    function setIndex(geometry, data, itemSize, dtype) {\n      if (typeof itemSize !== 'number') itemSize = 1;\n      if (typeof dtype !== 'number') dtype = 'uint16';\n\n      var isR69 = !geometry.index && typeof geometry.setIndex !== 'function';\n      var attrib = isR69 ? geometry.getAttribute('index') : geometry.index;\n      var newAttrib = updateAttribute(attrib, data, itemSize, dtype);\n      if (newAttrib) {\n        if (isR69) geometry.addAttribute('index', newAttrib);else geometry.index = newAttrib;\n      }\n    }\n\n    function setAttribute(geometry, key, data, itemSize, dtype) {\n      if (typeof itemSize !== 'number') itemSize = 3;\n      if (typeof dtype !== 'number') dtype = 'float32';\n      if (Array.isArray(data) && Array.isArray(data[0]) && data[0].length !== itemSize) {\n        throw new Error('Nested vertex array has unexpected size; expected ' + itemSize + ' but found ' + data[0].length);\n      }\n\n      var attrib = geometry.getAttribute(key);\n      var newAttrib = updateAttribute(attrib, data, itemSize, dtype);\n      if (newAttrib) {\n        geometry.addAttribute(key, newAttrib);\n      }\n    }\n\n    function updateAttribute(attrib, data, itemSize, dtype) {\n      data = data || [];\n      if (!attrib || rebuildAttribute(attrib, data, itemSize)) {\n        data = flatten(data, dtype);\n        attrib = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BufferAttribute\"](data, itemSize);\n        attrib.needsUpdate = true;\n        return attrib;\n      } else {\n        flatten(data, attrib.array);\n        attrib.needsUpdate = true;\n        return null;\n      }\n    }\n\n    function rebuildAttribute(attrib, data, itemSize) {\n      if (attrib.itemSize !== itemSize) return true;\n      if (!attrib.array) return true;\n      var attribLength = attrib.array.length;\n      if (Array.isArray(data) && Array.isArray(data[0])) {\n        return attribLength !== data.length * itemSize;\n      } else {\n        return attribLength !== data.length;\n      }\n    }\n  }, { 'flatten-vertex-data': 32 }],\n  32: [function (require, module, exports) {\n    var dtype = require('dtype');\n    module.exports = flattenVertexData;\n    function flattenVertexData(data, output, offset) {\n      if (!data) throw new TypeError('must specify data as first parameter');\n      offset = +(offset || 0) | 0;\n\n      if (Array.isArray(data) && Array.isArray(data[0])) {\n        var dim = data[0].length;\n        var length = data.length * dim;\n\n        if (!output || typeof output === 'string') {\n          output = new (dtype(output || 'float32'))(length + offset);\n        }\n\n        var dstLength = output.length - offset;\n        if (length !== dstLength) {\n          throw new Error('source length ' + length + ' (' + dim + 'x' + data.length + ')' + ' does not match destination length ' + dstLength);\n        }\n\n        for (var i = 0, k = offset; i < data.length; i++) {\n          for (var j = 0; j < dim; j++) {\n            output[k++] = data[i][j];\n          }\n        }\n      } else {\n        if (!output || typeof output === 'string') {\n          var Ctor = dtype(output || 'float32');\n          if (offset === 0) {\n            output = new Ctor(data);\n          } else {\n            output = new Ctor(data.length + offset);\n            output.set(data, offset);\n          }\n        } else {\n          output.set(data, offset);\n        }\n      }\n\n      return output;\n    }\n  }, { 'dtype': 33 }],\n  33: [function (require, module, exports) {\n    arguments[4][29][0].apply(exports, arguments);\n  }, { 'dup': 29 }],\n  34: [function (require, module, exports) {\n    var assign = require('object-assign');\n\n    module.exports = function createSDFShader(opt) {\n      opt = opt || {};\n      var opacity = typeof opt.opacity === 'number' ? opt.opacity : 1;\n      var alphaTest = typeof opt.alphaTest === 'number' ? opt.alphaTest : 0.0001;\n      var precision = opt.precision || 'highp';\n      var color = opt.color;\n      var map = opt.map;\n\n      delete opt.map;\n      delete opt.color;\n      delete opt.precision;\n      delete opt.opacity;\n\n      return assign({\n        uniforms: {\n          opacity: { type: 'f', value: opacity },\n          map: { type: 't', value: map || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]() },\n          color: { type: 'c', value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Color\"](color) }\n        },\n        vertexShader: ['attribute vec2 uv;', 'attribute vec4 position;', 'uniform mat4 projectionMatrix;', 'uniform mat4 modelViewMatrix;', 'varying vec2 vUv;', 'void main() {', 'vUv = uv;', 'gl_Position = projectionMatrix * modelViewMatrix * position;', '}'].join('\\n'),\n        fragmentShader: ['#ifdef GL_OES_standard_derivatives', '#extension GL_OES_standard_derivatives : enable', '#endif', 'precision ' + precision + ' float;', 'uniform float opacity;', 'uniform vec3 color;', 'uniform sampler2D map;', 'varying vec2 vUv;', 'float aastep(float value) {', '  #ifdef GL_OES_standard_derivatives', '    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;', '  #else', '    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));', '  #endif', '  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);', '}', 'void main() {', '  vec4 texColor = texture2D(map, vUv);', '  float alpha = aastep(texColor.a);', '  gl_FragColor = vec4(color, opacity * alpha);', alphaTest === 0 ? '' : '  if (gl_FragColor.a < ' + alphaTest + ') discard;', '}'].join('\\n')\n      }, opt);\n    };\n  }, { 'object-assign': 26 }],\n  35: [function (require, module, exports) {\n    var loadFont = require('load-bmfont');\n\n    module.exports = function (opt, cb) {\n      loadFont(opt.font, function (err, font) {\n        if (err) throw err;\n        PANOLENS.Utils.TextureLoader.load(opt.image, function (tex) {\n          cb(font, tex);\n        });\n      });\n    };\n  }, { 'load-bmfont': 10 }],\n  36: [function (require, module, exports) {\n    var createText = require('../');\n    var SDFShader = require('../shaders/sdf');\n\n    if (PANOLENS && PANOLENS.Utils && PANOLENS.SpriteText) {\n      PANOLENS.Utils.loadBMFont = function (fontObject, callback) {\n        require('./load')(fontObject, PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype, callback));\n      };\n      PANOLENS.SpriteText.prototype.generateTextGeometry = createText;\n      PANOLENS.SpriteText.prototype.generateSDFShader = SDFShader;\n    }\n  }, { '../': 1, '../shaders/sdf': 34, './load': 35 }],\n  37: [function (require, module, exports) {\n    (function (global) {\n      /*!\n      * The buffer module from node.js, for the browser.\n      *\n      * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n      * @license  MIT\n      */\n      'use strict';\n\n      var base64 = require('base64-js');\n      var ieee754 = require('ieee754');\n      var isArray = require('isarray');\n\n      exports.Buffer = Buffer;\n      exports.SlowBuffer = SlowBuffer;\n      exports.INSPECT_MAX_BYTES = 50;\n      Buffer.poolSize = 8192;\n\n      var rootParent = {};\n\n      Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n\n      function typedArraySupport() {\n        try {\n          var arr = new Uint8Array(1);\n          arr.foo = function () {\n            return 42;\n          };\n          return arr.foo() === 42 && typeof arr.subarray === 'function' && arr.subarray(1, 1).byteLength === 0;\n        } catch (e) {\n          return false;\n        }\n      }\n\n      function kMaxLength() {\n        return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n      }\n\n      function Buffer(arg) {\n        if (!(this instanceof Buffer)) {\n          if (arguments.length > 1) return new Buffer(arg, arguments[1]);\n          return new Buffer(arg);\n        }\n\n        if (!Buffer.TYPED_ARRAY_SUPPORT) {\n          this.length = 0;\n          this.parent = undefined;\n        }\n\n        if (typeof arg === 'number') {\n          return fromNumber(this, arg);\n        }\n\n        if (typeof arg === 'string') {\n          return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8');\n        }\n\n        return fromObject(this, arg);\n      }\n\n      function fromNumber(that, length) {\n        that = allocate(that, length < 0 ? 0 : checked(length) | 0);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) {\n          for (var i = 0; i < length; i++) {\n            that[i] = 0;\n          }\n        }\n        return that;\n      }\n\n      function fromString(that, string, encoding) {\n        if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8';\n\n        var length = byteLength(string, encoding) | 0;\n        that = allocate(that, length);\n\n        that.write(string, encoding);\n        return that;\n      }\n\n      function fromObject(that, object) {\n        if (Buffer.isBuffer(object)) return fromBuffer(that, object);\n\n        if (isArray(object)) return fromArray(that, object);\n\n        if (object == null) {\n          throw new TypeError('must start with number, buffer, array or string');\n        }\n\n        if (typeof ArrayBuffer !== 'undefined') {\n          if (object.buffer instanceof ArrayBuffer) {\n            return fromTypedArray(that, object);\n          }\n          if (object instanceof ArrayBuffer) {\n            return fromArrayBuffer(that, object);\n          }\n        }\n\n        if (object.length) return fromArrayLike(that, object);\n\n        return fromJsonObject(that, object);\n      }\n\n      function fromBuffer(that, buffer) {\n        var length = checked(buffer.length) | 0;\n        that = allocate(that, length);\n        buffer.copy(that, 0, 0, length);\n        return that;\n      }\n\n      function fromArray(that, array) {\n        var length = checked(array.length) | 0;\n        that = allocate(that, length);\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      function fromTypedArray(that, array) {\n        var length = checked(array.length) | 0;\n        that = allocate(that, length);\n\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      function fromArrayBuffer(that, array) {\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          that = new Uint8Array(array);\n          that.__proto__ = Buffer.prototype;\n        } else {\n          that = fromTypedArray(that, new Uint8Array(array));\n        }\n        return that;\n      }\n\n      function fromArrayLike(that, array) {\n        var length = checked(array.length) | 0;\n        that = allocate(that, length);\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      function fromJsonObject(that, object) {\n        var array;\n        var length = 0;\n\n        if (object.type === 'Buffer' && isArray(object.data)) {\n          array = object.data;\n          length = checked(array.length) | 0;\n        }\n        that = allocate(that, length);\n\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        Buffer.prototype.__proto__ = Uint8Array.prototype;\n        Buffer.__proto__ = Uint8Array;\n      } else {\n        Buffer.prototype.length = undefined;\n        Buffer.prototype.parent = undefined;\n      }\n\n      function allocate(that, length) {\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          that = new Uint8Array(length);\n          that.__proto__ = Buffer.prototype;\n        } else {\n          that.length = length;\n        }\n\n        var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1;\n        if (fromPool) that.parent = rootParent;\n\n        return that;\n      }\n\n      function checked(length) {\n        if (length >= kMaxLength()) {\n          throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n        }\n        return length | 0;\n      }\n\n      function SlowBuffer(subject, encoding) {\n        if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding);\n\n        var buf = new Buffer(subject, encoding);\n        delete buf.parent;\n        return buf;\n      }\n\n      Buffer.isBuffer = function isBuffer(b) {\n        return !!(b != null && b._isBuffer);\n      };\n\n      Buffer.compare = function compare(a, b) {\n        if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n          throw new TypeError('Arguments must be Buffers');\n        }\n\n        if (a === b) return 0;\n\n        var x = a.length;\n        var y = b.length;\n\n        var i = 0;\n        var len = Math.min(x, y);\n        while (i < len) {\n          if (a[i] !== b[i]) break;\n\n          ++i;\n        }\n\n        if (i !== len) {\n          x = a[i];\n          y = b[i];\n        }\n\n        if (x < y) return -1;\n        if (y < x) return 1;\n        return 0;\n      };\n\n      Buffer.isEncoding = function isEncoding(encoding) {\n        switch (String(encoding).toLowerCase()) {\n          case 'hex':\n          case 'utf8':\n          case 'utf-8':\n          case 'ascii':\n          case 'binary':\n          case 'base64':\n          case 'raw':\n          case 'ucs2':\n          case 'ucs-2':\n          case 'utf16le':\n          case 'utf-16le':\n            return true;\n          default:\n            return false;\n        }\n      };\n\n      Buffer.concat = function concat(list, length) {\n        if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.');\n\n        if (list.length === 0) {\n          return new Buffer(0);\n        }\n\n        var i;\n        if (length === undefined) {\n          length = 0;\n          for (i = 0; i < list.length; i++) {\n            length += list[i].length;\n          }\n        }\n\n        var buf = new Buffer(length);\n        var pos = 0;\n        for (i = 0; i < list.length; i++) {\n          var item = list[i];\n          item.copy(buf, pos);\n          pos += item.length;\n        }\n        return buf;\n      };\n\n      function byteLength(string, encoding) {\n        if (typeof string !== 'string') string = '' + string;\n\n        var len = string.length;\n        if (len === 0) return 0;\n\n        var loweredCase = false;\n        for (;;) {\n          switch (encoding) {\n            case 'ascii':\n            case 'binary':\n            case 'raw':\n            case 'raws':\n              return len;\n            case 'utf8':\n            case 'utf-8':\n              return utf8ToBytes(string).length;\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return len * 2;\n            case 'hex':\n              return len >>> 1;\n            case 'base64':\n              return base64ToBytes(string).length;\n            default:\n              if (loweredCase) return utf8ToBytes(string).length;\n              encoding = ('' + encoding).toLowerCase();\n              loweredCase = true;\n          }\n        }\n      }\n      Buffer.byteLength = byteLength;\n\n      function slowToString(encoding, start, end) {\n        var loweredCase = false;\n\n        start = start | 0;\n        end = end === undefined || end === Infinity ? this.length : end | 0;\n\n        if (!encoding) encoding = 'utf8';\n        if (start < 0) start = 0;\n        if (end > this.length) end = this.length;\n        if (end <= start) return '';\n\n        while (true) {\n          switch (encoding) {\n            case 'hex':\n              return hexSlice(this, start, end);\n\n            case 'utf8':\n            case 'utf-8':\n              return utf8Slice(this, start, end);\n\n            case 'ascii':\n              return asciiSlice(this, start, end);\n\n            case 'binary':\n              return binarySlice(this, start, end);\n\n            case 'base64':\n              return base64Slice(this, start, end);\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return utf16leSlice(this, start, end);\n\n            default:\n              if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n              encoding = (encoding + '').toLowerCase();\n              loweredCase = true;\n          }\n        }\n      }\n\n      Buffer.prototype._isBuffer = true;\n\n      Buffer.prototype.toString = function toString() {\n        var length = this.length | 0;\n        if (length === 0) return '';\n        if (arguments.length === 0) return utf8Slice(this, 0, length);\n        return slowToString.apply(this, arguments);\n      };\n\n      Buffer.prototype.equals = function equals(b) {\n        if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n        if (this === b) return true;\n        return Buffer.compare(this, b) === 0;\n      };\n\n      Buffer.prototype.inspect = function inspect() {\n        var str = '';\n        var max = exports.INSPECT_MAX_BYTES;\n        if (this.length > 0) {\n          str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n          if (this.length > max) str += ' ... ';\n        }\n        return '<Buffer ' + str + '>';\n      };\n\n      Buffer.prototype.compare = function compare(b) {\n        if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n        if (this === b) return 0;\n        return Buffer.compare(this, b);\n      };\n\n      Buffer.prototype.indexOf = function indexOf(val, byteOffset) {\n        if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff;else if (byteOffset < -0x80000000) byteOffset = -0x80000000;\n        byteOffset >>= 0;\n\n        if (this.length === 0) return -1;\n        if (byteOffset >= this.length) return -1;\n\n        if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0);\n\n        if (typeof val === 'string') {\n          if (val.length === 0) return -1;\n          return String.prototype.indexOf.call(this, val, byteOffset);\n        }\n        if (Buffer.isBuffer(val)) {\n          return arrayIndexOf(this, val, byteOffset);\n        }\n        if (typeof val === 'number') {\n          if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n            return Uint8Array.prototype.indexOf.call(this, val, byteOffset);\n          }\n          return arrayIndexOf(this, [val], byteOffset);\n        }\n\n        function arrayIndexOf(arr, val, byteOffset) {\n          var foundIndex = -1;\n          for (var i = 0; byteOffset + i < arr.length; i++) {\n            if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n              if (foundIndex === -1) foundIndex = i;\n              if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex;\n            } else {\n              foundIndex = -1;\n            }\n          }\n          return -1;\n        }\n\n        throw new TypeError('val must be string, number or Buffer');\n      };\n\n      function hexWrite(buf, string, offset, length) {\n        offset = Number(offset) || 0;\n        var remaining = buf.length - offset;\n        if (!length) {\n          length = remaining;\n        } else {\n          length = Number(length);\n          if (length > remaining) {\n            length = remaining;\n          }\n        }\n\n        var strLen = string.length;\n        if (strLen % 2 !== 0) throw new Error('Invalid hex string');\n\n        if (length > strLen / 2) {\n          length = strLen / 2;\n        }\n        for (var i = 0; i < length; i++) {\n          var parsed = parseInt(string.substr(i * 2, 2), 16);\n          if (isNaN(parsed)) throw new Error('Invalid hex string');\n          buf[offset + i] = parsed;\n        }\n        return i;\n      }\n\n      function utf8Write(buf, string, offset, length) {\n        return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n      }\n\n      function asciiWrite(buf, string, offset, length) {\n        return blitBuffer(asciiToBytes(string), buf, offset, length);\n      }\n\n      function binaryWrite(buf, string, offset, length) {\n        return asciiWrite(buf, string, offset, length);\n      }\n\n      function base64Write(buf, string, offset, length) {\n        return blitBuffer(base64ToBytes(string), buf, offset, length);\n      }\n\n      function ucs2Write(buf, string, offset, length) {\n        return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n      }\n\n      Buffer.prototype.write = function write(string, offset, length, encoding) {\n        if (offset === undefined) {\n          encoding = 'utf8';\n          length = this.length;\n          offset = 0;\n        } else if (length === undefined && typeof offset === 'string') {\n          encoding = offset;\n          length = this.length;\n          offset = 0;\n        } else if (isFinite(offset)) {\n          offset = offset | 0;\n          if (isFinite(length)) {\n            length = length | 0;\n            if (encoding === undefined) encoding = 'utf8';\n          } else {\n            encoding = length;\n            length = undefined;\n          }\n        } else {\n          var swap = encoding;\n          encoding = offset;\n          offset = length | 0;\n          length = swap;\n        }\n\n        var remaining = this.length - offset;\n        if (length === undefined || length > remaining) length = remaining;\n\n        if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n          throw new RangeError('attempt to write outside buffer bounds');\n        }\n\n        if (!encoding) encoding = 'utf8';\n\n        var loweredCase = false;\n        for (;;) {\n          switch (encoding) {\n            case 'hex':\n              return hexWrite(this, string, offset, length);\n\n            case 'utf8':\n            case 'utf-8':\n              return utf8Write(this, string, offset, length);\n\n            case 'ascii':\n              return asciiWrite(this, string, offset, length);\n\n            case 'binary':\n              return binaryWrite(this, string, offset, length);\n\n            case 'base64':\n              return base64Write(this, string, offset, length);\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return ucs2Write(this, string, offset, length);\n\n            default:\n              if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n              encoding = ('' + encoding).toLowerCase();\n              loweredCase = true;\n          }\n        }\n      };\n\n      Buffer.prototype.toJSON = function toJSON() {\n        return {\n          type: 'Buffer',\n          data: Array.prototype.slice.call(this._arr || this, 0)\n        };\n      };\n\n      function base64Slice(buf, start, end) {\n        if (start === 0 && end === buf.length) {\n          return base64.fromByteArray(buf);\n        } else {\n          return base64.fromByteArray(buf.slice(start, end));\n        }\n      }\n\n      function utf8Slice(buf, start, end) {\n        end = Math.min(buf.length, end);\n        var res = [];\n\n        var i = start;\n        while (i < end) {\n          var firstByte = buf[i];\n          var codePoint = null;\n          var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n          if (i + bytesPerSequence <= end) {\n            var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n            switch (bytesPerSequence) {\n              case 1:\n                if (firstByte < 0x80) {\n                  codePoint = firstByte;\n                }\n                break;\n              case 2:\n                secondByte = buf[i + 1];\n                if ((secondByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n                  if (tempCodePoint > 0x7F) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n                break;\n              case 3:\n                secondByte = buf[i + 1];\n                thirdByte = buf[i + 2];\n                if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n                  if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n                break;\n              case 4:\n                secondByte = buf[i + 1];\n                thirdByte = buf[i + 2];\n                fourthByte = buf[i + 3];\n                if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n                  if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n            }\n          }\n\n          if (codePoint === null) {\n            codePoint = 0xFFFD;\n            bytesPerSequence = 1;\n          } else if (codePoint > 0xFFFF) {\n            codePoint -= 0x10000;\n            res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n            codePoint = 0xDC00 | codePoint & 0x3FF;\n          }\n\n          res.push(codePoint);\n          i += bytesPerSequence;\n        }\n\n        return decodeCodePointsArray(res);\n      }\n\n      var MAX_ARGUMENTS_LENGTH = 0x1000;\n\n      function decodeCodePointsArray(codePoints) {\n        var len = codePoints.length;\n        if (len <= MAX_ARGUMENTS_LENGTH) {\n          return String.fromCharCode.apply(String, codePoints);\n        }\n\n        var res = '';\n        var i = 0;\n        while (i < len) {\n          res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n        }\n        return res;\n      }\n\n      function asciiSlice(buf, start, end) {\n        var ret = '';\n        end = Math.min(buf.length, end);\n\n        for (var i = start; i < end; i++) {\n          ret += String.fromCharCode(buf[i] & 0x7F);\n        }\n        return ret;\n      }\n\n      function binarySlice(buf, start, end) {\n        var ret = '';\n        end = Math.min(buf.length, end);\n\n        for (var i = start; i < end; i++) {\n          ret += String.fromCharCode(buf[i]);\n        }\n        return ret;\n      }\n\n      function hexSlice(buf, start, end) {\n        var len = buf.length;\n\n        if (!start || start < 0) start = 0;\n        if (!end || end < 0 || end > len) end = len;\n\n        var out = '';\n        for (var i = start; i < end; i++) {\n          out += toHex(buf[i]);\n        }\n        return out;\n      }\n\n      function utf16leSlice(buf, start, end) {\n        var bytes = buf.slice(start, end);\n        var res = '';\n        for (var i = 0; i < bytes.length; i += 2) {\n          res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n        }\n        return res;\n      }\n\n      Buffer.prototype.slice = function slice(start, end) {\n        var len = this.length;\n        start = ~~start;\n        end = end === undefined ? len : ~~end;\n\n        if (start < 0) {\n          start += len;\n          if (start < 0) start = 0;\n        } else if (start > len) {\n          start = len;\n        }\n\n        if (end < 0) {\n          end += len;\n          if (end < 0) end = 0;\n        } else if (end > len) {\n          end = len;\n        }\n\n        if (end < start) end = start;\n\n        var newBuf;\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          newBuf = this.subarray(start, end);\n          newBuf.__proto__ = Buffer.prototype;\n        } else {\n          var sliceLen = end - start;\n          newBuf = new Buffer(sliceLen, undefined);\n          for (var i = 0; i < sliceLen; i++) {\n            newBuf[i] = this[i + start];\n          }\n        }\n\n        if (newBuf.length) newBuf.parent = this.parent || this;\n\n        return newBuf;\n      };\n\n      function checkOffset(offset, ext, length) {\n        if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n        if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n      }\n\n      Buffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n        var val = this[offset];\n        var mul = 1;\n        var i = 0;\n        while (++i < byteLength && (mul *= 0x100)) {\n          val += this[offset + i] * mul;\n        }\n\n        return val;\n      };\n\n      Buffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) {\n          checkOffset(offset, byteLength, this.length);\n        }\n\n        var val = this[offset + --byteLength];\n        var mul = 1;\n        while (byteLength > 0 && (mul *= 0x100)) {\n          val += this[offset + --byteLength] * mul;\n        }\n\n        return val;\n      };\n\n      Buffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 1, this.length);\n        return this[offset];\n      };\n\n      Buffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        return this[offset] | this[offset + 1] << 8;\n      };\n\n      Buffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        return this[offset] << 8 | this[offset + 1];\n      };\n\n      Buffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n      };\n\n      Buffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n      };\n\n      Buffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n        var val = this[offset];\n        var mul = 1;\n        var i = 0;\n        while (++i < byteLength && (mul *= 0x100)) {\n          val += this[offset + i] * mul;\n        }\n        mul *= 0x80;\n\n        if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n        return val;\n      };\n\n      Buffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n        var i = byteLength;\n        var mul = 1;\n        var val = this[offset + --i];\n        while (i > 0 && (mul *= 0x100)) {\n          val += this[offset + --i] * mul;\n        }\n        mul *= 0x80;\n\n        if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n        return val;\n      };\n\n      Buffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 1, this.length);\n        if (!(this[offset] & 0x80)) return this[offset];\n        return (0xff - this[offset] + 1) * -1;\n      };\n\n      Buffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        var val = this[offset] | this[offset + 1] << 8;\n        return val & 0x8000 ? val | 0xFFFF0000 : val;\n      };\n\n      Buffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        var val = this[offset + 1] | this[offset] << 8;\n        return val & 0x8000 ? val | 0xFFFF0000 : val;\n      };\n\n      Buffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n      };\n\n      Buffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n      };\n\n      Buffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return ieee754.read(this, offset, true, 23, 4);\n      };\n\n      Buffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return ieee754.read(this, offset, false, 23, 4);\n      };\n\n      Buffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 8, this.length);\n        return ieee754.read(this, offset, true, 52, 8);\n      };\n\n      Buffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 8, this.length);\n        return ieee754.read(this, offset, false, 52, 8);\n      };\n\n      function checkInt(buf, value, offset, ext, max, min) {\n        if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance');\n        if (value > max || value < min) throw new RangeError('value is out of bounds');\n        if (offset + ext > buf.length) throw new RangeError('index out of range');\n      }\n\n      Buffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0);\n\n        var mul = 1;\n        var i = 0;\n        this[offset] = value & 0xFF;\n        while (++i < byteLength && (mul *= 0x100)) {\n          this[offset + i] = value / mul & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0);\n\n        var i = byteLength - 1;\n        var mul = 1;\n        this[offset + i] = value & 0xFF;\n        while (--i >= 0 && (mul *= 0x100)) {\n          this[offset + i] = value / mul & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n        this[offset] = value & 0xff;\n        return offset + 1;\n      };\n\n      function objectWriteUInt16(buf, value, offset, littleEndian) {\n        if (value < 0) value = 0xffff + value + 1;\n        for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n          buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n        }\n      }\n\n      Buffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n        } else {\n          objectWriteUInt16(this, value, offset, true);\n        }\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 8;\n          this[offset + 1] = value & 0xff;\n        } else {\n          objectWriteUInt16(this, value, offset, false);\n        }\n        return offset + 2;\n      };\n\n      function objectWriteUInt32(buf, value, offset, littleEndian) {\n        if (value < 0) value = 0xffffffff + value + 1;\n        for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n          buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n        }\n      }\n\n      Buffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset + 3] = value >>> 24;\n          this[offset + 2] = value >>> 16;\n          this[offset + 1] = value >>> 8;\n          this[offset] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, true);\n        }\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 24;\n          this[offset + 1] = value >>> 16;\n          this[offset + 2] = value >>> 8;\n          this[offset + 3] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, false);\n        }\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) {\n          var limit = Math.pow(2, 8 * byteLength - 1);\n\n          checkInt(this, value, offset, byteLength, limit - 1, -limit);\n        }\n\n        var i = 0;\n        var mul = 1;\n        var sub = value < 0 ? 1 : 0;\n        this[offset] = value & 0xFF;\n        while (++i < byteLength && (mul *= 0x100)) {\n          this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) {\n          var limit = Math.pow(2, 8 * byteLength - 1);\n\n          checkInt(this, value, offset, byteLength, limit - 1, -limit);\n        }\n\n        var i = byteLength - 1;\n        var mul = 1;\n        var sub = value < 0 ? 1 : 0;\n        this[offset + i] = value & 0xFF;\n        while (--i >= 0 && (mul *= 0x100)) {\n          this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n        if (value < 0) value = 0xff + value + 1;\n        this[offset] = value & 0xff;\n        return offset + 1;\n      };\n\n      Buffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n        } else {\n          objectWriteUInt16(this, value, offset, true);\n        }\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 8;\n          this[offset + 1] = value & 0xff;\n        } else {\n          objectWriteUInt16(this, value, offset, false);\n        }\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n          this[offset + 2] = value >>> 16;\n          this[offset + 3] = value >>> 24;\n        } else {\n          objectWriteUInt32(this, value, offset, true);\n        }\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n        if (value < 0) value = 0xffffffff + value + 1;\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 24;\n          this[offset + 1] = value >>> 16;\n          this[offset + 2] = value >>> 8;\n          this[offset + 3] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, false);\n        }\n        return offset + 4;\n      };\n\n      function checkIEEE754(buf, value, offset, ext, max, min) {\n        if (value > max || value < min) throw new RangeError('value is out of bounds');\n        if (offset + ext > buf.length) throw new RangeError('index out of range');\n        if (offset < 0) throw new RangeError('index out of range');\n      }\n\n      function writeFloat(buf, value, offset, littleEndian, noAssert) {\n        if (!noAssert) {\n          checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n        }\n        ieee754.write(buf, value, offset, littleEndian, 23, 4);\n        return offset + 4;\n      }\n\n      Buffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n        return writeFloat(this, value, offset, true, noAssert);\n      };\n\n      Buffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n        return writeFloat(this, value, offset, false, noAssert);\n      };\n\n      function writeDouble(buf, value, offset, littleEndian, noAssert) {\n        if (!noAssert) {\n          checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n        }\n        ieee754.write(buf, value, offset, littleEndian, 52, 8);\n        return offset + 8;\n      }\n\n      Buffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n        return writeDouble(this, value, offset, true, noAssert);\n      };\n\n      Buffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n        return writeDouble(this, value, offset, false, noAssert);\n      };\n\n      Buffer.prototype.copy = function copy(target, targetStart, start, end) {\n        if (!start) start = 0;\n        if (!end && end !== 0) end = this.length;\n        if (targetStart >= target.length) targetStart = target.length;\n        if (!targetStart) targetStart = 0;\n        if (end > 0 && end < start) end = start;\n\n        if (end === start) return 0;\n        if (target.length === 0 || this.length === 0) return 0;\n\n        if (targetStart < 0) {\n          throw new RangeError('targetStart out of bounds');\n        }\n        if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n        if (end < 0) throw new RangeError('sourceEnd out of bounds');\n\n        if (end > this.length) end = this.length;\n        if (target.length - targetStart < end - start) {\n          end = target.length - targetStart + start;\n        }\n\n        var len = end - start;\n        var i;\n\n        if (this === target && start < targetStart && targetStart < end) {\n          for (i = len - 1; i >= 0; i--) {\n            target[i + targetStart] = this[i + start];\n          }\n        } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n          for (i = 0; i < len; i++) {\n            target[i + targetStart] = this[i + start];\n          }\n        } else {\n          Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n        }\n\n        return len;\n      };\n\n      Buffer.prototype.fill = function fill(value, start, end) {\n        if (!value) value = 0;\n        if (!start) start = 0;\n        if (!end) end = this.length;\n\n        if (end < start) throw new RangeError('end < start');\n\n        if (end === start) return;\n        if (this.length === 0) return;\n\n        if (start < 0 || start >= this.length) throw new RangeError('start out of bounds');\n        if (end < 0 || end > this.length) throw new RangeError('end out of bounds');\n\n        var i;\n        if (typeof value === 'number') {\n          for (i = start; i < end; i++) {\n            this[i] = value;\n          }\n        } else {\n          var bytes = utf8ToBytes(value.toString());\n          var len = bytes.length;\n          for (i = start; i < end; i++) {\n            this[i] = bytes[i % len];\n          }\n        }\n\n        return this;\n      };\n\n      var INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\n      function base64clean(str) {\n        str = stringtrim(str).replace(INVALID_BASE64_RE, '');\n\n        if (str.length < 2) return '';\n\n        while (str.length % 4 !== 0) {\n          str = str + '=';\n        }\n        return str;\n      }\n\n      function stringtrim(str) {\n        if (str.trim) return str.trim();\n        return str.replace(/^\\s+|\\s+$/g, '');\n      }\n\n      function toHex(n) {\n        if (n < 16) return '0' + n.toString(16);\n        return n.toString(16);\n      }\n\n      function utf8ToBytes(string, units) {\n        units = units || Infinity;\n        var codePoint;\n        var length = string.length;\n        var leadSurrogate = null;\n        var bytes = [];\n\n        for (var i = 0; i < length; i++) {\n          codePoint = string.charCodeAt(i);\n\n          if (codePoint > 0xD7FF && codePoint < 0xE000) {\n            if (!leadSurrogate) {\n              if (codePoint > 0xDBFF) {\n                if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n                continue;\n              } else if (i + 1 === length) {\n                if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n                continue;\n              }\n\n              leadSurrogate = codePoint;\n\n              continue;\n            }\n\n            if (codePoint < 0xDC00) {\n              if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n              leadSurrogate = codePoint;\n              continue;\n            }\n\n            codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n          } else if (leadSurrogate) {\n            if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          }\n\n          leadSurrogate = null;\n\n          if (codePoint < 0x80) {\n            if ((units -= 1) < 0) break;\n            bytes.push(codePoint);\n          } else if (codePoint < 0x800) {\n            if ((units -= 2) < 0) break;\n            bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n          } else if (codePoint < 0x10000) {\n            if ((units -= 3) < 0) break;\n            bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n          } else if (codePoint < 0x110000) {\n            if ((units -= 4) < 0) break;\n            bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n          } else {\n            throw new Error('Invalid code point');\n          }\n        }\n\n        return bytes;\n      }\n\n      function asciiToBytes(str) {\n        var byteArray = [];\n        for (var i = 0; i < str.length; i++) {\n          byteArray.push(str.charCodeAt(i) & 0xFF);\n        }\n        return byteArray;\n      }\n\n      function utf16leToBytes(str, units) {\n        var c, hi, lo;\n        var byteArray = [];\n        for (var i = 0; i < str.length; i++) {\n          if ((units -= 2) < 0) break;\n\n          c = str.charCodeAt(i);\n          hi = c >> 8;\n          lo = c % 256;\n          byteArray.push(lo);\n          byteArray.push(hi);\n        }\n\n        return byteArray;\n      }\n\n      function base64ToBytes(str) {\n        return base64.toByteArray(base64clean(str));\n      }\n\n      function blitBuffer(src, dst, offset, length) {\n        for (var i = 0; i < length; i++) {\n          if (i + offset >= dst.length || i >= src.length) break;\n          dst[i + offset] = src[i];\n        }\n        return i;\n      }\n    }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {});\n  }, { 'base64-js': 38, 'ieee754': 39, 'isarray': 40 }],\n  38: [function (require, module, exports) {\n    (function (exports) {\n      'use strict';\n\n      var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n      var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\n\n      var PLUS = '+'.charCodeAt(0);\n      var SLASH = '/'.charCodeAt(0);\n      var NUMBER = '0'.charCodeAt(0);\n      var LOWER = 'a'.charCodeAt(0);\n      var UPPER = 'A'.charCodeAt(0);\n      var PLUS_URL_SAFE = '-'.charCodeAt(0);\n      var SLASH_URL_SAFE = '_'.charCodeAt(0);\n\n      function decode(elt) {\n        var code = elt.charCodeAt(0);\n        if (code === PLUS || code === PLUS_URL_SAFE) return 62;\n        if (code === SLASH || code === SLASH_URL_SAFE) return 63;\n        if (code < NUMBER) return -1;\n        if (code < NUMBER + 10) return code - NUMBER + 26 + 26;\n        if (code < UPPER + 26) return code - UPPER;\n        if (code < LOWER + 26) return code - LOWER + 26;\n      }\n\n      function b64ToByteArray(b64) {\n        var i, j, l, tmp, placeHolders, arr;\n\n        if (b64.length % 4 > 0) {\n          throw new Error('Invalid string. Length must be a multiple of 4');\n        }\n\n        var len = b64.length;\n        placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0;\n\n        arr = new Arr(b64.length * 3 / 4 - placeHolders);\n\n        l = placeHolders > 0 ? b64.length - 4 : b64.length;\n\n        var L = 0;\n\n        function push(v) {\n          arr[L++] = v;\n        }\n\n        for (i = 0, j = 0; i < l; i += 4, j += 3) {\n          tmp = decode(b64.charAt(i)) << 18 | decode(b64.charAt(i + 1)) << 12 | decode(b64.charAt(i + 2)) << 6 | decode(b64.charAt(i + 3));\n          push((tmp & 0xFF0000) >> 16);\n          push((tmp & 0xFF00) >> 8);\n          push(tmp & 0xFF);\n        }\n\n        if (placeHolders === 2) {\n          tmp = decode(b64.charAt(i)) << 2 | decode(b64.charAt(i + 1)) >> 4;\n          push(tmp & 0xFF);\n        } else if (placeHolders === 1) {\n          tmp = decode(b64.charAt(i)) << 10 | decode(b64.charAt(i + 1)) << 4 | decode(b64.charAt(i + 2)) >> 2;\n          push(tmp >> 8 & 0xFF);\n          push(tmp & 0xFF);\n        }\n\n        return arr;\n      }\n\n      function uint8ToBase64(uint8) {\n        var i;\n        var extraBytes = uint8.length % 3;\n        var output = '';\n        var temp, length;\n\n        function encode(num) {\n          return lookup.charAt(num);\n        }\n\n        function tripletToBase64(num) {\n          return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F);\n        }\n\n        for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n          temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2];\n          output += tripletToBase64(temp);\n        }\n\n        switch (extraBytes) {\n          case 1:\n            temp = uint8[uint8.length - 1];\n            output += encode(temp >> 2);\n            output += encode(temp << 4 & 0x3F);\n            output += '==';\n            break;\n          case 2:\n            temp = (uint8[uint8.length - 2] << 8) + uint8[uint8.length - 1];\n            output += encode(temp >> 10);\n            output += encode(temp >> 4 & 0x3F);\n            output += encode(temp << 2 & 0x3F);\n            output += '=';\n            break;\n          default:\n            break;\n        }\n\n        return output;\n      }\n\n      exports.toByteArray = b64ToByteArray;\n      exports.fromByteArray = uint8ToBase64;\n    })(typeof exports === 'undefined' ? this.base64js = {} : exports);\n  }, {}],\n  39: [function (require, module, exports) {\n    exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n      var e, m;\n      var eLen = nBytes * 8 - mLen - 1;\n      var eMax = (1 << eLen) - 1;\n      var eBias = eMax >> 1;\n      var nBits = -7;\n      var i = isLE ? nBytes - 1 : 0;\n      var d = isLE ? -1 : 1;\n      var s = buffer[offset + i];\n\n      i += d;\n\n      e = s & (1 << -nBits) - 1;\n      s >>= -nBits;\n      nBits += eLen;\n      for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n      m = e & (1 << -nBits) - 1;\n      e >>= -nBits;\n      nBits += mLen;\n      for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n      if (e === 0) {\n        e = 1 - eBias;\n      } else if (e === eMax) {\n        return m ? NaN : (s ? -1 : 1) * Infinity;\n      } else {\n        m = m + Math.pow(2, mLen);\n        e = e - eBias;\n      }\n      return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n    };\n\n    exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n      var e, m, c;\n      var eLen = nBytes * 8 - mLen - 1;\n      var eMax = (1 << eLen) - 1;\n      var eBias = eMax >> 1;\n      var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n      var i = isLE ? 0 : nBytes - 1;\n      var d = isLE ? 1 : -1;\n      var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n\n      value = Math.abs(value);\n\n      if (isNaN(value) || value === Infinity) {\n        m = isNaN(value) ? 1 : 0;\n        e = eMax;\n      } else {\n        e = Math.floor(Math.log(value) / Math.LN2);\n        if (value * (c = Math.pow(2, -e)) < 1) {\n          e--;\n          c *= 2;\n        }\n        if (e + eBias >= 1) {\n          value += rt / c;\n        } else {\n          value += rt * Math.pow(2, 1 - eBias);\n        }\n        if (value * c >= 2) {\n          e++;\n          c /= 2;\n        }\n\n        if (e + eBias >= eMax) {\n          m = 0;\n          e = eMax;\n        } else if (e + eBias >= 1) {\n          m = (value * c - 1) * Math.pow(2, mLen);\n          e = e + eBias;\n        } else {\n          m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n          e = 0;\n        }\n      }\n\n      for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n      e = e << mLen | m;\n      eLen += mLen;\n      for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n      buffer[offset + i - d] |= s * 128;\n    };\n  }, {}],\n  40: [function (require, module, exports) {\n    var toString = {}.toString;\n\n    module.exports = Array.isArray || function (arr) {\n      return toString.call(arr) == '[object Array]';\n    };\n  }, {}] }, {}, [36]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PANOLENS);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(61), __webpack_require__(340)(module), __webpack_require__(26)))\n\n/***/ }),\n\n/***/ 315:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(68),\n  /* template */\n  __webpack_require__(325),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 316:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(69),\n  /* template */\n  __webpack_require__(326),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 317:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(70),\n  /* template */\n  __webpack_require__(328),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 318:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(71),\n  /* template */\n  __webpack_require__(331),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 319:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(72),\n  /* template */\n  __webpack_require__(327),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 320:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(336)\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(74),\n  /* template */\n  __webpack_require__(329),\n  /* scopeId */\n  \"data-v-66d382e3\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 321:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(333)\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(75),\n  /* template */\n  __webpack_require__(322),\n  /* scopeId */\n  \"data-v-09ad1f51\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 322:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 323:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"             \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n        \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"          \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)) + \"\\n          \")]), _vm._v(\"\\n        \")])])])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 324:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demos\"\n  }, [_c('div', {\n    staticClass: \"demos-content\"\n  }, [_c('ul', {\n    staticClass: \"demos-menu\"\n  }, [_c('li', {\n    staticClass: \"demos-menu-title\"\n  }, [_vm._v(\"demos\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-pano\"\n    }\n  }, [_vm._v(\"basic panorama\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-cube-pano\"\n    }\n  }, [_vm._v(\"Cube Faces\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-video-pano\"\n    }\n  }, [_vm._v(\"Video Pano\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-scene\"\n    }\n  }, [_vm._v(\"Scene with hotspot\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-tour\"\n    }\n  }, [_vm._v(\"VR Tour\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demos-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 325:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"cube\",\n      \"source\": \"assets/faces/pano_%s.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 326:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"source\": _vm.urls[_vm.index]\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 327:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"video\",\n      \"source\": \"assets/ClashofClans.mp4\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 328:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Scene', {\n    attrs: {\n      \"pano\": _vm.scene.pano,\n      \"position\": _vm.scene.position,\n      \"rotation\": _vm.scene.rotation,\n      \"links\": _vm.scene.links\n    },\n    on: {\n      \"on-load-start\": _vm.onLoadStart,\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 329:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 330:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"v-pano\"\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 331:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Tour', {\n    attrs: {\n      \"scenes\": _vm.scenes\n    },\n    on: {\n      \"on-load-start\": _vm.onLoadStart,\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 333:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(129);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(17)(\"4136a65b\", content, true);\n\n/***/ }),\n\n/***/ 334:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(130);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(17)(\"56304fc1\", content, true);\n\n/***/ }),\n\n/***/ 335:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(131);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(17)(\"48e2ad6a\", content, true);\n\n/***/ }),\n\n/***/ 336:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(132);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(17)(\"356c544a\", content, true);\n\n/***/ }),\n\n/***/ 337:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(133);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(17)(\"49e91b24\", content, true);\n\n/***/ }),\n\n/***/ 41:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(337)\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(73),\n  /* template */\n  __webpack_require__(330),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(332);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages__ = __webpack_require__(65);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\nvar routes = __WEBPACK_IMPORTED_MODULE_2__pages__[\"a\" /* pages */].map(function (page) {\n  var name = page.name;\n  return {\n    path: '/' + name.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase(),\n    name: name,\n    component: page\n  };\n});\n\nconsole.log(routes);\n\nroutes.push({\n  path: '*',\n  redirect: '/demo-pano'\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({ routes: routes }));\n\n/***/ }),\n\n/***/ 63:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(335)\n\nvar Component = __webpack_require__(3)(\n  /* script */\n  __webpack_require__(66),\n  /* template */\n  __webpack_require__(324),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 64:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue__ = __webpack_require__(63);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(62);\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App_vue___default.a);\n  }\n});\n\n/***/ }),\n\n/***/ 65:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return pages; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_pano__ = __webpack_require__(316);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__demo_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__ = __webpack_require__(315);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_video_pano__ = __webpack_require__(319);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__demo_video_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_scene__ = __webpack_require__(317);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_scene___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__demo_scene__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__demo_tour__ = __webpack_require__(318);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__demo_tour___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__demo_tour__);\n\n\n\n\n\n\nvar pages = [__WEBPACK_IMPORTED_MODULE_0__demo_pano___default.a, __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default.a, __WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default.a, __WEBPACK_IMPORTED_MODULE_3__demo_scene___default.a, __WEBPACK_IMPORTED_MODULE_4__demo_tour___default.a];\n\n\n\n/***/ }),\n\n/***/ 66:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'App'\n});\n\n/***/ }),\n\n/***/ 67:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__ = __webpack_require__(134);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js__ = __webpack_require__(136);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_highlight_js__);\n\n\n\n\n\nvar codeHandler = function codeHandler(code) {\n  var scripts = '\\n  <script src=\"vue.js\"></script> \\n  <script src=\"vue-vr.min.js\"></script>';\n  return code.replace(/#scripts#/ig, scripts);\n};\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'App',\n  props: {\n    vueCode: {\n      type: String,\n      default: ''\n    },\n    htmlCode: {\n      type: String,\n      default: '// TODO'\n    }\n  },\n  mounted: function mounted() {\n    __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.vueCode);\n    __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.htmlCode);\n  },\n  data: function data() {\n    return {};\n  },\n\n  filters: {\n    code: function code(val) {\n      return codeHandler(val);\n    }\n  },\n  components: {}\n});\n\n/***/ }),\n\n/***/ 68:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        type=\\'cube\\'\\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\\n</template>\\n<script>\\n    import { Pano } from \\'vuejs-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n </script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'cube\\'\\n            source=\"assets/faces/pano_%s.jpg\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'DemoCubePano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 69:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        :source=\"urls[index]\">\\n    </Pano>\\n</template>\\n\\n<script>\\n    import { Pano } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        },\\n        data () {\\n          return {\\n            urls: [\\n              \\'assets/equirectangular.jpg\\',\\n              \\'assets/pano.png\\'\\n            ],\\n            index: 0\\n          }\\n        },\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            :source=\"urls[index]\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'DemoPano',\n  data: function data() {\n    return {\n      code: code,\n      htmlCode: htmlCode,\n      loading: true,\n      urls: ['assets/equirectangular.jpg', 'assets/pano.png'],\n      index: 0\n    };\n  },\n\n  methods: {\n    onLoad: function onLoad() {\n      this.loading = false;\n    }\n  },\n  components: {\n    Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n    DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n  }\n});\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Scene_vue__ = __webpack_require__(320);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Scene_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Scene_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Scene\\n        @on-load=\"onLoad\"\\n        :scene=\\'scene\\'>\\n\\n    </Scene>\\n    <div\\n      class=\"demo-loading\"\\n      v-show=\"loading\"></div>\\n      \\n</template>\\n\\n<script>\\n    import { Scene } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Scene\\n        },\\n        data(){\\n          return {\\n            scene: {\\n              key: \\'M4wOy2s\\',\\n              panorama: {\\n                source: \\'assets/equirectangular.jpg\\',\\n                type: \\'image\\'\\n              },\\n              x: 0,\\n              y: 0,\\n              z: 0,\\n              rotation:90\\n            }\\n          }\\n        }\\n    }\\n</script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Scene\\n          @on-load=\"onLoad\"\\n          :scene=\\'scene\\'>\\n      </Scene>\\n      <div\\n        class=\"demo-loading\"\\n        v-show=\"loading\"></div>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'DemoScene',\n  data: function data() {\n    return {\n      code: code,\n      htmlCode: htmlCode,\n      loading: true,\n      scene: {\n        pano: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        position: {\n          x: 0,\n          y: 0,\n          z: 0\n        },\n        rotation: {\n          x: 0,\n          y: 135.0 * Math.PI / 180.0,\n          z: 0\n        },\n        links: [{\n          sceneId: 'scene1',\n          position: {\n            x: 100,\n            y: 0,\n            z: -100\n          }\n        }, {\n          sceneId: 'scene2',\n          position: {\n            x: 200,\n            y: 0,\n            z: -20\n          }\n        }]\n      }\n    };\n  },\n\n  methods: {\n    onLoad: function onLoad() {\n      console.log('onLoad');\n      this.loading = false;\n    },\n    onLoadStart: function onLoadStart() {\n      console.log('onLoadStart');\n      this.loading = true;\n    }\n  },\n  components: {\n    Scene: __WEBPACK_IMPORTED_MODULE_1__src_Scene_vue___default.a,\n    DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n  }\n});\n\n/***/ }),\n\n/***/ 71:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Tour_vue__ = __webpack_require__(321);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Tour_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Tour_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Tour\\n        @on-load=\"onLoad\"\\n        :scenes=\\'scenes\\'>\\n\\n    </Tour>\\n    <div\\n      class=\"demo-loading\"\\n      v-show=\"loading\"></div>\\n      \\n</template>\\n\\n<script>\\n    import { Tour } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Tour\\n        },\\n        data(){\\n          return {\\n            scenes: [{\\n              key: \\'M4wOy2s\\',\\n              panorama: {\\n                source: \\'assets/equirectangular.jpg\\',\\n                type: \\'image\\'\\n              },\\n              x: 0,\\n              y: 0,\\n              z: 0,\\n              rx: 0,\\n              rz: 0,\\n              ry: 90,\\n              connections: [\\n                \\'eIm7la\\',\\n                \\'eId9l0\\',\\n                \\'fK2dL7l\\'\\n              ]\\n            },\\n            {\\n              key: \\'eIm7la\\',\\n              panorama: {\\n                source: \\'assets/faces/pano_%s.jpg\\',\\n                type: \\'cube\\'\\n              },\\n              x: 100,\\n              y: 0,\\n              z: 200,\\n              rx: 0,\\n              rz: 0,\\n              ry: 0,\\n              connections: [\\n                \\'M4wOy2s\\'\\n              ]\\n            },\\n            {\\n              key: \\'eId9l0\\',\\n              panorama: {\\n                source: \\'assets/faces/pano_%s.jpg\\',\\n                type: \\'cube\\'\\n              },\\n              x: 150,\\n              y: 0,\\n              z: -300,\\n              rx: 0,\\n              rz: 0,\\n              ry: 0,\\n              connections: [\\n                \\'M4wOy2s\\'\\n              ]\\n            },\\n            {\\n              key: \\'fK2dL7l\\',\\n              panorama: {\\n                source: \\'assets/faces/pano_%s.jpg\\',\\n                type: \\'cube\\'\\n              },\\n              x: -150,\\n              y: 0,\\n              z: -300,\\n              rx: 0,\\n              rz: 0,\\n              ry: 0,\\n              connections: [\\n                \\'M4wOy2s\\'\\n              ]\\n            }]\\n          }\\n        }\\n    }\\n</script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Tour\\n          @on-load=\"onLoad\"\\n          :scenes=\\'scenes\\'>\\n      </Tour>\\n      <div\\n        class=\"demo-loading\"\\n        v-show=\"loading\"></div>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'DemoTour',\n  data: function data() {\n    return {\n      code: code,\n      htmlCode: htmlCode,\n      loading: true,\n      scenes: [{\n        key: 'M4wOy2s',\n        panorama: {\n          source: 'assets/equirectangular.jpg',\n          type: 'image'\n        },\n        x: 0,\n        y: 0,\n        z: 0,\n        rx: 0,\n        rz: 0,\n        ry: 90,\n        connections: ['eIm7la', 'eId9l0', 'fK2dL7l']\n      }, {\n        key: 'eIm7la',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: 100,\n        y: 0,\n        z: 200,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: ['M4wOy2s']\n      }, {\n        key: 'eId9l0',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: 150,\n        y: 0,\n        z: -300,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: ['M4wOy2s']\n      }, {\n        key: 'fK2dL7l',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: -150,\n        y: 0,\n        z: -300,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: ['M4wOy2s']\n      }]\n    };\n  },\n\n  methods: {\n    onLoad: function onLoad() {\n      console.log('onLoad');\n      this.loading = false;\n    },\n    onLoadStart: function onLoadStart() {\n      console.log('onLoadStart');\n      this.loading = true;\n    }\n  },\n  components: {\n    Tour: __WEBPACK_IMPORTED_MODULE_1__src_Tour_vue___default.a,\n    DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n  },\n  mounted: function mounted() {\n    this.initialScene = this.scenes[0].key;\n  }\n});\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        type=\\'video\\'\\n        source=\"assets/ClashofClans.mp4\">\\n    </Pano>\\n</template>\\n\\n<script>\\n    import { Pano } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n</script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'video\\'\\n            source=\"assets/ClashofClans.mp4\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'DemoVideoPano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 73:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_panolens__ = __webpack_require__(27);\n\n\n\nvar _log = console.log.bind(console);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'Pano',\n\n  props: {\n    source: {\n      type: String,\n      default: ''\n    },\n    type: {\n      type: String,\n      default: 'image'\n    },\n    width: {\n      type: Number,\n      default: 100\n    },\n    height: {\n      type: Number,\n      default: 100\n    }\n  },\n\n  data: function data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      viewer: null,\n      panorama: null\n    };\n  },\n  created: function created() {\n    window.addEventListener('resize', this.onResize, false);\n  },\n  destroyed: function destroyed() {\n    if (this.panorama && this.panorama.dispose) {\n      this.panorama.dispose();\n    }\n  },\n  mounted: function mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].Viewer({\n      container: this.$el,\n      cameraFov: 100\n    });\n\n    this.loadPano();\n  },\n\n  watch: {\n    source: function source() {\n      if (!this.viewer) return;\n      if (!this.panorama) return;\n      this.loadPano();\n    }\n  },\n\n  methods: {\n    onResize: function onResize() {\n      var _this = this;\n\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(function () {\n          _this.size = {\n            width: _this.$el.offsetWidth,\n            height: _this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    loadPano: function loadPano() {\n      _log('this.source = ' + this.source);\n      if (!this.source) return;\n\n      var pano = void 0;\n      switch (this.type) {\n        case 'cube':\n          var l = this.source.replace('%s', 'l');\n          var f = this.source.replace('%s', 'f');\n          var r = this.source.replace('%s', 'r');\n          var b = this.source.replace('%s', 'b');\n          var u = this.source.replace('%s', 'u');\n          var d = this.source.replace('%s', 'd');\n          pano = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].CubePanorama([r, l, u, d, f, b]);\n          break;\n        case 'video':\n          pano = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].VideoPanorama(this.source, { autoplay: true });\n          break;\n        default:\n          pano = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].ImagePanorama(this.source);\n          break;\n      }\n      this.setPano(pano);\n    },\n    setPano: function setPano(pano) {\n      if (!pano) return;\n      if (this.panorama) {\n        this.viewer.remove(this.panorama);\n      }\n      this.panorama = pano;\n      this.viewer.add(this.panorama);\n      this.viewer.setPanorama(this.panorama);\n\n      var that = this;\n      this.panorama.addEventListener('load', function () {\n        that.$emit('on-load');\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 74:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_panolens__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(40);\n\n\n\n\nvar _log = console.log.bind(console);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'Scene',\n  props: {\n    pano: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    position: {\n      type: Object,\n      default: function _default() {\n        return {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n      }\n    },\n    rotation: {\n      type: Object,\n      default: function _default() {\n        return {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n      }\n    },\n    links: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    width: {\n      type: Number,\n      default: undefined\n    },\n    height: {\n      type: Number,\n      default: undefined\n    }\n  },\n  data: function data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      scene_index: -1,\n      viewer: null,\n      panorama: null,\n      hotspots: []\n    };\n  },\n  created: function created() {\n    window.addEventListener('resize', this.onResize, false);\n  },\n  mounted: function mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].Viewer({\n      container: this.$el,\n      cameraFov: 100\n    });\n\n    this.loadScene();\n  },\n\n  methods: {\n    onResize: function onResize() {\n      var _this = this;\n\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(function () {\n          _this.size = {\n            width: _this.$el.offsetWidth,\n            height: _this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    loadScene: function loadScene() {\n      var _this2 = this;\n\n      _log('this.pano = ' + this.pano);\n      if (!this.pano) return;\n\n      var source = this.pano.source;\n\n      switch (this.pano.type) {\n        case 'cube':\n          var l = source.replace('%s', 'l');\n          var f = source.replace('%s', 'f');\n          var r = source.replace('%s', 'r');\n          var b = source.replace('%s', 'b');\n          var u = source.replace('%s', 'u');\n          var d = source.replace('%s', 'd');\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].CubePanorama([r, l, u, d, f, b]);\n          break;\n        case 'video':\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].VideoPanorama(source, { autoplay: true });\n          break;\n        default:\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].ImagePanorama(source);\n          break;\n      }\n\n      this.initViewer();\n\n      var group = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Object3D\"]();\n\n      this.links.forEach(function (link, index) {\n        _log(index);\n\n        var hotspot = addHotspot(link);\n        _this2.viewer.add(hotspot);\n\n        _this2.hotspots.push(hotspot);\n\n        var arrow = addArrow(_this2.position, link);\n\n        arrow.addEventListener('mouseover', function () {\n          _log('hoverred');\n        });\n\n        group.add(arrow);\n      });\n\n      var that = this;\n\n      var raycaster = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Raycaster\"]();\n\n      var INTERSECTED = null;\n\n      this.viewer.container.addEventListener('click', function (event) {\n        if (INTERSECTED) {\n          _log(INTERSECTED.targetScene);\n          that.scene_index = that.getSceneIndexByKey(INTERSECTED.targetScene.key);\n\n          that.viewer.remove(that.panorama);\n          that.loadScene();\n          INTERSECTED = null;\n        }\n      });\n\n      this.viewer.container.addEventListener('mousemove', function (event) {\n\n        var mouse = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Vector2\"]();\n        var camera = that.viewer.camera;\n        mouse.x = (event.clientX - that.$el.parentElement.offsetLeft) / that.viewer.container.offsetWidth * 2 - 1;\n        mouse.y = -((event.clientY - that.$el.parentElement.offsetTop) / that.viewer.container.offsetHeight) * 2 + 1;\n\n        raycaster.setFromCamera(mouse, camera);\n\n        var intersects = raycaster.intersectObjects(that.viewer.scene.children, true);\n\n        var intersectedObject = null;\n\n        if (intersects.length >= 0) {\n          intersects.forEach(function (intersect, index) {\n            if (intersect.object.type === 'hotspot' || intersect.object.type === 'arrow') {\n              intersectedObject = intersect.object;\n            }\n          });\n        }\n\n        if (intersectedObject) {\n          if (INTERSECTED) {\n            if (INTERSECTED.material.color) {\n              INTERSECTED.material.color.setHex(INTERSECTED.currentHex);\n            }\n\n            INTERSECTED.scale.set(1, 1, 1);\n          }\n\n          INTERSECTED = intersects[0].object;\n\n          if (INTERSECTED.material.color) {\n            INTERSECTED.currentHex = INTERSECTED.material.color.getHex();\n          }\n\n          if (INTERSECTED.material.color) {\n            INTERSECTED.material.color.setHex(0xffff00);\n          }\n          INTERSECTED.scale.set(1.2, 1.2, 1.2);\n        } else {\n          if (INTERSECTED) {\n            if (INTERSECTED.material.color) {\n              INTERSECTED.material.color.setHex(INTERSECTED.currentHex);\n            }\n            INTERSECTED.scale.set(1, 1, 1);\n          }\n\n          INTERSECTED = null;\n        }\n      });\n\n      this.viewer.addUpdateCallback(function () {\n\n        this.position.copy(that.viewer.control.target);\n\n        this.rotation.z = that.viewer.camera.rotation.z;\n\n        this.translateZ(0);\n        this.translateX(0);\n        this.translateY(-1);\n        this.translateZ(0);\n      }.bind(group));\n\n      this.viewer.add(group);\n\n\n      this.panorama.addEventListener('load', function () {\n        that.$emit('on-load');\n      });\n    },\n    initViewer: function initViewer() {\n      this.viewer.add(this.panorama);\n\n      this.viewer.camera.near = 0.001;\n      this.viewer.camera.target = this.panorama.position;\n\n      this.viewer.panorama.rotation.set(0, Math.PI, 0);\n\n      this.viewer.panorama.position.copy(this.position);\n    }\n  }\n});\n\nfunction addHotspot(hotspotData) {\n  var geometry = new __WEBPACK_IMPORTED_MODULE_1_three__[\"RingGeometry\"](8, 13, 100, 100);\n  var material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshPhongMaterial\"]({\n    color: 1668818,\n    emissive: 0xffffff,\n    transparent: true,\n    opacity: 1,\n    side: __WEBPACK_IMPORTED_MODULE_1_three__[\"DoubleSide\"],\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  });\n\n  var geometryBorder = new __WEBPACK_IMPORTED_MODULE_1_three__[\"CircleGeometry\"](9, 32, 32);\n  var materialBorder = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshPhongMaterial\"]();\n  materialBorder.copy(material);\n\n  materialBorder.opacity = 0.5;\n\n  var circle = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](geometryBorder);\n\n  var hotspot = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](geometry);\n\n  var merged = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Geometry\"]();\n\n  circle.updateMatrix();\n  merged.merge(circle.geometry, circle.matrix, 0);\n  hotspot.updateMatrix();\n\n  merged.merge(hotspot.geometry, hotspot.matrix, 1);\n\n  var group = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](merged, new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshFaceMaterial\"]([material, materialBorder]));\n\n  group.rotation.set(toRadian(90), 0, 0);\n  group.position.set(hotspotData.position.x, hotspotData.position.y - 100, hotspotData.position.z);\n\n  group.type = 'hotspot';\n\n  group.targetScene = hotspotData;\n\n  return group;\n}\n\nfunction addArrow(currentPosition, targetScene) {\n  var arrowGeometry = makeArrowGeometry();\n  var arrowMaterial = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshBasicMaterial\"]({\n    transparent: true,\n    opacity: 0.8,\n    color: 1668818,\n    emissive: 0xffffff,\n    side: __WEBPACK_IMPORTED_MODULE_1_three__[\"DoubleSide\"],\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  });\n\n  var arrow = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](arrowGeometry, arrowMaterial);\n\n  var x1 = targetScene.x;\n  var z1 = targetScene.z;\n  var x2 = currentPosition.x;\n  var z2 = currentPosition.z;\n\n  var ath = toDegree(Math.atan2(z1 - z2, x1 - x2));\n\n  arrow.rotation.set(toRadian(90), 0, toRadian(ath));\n\n  var arrowPos = sphereToWorld(ath, 0);\n\n  arrow.position.set(arrowPos.x, arrowPos.y, arrowPos.z);\n  arrow.type = 'arrow';\n  arrow.targetScene = targetScene;\n  return arrow;\n}\n\nfunction makeArrowGeometry() {\n  var t = 1 / 10.0;\n  var i = 2 * t / 3;\n  var n = t * Math.cos(60 * __WEBPACK_IMPORTED_MODULE_1_three__[\"Math\"].DEG2RAD);\n  var r = t * Math.sin(60 * __WEBPACK_IMPORTED_MODULE_1_three__[\"Math\"].DEG2RAD);\n  var o = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Shape\"]();\n\n  o.moveTo(i, 0);\n  o.lineTo(i - n, r);\n  o.lineTo(-n, r);\n  o.lineTo(0, 0);\n  o.lineTo(-n, -r);\n  o.lineTo(i - n, -r);\n  o.lineTo(i, 0);\n\n  return new __WEBPACK_IMPORTED_MODULE_1_three__[\"ShapeGeometry\"](o);\n}\n\nfunction sphereToWorld(ath, atv) {\n  var d = 1 / 2.0;\n  ath += 90;\n  var mY = -d * Math.sin(toRadian(atv));\n  var r = -d * Math.cos(toRadian(atv));\n  var mX = r * Math.sin(toRadian(-ath));\n  var mZ = r * Math.cos(toRadian(-ath));\n\n  return new __WEBPACK_IMPORTED_MODULE_1_three__[\"Vector3\"](mX, mY, mZ);\n}\nfunction toRadian(a) {\n  return a * Math.PI / 180.0;\n}\n\nfunction toDegree(a) {\n  return a * 180.0 / Math.PI;\n}\n\n/***/ }),\n\n/***/ 75:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_panolens__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(40);\n\n\n\n\nvar _log = console.log.bind(console);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'Tour',\n  props: {\n    scenes: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    sceneIndex: {\n      type: Number,\n      default: 0\n    },\n    width: {\n      type: Number,\n      default: undefined\n    },\n    height: {\n      type: Number,\n      default: undefined\n    }\n  },\n  data: function data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      scene_index: -1,\n      viewer: null,\n      panorama: null,\n      hotspots: [],\n      arrowGroup: null\n    };\n  },\n  created: function created() {\n    window.addEventListener('resize', this.onResize, false);\n  },\n  mounted: function mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].Viewer({\n      container: this.$el,\n      cameraFov: 100\n    });\n    if (this.scene_index === -1) {\n      this.loadScene(this.sceneIndex);\n    }\n  },\n\n  methods: {\n    onResize: function onResize() {\n      var _this = this;\n\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(function () {\n          _this.size = {\n            width: _this.$el.offsetWidth,\n            height: _this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    getSceneIndexByKey: function getSceneIndexByKey(key) {\n      for (var i = 0; i < this.scenes.length; i++) {\n        if (this.scenes[i].key === key) {\n          return i;\n        }\n      }\n      return -1;\n    },\n    loadScene: function loadScene(index) {\n      var _this2 = this;\n\n      this.$emit('on-load-start');\n      _log('this.scenes = ' + this.scenes);\n      if (!this.scenes || this.scenes.length === 0) return;\n\n      if (this.scene_index === index) return;\n\n      this.scene_index = index;\n\n      var scene = this.scenes[index];\n\n      var pano = scene.panorama;\n      var source = pano.source;\n\n      switch (pano.type) {\n        case 'cube':\n          var l = source.replace('%s', 'l');\n          var f = source.replace('%s', 'f');\n          var r = source.replace('%s', 'r');\n          var b = source.replace('%s', 'b');\n          var u = source.replace('%s', 'u');\n          var d = source.replace('%s', 'd');\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].CubePanorama([r, l, u, d, f, b]);\n          break;\n        case 'video':\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].VideoPanorama(source, { autoplay: true });\n          _log('this is video');\n          break;\n        default:\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].ImagePanorama(source);\n          break;\n      }\n\n      this.viewer.camera.near = 0.001;\n      this.viewer.camera.position.set(scene.x, scene.y, scene.z);\n\n      this.viewer.camera.translateZ(1);\n\n      this.viewer.add(this.panorama);\n\n      this.viewer.panorama.rotation.set(0, Math.PI, 0);\n      this.panorama.parent.rotation.set(0, Math.PI, 0);\n      this.viewer.panorama.position.set(scene.x, scene.y, scene.z);\n\n      this.viewer.control.target = this.viewer.panorama.position;\n\n      _log(this.viewer);\n      _log('panorama = ', this.panorama);\n\n      if (this.arrowGroup) {\n        this.viewer.remove(this.arrowGroup);\n      }\n\n      if (this.hotspots) {\n        this.hotspots.forEach(function (hotspot) {\n          _this2.viewer.remove(hotspot);\n        });\n      }\n\n      this.arrowGroup = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Object3D\"]();\n\n      scene.connections.forEach(function (key) {\n        _log('connections key = ', key);\n        var index = _this2.getSceneIndexByKey(key);\n        _log('connections index = ', index);\n        if (index === -1) return;\n\n        var hotspot = addHotspot(scene, _this2.scenes[index]);\n        _this2.viewer.add(hotspot);\n\n        _this2.hotspots.push(hotspot);\n\n        var arrow = addArrow(scene, _this2.scenes[index]);\n\n        arrow.addEventListener('mouseover', function () {\n          _log('hoverred');\n        });\n\n        _this2.arrowGroup.add(arrow);\n      });\n\n      var that = this;\n\n      var raycaster = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Raycaster\"]();\n\n      var INTERSECTED = null;\n\n      this.viewer.container.addEventListener('click', function (event) {\n        if (Date.now() - timeStamp < rate) return;\n\n        if (INTERSECTED) {\n          _log(INTERSECTED.targetScene);\n\n\n          alert('TODO: move to next scene ' + INTERSECTED.targetScene.key);\n        }\n      });\n\n      this.viewer.add(this.arrowGroup);\n\n\n      this.panorama.addEventListener('load', function () {\n        that.$emit('on-load');\n      });\n    }\n  }\n});\n\nvar rate = 1000;\nvar timeStamp = Date.now() - rate;\n\nfunction addHotspot(scene, targetScene) {\n  var pos = {\n    x: targetScene.x,\n    y: targetScene.y,\n    z: targetScene.z\n  };\n\n  var geometry = new __WEBPACK_IMPORTED_MODULE_1_three__[\"RingGeometry\"](8, 13, 100, 100);\n  var material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshPhongMaterial\"]({\n    color: 1668818,\n    emissive: 0xffffff,\n    transparent: true,\n    opacity: 1,\n    side: __WEBPACK_IMPORTED_MODULE_1_three__[\"DoubleSide\"],\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  });\n\n  var geometryBorder = new __WEBPACK_IMPORTED_MODULE_1_three__[\"CircleGeometry\"](9, 32, 32);\n  var materialBorder = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshPhongMaterial\"]();\n  materialBorder.copy(material);\n\n  materialBorder.opacity = 0.5;\n\n  var circle = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](geometryBorder);\n\n  var hotspot = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](geometry);\n\n  var merged = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Geometry\"]();\n\n  circle.updateMatrix();\n  merged.merge(circle.geometry, circle.matrix, 0);\n  hotspot.updateMatrix();\n\n  merged.merge(hotspot.geometry, hotspot.matrix, 1);\n\n  var group = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](merged, new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshFaceMaterial\"]([material, materialBorder]));\n\n  group.rotation.set(toRadian(90), 0, 0);\n  group.position.set(pos.x, pos.y - 100, pos.z);\n\n  group.type = 'hotspot';\n\n  group.targetScene = targetScene;\n\n  return group;\n}\n\nfunction addArrow(scene, targetScene) {\n  var arrowGeometry = makeArrowGeometry();\n  var arrowMaterial = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshBasicMaterial\"]({\n    transparent: true,\n    opacity: 0.8,\n    color: 1668818,\n    emissive: 0xffffff,\n    side: __WEBPACK_IMPORTED_MODULE_1_three__[\"DoubleSide\"],\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  });\n\n  var arrow = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](arrowGeometry, arrowMaterial);\n\n  var x1 = targetScene.x;\n  var z1 = targetScene.z;\n  var x2 = scene.x;\n  var z2 = scene.z;\n\n  var ath = toDegree(Math.atan2(z1 - z2, x1 - x2));\n\n  arrow.rotation.set(toRadian(90), 0, toRadian(ath));\n\n  var arrowPos = sphereToWorld(ath, 0);\n\n  arrow.position.set(arrowPos.x, arrowPos.y, arrowPos.z);\n  arrow.type = 'arrow';\n  arrow.targetScene = targetScene;\n  return arrow;\n}\n\nfunction makeArrowGeometry() {\n  var t = 1 / 10.0;\n  var i = 2 * t / 3;\n  var n = t * Math.cos(60 * __WEBPACK_IMPORTED_MODULE_1_three__[\"Math\"].DEG2RAD);\n  var r = t * Math.sin(60 * __WEBPACK_IMPORTED_MODULE_1_three__[\"Math\"].DEG2RAD);\n  var o = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Shape\"]();\n  o.moveTo(i, 0);\n  o.lineTo(i - n, r);\n  o.lineTo(-n, r);\n  o.lineTo(0, 0);\n  o.lineTo(-n, -r);\n  o.lineTo(i - n, -r);\n  o.lineTo(i, 0);\n  return new __WEBPACK_IMPORTED_MODULE_1_three__[\"ShapeGeometry\"](o);\n}\n\nfunction sphereToWorld(ath, atv) {\n  var d = 1 / 2.0;\n  ath += 90;\n  var mY = -d * Math.sin(toRadian(atv));\n  var r = -d * Math.cos(toRadian(atv));\n  var mX = r * Math.sin(toRadian(-ath));\n  var mZ = r * Math.cos(toRadian(-ath));\n\n  return new __WEBPACK_IMPORTED_MODULE_1_three__[\"Vector3\"](mX, mY, mZ);\n}\nfunction toRadian(a) {\n  return a * Math.PI / 180.0;\n}\n\nfunction toDegree(a) {\n  return a * 180.0 / Math.PI;\n}\n\n/***/ })\n\n},[64]);\n\n\n// WEBPACK FOOTER //\n// assets/js/app.1ea447697a7b3f526cea.js","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"div[data-v-09ad1f51]{cursor:pointer}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-09ad1f51\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Tour.vue\n// module id = 129\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:70%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:30%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .hljs{background:transparent}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-213df8bf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/components/demo-block.vue\n// module id = 130\n// module chunks = 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.demos,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.demos-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.demos-header .title{font-weight:700;font-size:18px;display:inline-block}.demos-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.demos-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.demos-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.demos-menu .demos-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.demos-menu .demos-menu-item>a{display:block;width:100%;height:100%}.demos-menu .demos-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.demos-menu .demos-menu-item:hover>a{color:#39f}.demos-pages{height:100%;overflow:hidden}.demo-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.demo-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;animation:loading-rotate .75s 0s linear infinite}.demo-loading:after,.demo-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.demo-loading:after{height:100%;width:0}@keyframes loading-rotate{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(.6)}to{transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-223dbf78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/App.vue\n// module id = 131\n// module chunks = 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"div[data-v-66d382e3]{cursor:pointer}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-66d382e3\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Scene.vue\n// module id = 132\n// module chunks = 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".v-pano{width:100%;height:100%;margin:0;padding:0;border:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-7974fb6b\",\"scoped\":false,\"hasInlineConfig\":false}!./~/less-loader/dist/cjs.js?{}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Pano.vue\n// module id = 133\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-213df8bf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./demo-block.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-block.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-213df8bf\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-block.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/components/demo-block.vue\n// module id = 16\n// module chunks = 1","import * as THREE from 'three'\n\n/**\n * Panolens.js\n * @author pchen66\n * @namespace PANOLENS\n */\n\nvar PANOLENS = { REVISION: '9' }\n/*! npm.im/iphone-inline-video 2.2.2 */\nvar enableInlineVideo = (function () {\n  'use strict'/*! npm.im/intervalometer */\n  function e (e, i, n, r) { function t (n) { d = i(t, r), e(n - (a || n)), a = n } var d, a; return {start: function () { d || t(0) }, stop: function () { n(d), d = null, a = 0 }} } function i (i) { return e(i, requestAnimationFrame, cancelAnimationFrame) } function n (e, i, n) { function r (r) { n && !n(e, i) || r.stopImmediatePropagation() } return e.addEventListener(i, r), r } function r (e, i, n, r) { function t () { return n[i] } function d (e) { n[i] = e }r && d(e[i]), Object.defineProperty(e, i, {get: t, set: d}) } function t (e, i, n) { n.addEventListener(i, function () { return e.dispatchEvent(new Event(i)) }) } function d (e, i) { Promise.resolve().then(function () { e.dispatchEvent(new Event(i)) }) } function a (e) { var i = new Audio(); return t(e, 'play', i), t(e, 'playing', i), t(e, 'pause', i), i.crossOrigin = e.crossOrigin, i.src = e.src || e.currentSrc || 'data:', i } function u (e, i, n) { (m || 0) + 200 < Date.now() && (e[h] = !0, m = Date.now()), n || (e.currentTime = i), k[++T % 3] = 100 * i | 0 } function o (e) { return e.driver.currentTime >= e.video.duration } function s (e) { var i = this; i.video.readyState >= i.video.HAVE_FUTURE_DATA ? (i.hasAudio || (i.driver.currentTime = i.video.currentTime + e * i.video.playbackRate / 1e3, i.video.loop && o(i) && (i.driver.currentTime = 0)), u(i.video, i.driver.currentTime)) : i.video.networkState === i.video.NETWORK_IDLE && i.video.buffered.length === 0 && i.video.load(), i.video.ended && (delete i.video[h], i.video.pause(!0)) } function c () { var e = this, i = e[g]; if (e.webkitDisplayingFullscreen) return void e[E](); i.driver.src !== 'data:' && i.driver.src !== e.src && (u(e, 0, !0), i.driver.src = e.src), e.paused && (i.paused = !1, e.buffered.length === 0 && e.load(), i.driver.play(), i.updater.start(), i.hasAudio || (d(e, 'play'), i.video.readyState >= i.video.HAVE_ENOUGH_DATA && d(e, 'playing'))) } function v (e) { var i = this, n = i[g]; n.driver.pause(), n.updater.stop(), i.webkitDisplayingFullscreen && i[w](), n.paused && !e || (n.paused = !0, n.hasAudio || d(i, 'pause'), i.ended && !i.webkitDisplayingFullscreen && (i[h] = !0, d(i, 'ended'))) } function p (e, n) { var r = {}; e[g] = r, r.paused = !0, r.hasAudio = n, r.video = e, r.updater = i(s.bind(r)), n ? r.driver = a(e) : (e.addEventListener('canplay', function () { e.paused || d(e, 'playing') }), r.driver = {src: e.src || e.currentSrc || 'data:', muted: !0, paused: !0, pause: function () { r.driver.paused = !0 }, play: function () { r.driver.paused = !1, o(r) && u(e, 0) }, get ended () { return o(r) }}), e.addEventListener('emptied', function () { var i = !r.driver.src || r.driver.src === 'data:'; r.driver.src && r.driver.src !== e.src && (u(e, 0, !0), r.driver.src = e.src, i || !n && e.autoplay ? r.driver.play() : r.updater.stop()) }, !1), e.addEventListener('webkitbeginfullscreen', function () { e.paused ? n && r.driver.buffered.length === 0 && r.driver.load() : (e.pause(), e[E]()) }), n && (e.addEventListener('webkitendfullscreen', function () { r.driver.currentTime = e.currentTime }), e.addEventListener('seeking', function () { k.indexOf(100 * e.currentTime | 0) < 0 && (r.driver.currentTime = e.currentTime) })) } function l (e) { var i = e[h]; return delete e[h], !e.webkitDisplayingFullscreen && !i } function f (e) { var i = e[g]; e[E] = e.play, e[w] = e.pause, e.play = c, e.pause = v, r(e, 'paused', i.driver), r(e, 'muted', i.driver, !0), r(e, 'playbackRate', i.driver, !0), r(e, 'ended', i.driver), r(e, 'loop', i.driver, !0), n(e, 'seeking', function (e) { return !e.webkitDisplayingFullscreen }), n(e, 'seeked', function (e) { return !e.webkitDisplayingFullscreen }), n(e, 'timeupdate', l), n(e, 'ended', l) } function y (e, i) { if (void 0 === i && (i = {}), !e[g]) { if (!i.everywhere) { if (!b) return; if (!(i.iPad || i.ipad ? /iPhone|iPod|iPad/ : /iPhone|iPod/).test(navigator.userAgent)) return }e.pause(); var n = e.autoplay; e.autoplay = !1, p(e, !e.muted), f(e), e.classList.add('IIV'), e.muted && n && (e.play(), e.addEventListener('playing', function i () { e.autoplay = !0, e.removeEventListener('playing', i) })), /iPhone|iPod|iPad/.test(navigator.platform) || console.warn('iphone-inline-video is not guaranteed to work in emulated environments') } } var m, b = typeof document === 'object' && 'object-fit' in document.head.style && !matchMedia('(-webkit-video-playable-inline)').matches, g = 'bfred-it:iphone-inline-video', h = 'bfred-it:iphone-inline-video:event', E = 'bfred-it:iphone-inline-video:nativeplay', w = 'bfred-it:iphone-inline-video:nativepause', k = [], T = 0; return y\n}())\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\nvar TWEEN = TWEEN || (function () {\n  var _tweens = []\n\n  return {\n\n    getAll: function () {\n      return _tweens\n    },\n\n    removeAll: function () {\n      _tweens = []\n    },\n\n    add: function (tween) {\n      _tweens.push(tween)\n    },\n\n    remove: function (tween) {\n      var i = _tweens.indexOf(tween)\n\n      if (i !== -1) {\n        _tweens.splice(i, 1)\n      }\n    },\n\n    update: function (time, preserve) {\n      if (_tweens.length === 0) {\n        return false\n      }\n\n      var i = 0\n\n      time = time !== undefined ? time : TWEEN.now()\n\n      while (i < _tweens.length) {\n        if (_tweens[i].update(time) || preserve) {\n          i++\n        } else {\n          _tweens.splice(i, 1)\n        }\n      }\n\n      return true\n    }\n  }\n})()\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {\n  TWEEN.now = function () {\n    var time = process.hrtime()\n\n    // Convert [seconds, nanoseconds] to milliseconds.\n    return time[0] * 1000 + time[1] / 1000000\n  }\n}\n// In a browser, use window.performance.now if it is available.\nelse if (typeof (window) !== 'undefined' &&\n         window.performance !== undefined &&\n\t\t window.performance.now !== undefined) {\n  // This must be bound, because directly assigning this function\n  // leads to an invocation exception in Chrome.\n  TWEEN.now = window.performance.now.bind(window.performance)\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n  TWEEN.now = Date.now\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n  TWEEN.now = function () {\n    return new Date().getTime()\n  }\n}\n\nTWEEN.Tween = function (object) {\n  var _object = object\n  var _valuesStart = {}\n  var _valuesEnd = {}\n  var _valuesStartRepeat = {}\n  var _duration = 1000\n  var _repeat = 0\n  var _repeatDelayTime\n  var _yoyo = false\n  var _isPlaying = false\n  var _reversed = false\n  var _delayTime = 0\n  var _startTime = null\n  var _easingFunction = TWEEN.Easing.Linear.None\n  var _interpolationFunction = TWEEN.Interpolation.Linear\n  var _chainedTweens = []\n  var _onStartCallback = null\n  var _onStartCallbackFired = false\n  var _onUpdateCallback = null\n  var _onCompleteCallback = null\n  var _onStopCallback = null\n\n  this.to = function (properties, duration) {\n    _valuesEnd = properties\n\n    if (duration !== undefined) {\n      _duration = duration\n    }\n\n    return this\n  }\n\n  this.start = function (time) {\n    TWEEN.add(this)\n\n    _isPlaying = true\n\n    _onStartCallbackFired = false\n\n    _startTime = time !== undefined ? time : TWEEN.now()\n    _startTime += _delayTime\n\n    for (var property in _valuesEnd) {\n      // Check if an Array was provided as property value\n      if (_valuesEnd[property] instanceof Array) {\n        if (_valuesEnd[property].length === 0) {\n          continue\n        }\n\n        // Create a local copy of the Array with the start value at the front\n        _valuesEnd[property] = [_object[property]].concat(_valuesEnd[property])\n      }\n\n      // If `to()` specifies a property that doesn't exist in the source object,\n      // we should not set that property in the object\n      if (_object[property] === undefined) {\n        continue\n      }\n\n      // Save the starting value.\n      _valuesStart[property] = _object[property]\n\n      if ((_valuesStart[property] instanceof Array) === false) {\n        _valuesStart[property] *= 1.0 // Ensures we're using numbers, not strings\n      }\n\n      _valuesStartRepeat[property] = _valuesStart[property] || 0\n    }\n\n    return this\n  }\n\n  this.stop = function () {\n    if (!_isPlaying) {\n      return this\n    }\n\n    TWEEN.remove(this)\n    _isPlaying = false\n\n    if (_onStopCallback !== null) {\n      _onStopCallback.call(_object, _object)\n    }\n\n    this.stopChainedTweens()\n    return this\n  }\n\n  this.end = function () {\n    this.update(_startTime + _duration)\n    return this\n  }\n\n  this.stopChainedTweens = function () {\n    for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n      _chainedTweens[i].stop()\n    }\n  }\n\n  this.delay = function (amount) {\n    _delayTime = amount\n    return this\n  }\n\n  this.repeat = function (times) {\n    _repeat = times\n    return this\n  }\n\n  this.repeatDelay = function (amount) {\n    _repeatDelayTime = amount\n    return this\n  }\n\n  this.yoyo = function (yoyo) {\n    _yoyo = yoyo\n    return this\n  }\n\n  this.easing = function (easing) {\n    _easingFunction = easing\n    return this\n  }\n\n  this.interpolation = function (interpolation) {\n    _interpolationFunction = interpolation\n    return this\n  }\n\n  this.chain = function () {\n    _chainedTweens = arguments\n    return this\n  }\n\n  this.onStart = function (callback) {\n    _onStartCallback = callback\n    return this\n  }\n\n  this.onUpdate = function (callback) {\n    _onUpdateCallback = callback\n    return this\n  }\n\n  this.onComplete = function (callback) {\n    _onCompleteCallback = callback\n    return this\n  }\n\n  this.onStop = function (callback) {\n    _onStopCallback = callback\n    return this\n  }\n\n  this.update = function (time) {\n    var property\n    var elapsed\n    var value\n\n    if (time < _startTime) {\n      return true\n    }\n\n    if (_onStartCallbackFired === false) {\n      if (_onStartCallback !== null) {\n        _onStartCallback.call(_object, _object)\n      }\n\n      _onStartCallbackFired = true\n    }\n\n    elapsed = (time - _startTime) / _duration\n    elapsed = elapsed > 1 ? 1 : elapsed\n\n    value = _easingFunction(elapsed)\n\n    for (property in _valuesEnd) {\n      // Don't update properties that do not exist in the source object\n      if (_valuesStart[property] === undefined) {\n        continue\n      }\n\n      var start = _valuesStart[property] || 0\n      var end = _valuesEnd[property]\n\n      if (end instanceof Array) {\n        _object[property] = _interpolationFunction(end, value)\n      } else {\n        // Parses relative end values with start as base (e.g.: +10, -3)\n        if (typeof (end) === 'string') {\n          if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            end = start + parseFloat(end)\n          } else {\n            end = parseFloat(end)\n          }\n        }\n\n        // Protect against non numeric properties.\n        if (typeof (end) === 'number') {\n          _object[property] = start + (end - start) * value\n        }\n      }\n    }\n\n    if (_onUpdateCallback !== null) {\n      _onUpdateCallback.call(_object, value)\n    }\n\n    if (elapsed === 1) {\n      if (_repeat > 0) {\n        if (isFinite(_repeat)) {\n          _repeat--\n        }\n\n        // Reassign starting values, restart by making startTime = now\n        for (property in _valuesStartRepeat) {\n          if (typeof (_valuesEnd[property]) === 'string') {\n            _valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property])\n          }\n\n          if (_yoyo) {\n            var tmp = _valuesStartRepeat[property]\n\n            _valuesStartRepeat[property] = _valuesEnd[property]\n            _valuesEnd[property] = tmp\n          }\n\n          _valuesStart[property] = _valuesStartRepeat[property]\n        }\n\n        if (_yoyo) {\n          _reversed = !_reversed\n        }\n\n        if (_repeatDelayTime !== undefined) {\n          _startTime = time + _repeatDelayTime\n        } else {\n          _startTime = time + _delayTime\n        }\n\n        return true\n      } else {\n        if (_onCompleteCallback !== null) {\n          _onCompleteCallback.call(_object, _object)\n        }\n\n        for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n          // Make the chained tweens start exactly at the time they should,\n          // even if the `update()` method was called way past the duration of the tween\n          _chainedTweens[i].start(_startTime + _duration)\n        }\n\n        return false\n      }\n    }\n\n    return true\n  }\n}\n\nTWEEN.Easing = {\n\n  Linear: {\n\n    None: function (k) {\n      return k\n    }\n\n  },\n\n  Quadratic: {\n\n    In: function (k) {\n      return k * k\n    },\n\n    Out: function (k) {\n      return k * (2 - k)\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k\n      }\n\n      return -0.5 * (--k * (k - 2) - 1)\n    }\n\n  },\n\n  Cubic: {\n\n    In: function (k) {\n      return k * k * k\n    },\n\n    Out: function (k) {\n      return --k * k * k + 1\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2)\n    }\n\n  },\n\n  Quartic: {\n\n    In: function (k) {\n      return k * k * k * k\n    },\n\n    Out: function (k) {\n      return 1 - (--k * k * k * k)\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2)\n    }\n\n  },\n\n  Quintic: {\n\n    In: function (k) {\n      return k * k * k * k * k\n    },\n\n    Out: function (k) {\n      return --k * k * k * k * k + 1\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2)\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In: function (k) {\n      return 1 - Math.cos(k * Math.PI / 2)\n    },\n\n    Out: function (k) {\n      return Math.sin(k * Math.PI / 2)\n    },\n\n    InOut: function (k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k))\n    }\n\n  },\n\n  Exponential: {\n\n    In: function (k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1)\n    },\n\n    Out: function (k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k)\n    },\n\n    InOut: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1)\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2)\n    }\n\n  },\n\n  Circular: {\n\n    In: function (k) {\n      return 1 - Math.sqrt(1 - k * k)\n    },\n\n    Out: function (k) {\n      return Math.sqrt(1 - (--k * k))\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1)\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1)\n    }\n\n  },\n\n  Elastic: {\n\n    In: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n    },\n\n    Out: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1\n    },\n\n    InOut: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      k *= 2\n\n      if (k < 1) {\n        return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n      }\n\n      return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1\n    }\n\n  },\n\n  Back: {\n\n    In: function (k) {\n      var s = 1.70158\n\n      return k * k * ((s + 1) * k - s)\n    },\n\n    Out: function (k) {\n      var s = 1.70158\n\n      return --k * k * ((s + 1) * k + s) + 1\n    },\n\n    InOut: function (k) {\n      var s = 1.70158 * 1.525\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s))\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2)\n    }\n\n  },\n\n  Bounce: {\n\n    In: function (k) {\n      return 1 - TWEEN.Easing.Bounce.Out(1 - k)\n    },\n\n    Out: function (k) {\n      if (k < (1 / 2.75)) {\n        return 7.5625 * k * k\n      } else if (k < (2 / 2.75)) {\n        return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75\n      } else if (k < (2.5 / 2.75)) {\n        return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375\n      } else {\n        return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375\n      }\n    },\n\n    InOut: function (k) {\n      if (k < 0.5) {\n        return TWEEN.Easing.Bounce.In(k * 2) * 0.5\n      }\n\n      return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5\n    }\n\n  }\n\n}\n\nTWEEN.Interpolation = {\n\n  Linear: function (v, k) {\n    var m = v.length - 1\n    var f = m * k\n    var i = Math.floor(f)\n    var fn = TWEEN.Interpolation.Utils.Linear\n\n    if (k < 0) {\n      return fn(v[0], v[1], f)\n    }\n\n    if (k > 1) {\n      return fn(v[m], v[m - 1], m - f)\n    }\n\n    return fn(v[i], v[i + 1 > m ? m : i + 1], f - i)\n  },\n\n  Bezier: function (v, k) {\n    var b = 0\n    var n = v.length - 1\n    var pw = Math.pow\n    var bn = TWEEN.Interpolation.Utils.Bernstein\n\n    for (var i = 0; i <= n; i++) {\n      b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i)\n    }\n\n    return b\n  },\n\n  CatmullRom: function (v, k) {\n    var m = v.length - 1\n    var f = m * k\n    var i = Math.floor(f)\n    var fn = TWEEN.Interpolation.Utils.CatmullRom\n\n    if (v[0] === v[m]) {\n      if (k < 0) {\n        i = Math.floor(f = m * (1 + k))\n      }\n\n      return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i)\n    } else {\n      if (k < 0) {\n        return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0])\n      }\n\n      if (k > 1) {\n        return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m])\n      }\n\n      return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i)\n    }\n  },\n\n  Utils: {\n\n    Linear: function (p0, p1, t) {\n      return (p1 - p0) * t + p0\n    },\n\n    Bernstein: function (n, i) {\n      var fc = TWEEN.Interpolation.Utils.Factorial\n\n      return fc(n) / fc(i) / fc(n - i)\n    },\n\n    Factorial: (function () {\n      var a = [1]\n\n      return function (n) {\n        var s = 1\n\n        if (a[n]) {\n          return a[n]\n        }\n\n        for (var i = n; i > 1; i--) {\n          s *= i\n        }\n\n        a[n] = s\n        return s\n      }\n    })(),\n\n    CatmullRom: function (p0, p1, p2, p3, t) {\n      var v0 = (p2 - p0) * 0.5\n      var v1 = (p3 - p1) * 0.5\n      var t2 = t * t\n      var t3 = t * t2\n\n      return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1\n    }\n\n  }\n\n};\n\n// UMD (Universal Module Definition)\n(function (root) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define([], function () {\n      return TWEEN\n    })\n  } else if (typeof module !== 'undefined' && typeof exports === 'object') {\n    // Node.js\n    module.exports = TWEEN\n  } else if (root !== undefined) {\n    // Global variable\n    root.TWEEN = TWEEN\n  }\n})(this)\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n/* global THREE, console */\n\n// This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n// the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n// supported.\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\nTHREE.OrbitControls = function (object, domElement) {\n  this.object = object\n  this.domElement = (domElement !== undefined) ? domElement : document\n  this.frameId\n\n  // API\n\n  // Set to false to disable this control\n  this.enabled = true\n\n  // \"target\" sets the location of focus, where the control orbits around\n  // and where it pans with respect to.\n  this.target = new THREE.Vector3()\n\n  // center is old, deprecated; use \"target\" instead\n  this.center = this.target\n\n  // This option actually enables dollying in and out; left as \"zoom\" for\n  // backwards compatibility\n  this.noZoom = false\n  this.zoomSpeed = 1.0\n\n  // Limits to how far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = 0\n  this.maxDistance = Infinity\n\n  // Limits to how far you can zoom in and out ( OrthographicCamera only )\n  this.minZoom = 0\n  this.maxZoom = Infinity\n\n  // Set to true to disable this control\n  this.noRotate = false\n  this.rotateSpeed = -0.15\n\n  // Set to true to disable this control\n  this.noPan = true\n  this.keyPanSpeed = 7.0\t// pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  this.autoRotate = false\n  this.autoRotateSpeed = 2.0 // 30 seconds per round when fps is 60\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = 0 // radians\n  this.maxPolarAngle = Math.PI // radians\n\n  // Momentum\n  \tthis.momentumDampingFactor = 0.90\n  \tthis.momentumScalingFactor = -0.005\n  \tthis.momentumKeydownFactor = 20\n\n  \t// Fov\n  \tthis.minFov = 30\n  \tthis.maxFov = 120\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = -Infinity // radians\n  this.maxAzimuthAngle = Infinity // radians\n\n  // Set to true to disable use of the keys\n  this.noKeys = false\n\n  // The four arrow keys\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 }\n\n  // Mouse buttons\n  this.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT }\n\n  /// /////////\n  // internals\n\n  var scope = this\n\n  var EPS = 10e-8\n  var MEPS = 10e-5\n\n  var rotateStart = new THREE.Vector2()\n  var rotateEnd = new THREE.Vector2()\n  var rotateDelta = new THREE.Vector2()\n\n  var panStart = new THREE.Vector2()\n  var panEnd = new THREE.Vector2()\n  var panDelta = new THREE.Vector2()\n  var panOffset = new THREE.Vector3()\n\n  var offset = new THREE.Vector3()\n\n  var dollyStart = new THREE.Vector2()\n  var dollyEnd = new THREE.Vector2()\n  var dollyDelta = new THREE.Vector2()\n\n  var theta\n  var phi\n  var phiDelta = 0\n  var thetaDelta = 0\n  var scale = 1\n  var pan = new THREE.Vector3()\n\n  var lastPosition = new THREE.Vector3()\n  var lastQuaternion = new THREE.Quaternion()\n\n  var momentumLeft = 0, momentumUp = 0\n  var eventCurrent, eventPrevious\n  var momentumOn = false\n\n  var keyUp, keyBottom, keyLeft, keyRight\n\n  var STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 }\n\n  var state = STATE.NONE\n\n  // for reset\n\n  this.target0 = this.target.clone()\n  this.position0 = this.object.position.clone()\n  this.zoom0 = this.object.zoom\n\n  // so camera.up is the orbit axis\n\n  var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0))\n  var quatInverse = quat.clone().inverse()\n\n  // events\n\n  var changeEvent = { type: 'change' }\n  var startEvent = { type: 'start' }\n  var endEvent = { type: 'end' }\n\n  this.setLastQuaternion = function (quaternion) {\n    lastQuaternion.copy(quaternion)\n    scope.object.quaternion.copy(quaternion)\n  }\n\n  this.getLastPosition = function () {\n    return lastPosition\n  }\n\n  this.rotateLeft = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle()\n    }\n\n    thetaDelta -= angle\n  }\n\n  this.rotateUp = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle()\n    }\n\n    phiDelta -= angle\n  }\n\n  // pass in distance in world space to move left\n  this.panLeft = function (distance) {\n    var te = this.object.matrix.elements\n\n    // get X column of matrix\n    panOffset.set(te[ 0 ], te[ 1 ], te[ 2 ])\n    panOffset.multiplyScalar(-distance)\n\n    pan.add(panOffset)\n  }\n\n  // pass in distance in world space to move up\n  this.panUp = function (distance) {\n    var te = this.object.matrix.elements\n\n    // get Y column of matrix\n    panOffset.set(te[ 4 ], te[ 5 ], te[ 6 ])\n    panOffset.multiplyScalar(distance)\n\n    pan.add(panOffset)\n  }\n\n  // pass in x,y of change desired in pixel space,\n  // right and down are positive\n  this.pan = function (deltaX, deltaY) {\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      // perspective\n      var position = scope.object.position\n      var offset = position.clone().sub(scope.target)\n      var targetDistance = offset.length()\n\n      // half of the fov is center to top of screen\n      targetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0)\n\n      // we actually don't use screenWidth, since perspective camera is fixed to screen height\n      scope.panLeft(2 * deltaX * targetDistance / element.clientHeight)\n      scope.panUp(2 * deltaY * targetDistance / element.clientHeight)\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      // orthographic\n      scope.panLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth)\n      scope.panUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight)\n    } else {\n      // camera neither orthographic or perspective\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.')\n    }\n  }\n\n  this.momentum = function () {\n    if (!momentumOn) return\n\n    if (Math.abs(momentumLeft) < MEPS && Math.abs(momentumUp) < MEPS) {\n      momentumOn = false\n      return\n    }\n\n    momentumUp *= this.momentumDampingFactor\n    momentumLeft *= this.momentumDampingFactor\n\n    thetaDelta -= this.momentumScalingFactor * momentumLeft\n    phiDelta -= this.momentumScalingFactor * momentumUp\n  }\n\n  this.dollyIn = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale()\n    }\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      scale /= dollyScale\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale))\n      scope.object.updateProjectionMatrix()\n      scope.dispatchEvent(changeEvent)\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n    }\n  }\n\n  this.dollyOut = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale()\n    }\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      scale *= dollyScale\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale))\n      scope.object.updateProjectionMatrix()\n      scope.dispatchEvent(changeEvent)\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n    }\n  }\n\n  this.update = function (ignoreUpdate) {\n    var position = this.object.position\n\n    offset.copy(position).sub(this.target)\n\n    // rotate offset to \"y-axis-is-up\" space\n    offset.applyQuaternion(quat)\n\n    // angle from z-axis around y-axis\n\n    theta = Math.atan2(offset.x, offset.z)\n\n    // angle from y-axis\n\n    phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y)\n\n    if (this.autoRotate && state === STATE.NONE) {\n      this.rotateLeft(getAutoRotationAngle())\n    }\n\n    this.momentum()\n\n    theta += thetaDelta\n    phi += phiDelta\n\n    // restrict theta to be between desired limits\n    theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta))\n\n    // restrict phi to be between desired limits\n    phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi))\n\n    // restrict phi to be betwee EPS and PI-EPS\n    phi = Math.max(EPS, Math.min(Math.PI - EPS, phi))\n\n    var radius = offset.length() * scale\n\n    // restrict radius to be between desired limits\n    radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius))\n\n    // move target to panned location\n    this.target.add(pan)\n\n    offset.x = radius * Math.sin(phi) * Math.sin(theta)\n    offset.y = radius * Math.cos(phi)\n    offset.z = radius * Math.sin(phi) * Math.cos(theta)\n\n    // rotate offset back to \"camera-up-vector-is-up\" space\n    offset.applyQuaternion(quatInverse)\n\n    position.copy(this.target).add(offset)\n\n    this.object.lookAt(this.target)\n\n    thetaDelta = 0\n    phiDelta = 0\n    scale = 1\n    pan.set(0, 0, 0)\n\n    // update condition is:\n    // min(camera displacement, camera rotation in radians)^2 > EPS\n    // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n    if (lastPosition.distanceToSquared(this.object.position) > EPS ||\n\t\t    8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n      ignoreUpdate !== true && this.dispatchEvent(changeEvent)\n\n      lastPosition.copy(this.object.position)\n      lastQuaternion.copy(this.object.quaternion)\n    }\n  }\n\n  this.reset = function () {\n    state = STATE.NONE\n\n    this.target.copy(this.target0)\n    this.object.position.copy(this.position0)\n    this.object.zoom = this.zoom0\n\n    this.object.updateProjectionMatrix()\n    this.dispatchEvent(changeEvent)\n\n    this.update()\n  }\n\n  this.getPolarAngle = function () {\n    return phi\n  }\n\n  this.getAzimuthalAngle = function () {\n    return theta\n  }\n\n  function getAutoRotationAngle () {\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed\n  }\n\n  function getZoomScale () {\n    return Math.pow(0.95, scope.zoomSpeed)\n  }\n\n  function onMouseDown (event) {\n    momentumOn = false\n\n   \t\tmomentumLeft = momentumUp = 0\n\n    if (scope.enabled === false) return\n    event.preventDefault()\n\n    if (event.button === scope.mouseButtons.ORBIT) {\n      if (scope.noRotate === true) return\n\n      state = STATE.ROTATE\n\n      rotateStart.set(event.clientX, event.clientY)\n    } else if (event.button === scope.mouseButtons.ZOOM) {\n      if (scope.noZoom === true) return\n\n      state = STATE.DOLLY\n\n      dollyStart.set(event.clientX, event.clientY)\n    } else if (event.button === scope.mouseButtons.PAN) {\n      if (scope.noPan === true) return\n\n      state = STATE.PAN\n\n      panStart.set(event.clientX, event.clientY)\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener('mousemove', onMouseMove, false)\n      document.addEventListener('mouseup', onMouseUp, false)\n      scope.dispatchEvent(startEvent)\n    }\n\n    scope.update()\n  }\n\n  function onMouseMove (event) {\n    if (scope.enabled === false) return\n\n    event.preventDefault()\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n    if (state === STATE.ROTATE) {\n      if (scope.noRotate === true) return\n\n      rotateEnd.set(event.clientX, event.clientY)\n      rotateDelta.subVectors(rotateEnd, rotateStart)\n\n      // rotating across whole screen goes 360 degrees around\n      scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed)\n\n      // rotating up and down along whole screen attempts to go 360, but limited to 180\n      scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed)\n\n      rotateStart.copy(rotateEnd)\n\n      if (eventPrevious) {\n        momentumLeft = event.clientX - eventPrevious.clientX\n        momentumUp = event.clientY - eventPrevious.clientY\n      }\n\n      eventPrevious = event\n    } else if (state === STATE.DOLLY) {\n      if (scope.noZoom === true) return\n\n      dollyEnd.set(event.clientX, event.clientY)\n      dollyDelta.subVectors(dollyEnd, dollyStart)\n\n      if (dollyDelta.y > 0) {\n        scope.dollyIn()\n      } else if (dollyDelta.y < 0) {\n        scope.dollyOut()\n      }\n\n      dollyStart.copy(dollyEnd)\n    } else if (state === STATE.PAN) {\n      if (scope.noPan === true) return\n\n      panEnd.set(event.clientX, event.clientY)\n      panDelta.subVectors(panEnd, panStart)\n\n      scope.pan(panDelta.x, panDelta.y)\n\n      panStart.copy(panEnd)\n    }\n\n    if (state !== STATE.NONE) scope.update()\n  }\n\n  function onMouseUp (/* event */) {\n    momentumOn = true\n\n    eventPrevious = undefined\n\n    if (scope.enabled === false) return\n\n    document.removeEventListener('mousemove', onMouseMove, false)\n    document.removeEventListener('mouseup', onMouseUp, false)\n    scope.dispatchEvent(endEvent)\n    state = STATE.NONE\n  }\n\n  function onMouseWheel (event) {\n    if (scope.enabled === false || scope.noZoom === true || state !== STATE.NONE) return\n\n    event.preventDefault()\n    event.stopPropagation()\n\n    var delta = 0\n\n    if (event.wheelDelta !== undefined) { // WebKit / Opera / Explorer 9\n      delta = event.wheelDelta\n    } else if (event.detail !== undefined) { // Firefox\n      delta = -event.detail\n    }\n\n    if (delta > 0) {\n      // scope.dollyOut();\n      scope.object.fov = (scope.object.fov < scope.maxFov)\n        ? scope.object.fov + 1\n        : scope.maxFov\n      scope.object.updateProjectionMatrix()\n    } else if (delta < 0) {\n      // scope.dollyIn();\n      scope.object.fov = (scope.object.fov > scope.minFov)\n        ? scope.object.fov - 1\n        : scope.minFov\n      scope.object.updateProjectionMatrix()\n    }\n\n    scope.update()\n    scope.dispatchEvent(changeEvent)\n    scope.dispatchEvent(startEvent)\n    scope.dispatchEvent(endEvent)\n  }\n\n  function onKeyUp (event) {\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = false\n        break\n\n      case scope.keys.BOTTOM:\n        keyBottom = false\n        break\n\n      case scope.keys.LEFT:\n        keyLeft = false\n        break\n\n      case scope.keys.RIGHT:\n        keyRight = false\n        break\n    }\n  }\n\n  function onKeyDown (event) {\n    if (scope.enabled === false || scope.noKeys === true || scope.noRotate === true) return\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = true\n        break\n\n      case scope.keys.BOTTOM:\n        keyBottom = true\n        break\n\n      case scope.keys.LEFT:\n        keyLeft = true\n        break\n\n      case scope.keys.RIGHT:\n        keyRight = true\n        break\n    }\n\n    if (keyUp || keyBottom || keyLeft || keyRight) {\n      momentumOn = true\n\n      if (keyUp) momentumUp = -scope.rotateSpeed * scope.momentumKeydownFactor\n      if (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor\n      if (keyLeft) momentumLeft = -scope.rotateSpeed * scope.momentumKeydownFactor\n      if (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor\n    }\n  }\n\n  function touchstart (event) {\n    momentumOn = false\n\n    momentumLeft = momentumUp = 0\n\n    if (scope.enabled === false) return\n\n    switch (event.touches.length) {\n      case 1:\t// one-fingered touch: rotate\n\n        if (scope.noRotate === true) return\n\n        state = STATE.TOUCH_ROTATE\n\n        rotateStart.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        break\n\n      case 2:\t// two-fingered touch: dolly\n\n        if (scope.noZoom === true) return\n\n        state = STATE.TOUCH_DOLLY\n\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n\n        break\n\n      case 3: // three-fingered touch: pan\n\n        if (scope.noPan === true) return\n\n        state = STATE.TOUCH_PAN\n\n        panStart.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        break\n\n      default:\n\n        state = STATE.NONE\n    }\n\n    if (state !== STATE.NONE) scope.dispatchEvent(startEvent)\n  }\n\n  function touchmove (event) {\n    if (scope.enabled === false) return\n\n    event.preventDefault()\n    event.stopPropagation()\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n    switch (event.touches.length) {\n      case 1: // one-fingered touch: rotate\n\n        if (scope.noRotate === true) return\n        if (state !== STATE.TOUCH_ROTATE) return\n\n        rotateEnd.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        rotateDelta.subVectors(rotateEnd, rotateStart)\n\n        // rotating across whole screen goes 360 degrees around\n        scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed)\n        // rotating up and down along whole screen attempts to go 360, but limited to 180\n        scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed)\n\n        rotateStart.copy(rotateEnd)\n\n        if (eventPrevious) {\n          momentumLeft = event.touches[ 0 ].pageX - eventPrevious.pageX\n          momentumUp = event.touches[ 0 ].pageY - eventPrevious.pageY\n        }\n\n        eventPrevious = {\n          pageX: event.touches[ 0 ].pageX,\n          pageY: event.touches[ 0 ].pageY\n        }\n\n        scope.update()\n        break\n\n      case 2: // two-fingered touch: dolly\n\n        if (scope.noZoom === true) return\n        if (state !== STATE.TOUCH_DOLLY) return\n\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n\n        if (event.scale < 1) {\n          scope.object.fov = (scope.object.fov < scope.maxFov)\n            ? scope.object.fov + 1\n            : scope.maxFov\n          scope.object.updateProjectionMatrix()\n        } else if (event.scale > 1) {\n          scope.object.fov = (scope.object.fov > scope.minFov)\n            ? scope.object.fov - 1\n            : scope.minFov\n          scope.object.updateProjectionMatrix()\n        }\n\n        scope.update()\n        scope.dispatchEvent(changeEvent)\n        break\n\n      case 3: // three-fingered touch: pan\n\n        if (scope.noPan === true) return\n        if (state !== STATE.TOUCH_PAN) return\n\n        panEnd.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        panDelta.subVectors(panEnd, panStart)\n\n        scope.pan(panDelta.x, panDelta.y)\n\n        panStart.copy(panEnd)\n\n        scope.update()\n        break\n\n      default:\n\n        state = STATE.NONE\n    }\n  }\n\n  function touchend (/* event */) {\n    momentumOn = true\n\n    eventPrevious = undefined\n\n    if (scope.enabled === false) return\n\n    scope.dispatchEvent(endEvent)\n    state = STATE.NONE\n  }\n\n  // this.domElement.addEventListener( 'contextmenu', function ( event ) { event.preventDefault(); }, false );\n  this.domElement.addEventListener('mousedown', onMouseDown, false)\n  this.domElement.addEventListener('mousewheel', onMouseWheel, false)\n  this.domElement.addEventListener('DOMMouseScroll', onMouseWheel, false) // firefox\n\n  this.domElement.addEventListener('touchstart', touchstart, false)\n  this.domElement.addEventListener('touchend', touchend, false)\n  this.domElement.addEventListener('touchmove', touchmove, false)\n\n  window.addEventListener('keyup', onKeyUp, false)\n  window.addEventListener('keydown', onKeyDown, false)\n\n  // force an update at start\n  this.update()\n}\n\nTHREE.OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype)\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls/**\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n *\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\n\nTHREE.DeviceOrientationControls = function (camera, domElement) {\n  var scope = this\n  var changeEvent = { type: 'change' }\n\n  var rotY = 0\n  var rotX = 0\n  var tempX = 0\n  var tempY = 0\n\n  this.camera = camera\n  this.camera.rotation.reorder('YXZ')\n  this.domElement = (domElement !== undefined) ? domElement : document\n\n  this.enabled = true\n\n  this.deviceOrientation = {}\n  this.screenOrientation = 0\n\n  this.alpha = 0\n  this.alphaOffsetAngle = 0\n\n  var onDeviceOrientationChangeEvent = function (event) {\n    scope.deviceOrientation = event\n  }\n\n  var onScreenOrientationChangeEvent = function () {\n    scope.screenOrientation = window.orientation || 0\n  }\n\n  var onTouchStartEvent = function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    tempX = event.touches[ 0 ].pageX\n    tempY = event.touches[ 0 ].pageY\n  }\n\n  var onTouchMoveEvent = function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    rotY += THREE.Math.degToRad((event.touches[ 0 ].pageX - tempX) / 4)\n    rotX += THREE.Math.degToRad((tempY - event.touches[ 0 ].pageY) / 4)\n\n    scope.updateAlphaOffsetAngle(rotY)\n\n    tempX = event.touches[ 0 ].pageX\n    tempY = event.touches[ 0 ].pageY\n  }\n\n  // The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n  var setCameraQuaternion = function (quaternion, alpha, beta, gamma, orient) {\n    var zee = new THREE.Vector3(0, 0, 1)\n\n    var euler = new THREE.Euler()\n\n    var q0 = new THREE.Quaternion()\n\n    var q1 = new THREE.Quaternion(-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5)) // - PI/2 around the x-axis\n\n    var vectorFingerY\n    var fingerQY = new THREE.Quaternion()\n    var fingerQX = new THREE.Quaternion()\n\n    if (scope.screenOrientation == 0) {\n      vectorFingerY = new THREE.Vector3(1, 0, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX)\n    } else if (scope.screenOrientation == 180) {\n      vectorFingerY = new THREE.Vector3(1, 0, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX)\n    } else if (scope.screenOrientation == 90) {\n      vectorFingerY = new THREE.Vector3(0, 1, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX)\n    } else if (scope.screenOrientation == -90) {\n      vectorFingerY = new THREE.Vector3(0, 1, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX)\n    }\n\n    q1.multiply(fingerQY)\n    q1.multiply(fingerQX)\n\n    euler.set(beta, alpha, -gamma, 'YXZ') // 'ZXY' for the device, but 'YXZ' for us\n\n    quaternion.setFromEuler(euler) // orient the device\n\n    quaternion.multiply(q1) // camera looks out the back of the device, not the top\n\n    quaternion.multiply(q0.setFromAxisAngle(zee, -orient)) // adjust for screen orientation\n  }\n\n  this.connect = function () {\n    onScreenOrientationChangeEvent() // run once on load\n\n    window.addEventListener('orientationchange', onScreenOrientationChangeEvent, false)\n    window.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false)\n    window.addEventListener('deviceorientation', this.update.bind(this), false)\n\n    scope.domElement.addEventListener('touchstart', onTouchStartEvent, false)\n    scope.domElement.addEventListener('touchmove', onTouchMoveEvent, false)\n\n    scope.enabled = true\n  }\n\n  this.disconnect = function () {\n    window.removeEventListener('orientationchange', onScreenOrientationChangeEvent, false)\n    window.removeEventListener('deviceorientation', onDeviceOrientationChangeEvent, false)\n    window.removeEventListener('deviceorientation', this.update.bind(this), false)\n\n    scope.domElement.removeEventListener('touchstart', onTouchStartEvent, false)\n    scope.domElement.removeEventListener('touchmove', onTouchMoveEvent, false)\n\n    scope.enabled = false\n  }\n\n  this.update = function (ignoreUpdate) {\n    if (scope.enabled === false) return\n\n    var alpha = scope.deviceOrientation.alpha ? THREE.Math.degToRad(scope.deviceOrientation.alpha) + this.alphaOffsetAngle : 0 // Z\n    var beta = scope.deviceOrientation.beta ? THREE.Math.degToRad(scope.deviceOrientation.beta) : 0 // X'\n    var gamma = scope.deviceOrientation.gamma ? THREE.Math.degToRad(scope.deviceOrientation.gamma) : 0 // Y''\n    var orient = scope.screenOrientation ? THREE.Math.degToRad(scope.screenOrientation) : 0 // O\n\n    setCameraQuaternion(scope.camera.quaternion, alpha, beta, gamma, orient)\n    this.alpha = alpha\n\n    ignoreUpdate !== true && this.dispatchEvent(changeEvent)\n  }\n\n  this.updateAlphaOffsetAngle = function (angle) {\n    this.alphaOffsetAngle = angle\n    this.update()\n  }\n\n  this.dispose = function () {\n    this.disconnect()\n  }\n\n  this.connect()\n}\n\nTHREE.DeviceOrientationControls.prototype = Object.create(THREE.EventDispatcher.prototype)\nTHREE.DeviceOrientationControls.prototype.constructor = THREE.DeviceOrientationControls /** The Bend modifier lets you bend the current selection up to 90 degrees about a single axis,\n * producing a uniform bend in an object's geometry.\n * You can control the angle and direction of the bend on any of three axes.\n * The geometry has to have rather large number of polygons!\n * options:\n * \t direction - deformation direction (in local coordinates!).\n * \t axis - deformation axis (in local coordinates!). Vector of direction and axis are perpendicular.\n * \t angle - deformation angle.\n * @author Vildanov Almaz / alvild@gmail.com\n * The algorithm of a bend is based on the chain line cosh: y = 1/b * cosh(b*x) - 1/b. It can be used only in three.js.\n */\n\nTHREE.BendModifier = function () {\n\n}\n\nTHREE.BendModifier.prototype = {\n\n  constructor: THREE.BendModifier,\n\n  set: function (direction, axis, angle) {\n    this.direction = new THREE.Vector3(); this.direction.copy(direction)\n    this.axis = new THREE.Vector3(); this.axis.copy(axis)\n    this.angle = angle\n    return this\n  },\n\n  _sign: function (a) {\n    return a < 0 ? -1 : a > 0 ? 1 : 0\n  },\n\n  _cosh: function (x) {\n    return (Math.exp(x) + Math.exp(-x)) / 2\n  },\n\n  _sinhInverse: function (x) {\n    return Math.log(Math.abs(x) + Math.sqrt(x * x + 1))\n  },\n\n  modify: function (geometry) {\n    var thirdAxis = new THREE.Vector3(); thirdAxis.crossVectors(this.direction, this.axis)\n\n    // P - matrices of the change-of-coordinates\n    var P = new THREE.Matrix4()\n    P.set(thirdAxis.x, thirdAxis.y, thirdAxis.z, 0,\n      this.direction.x, this.direction.y, this.direction.z, 0,\n      this.axis.x, this.axis.y, this.axis.z, 0,\n      0, 0, 0, 1).transpose()\n\n    var InverseP = new THREE.Matrix4().getInverse(P)\n    var newVertices = []; var oldVertices = []; var anglesBetweenOldandNewVertices = []\n\n    var meshGeometryBoundingBoxMaxx = 0; var meshGeometryBoundingBoxMinx = 0\n    var meshGeometryBoundingBoxMaxy = 0; var meshGeometryBoundingBoxMiny = 0\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      newVertices[i] = new THREE.Vector3(); newVertices[i].copy(geometry.vertices[i]).applyMatrix4(InverseP)\n      if (newVertices[i].x > meshGeometryBoundingBoxMaxx) { meshGeometryBoundingBoxMaxx = newVertices[i].x }\n      if (newVertices[i].x < meshGeometryBoundingBoxMinx) { meshGeometryBoundingBoxMinx = newVertices[i].x }\n      if (newVertices[i].y > meshGeometryBoundingBoxMaxy) { meshGeometryBoundingBoxMaxy = newVertices[i].y }\n      if (newVertices[i].y < meshGeometryBoundingBoxMiny) { meshGeometryBoundingBoxMiny = newVertices[i].y }\n    }\n\n    var meshWidthold = meshGeometryBoundingBoxMaxx - meshGeometryBoundingBoxMinx\n    var meshDepth = meshGeometryBoundingBoxMaxy - meshGeometryBoundingBoxMiny\n    var ParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidthold\n    var oldMiddlex = (meshGeometryBoundingBoxMaxx + meshGeometryBoundingBoxMinx) / 2\n    var oldMiddley = (meshGeometryBoundingBoxMaxy + meshGeometryBoundingBoxMiny) / 2\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      oldVertices[i] = new THREE.Vector3(); oldVertices[i].copy(newVertices[i])\n      newVertices[i].x = this._sign(newVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((newVertices[i].x - oldMiddlex) * ParamB)\n    }\n\n    var meshWidth = 2 / ParamB * this._sinhInverse(meshWidthold / 2 * ParamB)\n\n    var NewParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidth\n\n    var rightEdgePos = new THREE.Vector3(meshWidth / 2, -meshDepth / 2, 0)\n    rightEdgePos.y = 1 / NewParamB * this._cosh(NewParamB * rightEdgePos.x) - 1 / NewParamB - meshDepth / 2\n\n    var bendCenter = new THREE.Vector3(0, rightEdgePos.y + rightEdgePos.x / Math.tan(this.angle), 0)\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var x0 = this._sign(oldVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((oldVertices[i].x - oldMiddlex) * ParamB)\n      var y0 = 1 / NewParamB * this._cosh(NewParamB * x0) - 1 / NewParamB\n\n      var k = new THREE.Vector3(bendCenter.x - x0, bendCenter.y - (y0 - meshDepth / 2), bendCenter.z).normalize()\n\n      var Q = new THREE.Vector3()\n      Q.addVectors(new THREE.Vector3(x0, y0 - meshDepth / 2, oldVertices[i].z), k.multiplyScalar(oldVertices[i].y + meshDepth / 2))\n      newVertices[i].x = Q.x; newVertices[i].y = Q.y\n    }\n\n    var middle = oldMiddlex * meshWidth / meshWidthold\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var O = new THREE.Vector3(oldMiddlex, oldMiddley, oldVertices[i].z)\n      var p = new THREE.Vector3(); p.subVectors(oldVertices[i], O)\n      var q = new THREE.Vector3(); q.subVectors(newVertices[i], O)\n\n      anglesBetweenOldandNewVertices[i] = Math.acos(1 / this._cosh(ParamB * newVertices[i].x)) * this._sign(newVertices[i].x)\n\n      newVertices[i].x = newVertices[i].x + middle\n      geometry.vertices[i].copy(newVertices[i].applyMatrix4(P))\n    }\n\n    geometry.computeFaceNormals()\n    geometry.verticesNeedUpdate = true\n    geometry.normalsNeedUpdate = true\n\n    // compute Vertex Normals\n    var fvNames = [ 'a', 'b', 'c', 'd' ]\n\n    for (var f = 0, fl = geometry.faces.length; f < fl; f++) {\n      var face = geometry.faces[ f ]\n      if (face.vertexNormals === undefined) {\n        continue\n      }\n      for (var v = 0, vl = face.vertexNormals.length; v < vl; v++) {\n        var angle = anglesBetweenOldandNewVertices[ face[ fvNames[ v ] ] ]\n        var x = this.axis.x,\n          y = this.axis.y,\n          z = this.axis.z\n\n        var rotateMatrix = new THREE.Matrix3()\n        rotateMatrix.set(Math.cos(angle) + (1 - Math.cos(angle)) * x * x, (1 - Math.cos(angle)) * x * y - Math.sin(angle) * z, (1 - Math.cos(angle)) * x * z + Math.sin(angle) * y,\n          (1 - Math.cos(angle)) * y * x + Math.sin(angle) * z, Math.cos(angle) + (1 - Math.cos(angle)) * y * y, (1 - Math.cos(angle)) * y * z - Math.sin(angle) * x,\n          (1 - Math.cos(angle)) * z * x - Math.sin(angle) * y, (1 - Math.cos(angle)) * z * y + Math.sin(angle) * x, Math.cos(angle) + (1 - Math.cos(angle)) * z * z)\n\n        face.vertexNormals[ v ].applyMatrix3(rotateMatrix)\n      }\n    }\n    // end compute Vertex Normals\n\n    return this\n  }\n}/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CardboardEffect = function (renderer) {\n  var _camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1)\n\n  var _scene = new THREE.Scene()\n\n  var _stereo = new THREE.StereoCamera()\n  _stereo.aspect = 0.5\n\n  var _params = { minFilter: THREE.LinearFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat }\n\n  var _renderTarget = new THREE.WebGLRenderTarget(512, 512, _params)\n  _renderTarget.scissorTest = true\n  _renderTarget.texture.generateMipmaps = false\n\n  // Distortion Mesh ported from:\n  // https://github.com/borismus/webvr-boilerplate/blob/master/src/distortion/barrel-distortion-fragment.js\n\n  var distortion = new THREE.Vector2(0.441, 0.156)\n\n  var geometry = new THREE.PlaneBufferGeometry(1, 1, 10, 20).removeAttribute('normal').toNonIndexed()\n\n  var positions = geometry.attributes.position.array\n  var uvs = geometry.attributes.uv.array\n\n  // duplicate\n  geometry.attributes.position.count *= 2\n  geometry.attributes.uv.count *= 2\n\n  var positions2 = new Float32Array(positions.length * 2)\n  positions2.set(positions)\n  positions2.set(positions, positions.length)\n\n  var uvs2 = new Float32Array(uvs.length * 2)\n  uvs2.set(uvs)\n  uvs2.set(uvs, uvs.length)\n\n  var vector = new THREE.Vector2()\n  var length = positions.length / 3\n\n  for (var i = 0, l = positions2.length / 3; i < l; i++) {\n    vector.x = positions2[ i * 3 + 0 ]\n    vector.y = positions2[ i * 3 + 1 ]\n\n    var dot = vector.dot(vector)\n    var scalar = 1.5 + (distortion.x + distortion.y * dot) * dot\n\n    var offset = i < length ? 0 : 1\n\n    positions2[ i * 3 + 0 ] = (vector.x / scalar) * 1.5 - 0.5 + offset\n    positions2[ i * 3 + 1 ] = (vector.y / scalar) * 3.0\n\n    uvs2[ i * 2 ] = (uvs2[ i * 2 ] + offset) * 0.5\n  }\n\n  geometry.attributes.position.array = positions2\n  geometry.attributes.uv.array = uvs2\n\n  //\n\n  // var material = new THREE.MeshBasicMaterial( { wireframe: true } );\n  var material = new THREE.MeshBasicMaterial({ map: _renderTarget.texture })\n  var mesh = new THREE.Mesh(geometry, material)\n  _scene.add(mesh)\n\n  //\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height)\n\n    var pixelRatio = renderer.getPixelRatio()\n\n    _renderTarget.setSize(width * pixelRatio, height * pixelRatio)\n  }\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld()\n\n    if (camera.parent === null) camera.updateMatrixWorld()\n\n    _stereo.update(camera)\n\n    var width = _renderTarget.width / 2\n    var height = _renderTarget.height\n\n    _renderTarget.scissor.set(0, 0, width, height)\n    _renderTarget.viewport.set(0, 0, width, height)\n    renderer.render(scene, _stereo.cameraL, _renderTarget)\n\n    _renderTarget.scissor.set(width, 0, width, height)\n    _renderTarget.viewport.set(width, 0, width, height)\n    renderer.render(scene, _stereo.cameraR, _renderTarget)\n\n    renderer.render(_scene, _camera)\n  }\n}/**\n * @author alteredq / http://alteredqualia.com/\n * @authod mrdoob / http://mrdoob.com/\n * @authod arodic / http://aleksandarrodic.com/\n * @authod fonserbc / http://fonserbc.github.io/\n*/\n\nTHREE.StereoEffect = function (renderer) {\n  var _stereo = new THREE.StereoCamera()\n  _stereo.aspect = 0.5\n\n  this.setEyeSeparation = function (eyeSep) {\n    _stereo.eyeSep = eyeSep\n  }\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height)\n  }\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld()\n\n    if (camera.parent === null) camera.updateMatrixWorld()\n\n    _stereo.update(camera)\n\n    var size = renderer.getSize()\n\n    if (renderer.autoClear) renderer.clear()\n    renderer.setScissorTest(true)\n\n    renderer.setScissor(0, 0, size.width / 2, size.height)\n    renderer.setViewport(0, 0, size.width / 2, size.height)\n    renderer.render(scene, _stereo.cameraL)\n\n    renderer.setScissor(size.width / 2, 0, size.width / 2, size.height)\n    renderer.setViewport(size.width / 2, 0, size.width / 2, size.height)\n    renderer.render(scene, _stereo.cameraR)\n\n    renderer.setScissorTest(false)\n  }\n}\nvar GSVPANO = GSVPANO || {}\nGSVPANO.PanoLoader = function (parameters) {\n  'use strict'\n\n  var _parameters = parameters || {},\n    _location,\n    _zoom,\n    _panoId,\n    _panoClient = new google.maps.StreetViewService(),\n    _count = 0,\n    _total = 0,\n    _canvas = [],\n    _ctx = [],\n    _wc = 0,\n    _hc = 0,\n    result = null,\n    rotation = 0,\n    copyright = '',\n    onSizeChange = null,\n    onPanoramaLoad = null\n\n  var levelsW = [ 1, 2, 4, 7, 13, 26 ],\n    levelsH = [ 1, 1, 2, 4, 7, 13 ]\n\n  var widths = [ 416, 832, 1664, 3328, 6656, 13312 ],\n    heights = [ 416, 416, 832, 1664, 3328, 6656 ]\n\n  var gl = null\n  try {\n    var canvas = document.createElement('canvas')\n\t    gl = canvas.getContext('experimental-webgl')\n\t    if (gl == null) {\n\t        gl = canvas.getContext('webgl')\n\t    }\n  } catch (error) {}\n\n  var maxW = 1024,\n    maxH = 1024\n\n  if (gl) {\n    var maxTexSize = Math.max(gl.getParameter(gl.MAX_TEXTURE_SIZE), 6656)\n    // alert( 'MAX_TEXTURE_SIZE ' + maxTexSize );\n    maxW = maxH = maxTexSize\n  }\n\n  this.setProgress = function (loaded, total) {\n    if (this.onProgress) {\n      this.onProgress({loaded: loaded, total: total})\n    }\n  }\n\n  this.throwError = function (message) {\n    if (this.onError) {\n      this.onError(message)\n    } else {\n      console.error(message)\n    }\n  }\n\n  this.adaptTextureToZoom = function () {\n    var w = levelsW[ _zoom ] * 416,\n      h = levelsH[ _zoom ] * 416\n\n    w = widths[ _zoom ]\n    h = heights[ _zoom ]\n\n    _wc = Math.ceil(w / maxW)\n    _hc = Math.ceil(h / maxH)\n\n    _canvas = []; _ctx = []\n\n    var ptr = 0\n    for (var y = 0; y < _hc; y++) {\n      for (var x = 0; x < _wc; x++) {\n        var c = document.createElement('canvas')\n        if (x < (_wc - 1)) c.width = maxW; else c.width = w - (maxW * x)\n        if (y < (_hc - 1)) c.height = maxH; else c.height = h - (maxH * y)\n        _canvas.push(c)\n        _ctx.push(c.getContext('2d'))\n        ptr++\n      }\n    }\n  }\n\n  this.composeFromTile = function (x, y, texture) {\n    x *= 512\n    y *= 512\n    var px = Math.floor(x / maxW), py = Math.floor(y / maxH)\n\n    x -= px * maxW\n    y -= py * maxH\n\n    _ctx[ py * _wc + px ].drawImage(texture, 0, 0, texture.width, texture.height, x, y, 512, 512)\n    this.progress()\n  }\n\n  this.progress = function () {\n    _count++\n\n    var p = Math.round(_count * 100 / _total)\n    this.setProgress(_count, _total)\n\n    if (_count === _total) {\n      this.canvas = _canvas\n      this.panoId = _panoId\n      this.zoom = _zoom\n      if (this.onPanoramaLoad) {\n        this.onPanoramaLoad(_canvas[0])\n      }\n    }\n  }\n\n  this.loadFromId = function (id) {\n    _panoId = id\n    this.composePanorama()\n  }\n\n  this.composePanorama = function () {\n    this.setProgress(0, 1)\n\n    var w = levelsW[ _zoom ],\n      h = levelsH[ _zoom ],\n      self = this,\n      url,\n      x,\n      y\n\n    _count = 0\n    _total = w * h\n\n    var self = this\n    for (var y = 0; y < h; y++) {\n      for (var x = 0; x < w; x++) {\n        var url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + _zoom + '&x=' + x + '&y=' + y + '&panoid=' + _panoId + '&nbt&fover=2';\n        (function (x, y) {\n          if (_parameters.useWebGL) {\n            var texture = THREE.ImageUtils.loadTexture(url, null, function () {\n              self.composeFromTile(x, y, texture)\n            })\n          } else {\n            var img = new Image()\n            img.addEventListener('load', function () {\n              self.composeFromTile(x, y, this)\n            })\n            img.crossOrigin = ''\n            img.src = url\n          }\n        })(x, y)\n      }\n    }\n  }\n\n  this.load = function (panoid) {\n    this.loadPano(panoid)\n  }\n\n  this.loadPano = function (id) {\n    var self = this\n    _panoClient.getPanoramaById(id, function (result, status) {\n      if (status === google.maps.StreetViewStatus.OK) {\n        self.result = result\n        if (self.onPanoramaData) self.onPanoramaData(result)\n        // var h = google.maps.geometry.spherical.computeHeading(location, result.location.latLng);\n        // rotation = (result.tiles.centerHeading - h) * Math.PI / 180.0;\n        copyright = result.copyright\n        self.copyright = result.copyright\n        _panoId = result.location.pano\n        self.location = location\n        self.composePanorama()\n      } else {\n        if (self.onNoPanoramaData) self.onNoPanoramaData(status)\n        self.throwError('Could not retrieve panorama for the following reason: ' + status)\n      }\n    })\n  }\n\n  this.setZoom = function (z) {\n    _zoom = z\n    this.adaptTextureToZoom()\n  }\n\n  this.setZoom(_parameters.zoom || 1)\n}; (function () {\n  'use strict'\n\n  /**\n     * Data Image Source\n     * @type {String}\n     */\n  PANOLENS.DataImageSource = 'https://pchen66.github.io/Panolens/asset/icon/'\n\n  /**\n     * Data Image\n     * @memberOf PANOLENS\n     * @enum {string}\n     */\n  PANOLENS.DataImage = {\n    Info: PANOLENS.DataImageSource + 'information.png',\n    Arrow: PANOLENS.DataImageSource + 'arrow-up.png',\n    FullscreenEnter: PANOLENS.DataImageSource + 'fullscreen.png',\n    FullscreenLeave: PANOLENS.DataImageSource + 'fullscreen-exit.png',\n    VideoPlay: PANOLENS.DataImageSource + 'video-play.png',\n    VideoPause: PANOLENS.DataImageSource + 'pause.png',\n    WhiteTile: PANOLENS.DataImageSource + 'tiles.png',\n    ReticleIdle: PANOLENS.DataImageSource + 'reticle-idle.png',\n    Setting: PANOLENS.DataImageSource + 'setting.png',\n    ChevronRight: PANOLENS.DataImageSource + 'chevron-right.png',\n    Check: PANOLENS.DataImageSource + 'check.png',\n    ViewIndicator: PANOLENS.DataImageSource + 'view-indicator.svg',\n    ReticleDwell: PANOLENS.DataImageSource + 'reticle-animation.png'\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Control Index Enum\n\t * @memberOf PANOLENS\n\t * @enum {number}\n\t */\n\n  PANOLENS.Controls = {\n\n    ORBIT: 0,\n\n    DEVICEORIENTATION: 1\n\n  }\n\n  /**\n\t * Effect Mode Enum\n\t * @memberOf PANOLENS\n\t * @enum {number}\n\t */\n  PANOLENS.Modes = {\n\n    /** Unknown */\n    UNKNOWN: 0,\n\n    /** Normal */\n    NORMAL: 1,\n\n    /** Google Cardboard */\n    CARDBOARD: 2,\n\n    /** Stereoscopic **/\n    STEREO: 3\n\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Utility\n\t * @namespace PANOLENS.Utils\n\t * @memberOf PANOLENS\n\t * @type {object}\n\t */\n  PANOLENS.Utils = {}\n\n  PANOLENS.Utils.checkTouchSupported = function () {\n    return window ? 'ontouchstart' in window || window.navigator.msMaxTouchPoints : false\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Image loader with progress based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/ImageLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n  PANOLENS.Utils.ImageLoader = {}\n\n  /**\n\t * Load an image with XMLHttpRequest to provide progress checking\n\t * @param  {string}   url        - An image url\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {HTMLImageElement}    - DOM image element\n\t */\n\n  PANOLENS.Utils.ImageLoader.load = function (url, onLoad, onProgress, onError) {\n    var cached, request, arrayBufferView, blob, urlCreator, image, reference\n\n    // Reference key\n    for (var iconName in PANOLENS.DataImage) {\n      if (PANOLENS.DataImage.hasOwnProperty(iconName) &&\n\t\t\t\turl === PANOLENS.DataImage[ iconName ]) {\n        reference = iconName\n      }\n    }\n\n    // Cached\n    cached = THREE.Cache.get(reference || url)\n\n    if (cached !== undefined) {\n      if (onLoad) {\n        setTimeout(function () {\n          if (onProgress) {\n            onProgress({ loaded: 1, total: 1 })\n          }\n\n          onLoad(cached)\n        }, 0)\n      }\n\n      return cached\n    }\n\n    // Construct a new XMLHttpRequest\n    urlCreator = window.URL || window.webkitURL\n    image = document.createElementNS('http://www.w3.org/1999/xhtml', 'img')\n\n    // Add to cache\n    THREE.Cache.add(reference || url, image)\n\n    function onImageLoaded () {\n      urlCreator.revokeObjectURL(image.src)\n      onLoad && onLoad(image)\n    }\n\n    if (url.indexOf('data:') === 0) {\n      image.addEventListener('load', onImageLoaded, false)\n      image.src = url\n      return image\n    }\n\n    image.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : ''\n\n    request = new XMLHttpRequest()\n    request.open('GET', url, true)\n    request.responseType = 'arraybuffer'\n    request.onprogress = function (event) {\n\t\t    if (event.lengthComputable) {\n\t\t      onProgress && onProgress({ loaded: event.loaded, total: event.total })\n\t\t    }\n    }\n    request.onloadend = function (event) {\n\t\t    arrayBufferView = new Uint8Array(this.response)\n\t\t    blob = new Blob([ arrayBufferView ])\n\n\t\t    image.addEventListener('load', onImageLoaded, false)\n      image.src = urlCreator.createObjectURL(blob)\n    }\n\n    request.send(null)\n  }\n\n  // Enable cache\n  THREE.Cache.enabled = true\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Texture loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/TextureLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n  PANOLENS.Utils.TextureLoader = {}\n\n  /**\n\t * Load image texture\n\t * @param  {string}   url        - An image url\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {THREE.Texture}   \t - Image texture\n\t */\n  PANOLENS.Utils.TextureLoader.load = function (url, onLoad, onProgress, onError) {\n    var texture = new THREE.Texture()\n\n    PANOLENS.Utils.ImageLoader.load(url, function (image) {\n      texture.image = image\n      texture.needsUpdate = true\n\n      onLoad && onLoad(texture)\n    }, onProgress, onError)\n\n    return texture\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Cube Texture Loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/CubeTextureLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n  PANOLENS.Utils.CubeTextureLoader = {}\n\n  /**\n\t * Load 6 images as a cube texture\n\t * @param  {array}   urls        - Array with 6 image urls\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {THREE.CubeTexture}   - Cube texture\n\t */\n  PANOLENS.Utils.CubeTextureLoader.load = function (urls, onLoad, onProgress, onError) {\n    var texture, loaded, progress, all, loadings\n\n    texture = new THREE.CubeTexture([])\n\n    loaded = 0\n    progress = {}\n    all = {}\n\n    urls.map(function (url, index) {\n      PANOLENS.Utils.ImageLoader.load(url, function (image) {\n        texture.images[ index ] = image\n\n        loaded++\n\n        if (loaded === 6) {\n          texture.needsUpdate = true\n\n          onLoad && onLoad(texture)\n        }\n      }, function (event) {\n        progress[ index ] = { loaded: event.loaded, total: event.total }\n\n        all.loaded = 0\n        all.total = 0\n        loadings = 0\n\n        for (var i in progress) {\n          loadings++\n          all.loaded += progress[ i ].loaded\n          all.total += progress[ i ].total\n        }\n\n        if (loadings < 6) {\n          all.total = all.total / loadings * 6\n        }\n\n        onProgress && onProgress(all)\n      }, onError)\n    })\n\n    return texture\n  }\n})()/**\n * Stereographic projection shader\n * based on http://notlion.github.io/streetview-stereographic\n * @author pchen66\n */\n\nPANOLENS.StereographicShader = {\n\n  uniforms: {\n\n    'tDiffuse': { value: new THREE.Texture() },\n    'resolution': { value: 1.0 },\n    'transform': { value: new THREE.Matrix4() },\n    'zoom': { value: 1.0 }\n\n  },\n\n  vertexShader: [\n\n    'varying vec2 vUv;',\n\n    'void main() {',\n\n    'vUv = uv;',\n    'gl_Position = vec4( position, 1.0 );',\n\n    '}'\n\n  ].join('\\n'),\n\n  fragmentShader: [\n\n    'uniform sampler2D tDiffuse;',\n    'uniform float resolution;',\n    'uniform mat4 transform;',\n    'uniform float zoom;',\n\n    'varying vec2 vUv;',\n\n    'const float PI = 3.141592653589793;',\n\n    'void main(){',\n\n    'vec2 position = -1.0 +  2.0 * vUv;',\n\n    'position *= vec2( zoom * resolution, zoom * 0.5 );',\n\n    'float x2y2 = position.x * position.x + position.y * position.y;',\n    'vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );',\n\n    'sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );',\n\n    'vec2 sampleUV = vec2(',\n    '(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,',\n    '(asin(sphere_pnt.z) / PI + 0.5)',\n    ');',\n\n    'gl_FragColor = texture2D( tDiffuse, sampleUV );',\n\n    '}'\n\n  ].join('\\n')\n\n}; (function () {\n  'use strict'\n\n  /**\n\t * Skeleton panorama derived from THREE.Mesh\n\t * @constructor\n\t * @param {THREE.Geometry} geometry - The geometry for this panorama\n\t * @param {THREE.Material} material - The material for this panorama\n\t */\n  PANOLENS.Panorama = function (geometry, material) {\n    THREE.Mesh.call(this)\n\n    this.type = 'panorama'\n\n    this.ImageQualityLow = 1\n    this.ImageQualityFair = 2\n    this.ImageQualityMedium = 3\n    this.ImageQualityHigh = 4\n    this.ImageQualitySuperHigh = 5\n\n    this.animationDuration = 1000\n\n    this.defaultInfospotSize = 350\n\n    this.container = undefined\n\n    this.loaded = false\n\n    this.linkedSpots = []\n\n    this.isInfospotVisible = false\n\n    this.linkingImageURL = undefined\n    this.linkingImageScale = undefined\n\n    this.geometry = geometry\n\n    this.material = material\n    this.material.side = THREE.DoubleSide\n    this.material.visible = false\n\n    this.scale.x *= -1\n\n    this.infospotAnimation = new TWEEN.Tween(this).to({}, this.animationDuration / 2)\n\n    this.addEventListener('load', this.fadeIn.bind(this))\n    this.addEventListener('panolens-container', this.setContainer.bind(this))\n    this.addEventListener('click', this.onClick.bind(this))\n\n    this.setupTransitions()\n  }\n\n  PANOLENS.Panorama.prototype = Object.create(THREE.Mesh.prototype)\n\n  PANOLENS.Panorama.prototype.constructor = PANOLENS.Panorama\n\n  /**\n\t * Adding an object\n\t * To counter the scale.x = -1, it will automatically add an\n\t * empty object with inverted scale on x\n\t * @param {THREE.Object3D} object - The object to be added\n\t */\n  PANOLENS.Panorama.prototype.add = function (object) {\n    var scope, invertedObject\n\n    scope = this\n\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[ i ])\n      }\n\n      return this\n    }\n\n    // In case of infospots\n    if (object instanceof PANOLENS.Infospot) {\n      invertedObject = object\n\n      if (object.dispatchEvent) {\n        this.container && object.dispatchEvent({ type: 'panolens-container', container: this.container })\n\n        object.dispatchEvent({ type: 'panolens-infospot-focus',\n          method: function (vector, duration, easing) {\n            /**\n\t\t        \t * Infospot focus handler event\n\t\t        \t * @type {object}\n\t\t        \t * @event PANOLENS.Panorama#panolens-viewer-handler\n\t\t        \t * @property {string} method - Viewer function name\n\t\t        \t * @property {*} data - The argument to be passed into the method\n\t\t        \t */\n\t\t        \tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'tweenControlCenter', data: [ vector, duration, easing ] })\n          } })\n      }\n    } else {\n      // Counter scale.x = -1 effect\n      invertedObject = new THREE.Object3D()\n      invertedObject.scale.x = -1\n      invertedObject.scalePlaceHolder = true\n      invertedObject.add(object)\n    }\n\n    THREE.Object3D.prototype.add.call(this, invertedObject)\n  }\n\n  PANOLENS.Panorama.prototype.load = function () {\n    this.onLoad()\n  }\n\n  /**\n\t * Click event handler\n\t * @param  {object} event - Click event\n\t * @fires PANOLENS.Infospot#dismiss\n\t */\n  PANOLENS.Panorama.prototype.onClick = function (event) {\n    if (event.intersects && event.intersects.length === 0) {\n      this.traverse(function (object) {\n        /**\n\t\t\t\t * Dimiss event\n\t\t\t\t * @type {object}\n\t\t\t\t * @event PANOLENS.Infospot#dismiss\n\t\t\t\t */\n        object.dispatchEvent({ type: 'dismiss' })\n      })\n    }\n  }\n\n  /**\n\t * Set container of this panorama\n\t * @param {HTMLElement|object} data - Data with container information\n\t * @fires PANOLENS.Infospot#panolens-container\n\t */\n  PANOLENS.Panorama.prototype.setContainer = function (data) {\n    var container\n\n    if (data instanceof HTMLElement) {\n      container = data\n    } else if (data && data.container) {\n      container = data.container\n    }\n\n    if (container) {\n      this.children.forEach(function (child) {\n        if (child instanceof PANOLENS.Infospot && child.dispatchEvent) {\n          /**\n\t\t\t\t\t * Set container event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @event PANOLENS.Infospot#panolens-container\n\t\t\t\t\t * @property {HTMLElement} container - The container of this panorama\n\t\t\t\t\t */\n          child.dispatchEvent({ type: 'panolens-container', container: container })\n        }\n      })\n\n      this.container = container\n    }\n  }\n\n  /**\n\t * This will be called when panorama is loaded\n\t * @fires PANOLENS.Panorama#load\n\t */\n  PANOLENS.Panorama.prototype.onLoad = function () {\n    this.loaded = true\n\n    /**\n\t\t * Load panorama event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#load\n\t\t */\n    this.dispatchEvent({ type: 'load' })\n  }\n\n  /**\n\t * This will be called when panorama is in progress\n\t * @fires PANOLENS.Panorama#progress\n\t */\n  PANOLENS.Panorama.prototype.onProgress = function (progress) {\n    /**\n\t\t * Loading panorama progress event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#progress\n\t \t * @property {object} progress - The progress object containing loaded and total amount\n\t\t */\n    this.dispatchEvent({ type: 'progress', progress: progress })\n  }\n\n  /**\n\t * This will be called when panorama loading has error\n\t * @fires PANOLENS.Panorama#error\n\t */\n  PANOLENS.Panorama.prototype.onError = function () {\n    /**\n\t\t * Loading panorama error event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#error\n\t\t */\n    this.dispatchEvent({ type: 'error' })\n  }\n\n  /**\n\t * Get zoom level based on window width\n\t * @return {number} zoom level indicating image quality\n\t */\n  PANOLENS.Panorama.prototype.getZoomLevel = function () {\n    var zoomLevel\n\n    if (window.innerWidth <= 800) {\n      zoomLevel = this.ImageQualityFair\n    } else if (window.innerWidth > 800 && window.innerWidth <= 1280) {\n      zoomLevel = this.ImageQualityMedium\n    } else if (window.innerWidth > 1280 && window.innerWidth <= 1920) {\n      zoomLevel = this.ImageQualityHigh\n    } else if (window.innerWidth > 1920) {\n      zoomLevel = this.ImageQualitySuperHigh\n    } else {\n      zoomLevel = this.ImageQualityLow\n    }\n\n    return zoomLevel\n  }\n\n  /**\n\t * Update texture of a panorama\n\t * @param {THREE.Texture} texture - Texture to be updated\n\t */\n  PANOLENS.Panorama.prototype.updateTexture = function (texture) {\n    this.material.map = texture\n\n    this.material.needsUpdate = true\n  }\n\n  /**\n\t * Toggle visibility of infospots in this panorama\n\t * @param  {boolean} isVisible - Visibility of infospots\n\t * @param  {number} delay - Delay in milliseconds to change visibility\n\t * @fires PANOLENS.Panorama#infospot-animation-complete\n\t */\n  PANOLENS.Panorama.prototype.toggleInfospotVisibility = function (isVisible, delay) {\n    delay = (delay !== undefined) ? delay : 0\n\n    var scope, visible\n\n    scope = this\n    visible = (isVisible !== undefined) ? isVisible : (!this.isInfospotVisible)\n\n    this.traverse(function (object) {\n      if (object instanceof PANOLENS.Infospot) {\n        visible ? object.show(delay) : object.hide(delay)\n      }\n    })\n\n    this.isInfospotVisible = visible\n\n    // Animation complete event\n    this.infospotAnimation.onComplete(function () {\n      /**\n\t\t\t * Complete toggling infospot visibility\n\t\t\t * @event PANOLENS.Panorama#infospot-animation-complete\n\t\t\t * @type {object}\n\t\t\t */\n      scope.dispatchEvent({ type: 'infospot-animation-complete', visible: visible })\n    }).delay(delay).start()\n  }\n\n  /**\n\t * Set image of this panorama's linking infospot\n\t * @param {string} url   - Url to the image asset\n\t * @param {number} scale - Scale factor of the infospot\n\t */\n  PANOLENS.Panorama.prototype.setLinkingImage = function (url, scale) {\n    this.linkingImageURL = url\n    this.linkingImageScale = scale\n  }\n\n  /**\n\t * Link one-way panorama\n\t * @param  {PANOLENS.Panorama} pano  - The panorama to be linked to\n\t * @param  {THREE.Vector3} position - The position of infospot which navigates to the pano\n\t * @param  {number} [imageScale=300] - Image scale of linked infospot\n\t * @param  {string} [imageSrc=PANOLENS.DataImage.Arrow] - The image source of linked infospot\n\t */\n  PANOLENS.Panorama.prototype.link = function (pano, position, imageScale, imageSrc) {\n    var scope = this, spot, scale, img\n\n    this.visible = true\n\n    if (!position) {\n      console.warn('Please specify infospot position for linking')\n\n      return\n    }\n\n    // Infospot scale\n    if (imageScale !== undefined) {\n      scale = imageScale\n    } else if (pano.linkingImageScale !== undefined) {\n      scale = pano.linkingImageScale\n    } else {\n      scale = 300\n    }\n\n    // Infospot image\n    if (imageSrc) {\n      img = imageSrc\n    } else if (pano.linkingImageURL) {\n      img = pano.linkingImageURL\n    } else {\n      img = PANOLENS.DataImage.Arrow\n    }\n\n    // Creates a new infospot\n    spot = new PANOLENS.Infospot(scale, img)\n    spot.position.copy(position)\n    spot.toPanorama = pano\n    spot.addEventListener('click', function () {\n        \t/**\n        \t * Viewer handler event\n        \t * @type {object}\n        \t * @event PANOLENS.Panorama#panolens-viewer-handler\n        \t * @property {string} method - Viewer function name\n        \t * @property {*} data - The argument to be passed into the method\n        \t */\n        \tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setPanorama', data: pano })\n    })\n\n    this.linkedSpots.push(spot)\n\n    this.add(spot)\n\n    this.visible = false\n  }\n\n  PANOLENS.Panorama.prototype.reset = function () {\n    this.children.length = 0\n  }\n\n  PANOLENS.Panorama.prototype.setupTransitions = function () {\n    this.fadeInAnimation = new TWEEN.Tween(this.material)\n      .easing(TWEEN.Easing.Quartic.Out)\n      .onStart(function () {\n        this.visible = true\n        this.material.visible = true\n\n        /**\n\t\t\t\t * Enter panorama fade in start event\n\t\t\t\t * @event PANOLENS.Panorama#enter-fade-start\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-fade-start' })\n      }.bind(this))\n\n    this.fadeOutAnimation = new TWEEN.Tween(this.material)\n      .easing(TWEEN.Easing.Quartic.Out)\n      .onComplete(function () {\n        this.visible = false\n        this.material.visible = true\n\n        /**\n\t\t\t\t * Leave panorama complete event\n\t\t\t\t * @event PANOLENS.Panorama#leave-complete\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'leave-complete' })\n      }.bind(this))\n\n    this.enterTransition = new TWEEN.Tween(this)\n      .easing(TWEEN.Easing.Quartic.Out)\n      .onComplete(function () {\n        /**\n\t\t\t\t * Enter panorama and animation complete event\n\t\t\t\t * @event PANOLENS.Panorama#enter-animation-complete\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-animation-complete' })\n      }.bind(this))\n      .start()\n\n    this.leaveTransition = new TWEEN.Tween(this)\n      .easing(TWEEN.Easing.Quartic.Out)\n  }\n\n  /**\n\t * Start fading in animation\n\t * @fires PANOLENS.Panorama#enter-fade-complete\n\t */\n  PANOLENS.Panorama.prototype.fadeIn = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration\n\n    this.fadeOutAnimation.stop()\n    this.fadeInAnimation\n      .to({ opacity: 1 }, duration)\n      .onComplete(function () {\n        this.toggleInfospotVisibility(true, duration / 2)\n\n        /**\n\t\t\t\t * Enter panorama fade complete event\n\t\t\t\t * @event PANOLENS.Panorama#enter-fade-complete\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-fade-complete' })\n      }.bind(this))\n      .start()\n  }\n\n  /**\n\t * Start fading out animation\n\t */\n  PANOLENS.Panorama.prototype.fadeOut = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration\n\n    this.fadeInAnimation.stop()\n    this.fadeOutAnimation.to({ opacity: 0 }, duration).start()\n  }\n\n  /**\n\t * This will be called when entering a panorama\n\t * @fires PANOLENS.Panorama#enter\n\t * @fires PANOLENS.Panorama#enter-animation-start\n\t */\n  PANOLENS.Panorama.prototype.onEnter = function () {\n    var duration = this.animationDuration\n\n    this.leaveTransition.stop()\n    this.enterTransition\n      .to({}, duration)\n      .onStart(function () {\n        /**\n\t\t\t\t * Enter panorama and animation starting event\n\t\t\t\t * @event PANOLENS.Panorama#enter-animation-start\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-animation-start' })\n\n        if (this.loaded) {\n          this.fadeIn(duration)\n        } else {\n          this.load()\n        }\n      }.bind(this))\n      .start()\n\n    /**\n\t\t * Enter panorama event\n\t\t * @event PANOLENS.Panorama#enter\n\t\t * @type {object}\n\t\t */\n    this.dispatchEvent({ type: 'enter' })\n  }\n\n  /**\n\t * This will be called when leaving a panorama\n\t * @fires PANOLENS.Panorama#leave\n\t */\n  PANOLENS.Panorama.prototype.onLeave = function () {\n    var duration = this.animationDuration\n\n    this.enterTransition.stop()\n    this.leaveTransition\n      .to({}, duration)\n      .onStart(function () {\n        /**\n\t\t\t\t * Leave panorama and animation starting event\n\t\t\t\t * @event PANOLENS.Panorama#leave-animation-start\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'leave-animation-start' })\n\n        this.fadeOut(duration)\n        this.toggleInfospotVisibility(false)\n      }.bind(this))\n      .start()\n\n    /**\n\t\t * Leave panorama event\n\t\t * @event PANOLENS.Panorama#leave\n\t\t * @type {object}\n\t\t */\n    this.dispatchEvent({ type: 'leave' })\n  }\n\n  /**\n\t * Dispose panorama\n\t */\n  PANOLENS.Panorama.prototype.dispose = function () {\n    /**\n    \t * On panorama dispose handler\n    \t * @type {object}\n    \t * @event PANOLENS.Panorama#panolens-viewer-handler\n    \t * @property {string} method - Viewer function name\n    \t * @property {*} data - The argument to be passed into the method\n    \t */\n    \tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this })\n\n    // recursive disposal on 3d objects\n    function recursiveDispose (object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i])\n        object.remove(object.children[i])\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose()\n      }\n\n      object.geometry && object.geometry.dispose()\n      object.material && object.material.dispose()\n    }\n\n    recursiveDispose(this)\n\n    if (this.parent) {\n      this.parent.remove(this)\n    }\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Equirectangular based image panorama\n\t * @constructor\n\t * @param {string} image - Image url or HTMLImageElement\n\t * @param {number} [radius=5000] - Radius of panorama\n\t */\n  PANOLENS.ImagePanorama = function (image, radius) {\n    radius = radius || 5000\n\n    var geometry = new THREE.SphereGeometry(radius, 60, 40),\n      material = new THREE.MeshBasicMaterial({ opacity: 0, transparent: true })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n\n    this.src = image\n  }\n\n  PANOLENS.ImagePanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.ImagePanorama.prototype.constructor = PANOLENS.ImagePanorama\n\n  /**\n\t * Load image asset\n\t * @param  {*} src - Url or image element\n\t */\n  PANOLENS.ImagePanorama.prototype.load = function (src) {\n    src = src || this.src\n\n    if (!src) {\n      console.warn('Image source undefined')\n    } else if (typeof src === 'string') {\n      PANOLENS.Utils.TextureLoader.load(src, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this))\n    } else if (src instanceof HTMLImageElement) {\n      this.onLoad(new THREE.Texture(src))\n    }\n  }\n\n  /**\n\t * This will be called when image is loaded\n\t * @param  {THREE.Texture} texture - Texture to be updated\n\t */\n  PANOLENS.ImagePanorama.prototype.onLoad = function (texture) {\n    texture.minFilter = texture.magFilter = THREE.LinearFilter\n\n    texture.needsUpdate = true\n\n    this.updateTexture(texture)\n\n    // Call onLoad after second frame being painted\n    window.requestAnimationFrame(function () {\n      window.requestAnimationFrame(function () {\n        PANOLENS.Panorama.prototype.onLoad.call(this)\n      }.bind(this))\n    }.bind(this))\n  }\n\n  PANOLENS.ImagePanorama.prototype.reset = function () {\n    PANOLENS.Panorama.prototype.reset.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Google streetview panorama\n\t *\n\t * [How to get Panorama ID]{@link http://stackoverflow.com/questions/29916149/google-maps-streetview-how-to-get-panorama-id}\n\t * @constructor\n\t * @param {string} panoId - Panorama id from Google Streetview\n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n  PANOLENS.GoogleStreetviewPanorama = function (panoId, radius) {\n    PANOLENS.ImagePanorama.call(this, undefined, radius)\n\n    this.panoId = panoId\n\n    this.gsvLoader = undefined\n\n    this.loadRequested = false\n\n    this.setupGoogleMapAPI()\n  }\n\n  PANOLENS.GoogleStreetviewPanorama.prototype = Object.create(PANOLENS.ImagePanorama.prototype)\n\n  PANOLENS.GoogleStreetviewPanorama.constructor = PANOLENS.GoogleStreetviewPanorama\n\n  /**\n\t * Load Google Street View by panorama id\n\t * @param {string} panoId - Gogogle Street View panorama id\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.load = function (panoId) {\n    this.loadRequested = true\n\n    panoId = (panoId || this.panoId) || {}\n\n    if (panoId && this.gsvLoader) {\n      this.loadGSVLoader(panoId)\n    } else {\n      this.gsvLoader = {}\n    }\n  }\n\n  /**\n\t * Setup Google Map API\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI = function () {\n    var script = document.createElement('script')\n    script.src = 'https://maps.googleapis.com/maps/api/js'\n    script.onreadystatechange = this.setGSVLoader.bind(this)\n    \tscript.onload = this.setGSVLoader.bind(this)\n\n    document.getElementsByTagName('head')[0].appendChild(script)\n  }\n\n  /**\n\t * Set GSV Loader\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader = function () {\n    this.gsvLoader = new GSVPANO.PanoLoader()\n\n    if (this.gsvLoader === {} || this.loadRequested) {\n      this.load()\n    }\n  }\n\n  /**\n\t * Get GSV Loader\n\t * @return {object} GSV Loader instance\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader = function () {\n    return this.gsvLoader\n  }\n\n  /**\n\t * Load GSV Loader\n\t * @param  {string} panoId - Gogogle Street View panorama id\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader = function (panoId) {\n    this.loadRequested = false\n\n    this.gsvLoader.onProgress = this.onProgress.bind(this)\n\n    this.gsvLoader.onPanoramaLoad = this.onLoad.bind(this)\n\n    this.gsvLoader.setZoom(this.getZoomLevel())\n\n    this.gsvLoader.load(panoId)\n\n    this.gsvLoader.loaded = true\n  }\n\n  /**\n\t * This will be called when panorama is loaded\n\t * @param  {HTMLCanvasElement} canvas - Canvas where the tiles have been drawn\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.onLoad = function (canvas) {\n    if (!this.gsvLoader) { return }\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, new THREE.Texture(canvas))\n  }\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.reset = function () {\n    this.gsvLoader = undefined\n\n    PANOLENS.ImagePanorama.prototype.reset.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Cubemap-based panorama\n\t * @constructor\n\t * @param {array} images - An array of cubetexture containing six images\n\t * @param {number} [edgeLength=10000] - The length of cube's edge\n\t */\n  PANOLENS.CubePanorama = function (images, edgeLength) {\n    var shader, geometry, material\n\n    this.images = images || []\n\n    edgeLength = edgeLength || 10000\n    shader = JSON.parse(JSON.stringify(THREE.ShaderLib[ 'cube' ]))\n\n    geometry = new THREE.BoxGeometry(edgeLength, edgeLength, edgeLength)\n    material = new THREE.ShaderMaterial({\n\n      fragmentShader: shader.fragmentShader,\n      vertexShader: shader.vertexShader,\n      uniforms: shader.uniforms,\n      side: THREE.BackSide\n\n    })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n  }\n\n  PANOLENS.CubePanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.CubePanorama.prototype.constructor = PANOLENS.CubePanorama\n\n  /**\n\t * Load 6 images and bind listeners\n\t */\n  PANOLENS.CubePanorama.prototype.load = function () {\n    PANOLENS.Utils.CubeTextureLoader.load(\n\n      this.images,\n\n      this.onLoad.bind(this),\n      this.onProgress.bind(this),\n      this.onError.bind(this)\n\n    )\n  }\n\n  /**\n\t * This will be called when 6 textures are ready\n\t * @param  {THREE.CubeTexture} texture - Cube texture\n\t */\n  PANOLENS.CubePanorama.prototype.onLoad = function (texture) {\n    this.material.uniforms[ 'tCube' ].value = texture\n\n    PANOLENS.Panorama.prototype.onLoad.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Basic panorama with 6 faces tile images\n\t * @constructor\n\t * @param {number} [edgeLength=10000] - The length of cube's edge\n\t */\n  PANOLENS.BasicPanorama = function (edgeLength) {\n    var tile = PANOLENS.DataImage.WhiteTile\n\n    PANOLENS.CubePanorama.call(this, [ tile, tile, tile, tile, tile, tile ], edgeLength)\n  }\n\n  PANOLENS.BasicPanorama.prototype = Object.create(PANOLENS.CubePanorama.prototype)\n\n  PANOLENS.BasicPanorama.prototype.constructor = PANOLENS.BasicPanorama\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Video Panorama\n\t * @constructor\n\t * @param {string} src - Equirectangular video url\n\t * @param {object} [options] - Option for video settings\n\t * @param {HTMLElement} [options.videoElement] - HTML5 video element contains the video\n\t * @param {boolean} [options.loop=true] - Specify if the video should loop in the end\n\t * @param {boolean} [options.muted=false] - Mute the video or not\n\t * @param {boolean} [options.autoplay=false] - Specify if the video should auto play\n\t * @param {boolean} [options.playsinline=true] - Specify if video should play inline for iOS. If you want it to auto play inline, set both autoplay and muted options to true\n\t * @param {string} [options.crossOrigin=\"anonymous\"] - Sets the cross-origin attribute for the video, which allows for cross-origin videos in some browsers (Firefox, Chrome). Set to either \"anonymous\" or \"use-credentials\".\n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n  PANOLENS.VideoPanorama = function (src, options, radius) {\n    radius = radius || 5000\n\n    var geometry = new THREE.SphereGeometry(radius, 60, 40),\n      material = new THREE.MeshBasicMaterial({ opacity: 0, transparent: true })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n\n    this.src = src\n    this.options = options || {}\n    this.options.playsinline = this.options.playsinline !== false\n\n    this.videoElement = undefined\n    this.videoRenderObject = undefined\n    this.videoProgress = 0\n\n    this.isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent)\n    this.isMobile = this.isIOS || /Android|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent)\n\n    this.addEventListener('leave', this.pauseVideo.bind(this))\n    this.addEventListener('enter-fade-start', this.resumeVideoProgress.bind(this))\n    this.addEventListener('video-toggle', this.toggleVideo.bind(this))\n    this.addEventListener('video-time', this.setVideoCurrentTime.bind(this))\n  }\n\n  PANOLENS.VideoPanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.VideoPanorama.constructor = PANOLENS.VideoPanorama\n\n  /**\n\t * Load video panorama\n\t * @param  {string} src     - The video url\n\t * @param  {object} options - Option object containing videoElement\n\t * @fires  PANOLENS.Panorama#panolens-viewer-handler\n\t */\n  PANOLENS.VideoPanorama.prototype.load = function (src, options) {\n    var scope = this\n\n    src = (src || this.src) || ''\n    options = (options || this.options) || {}\n\n    this.videoElement = options.videoElement || document.createElement('video')\n\n    this.videoElement.muted = options.muted || false\n    this.videoElement.loop = (options.loop !== undefined) ? options.loop : true\n    this.videoElement.autoplay = (options.autoplay !== undefined) ? options.autoplay : false\n    this.videoElement.crossOrigin = (options.crossOrigin !== undefined) ? options.crossOrigin : 'anonymous'\n\n    // iphone inline player\n    if (options.playsinline) {\n      this.videoElement.setAttribute('playsinline', '')\n      this.videoElement.setAttribute('webkit-playsinline', '')\n    }\n\n    var onloadeddata = function () {\n      scope.onProgress({ loaded: 1, total: 1 })\n      scope.setVideoTexture(scope.videoElement)\n\n      if (scope.videoElement.autoplay) {\n        /**\n\t\t\t\t * Viewer handler event\n\t\t\t\t * @type {object}\n\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t */\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false })\n      }\n\n      // For mobile silent autoplay\n      if (scope.isMobile) {\n        if (scope.videoElement.autoplay && scope.videoElement.muted) {\n          /**\n\t\t\t\t\t * Viewer handler event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t\t */\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false })\n        } else {\n          /**\n\t\t\t\t\t * Viewer handler event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t\t */\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true })\n        }\n      }\n\n      scope.onLoad()\n    }\n\n    /**\n\t\t * Ready state of the audio/video element\n\t\t * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready\n\t\t * 1 = HAVE_METADATA - metadata for the audio/video is ready\n\t\t * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond\n\t\t * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available\n\t\t * 4 = HAVE_ENOUGH_DATA - enough data available to start playing\n\t\t */\n    if (this.videoElement.readyState > 2) {\n      onloadeddata()\n    } else {\n      if (!this.videoElement.querySelectorAll('source').length || !this.videoElement.src) {\n        this.videoElement.src = src\n      }\n\n      this.videoElement.load()\n    }\n\n    this.videoElement.onloadeddata = onloadeddata\n\n    this.videoElement.ontimeupdate = function (event) {\n      scope.videoProgress = this.duration >= 0 ? this.currentTime / this.duration : 0\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'onVideoUpdate'\n\t\t\t * @property {number} data - The percentage of video progress. Range from 0.0 to 1.0\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: scope.videoProgress })\n    }\n\n    this.videoElement.addEventListener('ended', function () {\n      if (!scope.options.loop) {\n        scope.resetVideo()\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true })\n      }\n    }, false)\n  }\n\n  /**\n\t * Set video texture\n\t * @param {HTMLVideoElement} video  - The html5 video element\n\t * @fires PANOLENS.Panorama#panolens-viewer-handler\n\t */\n  PANOLENS.VideoPanorama.prototype.setVideoTexture = function (video) {\n    var videoTexture, videoRenderObject, scene\n\n    if (!video) return\n\n    videoTexture = new THREE.VideoTexture(video)\n    videoTexture.minFilter = THREE.LinearFilter\n    videoTexture.magFilter = THREE.LinearFilter\n    videoTexture.format = THREE.RGBFormat\n\n    videoRenderObject = {\n\n      video: video,\n      videoTexture: videoTexture\n\n    }\n\n    if (this.isIOS) {\n      enableInlineVideo(video)\n    }\n\n    this.updateTexture(videoTexture)\n\n    this.videoRenderObject = videoRenderObject\n  }\n\n  PANOLENS.VideoPanorama.prototype.reset = function () {\n    this.videoElement = undefined\n\n    PANOLENS.Panorama.prototype.reset.call(this)\n  }\n\n  /**\n\t * Check if video is paused\n\t * @return {boolean} - is video paused or not\n\t */\n  PANOLENS.VideoPanorama.prototype.isVideoPaused = function () {\n    return this.videoRenderObject.video.paused\n  }\n\n  /**\n\t * Toggle video to play or pause\n\t */\n  PANOLENS.VideoPanorama.prototype.toggleVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      if (this.isVideoPaused()) {\n        this.videoRenderObject.video.play()\n      } else {\n        this.videoRenderObject.video.pause()\n      }\n    }\n  }\n\n  /**\n\t * Set video currentTime\n\t * @param {object} event - Event contains percentage. Range from 0.0 to 1.0\n\t */\n  PANOLENS.VideoPanorama.prototype.setVideoCurrentTime = function (event) {\n    if (this.videoRenderObject && this.videoRenderObject.video && !Number.isNaN(event.percentage) && event.percentage !== 1) {\n      this.videoRenderObject.video.currentTime = this.videoRenderObject.video.duration * event.percentage\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: event.percentage })\n    }\n  }\n\n  /**\n\t * Play video\n\t */\n  PANOLENS.VideoPanorama.prototype.playVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoPaused()) {\n      this.videoRenderObject.video.play()\n    }\n\n    /**\n\t\t * Play event\n\t\t * @type {object}\n\t\t * @event 'play'\n\t\t * */\n    this.dispatchEvent({ type: 'play' })\n  }\n\n  /**\n\t * Pause video\n\t */\n  PANOLENS.VideoPanorama.prototype.pauseVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoPaused()) {\n      this.videoRenderObject.video.pause()\n    }\n\n    /**\n\t\t * Pause event\n\t\t * @type {object}\n\t\t * @event 'pause'\n\t\t * */\n    this.dispatchEvent({ type: 'pause' })\n  }\n\n  /**\n\t * Resume video\n\t */\n  PANOLENS.VideoPanorama.prototype.resumeVideoProgress = function () {\n    if (this.videoElement.autoplay && !this.isMobile) {\n      this.playVideo()\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t */\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false })\n    } else {\n      this.pauseVideo()\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t */\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true })\n    }\n\n    this.setVideoCurrentTime({ percentage: this.videoProgress })\n  }\n\n  /**\n\t * Reset video at stating point\n\t */\n  PANOLENS.VideoPanorama.prototype.resetVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      this.setVideoCurrentTime({ percentage: 0 })\n    }\n  }\n\n  /**\n\t* Check if video is muted\n\t* @return {boolean} - is video muted or not\n\t*/\n  PANOLENS.VideoPanorama.prototype.isVideoMuted = function () {\n    return this.videoRenderObject.video.muted\n  }\n\n  /**\n\t * Mute video\n\t */\n  PANOLENS.VideoPanorama.prototype.muteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = true\n    }\n\n    this.dispatchEvent({ type: 'volumechange' })\n  }\n\n  /**\n\t * Unmute video\n\t */\n  PANOLENS.VideoPanorama.prototype.unmuteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = false\n    }\n\n    this.dispatchEvent({ type: 'volumechange' })\n  }\n\n  /**\n\t * Returns the video element\n\t */\n  PANOLENS.VideoPanorama.prototype.getVideoElement = function () {\n    return this.videoRenderObject.video\n  }\n\n  /**\n\t * Dispose video panorama\n\t */\n  PANOLENS.VideoPanorama.prototype.dispose = function () {\n    this.resetVideo()\n    this.pauseVideo()\n\n    this.removeEventListener('leave', this.pauseVideo.bind(this))\n    this.removeEventListener('enter-fade-start', this.resumeVideoProgress.bind(this))\n    this.removeEventListener('video-toggle', this.toggleVideo.bind(this))\n    this.removeEventListener('video-time', this.setVideoCurrentTime.bind(this))\n\n    PANOLENS.Panorama.prototype.dispose.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Empty panorama\n\t * @constructor\n\t * @param {number} [radius=5000] - Radius of panorama\n\t */\n  PANOLENS.EmptyPanorama = function (radius) {\n    radius = radius || 5000\n\n    var geometry = new THREE.Geometry(),\n      material = new THREE.MeshBasicMaterial({\n        color: 0x000000, opacity: 1, transparent: true\n      })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n  }\n\n  PANOLENS.EmptyPanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.EmptyPanorama.prototype.constructor = PANOLENS.EmptyPanorama\n})(); (function () {\n  /**\n\t * Little Planet\n\t * @constructor\n\t * @param {string} type \t\t- Type of little planet basic class\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n  PANOLENS.LittlePlanet = function (type, source, size, ratio) {\n    type = type || 'image'\n\n    type === 'image' && PANOLENS.ImagePanorama.call(this, source, size)\n\n    this.size = size || 10000\n    this.ratio = ratio || 0.5\n    this.EPS = 0.000001\n    this.frameId\n\n    this.geometry = this.createGeometry()\n    this.material = this.createMaterial(this.size)\n\n    this.dragging = false\n    this.userMouse = new THREE.Vector2()\n\n    this.quatA = new THREE.Quaternion()\n    this.quatB = new THREE.Quaternion()\n    this.quatCur = new THREE.Quaternion()\n    this.quatSlerp = new THREE.Quaternion()\n\n    this.vectorX = new THREE.Vector3(1, 0, 0)\n    this.vectorY = new THREE.Vector3(0, 1, 0)\n\n    this.addEventListener('window-resize', this.onWindowResize)\n  }\n\n  PANOLENS.LittlePlanet.prototype = Object.create(PANOLENS.ImagePanorama.prototype)\n\n  PANOLENS.LittlePlanet.prototype.constructor = PANOLENS.LittlePlanet\n\n  PANOLENS.LittlePlanet.prototype.createGeometry = function () {\n    return new THREE.PlaneGeometry(this.size, this.size * this.ratio)\n  }\n\n  PANOLENS.LittlePlanet.prototype.createMaterial = function (size) {\n    var uniforms = PANOLENS.StereographicShader.uniforms\n    uniforms.zoom.value = size\n\n    return new THREE.ShaderMaterial({\n\n      uniforms: uniforms,\n      vertexShader: PANOLENS.StereographicShader.vertexShader,\n      fragmentShader: PANOLENS.StereographicShader.fragmentShader\n\n    })\n  }\n\n  PANOLENS.LittlePlanet.prototype.registerMouseEvents = function () {\n    this.container.addEventListener('mousedown', this.onMouseDown.bind(this), false)\n    this.container.addEventListener('mousemove', this.onMouseMove.bind(this), false)\n    this.container.addEventListener('mouseup', this.onMouseUp.bind(this), false)\n    this.container.addEventListener('touchstart', this.onMouseDown.bind(this), false)\n    this.container.addEventListener('touchmove', this.onMouseMove.bind(this), false)\n    this.container.addEventListener('touchend', this.onMouseUp.bind(this), false)\n    this.container.addEventListener('mousewheel', this.onMouseWheel.bind(this), false)\n    this.container.addEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false)\n    this.container.addEventListener('contextmenu', this.onContextMenu.bind(this), false)\n  }\n\n  PANOLENS.LittlePlanet.prototype.unregisterMouseEvents = function () {\n    this.container.removeEventListener('mousedown', this.onMouseDown.bind(this), false)\n    this.container.removeEventListener('mousemove', this.onMouseMove.bind(this), false)\n    this.container.removeEventListener('mouseup', this.onMouseUp.bind(this), false)\n    this.container.removeEventListener('touchstart', this.onMouseDown.bind(this), false)\n    this.container.removeEventListener('touchmove', this.onMouseMove.bind(this), false)\n    this.container.removeEventListener('touchend', this.onMouseUp.bind(this), false)\n    this.container.removeEventListener('mousewheel', this.onMouseWheel.bind(this), false)\n    this.container.removeEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false)\n    this.container.removeEventListener('contextmenu', this.onContextMenu.bind(this), false)\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseDown = function (event) {\n    var x = (event.clientX >= 0) ? event.clientX : event.touches[ 0 ].clientX\n    var y = (event.clientY >= 0) ? event.clientY : event.touches[ 0 ].clientY\n\n    var inputCount = (event.touches && event.touches.length) || 1\n\n    switch (inputCount) {\n      case 1:\n\n        this.dragging = true\n        this.userMouse.set(x, y)\n\n        break\n\n      case 2:\n\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n        this.userMouse.pinchDistance = distance\n\n        break\n\n      default:\n\n        break\n    }\n\n    this.onUpdateCallback()\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseMove = function (event) {\n    var x = (event.clientX >= 0) ? event.clientX : event.touches[ 0 ].clientX\n    var y = (event.clientY >= 0) ? event.clientY : event.touches[ 0 ].clientY\n\n    var inputCount = (event.touches && event.touches.length) || 1\n\n    switch (inputCount) {\n      case 1:\n\n        var angleX = THREE.Math.degToRad(x - this.userMouse.x) * 0.4\n        var angleY = THREE.Math.degToRad(y - this.userMouse.y) * 0.4\n\n        if (this.dragging) {\n          this.quatA.setFromAxisAngle(this.vectorY, angleX)\n          this.quatB.setFromAxisAngle(this.vectorX, angleY)\n          this.quatCur.multiply(this.quatA).multiply(this.quatB)\n          this.userMouse.set(x, y)\n        }\n\n        break\n\n      case 2:\n\n        var uniforms = this.material.uniforms\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n\n        this.addZoomDelta(this.userMouse.pinchDistance - distance)\n\n        break\n\n      default:\n\n        break\n    }\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseUp = function (event) {\n    this.dragging = false\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseWheel = function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    var delta = 0\n\n    if (event.wheelDelta !== undefined) { // WebKit / Opera / Explorer 9\n      delta = event.wheelDelta\n    } else if (event.detail !== undefined) { // Firefox\n      delta = -event.detail\n    }\n\n    this.addZoomDelta(delta)\n    this.onUpdateCallback()\n  }\n\n  PANOLENS.LittlePlanet.prototype.addZoomDelta = function (delta) {\n    var uniforms = this.material.uniforms\n    var lowerBound = this.size * 0.1\n    var upperBound = this.size * 10\n\n    uniforms.zoom.value += delta\n\n    if (uniforms.zoom.value <= lowerBound) {\n      uniforms.zoom.value = lowerBound\n    } else if (uniforms.zoom.value >= upperBound) {\n      uniforms.zoom.value = upperBound\n    }\n  }\n\n  PANOLENS.LittlePlanet.prototype.onUpdateCallback = function () {\n    this.frameId = window.requestAnimationFrame(this.onUpdateCallback.bind(this))\n\n    this.quatSlerp.slerp(this.quatCur, 0.1)\n    this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp)\n\n    if (!this.dragging && 1.0 - this.quatSlerp.clone().dot(this.quatCur) < this.EPS) {\n      window.cancelAnimationFrame(this.frameId)\n    }\n  }\n\n  PANOLENS.LittlePlanet.prototype.reset = function () {\n    this.quatCur.set(0, 0, 0, 1)\n    this.quatSlerp.set(0, 0, 0, 1)\n    this.onUpdateCallback()\n  }\n\n  PANOLENS.LittlePlanet.prototype.onLoad = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight\n\n    this.registerMouseEvents()\n    this.onUpdateCallback()\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'disableControl' })\n  }\n\n  PANOLENS.LittlePlanet.prototype.onLeave = function () {\n    this.unregisterMouseEvents()\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'enableControl', data: PANOLENS.Controls.ORBIT })\n\n    window.cancelAnimationFrame(this.frameId)\n\n    PANOLENS.Panorama.prototype.onLeave.call(this)\n  }\n\n  PANOLENS.LittlePlanet.prototype.onWindowResize = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight\n  }\n\n  PANOLENS.LittlePlanet.prototype.onContextMenu = function () {\n    this.dragging = false\n  }\n})(); (function () {\n  /**\n\t * Image Little Planet\n\t * @constructor\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n  PANOLENS.ImageLittlePlanet = function (source, size, ratio) {\n    PANOLENS.LittlePlanet.call(this, 'image', source, size, ratio)\n  }\n\n  PANOLENS.ImageLittlePlanet.prototype = Object.create(PANOLENS.LittlePlanet.prototype)\n\n  PANOLENS.ImageLittlePlanet.prototype.constructor = PANOLENS.ImageLittlePlanet\n\n  PANOLENS.ImageLittlePlanet.prototype.onLoad = function (texture) {\n    this.updateTexture(texture)\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, texture)\n    PANOLENS.LittlePlanet.prototype.onLoad.call(this)\n  }\n\n  PANOLENS.ImageLittlePlanet.prototype.updateTexture = function (texture) {\n    texture.minFilter = texture.magFilter = THREE.LinearFilter\n\n    this.material.uniforms[ 'tDiffuse' ].value = texture\n  }\n})(); (function () {\n  /**\n\t * Reticle 3D Sprite\n\t * @constructor\n\t * @param {THREE.Color} [color=0xfffff] - Color of the reticle sprite\n\t * @param {boolean} [autoSelect=true] - Auto selection\n\t * @param {string} [idleImageUrl=PANOLENS.DataImage.ReticleIdle] - Image asset url\n\t * @param {string} [dwellImageUrl=PANOLENS.DataImage.ReticleDwell] - Image asset url\n\t * @param {number} [dwellTime=1500] - Duration for dwelling sequence to complete\n\t * @param {number} [dwellSpriteAmount=45] - Number of dwelling sprite sequence\n\t */\n  PANOLENS.Reticle = function (color, autoSelect, idleImageUrl, dwellImageUrl, dwellTime, dwellSpriteAmount) {\n    color = color || 0xffffff\n\n    this.autoSelect = autoSelect != undefined ? autoSelect : true\n\n    this.dwellTime = dwellTime || 1500\n    this.dwellSpriteAmount = dwellSpriteAmount || 45\n    this.dwellInterval = this.dwellTime / this.dwellSpriteAmount\n\n    this.IDLE = 0\n    this.DWELLING = 1\n    this.status\n\n    this.scaleIdle = new THREE.Vector3(0.2, 0.2, 1)\n    this.scaleDwell = new THREE.Vector3(1, 0.8, 1)\n\n    this.textureLoaded = false\n    this.idleImageUrl = idleImageUrl || PANOLENS.DataImage.ReticleIdle\n    this.dwellImageUrl = dwellImageUrl || PANOLENS.DataImage.ReticleDwell\n    this.idleTexture = new THREE.Texture()\n    this.dwellTexture = new THREE.Texture()\n\n    THREE.Sprite.call(this, new THREE.SpriteMaterial({ color: color, depthTest: false }))\n\n    this.currentTile = 0\n    this.startTime = 0\n\n    this.visible = false\n    this.renderOrder = 10\n    this.timerId\n\n    // initial update\n    this.updateStatus(this.IDLE)\n  }\n\n  PANOLENS.Reticle.prototype = Object.create(THREE.Sprite.prototype)\n\n  PANOLENS.Reticle.prototype.constructor = PANOLENS.Reticle\n\n  /**\n\t * Make reticle visible\n\t */\n  PANOLENS.Reticle.prototype.show = function () {\n    this.visible = true\n  }\n\n  /**\n\t * Make reticle invisible\n\t */\n  PANOLENS.Reticle.prototype.hide = function () {\n    this.visible = false\n  }\n\n  /**\n\t * Load reticle textures\n\t */\n  PANOLENS.Reticle.prototype.loadTextures = function () {\n    this.idleTexture = PANOLENS.Utils.TextureLoader.load(this.idleImageUrl)\n    this.dwellTexture = PANOLENS.Utils.TextureLoader.load(this.dwellImageUrl)\n\n    this.material.map = this.idleTexture\n    this.setupDwellSprite(this.dwellTexture)\n    this.textureLoaded = true\n  }\n\n  /**\n\t * Start reticle timer selection\n\t * @param  {function} completeCallback - Callback after dwell completes\n\t */\n  PANOLENS.Reticle.prototype.select = function (completeCallback) {\n    if (performance.now() - this.startTime >= this.dwellTime) {\n      this.completeDwelling()\n      completeCallback()\n    } else if (this.autoSelect) {\n      this.updateDwelling(performance.now())\n      this.timerId = window.requestAnimationFrame(this.select.bind(this, completeCallback))\n    }\n  }\n\n  /**\n\t * Clear and reset reticle timer\n\t */\n  PANOLENS.Reticle.prototype.clearTimer = function () {\n    window.cancelAnimationFrame(this.timerId)\n    this.timerId = null\n  }\n\n  /**\n\t * Setup dwell sprite animation\n\t */\n  PANOLENS.Reticle.prototype.setupDwellSprite = function (texture) {\n    texture.wrapS = THREE.RepeatWrapping\n    texture.repeat.set(1 / this.dwellSpriteAmount, 1)\n  }\n\n  /**\n\t * Update reticle status\n\t * @param {number} status - Reticle status\n\t */\n  PANOLENS.Reticle.prototype.updateStatus = function (status) {\n    this.status = status\n\n    if (status === this.IDLE) {\n      this.scale.copy(this.scaleIdle)\n      this.material.map = this.idleTexture\n    } else if (status === this.DWELLING) {\n      this.scale.copy(this.scaleDwell)\n      this.material.map = this.dwellTexture\n    }\n\n    this.currentTile = 0\n    this.material.map.offset.x = 0\n  }\n\n  /**\n\t * Start dwelling sequence\n\t */\n  PANOLENS.Reticle.prototype.startDwelling = function (completeCallback) {\n    if (!this.autoSelect) {\n      return\n    }\n\n    this.startTime = performance.now()\n    this.updateStatus(this.DWELLING)\n    this.select(completeCallback)\n  }\n\n  /**\n\t * Update dwelling sequence\n\t * @param  {number} time - Timestamp for elasped time\n\t */\n  PANOLENS.Reticle.prototype.updateDwelling = function (time) {\n    var elasped = time - this.startTime\n\n    if (this.currentTile <= this.dwellSpriteAmount) {\n      this.currentTile = Math.floor(elasped / this.dwellTime * this.dwellSpriteAmount)\n      this.material.map.offset.x = this.currentTile / this.dwellSpriteAmount\n    } else {\n      this.updateStatus(this.IDLE)\n    }\n  }\n\n  /**\n\t * Cancel dwelling\n\t */\n  PANOLENS.Reticle.prototype.cancelDwelling = function () {\n    this.clearTimer()\n    this.updateStatus(this.IDLE)\n  }\n\n  /**\n\t * Complete dwelling\n\t */\n  PANOLENS.Reticle.prototype.completeDwelling = function () {\n    this.clearTimer()\n    this.updateStatus(this.IDLE)\n  }\n})(); (function () {\n  /**\n\t * Creates a tile with bent capability\n\t * @constructor\n\t * @param {number}  [width=10]                      \t\t\t\t- Width along the X axis\n\t * @param {number}  [height=5]                      \t\t\t\t- Height along the Y axis\n\t * @param {number}  [widthSegments=20]              \t\t\t\t- Width segments\n\t * @param {number}  [heightSegments=20]             \t\t\t\t- Height segments\n\t * @param {THREE.Vector3} [forceDirection=THREE.Vector3( 0, 0, 1 )] - Force direction\n\t * @param {THREE.Vector3} [forceAxis=THREE.Vector3( 0, 1, 0 )] \t\t- Along this axis\n\t * @param {number} [forceAngle=Math.PI/12] \t\t\t\t\t\t\t- Angle to bend in radians\n\t */\n  PANOLENS.Tile = function (width, height, widthSegments, heightSegments, forceDirection, forceAxis, forceAngle) {\n    var scope = this\n\n    this.parameters = {\n      width: width,\n      height: height,\n      widthSegments: widthSegments,\n      heightSegments: heightSegments,\n      forceDirection: forceDirection,\n      forceAxis: forceAxis,\n      forceAngle: forceAngle\n    }\n\n    width = width || 10\n    height = height || 5\n    widthSegments = widthSegments || 1\n    heightSegments = heightSegments || 1\n    forceDirection = forceDirection || new THREE.Vector3(0, 0, 1)\n    forceAxis = forceAxis || new THREE.Vector3(0, 1, 0)\n    forceAngle = forceAngle !== undefined ? forceAngle : 0\n\n    THREE.Mesh.call(this,\n      new THREE.PlaneGeometry(width, height, widthSegments, heightSegments),\n      new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true })\n    )\n\n    this.bendModifier = new THREE.BendModifier()\n\n    this.entity = undefined\n\n    this.animationDuration = 500\n    this.animationFadeOut = undefined\n    this.animationFadeIn = undefined\n    this.animationTranslation = undefined\n    this.tweens = {}\n\n    if (forceAngle !== 0) {\n      this.bend(forceDirection, forceAxis, forceAngle)\n    }\n\n    this.originalGeometry = this.geometry.clone()\n  }\n\n  PANOLENS.Tile.prototype = Object.create(THREE.Mesh.prototype)\n\n  PANOLENS.Tile.prototype.constructor = PANOLENS.Tile\n\n  PANOLENS.Tile.prototype.clone = function () {\n    var parameters = this.parameters, tile\n\n    tile = new PANOLENS.Tile(\n      parameters.width,\n      parameters.height,\n      parameters.widthSegments,\n      parameters.heightSegments,\n      parameters.forceDirection,\n      parameters.forceAxis,\n      parameters.forceAngle\n    )\n\n    tile.setEntity(this.entity)\n    tile.material = this.material.clone()\n\n    return tile\n  }\n\n  /**\n\t * Bend panel with direction, axis, and angle\n\t * @param  {THREE.Vector3} direction - Force direction\n\t * @param  {THREE.Vector3} axis - Along this axis\n\t * @param  {number} angle - Angle to bend in radians\n\t */\n  PANOLENS.Tile.prototype.bend = function (direction, axis, angle) {\n    this.bendModifier.set(direction, axis, angle).modify(this.geometry)\n  }\n\n  /**\n\t * Restore geometry back to initial state\n\t */\n  PANOLENS.Tile.prototype.unbend = function () {\n    var geometry = this.geometry\n\n    this.geometry = this.originalGeometry\n    this.originalGeometry = this.geometry.clone()\n\n    geometry.dispose()\n    geometry = null\n  }\n\n  /**\n\t * Create a tween object for animation\n\t * based on - {@link https://github.com/tweenjs/tween.js}\n\t * @param  {string} name       - Name of the tween animation\n\t * @param  {object} object     - Object to be tweened\n\t * @param  {object} toState    - Final state of the object's properties\n\t * @param  {number} duration   - Tweening duration\n\t * @param  {TWEEN.Easing} easing     - Easing function\n\t * @param  {number} delay      - Animation delay time\n\t * @param  {Function} onStart    - On start function\n\t * @param  {Function} onUpdate   - On update function\n\t * @param  {Function} onComplete - On complete function\n\t * @return {TWEEN.Tween}         - Tween object\n\t */\n  PANOLENS.Tile.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this\n    \ttoState = toState || {}\n    \tduration = duration || this.animationDuration\n    \teasing = easing || TWEEN.Easing.Exponential.Out\n    \tdelay = delay !== undefined ? delay : 0\n    \tonStart = onStart || null\n    \tonUpdate = onUpdate || null\n    \tonComplete = onComplete || null\n\n    \tif (!this.tweens[name]) {\n    \t\tthis.tweens[name] = new TWEEN.Tween(object)\n    \t\t\t.to(toState, duration)\n\t        \t.easing(easing)\n\t        \t.delay(delay)\n\t        \t.onStart(onStart)\n\t        \t.onUpdate(onUpdate)\n\t        \t.onComplete(onComplete)\n    \t}\n\n    \treturn this.tweens[name]\n  }\n\n  /**\n     * Short-hand for displaying a single ripple effect\n     * by duplicating itself and fadeout\n     * @param  {number} scale    - The duplicated self fadeout scale\n     * @param  {number} duration - Effect duration\n     * @param  {TWEEN.Easing} easing   - Easing function\n     */\n  PANOLENS.Tile.prototype.ripple = function (scale, duration, easing) {\n    \tscale = scale || 2\n    \tduration = duration || 200\n    \teasing = easing || TWEEN.Easing.Cubic.Out\n\n    \tvar scope = this, ripple = this.clone()\n\n    new TWEEN.Tween(ripple.scale)\n      .to({x: scale, y: scale}, duration)\n      .easing(easing)\n      .start()\n\n    new TWEEN.Tween(ripple.material)\n      .to({opacity: 0}, duration)\n      .easing(easing)\n      .onComplete(function () {\n        scope.remove(ripple)\n        ripple.geometry.dispose()\n        ripple.material.dispose()\n      })\n      .start()\n\n    this.add(ripple)\n  }\n\n  /**\n\t * Set entity if multiple objects are considered as one entity\n\t * @param {object} entity - Entity represents whole group structure\n\t */\n  PANOLENS.Tile.prototype.setEntity = function (entity) {\n    this.entity = entity\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n     * Group consists of tile array\n     * @constructor\n     * @param {array}  tileArray         - Tile array of PANOLENS.Tile\n     * @param {number} verticalGap       - Vertical gap between each tile\n     * @param {number} depthGap          - Depth gap between each tile\n     * @param {number} animationDuration - Animation duration\n     * @param {number} offset            - Offset index\n     */\n  PANOLENS.TileGroup = function (tileArray, verticalGap, depthGap, animationDuration, offset) {\n    var scope = this, textureLoader\n\n    THREE.Object3D.call(this)\n\n    this.tileArray = tileArray || []\n    this.offset = offset !== undefined ? offset : 0\n    this.v_gap = verticalGap !== undefined ? verticalGap : 6\n    this.d_gap = depthGap !== undefined ? depthGap : 2\n    this.animationDuration = animationDuration !== undefined ? animationDuration : 200\n    this.animationEasing = TWEEN.Easing.Exponential.Out\n    this.visibleDelta = 2\n\n    this.tileArray.map(function (tile, index) {\n      if (tile.image) {\n        PANOLENS.Utils.TextureLoader.load(tile.image, scope.setTexture.bind(tile))\n      }\n\n      tile.position.set(0, index * -scope.v_gap, index * -scope.d_gap)\n      tile.originalPosition = tile.position.clone()\n      tile.setEntity(scope)\n      scope.add(tile)\n    })\n\n    this.updateVisbility()\n  }\n\n  PANOLENS.TileGroup.prototype = Object.create(THREE.Object3D.prototype)\n\n  PANOLENS.TileGroup.prototype.constructor = PANOLENS.TileGroup\n\n  /**\n     * Update corresponding tile textures\n     * @param  {array} imageArray - Image array with index to index image update\n     */\n  PANOLENS.TileGroup.prototype.updateTexture = function (imageArray) {\n    var scope = this\n\n    imageArray = imageArray || []\n    this.children.map(function (child, index) {\n      if (child instanceof PANOLENS.Tile && imageArray[index]) {\n        PANOLENS.Utils.TextureLoader.load(imageArray[index], scope.setTexture.bind(child))\n\t    \t\tif (child.outline) {\n\t    \t\t\tchild.outline.material.visible = true\n\t    \t\t}\n      }\n    })\n  }\n\n  /**\n     * Update all tile textures and hide the remaining ones\n     * @param  {array} imageArray - Image array with index to index image update\n     */\n  PANOLENS.TileGroup.prototype.updateAllTexture = function (imageArray) {\n    this.updateTexture(imageArray)\n\n    if (imageArray.length < this.children.length) {\n      for (var i = imageArray.length; i < this.children.length; i++) {\n        if (this.children[i] instanceof PANOLENS.Tile) {\n          this.children[i].material.visible = false\n          if (this.children[i].outline) {\n            this.children[i].outline.material.visible = false\n          }\n        }\n      }\n    }\n  }\n\n  /**\n     * Set individual texture\n     * @param {THREE.Texture} texture - Texture to be updated\n     */\n  PANOLENS.TileGroup.prototype.setTexture = function (texture) {\n    texture.minFilter = THREE.LinearFilter\n    texture.magFilter = THREE.LinearFilter\n    this.material.visible = true\n    this.material.map = texture\n    this.material.needsUpdate = true\n  }\n\n  /**\n     * Update visibility\n     */\n  PANOLENS.TileGroup.prototype.updateVisbility = function () {\n    \tthis.children[this.offset].visible = true\n    \tnew TWEEN.Tween(this.children[this.offset].material)\n      .to({ opacity: 1 }, this.animationDuration)\n      .easing(this.animationEasing)\n      .start()\n\n    \tif (this.children[this.offset].outline) {\n    \t\tthis.children[this.offset].outline.visible = true\n    \t}\n\n    \t// Backward\n    \tfor (var i = this.offset - 1; i >= 0; i--) {\n    \t\tif (this.tileArray.indexOf(this.children[i]) === -1) { continue }\n\n    \t\tif (this.offset - i <= this.visibleDelta) {\n    \t\t\tthis.children[i].visible = true\n    \t\t\tnew TWEEN.Tween(this.children[i].material)\n    \t\t\t.to({ opacity: 1 / (this.offset - i) * 0.5 }, this.animationDuration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n    \t\t} else {\n    \t\t\tthis.children[i].visible = false\n    \t\t}\n\n    \t\tthis.children[i].outline && (this.children[i].outline.visible = false)\n    \t}\n\n    \t// Forward\n    \tfor (var i = this.offset + 1; i < this.children.length; i++) {\n    \t\tif (this.tileArray.indexOf(this.children[i]) === -1) { continue }\n\n    \t\tif (i - this.offset <= this.visibleDelta) {\n    \t\t\tthis.children[i].visible = true\n    \t\t\tnew TWEEN.Tween(this.children[i].material)\n    \t\t\t.to({ opacity: 1 / (i - this.offset) * 0.5 }, this.animationDuration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n    \t\t} else {\n    \t\t\tthis.children[i].visible = false\n    \t\t}\n\n    \t\tthis.children[i].outline && (this.children[i].outline.visible = false)\n    \t}\n  }\n\n  /**\n     * Scroll up\n     * @param  {number} duration - Scroll up duration\n     */\n  PANOLENS.TileGroup.prototype.scrollUp = function (duration) {\n    \tvar tiles = this.tileArray, offset\n\n    \tduration = duration !== undefined ? duration : this.animationDuration\n\n    \toffset = this.offset + 1\n\n    \tif (this.offset < tiles.length - 1 && tiles[ this.offset + 1 ].material.visible) {\n    \t\tfor (var i = tiles.length - 1; i >= 0; i--) {\n    \t\t\tnew TWEEN.Tween(tiles[i].position)\n    \t\t\t.to({ y: (i - offset) * -this.v_gap,\n    \t\t\t\t  z: Math.abs(i - offset) * -this.d_gap }, duration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n\t    \t}\n\n\t    \tthis.offset++\n\t    \tthis.updateVisbility()\n\t    \tthis.dispatchEvent({ type: 'scroll', direction: 'up' })\n    \t}\n  }\n\n  /**\n     * Scroll down\n     * @param  {number} duration - Scroll up duration\n     */\n  PANOLENS.TileGroup.prototype.scrollDown = function (duration) {\n    \tvar tiles = this.tileArray, offset\n\n    \tduration = duration !== undefined ? duration : this.animationDuration\n\n    \toffset = this.offset - 1\n\n    \tif (this.offset > 0 && tiles[ this.offset - 1 ].material.visible) {\n    \t\tfor (var i = 0; i < tiles.length; i++) {\n\t    \t\tnew TWEEN.Tween(tiles[i].position)\n    \t\t\t.to({ y: (i - offset) * -this.v_gap,\n    \t\t\t\t  z: Math.abs(i - offset) * -this.d_gap }, duration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n\t    \t}\n\n\t    \tthis.offset--\n\t    \tthis.updateVisbility()\n\t    \tthis.dispatchEvent({ type: 'scroll', direction: 'down' })\n    \t}\n  }\n\n  PANOLENS.TileGroup.prototype.reset = function () {\n    \tthis.tileArray.map(function (child, index) {\n    \t\tchild.position.copy(child.originalPosition)\n    \t})\n\n    \tthis.offset = 0\n    \tthis.updateVisbility()\n  }\n\n  /**\n     * Get current index\n     * @return {number} Index of the group. Range from 0 to this.tileArray.length\n     */\n  PANOLENS.TileGroup.prototype.getIndex = function () {\n    \treturn this.offset\n  }\n\n  /**\n     * Get visible tile counts\n     * @return {number} Number of visible tiles\n     */\n  PANOLENS.TileGroup.prototype.getTileCount = function () {\n    \tvar count = 0\n\n    \tthis.tileArray.map(function (tile) {\n    \t\tif (tile.material.visible) {\n    \t\t\tcount++\n    \t\t}\n    \t})\n\n    \treturn count\n  }\n})(); (function () {\n  'use strict'\n\n  var sharedFont, sharedTexture\n  var pendingQueue = []\n\n  /**\n\t * Sprite text based on {@link https://github.com/Jam3/three-bmfont-text}\n\t * @constructor\n\t * @param {string} text     - Text to be displayed\n\t * @param {number} maxWidth\t- Max width\n\t * @param {number} color    - Color in hexadecimal\n\t * @param {number} opacity  - Text opacity\n\t * @param {object} options  - Options to create text geometry\n\t */\n  PANOLENS.SpriteText = function (text, maxWidth, color, opacity, options) {\n    THREE.Object3D.call(this)\n\n    this.text = text || ''\n    this.maxWidth = maxWidth || 2000\n    this.color = color || 0xffffff\n    this.opacity = opacity !== undefined ? opacity : 1\n    this.options = options || {}\n\n    this.animationDuration = 500\n    this.animationFadeOut = undefined\n    this.animationFadeIn = undefined\n    this.tweens = {}\n\n    this.addText(text)\n  }\n\n  PANOLENS.SpriteText.prototype = Object.create(THREE.Object3D.prototype)\n\n  PANOLENS.SpriteText.prototype.constructor = PANOLENS.SpriteText\n\n  // Reference function will be overwritten by Bmfont.js\n  PANOLENS.SpriteText.prototype.generateTextGeometry = function () {}\n  PANOLENS.SpriteText.prototype.generateSDFShader = function () {}\n\n  /**\n\t * Set BMFont\n\t * @param {Function} callback - Callback after font is loaded\n\t * @param {object}   font     - The font to be loaded\n\t * @param {THREE.Texture}   texture  - Font texture\n\t */\n  PANOLENS.SpriteText.prototype.setBMFont = function (callback, font, texture) {\n    texture.needsUpdate = true\n\t  \ttexture.minFilter = THREE.LinearMipMapLinearFilter\n    texture.magFilter = THREE.LinearFilter\n    texture.generateMipmaps = true\n    texture.anisotropy = 8\n\n    sharedFont = font\n    sharedTexture = texture\n\n    for (var i = pendingQueue.length - 1; i >= 0; i--) {\n      pendingQueue[ i ].target.addText(pendingQueue[ i ].text)\n    }\n\n    while (pendingQueue.length > 0) {\n      pendingQueue.pop()\n    }\n\n    callback && callback()\n  }\n\n  /**\n\t * Add text mesh\n\t * @param {string} text - Text to be displayed\n\t */\n  PANOLENS.SpriteText.prototype.addText = function (text) {\n    if (!sharedFont || !sharedTexture) {\n      pendingQueue.push({ target: this, text: text })\n      return\n    }\n\n    var textAnchor = new THREE.Object3D()\n\n    this.options.text = text\n    this.options.font = sharedFont\n    this.options.width = this.maxWidth\n\n    var geometry = this.generateTextGeometry(this.options)\n    geometry.computeBoundingBox()\n    geometry.computeBoundingSphere()\n\n    var material = new THREE.RawShaderMaterial(this.generateSDFShader({\n\t\t    map: sharedTexture,\n\t\t    side: THREE.DoubleSide,\n\t\t    transparent: true,\n\t\t    color: this.color,\n\t\t    opacity: this.opacity\n    }))\n\n    var layout = geometry.layout\n    var textMesh = new THREE.Mesh(geometry, material)\n\n    textMesh.entity = this\n    textMesh.position.x = -layout.width / 2\n    textMesh.position.y = layout.height * 1.035\n\n    textAnchor.scale.x = textAnchor.scale.y = -0.05\n    textAnchor.add(textMesh)\n\n    this.mesh = textMesh\n    this.add(textAnchor)\n  }\n\n  /**\n\t * Update text geometry\n\t * @param  {object} options - Geometry options based on\n\t *  https://github.com/Jam3/three-bmfont-text#geometry--createtextopt\n\t */\n  PANOLENS.SpriteText.prototype.update = function (options) {\n    var mesh\n\n    options = options || {}\n\n    mesh = this.mesh\n\n    mesh.geometry.update(options)\n    mesh.position.x = -mesh.geometry.layout.width / 2\n    mesh.position.y = mesh.geometry.layout.height * 1.035\n  }\n\n  /**\n\t * Create a tween object for animation\n\t * based on - {@link https://github.com/tweenjs/tween.js}\n\t * @param  {string} name       - Name of the tween animation\n\t * @param  {object} object     - Object to be tweened\n\t * @param  {object} toState    - Final state of the object's properties\n\t * @param  {number} duration   - Tweening duration\n\t * @param  {TWEEN.Easing} easing     - Easing function\n\t * @param  {number} delay      - Animation delay time\n\t * @param  {Function} onStart    - On start function\n\t * @param  {Function} onUpdate   - On update function\n\t * @param  {Function} onComplete - On complete function\n\t * @return {TWEEN.Tween}         - Tween object\n\t */\n  PANOLENS.SpriteText.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this\n    toState = toState || {}\n    duration = duration || this.animationDuration\n    easing = easing || TWEEN.Easing.Exponential.Out\n    delay = delay !== undefined ? delay : 0\n    onStart = onStart || null\n    onUpdate = onUpdate || null\n    onComplete = onComplete || null\n\n    if (!this.tweens[name]) {\n      this.tweens[name] = new TWEEN.Tween(object)\n        .to(toState, duration)\n\t        \t.easing(easing)\n\t        \t.delay(delay)\n\t        \t.onStart(onStart)\n\t        \t.onUpdate(onUpdate)\n\t        \t.onComplete(onComplete)\n    }\n\n    return this.tweens[name]\n  }\n\n  /**\n\t * Get geometry layout\n\t * @return {object} Text geometry layout\n\t */\n  PANOLENS.SpriteText.prototype.getLayout = function () {\n    return this.mesh && this.mesh.geometry && this.mesh.geometry.layout || {}\n  }\n\n  /**\n\t * Set entity if multiple objects are considered as one entity\n\t * @param {object} entity - Entity represents whole group structure\n\t */\n  PANOLENS.SpriteText.prototype.setEntity = function (entity) {\n    this.entity = entity\n  }\n})(); (function () {\n  /**\n\t * Widget for controls\n\t * @constructor\n\t * @param {HTMLElement} container - A domElement where default control widget will be attached to\n\t */\n  PANOLENS.Widget = function (container) {\n    THREE.EventDispatcher.call(this)\n\n    this.DEFAULT_TRANSITION = 'all 0.27s ease'\n    this.TOUCH_ENABLED = PANOLENS.Utils.checkTouchSupported()\n    this.PREVENT_EVENT_HANDLER = function (event) {\n      event.preventDefault()\n      event.stopPropagation()\n    }\n\n    this.container = container\n\n    this.barElement\n    this.fullscreenElement\n    this.videoElement\n    this.settingElement\n\n    this.mainMenu\n\n    this.activeMainItem\n    this.activeSubMenu\n    this.mask\n  }\n\n  PANOLENS.Widget.prototype = Object.create(THREE.EventDispatcher.prototype)\n\n  PANOLENS.Widget.prototype.constructor = PANOLENS.Widget\n\n  /**\n\t * Add control bar\n\t */\n  PANOLENS.Widget.prototype.addControlBar = function () {\n    if (!this.container) {\n      console.warn('Widget container not set')\n      return\n    }\n\n    var scope = this, bar, styleTranslate, styleOpacity, gradientStyle\n\n    gradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))'\n\n    bar = document.createElement('div')\n    bar.style.width = '100%'\n    bar.style.height = '44px'\n    bar.style.float = 'left'\n    bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)'\n    bar.style.background = '-webkit-' + gradientStyle\n    bar.style.background = '-moz-' + gradientStyle\n    bar.style.background = '-o-' + gradientStyle\n    bar.style.background = '-ms-' + gradientStyle\n    bar.style.background = gradientStyle\n    bar.style.transition = this.DEFAULT_TRANSITION\n    bar.style.pointerEvents = 'none'\n    bar.isHidden = false\n    bar.toggle = function () {\n      bar.isHidden = !bar.isHidden\n      styleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)'\n      styleOpacity = bar.isHidden ? 0 : 1\n      bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate\n      bar.style.opacity = styleOpacity\n    }\n\n    // Menu\n    var menu = this.createDefaultMenu()\n    this.mainMenu = this.createMainMenu(menu)\n    bar.appendChild(this.mainMenu)\n\n    // Mask\n    var mask = this.createMask()\n    this.mask = mask\n    this.container.appendChild(mask)\n\n    // Dispose\n    bar.dispose = function () {\n      if (scope.fullscreenElement) {\n        bar.removeChild(scope.fullscreenElement)\n        scope.fullscreenElement.dispose()\n        scope.fullscreenElement = null\n      }\n\n      if (scope.settingElement) {\n        bar.removeChild(scope.settingElement)\n        scope.settingElement.dispose()\n        scope.settingElement = null\n      }\n\n      if (scope.videoElement) {\n        bar.removeChild(scope.videoElement)\n        scope.videoElement.dispose()\n        scope.videoElement = null\n      }\n    }\n\n    this.container.appendChild(bar)\n\n    // Mask events\n    this.mask.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true)\n    this.mask.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true)\n    this.mask.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true)\n    this.mask.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', function (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      scope.mask.hide()\n      scope.settingElement.deactivate()\n    }, false)\n\n    // Event listener\n    this.addEventListener('control-bar-toggle', bar.toggle)\n\n    this.barElement = bar\n  }\n\n  /**\n\t * Create default menu\n\t */\n  PANOLENS.Widget.prototype.createDefaultMenu = function () {\n    var scope = this, handler\n\n    handler = function (method, data) {\n      return function () {\n        scope.dispatchEvent({\n\n          type: 'panolens-viewer-handler',\n          method: method,\n          data: data\n\n        })\n      }\n    }\n\n    return [\n\n      {\n        title: 'Control',\n        subMenu: [\n          {\n            title: this.TOUCH_ENABLED ? 'Touch' : 'Mouse',\n            handler: handler('enableControl', PANOLENS.Controls.ORBIT)\n          },\n          {\n            title: 'Sensor',\n            handler: handler('enableControl', PANOLENS.Controls.DEVICEORIENTATION)\n          }\n        ]\n      },\n\n      {\n        title: 'Mode',\n        subMenu: [\n          {\n            title: 'Normal',\n            handler: handler('disableEffect')\n          },\n          {\n            title: 'Cardboard',\n            handler: handler('enableEffect', PANOLENS.Modes.CARDBOARD)\n          },\n          {\n            title: 'Stereoscopic',\n            handler: handler('enableEffect', PANOLENS.Modes.STEREO)\n          }\n        ]\n      }\n\n    ]\n  }\n\n  /**\n\t * Add buttons on top of control bar\n\t * @param {string} name - The control button name to be created\n\t */\n  PANOLENS.Widget.prototype.addControlButton = function (name) {\n    var element\n\n    switch (name) {\n      case 'fullscreen':\n\n        element = this.createFullscreenButton()\n        this.fullscreenElement = element\n\n        break\n\n      case 'setting':\n\n        element = this.createSettingButton()\n        this.settingElement = element\n\n        break\n\n      case 'video':\n\n        element = this.createVideoControl()\n        this.videoElement = element\n\n        break\n\n      default:\n\n        return\n    }\n\n    if (!element) {\n      return\n    }\n\n    this.barElement.appendChild(element)\n  }\n\n  PANOLENS.Widget.prototype.createMask = function () {\n    var element = document.createElement('div')\n    element.style.position = 'absolute'\n    element.style.top = 0\n    element.style.left = 0\n    element.style.width = '100%'\n    element.style.height = '100%'\n    element.style.background = 'transparent'\n    element.style.display = 'none'\n\n    element.show = function () {\n      this.style.display = 'block'\n    }\n\n    element.hide = function () {\n      this.style.display = 'none'\n    }\n\n    return element\n  }\n\n  /**\n\t * Create Setting button to toggle menu\n\t */\n  PANOLENS.Widget.prototype.createSettingButton = function () {\n    var scope = this, item\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      scope.mainMenu.toggle()\n\n      if (this.activated) {\n        this.deactivate()\n      } else {\n        this.activate()\n      }\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.Setting + '\")',\n        webkitTransition: this.DEFAULT_TRANSITION,\n        transition: this.DEFAULT_TRANSITION\n\n      },\n\n      onTap: onTap\n\n    })\n\n    item.activate = function () {\n      this.style.transform = 'rotate3d(0,0,1,90deg)'\n      this.activated = true\n      scope.mask.show()\n    }\n\n    item.deactivate = function () {\n      this.style.transform = 'rotate3d(0,0,0,0)'\n      this.activated = false\n      scope.mask.hide()\n\n      if (scope.mainMenu && scope.mainMenu.visible) {\n        scope.mainMenu.hide()\n      }\n\n      if (scope.activeSubMenu && scope.activeSubMenu.visible) {\n        scope.activeSubMenu.hide()\n      }\n\n      if (scope.mainMenu && scope.mainMenu._width) {\n        scope.mainMenu.changeSize(scope.mainMenu._width)\n        scope.mainMenu.unslideAll()\n      }\n    }\n\n    item.activated = false\n\n    return item\n  }\n\n  /**\n\t * Create Fullscreen button\n\t * @return {HTMLSpanElement} - The dom element icon for fullscreen\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n  PANOLENS.Widget.prototype.createFullscreenButton = function () {\n    var scope = this, item, isFullscreen = false, tapSkipped = true, stylesheetId\n\n    stylesheetId = 'panolens-style-addon'\n\n    // Don't create button if no support\n    if (!document.fullscreenEnabled &&\n\t\t\t !document.webkitFullscreenEnabled &&\n\t\t\t !document.mozFullScreenEnabled &&\n\t\t\t !document.msFullscreenEnabled) {\n      return\n    }\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      tapSkipped = false\n\n      if (!isFullscreen) {\n\t\t\t    scope.container.requestFullscreen && scope.container.requestFullscreen()\n\t\t\t    scope.container.msRequestFullscreen && scope.container.msRequestFullscreen()\n\t\t\t    scope.container.mozRequestFullScreen && scope.container.mozRequestFullScreen()\n\t\t\t    scope.container.webkitRequestFullscreen && scope.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)\n        isFullscreen = true\n      } else {\n\t\t\t    document.exitFullscreen && document.exitFullscreen()\n\t\t\t    document.msExitFullscreen && document.msExitFullscreen()\n\t\t\t    document.mozCancelFullScreen && document.mozCancelFullScreen()\n\t\t\t    document.webkitExitFullscreen && document.webkitExitFullscreen()\n        isFullscreen = false\n      }\n\n      this.style.backgroundImage = (isFullscreen)\n        ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")'\n        : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n    }\n\n    function onFullScreenChange (e) {\n      if (tapSkipped) {\n        isFullscreen = !isFullscreen\n\n        item.style.backgroundImage = (isFullscreen)\n          ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")'\n          : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n      }\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'onWindowResize' function call on PANOLENS.Viewer\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onWindowResize', data: false })\n\n      tapSkipped = true\n    }\n\n    document.addEventListener('fullscreenchange', onFullScreenChange, false)\n    document.addEventListener('webkitfullscreenchange', onFullScreenChange, false)\n    document.addEventListener('mozfullscreenchange', onFullScreenChange, false)\n    document.addEventListener('MSFullscreenChange', onFullScreenChange, false)\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n\n      },\n\n      onTap: onTap\n\n    })\n\n    // Add fullscreen stlye if not exists\n    if (!document.querySelector(stylesheetId)) {\n      var sheet = document.createElement('style')\n      sheet.id = stylesheetId\n      sheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }'\n      document.body.appendChild(sheet)\n    }\n\n    return item\n  }\n\n  /**\n\t * Create video control container\n\t * @return {HTMLSpanElement} - The dom element icon for video control\n\t */\n  PANOLENS.Widget.prototype.createVideoControl = function () {\n    var item\n\n    item = document.createElement('span')\n    item.style.display = 'none'\n    item.show = function () {\n      item.style.display = ''\n    }\n\n    item.hide = function () {\n      item.style.display = 'none'\n      item.controlButton.paused = true\n      item.controlButton.update()\n    }\n\n    item.controlButton = this.createVideoControlButton()\n    item.seekBar = this.createVideoControlSeekbar()\n\n    item.appendChild(item.controlButton)\n    item.appendChild(item.seekBar)\n\n    item.dispose = function () {\n      item.removeChild(item.controlButton)\n      item.removeChild(item.seekBar)\n\n      item.controlButton.dispose()\n      item.controlButton = null\n\n      item.seekBar.dispose()\n      item.seekBar = null\n    }\n\n    this.addEventListener('video-control-show', item.show)\n    this.addEventListener('video-control-hide', item.hide)\n\n    return item\n  }\n\n  /**\n\t * Create video control button\n\t * @return {HTMLSpanElement} - The dom element icon for video control\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n  PANOLENS.Widget.prototype.createVideoControlButton = function () {\n    var scope = this, item\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'toggleVideoPlay' function call on PANOLENS.Viewer\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused })\n\n      this.paused = !this.paused\n\n      item.update()\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.VideoPlay + '\")'\n\n      },\n\n      onTap: onTap\n\n    })\n\n    item.paused = true\n\n    item.update = function (paused) {\n      this.paused = paused !== undefined ? paused : this.paused\n\n      this.style.backgroundImage = 'url(\"' + (this.paused\n        ? PANOLENS.DataImage.VideoPlay\n        : PANOLENS.DataImage.VideoPause) + '\")'\n    }\n\n    return item\n  }\n\n  /**\n\t * Create video seekbar\n\t * @return {HTMLSpanElement} - The dom element icon for video seekbar\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n  PANOLENS.Widget.prototype.createVideoControlSeekbar = function () {\n    var scope = this, item, progressElement, progressElementControl,\n      isDragging = false, mouseX, percentageNow, percentageNext\n\n    progressElement = document.createElement('div')\n    progressElement.style.width = '0%'\n    progressElement.style.height = '100%'\n    progressElement.style.backgroundColor = '#fff'\n\n    progressElementControl = document.createElement('div')\n    progressElementControl.style.float = 'right'\n    progressElementControl.style.width = '14px'\n    progressElementControl.style.height = '14px'\n    progressElementControl.style.transform = 'translate(7px, -5px)'\n    progressElementControl.style.borderRadius = '50%'\n    progressElementControl.style.backgroundColor = '#ddd'\n\n    progressElementControl.addEventListener('mousedown', onMouseDown, false)\n    progressElementControl.addEventListener('touchstart', onMouseDown, false)\n\n    function onMouseDown (event) {\n      event.stopPropagation()\n\n      isDragging = true\n\n      mouseX = event.clientX || (event.changedTouches && event.changedTouches[0].clientX)\n\n      percentageNow = parseInt(progressElement.style.width) / 100\n\n      addControlListeners()\n    }\n\n    function onVideoControlDrag (event) {\n      var clientX\n\n      if (isDragging) {\n        clientX = event.clientX || (event.changedTouches && event.changedTouches[0].clientX)\n\n        percentageNext = (clientX - mouseX) / item.clientWidth\n\n        percentageNext = percentageNow + percentageNext\n\n        percentageNext = percentageNext > 1 ? 1 : ((percentageNext < 0) ? 0 : percentageNext)\n\n        item.setProgress(percentageNext)\n\n        /**\n\t\t\t\t * Viewer handler event\n\t\t\t\t * @type {object}\n\t\t\t\t * @property {string} method - 'setVideoCurrentTime' function call on PANOLENS.Viewer\n\t\t\t\t * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t\t\t\t */\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext })\n      }\n    }\n\n    function onVideoControlStop (event) {\n      event.stopPropagation()\n\n      isDragging = false\n\n      removeControlListeners()\n    }\n\n    function addControlListeners () {\n      scope.container.addEventListener('mousemove', onVideoControlDrag, false)\n      scope.container.addEventListener('mouseup', onVideoControlStop, false)\n      scope.container.addEventListener('touchmove', onVideoControlDrag, false)\n      scope.container.addEventListener('touchend', onVideoControlStop, false)\n    }\n\n    function removeControlListeners () {\n      scope.container.removeEventListener('mousemove', onVideoControlDrag, false)\n      scope.container.removeEventListener('mouseup', onVideoControlStop, false)\n      scope.container.removeEventListener('touchmove', onVideoControlDrag, false)\n      scope.container.removeEventListener('touchend', onVideoControlStop, false)\n    }\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      var percentage\n\n      if (event.target === progressElementControl) { return }\n\n      percentage = (event.changedTouches && event.changedTouches.length > 0)\n        ? (event.changedTouches[0].pageX - event.target.getBoundingClientRect().left) / this.clientWidth\n        : event.offsetX / this.clientWidth\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'setVideoCurrentTime' function call on PANOLENS.Viewer\n\t\t\t * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage })\n\n      item.setProgress(event.offsetX / this.clientWidth)\n    }\n\n    function onDispose () {\n      removeControlListeners()\n      progressElement = null\n      progressElementControl = null\n    }\n\n    progressElement.appendChild(progressElementControl)\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        width: '30%',\n        height: '4px',\n        marginTop: '20px',\n        backgroundColor: 'rgba(188,188,188,0.8)'\n\n      },\n\n      onTap: onTap,\n      onDispose: onDispose\n\n    })\n\n    item.appendChild(progressElement)\n\n    item.setProgress = function (percentage) {\n      progressElement.style.width = percentage * 100 + '%'\n    }\n\n    this.addEventListener('video-update', function (event) {\n      item.setProgress(event.percentage)\n    })\n\n    return item\n  }\n\n  /**\n\t * Create menu item\n\t * @param  {string} title - Title to display\n\t * @return {HTMLDomElement} - An anchor tag element\n\t */\n  PANOLENS.Widget.prototype.createMenuItem = function (title) {\n    var scope = this, item = document.createElement('a')\n    item.textContent = title\n    item.style.display = 'block'\n    item.style.padding = '10px'\n    item.style.textDecoration = 'none'\n    item.style.cursor = 'pointer'\n    item.style.pointerEvents = 'auto'\n    item.style.transition = this.DEFAULT_TRANSITION\n\n    item.slide = function (right) {\n      this.style.transform = 'translateX(' + (right ? '' : '-') + '100%)'\n    }\n\n    item.unslide = function () {\n      this.style.transform = 'translateX(0)'\n    }\n\n    item.setIcon = function (url) {\n      if (this.icon) {\n        this.icon.style.backgroundImage = 'url(' + url + ')'\n      }\n    }\n\n    item.setSelectionTitle = function (title) {\n      if (this.selection) {\n        this.selection.textContent = title\n      }\n    }\n\n    item.addSelection = function (name) {\n      var selection = document.createElement('span')\n      selection.style.fontSize = '13px'\n      selection.style.fontWeight = '300'\n      selection.style.float = 'right'\n\n      this.selection = selection\n      this.setSelectionTitle(name)\n      this.appendChild(selection)\n\n      return this\n    }\n\n    item.addIcon = function (url, left, flip) {\n      url = url || PANOLENS.DataImage.ChevronRight\n      left = left || false\n      flip = flip || false\n\n      var element = document.createElement('span')\n      element.style.float = left ? 'left' : 'right'\n      element.style.width = '17px'\n      element.style.height = '17px'\n      element.style[ 'margin' + (left ? 'Right' : 'Left') ] = '12px'\n      element.style.backgroundSize = 'cover'\n\n      if (flip) {\n        element.style.transform = 'rotateZ(180deg)'\n      }\n\n      this.icon = element\n      this.setIcon(url)\n      this.appendChild(element)\n\n      return this\n    }\n\n    item.addSubMenu = function (title, items) {\n      this.subMenu = scope.createSubMenu(title, items)\n\n      return this\n    }\n\n    item.addEventListener('mouseenter', function () {\n      this.style.backgroundColor = '#e0e0e0'\n    }, false)\n\n    item.addEventListener('mouseleave', function () {\n      this.style.backgroundColor = '#fafafa'\n    }, false)\n\n    return item\n  }\n\n  /**\n\t * Create menu item header\n\t * @param  {string} title - Title to display\n\t * @return {HTMLDomElement} - An anchor tag element\n\t */\n  PANOLENS.Widget.prototype.createMenuItemHeader = function (title) {\n    var header = this.createMenuItem(title)\n\n    header.style.borderBottom = '1px solid #333'\n    header.style.paddingBottom = '15px'\n\n    return header\n  }\n\n  /**\n\t * Create main menu\n\t * @param  {array} menus - Menu array list\n\t * @return {HTMLDomElement} - A span element\n\t */\n  PANOLENS.Widget.prototype.createMainMenu = function (menus) {\n    var scope = this, menu = this.createMenu(), subMenu\n\n    menu._width = 200\n    menu.changeSize(menu._width)\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      var mainMenu = scope.mainMenu, subMenu = this.subMenu\n\n      function onNextTick () {\n        mainMenu.changeSize(subMenu.clientWidth)\n        subMenu.show()\n        subMenu.unslideAll()\n      }\n\n      mainMenu.hide()\n      mainMenu.slideAll()\n      mainMenu.parentElement.appendChild(subMenu)\n\n      scope.activeMainItem = this\n      scope.activeSubMenu = subMenu\n\n      window.requestAnimationFrame(onNextTick)\n    }\n\n    for (var i = 0; i < menus.length; i++) {\n      var item = menu.addItem(menus[ i ].title)\n\n      item.style.paddingLeft = '20px'\n\n      item.addIcon()\n        .addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false)\n\n      if (menus[ i ].subMenu && menus[ i ].subMenu.length > 0) {\n        var title = menus[ i ].subMenu[ 0 ].title\n\n        item.addSelection(title)\n          .addSubMenu(menus[ i ].title, menus[ i ].subMenu)\n      }\n    }\n\n    return menu\n  }\n\n  /**\n\t * Create sub menu\n\t * @param {string} title - Sub menu title\n\t * @param {array} items - Item array list\n\t * @return {HTMLDomElement} - A span element\n\t */\n  PANOLENS.Widget.prototype.createSubMenu = function (title, items) {\n    var scope = this, menu, subMenu = this.createMenu()\n\n    subMenu.items = items\n    subMenu.activeItem\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      menu = scope.mainMenu\n      menu.changeSize(menu._width)\n      menu.unslideAll()\n      menu.show()\n      subMenu.slideAll(true)\n      subMenu.hide()\n\n      if (this.type !== 'header') {\n        subMenu.setActiveItem(this)\n        scope.activeMainItem.setSelectionTitle(this.textContent)\n\n        this.handler && this.handler()\n      }\n    }\n\n    subMenu.addHeader(title).addIcon(undefined, true, true).addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false)\n\n    for (var i = 0; i < items.length; i++) {\n      var item = subMenu.addItem(items[ i ].title)\n\n      item.style.fontWeight = 300\n      item.handler = items[ i ].handler\n      item.addIcon(' ', true)\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false)\n\n      if (!subMenu.activeItem) {\n        subMenu.setActiveItem(item)\n      }\n    }\n\n    subMenu.slideAll(true)\n\n    return subMenu\n  }\n\n  /**\n\t * Create general menu\n\t * @return {HTMLDomElement} - A span element\n\t */\n  PANOLENS.Widget.prototype.createMenu = function () {\n    var scope = this, menu = document.createElement('span'), style\n\n    style = menu.style\n\n    style.padding = '5px 0'\n    style.position = 'fixed'\n    style.bottom = '100%'\n    style.right = '14px'\n    style.backgroundColor = '#fafafa'\n    style.fontFamily = 'Helvetica Neue'\n    style.fontSize = '14px'\n    style.visibility = 'hidden'\n    style.opacity = 0\n    style.boxShadow = '0 0 12pt rgba(0,0,0,0.25)'\n  \t\tstyle.borderRadius = '2px'\n    style.overflow = 'hidden'\n    style.willChange = 'width, height, opacity'\n    style.pointerEvents = 'auto'\n    style.transition = this.DEFAULT_TRANSITION\n\n    menu.visible = false\n\n    menu.changeSize = function (width, height) {\n      if (width) {\n        this.style.width = width + 'px'\n      }\n\n      if (height) {\n        this.style.height = height + 'px'\n      }\n    }\n\n    menu.show = function () {\n      this.style.opacity = 1\n      this.style.visibility = 'visible'\n      this.visible = true\n    }\n\n    menu.hide = function () {\n      this.style.opacity = 0\n      this.style.visibility = 'hidden'\n      this.visible = false\n    }\n\n    menu.toggle = function () {\n      if (this.visible) {\n        this.hide()\n      } else {\n        this.show()\n      }\n    }\n\n    menu.slideAll = function (right) {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[ i ].slide) {\n          menu.children[ i ].slide(right)\n        }\n      }\n    }\n\n    menu.unslideAll = function () {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[ i ].unslide) {\n          menu.children[ i ].unslide()\n        }\n      }\n    }\n\n    menu.addHeader = function (title) {\n      var header = scope.createMenuItemHeader(title)\n      header.type = 'header'\n\n      this.appendChild(header)\n\n      return header\n    }\n\n    menu.addItem = function (title) {\n      var item = scope.createMenuItem(title)\n      item.type = 'item'\n\n      this.appendChild(item)\n\n      return item\n    }\n\n    menu.setActiveItem = function (item) {\n      if (this.activeItem) {\n        this.activeItem.setIcon(' ')\n      }\n\n      item.setIcon(PANOLENS.DataImage.Check)\n\n      this.activeItem = item\n    }\n\n    menu.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true)\n    menu.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true)\n    menu.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true)\n\n    return menu\n  }\n\n  /**\n\t * Create custom item element\n\t * @return {HTMLSpanElement} - The dom element icon\n\t */\n  PANOLENS.Widget.prototype.createCustomItem = function (options) {\n    options = options || {}\n\n    var scope = this,\n      item = options.element || document.createElement('span')\n\n    item.style.cursor = 'pointer'\n    item.style.float = 'right'\n    item.style.width = '44px'\n    item.style.height = '100%'\n    item.style.backgroundSize = '60%'\n    item.style.backgroundRepeat = 'no-repeat'\n    item.style.backgroundPosition = 'center'\n    item.style.webkitUserSelect =\n\t\titem.style.MozUserSelect =\n\t\titem.style.userSelect = 'none'\n    item.style.position = 'relative'\n    item.style.pointerEvents = 'auto'\n\n    // White glow on icon\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function () {\n      item.style.filter =\n\t\t\titem.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))'\n    })\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function () {\n      item.style.filter =\n\t\t\titem.style.webkitFilter = ''\n    })\n\n    item = this.mergeStyleOptions(item, options.style)\n\n    if (options.onTap) {\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false)\n    }\n\n    item.dispose = function () {\n      item.removeEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false)\n\n      options.onDispose && options.onDispose()\n    }\n\n    return item\n  }\n\n  /**\n\t * Merge item css style\n\t * @param  {HTMLDOMElement} element - The element to be merged with style\n\t * @param  {object} options - The style options\n\t * @return {HTMLDOMElement} - The same element with merged styles\n\t */\n  PANOLENS.Widget.prototype.mergeStyleOptions = function (element, options) {\n    options = options || {}\n\n    for (var property in options) {\n      if (options.hasOwnProperty(property)) {\n        element.style[ property ] = options[ property ]\n      }\n    }\n\n    return element\n  }\n\n  /**\n\t * Dispose widgets by detaching dom elements from container\n\t */\n  PANOLENS.Widget.prototype.dispose = function () {\n    if (this.barElement) {\n      this.container.removeChild(this.barElement)\n      this.barElement.dispose()\n      this.barElement = null\n    }\n  }\n})(); (function () {\n  /**\n\t * Information spot attached to panorama\n\t * @constructor\n\t * @param {number} [scale=300] - Infospot scale\n\t * @param {imageSrc} [imageSrc=PANOLENS.DataImage.Info] - Image overlay info\n\t * @param {boolean} [animated=true] - Enable default hover animation\n\t */\n  PANOLENS.Infospot = function (scale, imageSrc, animated) {\n    var scope = this, ratio, startScale, endScale, duration\n\n    scale = scale || 300\n    imageSrc = imageSrc || PANOLENS.DataImage.Info\n    duration = 500\n\n    THREE.Sprite.call(this)\n\n    this.type = 'infospot'\n\n    this.animated = animated !== undefined ? animated : true\n    this.isHovering = false\n    this.visible = false\n\n    this.element\n    this.toPanorama\n    this.cursorStyle\n\n    this.mode = PANOLENS.Modes.UNKNOWN\n\n    this.scale.set(scale, scale, 1)\n    this.rotation.y = Math.PI\n    this.scaleFactor = 1.3\n\n    this.container\n\n    // Event Handler\n    this.HANDLER_FOCUS\n\n    PANOLENS.Utils.TextureLoader.load(imageSrc, postLoad)\n\n    function postLoad (texture) {\n      texture.wrapS = THREE.RepeatWrapping\n      texture.repeat.x = -1\n\n      texture.image.width = texture.image.naturalWidth || 64\n      texture.image.height = texture.image.naturalHeight || 64\n\n      ratio = texture.image.width / texture.image.height\n      scope.scale.set(ratio * scale, scale, 1)\n\n      startScale = scope.scale.clone()\n\n      scope.scaleUpAnimation = new TWEEN.Tween(scope.scale)\n        .to({ x: startScale.x * scope.scaleFactor, y: startScale.y * scope.scaleFactor }, duration)\n        .easing(TWEEN.Easing.Elastic.Out)\n\n      scope.scaleDownAnimation = new TWEEN.Tween(scope.scale)\n        .to({ x: startScale.x, y: startScale.y }, duration)\n        .easing(TWEEN.Easing.Elastic.Out)\n\n      scope.material.side = THREE.DoubleSide\n      scope.material.map = texture\n      scope.material.depthTest = false\n      scope.material.needsUpdate = true\n    }\n\n    function show () {\n      this.visible = true\n    }\n\n    function hide () {\n      this.visible = false\n    }\n\n    // Add show and hide animations\n    this.showAnimation = new TWEEN.Tween(this.material)\n      .to({ opacity: 1 }, duration)\n      .onStart(show.bind(this))\n      .easing(TWEEN.Easing.Quartic.Out)\n\n    this.hideAnimation = new TWEEN.Tween(this.material)\n      .to({ opacity: 0 }, duration)\n      .onComplete(hide.bind(this))\n      .easing(TWEEN.Easing.Quartic.Out)\n\n    // Attach event listeners\n    this.addEventListener('click', this.onClick)\n    this.addEventListener('hover', this.onHover)\n    this.addEventListener('hoverenter', this.onHoverStart)\n    this.addEventListener('hoverleave', this.onHoverEnd)\n    this.addEventListener('panolens-dual-eye-effect', this.onDualEyeEffect)\n    this.addEventListener('panolens-container', this.setContainer.bind(this))\n    this.addEventListener('dismiss', this.onDismiss)\n    this.addEventListener('panolens-infospot-focus', this.setFocusMethod)\n  }\n\n  PANOLENS.Infospot.prototype = Object.create(THREE.Sprite.prototype)\n\n  /**\n\t * Set infospot container\n\t * @param {HTMLElement|object} data - Data with container information\n\t */\n  PANOLENS.Infospot.prototype.setContainer = function (data) {\n    var container\n\n    if (data instanceof HTMLElement) {\n      container = data\n    } else if (data && data.container) {\n      container = data.container\n    }\n\n    // Append element if exists\n    if (container && this.element) {\n      container.appendChild(this.element)\n    }\n\n    this.container = container\n  }\n\n  /**\n\t * Get container\n\t * @return {HTMLElement} - The container of this infospot\n\t */\n  PANOLENS.Infospot.prototype.getContainer = function () {\n    return this.container\n  }\n\n  /**\n\t * This will be called by a click event\n\t * Translate and lock the hovering element if any\n\t * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t */\n  PANOLENS.Infospot.prototype.onClick = function (event) {\n    if (this.element && this.getContainer()) {\n      this.onHoverStart(event)\n\n      // Lock element\n      this.lockHoverElement()\n    }\n  }\n\n  /**\n\t * Dismiss current element if any\n\t * @param  {object} event - Dismiss event\n\t */\n  PANOLENS.Infospot.prototype.onDismiss = function (event) {\n    if (this.element) {\n      this.unlockHoverElement()\n      this.onHoverEnd()\n    }\n  }\n\n  /**\n\t * This will be called by a mouse hover event\n\t * Translate the hovering element if any\n\t * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t */\n  PANOLENS.Infospot.prototype.onHover = function (event) {\n\n  }\n\n  /**\n\t * This will be called on a mouse hover start\n\t * Sets cursor style to 'pointer', display the element and scale up the infospot\n\t */\n  PANOLENS.Infospot.prototype.onHoverStart = function (event) {\n    if (!this.getContainer()) { return }\n\n    var cursorStyle = this.cursorStyle || (this.mode === PANOLENS.Modes.NORMAL ? 'pointer' : 'default')\n\n    this.isHovering = true\n    this.container.style.cursor = cursorStyle\n\n    if (this.animated) {\n      this.scaleDownAnimation && this.scaleDownAnimation.stop()\n      this.scaleUpAnimation && this.scaleUpAnimation.start()\n    }\n\n    if (this.element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0) {\n      if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n        this.element.style.display = 'none'\n        this.element.left && (this.element.left.style.display = 'block')\n        this.element.right && (this.element.right.style.display = 'block')\n\n        // Store element width for reference\n        this.element._width = this.element.left.clientWidth\n        this.element._height = this.element.left.clientHeight\n      } else {\n        this.element.style.display = 'block'\n        this.element.left && (this.element.left.style.display = 'none')\n        this.element.right && (this.element.right.style.display = 'none')\n\n        // Store element width for reference\n        this.element._width = this.element.clientWidth\n        this.element._height = this.element.clientHeight\n      }\n    }\n  }\n\n  /**\n\t * This will be called on a mouse hover end\n\t * Sets cursor style to 'default', hide the element and scale down the infospot\n\t */\n  PANOLENS.Infospot.prototype.onHoverEnd = function () {\n    if (!this.getContainer()) { return }\n\n    this.isHovering = false\n    this.container.style.cursor = 'default'\n\n    if (this.animated) {\n      this.scaleUpAnimation && this.scaleUpAnimation.stop()\n      this.scaleDownAnimation && this.scaleDownAnimation.start()\n    }\n\n    if (this.element && !this.element.locked) {\n      this.element.style.display = 'none'\n      this.element.left && (this.element.left.style.display = 'none')\n      this.element.right && (this.element.right.style.display = 'none')\n\n      this.unlockHoverElement()\n    }\n  }\n\n  /**\n\t * On dual eye effect handler\n\t * Creates duplicate left and right element\n\t * @param  {object} event - panolens-dual-eye-effect event\n\t */\n  PANOLENS.Infospot.prototype.onDualEyeEffect = function (event) {\n    if (!this.getContainer()) { return }\n\n    var element, halfWidth, halfHeight\n\n    this.mode = event.mode\n\n    element = this.element\n\n    halfWidth = this.container.clientWidth / 2\n    halfHeight = this.container.clientHeight / 2\n\n    if (!element) {\n      return\n    }\n\n    if (!element.left || !element.right) {\n      element.left = element.cloneNode(true)\n      element.right = element.cloneNode(true)\n    }\n\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      element.left.style.display = element.style.display\n      element.right.style.display = element.style.display\n      element.style.display = 'none'\n    } else {\n      element.style.display = element.left.style.display\n      element.left.style.display = 'none'\n      element.right.style.display = 'none'\n    }\n\n    // Update elements translation\n    this.translateElement(halfWidth, halfHeight)\n\n    this.container.appendChild(element.left)\n    this.container.appendChild(element.right)\n  }\n\n  /**\n\t * Translate the hovering element by css transform\n\t * @param  {number} x - X position on the window screen\n\t * @param  {number} y - Y position on the window screen\n\t */\n  PANOLENS.Infospot.prototype.translateElement = function (x, y) {\n    if (!this.element._width || !this.element._height || !this.getContainer()) {\n      return\n    }\n\n    var left, top, element, width, height, delta, container\n\n    container = this.container\n    element = this.element\n    width = element._width / 2\n    height = element._height / 2\n    delta = element.verticalDelta !== undefined ? element.verticalDelta : 40\n\n    left = x - width\n    top = y - height - delta\n\n    if ((this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) &&\n\t\t\t\telement.left && element.right &&\n\t\t\t\t!(x === container.clientWidth / 2 && y === container.clientHeight / 2)) {\n      left = container.clientWidth / 4 - width + (x - container.clientWidth / 2)\n      top = container.clientHeight / 2 - height - delta + (y - container.clientHeight / 2)\n\n      this.setElementStyle('transform', element.left, 'translate(' + left + 'px, ' + top + 'px)')\n\n      left += container.clientWidth / 2\n\n      this.setElementStyle('transform', element.right, 'translate(' + left + 'px, ' + top + 'px)')\n    } else {\n      this.setElementStyle('transform', element, 'translate(' + left + 'px, ' + top + 'px)')\n    }\n  }\n\n  /**\n\t * Set vendor specific css\n\t * @param {string} type - CSS style name\n\t * @param {HTMLElement} element - The element to be modified\n\t * @param {string} value - Style value\n\t */\n  PANOLENS.Infospot.prototype.setElementStyle = function (type, element, value) {\n    var style = element.style\n\n    if (type === 'transform') {\n      style.webkitTransform = style.msTransform = style.transform = value\n    }\n  }\n\n  /**\n\t * Set hovering text content\n\t * @param {string} text - Text to be displayed\n\t */\n  PANOLENS.Infospot.prototype.setText = function (text) {\n    if (this.element) {\n      this.element.textContent = text\n    }\n  }\n\n  /**\n\t * Set cursor css style on hover\n\t */\n  PANOLENS.Infospot.prototype.setCursorHoverStyle = function (style) {\n    this.cursorStyle = style\n  }\n\n  /**\n\t * Add hovering text element\n\t * @param {string} text - Text to be displayed\n\t * @param {number} [delta=40] - Vertical delta to the infospot\n\t */\n  PANOLENS.Infospot.prototype.addHoverText = function (text, delta) {\n    if (!this.element) {\n      this.element = document.createElement('div')\n      this.element.style.display = 'none'\n      this.element.style.color = '#fff'\n      this.element.style.top = 0\n      this.element.style.maxWidth = '50%'\n      this.element.style.maxHeight = '50%'\n      this.element.style.textShadow = '0 0 3px #000000'\n      this.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif'\n      this.element.style.position = 'absolute'\n      this.element.classList.add('panolens-infospot')\n      this.element.verticalDelta = delta !== undefined ? delta : 40\n    }\n\n    this.setText(text)\n  }\n\n  /**\n\t * Add hovering element by cloning an element\n\t * @param {HTMLDOMElement} el - Element to be cloned and displayed\n\t * @param {number} [delta=40] - Vertical delta to the infospot\n\t */\n  PANOLENS.Infospot.prototype.addHoverElement = function (el, delta) {\n    if (!this.element) {\n      this.element = el.cloneNode(true)\n      this.element.style.display = 'none'\n      this.element.style.top = 0\n      this.element.style.position = 'absolute'\n      this.element.classList.add('panolens-infospot')\n      this.element.verticalDelta = delta !== undefined ? delta : 40\n    }\n  }\n\n  /**\n\t * Remove hovering element\n\t */\n  PANOLENS.Infospot.prototype.removeHoverElement = function () {\n    if (this.element) {\n      if (this.element.left) {\n        this.container.removeChild(this.element.left)\n        this.element.left = null\n      }\n\n      if (this.element.right) {\n        this.container.removeChild(this.element.right)\n        this.element.right = null\n      }\n\n      this.container.removeChild(this.element)\n      this.element = null\n    }\n  }\n\n  /**\n\t * Lock hovering element\n\t */\n  PANOLENS.Infospot.prototype.lockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = true\n    }\n  }\n\n  /**\n\t * Unlock hovering element\n\t */\n  PANOLENS.Infospot.prototype.unlockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = false\n    }\n  }\n\n  /**\n\t * Show infospot\n\t * @param  {number} [delay=0] - Delay time to show\n\t */\n  PANOLENS.Infospot.prototype.show = function (delay) {\n    delay = delay || 0\n\n    if (this.animated) {\n      this.hideAnimation && this.hideAnimation.stop()\n      this.showAnimation && this.showAnimation.delay(delay).start()\n    }\n  }\n\n  /**\n\t * Hide infospot\n\t * @param  {number} [delay=0] - Delay time to hide\n\t */\n  PANOLENS.Infospot.prototype.hide = function (delay) {\n    delay = delay || 0\n\n    if (this.animated) {\n      this.showAnimation && this.showAnimation.stop()\n      this.hideAnimation && this.hideAnimation.delay(delay).start()\n    }\n  }\n\n  /**\n\t * Set focus event handler\n\t */\n  PANOLENS.Infospot.prototype.setFocusMethod = function (event) {\n    if (event) {\n      this.HANDLER_FOCUS = event.method\n    }\n  }\n\n  /**\n\t * Focus camera center to this infospot\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n  PANOLENS.Infospot.prototype.focus = function (duration, easing) {\n    if (this.HANDLER_FOCUS) {\n      this.HANDLER_FOCUS(this.position, duration, easing)\n      this.onDismiss()\n    }\n  }\n\n  /**\n\t * Dispose infospot\n\t */\n  PANOLENS.Infospot.prototype.dispose = function () {\n    this.removeHoverElement()\n    this.material.dispose()\n\n    if (this.parent) {\n      this.parent.remove(this)\n    }\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Viewer contains pre-defined scene, camera and renderer\n\t * @constructor\n\t * @param {object} [options] - Use custom or default config options\n\t * @param {HTMLElement} [options.container] - A HTMLElement to host the canvas\n\t * @param {THREE.Scene} [options.scene=THREE.Scene] - A THREE.Scene which contains panorama and 3D objects\n\t * @param {THREE.Camera} [options.camera=THREE.PerspectiveCamera] - A THREE.Camera to view the scene\n\t * @param {THREE.WebGLRenderer} [options.renderer=THREE.WebGLRenderer] - A THREE.WebGLRenderer to render canvas\n\t * @param {boolean} [options.controlBar=true] - Show/hide control bar on the bottom of the container\n\t * @param {array}   [options.controlButtons=[]] - Button names to mount on controlBar if controlBar exists, Defaults to ['fullscreen', 'setting', 'video']\n\t * @param {boolean} [options.autoHideControlBar=false] - Auto hide control bar when click on non-active area\n\t * @param {boolean} [options.autoHideInfospot=true] - Auto hide infospots when click on non-active area\n\t * @param {boolean} [options.horizontalView=false] - Allow only horizontal camera control\n\t * @param {number}  [options.clickTolerance=10] - Distance tolerance to tigger click / tap event\n\t * @param {number}  [options.cameraFov=60] - Camera field of view value\n\t * @param {boolean} [options.reverseDragging=false] - Reverse dragging direction\n\t * @param {boolean} [options.enableReticle=false] - Enable reticle for mouseless interaction other than VR mode\n\t * @param {number}  [options.dwellTime=1500] - Dwell time for reticle selection\n\t * @param {boolean} [options.autoReticleSelect=true] - Auto select a clickable target after dwellTime\n\t * @param {boolean} [options.viewIndicator=false] - Adds an angle view indicator in upper left corner\n\t * @param {number}  [options.indicatorSize=30] - Size of View Indicator\n\t * @param {string}  [options.output='none'] - Whether and where to output raycast position. Could be 'console' or 'overlay'\n\t */\n  PANOLENS.Viewer = function (options) {\n    THREE.EventDispatcher.call(this)\n\n    if (!THREE) {\n      console.error('Three.JS not found')\n\n      return\n    }\n\n    var container\n\n    options = options || {}\n    options.controlBar = options.controlBar !== undefined ? options.controlBar : true\n    options.controlButtons = options.controlButtons || [ 'fullscreen', 'setting', 'video' ]\n    options.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false\n    options.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true\n    options.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false\n    options.clickTolerance = options.clickTolerance || 10\n    options.cameraFov = options.cameraFov || 60\n    options.reverseDragging = options.reverseDragging || false\n    options.enableReticle = options.enableReticle || false\n    options.dwellTime = options.dwellTime || 1500\n    options.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true\n    options.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false\n    options.indicatorSize = options.indicatorSize || 30\n    options.output = options.output ? options.output : 'none'\n\n    this.options = options\n\n    // Container\n    if (options.container) {\n      container = options.container\n      container._width = container.clientWidth\n      container._height = container.clientHeight\n    } else {\n      container = document.createElement('div')\n      container.classList.add('panolens-container')\n      container.style.width = '100%'\n      container.style.height = '100%'\n      container._width = window.innerWidth\n      container._height = window.innerHeight\n      document.body.appendChild(container)\n    }\n\n    this.container = container\n\n    this.camera = options.camera || new THREE.PerspectiveCamera(this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 10000)\n    this.scene = options.scene || new THREE.Scene()\n    this.renderer = options.renderer || new THREE.WebGLRenderer({ alpha: true, antialias: false })\n\n    this.viewIndicatorSize = options.indicatorSize\n\n    this.reticle = {}\n    this.tempEnableReticle = this.options.enableReticle\n\n    this.mode = PANOLENS.Modes.NORMAL\n\n    this.OrbitControls\n    this.DeviceOrientationControls\n\n    this.CardboardEffect\n    this.StereoEffect\n\n    this.controls\n    this.effect\n    this.panorama\n    this.widget\n\n    this.hoverObject\n    this.infospot\n    this.pressEntityObject\n    this.pressObject\n\n    this.raycaster = new THREE.Raycaster()\n    this.raycasterPoint = new THREE.Vector2()\n    this.userMouse = new THREE.Vector2()\n    this.updateCallbacks = []\n    this.requestAnimationId\n\n    this.cameraFrustum = new THREE.Frustum()\n    this.cameraViewProjectionMatrix = new THREE.Matrix4()\n\n    this.outputDivElement\n\n    // Handler references\n    this.HANDLER_MOUSE_DOWN = this.onMouseDown.bind(this)\n    this.HANDLER_MOUSE_UP = this.onMouseUp.bind(this)\n    this.HANDLER_MOUSE_MOVE = this.onMouseMove.bind(this)\n    this.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind(this)\n    this.HANDLER_KEY_DOWN = this.onKeyDown.bind(this)\n    this.HANDLER_KEY_UP = this.onKeyUp.bind(this)\n    this.HANDLER_TAP = this.onTap.bind(this, {\n      clientX: this.container.clientWidth / 2,\n      clientY: this.container.clientHeight / 2\n    })\n\n    // Flag for infospot output\n    this.OUTPUT_INFOSPOT = false\n\n    // Animations\n    this.tweenLeftAnimation = new TWEEN.Tween()\n    this.tweenUpAnimation = new TWEEN.Tween()\n\n    // Renderer\n    this.renderer.setPixelRatio(window.devicePixelRatio)\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight)\n    this.renderer.setClearColor(0x000000, 1)\n    this.renderer.sortObjects = false\n\n    // Append Renderer Element to container\n    this.renderer.domElement.classList.add('panolens-canvas')\n    this.renderer.domElement.style.display = 'block'\n    this.container.style.backgroundColor = '#000'\n    this.container.appendChild(this.renderer.domElement)\n\n    // Camera Controls\n    this.OrbitControls = new THREE.OrbitControls(this.camera, this.container)\n    this.OrbitControls.name = 'orbit'\n    this.OrbitControls.minDistance = 1\n    this.OrbitControls.noPan = true\n    this.DeviceOrientationControls = new THREE.DeviceOrientationControls(this.camera, this.container)\n    this.DeviceOrientationControls.name = 'device-orientation'\n    this.DeviceOrientationControls.enabled = false\n    this.camera.position.z = 1\n\n    // Register change event if passiveRenering\n    if (this.options.passiveRendering) {\n      console.warn('passiveRendering is now deprecated')\n    }\n\n    // Controls\n    this.controls = [ this.OrbitControls, this.DeviceOrientationControls ]\n    this.control = this.OrbitControls\n\n    // Cardboard effect\n    this.CardboardEffect = new THREE.CardboardEffect(this.renderer)\n    this.CardboardEffect.setSize(this.container.clientWidth, this.container.clientHeight)\n\n    // Stereo effect\n    this.StereoEffect = new THREE.StereoEffect(this.renderer)\n    this.StereoEffect.setSize(this.container.clientWidth, this.container.clientHeight)\n\n    this.effect = this.CardboardEffect\n\n    // Add default hidden reticle\n    this.addReticle()\n\n    // Lock horizontal view\n    if (this.options.horizontalView) {\n      this.OrbitControls.minPolarAngle = Math.PI / 2\n      this.OrbitControls.maxPolarAngle = Math.PI / 2\n    }\n\n    // Add Control UI\n    if (this.options.controlBar !== false) {\n      this.addDefaultControlBar(this.options.controlButtons)\n    }\n\n    // Add View Indicator\n    if (this.options.viewIndicator) {\n      this.addViewIndicator()\n    }\n\n    // Reverse dragging direction\n    if (this.options.reverseDragging) {\n      this.reverseDraggingDirection()\n    }\n\n    // Register event if reticle is enabled, otherwise defaults to mouse\n    if (this.options.enableReticle) {\n      this.enableReticleControl()\n    } else {\n      this.registerMouseAndTouchEvents()\n    }\n\n    if (this.options.output === 'overlay') {\n      this.addOutputElement()\n    }\n\n    // Register dom event listeners\n    this.registerEventListeners()\n\n    // Animate\n    this.animate.call(this)\n  }\n\n  PANOLENS.Viewer.prototype = Object.create(THREE.EventDispatcher.prototype)\n\n  PANOLENS.Viewer.prototype.constructor = PANOLENS.Viewer\n\n  /**\n\t * Add an object to the scene\n\t * Automatically hookup with panolens-viewer-handler listener\n\t * to communicate with viewer method\n\t * @param {THREE.Object3D} object - The object to be added\n\t */\n  PANOLENS.Viewer.prototype.add = function (object) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[ i ])\n      }\n\n      return this\n    }\n\n    this.scene.add(object)\n\n    // All object added to scene has 'panolens-viewer-handler' event to handle viewer communication\n    if (object.addEventListener) {\n      object.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this))\n    }\n\n    // All object added to scene being passed with container\n    if (object instanceof PANOLENS.Panorama && object.dispatchEvent) {\n      object.dispatchEvent({ type: 'panolens-container', container: this.container })\n    }\n\n    // Hookup default panorama event listeners\n    if (object.type === 'panorama') {\n      this.addPanoramaEventListener(object)\n\n      if (!this.panorama) {\n        this.setPanorama(object)\n      }\n    }\n  }\n\n  /**\n\t * Remove an object from the scene\n\t * @param  {THREE.Object3D} object - Object to be removed\n\t */\n  PANOLENS.Viewer.prototype.remove = function (object) {\n    if (object.removeEventListener) {\n      object.removeEventListener('panolens-viewer-handler', this.eventHandler.bind(this))\n    }\n\n    this.scene.remove(object)\n  }\n\n  /**\n\t * Add default control bar\n\t * @param {array} array - The control buttons array\n\t */\n  PANOLENS.Viewer.prototype.addDefaultControlBar = function (array) {\n    var scope = this\n\n    if (this.widget) {\n      console.warn('Default control bar exists')\n      return\n    }\n\n    this.widget = new PANOLENS.Widget(this.container)\n    this.widget.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this))\n    this.widget.addControlBar()\n    array.forEach(function (buttonName) {\n      scope.widget.addControlButton(buttonName)\n    })\n  }\n\n  /**\n\t * Set a panorama to be the current one\n\t * @param {PANOLENS.Panorama} pano - Panorama to be set\n\t */\n  PANOLENS.Viewer.prototype.setPanorama = function (pano) {\n    var scope = this, leavingPanorama = this.panorama\n\n    if (pano.type === 'panorama' && leavingPanorama !== pano) {\n      // Clear exisiting infospot\n      this.hideInfospot()\n\n      var afterEnterComplete = function () {\n        leavingPanorama && leavingPanorama.onLeave()\n        pano.removeEventListener('enter-fade-start', afterEnterComplete)\n      }\n\n      pano.addEventListener('enter-fade-start', afterEnterComplete);\n\n      // Assign and enter panorama\n      (this.panorama = pano).onEnter()\n    }\n  }\n\n  /**\n\t * Event handler to execute commands from child objects\n\t * @param {object} event - The dispatched event with method as function name and data as an argument\n\t */\n  PANOLENS.Viewer.prototype.eventHandler = function (event) {\n    if (event.method && this[ event.method ]) {\n      this[ event.method ](event.data)\n    }\n  }\n\n  /**\n\t * Dispatch event to all descendants\n\t * @param  {object} event - Event to be passed along\n\t */\n  PANOLENS.Viewer.prototype.dispatchEventToChildren = function (event) {\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent(event)\n      }\n    })\n  }\n\n  /**\n\t * Set widget content\n\t * @param  {integer} controlIndex - Control index\n\t * @param  {PANOLENS.Modes} mode - Modes for effects\n\t */\n  PANOLENS.Viewer.prototype.activateWidgetItem = function (controlIndex, mode) {\n    var mainMenu = this.widget.mainMenu\n    var ControlMenuItem = mainMenu.children[ 0 ]\n    var ModeMenuItem = mainMenu.children[ 1 ]\n\n    var item\n\n    if (controlIndex !== undefined) {\n      switch (controlIndex) {\n        case 0:\n\n          item = ControlMenuItem.subMenu.children[ 1 ]\n\n          break\n\n        case 1:\n\n          item = ControlMenuItem.subMenu.children[ 2 ]\n\n          break\n\n        default:\n\n          item = ControlMenuItem.subMenu.children[ 1 ]\n\n          break\n      }\n\n      ControlMenuItem.subMenu.setActiveItem(item)\n      ControlMenuItem.setSelectionTitle(item.textContent)\n    }\n\n    if (mode !== undefined) {\n      switch (mode) {\n        case PANOLENS.Modes.CARDBOARD:\n\n          item = ModeMenuItem.subMenu.children[ 2 ]\n\n          break\n\n        case PANOLENS.Modes.STEREO:\n\n          item = ModeMenuItem.subMenu.children[ 3 ]\n\n          break\n\n        default:\n\n          item = ModeMenuItem.subMenu.children[ 1 ]\n\n          break\n      }\n\n      ModeMenuItem.subMenu.setActiveItem(item)\n      ModeMenuItem.setSelectionTitle(item.textContent)\n    }\n  }\n\n  /**\n\t * Enable rendering effect\n\t * @param  {PANOLENS.Modes} mode - Modes for effects\n\t */\n  PANOLENS.Viewer.prototype.enableEffect = function (mode) {\n    if (this.mode === mode) { return }\n    if (mode === PANOLENS.Modes.NORMAL) { this.disableEffect(); return } else { this.mode = mode }\n\n    var fov = this.camera.fov\n\n    switch (mode) {\n      case PANOLENS.Modes.CARDBOARD:\n\n        this.effect = this.CardboardEffect\n        this.enableReticleControl()\n\n        break\n\n      case PANOLENS.Modes.STEREO:\n\n        this.effect = this.StereoEffect\n        this.enableReticleControl()\n\n        break\n\n      default:\n\n        this.effect = null\n        this.disableReticleControl()\n\n        break\n    }\n\n    this.activateWidgetItem(undefined, this.mode)\n\n    /**\n\t\t * Dual eye effect event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#panolens-dual-eye-effect\n\t\t * @event PANOLENS.Infospot#panolens-dual-eye-effect\n\t\t * @property {PANOLENS.Modes} mode - Current display mode\n\t\t */\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode })\n\n    // Force effect stereo camera to update by refreshing fov\n    this.camera.fov = fov + 10e-3\n    this.effect.setSize(this.container.clientWidth, this.container.clientHeight)\n    this.render()\n    this.camera.fov = fov\n  }\n\n  /**\n\t * Disable additional rendering effect\n\t */\n  PANOLENS.Viewer.prototype.disableEffect = function () {\n    if (this.mode === PANOLENS.Modes.NORMAL) { return }\n\n    this.mode = PANOLENS.Modes.NORMAL\n    this.disableReticleControl()\n\n    this.activateWidgetItem(undefined, this.mode)\n\n    /**\n\t\t * Dual eye effect event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#panolens-dual-eye-effect\n\t\t * @event PANOLENS.Infospot#panolens-dual-eye-effect\n\t\t * @property {PANOLENS.Modes} mode - Current display mode\n\t\t */\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode })\n\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight)\n    this.render()\n  }\n\n  /**\n\t * Enable reticle control\n\t */\n  PANOLENS.Viewer.prototype.enableReticleControl = function () {\n    if (this.reticle.visible) { return }\n    if (!this.reticle.textureLoaded) { this.reticle.loadTextures() }\n\n    this.tempEnableReticle = true\n\n    // Register reticle event and unregister mouse event\n    this.unregisterMouseAndTouchEvents()\n    this.reticle.show()\n    this.registerReticleEvent()\n    this.updateReticleEvent()\n  }\n\n  /**\n\t * Disable reticle control\n\t */\n  PANOLENS.Viewer.prototype.disableReticleControl = function () {\n    this.tempEnableReticle = false\n\n    // Register mouse event and unregister reticle event\n    if (!this.options.enableReticle) {\n      this.reticle.hide()\n      this.unregisterReticleEvent()\n      this.registerMouseAndTouchEvents()\n    } else {\n      this.updateReticleEvent()\n    }\n  }\n\n  /**\n\t * Toggle video play or stop\n\t * @fires PANOLENS.Viewer#video-toggle\n\t */\n  PANOLENS.Viewer.prototype.toggleVideoPlay = function (pause) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      /**\n\t\t\t * Toggle video event\n\t\t\t * @type {object}\n\t\t\t * @event PANOLENS.Viewer#video-toggle\n\t\t\t */\n      this.panorama.dispatchEvent({ type: 'video-toggle', pause: pause })\n    }\n  }\n\n  /**\n\t * Set currentTime in a video\n\t * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t * @fires PANOLENS.Viewer#video-time\n\t */\n  PANOLENS.Viewer.prototype.setVideoCurrentTime = function (percentage) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      /**\n\t\t\t * Setting video time event\n\t\t\t * @type {object}\n\t\t\t * @event PANOLENS.Viewer#video-time\n\t\t\t * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t\t\t */\n      this.panorama.dispatchEvent({ type: 'video-time', percentage: percentage })\n    }\n  }\n\n  /**\n\t * This will be called when video updates if an widget is present\n\t * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t * @fires PANOLENS.Viewer#video-update\n\t */\n  PANOLENS.Viewer.prototype.onVideoUpdate = function (percentage) {\n    /**\n\t\t * Video update event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-update\n\t\t * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'video-update', percentage: percentage })\n  }\n\n  /**\n\t * Add update callback to be called every animation frame\n\t */\n  PANOLENS.Viewer.prototype.addUpdateCallback = function (fn) {\n    if (fn) {\n      this.updateCallbacks.push(fn)\n    }\n  }\n\n  /**\n\t * Remove update callback\n\t * @param  {Function} fn - The function to be removed\n\t */\n  PANOLENS.Viewer.prototype.removeUpdateCallback = function (fn) {\n    var index = this.updateCallbacks.indexOf(fn)\n\n    if (fn && index >= 0) {\n      this.updateCallbacks.splice(index, 1)\n    }\n  }\n\n  /**\n\t * Show video widget\n\t */\n  PANOLENS.Viewer.prototype.showVideoWidget = function () {\n    /**\n\t\t * Show video widget event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-control-show\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-show' })\n  }\n\n  /**\n\t * Hide video widget\n\t */\n  PANOLENS.Viewer.prototype.hideVideoWidget = function () {\n    /**\n\t\t * Hide video widget\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-control-hide\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-hide' })\n  }\n\n  PANOLENS.Viewer.prototype.updateVideoPlayButton = function (paused) {\n    if (this.widget &&\n\t\t\t this.widget.videoElement &&\n\t\t\t this.widget.videoElement.controlButton) {\n      this.widget.videoElement.controlButton.update(paused)\n    }\n  }\n\n  /**\n\t * Add default panorama event listeners\n\t * @param {PANOLENS.Panorama} pano - The panorama to be added with event listener\n\t */\n  PANOLENS.Viewer.prototype.addPanoramaEventListener = function (pano) {\n    var scope = this\n\n    // Set camera control on every panorama\n    pano.addEventListener('enter-fade-start', this.setCameraControl.bind(this))\n\n    // Show and hide widget event only when it's PANOLENS.VideoPanorama\n    if (pano instanceof PANOLENS.VideoPanorama) {\n      pano.addEventListener('enter-fade-start', this.showVideoWidget.bind(this))\n      pano.addEventListener('leave', function () {\n        if (!(this.panorama instanceof PANOLENS.VideoPanorama)) {\n          this.hideVideoWidget.call(this)\n        }\n      }.bind(this))\n    }\n  }\n\n  /**\n\t * Set camera control\n\t */\n  PANOLENS.Viewer.prototype.setCameraControl = function () {\n    this.OrbitControls.target.copy(this.panorama.position)\n  }\n\n  /**\n\t * Get current camera control\n\t * @return {object} - Current navigation control. THREE.OrbitControls or THREE.DeviceOrientationControls\n\t */\n  PANOLENS.Viewer.prototype.getControl = function () {\n    return this.control\n  },\n\n  /**\n\t * Get scene\n\t * @return {THREE.Scene} - Current scene which the viewer is built on\n\t */\n  PANOLENS.Viewer.prototype.getScene = function () {\n    return this.scene\n  }\n\n  /**\n\t * Get camera\n\t * @return {THREE.Camera} - The scene camera\n\t */\n  PANOLENS.Viewer.prototype.getCamera = function () {\n    return this.camera\n  },\n\n  /**\n\t * Get renderer\n\t * @return {THREE.WebGLRenderer} - The renderer using webgl\n\t */\n  PANOLENS.Viewer.prototype.getRenderer = function () {\n    return this.renderer\n  }\n\n  /**\n\t * Get container\n\t * @return {HTMLDOMElement} - The container holds rendererd canvas\n\t */\n  PANOLENS.Viewer.prototype.getContainer = function () {\n    return this.container\n  }\n\n  /**\n\t * Get control name\n\t * @return {string} - Control name. 'orbit' or 'device-orientation'\n\t */\n  PANOLENS.Viewer.prototype.getControlName = function () {\n    return this.control.name\n  }\n\n  /**\n\t * Get next navigation control name\n\t * @return {string} - Next control name\n\t */\n  PANOLENS.Viewer.prototype.getNextControlName = function () {\n    return this.controls[ this.getNextControlIndex() ].name\n  }\n\n  /**\n\t * Get next navigation control index\n\t * @return {number} - Next control index\n\t */\n  PANOLENS.Viewer.prototype.getNextControlIndex = function () {\n    var controls, control, nextIndex\n\n    controls = this.controls\n    control = this.control\n    nextIndex = controls.indexOf(control) + 1\n\n    return (nextIndex >= controls.length) ? 0 : nextIndex\n  }\n\n  /**\n\t * Set field of view of camera\n\t */\n  PANOLENS.Viewer.prototype.setCameraFov = function (fov) {\n    this.camera.fov = fov\n    this.camera.updateProjectionMatrix()\n  }\n\n  /**\n\t * Enable control by index\n\t * @param  {PANOLENS.Controls} index - Index of camera control\n\t */\n  PANOLENS.Viewer.prototype.enableControl = function (index) {\n    index = (index >= 0 && index < this.controls.length) ? index : 0\n\n    this.control.enabled = false\n\n    this.control = this.controls[ index ]\n\n    this.control.enabled = true\n\n    switch (index) {\n      case PANOLENS.Controls.ORBIT:\n\n        this.camera.position.copy(this.panorama.position)\n        this.camera.position.z += 1\n\n        break\n\n      case PANOLENS.Controls.DEVICEORIENTATION:\n\n        this.camera.position.copy(this.panorama.position)\n\n        break\n\n      default:\n\n        break\n    }\n\n    this.control.update()\n\n    this.activateWidgetItem(index, undefined)\n  }\n\n  /**\n\t * Disable current control\n\t */\n  PANOLENS.Viewer.prototype.disableControl = function () {\n    this.control.enabled = false\n  }\n\n  /**\n\t * Toggle next control\n\t */\n  PANOLENS.Viewer.prototype.toggleNextControl = function () {\n    this.enableControl(this.getNextControlIndex())\n  }\n\n  /**\n\t * Screen Space Projection\n\t */\n  PANOLENS.Viewer.prototype.getScreenVector = function (worldVector) {\n    var vector = worldVector.clone()\n    var widthHalf = (this.container.clientWidth) / 2\n    var heightHalf = this.container.clientHeight / 2\n\n    vector.project(this.camera)\n\n    vector.x = (vector.x * widthHalf) + widthHalf\n    vector.y = -(vector.y * heightHalf) + heightHalf\n    vector.z = 0\n\n    return vector\n  }\n\n  /**\n\t * Check Sprite in Viewport\n\t */\n  PANOLENS.Viewer.prototype.checkSpriteInViewport = function (sprite) {\n    this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld)\n    this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse)\n    this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix)\n\n    return sprite.visible && this.cameraFrustum.intersectsSprite(sprite)\n  }\n\n  /**\n\t * Reverse dragging direction\n\t */\n  PANOLENS.Viewer.prototype.reverseDraggingDirection = function () {\n    this.OrbitControls.rotateSpeed *= -1\n    this.OrbitControls.momentumScalingFactor *= -1\n  }\n\n  /**\n\t * Add reticle\n\t */\n  PANOLENS.Viewer.prototype.addReticle = function () {\n    this.reticle = new PANOLENS.Reticle(0xffffff,\n      this.options.autoReticleSelect,\n      PANOLENS.DataImage.ReticleIdle,\n      PANOLENS.DataImage.ReticleDwell,\n      this.options.dwellTime,\n      45)\n    this.reticle.position.z = -10\n    this.camera.add(this.reticle)\n    this.scene.add(this.camera)\n  }\n\n  /**\n\t * Tween control looking center\n\t * @param {THREE.Vector3} vector - Vector to be looked at the center\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n  PANOLENS.Viewer.prototype.tweenControlCenter = function (vector, duration, easing) {\n    if (this.control !== this.OrbitControls) {\n      return\n    }\n\n    // Pass in arguments as array\n    if (vector instanceof Array) {\n      duration = vector[ 1 ]\n      easing = vector[ 2 ]\n      vector = vector[ 0 ]\n    }\n\n    duration = duration !== undefined ? duration : 1000\n    easing = easing || TWEEN.Easing.Exponential.Out\n\n    var scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv\n\n    scope = this\n\n    chv = this.camera.getWorldDirection()\n    cvv = chv.clone()\n\n    vptc = this.panorama.getWorldPosition().sub(this.camera.getWorldPosition())\n\n    hv = vector.clone()\n    // Scale effect\n    hv.x *= -1\n    hv.add(vptc).normalize()\n    vv = hv.clone()\n\n    chv.y = 0\n    hv.y = 0\n\n    ha = Math.atan2(hv.z, hv.x) - Math.atan2(chv.z, chv.x)\n    ha = ha > Math.PI ? ha - 2 * Math.PI : ha\n    ha = ha < -Math.PI ? ha + 2 * Math.PI : ha\n    va = Math.abs(cvv.angleTo(chv) + (cvv.y * vv.y <= 0 ? vv.angleTo(hv) : -vv.angleTo(hv)))\n    va *= vv.y < cvv.y ? 1 : -1\n\n    ov = { left: 0, up: 0 }\n    nv = { left: 0, up: 0 }\n\n    this.tweenLeftAnimation.stop()\n    this.tweenUpAnimation.stop()\n\n    this.tweenLeftAnimation = new TWEEN.Tween(ov)\n      .to({ left: ha }, duration)\n      .easing(easing)\n      .onUpdate(function () {\n        scope.control.rotateLeft(this.left - nv.left)\n        nv.left = this.left\n      })\n      .start()\n\n    this.tweenUpAnimation = new TWEEN.Tween(ov)\n      .to({ up: va }, duration)\n      .easing(easing)\n      .onUpdate(function () {\n        scope.control.rotateUp(this.up - nv.up)\n        nv.up = this.up\n      })\n      .start()\n  }\n\n  /**\n\t * Tween control looking center by object\n\t * @param {THREE.Object3D} object - Object to be looked at the center\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n  PANOLENS.Viewer.prototype.tweenControlCenterByObject = function (object, duration, easing) {\n    var isUnderScalePlaceHolder = false\n\n    object.traverseAncestors(function (ancestor) {\n      if (ancestor.scalePlaceHolder) {\n        isUnderScalePlaceHolder = true\n      }\n    })\n\n    if (isUnderScalePlaceHolder) {\n      var invertXVector = new THREE.Vector3(-1, 1, 1)\n\n      this.tweenControlCenter(object.getWorldPosition().multiply(invertXVector), duration, easing)\n    } else {\n      this.tweenControlCenter(object.getWorldPosition(), duration, easing)\n    }\n  }\n\n  /**\n\t * This is called when window size is changed\n\t * @fires PANOLENS.Viewer#window-resize\n\t * @param {number} [windowWidth] - Specify if custom element has changed width\n\t * @param {number} [windowHeight] - Specify if custom element has changed height\n\t */\n  PANOLENS.Viewer.prototype.onWindowResize = function (windowWidth, windowHeight) {\n    var width, height, expand\n\n    expand = this.container.classList.contains('panolens-container') || this.container.isFullscreen\n\n    if (windowWidth !== undefined && windowHeight !== undefined) {\n      width = windowWidth\n      height = windowHeight\n      this.container._width = windowWidth\n      this.container._height = windowHeight\n    } else {\n      width = expand ? Math.max(document.documentElement.clientWidth, window.innerWidth || 0) : this.container.clientWidth\n      height = expand ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : this.container.clientHeight\n      this.container._width = width\n      this.container._height = height\n    }\n\n    this.camera.aspect = width / height\n    this.camera.updateProjectionMatrix()\n\n    this.renderer.setSize(width, height)\n\n    // Update reticle\n    if (this.options.enableReticle || this.tempEnableReticle) {\n      this.updateReticleEvent()\n    }\n\n    /**\n\t\t * Window resizing event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#window-resize\n\t\t * @property {number} width  - Width of the window\n\t\t * @property {number} height - Height of the window\n\t\t */\n    this.dispatchEvent({ type: 'window-resize', width: width, height: height })\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent({ type: 'window-resize', width: width, height: height })\n      }\n    })\n  }\n\n  PANOLENS.Viewer.prototype.addOutputElement = function () {\n    var element = document.createElement('div')\n    element.style.position = 'absolute'\n    element.style.right = '10px'\n    element.style.top = '10px'\n    element.style.color = '#fff'\n    this.container.appendChild(element)\n    this.outputDivElement = element\n  }\n\n  /**\n\t * Output infospot attach position in developer console by holding down Ctrl button\n\t */\n  PANOLENS.Viewer.prototype.outputInfospotPosition = function () {\n    var intersects, point, panoramaWorldPosition, outputPosition\n\n    intersects = this.raycaster.intersectObject(this.panorama, true)\n\n    if (intersects.length > 0) {\n      point = intersects[0].point\n      panoramaWorldPosition = this.panorama.getWorldPosition()\n\n      // Panorama is scaled -1 on X axis\n      outputPosition = new THREE.Vector3(\n        -(point.x - panoramaWorldPosition.x).toFixed(2),\n        (point.y - panoramaWorldPosition.y).toFixed(2),\n        (point.z - panoramaWorldPosition.z).toFixed(2)\n      )\n\n      switch (this.options.output) {\n        case 'console':\n          console.info(outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z)\n          break\n\n        case 'overlay':\n          this.outputDivElement.textContent = outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z\n          break\n\n        default:\n          break\n      }\n    }\n  }\n\n  PANOLENS.Viewer.prototype.onMouseDown = function (event) {\n    event.preventDefault()\n\n    this.userMouse.x = (event.clientX >= 0) ? event.clientX : event.touches[0].clientX\n    this.userMouse.y = (event.clientY >= 0) ? event.clientY : event.touches[0].clientY\n    this.userMouse.type = 'mousedown'\n    this.onTap(event)\n  }\n\n  PANOLENS.Viewer.prototype.onMouseMove = function (event) {\n    event.preventDefault()\n    this.userMouse.type = 'mousemove'\n    this.onTap(event)\n  }\n\n  PANOLENS.Viewer.prototype.onMouseUp = function (event) {\n    var onTarget = false, type\n\n    this.userMouse.type = 'mouseup'\n\n    type = (this.userMouse.x >= event.clientX - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.x <= event.clientX + this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y >= event.clientY - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y <= event.clientY + this.options.clickTolerance) ||\n\t\t\t\t(event.changedTouches &&\n\t\t\t\tthis.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance)\n      ? 'click' : undefined\n\n    // Event should happen on canvas\n    if (event && event.target && !event.target.classList.contains('panolens-canvas')) { return }\n\n    event.preventDefault()\n\n    if (event.changedTouches && event.changedTouches.length === 1) {\n      onTarget = this.onTap({ clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY }, type)\n    } else {\n      onTarget = this.onTap(event, type)\n    }\n\n    this.userMouse.type = 'none'\n\n    if (onTarget) {\n      return\n    }\n\n    if (type === 'click') {\n      this.options.autoHideInfospot && this.panorama && this.panorama.toggleInfospotVisibility()\n      this.options.autoHideControlBar && this.toggleControlBar()\n    }\n  }\n\n  PANOLENS.Viewer.prototype.onTap = function (event, type) {\n    var intersects, intersect_entity, intersect\n\n    this.raycasterPoint.x = ((event.clientX - this.container.offsetLeft) / this.container.clientWidth) * 2 - 1\n    this.raycasterPoint.y = -((event.clientY - this.container.offsetTop) / this.container.clientHeight) * 2 + 1\n\n    this.raycaster.setFromCamera(this.raycasterPoint, this.camera)\n\n    // Return if no panorama\n    if (!this.panorama) {\n      return\n    }\n\n    // output infospot information\n    if (event.type !== 'mousedown' && PANOLENS.Utils.checkTouchSupported() || this.OUTPUT_INFOSPOT) {\n      this.outputInfospotPosition()\n    }\n\n    intersects = this.raycaster.intersectObjects(this.panorama.children, true)\n\n    intersect_entity = this.getConvertedIntersect(intersects)\n\n    intersect = (intersects.length > 0) ? intersects[0].object : intersect\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event })\n      }\n\n      this.pressEntityObject = undefined\n    }\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect && this.pressObject === intersect && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event })\n      }\n\n      this.pressObject = undefined\n    }\n\n    if (type === 'click') {\n      this.panorama.dispatchEvent({ type: 'click', intersects: intersects, mouseEvent: event })\n\n      if (intersect_entity && intersect_entity.dispatchEvent) {\n        intersect_entity.dispatchEvent({ type: 'click-entity', mouseEvent: event })\n      }\n\n      if (intersect && intersect.dispatchEvent) {\n        intersect.dispatchEvent({ type: 'click', mouseEvent: event })\n      }\n    } else {\n      this.panorama.dispatchEvent({ type: 'hover', intersects: intersects, mouseEvent: event })\n\n      if ((this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity) ||\n\t\t\t\t(this.hoverObject && intersects.length === 0)) {\n        if (this.hoverObject.dispatchEvent) {\n          this.hoverObject.dispatchEvent({ type: 'hoverleave', mouseEvent: event })\n\n          // Cancel dwelling\n          this.reticle.cancelDwelling()\n        }\n\n        this.hoverObject = undefined\n      }\n\n      if (intersect_entity && intersects.length > 0) {\n        if (this.hoverObject !== intersect_entity) {\n          this.hoverObject = intersect_entity\n\n          if (this.hoverObject.dispatchEvent) {\n            this.hoverObject.dispatchEvent({ type: 'hoverenter', mouseEvent: event })\n\n            // Start reticle timer\n            if (this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle) {\n              this.reticle.startDwelling(this.onTap.bind(this, event, 'click'))\n            }\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity) {\n          this.pressEntityObject = intersect_entity\n\n          if (this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressstart-entity', mouseEvent: event })\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressObject != intersect) {\n          this.pressObject = intersect\n\n          if (this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressstart', mouseEvent: event })\n          }\n        }\n\n        if (this.userMouse.type === 'mousemove' || this.options.enableReticle) {\n          if (intersect && intersect.dispatchEvent) {\n            intersect.dispatchEvent({ type: 'hover', mouseEvent: event })\n          }\n\n          if (this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressmove-entity', mouseEvent: event })\n          }\n\n          if (this.pressObject && this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressmove', mouseEvent: event })\n          }\n        }\n      }\n\n      if (!intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event })\n\n        this.pressEntityObject = undefined\n      }\n\n      if (!intersect && this.pressObject && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event })\n\n        this.pressObject = undefined\n      }\n    }\n\n    // Infospot handler\n    if (intersect && intersect instanceof PANOLENS.Infospot) {\n      this.infospot = intersect\n\n      if (type === 'click') {\n        return true\n      }\n    } else if (this.infospot) {\n      this.hideInfospot()\n    }\n  }\n\n  PANOLENS.Viewer.prototype.getConvertedIntersect = function (intersects) {\n    var intersect\n\n    for (var i = 0; i < intersects.length; i++) {\n      if (intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough) {\n        if (intersects[i].object.entity && intersects[i].object.entity.passThrough) {\n          continue\n        } else if (intersects[i].object.entity && !intersects[i].object.entity.passThrough) {\n          intersect = intersects[i].object.entity\n          break\n        } else {\n          intersect = intersects[i].object\n          break\n        }\n      }\n    }\n\n    return intersect\n  }\n\n  PANOLENS.Viewer.prototype.hideInfospot = function (intersects) {\n    if (this.infospot) {\n      this.infospot.onHoverEnd()\n\n      this.infospot = undefined\n    }\n  }\n\n  /**\n\t * Toggle control bar\n\t * @fires [PANOLENS.Viewer#control-bar-toggle]\n\t */\n  PANOLENS.Viewer.prototype.toggleControlBar = function () {\n    /**\n\t\t * Toggle control bar event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#control-bar-toggle\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'control-bar-toggle' })\n  }\n\n  PANOLENS.Viewer.prototype.onKeyDown = function (event) {\n    if (this.options.output && this.options.output !== 'none' && event.key === 'Control') {\n      this.OUTPUT_INFOSPOT = true\n    }\n  }\n\n  PANOLENS.Viewer.prototype.onKeyUp = function (event) {\n    this.OUTPUT_INFOSPOT = false\n  }\n\n  /**\n\t * Update control and callbacks\n\t */\n  PANOLENS.Viewer.prototype.update = function () {\n    TWEEN.update()\n\n    this.updateCallbacks.forEach(function (callback) { callback() })\n\n    this.control.update()\n\n    this.scene.traverse(function (child) {\n      if (child instanceof PANOLENS.Infospot &&\n\t\t\t\tchild.element &&\n\t\t\t\t(this.hoverObject === child ||\n\t\t\t\t\tchild.element.style.display !== 'none' ||\n\t\t\t\t\t(child.element.left && child.element.left.style.display !== 'none') ||\n\t\t\t\t\t(child.element.right && child.element.right.style.display !== 'none'))) {\n        if (this.checkSpriteInViewport(child)) {\n          var vector = this.getScreenVector(child.getWorldPosition())\n          child.translateElement(vector.x, vector.y)\n        } else {\n          child.onDismiss()\n        }\n      }\n    }.bind(this))\n  }\n\n  /**\n\t * Rendering function to be called on every animation frame\n\t */\n  PANOLENS.Viewer.prototype.render = function () {\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      this.effect.render(this.scene, this.camera)\n    } else {\n      this.renderer.render(this.scene, this.camera)\n    }\n  }\n\n  PANOLENS.Viewer.prototype.animate = function () {\n    this.requestAnimationId = window.requestAnimationFrame(this.animate.bind(this))\n\n    this.onChange()\n  }\n\n  PANOLENS.Viewer.prototype.onChange = function () {\n    this.update()\n    this.render()\n  }\n\n  /**\n\t * Register mouse and touch event on container\n\t */\n  PANOLENS.Viewer.prototype.registerMouseAndTouchEvents = function () {\n    this.container.addEventListener('mousedown', \tthis.HANDLER_MOUSE_DOWN, false)\n    this.container.addEventListener('mousemove', \tthis.HANDLER_MOUSE_MOVE, false)\n    this.container.addEventListener('mouseup', \tthis.HANDLER_MOUSE_UP, false)\n    this.container.addEventListener('touchstart', \tthis.HANDLER_MOUSE_DOWN, false)\n    this.container.addEventListener('touchend', \tthis.HANDLER_MOUSE_UP, false)\n  }\n\n  /**\n\t * Unregister mouse and touch event on container\n\t */\n  PANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents = function () {\n    this.container.removeEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false)\n    this.container.removeEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false)\n    this.container.removeEventListener('mouseup', this.HANDLER_MOUSE_UP, false)\n    this.container.removeEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false)\n    this.container.removeEventListener('touchend', this.HANDLER_MOUSE_UP, false)\n  }\n\n  /**\n\t * Register reticle event\n\t */\n  PANOLENS.Viewer.prototype.registerReticleEvent = function () {\n    this.addUpdateCallback(this.HANDLER_TAP)\n  }\n\n  /**\n\t * Unregister reticle event\n\t */\n  PANOLENS.Viewer.prototype.unregisterReticleEvent = function () {\n    this.removeUpdateCallback(this.HANDLER_TAP)\n  }\n\n  /**\n\t * Update reticle event\n\t */\n  PANOLENS.Viewer.prototype.updateReticleEvent = function () {\n    var centerX, centerY\n\n    centerX = this.container.clientWidth / 2 + this.container.offsetLeft\n    centerY = this.container.clientHeight / 2\n\n    this.removeUpdateCallback(this.HANDLER_TAP)\n    this.HANDLER_TAP = this.onTap.bind(this, { clientX: centerX, clientY: centerY })\n    this.addUpdateCallback(this.HANDLER_TAP)\n  }\n\n  /**\n\t * Register container and window listeners\n\t */\n  PANOLENS.Viewer.prototype.registerEventListeners = function () {\n    // Resize Event\n    window.addEventListener('resize', this.HANDLER_WINDOW_RESIZE, true)\n\n    // Keyboard Event\n    window.addEventListener('keydown', this.HANDLER_KEY_DOWN, true)\n    window.addEventListener('keyup', this.HANDLER_KEY_UP, true)\n  }\n\n  /**\n\t * Unregister container and window listeners\n\t */\n  PANOLENS.Viewer.prototype.unregisterEventListeners = function () {\n    // Resize Event\n    window.removeEventListener('resize', this.HANDLER_WINDOW_RESIZE, true)\n\n    // Keyboard Event\n    window.removeEventListener('keydown', this.HANDLER_KEY_DOWN, true)\n    window.removeEventListener('keyup', this.HANDLER_KEY_UP, true)\n  }\n\n  /**\n\t * Dispose all scene objects and clear cache\n\t */\n  PANOLENS.Viewer.prototype.dispose = function () {\n    // Unregister dom event listeners\n    this.unregisterEventListeners()\n\n    // recursive disposal on 3d objects\n    function recursiveDispose (object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i])\n        object.remove(object.children[i])\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose()\n      }\n\n      object.geometry && object.geometry.dispose()\n      object.material && object.material.dispose()\n    }\n\n    recursiveDispose(this.scene)\n\n    // dispose widget\n    if (this.widget) {\n      this.widget.dispose()\n      this.widget = null\n    }\n\n    // clear cache\n    if (THREE.Cache && THREE.Cache.enabled) {\n      THREE.Cache.clear()\n    }\n  }\n\n  /**\n\t * Destory viewer by disposing and stopping requestAnimationFrame\n\t */\n  PANOLENS.Viewer.prototype.destory = function () {\n    this.dispose()\n    this.render()\n    window.cancelAnimationFrame(this.requestAnimationId)\n  }\n\n  /**\n\t * On panorama dispose\n\t */\n  PANOLENS.Viewer.prototype.onPanoramaDispose = function (panorama) {\n    if (panorama instanceof PANOLENS.VideoPanorama) {\n      this.hideVideoWidget()\n    }\n\n    if (panorama === this.panorama) {\n      this.panorama = null\n    }\n  }\n\n  /**\n\t * Load ajax call\n\t * @param {string} url - URL to be requested\n\t * @param {function} [callback] - Callback after request completes\n\t */\n  PANOLENS.Viewer.prototype.loadAsyncRequest = function (url, callback) {\n    var request = new XMLHttpRequest()\n    request.onloadend = function (event) {\n      callback && callback(event)\n    }\n    request.open('GET', url, true)\n    request.send(null)\n  }\n\n  /**\n\t * View indicator in upper left\n\t * */\n  PANOLENS.Viewer.prototype.addViewIndicator = function () {\n    var scope = this\n\n    function loadViewIndicator (asyncEvent) {\n      if (asyncEvent.loaded === 0) return\n\n      var viewIndicatorDiv = asyncEvent.target.responseXML.documentElement\n      viewIndicatorDiv.style.width = scope.viewIndicatorSize + 'px'\n      viewIndicatorDiv.style.height = scope.viewIndicatorSize + 'px'\n      viewIndicatorDiv.style.position = 'absolute'\n      viewIndicatorDiv.style.top = '10px'\n      viewIndicatorDiv.style.left = '10px'\n      viewIndicatorDiv.style.opacity = '0.5'\n      viewIndicatorDiv.style.cursor = 'pointer'\n      viewIndicatorDiv.id = 'panolens-view-indicator-container'\n\n      scope.container.appendChild(viewIndicatorDiv)\n\n      var indicator = viewIndicatorDiv.querySelector('#indicator')\n      var setIndicatorD = function () {\n        scope.radius = scope.viewIndicatorSize * 0.225\n        scope.currentPanoAngle = scope.camera.rotation.y - THREE.Math.degToRad(90)\n        scope.fovAngle = THREE.Math.degToRad(scope.camera.fov)\n        scope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2\n        scope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2\n        scope.leftX = scope.radius * Math.cos(scope.leftAngle)\n        scope.leftY = scope.radius * Math.sin(scope.leftAngle)\n        scope.rightX = scope.radius * Math.cos(scope.rightAngle)\n        scope.rightY = scope.radius * Math.sin(scope.rightAngle)\n        scope.indicatorD = 'M ' + scope.leftX + ' ' + scope.leftY + ' A ' + scope.radius + ' ' + scope.radius + ' 0 0 1 ' + scope.rightX + ' ' + scope.rightY\n\n        if (scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius) {\n          indicator.setAttribute('d', scope.indicatorD)\n        }\n      }\n\n      scope.addUpdateCallback(setIndicatorD)\n\n      var indicatorOnMouseEnter = function () {\n        this.style.opacity = '1'\n      }\n\n      var indicatorOnMouseLeave = function () {\n        this.style.opacity = '0.5'\n      }\n\n      viewIndicatorDiv.addEventListener('mouseenter', indicatorOnMouseEnter)\n      viewIndicatorDiv.addEventListener('mouseleave', indicatorOnMouseLeave)\n    }\n\n    this.loadAsyncRequest(PANOLENS.DataImage.ViewIndicator, loadViewIndicator)\n  }\n\n  /**\n\t * Append custom control item to existing control bar\n\t * @param {object} [option={}] - Style object to overwirte default element style. It takes 'style', 'onTap' and 'group' properties.\n\t */\n  PANOLENS.Viewer.prototype.appendControlItem = function (option) {\n    var item = this.widget.createCustomItem(option)\n\n    if (option.group === 'video') {\n      this.widget.videoElement.appendChild(item)\n    } else {\n      this.widget.barElement.appendChild(item)\n    }\n\n    return item\n  }\n})()\n;(function e (t, n, r) { function s (o, u) { if (!n[o]) { if (!t[o]) { var a = typeof require === 'function' && require; if (!u && a) return a(o, !0); if (i) return i(o, !0); var f = new Error(\"Cannot find module '\" + o + \"'\"); throw f.code = 'MODULE_NOT_FOUND', f } var l = n[o] = {exports: {}}; t[o][0].call(l.exports, function (e) { var n = t[o][1][e]; return s(n || e) }, l, l.exports, e, t, n, r) } return n[o].exports } var i = typeof require === 'function' && require; for (var o = 0; o < r.length; o++)s(r[o]); return s })({1: [function (require, module, exports) {\n  var createLayout = require('layout-bmfont-text')\n  var inherits = require('inherits')\n  var createIndices = require('quad-indices')\n  var buffer = require('three-buffer-vertex-data')\n  var assign = require('object-assign')\n\n  var vertices = require('./lib/vertices')\n  var utils = require('./lib/utils')\n\n  var Base = THREE.BufferGeometry\n\n  module.exports = function createTextGeometry (opt) {\n\t  return new TextGeometry(opt)\n  }\n\n  function TextGeometry (opt) {\n\t  Base.call(this)\n\n\t  if (typeof opt === 'string') {\n\t    opt = { text: opt }\n\t  }\n\n\t  // use these as default values for any subsequent\n\t  // calls to update()\n\t  this._opt = assign({}, opt)\n\n\t  // also do an initial setup...\n\t  if (opt) this.update(opt)\n  }\n\n  inherits(TextGeometry, Base)\n\n  TextGeometry.prototype.update = function (opt) {\n\t  if (typeof opt === 'string') {\n\t    opt = { text: opt }\n\t  }\n\n\t  // use constructor defaults\n\t  opt = assign({}, this._opt, opt)\n\n\t  if (!opt.font) {\n\t    throw new TypeError('must specify a { font } in options')\n\t  }\n\n\t  this.layout = createLayout(opt)\n\n\t  // get vec2 texcoords\n\t  var flipY = opt.flipY !== false\n\n\t  // the desired BMFont data\n\t  var font = opt.font\n\n\t  // determine texture size from font file\n\t  var texWidth = font.common.scaleW\n\t  var texHeight = font.common.scaleH\n\n\t  // get visible glyphs\n\t  var glyphs = this.layout.glyphs.filter(function (glyph) {\n\t    var bitmap = glyph.data\n\t    return bitmap.width * bitmap.height > 0\n\t  })\n\n\t  // provide visible glyphs for convenience\n\t  this.visibleGlyphs = glyphs\n\n\t  // get common vertex data\n\t  var positions = vertices.positions(glyphs)\n\t  var uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY)\n\t  var indices = createIndices({\n\t    clockwise: true,\n\t    type: 'uint16',\n\t    count: glyphs.length\n\t  })\n\n\t  // update vertex data\n\t  buffer.index(this, indices, 1, 'uint16')\n\t  buffer.attr(this, 'position', positions, 2)\n\t  buffer.attr(this, 'uv', uvs, 2)\n\n\t  // update multipage data\n\t  if (!opt.multipage && 'page' in this.attributes) {\n\t    // disable multipage rendering\n\t    this.removeAttribute('page')\n\t  } else if (opt.multipage) {\n\t    var pages = vertices.pages(glyphs)\n\t    // enable multipage rendering\n\t    buffer.attr(this, 'page', pages, 1)\n\t  }\n  }\n\n  TextGeometry.prototype.computeBoundingSphere = function () {\n\t  if (this.boundingSphere === null) {\n\t    this.boundingSphere = new THREE.Sphere()\n\t  }\n\n\t  var positions = this.attributes.position.array\n\t  var itemSize = this.attributes.position.itemSize\n\t  if (!positions || !itemSize || positions.length < 2) {\n\t    this.boundingSphere.radius = 0\n\t    this.boundingSphere.center.set(0, 0, 0)\n\t    return\n\t  }\n\t  utils.computeSphere(positions, this.boundingSphere)\n\t  if (isNaN(this.boundingSphere.radius)) {\n\t    console.error('THREE.BufferGeometry.computeBoundingSphere(): ' +\n\t      'Computed radius is NaN. The ' +\n\t      '\"position\" attribute is likely to have NaN values.')\n\t  }\n  }\n\n  TextGeometry.prototype.computeBoundingBox = function () {\n\t  if (this.boundingBox === null) {\n\t    this.boundingBox = new THREE.Box3()\n\t  }\n\n\t  var bbox = this.boundingBox\n\t  var positions = this.attributes.position.array\n\t  var itemSize = this.attributes.position.itemSize\n\t  if (!positions || !itemSize || positions.length < 2) {\n\t    bbox.makeEmpty()\n\t    return\n\t  }\n\t  utils.computeBox(positions, bbox)\n  }\n}, {'./lib/utils': 2, './lib/vertices': 3, 'inherits': 4, 'layout-bmfont-text': 5, 'object-assign': 26, 'quad-indices': 27, 'three-buffer-vertex-data': 31}],\n2: [function (require, module, exports) {\n  var itemSize = 2\n  var box = { min: [0, 0], max: [0, 0] }\n\n  function bounds (positions) {\n\t  var count = positions.length / itemSize\n\t  box.min[0] = positions[0]\n\t  box.min[1] = positions[1]\n\t  box.max[0] = positions[0]\n\t  box.max[1] = positions[1]\n\n\t  for (var i = 0; i < count; i++) {\n\t    var x = positions[i * itemSize + 0]\n\t    var y = positions[i * itemSize + 1]\n\t    box.min[0] = Math.min(x, box.min[0])\n\t    box.min[1] = Math.min(y, box.min[1])\n\t    box.max[0] = Math.max(x, box.max[0])\n\t    box.max[1] = Math.max(y, box.max[1])\n\t  }\n  }\n\n  module.exports.computeBox = function (positions, output) {\n\t  bounds(positions)\n\t  output.min.set(box.min[0], box.min[1], 0)\n\t  output.max.set(box.max[0], box.max[1], 0)\n  }\n\n  module.exports.computeSphere = function (positions, output) {\n\t  bounds(positions)\n\t  var minX = box.min[0]\n\t  var minY = box.min[1]\n\t  var maxX = box.max[0]\n\t  var maxY = box.max[1]\n\t  var width = maxX - minX\n\t  var height = maxY - minY\n\t  var length = Math.sqrt(width * width + height * height)\n\t  output.center.set(minX + width / 2, minY + height / 2, 0)\n\t  output.radius = length / 2\n  }\n}, {}],\n3: [function (require, module, exports) {\n  module.exports.pages = function pages (glyphs) {\n\t  var pages = new Float32Array(glyphs.length * 4 * 1)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var id = glyph.data.page || 0\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t  })\n\t  return pages\n  }\n\n  module.exports.uvs = function uvs (glyphs, texWidth, texHeight, flipY) {\n\t  var uvs = new Float32Array(glyphs.length * 4 * 2)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var bitmap = glyph.data\n\t    var bw = (bitmap.x + bitmap.width)\n\t    var bh = (bitmap.y + bitmap.height)\n\n\t    // top left position\n\t    var u0 = bitmap.x / texWidth\n\t    var v1 = bitmap.y / texHeight\n\t    var u1 = bw / texWidth\n\t    var v0 = bh / texHeight\n\n\t    if (flipY) {\n\t      v1 = (texHeight - bitmap.y) / texHeight\n\t      v0 = (texHeight - bh) / texHeight\n\t    }\n\n\t    // BL\n\t    uvs[i++] = u0\n\t    uvs[i++] = v1\n\t    // TL\n\t    uvs[i++] = u0\n\t    uvs[i++] = v0\n\t    // TR\n\t    uvs[i++] = u1\n\t    uvs[i++] = v0\n\t    // BR\n\t    uvs[i++] = u1\n\t    uvs[i++] = v1\n\t  })\n\t  return uvs\n  }\n\n  module.exports.positions = function positions (glyphs) {\n\t  var positions = new Float32Array(glyphs.length * 4 * 2)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var bitmap = glyph.data\n\n\t    // bottom left position\n\t    var x = glyph.position[0] + bitmap.xoffset\n\t    var y = glyph.position[1] + bitmap.yoffset\n\n\t    // quad size\n\t    var w = bitmap.width\n\t    var h = bitmap.height\n\n\t    // BL\n\t    positions[i++] = x\n\t    positions[i++] = y\n\t    // TL\n\t    positions[i++] = x\n\t    positions[i++] = y + h\n\t    // TR\n\t    positions[i++] = x + w\n\t    positions[i++] = y + h\n\t    // BR\n\t    positions[i++] = x + w\n\t    positions[i++] = y\n\t  })\n\t  return positions\n  }\n}, {}],\n4: [function (require, module, exports) {\n  if (typeof Object.create === 'function') {\n\t  // implementation from standard node.js 'util' module\n\t  module.exports = function inherits (ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    ctor.prototype = Object.create(superCtor.prototype, {\n\t      constructor: {\n\t        value: ctor,\n\t        enumerable: false,\n\t        writable: true,\n\t        configurable: true\n\t      }\n\t    })\n\t  }\n  } else {\n\t  // old school shim for old browsers\n\t  module.exports = function inherits (ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    var TempCtor = function () {}\n\t    TempCtor.prototype = superCtor.prototype\n\t    ctor.prototype = new TempCtor()\n\t    ctor.prototype.constructor = ctor\n\t  }\n  }\n}, {}],\n5: [function (require, module, exports) {\n  var wordWrap = require('word-wrapper')\n  var xtend = require('xtend')\n  var findChar = require('indexof-property')('id')\n  var number = require('as-number')\n\n  var X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z']\n  var M_WIDTHS = ['m', 'w']\n  var CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n\n  var TAB_ID = '\\t'.charCodeAt(0)\n  var SPACE_ID = ' '.charCodeAt(0)\n  var ALIGN_LEFT = 0,\n\t    ALIGN_CENTER = 1,\n\t    ALIGN_RIGHT = 2\n\n  module.exports = function createLayout (opt) {\n\t  return new TextLayout(opt)\n  }\n\n  function TextLayout (opt) {\n\t  this.glyphs = []\n\t  this._measure = this.computeMetrics.bind(this)\n\t  this.update(opt)\n  }\n\n  TextLayout.prototype.update = function (opt) {\n\t  opt = xtend({\n\t    measure: this._measure\n\t  }, opt)\n\t  this._opt = opt\n\t  this._opt.tabSize = number(this._opt.tabSize, 4)\n\n\t  if (!opt.font) { throw new Error('must provide a valid bitmap font') }\n\n\t  var glyphs = this.glyphs\n\t  var text = opt.text || ''\n\t  var font = opt.font\n\t  this._setupSpaceGlyphs(font)\n\n\t  var lines = wordWrap.lines(text, opt)\n\t  var minWidth = opt.width || 0\n\n\t  // clear glyphs\n\t  glyphs.length = 0\n\n\t  // get max line width\n\t  var maxLineWidth = lines.reduce(function (prev, line) {\n\t    return Math.max(prev, line.width, minWidth)\n\t  }, 0)\n\n\t  // the pen position\n\t  var x = 0\n\t  var y = 0\n\t  var lineHeight = number(opt.lineHeight, font.common.lineHeight)\n\t  var baseline = font.common.base\n\t  var descender = lineHeight - baseline\n\t  var letterSpacing = opt.letterSpacing || 0\n\t  var height = lineHeight * lines.length - descender\n\t  var align = getAlignType(this._opt.align)\n\n\t  // draw text along baseline\n\t  y -= height\n\n\t  // the metrics for this text layout\n\t  this._width = maxLineWidth\n\t  this._height = height\n\t  this._descender = lineHeight - baseline\n\t  this._baseline = baseline\n\t  this._xHeight = getXHeight(font)\n\t  this._capHeight = getCapHeight(font)\n\t  this._lineHeight = lineHeight\n\t  this._ascender = lineHeight - descender - this._xHeight\n\n\t  // layout each glyph\n\t  var self = this\n\t  lines.forEach(function (line, lineIndex) {\n\t    var start = line.start\n\t    var end = line.end\n\t    var lineWidth = line.width\n\t    var lastGlyph\n\n\t    // for each glyph in that line...\n\t    for (var i = start; i < end; i++) {\n\t      var id = text.charCodeAt(i)\n\t      var glyph = self.getGlyph(font, id)\n\t      if (glyph) {\n\t        if (lastGlyph) { x += getKerning(font, lastGlyph.id, glyph.id) }\n\n\t        var tx = x\n\t        if (align === ALIGN_CENTER) { tx += (maxLineWidth - lineWidth) / 2 } else if (align === ALIGN_RIGHT) { tx += (maxLineWidth - lineWidth) }\n\n\t        glyphs.push({\n\t          position: [tx, y],\n\t          data: glyph,\n\t          index: i,\n\t          line: lineIndex\n\t        })\n\n\t        // move pen forward\n\t        x += glyph.xadvance + letterSpacing\n\t        lastGlyph = glyph\n\t      }\n\t    }\n\n\t    // next line down\n\t    y += lineHeight\n\t    x = 0\n\t  })\n\t  this._linesTotal = lines.length\n  }\n\n  TextLayout.prototype._setupSpaceGlyphs = function (font) {\n\t  // These are fallbacks, when the font doesn't include\n\t  // ' ' or '\\t' glyphs\n\t  this._fallbackSpaceGlyph = null\n\t  this._fallbackTabGlyph = null\n\n\t  if (!font.chars || font.chars.length === 0) { return }\n\n\t  // try to get space glyph\n\t  // then fall back to the 'm' or 'w' glyphs\n\t  // then fall back to the first glyph available\n\t  var space = getGlyphById(font, SPACE_ID) ||\n\t          getMGlyph(font) ||\n\t          font.chars[0]\n\n\t  // and create a fallback for tab\n\t  var tabWidth = this._opt.tabSize * space.xadvance\n\t  this._fallbackSpaceGlyph = space\n\t  this._fallbackTabGlyph = xtend(space, {\n\t    x: 0,\n      y: 0,\n      xadvance: tabWidth,\n      id: TAB_ID,\n\t    xoffset: 0,\n      yoffset: 0,\n      width: 0,\n      height: 0\n\t  })\n  }\n\n  TextLayout.prototype.getGlyph = function (font, id) {\n\t  var glyph = getGlyphById(font, id)\n\t  if (glyph) { return glyph } else if (id === TAB_ID) { return this._fallbackTabGlyph } else if (id === SPACE_ID) { return this._fallbackSpaceGlyph }\n\t  return null\n  }\n\n  TextLayout.prototype.computeMetrics = function (text, start, end, width) {\n\t  var letterSpacing = this._opt.letterSpacing || 0\n\t  var font = this._opt.font\n\t  var curPen = 0\n\t  var curWidth = 0\n\t  var count = 0\n\t  var glyph\n\t  var lastGlyph\n\n\t  if (!font.chars || font.chars.length === 0) {\n\t    return {\n\t      start: start,\n\t      end: start,\n\t      width: 0\n\t    }\n\t  }\n\n\t  end = Math.min(text.length, end)\n\t  for (var i = start; i < end; i++) {\n\t    var id = text.charCodeAt(i)\n\t    var glyph = this.getGlyph(font, id)\n\n\t    if (glyph) {\n\t      // move pen forward\n\t      var xoff = glyph.xoffset\n\t      var kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0\n\t      curPen += kern\n\n\t      var nextPen = curPen + glyph.xadvance + letterSpacing\n\t      var nextWidth = curPen + glyph.width\n\n\t      // we've hit our limit; we can't move onto the next glyph\n\t      if (nextWidth >= width || nextPen >= width) { break }\n\n\t      // otherwise continue along our line\n\t      curPen = nextPen\n\t      curWidth = nextWidth\n\t      lastGlyph = glyph\n\t    }\n\t    count++\n\t  }\n\n\t  // make sure rightmost edge lines up with rendered glyphs\n\t  if (lastGlyph) { curWidth += lastGlyph.xoffset }\n\n\t  return {\n\t    start: start,\n\t    end: start + count,\n\t    width: curWidth\n\t  }\n  }\n\n  // getters for the private vars\n  ;['width', 'height',\n\t  'descender', 'ascender',\n\t  'xHeight', 'baseline',\n\t  'capHeight',\n\t  'lineHeight' ].forEach(addGetter)\n\n  function addGetter (name) {\n\t  Object.defineProperty(TextLayout.prototype, name, {\n\t    get: wrapper(name),\n\t    configurable: true\n\t  })\n  }\n\n  // create lookups for private vars\n  function wrapper (name) {\n\t  return (new Function([\n\t    'return function ' + name + '() {',\n\t    '  return this._' + name,\n\t    '}'\n\t  ].join('\\n')))()\n  }\n\n  function getGlyphById (font, id) {\n\t  if (!font.chars || font.chars.length === 0) { return null }\n\n\t  var glyphIdx = findChar(font.chars, id)\n\t  if (glyphIdx >= 0) { return font.chars[glyphIdx] }\n\t  return null\n  }\n\n  function getXHeight (font) {\n\t  for (var i = 0; i < X_HEIGHTS.length; i++) {\n\t    var id = X_HEIGHTS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) { return font.chars[idx].height }\n\t  }\n\t  return 0\n  }\n\n  function getMGlyph (font) {\n\t  for (var i = 0; i < M_WIDTHS.length; i++) {\n\t    var id = M_WIDTHS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) { return font.chars[idx] }\n\t  }\n\t  return 0\n  }\n\n  function getCapHeight (font) {\n\t  for (var i = 0; i < CAP_HEIGHTS.length; i++) {\n\t    var id = CAP_HEIGHTS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) { return font.chars[idx].height }\n\t  }\n\t  return 0\n  }\n\n  function getKerning (font, left, right) {\n\t  if (!font.kernings || font.kernings.length === 0) { return 0 }\n\n\t  var table = font.kernings\n\t  for (var i = 0; i < table.length; i++) {\n\t    var kern = table[i]\n\t    if (kern.first === left && kern.second === right) { return kern.amount }\n\t  }\n\t  return 0\n  }\n\n  function getAlignType (align) {\n\t  if (align === 'center') { return ALIGN_CENTER } else if (align === 'right') { return ALIGN_RIGHT }\n\t  return ALIGN_LEFT\n  }\n}, {'as-number': 6, 'indexof-property': 7, 'word-wrapper': 8, 'xtend': 9}],\n6: [function (require, module, exports) {\n  module.exports = function numtype (num, def) {\n\t  return typeof num === 'number'\n\t    ? num\n\t    : (typeof def === 'number' ? def : 0)\n  }\n}, {}],\n7: [function (require, module, exports) {\n  module.exports = function compile (property) {\n\t  if (!property || typeof property !== 'string') { throw new Error('must specify property for indexof search') }\n\n\t  return new Function('array', 'value', 'start', [\n\t    'start = start || 0',\n\t    'for (var i=start; i<array.length; i++)',\n\t    '  if (array[i][\"' + property + '\"] === value)',\n\t    '      return i',\n\t    'return -1'\n\t  ].join('\\n'))\n  }\n}, {}],\n8: [function (require, module, exports) {\n  var newline = /\\n/\n  var newlineChar = '\\n'\n  var whitespace = /\\s/\n\n  module.exports = function (text, opt) {\n\t    var lines = module.exports.lines(text, opt)\n\t    return lines.map(function (line) {\n\t        return text.substring(line.start, line.end)\n\t    }).join('\\n')\n  }\n\n  module.exports.lines = function wordwrap (text, opt) {\n\t    opt = opt || {}\n\n\t    // zero width results in nothing visible\n\t    if (opt.width === 0 && opt.mode !== 'nowrap') { return [] }\n\n\t    text = text || ''\n\t    var width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE\n\t    var start = Math.max(0, opt.start || 0)\n\t    var end = typeof opt.end === 'number' ? opt.end : text.length\n\t    var mode = opt.mode\n\n\t    var measure = opt.measure || monospace\n\t    if (mode === 'pre') { return pre(measure, text, start, end, width) } else { return greedy(measure, text, start, end, width, mode) }\n  }\n\n  function idxOf (text, chr, start, end) {\n\t    var idx = text.indexOf(chr, start)\n\t    if (idx === -1 || idx > end) { return end }\n\t    return idx\n  }\n\n  function isWhitespace (chr) {\n\t    return whitespace.test(chr)\n  }\n\n  function pre (measure, text, start, end, width) {\n\t    var lines = []\n\t    var lineStart = start\n\t    for (var i = start; i < end && i < text.length; i++) {\n\t        var chr = text.charAt(i)\n\t        var isNewline = newline.test(chr)\n\n\t        // If we've reached a newline, then step down a line\n\t        // Or if we've reached the EOF\n\t        if (isNewline || i === end - 1) {\n\t            var lineEnd = isNewline ? i : i + 1\n\t            var measured = measure(text, lineStart, lineEnd, width)\n\t            lines.push(measured)\n\n\t            lineStart = i + 1\n\t        }\n\t    }\n\t    return lines\n  }\n\n  function greedy (measure, text, start, end, width, mode) {\n\t    // A greedy word wrapper based on LibGDX algorithm\n\t    // https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/BitmapFontCache.java\n\t    var lines = []\n\n\t    var testWidth = width\n\t    // if 'nowrap' is specified, we only wrap on newline chars\n\t    if (mode === 'nowrap') { testWidth = Number.MAX_VALUE }\n\n\t    while (start < end && start < text.length) {\n\t        // get next newline position\n\t        var newLine = idxOf(text, newlineChar, start, end)\n\n\t        // eat whitespace at start of line\n\t        while (start < newLine) {\n\t            if (!isWhitespace(text.charAt(start))) { break }\n\t            start++\n\t        }\n\n\t        // determine visible # of glyphs for the available width\n\t        var measured = measure(text, start, newLine, testWidth)\n\n\t        var lineEnd = start + (measured.end - measured.start)\n\t        var nextStart = lineEnd + newlineChar.length\n\n\t        // if we had to cut the line before the next newline...\n\t        if (lineEnd < newLine) {\n\t            // find char to break on\n\t            while (lineEnd > start) {\n\t                if (isWhitespace(text.charAt(lineEnd))) { break }\n\t                lineEnd--\n\t            }\n\t            if (lineEnd === start) {\n\t                if (nextStart > start + newlineChar.length) nextStart--\n\t                lineEnd = nextStart // If no characters to break, show all.\n\t            } else {\n\t                nextStart = lineEnd\n\t                // eat whitespace at end of line\n\t                while (lineEnd > start) {\n\t                    if (!isWhitespace(text.charAt(lineEnd - newlineChar.length))) { break }\n\t                    lineEnd--\n\t                }\n\t            }\n\t        }\n\t        if (lineEnd >= start) {\n\t            var result = measure(text, start, lineEnd, testWidth)\n\t            lines.push(result)\n\t        }\n\t        start = nextStart\n\t    }\n\t    return lines\n  }\n\n  // determines the visible number of glyphs within a given width\n  function monospace (text, start, end, width) {\n\t    var glyphs = Math.min(width, end - start)\n\t    return {\n\t        start: start,\n\t        end: start + glyphs\n\t    }\n  }\n}, {}],\n9: [function (require, module, exports) {\n  module.exports = extend\n\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n\n  function extend () {\n\t    var target = {}\n\n\t    for (var i = 0; i < arguments.length; i++) {\n\t        var source = arguments[i]\n\n\t        for (var key in source) {\n\t            if (hasOwnProperty.call(source, key)) {\n\t                target[key] = source[key]\n\t            }\n\t        }\n\t    }\n\n\t    return target\n  }\n}, {}],\n10: [function (require, module, exports) {\n  (function (Buffer) {\n    var xhr = require('xhr')\n    var noop = function () {}\n    var parseASCII = require('parse-bmfont-ascii')\n    var parseXML = require('parse-bmfont-xml')\n    var readBinary = require('parse-bmfont-binary')\n    var isBinaryFormat = require('./lib/is-binary')\n    var xtend = require('xtend')\n\n    var xml2 = (function hasXML2 () {\n\t  return window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()\n    })()\n\n    module.exports = function (opt, cb) {\n\t  cb = typeof cb === 'function' ? cb : noop\n\n\t  if (typeof opt === 'string') { opt = { uri: opt } } else if (!opt) { opt = {} }\n\n\t  var expectBinary = opt.binary\n\t  if (expectBinary) { opt = getBinaryOpts(opt) }\n\n\t  xhr(opt, function (err, res, body) {\n\t    if (err) { return cb(err) }\n\t    if (!/^2/.test(res.statusCode)) { return cb(new Error('http status code: ' + res.statusCode)) }\n\t    if (!body) { return cb(new Error('no body result')) }\n\n\t    var binary = false\n\n\t    // if the response type is an array buffer,\n\t    // we need to convert it into a regular Buffer object\n\t    if (isArrayBuffer(body)) {\n\t      var array = new Uint8Array(body)\n\t      body = new Buffer(array, 'binary')\n\t    }\n\n\t    // now check the string/Buffer response\n\t    // and see if it has a binary BMF header\n\t    if (isBinaryFormat(body)) {\n\t      binary = true\n\t      // if we have a string, turn it into a Buffer\n\t      if (typeof body === 'string') { body = new Buffer(body, 'binary') }\n\t    }\n\n\t    // we are not parsing a binary format, just ASCII/XML/etc\n\t    if (!binary) {\n\t      // might still be a buffer if responseType is 'arraybuffer'\n\t      if (Buffer.isBuffer(body)) { body = body.toString(opt.encoding) }\n\t      body = body.trim()\n\t    }\n\n\t    var result\n\t    try {\n\t      var type = res.headers['content-type']\n\t      if (binary) { result = readBinary(body) } else if (/json/.test(type) || body.charAt(0) === '{') { result = JSON.parse(body) } else if (/xml/.test(type) || body.charAt(0) === '<') { result = parseXML(body) } else { result = parseASCII(body) }\n\t    } catch (e) {\n\t      cb(new Error('error parsing font ' + e.message))\n\t      cb = noop\n\t    }\n\t    cb(null, result)\n\t  })\n    }\n\n    function isArrayBuffer (arr) {\n\t  var str = Object.prototype.toString\n\t  return str.call(arr) === '[object ArrayBuffer]'\n    }\n\n    function getBinaryOpts (opt) {\n\t  // IE10+ and other modern browsers support array buffers\n\t  if (xml2) { return xtend(opt, { responseType: 'arraybuffer' }) }\n\n\t  if (typeof window.XMLHttpRequest === 'undefined') { throw new Error('your browser does not support XHR loading') }\n\n\t  // IE9 and XML1 browsers could still use an override\n\t  var req = new window.XMLHttpRequest()\n\t  req.overrideMimeType('text/plain; charset=x-user-defined')\n\t  return xtend({\n\t    xhr: req\n\t  }, opt)\n    }\n  }).call(this, require('buffer').Buffer)\n}, {'./lib/is-binary': 11, 'buffer': 37, 'parse-bmfont-ascii': 13, 'parse-bmfont-binary': 14, 'parse-bmfont-xml': 15, 'xhr': 18, 'xtend': 25}],\n11: [function (require, module, exports) {\n  (function (Buffer) {\n    var equal = require('buffer-equal')\n    var HEADER = new Buffer([66, 77, 70, 3])\n\n    module.exports = function (buf) {\n\t  if (typeof buf === 'string') { return buf.substring(0, 3) === 'BMF' }\n\t  return buf.length > 4 && equal(buf.slice(0, 4), HEADER)\n    }\n  }).call(this, require('buffer').Buffer)\n}, {'buffer': 37, 'buffer-equal': 12}],\n12: [function (require, module, exports) {\n  var Buffer = require('buffer').Buffer // for use with browserify\n\n  module.exports = function (a, b) {\n\t    if (!Buffer.isBuffer(a)) return undefined\n\t    if (!Buffer.isBuffer(b)) return undefined\n\t    if (typeof a.equals === 'function') return a.equals(b)\n\t    if (a.length !== b.length) return false\n\n\t    for (var i = 0; i < a.length; i++) {\n\t        if (a[i] !== b[i]) return false\n\t    }\n\n\t    return true\n  }\n}, {'buffer': 37}],\n13: [function (require, module, exports) {\n  module.exports = function parseBMFontAscii (data) {\n\t  if (!data) { throw new Error('no data provided') }\n\t  data = data.toString().trim()\n\n\t  var output = {\n\t    pages: [],\n\t    chars: [],\n\t    kernings: []\n\t  }\n\n\t  var lines = data.split(/\\r\\n?|\\n/g)\n\n\t  if (lines.length === 0) { throw new Error('no data in BMFont file') }\n\n\t  for (var i = 0; i < lines.length; i++) {\n\t    var lineData = splitLine(lines[i], i)\n\t    if (!lineData) // skip empty lines\n\t      { continue }\n\n\t    if (lineData.key === 'page') {\n\t      if (typeof lineData.data.id !== 'number') { throw new Error('malformed file at line ' + i + ' -- needs page id=N') }\n\t      if (typeof lineData.data.file !== 'string') { throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"') }\n\t      output.pages[lineData.data.id] = lineData.data.file\n\t    } else if (lineData.key === 'chars' || lineData.key === 'kernings') {\n\t      // ... do nothing for these two ...\n\t    } else if (lineData.key === 'char') {\n\t      output.chars.push(lineData.data)\n\t    } else if (lineData.key === 'kerning') {\n\t      output.kernings.push(lineData.data)\n\t    } else {\n\t      output[lineData.key] = lineData.data\n\t    }\n\t  }\n\n\t  return output\n  }\n\n  function splitLine (line, idx) {\n\t  line = line.replace(/\\t+/g, ' ').trim()\n\t  if (!line) { return null }\n\n\t  var space = line.indexOf(' ')\n\t  if (space === -1) { throw new Error('no named row at line ' + idx) }\n\n\t  var key = line.substring(0, space)\n\n\t  line = line.substring(space + 1)\n\t  // clear \"letter\" field as it is non-standard and\n\t  // requires additional complexity to parse \" / = symbols\n\t  line = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '')\n\t  line = line.split('=')\n\t  line = line.map(function (str) {\n\t    return str.trim().match((/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g))\n\t  })\n\n\t  var data = []\n\t  for (var i = 0; i < line.length; i++) {\n\t    var dt = line[i]\n\t    if (i === 0) {\n\t      data.push({\n\t        key: dt[0],\n\t        data: ''\n\t      })\n\t    } else if (i === line.length - 1) {\n\t      data[data.length - 1].data = parseData(dt[0])\n\t    } else {\n\t      data[data.length - 1].data = parseData(dt[0])\n\t      data.push({\n\t        key: dt[1],\n\t        data: ''\n\t      })\n\t    }\n\t  }\n\n\t  var out = {\n\t    key: key,\n\t    data: {}\n\t  }\n\n\t  data.forEach(function (v) {\n\t    out.data[v.key] = v.data\n\t  })\n\n\t  return out\n  }\n\n  function parseData (data) {\n\t  if (!data || data.length === 0) { return '' }\n\n\t  if (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0) { return data.substring(1, data.length - 1) }\n\t  if (data.indexOf(',') !== -1) { return parseIntList(data) }\n\t  return parseInt(data, 10)\n  }\n\n  function parseIntList (data) {\n\t  return data.split(',').map(function (val) {\n\t    return parseInt(val, 10)\n\t  })\n  }\n}, {}],\n14: [function (require, module, exports) {\n  var HEADER = [66, 77, 70]\n\n  module.exports = function readBMFontBinary (buf) {\n\t  if (buf.length < 6) { throw new Error('invalid buffer length for BMFont') }\n\n\t  var header = HEADER.every(function (byte, i) {\n\t    return buf.readUInt8(i) === byte\n\t  })\n\n\t  if (!header) { throw new Error('BMFont missing BMF byte header') }\n\n\t  var i = 3\n\t  var vers = buf.readUInt8(i++)\n\t  if (vers > 3) { throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)') }\n\n\t  var target = { kernings: [], chars: [] }\n\t  for (var b = 0; b < 5; b++) { i += readBlock(target, buf, i) }\n\t  return target\n  }\n\n  function readBlock (target, buf, i) {\n\t  if (i > buf.length - 1) { return 0 }\n\n\t  var blockID = buf.readUInt8(i++)\n\t  var blockSize = buf.readInt32LE(i)\n\t  i += 4\n\n\t  switch (blockID) {\n\t    case 1:\n\t      target.info = readInfo(buf, i)\n\t      break\n\t    case 2:\n\t      target.common = readCommon(buf, i)\n\t      break\n\t    case 3:\n\t      target.pages = readPages(buf, i, blockSize)\n\t      break\n\t    case 4:\n\t      target.chars = readChars(buf, i, blockSize)\n\t      break\n\t    case 5:\n\t      target.kernings = readKernings(buf, i, blockSize)\n\t      break\n\t  }\n\t  return 5 + blockSize\n  }\n\n  function readInfo (buf, i) {\n\t  var info = {}\n\t  info.size = buf.readInt16LE(i)\n\n\t  var bitField = buf.readUInt8(i + 2)\n\t  info.smooth = (bitField >> 7) & 1\n\t  info.unicode = (bitField >> 6) & 1\n\t  info.italic = (bitField >> 5) & 1\n\t  info.bold = (bitField >> 4) & 1\n\n\t  // fixedHeight is only mentioned in binary spec\n\t  if ((bitField >> 3) & 1) { info.fixedHeight = 1 }\n\n\t  info.charset = buf.readUInt8(i + 3) || ''\n\t  info.stretchH = buf.readUInt16LE(i + 4)\n\t  info.aa = buf.readUInt8(i + 6)\n\t  info.padding = [\n\t    buf.readInt8(i + 7),\n\t    buf.readInt8(i + 8),\n\t    buf.readInt8(i + 9),\n\t    buf.readInt8(i + 10)\n\t  ]\n\t  info.spacing = [\n\t    buf.readInt8(i + 11),\n\t    buf.readInt8(i + 12)\n\t  ]\n\t  info.outline = buf.readUInt8(i + 13)\n\t  info.face = readStringNT(buf, i + 14)\n\t  return info\n  }\n\n  function readCommon (buf, i) {\n\t  var common = {}\n\t  common.lineHeight = buf.readUInt16LE(i)\n\t  common.base = buf.readUInt16LE(i + 2)\n\t  common.scaleW = buf.readUInt16LE(i + 4)\n\t  common.scaleH = buf.readUInt16LE(i + 6)\n\t  common.pages = buf.readUInt16LE(i + 8)\n\t  var bitField = buf.readUInt8(i + 10)\n\t  common.packed = 0\n\t  common.alphaChnl = buf.readUInt8(i + 11)\n\t  common.redChnl = buf.readUInt8(i + 12)\n\t  common.greenChnl = buf.readUInt8(i + 13)\n\t  common.blueChnl = buf.readUInt8(i + 14)\n\t  return common\n  }\n\n  function readPages (buf, i, size) {\n\t  var pages = []\n\t  var text = readNameNT(buf, i)\n\t  var len = text.length + 1\n\t  var count = size / len\n\t  for (var c = 0; c < count; c++) {\n\t    pages[c] = buf.slice(i, i + text.length).toString('utf8')\n\t    i += len\n\t  }\n\t  return pages\n  }\n\n  function readChars (buf, i, blockSize) {\n\t  var chars = []\n\n\t  var count = blockSize / 20\n\t  for (var c = 0; c < count; c++) {\n\t    var char = {}\n\t    var off = c * 20\n\t    char.id = buf.readUInt32LE(i + 0 + off)\n\t    char.x = buf.readUInt16LE(i + 4 + off)\n\t    char.y = buf.readUInt16LE(i + 6 + off)\n\t    char.width = buf.readUInt16LE(i + 8 + off)\n\t    char.height = buf.readUInt16LE(i + 10 + off)\n\t    char.xoffset = buf.readInt16LE(i + 12 + off)\n\t    char.yoffset = buf.readInt16LE(i + 14 + off)\n\t    char.xadvance = buf.readInt16LE(i + 16 + off)\n\t    char.page = buf.readUInt8(i + 18 + off)\n\t    char.chnl = buf.readUInt8(i + 19 + off)\n\t    chars[c] = char\n\t  }\n\t  return chars\n  }\n\n  function readKernings (buf, i, blockSize) {\n\t  var kernings = []\n\t  var count = blockSize / 10\n\t  for (var c = 0; c < count; c++) {\n\t    var kern = {}\n\t    var off = c * 10\n\t    kern.first = buf.readUInt32LE(i + 0 + off)\n\t    kern.second = buf.readUInt32LE(i + 4 + off)\n\t    kern.amount = buf.readInt16LE(i + 8 + off)\n\t    kernings[c] = kern\n\t  }\n\t  return kernings\n  }\n\n  function readNameNT (buf, offset) {\n\t  var pos = offset\n\t  for (; pos < buf.length; pos++) {\n\t    if (buf[pos] === 0x00) { break }\n\t  }\n\t  return buf.slice(offset, pos)\n  }\n\n  function readStringNT (buf, offset) {\n\t  return readNameNT(buf, offset).toString('utf8')\n  }\n}, {}],\n15: [function (require, module, exports) {\n  var parseAttributes = require('./parse-attribs')\n  var parseFromString = require('xml-parse-from-string')\n\n  // In some cases element.attribute.nodeName can return\n  // all lowercase values.. so we need to map them to the correct\n  // case\n  var NAME_MAP = {\n\t  scaleh: 'scaleH',\n\t  scalew: 'scaleW',\n\t  stretchh: 'stretchH',\n\t  lineheight: 'lineHeight',\n\t  alphachnl: 'alphaChnl',\n\t  redchnl: 'redChnl',\n\t  greenchnl: 'greenChnl',\n\t  bluechnl: 'blueChnl'\n  }\n\n  module.exports = function parse (data) {\n\t  data = data.toString()\n\n\t  var xmlRoot = parseFromString(data)\n\t  var output = {\n\t    pages: [],\n\t    chars: [],\n\t    kernings: []\n\t  }\n\n\t  // get config settings\n\t  ;['info', 'common'].forEach(function (key) {\n\t    var element = xmlRoot.getElementsByTagName(key)[0]\n\t    if (element) { output[key] = parseAttributes(getAttribs(element)) }\n\t  })\n\n\t  // get page info\n\t  var pageRoot = xmlRoot.getElementsByTagName('pages')[0]\n\t  if (!pageRoot) { throw new Error('malformed file -- no <pages> element') }\n\t  var pages = pageRoot.getElementsByTagName('page')\n\t  for (var i = 0; i < pages.length; i++) {\n\t    var p = pages[i]\n\t    var id = parseInt(p.getAttribute('id'), 10)\n\t    var file = p.getAttribute('file')\n\t    if (isNaN(id)) { throw new Error('malformed file -- page \"id\" attribute is NaN') }\n\t    if (!file) { throw new Error('malformed file -- needs page \"file\" attribute') }\n\t    output.pages[parseInt(id, 10)] = file\n\t  }\n\n\t  // get kernings / chars\n\t  ['chars', 'kernings'].forEach(function (key) {\n\t    var element = xmlRoot.getElementsByTagName(key)[0]\n\t    if (!element) { return }\n\t    var childTag = key.substring(0, key.length - 1)\n\t    var children = element.getElementsByTagName(childTag)\n\t    for (var i = 0; i < children.length; i++) {\n\t      var child = children[i]\n\t      output[key].push(parseAttributes(getAttribs(child)))\n\t    }\n\t  })\n\t  return output\n  }\n\n  function getAttribs (element) {\n\t  var attribs = getAttribList(element)\n\t  return attribs.reduce(function (dict, attrib) {\n\t    var key = mapName(attrib.nodeName)\n\t    dict[key] = attrib.nodeValue\n\t    return dict\n\t  }, {})\n  }\n\n  function getAttribList (element) {\n\t  // IE8+ and modern browsers\n\t  var attribs = []\n\t  for (var i = 0; i < element.attributes.length; i++) { attribs.push(element.attributes[i]) }\n\t  return attribs\n  }\n\n  function mapName (nodeName) {\n\t  return NAME_MAP[nodeName.toLowerCase()] || nodeName\n  }\n}, {'./parse-attribs': 16, 'xml-parse-from-string': 17}],\n16: [function (require, module, exports) {\n  // Some versions of GlyphDesigner have a typo\n  // that causes some bugs with parsing.\n  // Need to confirm with recent version of the software\n  // to see whether this is still an issue or not.\n  var GLYPH_DESIGNER_ERROR = 'chasrset'\n\n  module.exports = function parseAttributes (obj) {\n\t  if (GLYPH_DESIGNER_ERROR in obj) {\n\t    obj['charset'] = obj[GLYPH_DESIGNER_ERROR]\n\t    delete obj[GLYPH_DESIGNER_ERROR]\n\t  }\n\n\t  for (var k in obj) {\n\t    if (k === 'face' || k === 'charset') { continue } else if (k === 'padding' || k === 'spacing') { obj[k] = parseIntList(obj[k]) } else { obj[k] = parseInt(obj[k], 10) }\n\t  }\n\t  return obj\n  }\n\n  function parseIntList (data) {\n\t  return data.split(',').map(function (val) {\n\t    return parseInt(val, 10)\n\t  })\n  }\n}, {}],\n17: [function (require, module, exports) {\n  module.exports = (function xmlparser () {\n\t  // common browsers\n\t  if (typeof window.DOMParser !== 'undefined') {\n\t    return function (str) {\n\t      var parser = new window.DOMParser()\n\t      return parser.parseFromString(str, 'application/xml')\n\t    }\n\t  }\n\n\t  // IE8 fallback\n\t  if (typeof window.ActiveXObject !== 'undefined' &&\n\t      new window.ActiveXObject('Microsoft.XMLDOM')) {\n\t    return function (str) {\n\t      var xmlDoc = new window.ActiveXObject('Microsoft.XMLDOM')\n\t      xmlDoc.async = 'false'\n\t      xmlDoc.loadXML(str)\n\t      return xmlDoc\n\t    }\n\t  }\n\n\t  // last resort fallback\n\t  return function (str) {\n\t    var div = document.createElement('div')\n\t    div.innerHTML = str\n\t    return div\n\t  }\n  })()\n}, {}],\n18: [function (require, module, exports) {\n  'use strict'\n  var window = require('global/window')\n  var once = require('once')\n  var isFunction = require('is-function')\n  var parseHeaders = require('parse-headers')\n  var xtend = require('xtend')\n\n  module.exports = createXHR\n  createXHR.XMLHttpRequest = window.XMLHttpRequest || noop\n  createXHR.XDomainRequest = 'withCredentials' in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\n  forEachArray(['get', 'put', 'post', 'patch', 'head', 'delete'], function (method) {\n\t    createXHR[method === 'delete' ? 'del' : method] = function (uri, options, callback) {\n\t        options = initParams(uri, options, callback)\n\t        options.method = method.toUpperCase()\n\t        return _createXHR(options)\n\t    }\n  })\n\n  function forEachArray (array, iterator) {\n\t    for (var i = 0; i < array.length; i++) {\n\t        iterator(array[i])\n\t    }\n  }\n\n  function isEmpty (obj) {\n\t    for (var i in obj) {\n\t        if (obj.hasOwnProperty(i)) return false\n\t    }\n\t    return true\n  }\n\n  function initParams (uri, options, callback) {\n\t    var params = uri\n\n\t    if (isFunction(options)) {\n\t        callback = options\n\t        if (typeof uri === 'string') {\n\t            params = {uri: uri}\n\t        }\n\t    } else {\n\t        params = xtend(options, {uri: uri})\n\t    }\n\n\t    params.callback = callback\n\t    return params\n  }\n\n  function createXHR (uri, options, callback) {\n\t    options = initParams(uri, options, callback)\n\t    return _createXHR(options)\n  }\n\n  function _createXHR (options) {\n\t    var callback = options.callback\n\t    if (typeof callback === 'undefined') {\n\t        throw new Error('callback argument missing')\n\t    }\n\t    callback = once(callback)\n\n\t    function readystatechange () {\n\t        if (xhr.readyState === 4) {\n\t            loadFunc()\n\t        }\n\t    }\n\n\t    function getBody () {\n\t        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n\t        var body = undefined\n\n\t        if (xhr.response) {\n\t            body = xhr.response\n\t        } else if (xhr.responseType === 'text' || !xhr.responseType) {\n\t            body = xhr.responseText || xhr.responseXML\n\t        }\n\n\t        if (isJson) {\n\t            try {\n\t                body = JSON.parse(body)\n\t            } catch (e) {}\n\t        }\n\n\t        return body\n\t    }\n\n\t    var failureResponse = {\n\t                body: undefined,\n\t                headers: {},\n\t                statusCode: 0,\n\t                method: method,\n\t                url: uri,\n\t                rawRequest: xhr\n\t            }\n\n\t    function errorFunc (evt) {\n\t        clearTimeout(timeoutTimer)\n\t        if (!(evt instanceof Error)) {\n\t            evt = new Error('' + (evt || 'Unknown XMLHttpRequest Error'))\n\t        }\n\t        evt.statusCode = 0\n\t        callback(evt, failureResponse)\n\t    }\n\n\t    // will load the data & process the response in a special response object\n\t    function loadFunc () {\n\t        if (aborted) return\n\t        var status\n\t        clearTimeout(timeoutTimer)\n\t        if (options.useXDR && xhr.status === undefined) {\n\t            // IE8 CORS GET successful response doesn't have a status field, but body is fine\n\t            status = 200\n\t        } else {\n\t            status = (xhr.status === 1223 ? 204 : xhr.status)\n\t        }\n\t        var response = failureResponse\n\t        var err = null\n\n\t        if (status !== 0) {\n\t            response = {\n\t                body: getBody(),\n\t                statusCode: status,\n\t                method: method,\n\t                headers: {},\n\t                url: uri,\n\t                rawRequest: xhr\n\t            }\n\t            if (xhr.getAllResponseHeaders) { // remember xhr can in fact be XDR for CORS in IE\n\t                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n\t            }\n\t        } else {\n\t            err = new Error('Internal XMLHttpRequest Error')\n\t        }\n\t        callback(err, response, response.body)\n\t    }\n\n\t    var xhr = options.xhr || null\n\n\t    if (!xhr) {\n\t        if (options.cors || options.useXDR) {\n\t            xhr = new createXHR.XDomainRequest()\n\t        } else {\n\t            xhr = new createXHR.XMLHttpRequest()\n\t        }\n\t    }\n\n\t    var key\n\t    var aborted\n\t    var uri = xhr.url = options.uri || options.url\n\t    var method = xhr.method = options.method || 'GET'\n\t    var body = options.body || options.data || null\n\t    var headers = xhr.headers = options.headers || {}\n\t    var sync = !!options.sync\n\t    var isJson = false\n\t    var timeoutTimer\n\n\t    if ('json' in options) {\n\t        isJson = true\n\t        headers['accept'] || headers['Accept'] || (headers['Accept'] = 'application/json') // Don't override existing accept header declared by user\n\t        if (method !== 'GET' && method !== 'HEAD') {\n\t            headers['content-type'] || headers['Content-Type'] || (headers['Content-Type'] = 'application/json') // Don't override existing accept header declared by user\n\t            body = JSON.stringify(options.json)\n\t        }\n\t    }\n\n\t    xhr.onreadystatechange = readystatechange\n\t    xhr.onload = loadFunc\n\t    xhr.onerror = errorFunc\n\t    // IE9 must have onprogress be set to a unique function.\n\t    xhr.onprogress = function () {\n\t        // IE must die\n\t    }\n\t    xhr.ontimeout = errorFunc\n\t    xhr.open(method, uri, !sync, options.username, options.password)\n\t    // has to be after open\n\t    if (!sync) {\n\t        xhr.withCredentials = !!options.withCredentials\n\t    }\n\t    // Cannot set timeout with sync request\n\t    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n\t    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n\t    if (!sync && options.timeout > 0) {\n\t        timeoutTimer = setTimeout(function () {\n\t            aborted = true// IE9 may still call readystatechange\n\t            xhr.abort('timeout')\n\t            var e = new Error('XMLHttpRequest timeout')\n\t            e.code = 'ETIMEDOUT'\n\t            errorFunc(e)\n\t        }, options.timeout)\n\t    }\n\n\t    if (xhr.setRequestHeader) {\n\t        for (key in headers) {\n\t            if (headers.hasOwnProperty(key)) {\n\t                xhr.setRequestHeader(key, headers[key])\n\t            }\n\t        }\n\t    } else if (options.headers && !isEmpty(options.headers)) {\n\t        throw new Error('Headers cannot be set on an XDomainRequest object')\n\t    }\n\n\t    if ('responseType' in options) {\n\t        xhr.responseType = options.responseType\n\t    }\n\n\t    if ('beforeSend' in options &&\n\t        typeof options.beforeSend === 'function'\n\t    ) {\n\t        options.beforeSend(xhr)\n\t    }\n\n\t    xhr.send(body)\n\n\t    return xhr\n  }\n\n  function noop () {}\n}, {'global/window': 19, 'is-function': 20, 'once': 21, 'parse-headers': 24, 'xtend': 25}],\n19: [function (require, module, exports) {\n  (function (global) {\n    if (typeof window !== 'undefined') {\n\t    module.exports = window\n    } else if (typeof global !== 'undefined') {\n\t    module.exports = global\n    } else if (typeof self !== 'undefined') {\n\t    module.exports = self\n    } else {\n\t    module.exports = {}\n    }\n  }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {})\n}, {}],\n20: [function (require, module, exports) {\n  module.exports = isFunction\n\n  var toString = Object.prototype.toString\n\n  function isFunction (fn) {\n\t  var string = toString.call(fn)\n\t  return string === '[object Function]' ||\n\t    (typeof fn === 'function' && string !== '[object RegExp]') ||\n\t    (typeof window !== 'undefined' &&\n\t     // IE8 and below\n\t     (fn === window.setTimeout ||\n\t      fn === window.alert ||\n\t      fn === window.confirm ||\n\t      fn === window.prompt))\n  }\n}, {}],\n21: [function (require, module, exports) {\n  module.exports = once\n\n  once.proto = once(function () {\n\t  Object.defineProperty(Function.prototype, 'once', {\n\t    value: function () {\n\t      return once(this)\n\t    },\n\t    configurable: true\n\t  })\n  })\n\n  function once (fn) {\n\t  var called = false\n\t  return function () {\n\t    if (called) return\n\t    called = true\n\t    return fn.apply(this, arguments)\n\t  }\n  }\n}, {}],\n22: [function (require, module, exports) {\n  var isFunction = require('is-function')\n\n  module.exports = forEach\n\n  var toString = Object.prototype.toString\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n\n  function forEach (list, iterator, context) {\n\t    if (!isFunction(iterator)) {\n\t        throw new TypeError('iterator must be a function')\n\t    }\n\n\t    if (arguments.length < 3) {\n\t        context = this\n\t    }\n\n\t    if (toString.call(list) === '[object Array]') { forEachArray(list, iterator, context) } else if (typeof list === 'string') { forEachString(list, iterator, context) } else { forEachObject(list, iterator, context) }\n  }\n\n  function forEachArray (array, iterator, context) {\n\t    for (var i = 0, len = array.length; i < len; i++) {\n\t        if (hasOwnProperty.call(array, i)) {\n\t            iterator.call(context, array[i], i, array)\n\t        }\n\t    }\n  }\n\n  function forEachString (string, iterator, context) {\n\t    for (var i = 0, len = string.length; i < len; i++) {\n\t        // no such thing as a sparse string.\n\t        iterator.call(context, string.charAt(i), i, string)\n\t    }\n  }\n\n  function forEachObject (object, iterator, context) {\n\t    for (var k in object) {\n\t        if (hasOwnProperty.call(object, k)) {\n\t            iterator.call(context, object[k], k, object)\n\t        }\n\t    }\n  }\n}, {'is-function': 20}],\n23: [function (require, module, exports) {\n  exports = module.exports = trim\n\n  function trim (str) {\n\t  return str.replace(/^\\s*|\\s*$/g, '')\n  }\n\n  exports.left = function (str) {\n\t  return str.replace(/^\\s*/, '')\n  }\n\n  exports.right = function (str) {\n\t  return str.replace(/\\s*$/, '')\n  }\n}, {}],\n24: [function (require, module, exports) {\n  var trim = require('trim'),\n\t   forEach = require('for-each'),\n\t   isArray = function (arg) {\n\t      return Object.prototype.toString.call(arg) === '[object Array]'\n\t    }\n\n  module.exports = function (headers) {\n\t  if (!headers) { return {} }\n\n\t  var result = {}\n\n\t  forEach(\n\t      trim(headers).split('\\n')\n\t    , function (row) {\n\t        var index = row.indexOf(':'),\n\t           key = trim(row.slice(0, index)).toLowerCase(),\n\t           value = trim(row.slice(index + 1))\n\n\t        if (typeof (result[key]) === 'undefined') {\n\t          result[key] = value\n\t        } else if (isArray(result[key])) {\n\t          result[key].push(value)\n\t        } else {\n\t          result[key] = [ result[key], value ]\n\t        }\n\t      }\n\t  )\n\n\t  return result\n  }\n}, {'for-each': 22, 'trim': 23}],\n25: [function (require, module, exports) {\n  arguments[4][9][0].apply(exports, arguments)\n}, {'dup': 9}],\n26: [function (require, module, exports) {\n  /* eslint-disable no-unused-vars */\n  'use strict'\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n  var propIsEnumerable = Object.prototype.propertyIsEnumerable\n\n  function toObject (val) {\n\t  if (val === null || val === undefined) {\n\t    throw new TypeError('Object.assign cannot be called with null or undefined')\n\t  }\n\n\t  return Object(val)\n  }\n\n  module.exports = Object.assign || function (target, source) {\n\t  var from\n\t  var to = toObject(target)\n\t  var symbols\n\n\t  for (var s = 1; s < arguments.length; s++) {\n\t    from = Object(arguments[s])\n\n\t    for (var key in from) {\n\t      if (hasOwnProperty.call(from, key)) {\n\t        to[key] = from[key]\n\t      }\n\t    }\n\n\t    if (Object.getOwnPropertySymbols) {\n\t      symbols = Object.getOwnPropertySymbols(from)\n\t      for (var i = 0; i < symbols.length; i++) {\n\t        if (propIsEnumerable.call(from, symbols[i])) {\n\t          to[symbols[i]] = from[symbols[i]]\n\t        }\n\t      }\n\t    }\n\t  }\n\n\t  return to\n  }\n}, {}],\n27: [function (require, module, exports) {\n  var dtype = require('dtype')\n  var anArray = require('an-array')\n  var isBuffer = require('is-buffer')\n\n  var CW = [0, 2, 3]\n  var CCW = [2, 1, 3]\n\n  module.exports = function createQuadElements (array, opt) {\n\t    // if user didn't specify an output array\n\t    if (!array || !(anArray(array) || isBuffer(array))) {\n\t        opt = array || {}\n\t        array = null\n\t    }\n\n\t    if (typeof opt === 'number') // backwards-compatible\n\t        { opt = { count: opt } } else { opt = opt || {} }\n\n\t    var type = typeof opt.type === 'string' ? opt.type : 'uint16'\n\t    var count = typeof opt.count === 'number' ? opt.count : 1\n\t    var start = (opt.start || 0)\n\n\t    var dir = opt.clockwise !== false ? CW : CCW,\n\t        a = dir[0],\n\t        b = dir[1],\n\t        c = dir[2]\n\n\t    var numIndices = count * 6\n\n\t    var indices = array || new (dtype(type))(numIndices)\n\t    for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n\t        var x = i + start\n\t        indices[x + 0] = j + 0\n\t        indices[x + 1] = j + 1\n\t        indices[x + 2] = j + 2\n\t        indices[x + 3] = j + a\n\t        indices[x + 4] = j + b\n\t        indices[x + 5] = j + c\n\t    }\n\t    return indices\n  }\n}, {'an-array': 28, 'dtype': 29, 'is-buffer': 30}],\n28: [function (require, module, exports) {\n  var str = Object.prototype.toString\n\n  module.exports = anArray\n\n  function anArray (arr) {\n\t  return (\n\t       arr.BYTES_PER_ELEMENT &&\n\t    str.call(arr.buffer) === '[object ArrayBuffer]' ||\n\t    Array.isArray(arr)\n\t  )\n  }\n}, {}],\n29: [function (require, module, exports) {\n  module.exports = function (dtype) {\n\t  switch (dtype) {\n\t    case 'int8':\n\t      return Int8Array\n\t    case 'int16':\n\t      return Int16Array\n\t    case 'int32':\n\t      return Int32Array\n\t    case 'uint8':\n\t      return Uint8Array\n\t    case 'uint16':\n\t      return Uint16Array\n\t    case 'uint32':\n\t      return Uint32Array\n\t    case 'float32':\n\t      return Float32Array\n\t    case 'float64':\n\t      return Float64Array\n\t    case 'array':\n\t      return Array\n\t    case 'uint8_clamped':\n\t      return Uint8ClampedArray\n\t  }\n  }\n}, {}],\n30: [function (require, module, exports) {\n  /**\n\t * Determine if an object is Buffer\n\t *\n\t * Author:   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * License:  MIT\n\t *\n\t * `npm install is-buffer`\n\t */\n\n  module.exports = function (obj) {\n\t  return !!(obj != null &&\n\t    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)\n\t      (obj.constructor &&\n\t      typeof obj.constructor.isBuffer === 'function' &&\n\t      obj.constructor.isBuffer(obj))\n\t    ))\n  }\n}, {}],\n31: [function (require, module, exports) {\n  var flatten = require('flatten-vertex-data')\n\n  module.exports.attr = setAttribute\n  module.exports.index = setIndex\n\n  function setIndex (geometry, data, itemSize, dtype) {\n\t  if (typeof itemSize !== 'number') itemSize = 1\n\t  if (typeof dtype !== 'number') dtype = 'uint16'\n\n\t  var isR69 = !geometry.index && typeof geometry.setIndex !== 'function'\n\t  var attrib = isR69 ? geometry.getAttribute('index') : geometry.index\n\t  var newAttrib = updateAttribute(attrib, data, itemSize, dtype)\n\t  if (newAttrib) {\n\t    if (isR69) geometry.addAttribute('index', newAttrib)\n\t    else geometry.index = newAttrib\n\t  }\n  }\n\n  function setAttribute (geometry, key, data, itemSize, dtype) {\n\t  if (typeof itemSize !== 'number') itemSize = 3\n\t  if (typeof dtype !== 'number') dtype = 'float32'\n\t  if (Array.isArray(data) &&\n\t    Array.isArray(data[0]) &&\n\t    data[0].length !== itemSize) {\n\t    throw new Error('Nested vertex array has unexpected size; expected ' +\n\t      itemSize + ' but found ' + data[0].length)\n\t  }\n\n\t  var attrib = geometry.getAttribute(key)\n\t  var newAttrib = updateAttribute(attrib, data, itemSize, dtype)\n\t  if (newAttrib) {\n\t    geometry.addAttribute(key, newAttrib)\n\t  }\n  }\n\n  function updateAttribute (attrib, data, itemSize, dtype) {\n\t  data = data || []\n\t  if (!attrib || rebuildAttribute(attrib, data, itemSize)) {\n\t    // create a new array with desired type\n\t    data = flatten(data, dtype)\n\t    attrib = new THREE.BufferAttribute(data, itemSize)\n\t    attrib.needsUpdate = true\n\t    return attrib\n\t  } else {\n\t    // copy data into the existing array\n\t    flatten(data, attrib.array)\n\t    attrib.needsUpdate = true\n\t    return null\n\t  }\n  }\n\n  // Test whether the attribute needs to be re-created,\n  // returns false if we can re-use it as-is.\n  function rebuildAttribute (attrib, data, itemSize) {\n\t  if (attrib.itemSize !== itemSize) return true\n\t  if (!attrib.array) return true\n\t  var attribLength = attrib.array.length\n\t  if (Array.isArray(data) && Array.isArray(data[0])) {\n\t    // [ [ x, y, z ] ]\n\t    return attribLength !== data.length * itemSize\n\t  } else {\n\t    // [ x, y, z ]\n\t    return attribLength !== data.length\n\t  }\n  }\n}, {'flatten-vertex-data': 32}],\n32: [function (require, module, exports) {\n  /* eslint new-cap:0 */\n  var dtype = require('dtype')\n  module.exports = flattenVertexData\n  function flattenVertexData (data, output, offset) {\n\t  if (!data) throw new TypeError('must specify data as first parameter')\n\t  offset = +(offset || 0) | 0\n\n\t  if (Array.isArray(data) && Array.isArray(data[0])) {\n\t    var dim = data[0].length\n\t    var length = data.length * dim\n\n\t    // no output specified, create a new typed array\n\t    if (!output || typeof output === 'string') {\n\t      output = new (dtype(output || 'float32'))(length + offset)\n\t    }\n\n\t    var dstLength = output.length - offset\n\t    if (length !== dstLength) {\n\t      throw new Error('source length ' + length + ' (' + dim + 'x' + data.length + ')' +\n\t        ' does not match destination length ' + dstLength)\n\t    }\n\n\t    for (var i = 0, k = offset; i < data.length; i++) {\n\t      for (var j = 0; j < dim; j++) {\n\t        output[k++] = data[i][j]\n\t      }\n\t    }\n\t  } else {\n\t    if (!output || typeof output === 'string') {\n\t      // no output, create a new one\n\t      var Ctor = dtype(output || 'float32')\n\t      if (offset === 0) {\n\t        output = new Ctor(data)\n\t      } else {\n\t        output = new Ctor(data.length + offset)\n\t        output.set(data, offset)\n\t      }\n\t    } else {\n\t      // store output in existing array\n\t      output.set(data, offset)\n\t    }\n\t  }\n\n\t  return output\n  }\n}, {'dtype': 33}],\n33: [function (require, module, exports) {\n  arguments[4][29][0].apply(exports, arguments)\n}, {'dup': 29}],\n34: [function (require, module, exports) {\n  var assign = require('object-assign')\n\n  module.exports = function createSDFShader (opt) {\n\t  opt = opt || {}\n\t  var opacity = typeof opt.opacity === 'number' ? opt.opacity : 1\n\t  var alphaTest = typeof opt.alphaTest === 'number' ? opt.alphaTest : 0.0001\n\t  var precision = opt.precision || 'highp'\n\t  var color = opt.color\n\t  var map = opt.map\n\n\t  // remove to satisfy r73\n\t  delete opt.map\n\t  delete opt.color\n\t  delete opt.precision\n\t  delete opt.opacity\n\n\t  return assign({\n\t    uniforms: {\n\t      opacity: { type: 'f', value: opacity },\n\t      map: { type: 't', value: map || new THREE.Texture() },\n\t      color: { type: 'c', value: new THREE.Color(color) }\n\t    },\n\t    vertexShader: [\n\t      'attribute vec2 uv;',\n\t      'attribute vec4 position;',\n\t      'uniform mat4 projectionMatrix;',\n\t      'uniform mat4 modelViewMatrix;',\n\t      'varying vec2 vUv;',\n\t      'void main() {',\n\t      'vUv = uv;',\n\t      'gl_Position = projectionMatrix * modelViewMatrix * position;',\n\t      '}'\n\t    ].join('\\n'),\n\t    fragmentShader: [\n\t      '#ifdef GL_OES_standard_derivatives',\n\t      '#extension GL_OES_standard_derivatives : enable',\n\t      '#endif',\n\t      'precision ' + precision + ' float;',\n\t      'uniform float opacity;',\n\t      'uniform vec3 color;',\n\t      'uniform sampler2D map;',\n\t      'varying vec2 vUv;',\n\n\t      'float aastep(float value) {',\n\t      '  #ifdef GL_OES_standard_derivatives',\n\t      '    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;',\n\t      '  #else',\n\t      '    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));',\n\t      '  #endif',\n\t      '  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);',\n\t      '}',\n\n\t      'void main() {',\n\t      '  vec4 texColor = texture2D(map, vUv);',\n\t      '  float alpha = aastep(texColor.a);',\n\t      '  gl_FragColor = vec4(color, opacity * alpha);',\n\t      alphaTest === 0\n\t        ? ''\n\t        : '  if (gl_FragColor.a < ' + alphaTest + ') discard;',\n\t      '}'\n\t    ].join('\\n')\n\t  }, opt)\n  }\n}, {'object-assign': 26}],\n35: [function (require, module, exports) {\n  var loadFont = require('load-bmfont')\n  // global.THREE = require('three')\n\n  // A utility to load a font, then a texture\n  module.exports = function (opt, cb) {\n\t  loadFont(opt.font, function (err, font) {\n\t    if (err) throw err\n      PANOLENS.Utils.TextureLoader.load(opt.image, function (tex) {\n\t      cb(font, tex)\n\t    })\n\t  })\n  }\n}, {'load-bmfont': 10}],\n36: [function (require, module, exports) {\n  var createText = require('../')\n  var SDFShader = require('../shaders/sdf')\n\n  if (PANOLENS && PANOLENS.Utils && PANOLENS.SpriteText) {\n    PANOLENS.Utils.loadBMFont = function (fontObject, callback) {\n      require('./load')(fontObject, PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype, callback))\n    }\n    PANOLENS.SpriteText.prototype.generateTextGeometry = createText\n    PANOLENS.SpriteText.prototype.generateSDFShader = SDFShader\n  }\n}, {'../': 1, '../shaders/sdf': 34, './load': 35}],\n37: [function (require, module, exports) {\n  (function (global) {\n    /*!\n\t * The buffer module from node.js, for the browser.\n\t *\n\t * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * @license  MIT\n\t */\n    /* eslint-disable no-proto */\n\n    'use strict'\n\n    var base64 = require('base64-js')\n    var ieee754 = require('ieee754')\n    var isArray = require('isarray')\n\n    exports.Buffer = Buffer\n    exports.SlowBuffer = SlowBuffer\n    exports.INSPECT_MAX_BYTES = 50\n    Buffer.poolSize = 8192 // not used by this implementation\n\n    var rootParent = {}\n\n    /**\n\t * If `Buffer.TYPED_ARRAY_SUPPORT`:\n\t *   === true    Use Uint8Array implementation (fastest)\n\t *   === false   Use Object implementation (most compatible, even IE6)\n\t *\n\t * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n\t * Opera 11.6+, iOS 4.2+.\n\t *\n\t * Due to various browser bugs, sometimes the Object implementation will be used even\n\t * when the browser supports typed arrays.\n\t *\n\t * Note:\n\t *\n\t *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n\t *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n\t *\n\t *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n\t *\n\t *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n\t *     incorrect length in some situations.\n\n\t * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n\t * get the Object implementation, which is slower but behaves correctly.\n\t */\n    Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n\t  ? global.TYPED_ARRAY_SUPPORT\n\t  : typedArraySupport()\n\n    function typedArraySupport () {\n\t  try {\n\t    var arr = new Uint8Array(1)\n\t    arr.foo = function () { return 42 }\n\t    return arr.foo() === 42 && // typed array instances can be augmented\n\t        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n\t        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n\t  } catch (e) {\n\t    return false\n\t  }\n    }\n\n    function kMaxLength () {\n\t  return Buffer.TYPED_ARRAY_SUPPORT\n\t    ? 0x7fffffff\n\t    : 0x3fffffff\n    }\n\n    /**\n\t * Class: Buffer\n\t * =============\n\t *\n\t * The Buffer constructor returns instances of `Uint8Array` that are augmented\n\t * with function properties for all the node `Buffer` API functions. We use\n\t * `Uint8Array` so that square bracket notation works as expected -- it returns\n\t * a single octet.\n\t *\n\t * By augmenting the instances, we can avoid modifying the `Uint8Array`\n\t * prototype.\n\t */\n    function Buffer (arg) {\n\t  if (!(this instanceof Buffer)) {\n\t    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n\t    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n\t    return new Buffer(arg)\n\t  }\n\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this.length = 0\n\t    this.parent = undefined\n\t  }\n\n\t  // Common case.\n\t  if (typeof arg === 'number') {\n\t    return fromNumber(this, arg)\n\t  }\n\n\t  // Slightly less common case.\n\t  if (typeof arg === 'string') {\n\t    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n\t  }\n\n\t  // Unusual.\n\t  return fromObject(this, arg)\n    }\n\n    function fromNumber (that, length) {\n\t  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    for (var i = 0; i < length; i++) {\n\t      that[i] = 0\n\t    }\n\t  }\n\t  return that\n    }\n\n    function fromString (that, string, encoding) {\n\t  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n\t  // Assumption: byteLength() return value is always < kMaxLength.\n\t  var length = byteLength(string, encoding) | 0\n\t  that = allocate(that, length)\n\n\t  that.write(string, encoding)\n\t  return that\n    }\n\n    function fromObject (that, object) {\n\t  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n\t  if (isArray(object)) return fromArray(that, object)\n\n\t  if (object == null) {\n\t    throw new TypeError('must start with number, buffer, array or string')\n\t  }\n\n\t  if (typeof ArrayBuffer !== 'undefined') {\n\t    if (object.buffer instanceof ArrayBuffer) {\n\t      return fromTypedArray(that, object)\n\t    }\n\t    if (object instanceof ArrayBuffer) {\n\t      return fromArrayBuffer(that, object)\n\t    }\n\t  }\n\n\t  if (object.length) return fromArrayLike(that, object)\n\n\t  return fromJsonObject(that, object)\n    }\n\n    function fromBuffer (that, buffer) {\n\t  var length = checked(buffer.length) | 0\n\t  that = allocate(that, length)\n\t  buffer.copy(that, 0, 0, length)\n\t  return that\n    }\n\n    function fromArray (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    // Duplicate of fromArray() to keep fromArray() monomorphic.\n    function fromTypedArray (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  // Truncating the elements is probably not what people expect from typed\n\t  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n\t  // of the old Buffer constructor.\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    function fromArrayBuffer (that, array) {\n\t  // array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(array)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that = fromTypedArray(that, new Uint8Array(array))\n\t  }\n\t  return that\n    }\n\n    function fromArrayLike (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    // Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n    // Returns a zero-length buffer for inputs that don't conform to the spec.\n    function fromJsonObject (that, object) {\n\t  var array\n\t  var length = 0\n\n\t  if (object.type === 'Buffer' && isArray(object.data)) {\n\t    array = object.data\n\t    length = checked(array.length) | 0\n\t  }\n\t  that = allocate(that, length)\n\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t  Buffer.prototype.__proto__ = Uint8Array.prototype\n\t  Buffer.__proto__ = Uint8Array\n    } else {\n\t  // pre-set for values that may exist in the future\n\t  Buffer.prototype.length = undefined\n\t  Buffer.prototype.parent = undefined\n    }\n\n    function allocate (that, length) {\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(length)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that.length = length\n\t  }\n\n\t  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n\t  if (fromPool) that.parent = rootParent\n\n\t  return that\n    }\n\n    function checked (length) {\n\t  // Note: cannot use `length < kMaxLength` here because that fails when\n\t  // length is NaN (which is otherwise coerced to zero.)\n\t  if (length >= kMaxLength()) {\n\t    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n\t                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n\t  }\n\t  return length | 0\n    }\n\n    function SlowBuffer (subject, encoding) {\n\t  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n\t  var buf = new Buffer(subject, encoding)\n\t  delete buf.parent\n\t  return buf\n    }\n\n    Buffer.isBuffer = function isBuffer (b) {\n\t  return !!(b != null && b._isBuffer)\n    }\n\n    Buffer.compare = function compare (a, b) {\n\t  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n\t    throw new TypeError('Arguments must be Buffers')\n\t  }\n\n\t  if (a === b) return 0\n\n\t  var x = a.length\n\t  var y = b.length\n\n\t  var i = 0\n\t  var len = Math.min(x, y)\n\t  while (i < len) {\n\t    if (a[i] !== b[i]) break\n\n\t    ++i\n\t  }\n\n\t  if (i !== len) {\n\t    x = a[i]\n\t    y = b[i]\n\t  }\n\n\t  if (x < y) return -1\n\t  if (y < x) return 1\n\t  return 0\n    }\n\n    Buffer.isEncoding = function isEncoding (encoding) {\n\t  switch (String(encoding).toLowerCase()) {\n\t    case 'hex':\n\t    case 'utf8':\n\t    case 'utf-8':\n\t    case 'ascii':\n\t    case 'binary':\n\t    case 'base64':\n\t    case 'raw':\n\t    case 'ucs2':\n\t    case 'ucs-2':\n\t    case 'utf16le':\n\t    case 'utf-16le':\n\t      return true\n\t    default:\n\t      return false\n\t  }\n    }\n\n    Buffer.concat = function concat (list, length) {\n\t  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n\t  if (list.length === 0) {\n\t    return new Buffer(0)\n\t  }\n\n\t  var i\n\t  if (length === undefined) {\n\t    length = 0\n\t    for (i = 0; i < list.length; i++) {\n\t      length += list[i].length\n\t    }\n\t  }\n\n\t  var buf = new Buffer(length)\n\t  var pos = 0\n\t  for (i = 0; i < list.length; i++) {\n\t    var item = list[i]\n\t    item.copy(buf, pos)\n\t    pos += item.length\n\t  }\n\t  return buf\n    }\n\n    function byteLength (string, encoding) {\n\t  if (typeof string !== 'string') string = '' + string\n\n\t  var len = string.length\n\t  if (len === 0) return 0\n\n\t  // Use a for loop to avoid recursion\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'ascii':\n\t      case 'binary':\n\t      // Deprecated\n\t      case 'raw':\n\t      case 'raws':\n\t        return len\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8ToBytes(string).length\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return len * 2\n\t      case 'hex':\n\t        return len >>> 1\n\t      case 'base64':\n\t        return base64ToBytes(string).length\n\t      default:\n\t        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n    }\n    Buffer.byteLength = byteLength\n\n    function slowToString (encoding, start, end) {\n\t  var loweredCase = false\n\n\t  start = start | 0\n\t  end = end === undefined || end === Infinity ? this.length : end | 0\n\n\t  if (!encoding) encoding = 'utf8'\n\t  if (start < 0) start = 0\n\t  if (end > this.length) end = this.length\n\t  if (end <= start) return ''\n\n\t  while (true) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexSlice(this, start, end)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Slice(this, start, end)\n\n\t      case 'ascii':\n\t        return asciiSlice(this, start, end)\n\n\t      case 'binary':\n\t        return binarySlice(this, start, end)\n\n\t      case 'base64':\n\t        return base64Slice(this, start, end)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return utf16leSlice(this, start, end)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = (encoding + '').toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n    }\n\n    // Even though this property is private, it shouldn't be removed because it is\n    // used by `is-buffer` to detect buffer instances in Safari 5-7.\n    Buffer.prototype._isBuffer = true\n\n    Buffer.prototype.toString = function toString () {\n\t  var length = this.length | 0\n\t  if (length === 0) return ''\n\t  if (arguments.length === 0) return utf8Slice(this, 0, length)\n\t  return slowToString.apply(this, arguments)\n    }\n\n    Buffer.prototype.equals = function equals (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return true\n\t  return Buffer.compare(this, b) === 0\n    }\n\n    Buffer.prototype.inspect = function inspect () {\n\t  var str = ''\n\t  var max = exports.INSPECT_MAX_BYTES\n\t  if (this.length > 0) {\n\t    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n\t    if (this.length > max) str += ' ... '\n\t  }\n\t  return '<Buffer ' + str + '>'\n    }\n\n    Buffer.prototype.compare = function compare (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return 0\n\t  return Buffer.compare(this, b)\n    }\n\n    Buffer.prototype.indexOf = function indexOf (val, byteOffset) {\n\t  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n\t  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n\t  byteOffset >>= 0\n\n\t  if (this.length === 0) return -1\n\t  if (byteOffset >= this.length) return -1\n\n\t  // Negative offsets start from the end of the buffer\n\t  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n\t  if (typeof val === 'string') {\n\t    if (val.length === 0) return -1 // special case: looking for empty string always fails\n\t    return String.prototype.indexOf.call(this, val, byteOffset)\n\t  }\n\t  if (Buffer.isBuffer(val)) {\n\t    return arrayIndexOf(this, val, byteOffset)\n\t  }\n\t  if (typeof val === 'number') {\n\t    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n\t      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n\t    }\n\t    return arrayIndexOf(this, [ val ], byteOffset)\n\t  }\n\n\t  function arrayIndexOf (arr, val, byteOffset) {\n\t    var foundIndex = -1\n\t    for (var i = 0; byteOffset + i < arr.length; i++) {\n\t      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n\t        if (foundIndex === -1) foundIndex = i\n\t        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n\t      } else {\n\t        foundIndex = -1\n\t      }\n\t    }\n\t    return -1\n\t  }\n\n\t  throw new TypeError('val must be string, number or Buffer')\n    }\n\n    function hexWrite (buf, string, offset, length) {\n\t  offset = Number(offset) || 0\n\t  var remaining = buf.length - offset\n\t  if (!length) {\n\t    length = remaining\n\t  } else {\n\t    length = Number(length)\n\t    if (length > remaining) {\n\t      length = remaining\n\t    }\n\t  }\n\n\t  // must be an even number of digits\n\t  var strLen = string.length\n\t  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n\t  if (length > strLen / 2) {\n\t    length = strLen / 2\n\t  }\n\t  for (var i = 0; i < length; i++) {\n\t    var parsed = parseInt(string.substr(i * 2, 2), 16)\n\t    if (isNaN(parsed)) throw new Error('Invalid hex string')\n\t    buf[offset + i] = parsed\n\t  }\n\t  return i\n    }\n\n    function utf8Write (buf, string, offset, length) {\n\t  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n    }\n\n    function asciiWrite (buf, string, offset, length) {\n\t  return blitBuffer(asciiToBytes(string), buf, offset, length)\n    }\n\n    function binaryWrite (buf, string, offset, length) {\n\t  return asciiWrite(buf, string, offset, length)\n    }\n\n    function base64Write (buf, string, offset, length) {\n\t  return blitBuffer(base64ToBytes(string), buf, offset, length)\n    }\n\n    function ucs2Write (buf, string, offset, length) {\n\t  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n    }\n\n    Buffer.prototype.write = function write (string, offset, length, encoding) {\n\t  // Buffer#write(string)\n\t  if (offset === undefined) {\n\t    encoding = 'utf8'\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, encoding)\n\t  } else if (length === undefined && typeof offset === 'string') {\n\t    encoding = offset\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, offset[, length][, encoding])\n\t  } else if (isFinite(offset)) {\n\t    offset = offset | 0\n\t    if (isFinite(length)) {\n\t      length = length | 0\n\t      if (encoding === undefined) encoding = 'utf8'\n\t    } else {\n\t      encoding = length\n\t      length = undefined\n\t    }\n\t  // legacy write(string, encoding, offset, length) - remove in v0.13\n\t  } else {\n\t    var swap = encoding\n\t    encoding = offset\n\t    offset = length | 0\n\t    length = swap\n\t  }\n\n\t  var remaining = this.length - offset\n\t  if (length === undefined || length > remaining) length = remaining\n\n\t  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n\t    throw new RangeError('attempt to write outside buffer bounds')\n\t  }\n\n\t  if (!encoding) encoding = 'utf8'\n\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexWrite(this, string, offset, length)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Write(this, string, offset, length)\n\n\t      case 'ascii':\n\t        return asciiWrite(this, string, offset, length)\n\n\t      case 'binary':\n\t        return binaryWrite(this, string, offset, length)\n\n\t      case 'base64':\n\t        // Warning: maxLength not taken into account in base64Write\n\t        return base64Write(this, string, offset, length)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return ucs2Write(this, string, offset, length)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n    }\n\n    Buffer.prototype.toJSON = function toJSON () {\n\t  return {\n\t    type: 'Buffer',\n\t    data: Array.prototype.slice.call(this._arr || this, 0)\n\t  }\n    }\n\n    function base64Slice (buf, start, end) {\n\t  if (start === 0 && end === buf.length) {\n\t    return base64.fromByteArray(buf)\n\t  } else {\n\t    return base64.fromByteArray(buf.slice(start, end))\n\t  }\n    }\n\n    function utf8Slice (buf, start, end) {\n\t  end = Math.min(buf.length, end)\n\t  var res = []\n\n\t  var i = start\n\t  while (i < end) {\n\t    var firstByte = buf[i]\n\t    var codePoint = null\n\t    var bytesPerSequence = (firstByte > 0xEF) ? 4\n\t      : (firstByte > 0xDF) ? 3\n\t      : (firstByte > 0xBF) ? 2\n\t      : 1\n\n\t    if (i + bytesPerSequence <= end) {\n\t      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n\t      switch (bytesPerSequence) {\n\t        case 1:\n\t          if (firstByte < 0x80) {\n\t            codePoint = firstByte\n\t          }\n\t          break\n\t        case 2:\n\t          secondByte = buf[i + 1]\n\t          if ((secondByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n\t            if (tempCodePoint > 0x7F) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 3:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n\t            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 4:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          fourthByte = buf[i + 3]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n\t            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t      }\n\t    }\n\n\t    if (codePoint === null) {\n\t      // we did not generate a valid codePoint so insert a\n\t      // replacement char (U+FFFD) and advance only 1 byte\n\t      codePoint = 0xFFFD\n\t      bytesPerSequence = 1\n\t    } else if (codePoint > 0xFFFF) {\n\t      // encode to utf16 (surrogate pair dance)\n\t      codePoint -= 0x10000\n\t      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n\t      codePoint = 0xDC00 | codePoint & 0x3FF\n\t    }\n\n\t    res.push(codePoint)\n\t    i += bytesPerSequence\n\t  }\n\n\t  return decodeCodePointsArray(res)\n    }\n\n    // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n    // the lowest limit is Chrome, with 0x10000 args.\n    // We go 1 magnitude less, for safety\n    var MAX_ARGUMENTS_LENGTH = 0x1000\n\n    function decodeCodePointsArray (codePoints) {\n\t  var len = codePoints.length\n\t  if (len <= MAX_ARGUMENTS_LENGTH) {\n\t    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n\t  }\n\n\t  // Decode in chunks to avoid \"call stack size exceeded\".\n\t  var res = ''\n\t  var i = 0\n\t  while (i < len) {\n\t    res += String.fromCharCode.apply(\n\t      String,\n\t      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n\t    )\n\t  }\n\t  return res\n    }\n\n    function asciiSlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\n\t  for (var i = start; i < end; i++) {\n\t    ret += String.fromCharCode(buf[i] & 0x7F)\n\t  }\n\t  return ret\n    }\n\n    function binarySlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\n\t  for (var i = start; i < end; i++) {\n\t    ret += String.fromCharCode(buf[i])\n\t  }\n\t  return ret\n    }\n\n    function hexSlice (buf, start, end) {\n\t  var len = buf.length\n\n\t  if (!start || start < 0) start = 0\n\t  if (!end || end < 0 || end > len) end = len\n\n\t  var out = ''\n\t  for (var i = start; i < end; i++) {\n\t    out += toHex(buf[i])\n\t  }\n\t  return out\n    }\n\n    function utf16leSlice (buf, start, end) {\n\t  var bytes = buf.slice(start, end)\n\t  var res = ''\n\t  for (var i = 0; i < bytes.length; i += 2) {\n\t    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n\t  }\n\t  return res\n    }\n\n    Buffer.prototype.slice = function slice (start, end) {\n\t  var len = this.length\n\t  start = ~~start\n\t  end = end === undefined ? len : ~~end\n\n\t  if (start < 0) {\n\t    start += len\n\t    if (start < 0) start = 0\n\t  } else if (start > len) {\n\t    start = len\n\t  }\n\n\t  if (end < 0) {\n\t    end += len\n\t    if (end < 0) end = 0\n\t  } else if (end > len) {\n\t    end = len\n\t  }\n\n\t  if (end < start) end = start\n\n\t  var newBuf\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    newBuf = this.subarray(start, end)\n\t    newBuf.__proto__ = Buffer.prototype\n\t  } else {\n\t    var sliceLen = end - start\n\t    newBuf = new Buffer(sliceLen, undefined)\n\t    for (var i = 0; i < sliceLen; i++) {\n\t      newBuf[i] = this[i + start]\n\t    }\n\t  }\n\n\t  if (newBuf.length) newBuf.parent = this.parent || this\n\n\t  return newBuf\n    }\n\n    /*\n\t * Need to make sure that buffer isn't trying to write out of bounds.\n\t */\n    function checkOffset (offset, ext, length) {\n\t  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n\t  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n    }\n\n    Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\n\t  return val\n    }\n\n    Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) {\n\t    checkOffset(offset, byteLength, this.length)\n\t  }\n\n\t  var val = this[offset + --byteLength]\n\t  var mul = 1\n\t  while (byteLength > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --byteLength] * mul\n\t  }\n\n\t  return val\n    }\n\n    Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  return this[offset]\n    }\n\n    Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return this[offset] | (this[offset + 1] << 8)\n    }\n\n    Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return (this[offset] << 8) | this[offset + 1]\n    }\n\n    Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return ((this[offset]) |\n\t      (this[offset + 1] << 8) |\n\t      (this[offset + 2] << 16)) +\n\t      (this[offset + 3] * 0x1000000)\n    }\n\n    Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset] * 0x1000000) +\n\t    ((this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    this[offset + 3])\n    }\n\n    Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\t  mul *= 0x80\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n\t  return val\n    }\n\n    Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var i = byteLength\n\t  var mul = 1\n\t  var val = this[offset + --i]\n\t  while (i > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --i] * mul\n\t  }\n\t  mul *= 0x80\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n\t  return val\n    }\n\n    Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  if (!(this[offset] & 0x80)) return (this[offset])\n\t  return ((0xff - this[offset] + 1) * -1)\n    }\n\n    Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset] | (this[offset + 1] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n    }\n\n    Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset + 1] | (this[offset] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n    }\n\n    Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset]) |\n\t    (this[offset + 1] << 8) |\n\t    (this[offset + 2] << 16) |\n\t    (this[offset + 3] << 24)\n    }\n\n    Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset] << 24) |\n\t    (this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    (this[offset + 3])\n    }\n\n    Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, true, 23, 4)\n    }\n\n    Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, false, 23, 4)\n    }\n\n    Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, true, 52, 8)\n    }\n\n    Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, false, 52, 8)\n    }\n\n    function checkInt (buf, value, offset, ext, max, min) {\n\t  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n\t  if (value > max || value < min) throw new RangeError('value is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('index out of range')\n    }\n\n    Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n\t  var mul = 1\n\t  var i = 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n    }\n\n    function objectWriteUInt16 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n\t    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n\t      (littleEndian ? i : 1 - i) * 8\n\t  }\n    }\n\n    Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n    }\n\n    Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n    }\n\n    function objectWriteUInt32 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n\t    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n\t  }\n    }\n\n    Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset + 3] = (value >>> 24)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\n\t  var i = 0\n\t  var mul = 1\n\t  var sub = value < 0 ? 1 : 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  var sub = value < 0 ? 1 : 0\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  if (value < 0) value = 0xff + value + 1\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n    }\n\n    Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n    }\n\n    Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n    }\n\n    Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 3] = (value >>> 24)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n    }\n\n    function checkIEEE754 (buf, value, offset, ext, max, min) {\n\t  if (value > max || value < min) throw new RangeError('value is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('index out of range')\n\t  if (offset < 0) throw new RangeError('index out of range')\n    }\n\n    function writeFloat (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, true, noAssert)\n    }\n\n    Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, false, noAssert)\n    }\n\n    function writeDouble (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n\t  return offset + 8\n    }\n\n    Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, true, noAssert)\n    }\n\n    Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, false, noAssert)\n    }\n\n    // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n    Buffer.prototype.copy = function copy (target, targetStart, start, end) {\n\t  if (!start) start = 0\n\t  if (!end && end !== 0) end = this.length\n\t  if (targetStart >= target.length) targetStart = target.length\n\t  if (!targetStart) targetStart = 0\n\t  if (end > 0 && end < start) end = start\n\n\t  // Copy 0 bytes; we're done\n\t  if (end === start) return 0\n\t  if (target.length === 0 || this.length === 0) return 0\n\n\t  // Fatal error conditions\n\t  if (targetStart < 0) {\n\t    throw new RangeError('targetStart out of bounds')\n\t  }\n\t  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n\t  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n\t  // Are we oob?\n\t  if (end > this.length) end = this.length\n\t  if (target.length - targetStart < end - start) {\n\t    end = target.length - targetStart + start\n\t  }\n\n\t  var len = end - start\n\t  var i\n\n\t  if (this === target && start < targetStart && targetStart < end) {\n\t    // descending copy from end\n\t    for (i = len - 1; i >= 0; i--) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // ascending copy from start\n\t    for (i = 0; i < len; i++) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else {\n\t    Uint8Array.prototype.set.call(\n\t      target,\n\t      this.subarray(start, start + len),\n\t      targetStart\n\t    )\n\t  }\n\n\t  return len\n    }\n\n    // fill(value, start=0, end=buffer.length)\n    Buffer.prototype.fill = function fill (value, start, end) {\n\t  if (!value) value = 0\n\t  if (!start) start = 0\n\t  if (!end) end = this.length\n\n\t  if (end < start) throw new RangeError('end < start')\n\n\t  // Fill 0 bytes; we're done\n\t  if (end === start) return\n\t  if (this.length === 0) return\n\n\t  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n\t  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n\t  var i\n\t  if (typeof value === 'number') {\n\t    for (i = start; i < end; i++) {\n\t      this[i] = value\n\t    }\n\t  } else {\n\t    var bytes = utf8ToBytes(value.toString())\n\t    var len = bytes.length\n\t    for (i = start; i < end; i++) {\n\t      this[i] = bytes[i % len]\n\t    }\n\t  }\n\n\t  return this\n    }\n\n    // HELPER FUNCTIONS\n    // ================\n\n    var INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\n    function base64clean (str) {\n\t  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n\t  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n\t  // Node converts strings with length < 2 to ''\n\t  if (str.length < 2) return ''\n\t  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\t  while (str.length % 4 !== 0) {\n\t    str = str + '='\n\t  }\n\t  return str\n    }\n\n    function stringtrim (str) {\n\t  if (str.trim) return str.trim()\n\t  return str.replace(/^\\s+|\\s+$/g, '')\n    }\n\n    function toHex (n) {\n\t  if (n < 16) return '0' + n.toString(16)\n\t  return n.toString(16)\n    }\n\n    function utf8ToBytes (string, units) {\n\t  units = units || Infinity\n\t  var codePoint\n\t  var length = string.length\n\t  var leadSurrogate = null\n\t  var bytes = []\n\n\t  for (var i = 0; i < length; i++) {\n\t    codePoint = string.charCodeAt(i)\n\n\t    // is surrogate component\n\t    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n\t      // last char was a lead\n\t      if (!leadSurrogate) {\n\t        // no lead yet\n\t        if (codePoint > 0xDBFF) {\n\t          // unexpected trail\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        } else if (i + 1 === length) {\n\t          // unpaired lead\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        }\n\n\t        // valid lead\n\t        leadSurrogate = codePoint\n\n\t        continue\n\t      }\n\n\t      // 2 leads in a row\n\t      if (codePoint < 0xDC00) {\n\t        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t        leadSurrogate = codePoint\n\t        continue\n\t      }\n\n\t      // valid surrogate pair\n\t      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n\t    } else if (leadSurrogate) {\n\t      // valid bmp char, but last char was a lead\n\t      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t    }\n\n\t    leadSurrogate = null\n\n\t    // encode utf8\n\t    if (codePoint < 0x80) {\n\t      if ((units -= 1) < 0) break\n\t      bytes.push(codePoint)\n\t    } else if (codePoint < 0x800) {\n\t      if ((units -= 2) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x6 | 0xC0,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x10000) {\n\t      if ((units -= 3) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0xC | 0xE0,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x110000) {\n\t      if ((units -= 4) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x12 | 0xF0,\n\t        codePoint >> 0xC & 0x3F | 0x80,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else {\n\t      throw new Error('Invalid code point')\n\t    }\n\t  }\n\n\t  return bytes\n    }\n\n    function asciiToBytes (str) {\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; i++) {\n\t    // Node's code seems to be doing this and not & 0x7F..\n\t    byteArray.push(str.charCodeAt(i) & 0xFF)\n\t  }\n\t  return byteArray\n    }\n\n    function utf16leToBytes (str, units) {\n\t  var c, hi, lo\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; i++) {\n\t    if ((units -= 2) < 0) break\n\n\t    c = str.charCodeAt(i)\n\t    hi = c >> 8\n\t    lo = c % 256\n\t    byteArray.push(lo)\n\t    byteArray.push(hi)\n\t  }\n\n\t  return byteArray\n    }\n\n    function base64ToBytes (str) {\n\t  return base64.toByteArray(base64clean(str))\n    }\n\n    function blitBuffer (src, dst, offset, length) {\n\t  for (var i = 0; i < length; i++) {\n\t    if ((i + offset >= dst.length) || (i >= src.length)) break\n\t    dst[i + offset] = src[i]\n\t  }\n\t  return i\n    }\n  }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {})\n}, {'base64-js': 38, 'ieee754': 39, 'isarray': 40}],\n38: [function (require, module, exports) {\n  (function (exports) {\n\t  'use strict'\n\n\t  var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n\n\t  var Arr = (typeof Uint8Array !== 'undefined')\n\t    ? Uint8Array\n\t    : Array\n\n\t  var PLUS = '+'.charCodeAt(0)\n\t  var SLASH = '/'.charCodeAt(0)\n\t  var NUMBER = '0'.charCodeAt(0)\n\t  var LOWER = 'a'.charCodeAt(0)\n\t  var UPPER = 'A'.charCodeAt(0)\n\t  var PLUS_URL_SAFE = '-'.charCodeAt(0)\n\t  var SLASH_URL_SAFE = '_'.charCodeAt(0)\n\n\t  function decode (elt) {\n\t    var code = elt.charCodeAt(0)\n\t    if (code === PLUS || code === PLUS_URL_SAFE) return 62 // '+'\n\t    if (code === SLASH || code === SLASH_URL_SAFE) return 63 // '/'\n\t    if (code < NUMBER) return -1 // no match\n\t    if (code < NUMBER + 10) return code - NUMBER + 26 + 26\n\t    if (code < UPPER + 26) return code - UPPER\n\t    if (code < LOWER + 26) return code - LOWER + 26\n\t  }\n\n\t  function b64ToByteArray (b64) {\n\t    var i, j, l, tmp, placeHolders, arr\n\n\t    if (b64.length % 4 > 0) {\n\t      throw new Error('Invalid string. Length must be a multiple of 4')\n\t    }\n\n\t    // the number of equal signs (place holders)\n\t    // if there are two placeholders, than the two characters before it\n\t    // represent one byte\n\t    // if there is only one, then the three characters before it represent 2 bytes\n\t    // this is just a cheap hack to not do indexOf twice\n\t    var len = b64.length\n\t    placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0\n\n\t    // base64 is 4/3 + up to two characters of the original data\n\t    arr = new Arr(b64.length * 3 / 4 - placeHolders)\n\n\t    // if there are placeholders, only get up to the last complete 4 chars\n\t    l = placeHolders > 0 ? b64.length - 4 : b64.length\n\n\t    var L = 0\n\n\t    function push (v) {\n\t      arr[L++] = v\n\t    }\n\n\t    for (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t      tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\n\t      push((tmp & 0xFF0000) >> 16)\n\t      push((tmp & 0xFF00) >> 8)\n\t      push(tmp & 0xFF)\n\t    }\n\n\t    if (placeHolders === 2) {\n\t      tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\n\t      push(tmp & 0xFF)\n\t    } else if (placeHolders === 1) {\n\t      tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\n\t      push((tmp >> 8) & 0xFF)\n\t      push(tmp & 0xFF)\n\t    }\n\n\t    return arr\n\t  }\n\n\t  function uint8ToBase64 (uint8) {\n\t    var i\n\t    var extraBytes = uint8.length % 3 // if we have 1 byte left, pad 2 bytes\n\t    var output = ''\n\t    var temp, length\n\n\t    function encode (num) {\n\t      return lookup.charAt(num)\n\t    }\n\n\t    function tripletToBase64 (num) {\n\t      return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)\n\t    }\n\n\t    // go through the array every three bytes, we'll deal with trailing stuff later\n\t    for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t      temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n\t      output += tripletToBase64(temp)\n\t    }\n\n\t    // pad the end with zeros, but make sure to not forget the extra bytes\n\t    switch (extraBytes) {\n\t      case 1:\n\t        temp = uint8[uint8.length - 1]\n\t        output += encode(temp >> 2)\n\t        output += encode((temp << 4) & 0x3F)\n\t        output += '=='\n\t        break\n\t      case 2:\n\t        temp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])\n\t        output += encode(temp >> 10)\n\t        output += encode((temp >> 4) & 0x3F)\n\t        output += encode((temp << 2) & 0x3F)\n\t        output += '='\n\t        break\n\t      default:\n\t        break\n\t    }\n\n\t    return output\n\t  }\n\n\t  exports.toByteArray = b64ToByteArray\n\t  exports.fromByteArray = uint8ToBase64\n  }(typeof exports === 'undefined' ? (this.base64js = {}) : exports))\n}, {}],\n39: [function (require, module, exports) {\n  exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n\t  var e, m\n\t  var eLen = nBytes * 8 - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var nBits = -7\n\t  var i = isLE ? (nBytes - 1) : 0\n\t  var d = isLE ? -1 : 1\n\t  var s = buffer[offset + i]\n\n\t  i += d\n\n\t  e = s & ((1 << (-nBits)) - 1)\n\t  s >>= (-nBits)\n\t  nBits += eLen\n\t  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t  m = e & ((1 << (-nBits)) - 1)\n\t  e >>= (-nBits)\n\t  nBits += mLen\n\t  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t  if (e === 0) {\n\t    e = 1 - eBias\n\t  } else if (e === eMax) {\n\t    return m ? NaN : ((s ? -1 : 1) * Infinity)\n\t  } else {\n\t    m = m + Math.pow(2, mLen)\n\t    e = e - eBias\n\t  }\n\t  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n  }\n\n  exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n\t  var e, m, c\n\t  var eLen = nBytes * 8 - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n\t  var i = isLE ? 0 : (nBytes - 1)\n\t  var d = isLE ? 1 : -1\n\t  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n\t  value = Math.abs(value)\n\n\t  if (isNaN(value) || value === Infinity) {\n\t    m = isNaN(value) ? 1 : 0\n\t    e = eMax\n\t  } else {\n\t    e = Math.floor(Math.log(value) / Math.LN2)\n\t    if (value * (c = Math.pow(2, -e)) < 1) {\n\t      e--\n\t      c *= 2\n\t    }\n\t    if (e + eBias >= 1) {\n\t      value += rt / c\n\t    } else {\n\t      value += rt * Math.pow(2, 1 - eBias)\n\t    }\n\t    if (value * c >= 2) {\n\t      e++\n\t      c /= 2\n\t    }\n\n\t    if (e + eBias >= eMax) {\n\t      m = 0\n\t      e = eMax\n\t    } else if (e + eBias >= 1) {\n\t      m = (value * c - 1) * Math.pow(2, mLen)\n\t      e = e + eBias\n\t    } else {\n\t      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n\t      e = 0\n\t    }\n\t  }\n\n\t  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n\t  e = (e << mLen) | m\n\t  eLen += mLen\n\t  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n\t  buffer[offset + i - d] |= s * 128\n  }\n}, {}],\n40: [function (require, module, exports) {\n  var toString = {}.toString\n\n  module.exports = Array.isArray || function (arr) {\n\t  return toString.call(arr) == '[object Array]'\n  }\n}, {}]}, {}, [36])\n\nexport default PANOLENS\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/panolens.js","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-cube-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29108898\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-cube-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-cube-pano.vue\n// module id = 315\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a5bfa54\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-pano.vue\n// module id = 316\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-scene.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5a673dcc\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-scene.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-scene.vue\n// module id = 317\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-tour.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8ad7c38c\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-tour.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-tour.vue\n// module id = 318\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-video-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-32faa3e6\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-video-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-video-pano.vue\n// module id = 319\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-66d382e3\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Scene.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Scene.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-66d382e3\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Scene.vue\"),\n  /* scopeId */\n  \"data-v-66d382e3\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Scene.vue\n// module id = 320\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-09ad1f51\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Tour.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Tour.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-09ad1f51\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Tour.vue\"),\n  /* scopeId */\n  \"data-v-09ad1f51\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Tour.vue\n// module id = 321\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-09ad1f51\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Tour.vue\n// module id = 322\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"             \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n        \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"          \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)) + \"\\n          \")]), _vm._v(\"\\n        \")])])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-213df8bf\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/components/demo-block.vue\n// module id = 323\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demos\"\n  }, [_c('div', {\n    staticClass: \"demos-content\"\n  }, [_c('ul', {\n    staticClass: \"demos-menu\"\n  }, [_c('li', {\n    staticClass: \"demos-menu-title\"\n  }, [_vm._v(\"demos\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-pano\"\n    }\n  }, [_vm._v(\"basic panorama\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-cube-pano\"\n    }\n  }, [_vm._v(\"Cube Faces\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-video-pano\"\n    }\n  }, [_vm._v(\"Video Pano\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-scene\"\n    }\n  }, [_vm._v(\"Scene with hotspot\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-tour\"\n    }\n  }, [_vm._v(\"VR Tour\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demos-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-223dbf78\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/App.vue\n// module id = 324\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"cube\",\n      \"source\": \"assets/faces/pano_%s.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-29108898\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-cube-pano.vue\n// module id = 325\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"source\": _vm.urls[_vm.index]\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a5bfa54\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-pano.vue\n// module id = 326\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"video\",\n      \"source\": \"assets/ClashofClans.mp4\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-32faa3e6\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-video-pano.vue\n// module id = 327\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Scene', {\n    attrs: {\n      \"pano\": _vm.scene.pano,\n      \"position\": _vm.scene.position,\n      \"rotation\": _vm.scene.rotation,\n      \"links\": _vm.scene.links\n    },\n    on: {\n      \"on-load-start\": _vm.onLoadStart,\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-5a673dcc\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-scene.vue\n// module id = 328\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-66d382e3\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Scene.vue\n// module id = 329\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"v-pano\"\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-7974fb6b\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Pano.vue\n// module id = 330\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Tour', {\n    attrs: {\n      \"scenes\": _vm.scenes\n    },\n    on: {\n      \"on-load-start\": _vm.onLoadStart,\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-8ad7c38c\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-tour.vue\n// module id = 331\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-09ad1f51\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Tour.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"4136a65b\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-09ad1f51\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Tour.vue\n// module id = 333\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-213df8bf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./demo-block.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"56304fc1\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-213df8bf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/components/demo-block.vue\n// module id = 334\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-223dbf78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./App.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"48e2ad6a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-223dbf78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/App.vue\n// module id = 335\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-66d382e3\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Scene.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"356c544a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-66d382e3\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Scene.vue\n// module id = 336\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-7974fb6b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/less-loader/dist/cjs.js?{}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Pano.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"49e91b24\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-7974fb6b\",\"scoped\":false,\"hasInlineConfig\":false}!./~/less-loader/dist/cjs.js?{}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Pano.vue\n// module id = 337\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-7974fb6b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Pano.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Pano.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7974fb6b\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Pano.vue\n// module id = 41\n// module chunks = 1","import Vue from 'vue'\nimport Router from 'vue-router'\n\nimport { pages } from '../pages'\n\nVue.use(Router)\n\nconst routes = pages.map(page => {\n  const name = page.name\n  return {\n    path: '/' + name.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase(),\n    name,\n    component: page\n  }\n})\n\nconsole.log(routes)\n\nroutes.push({\n  path: '*',\n  redirect: '/demo-pano'\n})\n\nexport default new Router({ routes })\n\n\n\n// WEBPACK FOOTER //\n// ./demos/router/index.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-223dbf78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-223dbf78\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/App.vue\n// module id = 63\n// module chunks = 1","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\nnew Vue({ // eslint-disable-line no-new\n  el: '#app',\n  router,\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./demos/index.js","import DemoPano from './demo-pano'\nimport DemoCubePano from './demo-cube-pano'\nimport DemoVideoPano from './demo-video-pano'\nimport DemoScene from './demo-scene'\nimport DemoTour from './demo-tour'\n\nconst pages = [\n  DemoPano,\n  DemoCubePano,\n  DemoVideoPano,\n  DemoScene,\n  DemoTour\n]\n\nexport { pages }\n\n\n\n// WEBPACK FOOTER //\n// ./demos/pages/index.js","<template>\n  <div class=\"demos\">\n    <div class=\"demos-content\">\n      <ul class=\"demos-menu\">\n        <li class=\"demos-menu-title\">demos</li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-pano\">basic panorama</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-cube-pano\">Cube Faces</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-video-pano\">Video Pano</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-scene\">Scene with hotspot</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-tour\">VR Tour</router-link>\n        </li>\n      </ul>\n\n      <div class=\"demos-pages\">\n        <router-view></router-view>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'App'\n}\n\n</script>\n\n<style>\n* {\n    margin: 0;\n    border: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nul,\nol,\nli {\n    list-style: none;\n}\n\na {\n    color: #657180;\n    text-decoration: none;\n}\n\nhtml,\nbody,\n.demos {\n    width: 100%;\n    height: 100%;\n    color: #657180;\n}\n\nbody {\n    background: #eee;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", SimSun, sans-serif;\n    background: #fff;\n}\n\n.demos-header {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    background: #f3f6fb;\n    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\n    border-bottom: solid 1px #dfe2e7;\n    padding: 15px 15px 15px 30px;\n    line-height: 20px;\n}\n\n.demos-header .title {\n    font-weight: bold;\n    font-size: 18px;\n    display: inline-block;\n}\n\n.demos-header .github {\n    color: #39f;\n    display: inline-block;\n    font-size: 12px;\n    float: right;\n}\n\n.demos-content {\n    width: 100%;\n    height: 100%;\n    padding-top: 52px;\n    overflow: hidden;\n}\n\n.demos-menu {\n    float: left;\n    width: 230px;\n    height: 100%;\n    border-right: solid 1px #dfe2e7;\n    padding: 10px 30px;\n}\n\n.demos-menu .demos-menu-item {\n    display: block;\n    width: 100%;\n    height: 30px;\n    line-height: 30px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.demos-menu .demos-menu-item>a {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.demos-menu .demos-menu-title {\n    display: block;\n    width: 100%;\n    padding: 6px 0;\n    margin-top: 10px;\n    font-size: 14px;\n    font-weight: bold;\n}\n\n.demos-menu .demos-menu-item:hover>a {\n    color: #39f;\n}\n\n.demos-pages {\n    height: 100%;\n    overflow: hidden;\n}\n\n.demo-loading {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n}\n\n.demo-loading::before {\n    content: '';\n    border-radius: 100%;\n    margin: 2px;\n    border: 3px solid #20a0ff;\n    border-bottom-color: transparent;\n    height: 36px;\n    width: 36px;\n    display: inline-block;\n    animation: loading-rotate .75s 0s linear infinite;\n    vertical-align: middle;\n}\n\n.demo-loading::after {\n    content: '';\n    display: inline-block;\n    height: 100%;\n    width: 0;\n    vertical-align: middle;\n}\n\n@keyframes loading-rotate {\n    0% {\n        transform: rotate(0) scale(1);\n    }\n    50% {\n        transform: rotate(180deg) scale(.6);\n    }\n    100% {\n        transform: rotate(360deg) scale(1);\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?49e2f417","<template>\n  <div class=\"demo-block\">\n    <div class=\"demo-block-preview\">\n      <slot name=\"preview\"></slot>\n    </div>\n    <div class=\"demo-block-code\">\n      <div class=\"demo-block-code-box\">\n        <h3>Vue Component & Webpack</h3>\n        <div class=\"demo-block-code-box-content\">\n          <pre>\n               <code\n                ref=\"vueCode\"\n                class=\"html\">{{ vueCode | code }}</code>\n          </pre>\n        </div>\n      </div>\n      <div class=\"demo-block-code-box\">\n        <h3>HTML & JS</h3>\n        <div class=\"demo-block-code-box-content\">\n          <pre>\n            <code\n              ref=\"htmlCode\"\n              class=\"html\">{{ htmlCode | code }}\n            </code>\n          </pre>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport 'highlight.js/styles/github.css'\nimport hljs from 'highlight.js'\n\n/* eslint-disable no-useless-escape */\nconst codeHandler = (code) => {\n  const scripts = `\n  <script src=\"vue.js\"><\\/script> \n  <script src=\"vue-vr.min.js\"><\\/script>`\n  return code.replace(/#scripts#/ig, scripts)\n}\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'App',\n  props: {\n    vueCode: {\n      type: String,\n      default: ''\n    },\n    htmlCode: {\n      type: String,\n      default: '// TODO'\n    }\n  },\n  mounted () {\n    hljs.highlightBlock(this.$refs.vueCode)\n    hljs.highlightBlock(this.$refs.htmlCode)\n  },\n  data () {\n    return {}\n  },\n  filters: {\n    code (val) {\n      return codeHandler(val)\n    }\n  },\n  components: {\n\n  }\n}\n</script>\n\n<style>\n.demo-block {\n    width: 100%;\n    height: 100%;\n    background-color: #fff;\n    border-radius: 3px;\n}\n\n.demo-block .demo-block-preview {\n    width: 70%;\n    height: 100%;\n    float: left;\n    position: relative;\n}\n\n.demo-block .demo-block-code {\n    width: 30%;\n    height: 100%;\n    background: #f9fafc;\n    border-left: solid 1px #dfe2e7;\n    font-size: 13px;\n    float: left;\n}\n\n.demo-block .demo-block-code pre code {\n    font: normal 10pt Consolas, Monaco, monospace;\n}\n\n.demo-block .demo-block-code .demo-block-code-box {\n    width: 100%;\n    height: 50%;\n    position: relative;\n    overflow: hidden;\n}\n\n.demo-block .demo-block-code-box::after {\n    content: '';\n    display: block;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 90%;\n    height: 1px;\n    background: -webkit-linear-gradient(left, #dfe2e7 80%, rgba(223,226,231,0) 100%);\n}\n\n.demo-block .demo-block-code-box h3 {\n    width: 100%;\n    padding: 10px 20px;\n    font-size: 16px;\n    font-weight: bold;\n    position: absolute;\n}\n\n.demo-block .demo-block-code-box-content {\n    position: absolute;\n    top: 40px;\n    bottom: 10px;\n    left: 20px;\n    right: 20px;\n    overflow: auto;\n}\n\n.demo-block .hljs {\n    background: transparent;\n}\n\n.demo-block .demo-block-code code {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// demo-block.vue?70142542","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Pano\n        @on-load=\"onLoad\"\n        type='cube'\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\n\nimport DemoBlock from '../components/demo-block'\nimport Pano from '../../src/Pano.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        type='cube'\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\n</template>\n<script>\n    import { Pano } from 'vuejs-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n <\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='cube'\n            source=\"assets/faces/pano_%s.jpg\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoCubePano',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true\n    }\n  },\n  methods: {\n    onLoad () {\n      this.loading = false\n    }\n  },\n  components: {\n    Pano,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-cube-pano.vue?fdd2d788","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Pano\n        @on-load=\"onLoad\"\n        :source=\"urls[index]\"></Pano>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block'\nimport Pano from '../../src/Pano.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        :source=\"urls[index]\">\n    </Pano>\n</template>\n\n<script>\n    import { Pano } from 'vue-vr'\n\n    export default {\n        components: {\n            Pano\n        },\n        data () {\n          return {\n            urls: [\n              'assets/equirectangular.jpg',\n              'assets/pano.png'\n            ],\n            index: 0\n          }\n        },\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            :source=\"urls[index]\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoPano',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true,\n      urls: [\n        'assets/equirectangular.jpg',\n        'assets/pano.png'\n      ],\n      index: 0\n    }\n  },\n  methods: {\n    onLoad () {\n      this.loading = false\n    }\n  },\n  components: {\n    Pano,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-pano.vue?24072a80","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Scene\n        @on-load-start=\"onLoadStart\"\n        @on-load=\"onLoad\"\n        :pano='scene.pano'\n        :position='scene.position'\n        :rotation='scene.rotation'\n        :links='scene.links'>\n      </Scene>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\">\n      </div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block'\nimport Scene from '../../src/Scene.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Scene\n        @on-load=\"onLoad\"\n        :scene='scene'>\n\n    </Scene>\n    <div\n      class=\"demo-loading\"\n      v-show=\"loading\"></div>\n      \n</template>\n\n<script>\n    import { Scene } from 'vue-vr'\n\n    export default {\n        components: {\n            Scene\n        },\n        data(){\n          return {\n            scene: {\n              key: 'M4wOy2s',\n              panorama: {\n                source: 'assets/equirectangular.jpg',\n                type: 'image'\n              },\n              x: 0,\n              y: 0,\n              z: 0,\n              rotation:90\n            }\n          }\n        }\n    }\n<\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Scene\n          @on-load=\"onLoad\"\n          :scene='scene'>\n      </Scene>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoScene',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true,\n      scene: {\n        pano: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        position: {\n          x: 0,\n          y: 0,\n          z: 0\n        },\n        rotation: {\n          x: 0,\n          y: 135.0 * Math.PI / 180.0,\n          z: 0\n        },\n        links: [\n          {\n            sceneId: 'scene1',\n            position: {\n              x: 100,\n              y: 0,\n              z: -100\n            }\n          },\n          {\n            sceneId: 'scene2',\n            position: {\n              x: 200,\n              y: 0,\n              z: -20\n            }\n          }\n        ]\n      }\n    }\n  },\n  methods: {\n    onLoad () {\n      console.log('onLoad')\n      this.loading = false\n    },\n    onLoadStart () {\n      console.log('onLoadStart')\n      this.loading = true\n    }\n  },\n  components: {\n    Scene,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-scene.vue?18edadf8","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Tour\n        @on-load-start=\"onLoadStart\"\n        @on-load=\"onLoad\"\n        :scenes='scenes'>\n      </Tour>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block'\nimport Tour from '../../src/Tour.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Tour\n        @on-load=\"onLoad\"\n        :scenes='scenes'>\n\n    </Tour>\n    <div\n      class=\"demo-loading\"\n      v-show=\"loading\"></div>\n      \n</template>\n\n<script>\n    import { Tour } from 'vue-vr'\n\n    export default {\n        components: {\n            Tour\n        },\n        data(){\n          return {\n            scenes: [{\n              key: 'M4wOy2s',\n              panorama: {\n                source: 'assets/equirectangular.jpg',\n                type: 'image'\n              },\n              x: 0,\n              y: 0,\n              z: 0,\n              rx: 0,\n              rz: 0,\n              ry: 90,\n              connections: [\n                'eIm7la',\n                'eId9l0',\n                'fK2dL7l'\n              ]\n            },\n            {\n              key: 'eIm7la',\n              panorama: {\n                source: 'assets/faces/pano_%s.jpg',\n                type: 'cube'\n              },\n              x: 100,\n              y: 0,\n              z: 200,\n              rx: 0,\n              rz: 0,\n              ry: 0,\n              connections: [\n                'M4wOy2s'\n              ]\n            },\n            {\n              key: 'eId9l0',\n              panorama: {\n                source: 'assets/faces/pano_%s.jpg',\n                type: 'cube'\n              },\n              x: 150,\n              y: 0,\n              z: -300,\n              rx: 0,\n              rz: 0,\n              ry: 0,\n              connections: [\n                'M4wOy2s'\n              ]\n            },\n            {\n              key: 'fK2dL7l',\n              panorama: {\n                source: 'assets/faces/pano_%s.jpg',\n                type: 'cube'\n              },\n              x: -150,\n              y: 0,\n              z: -300,\n              rx: 0,\n              rz: 0,\n              ry: 0,\n              connections: [\n                'M4wOy2s'\n              ]\n            }]\n          }\n        }\n    }\n<\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Tour\n          @on-load=\"onLoad\"\n          :scenes='scenes'>\n      </Tour>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoTour',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true,\n      scenes: [{\n        key: 'M4wOy2s',\n        panorama: {\n          source: 'assets/equirectangular.jpg',\n          type: 'image'\n        },\n        x: 0,\n        y: 0,\n        z: 0,\n        rx: 0,\n        rz: 0,\n        ry: 90,\n        connections: [\n          'eIm7la',\n          'eId9l0',\n          'fK2dL7l'\n        ]\n      },\n      {\n        key: 'eIm7la',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: 100,\n        y: 0,\n        z: 200,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: [\n          'M4wOy2s'\n        ]\n      },\n      {\n        key: 'eId9l0',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: 150,\n        y: 0,\n        z: -300,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: [\n          'M4wOy2s'\n        ]\n      },\n      {\n        key: 'fK2dL7l',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: -150,\n        y: 0,\n        z: -300,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: [\n          'M4wOy2s'\n        ]\n      }\n      ]\n    }\n  },\n  methods: {\n    onLoad () {\n      console.log('onLoad')\n      this.loading = false\n    },\n    onLoadStart () {\n      console.log('onLoadStart')\n      this.loading = true\n    }\n  },\n  components: {\n    Tour,\n    DemoBlock\n  },\n  mounted () {\n    this.initialScene = this.scenes[0].key\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-tour.vue?6564f667","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Pano\n        @on-load=\"onLoad\"\n        type='video'\n        source=\"assets/ClashofClans.mp4\"></Pano>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block'\nimport Pano from '../../src/Pano.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        type='video'\n        source=\"assets/ClashofClans.mp4\">\n    </Pano>\n</template>\n\n<script>\n    import { Pano } from 'vue-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n<\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='video'\n            source=\"assets/ClashofClans.mp4\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoVideoPano',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true\n    }\n  },\n  methods: {\n    onLoad () {\n      this.loading = false\n    }\n  },\n  components: {\n    Pano,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-video-pano.vue?17bba2d2","<template>\n  <div class=\"v-pano\">\n  </div>\n</template>\n\n<script>\nimport PanoLens from './lib/panolens'\nconst _log = console.log.bind(console)\n\nexport default {\n  name: 'Pano',\n\n  props: {\n    source: {\n      type: String,\n      default: ''\n    },\n    type: {\n      type: String,\n      default: 'image'\n    },\n    width: {\n      type: Number,\n      default: 100\n    },\n    height: {\n      type: Number,\n      default: 100\n    }\n  },\n\n  data () {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      viewer: null,\n      panorama: null\n    }\n  },\n\n  created () {\n    window.addEventListener('resize', this.onResize, false)\n  },\n\n  destroyed () {\n    if (this.panorama && this.panorama.dispose) {\n      this.panorama.dispose()\n    }\n  },\n\n  mounted () {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      }\n    }\n\n    this.viewer = new PanoLens.Viewer({\n      container: this.$el,\n      cameraFov: 100\n    })\n\n    this.loadPano()\n  },\n  watch: {\n    source () {\n      if (!this.viewer) return\n      if (!this.panorama) return\n      this.loadPano()\n    }\n  },\n\n  methods: {\n    onResize () {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight\n          }\n        })\n      }\n    },\n    loadPano () {\n      _log('this.source = ' + this.source)\n      if (!this.source) return\n\n      let pano\n      switch (this.type) {\n        case 'cube':\n          var l = this.source.replace('%s', 'l')\n          var f = this.source.replace('%s', 'f')\n          var r = this.source.replace('%s', 'r')\n          var b = this.source.replace('%s', 'b')\n          var u = this.source.replace('%s', 'u')\n          var d = this.source.replace('%s', 'd')\n          pano = new PanoLens.CubePanorama([r, l, u, d, f, b])\n          break\n        case 'video':\n          pano = new PanoLens.VideoPanorama(this.source, { autoplay: true })\n          break\n        default:\n          pano = new PanoLens.ImagePanorama(this.source)\n          break\n      }\n      this.setPano(pano)\n    },\n    setPano (pano) {\n      if (!pano) return\n      if (this.panorama) {\n        this.viewer.remove(this.panorama)\n      }\n      this.panorama = pano\n      this.viewer.add(this.panorama)\n      this.viewer.setPanorama(this.panorama)\n\n      const that = this\n      this.panorama.addEventListener('load', () => {\n        that.$emit('on-load')\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n.v-pano {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  border: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Pano.vue?55eac492","<template>\n  <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\n  </div>\n</template>\n\n<style scoped>\n  div{\n    cursor: pointer;\n  }\n</style>\n\n<script>\nimport PanoLens from './lib/panolens'\nimport * as THREE from 'three'\nconst _log = console.log.bind(console)\n\nexport default {\n  name: 'Scene',\n  props: {\n    pano: {\n      type: Object,\n      default: () => { return {} }\n    },\n    position: {\n      type: Object,\n      default: () => {\n        return {\n          x: 0,\n          y: 0,\n          z: 0\n        }\n      }\n    },\n    rotation: {\n      type: Object,\n      default: () => {\n        return {\n          x: 0,\n          y: 0,\n          z: 0\n        }\n      }\n    },\n    links: {\n      type: Array,\n      default: () => { return [] }\n    },\n    width: {\n      type: Number,\n      default: undefined\n    },\n    height: {\n      type: Number,\n      default: undefined\n    }\n  },\n  data () {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      scene_index: -1,\n      viewer: null,\n      panorama: null,\n      hotspots: []\n    }\n  },\n  created () {\n    window.addEventListener('resize', this.onResize, false)\n  },\n  mounted () {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      }\n    }\n\n    this.viewer = new PanoLens.Viewer({\n      container: this.$el,\n      cameraFov: 100\n    })\n\n    this.loadScene()\n  },\n  // watch: {\n  //   scenes () {\n  //     if (!this.viewer) return\n  //     if (!this.scenes || this.scenes.length === 0) return\n  //     this.loadScene()\n  //   }\n  // },\n  methods: {\n    onResize () {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight\n          }\n        })\n      }\n    },\n\n    loadScene () {\n      _log('this.pano = ' + this.pano)\n      if (!this.pano) return\n\n      var source = this.pano.source\n\n      switch (this.pano.type) {\n        case 'cube':\n          var l = source.replace('%s', 'l')\n          var f = source.replace('%s', 'f')\n          var r = source.replace('%s', 'r')\n          var b = source.replace('%s', 'b')\n          var u = source.replace('%s', 'u')\n          var d = source.replace('%s', 'd')\n          this.panorama = new PanoLens.CubePanorama([r, l, u, d, f, b])\n          break\n        case 'video':\n          this.panorama = new PanoLens.VideoPanorama(source, { autoplay: true })\n          break\n        default:\n          this.panorama = new PanoLens.ImagePanorama(source)\n          break\n      }\n\n      // init this.viewer\n      this.initViewer()\n      // add hotspots\n      var group = new THREE.Object3D()\n\n      this.links.forEach((link, index) => {\n        _log(index)\n\n        var hotspot = addHotspot(link)\n        this.viewer.add(hotspot)\n\n        this.hotspots.push(hotspot)\n\n        var arrow = addArrow(this.position, link)\n\n        arrow.addEventListener('mouseover', () => {\n          _log('hoverred')\n        })\n\n        group.add(arrow)\n      })\n\n      var that = this\n\n      var raycaster = new THREE.Raycaster()\n\n      var INTERSECTED = null\n\n      this.viewer.container.addEventListener('click', (event) => {\n        if (INTERSECTED) {\n          _log(INTERSECTED.targetScene)\n          that.scene_index = that.getSceneIndexByKey(INTERSECTED.targetScene.key)\n\n          that.viewer.remove(that.panorama)\n          that.loadScene()\n          INTERSECTED = null\n        }\n      })\n\n      this.viewer.container.addEventListener('mousemove', (event) => {\n        // _log(e)\n\n        var mouse = new THREE.Vector2()\n        var camera = that.viewer.camera\n        mouse.x = ((event.clientX - that.$el.parentElement.offsetLeft) / that.viewer.container.offsetWidth) * 2 - 1\n        mouse.y = -((event.clientY - that.$el.parentElement.offsetTop) / that.viewer.container.offsetHeight) * 2 + 1\n\n        raycaster.setFromCamera(mouse, camera)\n\n        var\tintersects = raycaster.intersectObjects(that.viewer.scene.children, true)\n\n        var intersectedObject = null\n\n        if (intersects.length >= 0) {\n          intersects.forEach((intersect, index) => {\n            if (intersect.object.type === 'hotspot' || intersect.object.type === 'arrow') {\n              intersectedObject = intersect.object\n            }\n          })\n        }\n\n        if (intersectedObject) {\n          if (INTERSECTED) {\n            if (INTERSECTED.material.color) {\n              INTERSECTED.material.color.setHex(INTERSECTED.currentHex)\n            }\n\n            INTERSECTED.scale.set(1, 1, 1)\n          }\n          // store reference to closest object as current intersection object\n          INTERSECTED = intersects[0].object\n          // store color of closest object (for later restoration)\n          if (INTERSECTED.material.color) {\n            INTERSECTED.currentHex = INTERSECTED.material.color.getHex()\n          }\n          // set a new color for closest object\n          if (INTERSECTED.material.color) {\n            INTERSECTED.material.color.setHex(0xffff00)\n          }\n          INTERSECTED.scale.set(1.2, 1.2, 1.2)\n        } else {\n          // restore previous intersection object (if it exists) to its original color\n          if (INTERSECTED) {\n            if (INTERSECTED.material.color) {\n              INTERSECTED.material.color.setHex(INTERSECTED.currentHex)\n            }\n            INTERSECTED.scale.set(1, 1, 1)\n          }\n          // remove previous intersection object reference\n          //     by setting current intersection object to \"nothing\"\n          INTERSECTED = null\n        }\n      })\n\n      this.viewer.addUpdateCallback(function () {\n        // if (objects.length > 0) {\n        //   this.position.copy(objects[0].origin)\n        // } else {\n\n        // }\n\n        this.position.copy(that.viewer.control.target)\n        // this.rotation.y = that.viewer.camera.rotation.y\n        this.rotation.z = that.viewer.camera.rotation.z\n        // this.rotation.x = that.viewer.camera.rotation.x\n        this.translateZ(0)\n        this.translateX(0)\n        this.translateY(-1)\n        this.translateZ(0)\n\n        // this.scale.set(that.viewer.zoom)\n      }.bind(group))\n\n      this.viewer.add(group)\n      // If you want a visible bounding box\n\n      // this.viewer.add(helper)\n\n      this.panorama.addEventListener('load', () => {\n        that.$emit('on-load')\n      })\n    },\n\n    initViewer () {\n      this.viewer.add(this.panorama)\n\n      this.viewer.camera.near = 0.001\n      this.viewer.camera.target = this.panorama.position\n\n      this.viewer.panorama.rotation.set(0, Math.PI, 0)\n      // this.viewer.rotation.set(0, Math.PI / 2, 0)\n      this.viewer.panorama.position.copy(this.position)\n    }\n  }\n}\n\nfunction addHotspot (hotspotData) {\n  var geometry = new THREE.RingGeometry(8, 13, 100, 100)\n  var material = new THREE.MeshPhongMaterial({\n    color: 1668818,\n    emissive: 0xffffff,\n    transparent: true,\n    opacity: 1,\n    side: THREE.DoubleSide,\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  })\n\n  var geometryBorder = new THREE.CircleGeometry(9, 32, 32)\n  var materialBorder = new THREE.MeshPhongMaterial()\n  materialBorder.copy(material)\n\n  materialBorder.opacity = 0.5\n\n  var circle = new THREE.Mesh(geometryBorder)\n\n  var hotspot = new THREE.Mesh(geometry)\n\n  var merged = new THREE.Geometry()\n\n  circle.updateMatrix()\n  merged.merge(circle.geometry, circle.matrix, 0)\n  hotspot.updateMatrix()\n\n  merged.merge(hotspot.geometry, hotspot.matrix, 1)\n\n  var group = new THREE.Mesh(merged, new THREE.MeshFaceMaterial([material, materialBorder]))\n\n  group.rotation.set(toRadian(90), 0, 0)\n  group.position.set(hotspotData.position.x, hotspotData.position.y - 100, hotspotData.position.z)\n\n  group.type = 'hotspot'\n\n  group.targetScene = hotspotData\n\n  return group\n}\n\nfunction addArrow (currentPosition, targetScene) {\n  var arrowGeometry = makeArrowGeometry()\n  var arrowMaterial = new THREE.MeshBasicMaterial({\n    transparent: true,\n    opacity: 0.8,\n    color: 1668818,\n    emissive: 0xffffff,\n    side: THREE.DoubleSide,\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  })\n\n  var arrow = new THREE.Mesh(arrowGeometry, arrowMaterial)\n\n  var x1 = targetScene.x\n  var z1 = targetScene.z\n  var x2 = currentPosition.x\n  var z2 = currentPosition.z\n\n  var ath = toDegree(Math.atan2((z1 - z2), (x1 - x2)))\n\n  arrow.rotation.set(toRadian(90), 0, toRadian(ath))\n\n  var arrowPos = sphereToWorld(ath, 0)\n\n  arrow.position.set(arrowPos.x, arrowPos.y, arrowPos.z)\n  arrow.type = 'arrow'\n  arrow.targetScene = targetScene\n  return arrow\n}\n\nfunction makeArrowGeometry () {\n  var t = 1 / 10.0\n  var i = 2 * t / 3\n  var n = t * Math.cos(60 * THREE.Math.DEG2RAD)\n  var r = t * Math.sin(60 * THREE.Math.DEG2RAD)\n  var o = new THREE.Shape()\n\n  o.moveTo(i, 0)\n  o.lineTo(i - n, r)\n  o.lineTo(-n, r)\n  o.lineTo(0, 0)\n  o.lineTo(-n, -r)\n  o.lineTo(i - n, -r)\n  o.lineTo(i, 0)\n\n  return new THREE.ShapeGeometry(o)\n}\n\nfunction sphereToWorld (ath, atv) {\n  var d = 1 / 2.0\n  ath += 90\n  var mY = -d * Math.sin(toRadian(atv))\n  var r = -d * Math.cos(toRadian(atv))\n  var mX = r * Math.sin(toRadian(-ath))\n  var mZ = r * Math.cos(toRadian(-ath))\n\n  return new THREE.Vector3(mX, mY, mZ)\n}\nfunction toRadian (a) {\n  return a * Math.PI / 180.0\n}\n\nfunction toDegree (a) {\n  return a * 180.0 / Math.PI\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Scene.vue?565eb048","<template>\n  <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\n  </div>\n</template>\n\n<style scoped>\n  div{\n    cursor: pointer;\n  }\n</style>\n\n<script>\nimport PanoLens from './lib/panolens'\nimport * as THREE from 'three'\nconst _log = console.log.bind(console)\n\nexport default {\n  name: 'Tour',\n  props: {\n    scenes: {\n      type: Array,\n      default: () => { return [] }\n    },\n    sceneIndex: {\n      type: Number,\n      default: 0\n    },\n    width: {\n      type: Number,\n      default: undefined\n    },\n    height: {\n      type: Number,\n      default: undefined\n    }\n  },\n  data () {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      scene_index: -1,\n      viewer: null,\n      panorama: null,\n      hotspots: [],\n      arrowGroup: null\n    }\n  },\n  created () {\n    window.addEventListener('resize', this.onResize, false)\n  },\n  mounted () {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      }\n    }\n\n    this.viewer = new PanoLens.Viewer({\n      container: this.$el,\n      cameraFov: 100\n    })\n    if (this.scene_index === -1) {\n      this.loadScene(this.sceneIndex)\n    }\n  },\n  // watch: {\n  //   scenes () {\n  //     if (!this.viewer) return\n  //     if (!this.scenes || this.scenes.length === 0) return\n  //     this.loadScene()\n  //   }\n  // },\n  methods: {\n    onResize () {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight\n          }\n        })\n      }\n    },\n    getSceneIndexByKey (key) {\n      for (let i = 0; i < this.scenes.length; i++) {\n        if (this.scenes[i].key === key) {\n          return i\n        }\n      }\n      return -1\n    },\n    loadScene (index) {\n      this.$emit('on-load-start')\n      _log('this.scenes = ' + this.scenes)\n      if (!this.scenes || this.scenes.length === 0) return\n\n      if (this.scene_index === index) return\n\n      this.scene_index = index\n\n      let scene = this.scenes[index]\n\n      let pano = scene.panorama\n      let source = pano.source\n\n      switch (pano.type) {\n        case 'cube':\n          let l = source.replace('%s', 'l')\n          let f = source.replace('%s', 'f')\n          let r = source.replace('%s', 'r')\n          let b = source.replace('%s', 'b')\n          let u = source.replace('%s', 'u')\n          let d = source.replace('%s', 'd')\n          this.panorama = new PanoLens.CubePanorama([r, l, u, d, f, b])\n          break\n        case 'video':\n          this.panorama = new PanoLens.VideoPanorama(source, { autoplay: true })\n          _log('this is video')\n          break\n        default:\n          this.panorama = new PanoLens.ImagePanorama(source)\n          break\n      }\n\n      this.viewer.camera.near = 0.001\n      this.viewer.camera.position.set(scene.x, scene.y, scene.z)\n\n      this.viewer.camera.translateZ(1)\n\n      this.viewer.add(this.panorama)\n\n      this.viewer.panorama.rotation.set(0, Math.PI, 0)\n      this.panorama.parent.rotation.set(0, Math.PI, 0)\n      this.viewer.panorama.position.set(scene.x, scene.y, scene.z)\n\n      this.viewer.control.target = this.viewer.panorama.position\n\n      _log(this.viewer)\n      _log('panorama = ', this.panorama)\n\n      // remove arrows if exist\n      if (this.arrowGroup) {\n        this.viewer.remove(this.arrowGroup)\n      }\n\n      // remove hotspots if exist\n      if (this.hotspots) {\n        this.hotspots.forEach((hotspot) => {\n          this.viewer.remove(hotspot)\n        })\n      }\n\n      // add hotspots\n\n      this.arrowGroup = new THREE.Object3D()\n\n      scene.connections.forEach(key => {\n        _log('connections key = ', key)\n        let index = this.getSceneIndexByKey(key)\n        _log('connections index = ', index)\n        if (index === -1) return\n\n        let hotspot = addHotspot(scene, this.scenes[index])\n        this.viewer.add(hotspot)\n\n        this.hotspots.push(hotspot)\n\n        let arrow = addArrow(scene, this.scenes[index])\n\n        arrow.addEventListener('mouseover', () => {\n          _log('hoverred')\n        })\n\n        this.arrowGroup.add(arrow)\n      })\n\n      let that = this\n\n      let raycaster = new THREE.Raycaster()\n\n      let INTERSECTED = null\n\n      this.viewer.container.addEventListener('click', (event) => {\n        if (Date.now() - timeStamp < rate) return\n\n        if (INTERSECTED) {\n          _log(INTERSECTED.targetScene)\n          // let index = that.getSceneIndexByKey(INTERSECTED.targetScene.key)\n\n          alert('TODO: move to next scene ' + INTERSECTED.targetScene.key)\n\n          // todo move to scene\n          // that.panorama.dispose()\n\n          // this.$emit('on-load-start')\n\n          // setTimeout(that.loadScene(index), 10)\n          // timeStamp = Date.now()\n          // INTERSECTED = null\n        }\n      })\n\n      // this.viewer.container.addEventListener('mousemove', (event) => {\n      //   // _log(e)\n\n      //   let mouse = new THREE.Vector2()\n      //   let camera = that.viewer.camera\n      //   mouse.x = ((event.clientX - that.$el.parentElement.offsetLeft) / that.viewer.container.offsetWidth) * 2 - 1\n      //   mouse.y = -((event.clientY - that.$el.parentElement.offsetTop) / that.viewer.container.offsetHeight) * 2 + 1\n\n      //   raycaster.setFromCamera(mouse, camera)\n\n      //   let\tintersects = raycaster.intersectObjects(that.viewer.scene.children, true)\n\n      //   let intersectedObject = null\n\n      //   if (intersects.length >= 0) {\n      //     intersects.forEach((intersect, index) => {\n      //       if (intersect.object.type === 'hotspot' || intersect.object.type === 'arrow') {\n      //         intersectedObject = intersect.object\n      //       }\n      //     })\n      //   }\n\n      //   if (intersectedObject) {\n      //     if (INTERSECTED) {\n      //       if (INTERSECTED.material.color) {\n      //         INTERSECTED.material.color.setHex(INTERSECTED.currentHex)\n      //       }\n\n      //       INTERSECTED.scale.set(1, 1, 1)\n      //     }\n      //     // store reference to closest object as current intersection object\n      //     INTERSECTED = intersects[0].object\n      //     // store color of closest object (for later restoration)\n      //     if (INTERSECTED.material.color) {\n      //       INTERSECTED.currentHex = INTERSECTED.material.color.getHex()\n      //     }\n      //     // set a new color for closest object\n      //     if (INTERSECTED.material.color) {\n      //       INTERSECTED.material.color.setHex(0xffff00)\n      //     }\n      //     INTERSECTED.scale.set(1.2, 1.2, 1.2)\n      //   } else {\n      //     // restore previous intersection object (if it exists) to its original color\n      //     if (INTERSECTED) {\n      //       if (INTERSECTED.material.color) {\n      //         INTERSECTED.material.color.setHex(INTERSECTED.currentHex)\n      //       }\n      //       INTERSECTED.scale.set(1, 1, 1)\n      //     }\n      //     // remove previous intersection object reference\n      //     //     by setting current intersection object to \"nothing\"\n      //     INTERSECTED = null\n      //   }\n      // })\n\n      // this.viewer.addUpdateCallback(function () {\n      //   // if (objects.length > 0) {\n      //   //   this.position.copy(objects[0].origin)\n      //   // } else {\n\n      //   // }\n\n      //   this.position.copy(that.viewer.control.target)\n      //   // this.rotation.y = that.viewer.camera.rotation.y\n      //   this.rotation.z = that.viewer.camera.rotation.z\n      //   // this.rotation.x = that.viewer.camera.rotation.x\n      //   this.translateZ(0)\n      //   this.translateX(0)\n      //   this.translateY(-1)\n      //   this.translateZ(0)\n\n      //   // this.scale.set(that.viewer.zoom)\n      // }.bind(this.arrowGroup))\n\n      this.viewer.add(this.arrowGroup)\n      // If you want a visible bounding box\n\n      // this.viewer.add(helper)\n\n      this.panorama.addEventListener('load', () => {\n        that.$emit('on-load')\n      })\n    }\n  }\n}\n\nlet rate = 1000\nlet timeStamp = Date.now() - rate\n\nfunction addHotspot (scene, targetScene) {\n  let pos = {\n    x: targetScene.x,\n    y: targetScene.y,\n    z: targetScene.z\n  }\n\n  let geometry = new THREE.RingGeometry(8, 13, 100, 100)\n  let material = new THREE.MeshPhongMaterial({\n    color: 1668818,\n    emissive: 0xffffff,\n    transparent: true,\n    opacity: 1,\n    side: THREE.DoubleSide,\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  })\n\n  let geometryBorder = new THREE.CircleGeometry(9, 32, 32)\n  let materialBorder = new THREE.MeshPhongMaterial()\n  materialBorder.copy(material)\n\n  materialBorder.opacity = 0.5\n\n  let circle = new THREE.Mesh(geometryBorder)\n\n  let hotspot = new THREE.Mesh(geometry)\n\n  let merged = new THREE.Geometry()\n\n  circle.updateMatrix()\n  merged.merge(circle.geometry, circle.matrix, 0)\n  hotspot.updateMatrix()\n\n  merged.merge(hotspot.geometry, hotspot.matrix, 1)\n\n  let group = new THREE.Mesh(merged, new THREE.MeshFaceMaterial([material, materialBorder]))\n\n  group.rotation.set(toRadian(90), 0, 0)\n  group.position.set(pos.x, pos.y - 100, pos.z)\n\n  group.type = 'hotspot'\n\n  group.targetScene = targetScene\n\n  return group\n}\n\nfunction addArrow (scene, targetScene) {\n  let arrowGeometry = makeArrowGeometry()\n  let arrowMaterial = new THREE.MeshBasicMaterial({\n    transparent: true,\n    opacity: 0.8,\n    color: 1668818,\n    emissive: 0xffffff,\n    side: THREE.DoubleSide,\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  })\n\n  let arrow = new THREE.Mesh(arrowGeometry, arrowMaterial)\n\n  let x1 = targetScene.x\n  let z1 = targetScene.z\n  let x2 = scene.x\n  let z2 = scene.z\n\n  let ath = toDegree(Math.atan2((z1 - z2), (x1 - x2)))\n\n  arrow.rotation.set(toRadian(90), 0, toRadian(ath))\n\n  let arrowPos = sphereToWorld(ath, 0)\n\n  arrow.position.set(arrowPos.x, arrowPos.y, arrowPos.z)\n  arrow.type = 'arrow'\n  arrow.targetScene = targetScene\n  return arrow\n}\n\nfunction makeArrowGeometry () {\n  let t = 1 / 10.0\n  let i = 2 * t / 3\n  let n = t * Math.cos(60 * THREE.Math.DEG2RAD)\n  let r = t * Math.sin(60 * THREE.Math.DEG2RAD)\n  let o = new THREE.Shape()\n  o.moveTo(i, 0)\n  o.lineTo(i - n, r)\n  o.lineTo(-n, r)\n  o.lineTo(0, 0)\n  o.lineTo(-n, -r)\n  o.lineTo(i - n, -r)\n  o.lineTo(i, 0)\n  return new THREE.ShapeGeometry(o)\n}\n\nfunction sphereToWorld (ath, atv) {\n  let d = 1 / 2.0\n  ath += 90\n  let mY = -d * Math.sin(toRadian(atv))\n  let r = -d * Math.cos(toRadian(atv))\n  let mX = r * Math.sin(toRadian(-ath))\n  let mZ = r * Math.cos(toRadian(-ath))\n\n  return new THREE.Vector3(mX, mY, mZ)\n}\nfunction toRadian (a) {\n  return a * Math.PI / 180.0\n}\n\nfunction toDegree (a) {\n  return a * 180.0 / Math.PI\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Tour.vue?2f6abc58"],"sourceRoot":""}