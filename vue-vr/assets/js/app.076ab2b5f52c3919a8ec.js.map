{"version":3,"sources":["webpack:///assets/js/app.076ab2b5f52c3919a8ec.js","webpack:///./src/Tour.vue?952a","webpack:///./demos/components/demo-block.vue?916f","webpack:///./demos/App.vue?0551","webpack:///./demos/components/demo-block.vue","webpack:///./demos/pages/demo-cube-pano.vue","webpack:///./demos/pages/demo-pano.vue","webpack:///./demos/pages/demo-tour.vue","webpack:///./demos/pages/demo-video-pano.vue","webpack:///./src/Tour.vue","webpack:///./src/Tour.vue?3ec2","webpack:///./demos/components/demo-block.vue?6e72","webpack:///./demos/App.vue?8c56","webpack:///./demos/pages/demo-cube-pano.vue?d0a6","webpack:///./demos/pages/demo-pano.vue?c299","webpack:///./demos/pages/demo-video-pano.vue?e6e9","webpack:///./src/Pano.vue?e317","webpack:///./demos/pages/demo-tour.vue?a913","webpack:///./src/Tour.vue?1a47","webpack:///./demos/components/demo-block.vue?9e40","webpack:///./demos/App.vue?0543","webpack:///./src/Pano.vue","webpack:///./src/lib/panolens.js","webpack:///./demos/router/index.js","webpack:///./demos/App.vue","webpack:///./demos/index.js","webpack:///./demos/pages/index.js","webpack:///App.vue","webpack:///demo-block.vue","webpack:///demo-cube-pano.vue","webpack:///demo-pano.vue","webpack:///demo-tour.vue","webpack:///demo-video-pano.vue","webpack:///Pano.vue","webpack:///Tour.vue"],"names":["webpackJsonp","127","module","exports","__webpack_require__","push","i","128","129","130","23","Component","311","312","313","314","315","316","render","_vm","this","_h","$createElement","_self","_c","staticStyle","width","height","margin","border","padding","staticRenderFns","317","staticClass","_t","_v","ref","_s","_f","vueCode","htmlCode","318","attrs","to","319","vue-code","code","html-code","slot","type","source","on","on-load","onLoad","directives","name","rawName","value","expression","320","321","322","323","scenes","on-load-start","onLoadStart","325","content","locals","326","327","38","41","__webpack_exports__","process","global","require","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default","__WEBPACK_IMPORTED_MODULE_8_three__","PANOLENS","REVISION","enableInlineVideo","e","r","t","d","a","start","stop","requestAnimationFrame","cancelAnimationFrame","stopImmediatePropagation","addEventListener","get","set","dispatchEvent","Event","resolve","then","Audio","crossOrigin","src","currentSrc","u","m","Date","now","h","currentTime","k","T","o","driver","video","duration","s","readyState","HAVE_FUTURE_DATA","hasAudio","playbackRate","loop","networkState","NETWORK_IDLE","buffered","length","load","ended","pause","c","g","webkitDisplayingFullscreen","E","paused","play","updater","HAVE_ENOUGH_DATA","v","w","p","bind","muted","autoplay","indexOf","l","f","y","everywhere","b","iPad","ipad","test","navigator","userAgent","classList","add","removeEventListener","platform","console","warn","document","head","style","matchMedia","matches","TWEEN","_tweens","getAll","removeAll","tween","remove","splice","update","time","preserve","undefined","window","hrtime","performance","getTime","Tween","object","_repeatDelayTime","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","Easing","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","_onStopCallback","properties","property","Array","concat","call","stopChainedTweens","end","numChainedTweens","delay","amount","repeat","times","repeatDelay","yoyo","easing","interpolation","chain","arguments","onStart","callback","onUpdate","onComplete","onStop","elapsed","charAt","parseFloat","isFinite","tmp","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","Back","Bounce","floor","fn","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","v0","v1","t2","root","define","domElement","getAutoRotationAngle","scope","autoRotateSpeed","getZoomScale","zoomSpeed","onMouseDown","event","momentumOn","momentumLeft","momentumUp","enabled","preventDefault","button","mouseButtons","ORBIT","noRotate","state","STATE","ROTATE","rotateStart","clientX","clientY","ZOOM","noZoom","DOLLY","dollyStart","PAN","noPan","panStart","NONE","onMouseMove","onMouseUp","startEvent","element","body","rotateEnd","rotateDelta","subVectors","rotateLeft","x","clientWidth","rotateSpeed","rotateUp","clientHeight","copy","eventPrevious","dollyEnd","dollyDelta","dollyIn","dollyOut","panEnd","panDelta","pan","endEvent","onMouseWheel","stopPropagation","delta","wheelDelta","detail","fov","maxFov","updateProjectionMatrix","minFov","changeEvent","onKeyUp","keyCode","keys","UP","keyUp","BOTTOM","keyBottom","LEFT","keyLeft","RIGHT","keyRight","onKeyDown","noKeys","momentumKeydownFactor","touchstart","touches","TOUCH_ROTATE","pageX","pageY","TOUCH_DOLLY","dx","dy","TOUCH_PAN","touchmove","scale","touchend","frameId","target","center","minDistance","maxDistance","Infinity","minZoom","maxZoom","keyPanSpeed","autoRotate","minPolarAngle","maxPolarAngle","momentumDampingFactor","momentumScalingFactor","minAzimuthAngle","maxAzimuthAngle","MIDDLE","theta","phi","panOffset","offset","phiDelta","thetaDelta","lastPosition","lastQuaternion","target0","clone","position0","position","zoom0","zoom","quat","setFromUnitVectors","up","quatInverse","inverse","setLastQuaternion","quaternion","getLastPosition","angle","panLeft","distance","te","matrix","elements","multiplyScalar","panUp","deltaX","deltaY","sub","targetDistance","tan","right","left","top","bottom","momentum","abs","dollyScale","max","min","ignoreUpdate","applyQuaternion","atan2","z","radius","lookAt","distanceToSquared","dot","reset","getPolarAngle","getAzimuthalAngle","prototype","constructor","camera","rotY","rotX","tempX","tempY","rotation","reorder","deviceOrientation","screenOrientation","alpha","alphaOffsetAngle","onDeviceOrientationChangeEvent","onScreenOrientationChangeEvent","orientation","onTouchStartEvent","onTouchMoveEvent","degToRad","updateAlphaOffsetAngle","setCameraQuaternion","beta","gamma","orient","vectorFingerY","zee","euler","q0","q1","fingerQY","fingerQX","setFromAxisAngle","multiply","setFromEuler","connect","disconnect","dispose","direction","axis","_sign","_cosh","exp","_sinhInverse","log","modify","geometry","thirdAxis","crossVectors","P","transpose","InverseP","getInverse","newVertices","oldVertices","anglesBetweenOldandNewVertices","meshGeometryBoundingBoxMaxx","meshGeometryBoundingBoxMinx","meshGeometryBoundingBoxMaxy","meshGeometryBoundingBoxMiny","vertices","applyMatrix4","meshWidthold","meshDepth","ParamB","oldMiddlex","oldMiddley","meshWidth","NewParamB","rightEdgePos","bendCenter","x0","y0","normalize","Q","addVectors","middle","O","acos","computeFaceNormals","verticesNeedUpdate","normalsNeedUpdate","fvNames","fl","faces","face","vertexNormals","vl","rotateMatrix","applyMatrix3","renderer","_camera","_scene","_stereo","aspect","_params","minFilter","magFilter","format","_renderTarget","scissorTest","texture","generateMipmaps","distortion","removeAttribute","toNonIndexed","positions","attributes","array","uvs","uv","count","positions2","Float32Array","uvs2","vector","scalar","material","map","mesh","setSize","pixelRatio","getPixelRatio","scene","updateMatrixWorld","parent","scissor","viewport","cameraL","cameraR","setEyeSeparation","eyeSep","size","getSize","autoClear","clear","setScissorTest","setScissor","setViewport","GSVPANO","PanoLoader","parameters","_zoom","_panoId","_parameters","_panoClient","google","maps","StreetViewService","_count","_total","_canvas","_ctx","_wc","_hc","copyright","levelsW","levelsH","widths","heights","gl","canvas","createElement","getContext","error","maxW","maxH","maxTexSize","getParameter","MAX_TEXTURE_SIZE","setProgress","loaded","total","onProgress","throwError","message","onError","adaptTextureToZoom","ceil","ptr","composeFromTile","px","py","drawImage","progress","round","panoId","onPanoramaLoad","loadFromId","id","composePanorama","url","self","useWebGL","loadTexture","img","Image","panoid","loadPano","getPanoramaById","result","status","StreetViewStatus","OK","onPanoramaData","location","pano","onNoPanoramaData","setZoom","DataImageSource","DataImage","Info","Arrow","FullscreenEnter","FullscreenLeave","VideoPlay","VideoPause","WhiteTile","ReticleIdle","Setting","ChevronRight","Check","ViewIndicator","ReticleDwell","Controls","DEVICEORIENTATION","Modes","UNKNOWN","NORMAL","CARDBOARD","STEREO","checkTouchSupported","msMaxTouchPoints","ImageLoader","onImageLoaded","urlCreator","revokeObjectURL","image","cached","request","arrayBufferView","blob","reference","iconName","hasOwnProperty","setTimeout","URL","webkitURL","createElementNS","XMLHttpRequest","open","responseType","onprogress","lengthComputable","onloadend","Uint8Array","response","Blob","createObjectURL","send","TextureLoader","needsUpdate","CubeTextureLoader","urls","all","loadings","index","images","StereographicShader","uniforms","tDiffuse","resolution","transform","vertexShader","join","fragmentShader","Panorama","ImageQualityLow","ImageQualityFair","ImageQualityMedium","ImageQualityHigh","ImageQualitySuperHigh","animationDuration","defaultInfospotSize","container","linkedSpots","isInfospotVisible","linkingImageURL","linkingImageScale","side","visible","infospotAnimation","fadeIn","setContainer","onClick","setupTransitions","invertedObject","Infospot","method","data","scalePlaceHolder","intersects","traverse","HTMLElement","children","forEach","child","getZoomLevel","innerWidth","updateTexture","toggleInfospotVisibility","isVisible","show","hide","setLinkingImage","link","imageScale","imageSrc","spot","toPanorama","fadeInAnimation","fadeOutAnimation","enterTransition","leaveTransition","opacity","fadeOut","onEnter","onLeave","recursiveDispose","ImagePanorama","transparent","HTMLImageElement","GoogleStreetviewPanorama","gsvLoader","loadRequested","setupGoogleMapAPI","loadGSVLoader","script","onreadystatechange","setGSVLoader","onload","getElementsByTagName","appendChild","getGSVLoader","CubePanorama","edgeLength","shader","JSON","parse","BasicPanorama","tile","VideoPanorama","options","playsinline","videoElement","videoRenderObject","videoProgress","isIOS","isMobile","pauseVideo","resumeVideoProgress","toggleVideo","setVideoCurrentTime","setAttribute","onloadeddata","setVideoTexture","querySelectorAll","ontimeupdate","resetVideo","videoTexture","isVideoPaused","percentage","playVideo","isVideoMuted","muteVideo","unmuteVideo","getVideoElement","EmptyPanorama","color","LittlePlanet","ratio","EPS","createGeometry","createMaterial","dragging","userMouse","quatA","quatB","quatCur","quatSlerp","vectorX","vectorY","onWindowResize","registerMouseEvents","onContextMenu","unregisterMouseEvents","pinchDistance","onUpdateCallback","angleX","angleY","addZoomDelta","lowerBound","upperBound","slerp","makeRotationFromQuaternion","ImageLittlePlanet","Reticle","autoSelect","idleImageUrl","dwellImageUrl","dwellTime","dwellSpriteAmount","dwellInterval","IDLE","DWELLING","scaleIdle","scaleDwell","textureLoaded","idleTexture","dwellTexture","depthTest","currentTile","startTime","renderOrder","timerId","updateStatus","loadTextures","setupDwellSprite","select","completeCallback","completeDwelling","updateDwelling","clearTimer","wrapS","startDwelling","elasped","cancelDwelling","Tile","widthSegments","heightSegments","forceDirection","forceAxis","forceAngle","bendModifier","entity","animationFadeOut","animationFadeIn","animationTranslation","tweens","bend","originalGeometry","setEntity","unbend","toState","ripple","TileGroup","tileArray","verticalGap","depthGap","v_gap","d_gap","animationEasing","visibleDelta","setTexture","originalPosition","updateVisbility","imageArray","outline","updateAllTexture","scrollUp","tiles","scrollDown","getIndex","getTileCount","sharedFont","sharedTexture","pendingQueue","SpriteText","text","maxWidth","addText","generateTextGeometry","generateSDFShader","setBMFont","font","anisotropy","pop","textAnchor","computeBoundingBox","computeBoundingSphere","layout","textMesh","getLayout","Widget","DEFAULT_TRANSITION","TOUCH_ENABLED","PREVENT_EVENT_HANDLER","barElement","fullscreenElement","settingElement","mainMenu","activeMainItem","activeSubMenu","mask","addControlBar","bar","styleTranslate","styleOpacity","gradientStyle","float","webkitTransform","msTransform","background","transition","pointerEvents","isHidden","toggle","menu","createDefaultMenu","createMainMenu","createMask","removeChild","deactivate","handler","title","subMenu","addControlButton","createFullscreenButton","createSettingButton","createVideoControl","display","onTap","activated","activate","item","createCustomItem","backgroundImage","webkitTransition","_width","changeSize","unslideAll","tapSkipped","isFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","onFullScreenChange","stylesheetId","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","querySelector","sheet","innerHTML","controlButton","createVideoControlButton","seekBar","createVideoControlSeekbar","isDragging","mouseX","changedTouches","percentageNow","parseInt","progressElement","addControlListeners","onVideoControlDrag","percentageNext","onVideoControlStop","removeControlListeners","progressElementControl","getBoundingClientRect","offsetX","onDispose","backgroundColor","borderRadius","marginTop","createMenuItem","textContent","textDecoration","cursor","slide","unslide","setIcon","icon","setSelectionTitle","selection","addSelection","fontSize","fontWeight","addIcon","flip","backgroundSize","addSubMenu","items","createSubMenu","createMenuItemHeader","header","borderBottom","paddingBottom","menus","onNextTick","slideAll","parentElement","createMenu","addItem","paddingLeft","setActiveItem","activeItem","addHeader","fontFamily","visibility","boxShadow","overflow","willChange","backgroundRepeat","backgroundPosition","webkitUserSelect","MozUserSelect","userSelect","filter","webkitFilter","mergeStyleOptions","animated","postLoad","naturalWidth","naturalHeight","startScale","scaleUpAnimation","scaleFactor","scaleDownAnimation","isHovering","cursorStyle","mode","HANDLER_FOCUS","showAnimation","hideAnimation","onHover","onHoverStart","onHoverEnd","onDualEyeEffect","onDismiss","setFocusMethod","getContainer","lockHoverElement","unlockHoverElement","mouseEvent","_height","locked","halfWidth","halfHeight","cloneNode","translateElement","verticalDelta","setElementStyle","setText","setCursorHoverStyle","addHoverText","maxHeight","textShadow","addHoverElement","el","removeHoverElement","focus","Viewer","controlBar","controlButtons","autoHideControlBar","autoHideInfospot","horizontalView","clickTolerance","cameraFov","reverseDragging","enableReticle","autoReticleSelect","viewIndicator","indicatorSize","output","innerHeight","antialias","viewIndicatorSize","reticle","tempEnableReticle","OrbitControls","DeviceOrientationControls","CardboardEffect","StereoEffect","controls","effect","panorama","widget","hoverObject","infospot","pressEntityObject","pressObject","raycaster","raycasterPoint","updateCallbacks","requestAnimationId","cameraFrustum","cameraViewProjectionMatrix","outputDivElement","HANDLER_MOUSE_DOWN","HANDLER_MOUSE_UP","HANDLER_MOUSE_MOVE","HANDLER_WINDOW_RESIZE","HANDLER_KEY_DOWN","HANDLER_KEY_UP","HANDLER_TAP","OUTPUT_INFOSPOT","tweenLeftAnimation","tweenUpAnimation","setPixelRatio","devicePixelRatio","setClearColor","sortObjects","passiveRendering","control","addReticle","addDefaultControlBar","addViewIndicator","reverseDraggingDirection","enableReticleControl","registerMouseAndTouchEvents","addOutputElement","registerEventListeners","animate","eventHandler","addPanoramaEventListener","setPanorama","buttonName","leavingPanorama","hideInfospot","afterEnterComplete","dispatchEventToChildren","activateWidgetItem","controlIndex","ControlMenuItem","ModeMenuItem","enableEffect","disableEffect","disableReticleControl","unregisterMouseAndTouchEvents","registerReticleEvent","updateReticleEvent","unregisterReticleEvent","toggleVideoPlay","onVideoUpdate","addUpdateCallback","removeUpdateCallback","showVideoWidget","hideVideoWidget","updateVideoPlayButton","setCameraControl","getControl","getScene","getCamera","getRenderer","getControlName","getNextControlName","getNextControlIndex","nextIndex","setCameraFov","enableControl","disableControl","toggleNextControl","getScreenVector","worldVector","widthHalf","heightHalf","project","checkSpriteInViewport","sprite","matrixWorldInverse","matrixWorld","multiplyMatrices","projectionMatrix","setFromMatrix","intersectsSprite","tweenControlCenter","ha","va","chv","cvv","hv","vv","vptc","ov","nv","getWorldDirection","getWorldPosition","angleTo","tweenControlCenterByObject","isUnderScalePlaceHolder","traverseAncestors","ancestor","invertXVector","windowWidth","windowHeight","expand","contains","documentElement","outputInfospotPosition","point","panoramaWorldPosition","outputPosition","intersectObject","toFixed","info","onTarget","toggleControlBar","intersect_entity","intersect","offsetLeft","offsetTop","setFromCamera","intersectObjects","getConvertedIntersect","passThrough","key","onChange","centerX","centerY","unregisterEventListeners","destory","onPanoramaDispose","loadAsyncRequest","loadViewIndicator","asyncEvent","viewIndicatorDiv","responseXML","indicator","setIndicatorD","currentPanoAngle","fovAngle","leftAngle","rightAngle","leftX","leftY","rightX","rightY","indicatorD","indicatorOnMouseEnter","indicatorOnMouseLeave","appendControlItem","option","group","Error","1","TextGeometry","opt","Base","_opt","assign","createLayout","inherits","createIndices","buffer","utils","TypeError","flipY","texWidth","common","scaleW","texHeight","scaleH","glyphs","glyph","bitmap","visibleGlyphs","indices","clockwise","attr","multipage","pages","boundingSphere","itemSize","computeSphere","isNaN","boundingBox","bbox","makeEmpty","computeBox","./lib/utils","./lib/vertices","layout-bmfont-text","object-assign","quad-indices","three-buffer-vertex-data","2","bounds","box","minX","minY","maxX","maxY","3","page","bw","bh","u0","u1","xoffset","yoffset","4","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor","5","TextLayout","_measure","computeMetrics","addGetter","wrapper","Function","getGlyphById","chars","glyphIdx","findChar","getXHeight","X_HEIGHTS","charCodeAt","idx","getMGlyph","M_WIDTHS","getCapHeight","CAP_HEIGHTS","getKerning","kernings","table","kern","first","second","getAlignType","align","ALIGN_CENTER","ALIGN_RIGHT","ALIGN_LEFT","wordWrap","xtend","number","TAB_ID","SPACE_ID","measure","tabSize","_setupSpaceGlyphs","lines","minWidth","maxLineWidth","reduce","prev","line","lineHeight","baseline","base","descender","letterSpacing","_descender","_baseline","_xHeight","_capHeight","_lineHeight","_ascender","lineIndex","lastGlyph","lineWidth","getGlyph","tx","xadvance","_linesTotal","_fallbackSpaceGlyph","_fallbackTabGlyph","space","tabWidth","curPen","curWidth","nextPen","nextWidth","as-number","indexof-property","word-wrapper","6","num","def","7","8","idxOf","chr","isWhitespace","whitespace","pre","lineStart","isNewline","newline","lineEnd","measured","greedy","testWidth","Number","MAX_VALUE","newLine","newlineChar","nextStart","monospace","substring","9","extend","Object","10","Buffer","isArrayBuffer","arr","toString","getBinaryOpts","xml2","req","overrideMimeType","xhr","noop","parseASCII","parseXML","readBinary","isBinaryFormat","cb","uri","binary","err","res","statusCode","isBuffer","encoding","trim","headers","./lib/is-binary","parse-bmfont-ascii","parse-bmfont-binary","parse-bmfont-xml","11","equal","HEADER","buf","slice","buffer-equal","12","equals","13","splitLine","replace","split","str","match","dt","parseData","out","parseIntList","val","lineData","file","14","readBlock","blockID","readUInt8","blockSize","readInt32LE","readInfo","readCommon","readPages","readChars","readKernings","readInt16LE","bitField","smooth","unicode","italic","bold","fixedHeight","charset","stretchH","readUInt16LE","aa","readInt8","spacing","readStringNT","packed","alphaChnl","redChnl","greenChnl","blueChnl","readNameNT","len","char","off","readUInt32LE","chnl","pos","every","byte","15","getAttribs","getAttribList","dict","attrib","mapName","nodeName","nodeValue","attribs","NAME_MAP","toLowerCase","parseAttributes","parseFromString","scaleh","scalew","stretchh","lineheight","alphachnl","redchnl","greenchnl","bluechnl","xmlRoot","pageRoot","getAttribute","childTag","./parse-attribs","xml-parse-from-string","16","obj","17","DOMParser","ActiveXObject","xmlDoc","async","loadXML","div","18","isEmpty","initParams","params","isFunction","createXHR","_createXHR","readystatechange","loadFunc","getBody","responseText","isJson","errorFunc","evt","clearTimeout","timeoutTimer","failureResponse","aborted","useXDR","rawRequest","getAllResponseHeaders","parseHeaders","once","cors","XDomainRequest","sync","json","onerror","ontimeout","username","password","withCredentials","timeout","abort","setRequestHeader","beforeSend","iterator","toUpperCase","global/window","is-function","parse-headers","19","20","string","alert","confirm","prompt","21","called","apply","proto","defineProperty","22","list","context","forEachArray","forEachString","forEachObject","24","isArray","arg","row","for-each","25","dup","26","toObject","propIsEnumerable","propertyIsEnumerable","from","symbols","27","dtype","anArray","CW","CCW","dir","numIndices","j","an-array","is-buffer","28","BYTES_PER_ELEMENT","29","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Float64Array","Uint8ClampedArray","30","_isBuffer","31","setIndex","isR69","newAttrib","updateAttribute","addAttribute","rebuildAttribute","flatten","attribLength","flatten-vertex-data","32","flattenVertexData","dim","dstLength","Ctor","33","34","alphaTest","precision","35","loadFont","tex","load-bmfont","36","createText","SDFShader","loadBMFont","fontObject","../","../shaders/sdf","./load","37","kMaxLength","TYPED_ARRAY_SUPPORT","fromNumber","fromString","fromObject","that","allocate","checked","byteLength","write","fromBuffer","fromArray","ArrayBuffer","fromTypedArray","fromArrayBuffer","fromArrayLike","fromJsonObject","__proto__","poolSize","rootParent","RangeError","SlowBuffer","subject","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","binarySlice","base64Slice","utf16leSlice","hexWrite","remaining","strLen","parsed","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","binaryWrite","base64Write","ucs2Write","utf16leToBytes","base64","fromByteArray","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","String","fromCharCode","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","stringtrim","INVALID_BASE64_RE","units","leadSurrogate","byteArray","hi","lo","toByteArray","dst","INSPECT_MAX_BYTES","foo","subarray","compare","isEncoding","inspect","byteOffset","arrayIndexOf","foundIndex","swap","toJSON","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt16BE","readUInt32BE","readIntLE","readIntBE","readInt16BE","readInt32BE","readFloatLE","read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","fill","base64-js","isarray","decode","elt","PLUS","PLUS_URL_SAFE","SLASH","SLASH_URL_SAFE","NUMBER","UPPER","LOWER","b64ToByteArray","b64","L","placeHolders","Arr","uint8ToBase64","uint8","encode","lookup","temp","extraBytes","base64js","39","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","40","62","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__pages__","use","routes","path","component","redirect","63","64","__WEBPACK_IMPORTED_MODULE_1__App_vue__","__WEBPACK_IMPORTED_MODULE_1__App_vue___default","__WEBPACK_IMPORTED_MODULE_2__router__","router","65","__WEBPACK_IMPORTED_MODULE_0__demo_pano__","__WEBPACK_IMPORTED_MODULE_0__demo_pano___default","__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__","__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default","__WEBPACK_IMPORTED_MODULE_2__demo_video_pano__","__WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default","__WEBPACK_IMPORTED_MODULE_3__demo_tour__","__WEBPACK_IMPORTED_MODULE_3__demo_tour___default","66","67","__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__","__WEBPACK_IMPORTED_MODULE_1_highlight_js__","__WEBPACK_IMPORTED_MODULE_1_highlight_js___default","codeHandler","props","default","mounted","highlightBlock","$refs","filters","components","68","__WEBPACK_IMPORTED_MODULE_0__components_demo_block__","__WEBPACK_IMPORTED_MODULE_0__components_demo_block___default","__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__","__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default","loading","methods","Pano","DemoBlock","69","70","__WEBPACK_IMPORTED_MODULE_1__src_Tour_vue__","__WEBPACK_IMPORTED_MODULE_1__src_Tour_vue___default","rx","rz","ry","connections","Tour","initialScene","71","72","__WEBPACK_IMPORTED_MODULE_0__lib_panolens__","viewer","created","onResize","$el","offsetWidth","offsetHeight","watch","_this","$nextTick","$emit","73","addHotspot","targetScene","__WEBPACK_IMPORTED_MODULE_1_three__","emissive","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","geometryBorder","materialBorder","circle","hotspot","merged","updateMatrix","merge","toRadian","addArrow","arrowGeometry","makeArrowGeometry","arrowMaterial","arrow","x1","z1","x2","z2","ath","toDegree","arrowPos","sphereToWorld","DEG2RAD","moveTo","lineTo","atv","mY","mX","mZ","sceneIndex","scene_index","hotspots","arrowGroup","loadScene","getSceneIndexByKey","_this2","near","translateZ","INTERSECTED","timeStamp","rate","mouse","intersectedObject","setHex","currentHex","getHex","translateX","translateY"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAASC,GCHjCD,EAAAD,EAAAC,QAAAC,EAAA,QAKAD,EAAAE,MAAAH,EAAAI,EAAA,uCAA8D,MDYxDC,IACA,SAAUL,EAAQC,EAASC,GElBjCD,EAAAD,EAAAC,QAAAC,EAAA,QAKAD,EAAAE,MAAAH,EAAAI,EAAA,y+BAAkgC,MF2B5/BE,IACA,SAAUN,EAAQC,EAASC,GGjCjCD,EAAAD,EAAAC,QAAAC,EAAA,QAKAD,EAAAE,MAAAH,EAAAI,EAAA,uvDAAgxD,MH0C1wDG,IACA,SAAUP,EAAQC,KAMlBO,GACA,SAAUR,EAAQC,EAASC,GIrDjCA,EAAA,IAEA,IAAAO,GAAAP,EAAA,GAEAA,EAAA,IAEAA,EAAA,KAEA,KAEA,KAGAF,GAAAC,QAAAQ,EAAAR,SJ8DMS,IACA,SAAUV,EAAQC,EAASC,GK9EjC,GAAAO,GAAAP,EAAA,GAEAA,EAAA,IAEAA,EAAA,KAEA,KAEA,KAGAF,GAAAC,QAAAQ,EAAAR,SLqFMU,IACA,SAAUX,EAAQC,EAASC,GMjGjC,GAAAO,GAAAP,EAAA,GAEAA,EAAA,IAEAA,EAAA,KAEA,KAEA,KAGAF,GAAAC,QAAAQ,EAAAR,SNwGMW,IACA,SAAUZ,EAAQC,EAASC,GOpHjC,GAAAO,GAAAP,EAAA,GAEAA,EAAA,IAEAA,EAAA,KAEA,KAEA,KAGAF,GAAAC,QAAAQ,EAAAR,SP2HMY,IACA,SAAUb,EAAQC,EAASC,GQvIjC,GAAAO,GAAAP,EAAA,GAEAA,EAAA,IAEAA,EAAA,KAEA,KAEA,KAGAF,GAAAC,QAAAQ,EAAAR,SR8IMa,IACA,SAAUd,EAAQC,EAASC,GSxJjCA,EAAA,IAEA,IAAAO,GAAAP,EAAA,GAEAA,EAAA,IAEAA,EAAA,KAEA,kBAEA,KAGAF,GAAAC,QAAAQ,EAAAR,STiKMc,IACA,SAAUf,EAAQC,GUjLxBD,EAAAC,SAAgBe,OAAA,WAAmB,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,cAChD,QAD0EH,EAAAI,MAAAC,IAAAH,GAC1E,OACAI,aACAC,MAAA,OACAC,OAAA,OACAC,OAAA,IACAC,OAAA,IACAC,QAAA,QAGCC,qBVuLKC,IACA,SAAU9B,EAAQC,GWlMxBD,EAAAC,SAAgBe,OAAA,WAAmB,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,eAA0BE,EAAAL,EAAAI,MAAAC,IAAAH,CAC1E,OAAAG,GAAA,OACAS,YAAA,eACGT,EAAA,OACHS,YAAA,uBACGd,EAAAe,GAAA,eAAAf,EAAAgB,GAAA,KAAAX,EAAA,OACHS,YAAA,oBACGT,EAAA,OACHS,YAAA,wBACGT,EAAA,MAAAL,EAAAgB,GAAA,6BAAAhB,EAAAgB,GAAA,KAAAX,EAAA,OACHS,YAAA,gCACGT,EAAA,OAAAL,EAAAgB,GAAA,iBAAAX,EAAA,QACHY,IAAA,UACAH,YAAA,SACGd,EAAAgB,GAAAhB,EAAAkB,GAAAlB,EAAAmB,GAAA,QAAAnB,EAAAoB,aAAApB,EAAAgB,GAAA,oBAAAhB,EAAAgB,GAAA,KAAAX,EAAA,OACHS,YAAA,wBACGT,EAAA,MAAAL,EAAAgB,GAAA,eAAAhB,EAAAgB,GAAA,KAAAX,EAAA,OACHS,YAAA,gCACGT,EAAA,OAAAL,EAAAgB,GAAA,cAAAX,EAAA,QACHY,IAAA,WACAH,YAAA,SACGd,EAAAgB,GAAAhB,EAAAkB,GAAAlB,EAAAmB,GAAA,QAAAnB,EAAAqB,WAAA,kBAAArB,EAAAgB,GAAA,yBACFJ,qBXwMKU,IACA,SAAUvC,EAAQC,GY/NxBD,EAAAC,SAAgBe,OAAA,WAAmB,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,eAA0BE,EAAAL,EAAAI,MAAAC,IAAAH,CAC1E,OAAAG,GAAA,OACAS,YAAA,UACGT,EAAA,OACHS,YAAA,kBACGT,EAAA,MACHS,YAAA,eACGT,EAAA,MACHS,YAAA,qBACGd,EAAAgB,GAAA,WAAAhB,EAAAgB,GAAA,KAAAX,EAAA,MACHS,YAAA,oBACGT,EAAA,eACHkB,OACAC,GAAA,eAEGxB,EAAAgB,GAAA,wBAAAhB,EAAAgB,GAAA,KAAAX,EAAA,MACHS,YAAA,oBACGT,EAAA,eACHkB,OACAC,GAAA,oBAEGxB,EAAAgB,GAAA,oBAAAhB,EAAAgB,GAAA,KAAAX,EAAA,MACHS,YAAA,oBACGT,EAAA,eACHkB,OACAC,GAAA,qBAEGxB,EAAAgB,GAAA,oBAAAhB,EAAAgB,GAAA,KAAAX,EAAA,MACHS,YAAA,oBACGT,EAAA,eACHkB,OACAC,GAAA,eAEGxB,EAAAgB,GAAA,mBAAAhB,EAAAgB,GAAA,KAAAX,EAAA,OACHS,YAAA,gBACGT,EAAA,wBACFO,qBZqOKa,IACA,SAAU1C,EAAQC,Ga1QxBD,EAAAC,SAAgBe,OAAA,WAAmB,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,eAA0BE,EAAAL,EAAAI,MAAAC,IAAAH,CAC1E,OAAAG,GAAA,cACAkB,OACAG,WAAA1B,EAAA2B,KACAC,YAAA5B,EAAAqB,YAEGhB,EAAA,YACHwB,KAAA,YACGxB,EAAA,QACHkB,OACAO,KAAA,OACAC,OAAA,4BAEAC,IACAC,UAAAjC,EAAAkC,UAEGlC,EAAAgB,GAAA,KAAAX,EAAA,OACH8B,aACAC,KAAA,OACAC,QAAA,SACAC,MAAAtC,EAAA,QACAuC,WAAA,YAEAzB,YAAA,kBACG,QACFF,qBbgRK4B,IACA,SAAUzD,EAAQC,Gc1SxBD,EAAAC,SAAgBe,OAAA,WAAmB,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,eAA0BE,EAAAL,EAAAI,MAAAC,IAAAH,CAC1E,OAAAG,GAAA,cACAkB,OACAG,WAAA1B,EAAA2B,KACAC,YAAA5B,EAAAqB,YAEGhB,EAAA,YACHwB,KAAA,YACGxB,EAAA,QACHkB,OACAQ,OAAA,8BAEAC,IACAC,UAAAjC,EAAAkC,UAEGlC,EAAAgB,GAAA,KAAAX,EAAA,OACH8B,aACAC,KAAA,OACAC,QAAA,SACAC,MAAAtC,EAAA,QACAuC,WAAA,YAEAzB,YAAA,kBACG,QACFF,qBdgTK6B,IACA,SAAU1D,EAAQC,GezUxBD,EAAAC,SAAgBe,OAAA,WAAmB,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,eAA0BE,EAAAL,EAAAI,MAAAC,IAAAH,CAC1E,OAAAG,GAAA,cACAkB,OACAG,WAAA1B,EAAA2B,KACAC,YAAA5B,EAAAqB,YAEGhB,EAAA,YACHwB,KAAA,YACGxB,EAAA,QACHkB,OACAO,KAAA,QACAC,OAAA,2BAEAC,IACAC,UAAAjC,EAAAkC,UAEGlC,EAAAgB,GAAA,KAAAX,EAAA,OACH8B,aACAC,KAAA,OACAC,QAAA,SACAC,MAAAtC,EAAA,QACAuC,WAAA,YAEAzB,YAAA,kBACG,QACFF,qBf+UK8B,IACA,SAAU3D,EAAQC,GgBzWxBD,EAAAC,SAAgBe,OAAA,WAAmB,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,cAChD,QAD0EH,EAAAI,MAAAC,IAAAH,GAC1E,OACAI,aACAC,MAAA,OACAC,OAAA,OACAC,OAAA,IACAC,OAAA,IACAC,QAAA,QAGCC,qBhB+WK+B,IACA,SAAU5D,EAAQC,GiB1XxBD,EAAAC,SAAgBe,OAAA,WAAmB,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,eAA0BE,EAAAL,EAAAI,MAAAC,IAAAH,CAC1E,OAAAG,GAAA,cACAkB,OACAG,WAAA1B,EAAA2B,KACAC,YAAA5B,EAAAqB,YAEGhB,EAAA,YACHwB,KAAA,YACGxB,EAAA,QACHkB,OACAqB,OAAA5C,EAAA4C,QAEAZ,IACAa,gBAAA7C,EAAA8C,YACAb,UAAAjC,EAAAkC,UAEGlC,EAAAgB,GAAA,KAAAX,EAAA,OACH8B,aACAC,KAAA,OACAC,QAAA,SACAC,MAAAtC,EAAA,QACAuC,WAAA,YAEAzB,YAAA,kBACG,QACFF,qBjBgYKmC,IACA,SAAUhE,EAAQC,EAASC,GkBvZjC,GAAA+D,GAAA/D,EAAA,IACA,iBAAA+D,SAAAjE,EAAAI,EAAA6D,EAAA,MACAA,EAAAC,SAAAlE,EAAAC,QAAAgE,EAAAC,OAEAhE,GAAA,eAAA+D,GAAA,IlBgaME,IACA,SAAUnE,EAAQC,EAASC,GmBrajC,GAAA+D,GAAA/D,EAAA,IACA,iBAAA+D,SAAAjE,EAAAI,EAAA6D,EAAA,MACAA,EAAAC,SAAAlE,EAAAC,QAAAgE,EAAAC,OAEAhE,GAAA,eAAA+D,GAAA,InB8aMG,IACA,SAAUpE,EAAQC,EAASC,GoBnbjC,GAAA+D,GAAA/D,EAAA,IACA,iBAAA+D,SAAAjE,EAAAI,EAAA6D,EAAA,MACAA,EAAAC,SAAAlE,EAAAC,QAAAgE,EAAAC,OAEAhE,GAAA,eAAA+D,GAAA,IpB4bMI,GACA,SAAUrE,EAAQC,EAASC,GqBpcjC,GAAAO,GAAAP,EAAA,GAEAA,EAAA,IAEAA,EAAA,KAEA,KAEA,KAGAF,GAAAC,QAAAQ,EAAAR,SrB2cMqE,GACA,SAAUtE,EAAQuE,EAAqBrE,GAE7C,cAC4B,SAASsE,EAASxE,EAAQyE,GAA8B,GAiBhFC,GAAYA,EAjBwEC,EAAsFzE,EAAoB,IACzK0E,EAA8F1E,EAAoB2E,EAAEF,GACpHG,EAAoE5E,EAAoB,IACxF6E,EAA4E7E,EAAoB2E,EAAEC,GAClGE,EAAoE9E,EAAoB,IACxF+E,EAA4E/E,EAAoB2E,EAAEG,GAClGE,EAAqEhF,EAAoB,IACzFiF,EAA6EjF,EAAoB2E,EAAEK,GACnGE,EAAoElF,EAAoB,IACxFmF,EAA4EnF,EAAoB2E,EAAEO,GAClGE,EAA6DpF,EAAoB,IACjFqF,EAAqErF,EAAoB2E,EAAES,GAC3FE,EAA8DtF,EAAoB,IAClFuF,EAAsEvF,EAAoB2E,EAAEW,GAC5FE,EAA6ExF,EAAoB,IACjGyF,EAAqFzF,EAAoB2E,EAAEa,GAC3GE,EAAsC1F,EAAoB,IsBle/E2F,GAAaC,SAAU,KAEvBC,EAAqB,WAEvB,QAASC,GAAGA,EAAG5F,EAAGyE,EAAGoB,GAAK,QAASC,GAAGrB,GAAKsB,EAAI/F,EAAE8F,EAAGD,GAAID,EAAEnB,GAAKuB,GAAKvB,IAAKuB,EAAIvB,EAAI,GAAIsB,GAAGC,CAAG,QAAQC,MAAO,WAAcF,GAAKD,EAAE,IAAMI,KAAM,WAAczB,EAAEsB,GAAIA,EAAI,KAAMC,EAAI,IAAO,QAAShG,GAAGA,GAAK,MAAO4F,GAAE5F,EAAGmG,sBAAuBC,sBAAwB,QAAS3B,GAAGmB,EAAG5F,EAAGyE,GAAK,QAASoB,GAAGA,GAAKpB,IAAMA,EAAEmB,EAAG5F,IAAM6F,EAAEQ,2BAA6B,MAAOT,GAAEU,iBAAiBtG,EAAG6F,GAAIA,EAAI,QAASA,GAAGD,EAAG5F,EAAGyE,EAAGoB,GAAK,QAASC,KAAO,MAAOrB,GAAEzE,GAAK,QAAS+F,GAAGH,GAAKnB,EAAEzE,GAAK4F,EAAGC,GAAKE,EAAEH,EAAE5F,IAAKuF,IAAsBK,EAAG5F,GAAIuG,IAAKT,EAAGU,IAAKT,IAAM,QAASD,GAAGF,EAAG5F,EAAGyE,GAAKA,EAAE6B,iBAAiBtG,EAAG,WAAc,MAAO4F,GAAEa,cAAc,GAAIC,OAAM1G,MAAS,QAAS+F,GAAGH,EAAG5F,GAAKqF,EAAAW,EAAQW,UAAUC,KAAK,WAAchB,EAAEa,cAAc,GAAIC,OAAM1G,MAAS,QAASgG,GAAGJ,GAAK,GAAI5F,GAAI,GAAI6G,MAAS,OAAOf,GAAEF,EAAG,OAAQ5F,GAAI8F,EAAEF,EAAG,UAAW5F,GAAI8F,EAAEF,EAAG,QAAS5F,GAAIA,EAAE8G,YAAclB,EAAEkB,YAAa9G,EAAE+G,IAAMnB,EAAEmB,KAAOnB,EAAEoB,YAAc,QAAShH,EAAI,QAASiH,GAAGrB,EAAG5F,EAAGyE,IAAMyC,GAAK,GAAK,IAAMC,KAAKC,QAAUxB,EAAEyB,IAAK,EAAIH,EAAIC,KAAKC,OAAQ3C,IAAMmB,EAAE0B,YAActH,GAAIuH,IAAIC,EAAI,GAAK,IAAMxH,EAAI,EAAI,QAASyH,GAAG7B,GAAK,MAAOA,GAAE8B,OAAOJ,aAAe1B,EAAE+B,MAAMC,SAAW,QAASC,GAAGjC,GAAK,GAAI5F,GAAIc,IAAMd,GAAE2H,MAAMG,YAAc9H,EAAE2H,MAAMI,kBAAoB/H,EAAEgI,WAAahI,EAAE0H,OAAOJ,YAActH,EAAE2H,MAAML,YAAc1B,EAAI5F,EAAE2H,MAAMM,aAAe,IAAKjI,EAAE2H,MAAMO,MAAQT,EAAEzH,KAAOA,EAAE0H,OAAOJ,YAAc,IAAKL,EAAEjH,EAAE2H,MAAO3H,EAAE0H,OAAOJ,cAAgBtH,EAAE2H,MAAMQ,eAAiBnI,EAAE2H,MAAMS,cAA4C,IAA5BpI,EAAE2H,MAAMU,SAASC,QAAgBtI,EAAE2H,MAAMY,OAAQvI,EAAE2H,MAAMa,cAAiBxI,GAAE2H,MAAMN,GAAIrH,EAAE2H,MAAMc,OAAM,IAAO,QAASC,KAAO,GAAI9C,GAAI9E,KAAMd,EAAI4F,EAAE+C,EAAI,IAAI/C,EAAEgD,2BAA4B,WAAYhD,GAAEiD,IAAuB,WAAjB7I,EAAE0H,OAAOX,KAAmB/G,EAAE0H,OAAOX,MAAQnB,EAAEmB,MAAQE,EAAErB,EAAG,GAAG,GAAK5F,EAAE0H,OAAOX,IAAMnB,EAAEmB,KAAMnB,EAAEkD,SAAW9I,EAAE8I,QAAS,EAA0B,IAAtBlD,EAAEyC,SAASC,QAAgB1C,EAAE2C,OAAQvI,EAAE0H,OAAOqB,OAAQ/I,EAAEgJ,QAAQ/C,QAASjG,EAAEgI,WAAajC,EAAEH,EAAG,QAAS5F,EAAE2H,MAAMG,YAAc9H,EAAE2H,MAAMsB,kBAAoBlD,EAAEH,EAAG,aAAe,QAASsD,GAAGtD,GAAK,GAAI5F,GAAIc,KAAM2D,EAAIzE,EAAE2I,EAAIlE,GAAEiD,OAAOe,QAAShE,EAAEuE,QAAQ9C,OAAQlG,EAAE4I,4BAA8B5I,EAAEmJ,KAAM1E,EAAEqE,SAAWlD,IAAMnB,EAAEqE,QAAS,EAAIrE,EAAEuD,UAAYjC,EAAE/F,EAAG,SAAUA,EAAEwI,QAAUxI,EAAE4I,6BAA+B5I,EAAEqH,IAAK,EAAItB,EAAE/F,EAAG,WAAa,QAASoJ,GAAGxD,EAAGnB,GAAK,GAAIoB,KAAQD,GAAE+C,GAAK9C,EAAGA,EAAEiD,QAAS,EAAIjD,EAAEmC,SAAWvD,EAAGoB,EAAE8B,MAAQ/B,EAAGC,EAAEmD,QAAUhJ,EAAE6H,EAAEwB,KAAKxD,IAAKpB,EAAIoB,EAAE6B,OAAS1B,EAAEJ,IAAMA,EAAEU,iBAAiB,UAAW,WAAcV,EAAEkD,QAAU/C,EAAEH,EAAG,aAAeC,EAAE6B,QAAUX,IAAKnB,EAAEmB,KAAOnB,EAAEoB,YAAc,QAASsC,OAAO,EAAIR,QAAQ,EAAIL,MAAO,WAAc5C,EAAE6B,OAAOoB,QAAS,GAAMC,KAAM,WAAclD,EAAE6B,OAAOoB,QAAS,EAAIrB,EAAE5B,IAAMoB,EAAErB,EAAG,IAAM4C,YAAe,MAAOf,GAAE5B,MAAQD,EAAEU,iBAAiB,UAAW,WAAc,GAAItG,IAAK6F,EAAE6B,OAAOX,KAAwB,UAAjBlB,EAAE6B,OAAOX,GAAiBlB,GAAE6B,OAAOX,KAAOlB,EAAE6B,OAAOX,MAAQnB,EAAEmB,MAAQE,EAAErB,EAAG,GAAG,GAAKC,EAAE6B,OAAOX,IAAMnB,EAAEmB,IAAK/G,IAAMyE,GAAKmB,EAAE2D,SAAW1D,EAAE6B,OAAOqB,OAASlD,EAAEmD,QAAQ9C,UAAW,GAAKN,EAAEU,iBAAiB,wBAAyB,WAAcV,EAAEkD,OAASrE,GAAkC,IAA7BoB,EAAE6B,OAAOW,SAASC,QAAgBzC,EAAE6B,OAAOa,QAAU3C,EAAE6C,QAAS7C,EAAEiD,QAAUpE,IAAMmB,EAAEU,iBAAiB,sBAAuB,WAAcT,EAAE6B,OAAOJ,YAAc1B,EAAE0B,cAAgB1B,EAAEU,iBAAiB,UAAW,WAAciB,EAAEiC,QAAQ,IAAM5D,EAAE0B,YAAc,GAAK,IAAMzB,EAAE6B,OAAOJ,YAAc1B,EAAE0B,gBAAmB,QAASmC,GAAG7D,GAAK,GAAI5F,GAAI4F,EAAEyB,EAAI,cAAczB,GAAEyB,IAAKzB,EAAEgD,6BAA+B5I,EAAI,QAAS0J,GAAG9D,GAAK,GAAI5F,GAAI4F,EAAE+C,EAAI/C,GAAEiD,GAAKjD,EAAEmD,KAAMnD,EAAEuD,GAAKvD,EAAE6C,MAAO7C,EAAEmD,KAAOL,EAAG9C,EAAE6C,MAAQS,EAAGrD,EAAED,EAAG,SAAU5F,EAAE0H,QAAS7B,EAAED,EAAG,QAAS5F,EAAE0H,QAAQ,GAAK7B,EAAED,EAAG,eAAgB5F,EAAE0H,QAAQ,GAAK7B,EAAED,EAAG,QAAS5F,EAAE0H,QAAS7B,EAAED,EAAG,OAAQ5F,EAAE0H,QAAQ,GAAKjD,EAAEmB,EAAG,UAAW,SAAUA,GAAK,OAAQA,EAAEgD,6BAA+BnE,EAAEmB,EAAG,SAAU,SAAUA,GAAK,OAAQA,EAAEgD,6BAA+BnE,EAAEmB,EAAG,aAAc6D,GAAIhF,EAAEmB,EAAG,QAAS6D,GAAK,QAASE,GAAG/D,EAAG5F,GAAK,OAAI,KAAWA,IAAMA,OAAU4F,EAAE+C,GAAI,CAAE,IAAK3I,EAAE4J,WAAY,CAAE,IAAKC,EAAG,MAAQ,MAAM7J,EAAE8J,MAAQ9J,EAAE+J,KAAO,mBAAqB,eAAeC,KAAKC,UAAUC,WAAY,OAAQtE,EAAE6C,OAAS,IAAIhE,GAAImB,EAAE2D,QAAU3D,GAAE2D,UAAW,EAAIH,EAAExD,GAAIA,EAAE0D,OAAQI,EAAE9D,GAAIA,EAAEuE,UAAUC,IAAI,OAAQxE,EAAE0D,OAAS7E,IAAMmB,EAAEmD,OAAQnD,EAAEU,iBAAiB,UAAW,QAAStG,KAAO4F,EAAE2D,UAAW,EAAI3D,EAAEyE,oBAAoB,UAAWrK,MAAQ,mBAAmBgK,KAAKC,UAAUK,WAAaC,QAAQC,KAAK,2EAA8E,GAAItD,GAAG2C,EAAwB,YAApB,mBAAOY,UAAP,YAAAtF,IAAOsF,YAAyB,cAAgBA,UAASC,KAAKC,QAAUC,WAAW,mCAAmCC,QAASlC,EAAI,+BAAgCtB,EAAI,qCAAsCwB,EAAI,0CAA2CM,EAAI,2CAA4C5B,KAAQC,EAAI,CAAG,OAAOmC,MAWn/ImB,EAAQA,GAAU,WACpB,GAAIC,KAEJ,QAEEC,OAAQ,WACN,MAAOD,IAGTE,UAAW,WACTF,MAGFX,IAAK,SAAUc,GACbH,EAAQhL,KAAKmL,IAGfC,OAAQ,SAAUD,GAChB,GAAIlL,GAAI+K,EAAQvB,QAAQ0B,IAEb,IAAPlL,GACF+K,EAAQK,OAAOpL,EAAG,IAItBqL,OAAQ,SAAUC,EAAMC,GACtB,GAAuB,IAAnBR,EAAQzC,OACV,OAAO,CAGT,IAAItI,GAAI,CAIR,KAFAsL,MAAgBE,KAATF,EAAqBA,EAAOR,EAAM1D,MAElCpH,EAAI+K,EAAQzC,QACbyC,EAAQ/K,GAAGqL,OAAOC,IAASC,EAC7BvL,IAEA+K,EAAQK,OAAOpL,EAAG,EAItB,QAAO,MAOW,oBAAZyL,aAAgD,KAAbrH,EAC7C0G,EAAM1D,IAAM,WACV,GAAIkE,GAAOlH,EAAQsH,QAGnB,OAAiB,KAAVJ,EAAK,GAAYA,EAAK,GAAK,KAIT,mBAAZG,aACeD,KAAvBC,OAAOE,iBACcH,KAA3BC,OAAOE,YAAYvE,IAGpB0D,EAAM1D,IAAMqE,OAAOE,YAAYvE,IAAIiC,KAAKoC,OAAOE,iBAG3BH,KAAbrE,KAAKC,IACZ0D,EAAM1D,IAAMD,KAAKC,IAIjB0D,EAAM1D,IAAM,WACV,OAAO,GAAID,OAAOyE,WAItBd,EAAMe,MAAQ,SAAUC,GACtB,GAMIC,GANAC,EAAUF,EACVG,KACAC,KACAC,KACAC,EAAY,IACZC,EAAU,EAEVC,GAAQ,EACRC,GAAa,EACbC,GAAY,EACZC,EAAa,EACbC,EAAa,KACbC,EAAkB7B,EAAM8B,OAAOC,OAAOC,KACtCC,EAAyBjC,EAAMkC,cAAcH,OAC7CI,KACAC,EAAmB,KACnBC,GAAwB,EACxBC,EAAoB,KACpBC,EAAsB,KACtBC,EAAkB,IAEtBxM,MAAKuB,GAAK,SAAUkL,EAAY3F,GAO9B,MANAsE,GAAaqB,MAEI/B,KAAb5D,IACFwE,EAAYxE,GAGP9G,MAGTA,KAAKmF,MAAQ,SAAUqF,GACrBR,EAAMV,IAAItJ,MAEVyL,GAAa,EAEbY,GAAwB,EAExBT,MAAsBlB,KAATF,EAAqBA,EAAOR,EAAM1D,MAC/CsF,GAAcD,CAEd,KAAK,GAAIe,KAAYtB,GAAY,CAE/B,GAAIA,EAAWsB,YAAqBC,OAAO,CACzC,GAAoC,IAAhCvB,EAAWsB,GAAUlF,OACvB,QAIF4D,GAAWsB,IAAaxB,EAAQwB,IAAWE,OAAOxB,EAAWsB,QAKrChC,KAAtBQ,EAAQwB,KAKZvB,EAAauB,GAAYxB,EAAQwB,GAE5BvB,EAAauB,YAAqBC,SAAW,IAChDxB,EAAauB,IAAa,GAG5BrB,EAAmBqB,GAAYvB,EAAauB,IAAa,GAG3D,MAAO1M,OAGTA,KAAKoF,KAAO,WACV,MAAKqG,IAILzB,EAAMK,OAAOrK,MACbyL,GAAa,EAEW,OAApBe,GACFA,EAAgBK,KAAK3B,EAASA,GAGhClL,KAAK8M,oBACE9M,MAXEA,MAcXA,KAAK+M,IAAM,WAET,MADA/M,MAAKuK,OAAOqB,EAAaN,GAClBtL,MAGTA,KAAK8M,kBAAoB,WACvB,IAAK,GAAI5N,GAAI,EAAG8N,EAAmBb,EAAe3E,OAAQtI,EAAI8N,EAAkB9N,IAC9EiN,EAAejN,GAAGkG,QAItBpF,KAAKiN,MAAQ,SAAUC,GAErB,MADAvB,GAAauB,EACNlN,MAGTA,KAAKmN,OAAS,SAAUC,GAEtB,MADA7B,GAAU6B,EACHpN,MAGTA,KAAKqN,YAAc,SAAUH,GAE3B,MADAjC,GAAmBiC,EACZlN,MAGTA,KAAKsN,KAAO,SAAUA,GAEpB,MADA9B,GAAQ8B,EACDtN,MAGTA,KAAKuN,OAAS,SAAUA,GAEtB,MADA1B,GAAkB0B,EACXvN,MAGTA,KAAKwN,cAAgB,SAAUA,GAE7B,MADAvB,GAAyBuB,EAClBxN,MAGTA,KAAKyN,MAAQ,WAEX,MADAtB,GAAiBuB,UACV1N,MAGTA,KAAK2N,QAAU,SAAUC,GAEvB,MADAxB,GAAmBwB,EACZ5N,MAGTA,KAAK6N,SAAW,SAAUD,GAExB,MADAtB,GAAoBsB,EACb5N,MAGTA,KAAK8N,WAAa,SAAUF,GAE1B,MADArB,GAAsBqB,EACf5N,MAGTA,KAAK+N,OAAS,SAAUH,GAEtB,MADApB,GAAkBoB,EACX5N,MAGTA,KAAKuK,OAAS,SAAUC,GACtB,GAAIkC,GACAsB,EACA3L,CAEJ,IAAImI,EAAOoB,EACT,OAAO,GAGqB,IAA1BS,IACuB,OAArBD,GACFA,EAAiBS,KAAK3B,EAASA,GAGjCmB,GAAwB,GAG1B2B,GAAWxD,EAAOoB,GAAcN,EAChC0C,EAAUA,EAAU,EAAI,EAAIA,EAE5B3L,EAAQwJ,EAAgBmC,EAExB,KAAKtB,IAAYtB,GAEf,OAA+BV,KAA3BS,EAAauB,GAAjB,CAIA,GAAIvH,GAAQgG,EAAauB,IAAa,EAClCK,EAAM3B,EAAWsB,EAEjBK,aAAeJ,OACjBzB,EAAQwB,GAAYT,EAAuBc,EAAK1K,IAG3B,gBAAT0K,KAERA,EADoB,MAAlBA,EAAIkB,OAAO,IAAgC,MAAlBlB,EAAIkB,OAAO,GAChC9I,EAAQ+I,WAAWnB,GAEnBmB,WAAWnB,IAKA,gBAATA,KACV7B,EAAQwB,GAAYvH,GAAS4H,EAAM5H,GAAS9C,IASlD,GAJ0B,OAAtBiK,GACFA,EAAkBO,KAAK3B,EAAS7I,GAGlB,IAAZ2L,EAAe,CACjB,GAAIzC,EAAU,EAAG,CACX4C,SAAS5C,IACXA,GAIF,KAAKmB,IAAYrB,GAAoB,CAKnC,GAJsC,gBAA1BD,GAAWsB,KACrBrB,EAAmBqB,GAAYrB,EAAmBqB,GAAYwB,WAAW9C,EAAWsB,KAGlFlB,EAAO,CACT,GAAI4C,GAAM/C,EAAmBqB,EAE7BrB,GAAmBqB,GAAYtB,EAAWsB,GAC1CtB,EAAWsB,GAAY0B,EAGzBjD,EAAauB,GAAYrB,EAAmBqB,GAa9C,MAVIlB,KACFE,GAAaA,GAIbE,MADuBlB,KAArBO,EACWT,EAAOS,EAEPT,EAAOmB,GAGf,EAEqB,OAAxBY,GACFA,EAAoBM,KAAK3B,EAASA,EAGpC,KAAK,GAAIhM,GAAI,EAAG8N,EAAmBb,EAAe3E,OAAQtI,EAAI8N,EAAkB9N,IAG9EiN,EAAejN,GAAGiG,MAAMyG,EAAaN,EAGvC,QAAO,EAIX,OAAO,IAIXtB,EAAM8B,QAEJC,QAEEC,KAAM,SAAUvF,GACd,MAAOA,KAKX4H,WAEEC,GAAI,SAAU7H,GACZ,MAAOA,GAAIA,GAGb8H,IAAK,SAAU9H,GACb,MAAOA,IAAK,EAAIA,IAGlB+H,MAAO,SAAU/H,GACf,OAAKA,GAAK,GAAK,EACN,GAAMA,EAAIA,GAGX,MAASA,GAAKA,EAAI,GAAK,KAKnCgI,OAEEH,GAAI,SAAU7H,GACZ,MAAOA,GAAIA,EAAIA,GAGjB8H,IAAK,SAAU9H,GACb,QAASA,EAAIA,EAAIA,EAAI,GAGvB+H,MAAO,SAAU/H,GACf,OAAKA,GAAK,GAAK,EACN,GAAMA,EAAIA,EAAIA,EAGhB,KAAQA,GAAK,GAAKA,EAAIA,EAAI,KAKrCiI,SAEEJ,GAAI,SAAU7H,GACZ,MAAOA,GAAIA,EAAIA,EAAIA,GAGrB8H,IAAK,SAAU9H,GACb,MAAO,MAAOA,EAAIA,EAAIA,EAAIA,GAG5B+H,MAAO,SAAU/H,GACf,OAAKA,GAAK,GAAK,EACN,GAAMA,EAAIA,EAAIA,EAAIA,GAGnB,KAAQA,GAAK,GAAKA,EAAIA,EAAIA,EAAI,KAK1CkI,SAEEL,GAAI,SAAU7H,GACZ,MAAOA,GAAIA,EAAIA,EAAIA,EAAIA,GAGzB8H,IAAK,SAAU9H,GACb,QAASA,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,GAG/B+H,MAAO,SAAU/H,GACf,OAAKA,GAAK,GAAK,EACN,GAAMA,EAAIA,EAAIA,EAAIA,EAAIA,EAGxB,KAAQA,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,KAK7CmI,YAEEN,GAAI,SAAU7H,GACZ,MAAO,GAAIoI,KAAKC,IAAIrI,EAAIoI,KAAKE,GAAK,IAGpCR,IAAK,SAAU9H,GACb,MAAOoI,MAAKG,IAAIvI,EAAIoI,KAAKE,GAAK,IAGhCP,MAAO,SAAU/H,GACf,MAAO,IAAO,EAAIoI,KAAKC,IAAID,KAAKE,GAAKtI,MAKzCwI,aAEEX,GAAI,SAAU7H,GACZ,MAAa,KAANA,EAAU,EAAIoI,KAAKK,IAAI,KAAMzI,EAAI,IAG1C8H,IAAK,SAAU9H,GACb,MAAa,KAANA,EAAU,EAAI,EAAIoI,KAAKK,IAAI,GAAI,GAAKzI,IAG7C+H,MAAO,SAAU/H,GACf,MAAU,KAANA,EACK,EAGC,IAANA,EACK,GAGJA,GAAK,GAAK,EACN,GAAMoI,KAAKK,IAAI,KAAMzI,EAAI,GAG3B,IAAqC,EAA7BoI,KAAKK,IAAI,GAAI,IAAMzI,EAAI,OAK1C0I,UAEEb,GAAI,SAAU7H,GACZ,MAAO,GAAIoI,KAAKO,KAAK,EAAI3I,EAAIA,IAG/B8H,IAAK,SAAU9H,GACb,MAAOoI,MAAKO,KAAK,KAAO3I,EAAIA,IAG9B+H,MAAO,SAAU/H,GACf,OAAKA,GAAK,GAAK,GACL,IAAOoI,KAAKO,KAAK,EAAI3I,EAAIA,GAAK,GAGjC,IAAOoI,KAAKO,KAAK,GAAK3I,GAAK,GAAKA,GAAK,KAKhD4I,SAEEf,GAAI,SAAU7H,GACZ,MAAU,KAANA,EACK,EAGC,IAANA,EACK,GAGDoI,KAAKK,IAAI,EAAG,IAAMzI,EAAI,IAAMoI,KAAKG,IAAgB,GAAXvI,EAAI,KAAWoI,KAAKE,KAGpER,IAAK,SAAU9H,GACb,MAAU,KAANA,EACK,EAGC,IAANA,EACK,EAGFoI,KAAKK,IAAI,GAAI,GAAKzI,GAAKoI,KAAKG,IAAgB,GAAXvI,EAAI,IAAWoI,KAAKE,IAAM,GAGpEP,MAAO,SAAU/H,GACf,MAAU,KAANA,EACK,EAGC,IAANA,EACK,GAGTA,GAAK,EAEDA,EAAI,GACE,GAAMoI,KAAKK,IAAI,EAAG,IAAMzI,EAAI,IAAMoI,KAAKG,IAAgB,GAAXvI,EAAI,KAAWoI,KAAKE,IAGnE,GAAMF,KAAKK,IAAI,GAAI,IAAMzI,EAAI,IAAMoI,KAAKG,IAAgB,GAAXvI,EAAI,KAAWoI,KAAKE,IAAM,KAKlFO,MAEEhB,GAAI,SAAU7H,GACZ,GAAIM,GAAI,OAER,OAAON,GAAIA,IAAMM,EAAI,GAAKN,EAAIM,IAGhCwH,IAAK,SAAU9H,GACb,GAAIM,GAAI,OAER,SAASN,EAAIA,IAAMM,EAAI,GAAKN,EAAIM,GAAK,GAGvCyH,MAAO,SAAU/H,GACf,GAAIM,GAAI,SAER,QAAKN,GAAK,GAAK,EACCA,EAAIA,IAAMM,EAAI,GAAKN,EAAIM,GAA9B,GAGF,KAAQN,GAAK,GAAKA,IAAMM,EAAI,GAAKN,EAAIM,GAAK,KAKrDwI,QAEEjB,GAAI,SAAU7H,GACZ,MAAO,GAAIuD,EAAM8B,OAAOyD,OAAOhB,IAAI,EAAI9H,IAGzC8H,IAAK,SAAU9H,GACb,MAAIA,GAAK,EAAI,KACJ,OAASA,EAAIA,EACXA,EAAK,EAAI,KACX,QAAUA,GAAM,IAAM,MAASA,EAAI,IACjCA,EAAK,IAAM,KACb,QAAUA,GAAM,KAAO,MAASA,EAAI,MAEpC,QAAUA,GAAM,MAAQ,MAASA,EAAI,SAIhD+H,MAAO,SAAU/H,GACf,MAAIA,GAAI,GACiC,GAAhCuD,EAAM8B,OAAOyD,OAAOjB,GAAO,EAAJ7H,GAGY,GAArCuD,EAAM8B,OAAOyD,OAAOhB,IAAQ,EAAJ9H,EAAQ,GAAW,MAOxDuD,EAAMkC,eAEJH,OAAQ,SAAU3D,EAAG3B,GACnB,GAAIL,GAAIgC,EAAEZ,OAAS,EACfoB,EAAIxC,EAAIK,EACRvH,EAAI2P,KAAKW,MAAM5G,GACf6G,EAAKzF,EAAMkC,cAAcwD,MAAM3D,MAEnC,OAAItF,GAAI,EACCgJ,EAAGrH,EAAE,GAAIA,EAAE,GAAIQ,GAGpBnC,EAAI,EACCgJ,EAAGrH,EAAEhC,GAAIgC,EAAEhC,EAAI,GAAIA,EAAIwC,GAGzB6G,EAAGrH,EAAElJ,GAAIkJ,EAAElJ,EAAI,EAAIkH,EAAIA,EAAIlH,EAAI,GAAI0J,EAAI1J,IAGhDyQ,OAAQ,SAAUvH,EAAG3B,GAMnB,IAAK,GALDsC,GAAI,EACJpF,EAAIyE,EAAEZ,OAAS,EACfoI,EAAKf,KAAKK,IACVW,EAAK7F,EAAMkC,cAAcwD,MAAMI,UAE1B5Q,EAAI,EAAGA,GAAKyE,EAAGzE,IACtB6J,GAAK6G,EAAG,EAAInJ,EAAG9C,EAAIzE,GAAK0Q,EAAGnJ,EAAGvH,GAAKkJ,EAAElJ,GAAK2Q,EAAGlM,EAAGzE,EAGlD,OAAO6J,IAGTgH,WAAY,SAAU3H,EAAG3B,GACvB,GAAIL,GAAIgC,EAAEZ,OAAS,EACfoB,EAAIxC,EAAIK,EACRvH,EAAI2P,KAAKW,MAAM5G,GACf6G,EAAKzF,EAAMkC,cAAcwD,MAAMK,UAEnC,OAAI3H,GAAE,KAAOA,EAAEhC,IACTK,EAAI,IACNvH,EAAI2P,KAAKW,MAAM5G,EAAIxC,GAAK,EAAIK,KAGvBgJ,EAAGrH,GAAGlJ,EAAI,EAAIkH,GAAKA,GAAIgC,EAAElJ,GAAIkJ,GAAGlJ,EAAI,GAAKkH,GAAIgC,GAAGlJ,EAAI,GAAKkH,GAAIwC,EAAI1J,IAEpEuH,EAAI,EACC2B,EAAE,IAAMqH,EAAGrH,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAAKQ,GAAKR,EAAE,IAGhD3B,EAAI,EACC2B,EAAEhC,IAAMqJ,EAAGrH,EAAEhC,GAAIgC,EAAEhC,GAAIgC,EAAEhC,EAAI,GAAIgC,EAAEhC,EAAI,GAAIwC,EAAIxC,GAAKgC,EAAEhC,IAGxDqJ,EAAGrH,EAAElJ,EAAIA,EAAI,EAAI,GAAIkJ,EAAElJ,GAAIkJ,EAAEhC,EAAIlH,EAAI,EAAIkH,EAAIlH,EAAI,GAAIkJ,EAAEhC,EAAIlH,EAAI,EAAIkH,EAAIlH,EAAI,GAAI0J,EAAI1J,IAI9FwQ,OAEE3D,OAAQ,SAAUiE,EAAIC,EAAIjL,GACxB,OAAQiL,EAAKD,GAAMhL,EAAIgL,GAGzBF,UAAW,SAAUnM,EAAGzE,GACtB,GAAIgR,GAAKlG,EAAMkC,cAAcwD,MAAMS,SAEnC,OAAOD,GAAGvM,GAAKuM,EAAGhR,GAAKgR,EAAGvM,EAAIzE,IAGhCiR,UAAY,WACV,GAAIjL,IAAK,EAET,OAAO,UAAUvB,GACf,GAAIoD,GAAI,CAER,IAAI7B,EAAEvB,GACJ,MAAOuB,GAAEvB,EAGX,KAAK,GAAIzE,GAAIyE,EAAGzE,EAAI,EAAGA,IACrB6H,GAAK7H,CAIP,OADAgG,GAAEvB,GAAKoD,EACAA,MAIXgJ,WAAY,SAAUC,EAAIC,EAAIG,EAAIC,EAAIrL,GACpC,GAAIsL,GAAiB,IAAXF,EAAKJ,GACXO,EAAiB,IAAXF,EAAKJ,GACXO,EAAKxL,EAAIA,CAGb,QAAQ,EAAIiL,EAAK,EAAIG,EAAKE,EAAKC,IAFtBvL,EAAIwL,KAE+B,EAAIP,EAAK,EAAIG,EAAK,EAAIE,EAAKC,GAAMC,EAAKF,EAAKtL,EAAIiL,KAQjG,SAAWQ,GACa,kBAAXC,SAAyB1R,EAAA,KAElC0R,UAAW,WACT,MAAO1G,SAEkB,KAAXlL,GAA6C,YAAnB,mBAAOC,SAAP,YAAAsF,IAAOtF,UAEjDD,EAAOC,QAAUiL,MACCU,KAAT+F,IAETA,EAAKzG,MAAQA,IAEdhK,MAkBH0E,EAAA,cAAsB,SAAUsG,EAAQ2F,GAsVtC,QAASC,KACP,MAAO,GAAI/B,KAAKE,GAAK,GAAK,GAAK8B,EAAMC,gBAGvC,QAASC,KACP,MAAOlC,MAAKK,IAAI,IAAM2B,EAAMG,WAG9B,QAASC,GAAaC,GAKpB,GAJAC,GAAa,EAEZC,EAAeC,EAAa,GAEP,IAAlBR,EAAMS,QAAV,CAGA,GAFAJ,EAAMK,iBAEFL,EAAMM,SAAWX,EAAMY,aAAaC,MAAO,CAC7C,IAAuB,IAAnBb,EAAMc,SAAmB,MAE7BC,GAAQC,EAAMC,OAEdC,EAAYrM,IAAIwL,EAAMc,QAASd,EAAMe,aAChC,IAAIf,EAAMM,SAAWX,EAAMY,aAAaS,KAAM,CACnD,IAAqB,IAAjBrB,EAAMsB,OAAiB,MAE3BP,GAAQC,EAAMO,MAEdC,EAAW3M,IAAIwL,EAAMc,QAASd,EAAMe,aAC/B,IAAIf,EAAMM,SAAWX,EAAMY,aAAaa,IAAK,CAClD,IAAoB,IAAhBzB,EAAM0B,MAAgB,MAE1BX,GAAQC,EAAMS,IAEdE,EAAS9M,IAAIwL,EAAMc,QAASd,EAAMe,SAGhCL,IAAUC,EAAMY,OAClB9I,SAASnE,iBAAiB,YAAakN,GAAa,GACpD/I,SAASnE,iBAAiB,UAAWmN,GAAW,GAChD9B,EAAMlL,cAAciN,IAGtB/B,EAAMtG,UAGR,QAASmI,GAAaxB,GACpB,IAAsB,IAAlBL,EAAMS,QAAV,CAEAJ,EAAMK,gBAEN,IAAIsB,GAAUhC,EAAMF,aAAehH,SAAWkH,EAAMF,WAAWmC,KAAOjC,EAAMF,UAE5E,IAAIiB,IAAUC,EAAMC,OAAQ,CAC1B,IAAuB,IAAnBjB,EAAMc,SAAmB,MAE7BoB,GAAUrN,IAAIwL,EAAMc,QAASd,EAAMe,SACnCe,EAAYC,WAAWF,EAAWhB,GAGlClB,EAAMqC,WAAW,EAAIrE,KAAKE,GAAKiE,EAAYG,EAAIN,EAAQO,YAAcvC,EAAMwC,aAG3ExC,EAAMyC,SAAS,EAAIzE,KAAKE,GAAKiE,EAAYnK,EAAIgK,EAAQU,aAAe1C,EAAMwC,aAE1EtB,EAAYyB,KAAKT,GAEbU,IACFrC,EAAeF,EAAMc,QAAUyB,EAAczB,QAC7CX,EAAaH,EAAMe,QAAUwB,EAAcxB,SAG7CwB,EAAgBvC,MACX,IAAIU,IAAUC,EAAMO,MAAO,CAChC,IAAqB,IAAjBvB,EAAMsB,OAAiB,MAE3BuB,GAAShO,IAAIwL,EAAMc,QAASd,EAAMe,SAClC0B,EAAWV,WAAWS,EAAUrB,GAE5BsB,EAAW9K,EAAI,EACjBgI,EAAM+C,UACGD,EAAW9K,EAAI,GACxBgI,EAAMgD,WAGRxB,EAAWmB,KAAKE,OACX,IAAI9B,IAAUC,EAAMS,IAAK,CAC9B,IAAoB,IAAhBzB,EAAM0B,MAAgB,MAE1BuB,GAAOpO,IAAIwL,EAAMc,QAASd,EAAMe,SAChC8B,EAASd,WAAWa,EAAQtB,GAE5B3B,EAAMmD,IAAID,EAASZ,EAAGY,EAASlL,GAE/B2J,EAASgB,KAAKM,GAGZlC,IAAUC,EAAMY,MAAM5B,EAAMtG,UAGlC,QAASoI,KACPxB,GAAa,EAEbsC,MAAgB/I,IAEM,IAAlBmG,EAAMS,UAEV3H,SAASJ,oBAAoB,YAAamJ,GAAa,GACvD/I,SAASJ,oBAAoB,UAAWoJ,GAAW,GACnD9B,EAAMlL,cAAcsO,GACpBrC,EAAQC,EAAMY,MAGhB,QAASyB,GAAchD,GACrB,IAAsB,IAAlBL,EAAMS,UAAsC,IAAjBT,EAAMsB,QAAmBP,IAAUC,EAAMY,KAAxE,CAEAvB,EAAMK,iBACNL,EAAMiD,iBAEN,IAAIC,GAAQ,MAEa1J,KAArBwG,EAAMmD,WACRD,EAAQlD,EAAMmD,eACY3J,KAAjBwG,EAAMoD,SACfF,GAASlD,EAAMoD,QAGbF,EAAQ,GAEVvD,EAAM7F,OAAOuJ,IAAO1D,EAAM7F,OAAOuJ,IAAM1D,EAAM2D,OACzC3D,EAAM7F,OAAOuJ,IAAM,EACnB1D,EAAM2D,OACV3D,EAAM7F,OAAOyJ,0BACJL,EAAQ,IAEjBvD,EAAM7F,OAAOuJ,IAAO1D,EAAM7F,OAAOuJ,IAAM1D,EAAM6D,OACzC7D,EAAM7F,OAAOuJ,IAAM,EACnB1D,EAAM6D,OACV7D,EAAM7F,OAAOyJ,0BAGf5D,EAAMtG,SACNsG,EAAMlL,cAAcgP,GACpB9D,EAAMlL,cAAciN,GACpB/B,EAAMlL,cAAcsO,IAGtB,QAASW,GAAS1D,GAChB,OAAQA,EAAM2D,SACZ,IAAKhE,GAAMiE,KAAKC,GACdC,GAAQ,CACR,MAEF,KAAKnE,GAAMiE,KAAKG,OACdC,GAAY,CACZ,MAEF,KAAKrE,GAAMiE,KAAKK,KACdC,GAAU,CACV,MAEF,KAAKvE,GAAMiE,KAAKO,MACdC,GAAW,GAKjB,QAASC,GAAWrE,GAClB,IAAsB,IAAlBL,EAAMS,UAAsC,IAAjBT,EAAM2E,SAAsC,IAAnB3E,EAAMc,SAA9D,CAEA,OAAQT,EAAM2D,SACZ,IAAKhE,GAAMiE,KAAKC,GACdC,GAAQ,CACR,MAEF,KAAKnE,GAAMiE,KAAKG,OACdC,GAAY,CACZ,MAEF,KAAKrE,GAAMiE,KAAKK,KACdC,GAAU,CACV,MAEF,KAAKvE,GAAMiE,KAAKO,MACdC,GAAW,GAIXN,GAASE,GAAaE,GAAWE,KACnCnE,GAAa,EAET6D,IAAO3D,GAAcR,EAAMwC,YAAcxC,EAAM4E,uBAC/CP,IAAW7D,EAAaR,EAAMwC,YAAcxC,EAAM4E,uBAClDL,IAAShE,GAAgBP,EAAMwC,YAAcxC,EAAM4E,uBACnDH,IAAUlE,EAAeP,EAAMwC,YAAcxC,EAAM4E,yBAI3D,QAASC,GAAYxE,GAKnB,GAJAC,GAAa,EAEbC,EAAeC,EAAa,GAEN,IAAlBR,EAAMS,QAAV,CAEA,OAAQJ,EAAMyE,QAAQnO,QACpB,IAAK,GAEH,IAAuB,IAAnBqJ,EAAMc,SAAmB,MAE7BC,GAAQC,EAAM+D,aAEd7D,EAAYrM,IAAIwL,EAAMyE,QAAS,GAAIE,MAAO3E,EAAMyE,QAAS,GAAIG,MAC7D,MAEF,KAAK,GAEH,IAAqB,IAAjBjF,EAAMsB,OAAiB,MAE3BP,GAAQC,EAAMkE,WAEd,IAAIC,GAAK9E,EAAMyE,QAAS,GAAIE,MAAQ3E,EAAMyE,QAAS,GAAIE,MACnDI,EAAK/E,EAAMyE,QAAS,GAAIG,MAAQ5E,EAAMyE,QAAS,GAAIG,KACxCjH,MAAKO,KAAK4G,EAAKA,EAAKC,EAAKA,EAExC,MAEF,KAAK,GAEH,IAAoB,IAAhBpF,EAAM0B,MAAgB,MAE1BX,GAAQC,EAAMqE,UAEd1D,EAAS9M,IAAIwL,EAAMyE,QAAS,GAAIE,MAAO3E,EAAMyE,QAAS,GAAIG,MAC1D,MAEF,SAEElE,EAAQC,EAAMY,KAGdb,IAAUC,EAAMY,MAAM5B,EAAMlL,cAAciN,IAGhD,QAASuD,GAAWjF,GAClB,IAAsB,IAAlBL,EAAMS,QAAV,CAEAJ,EAAMK,iBACNL,EAAMiD,iBAEN,IAAItB,GAAUhC,EAAMF,aAAehH,SAAWkH,EAAMF,WAAWmC,KAAOjC,EAAMF,UAE5E,QAAQO,EAAMyE,QAAQnO,QACpB,IAAK,GAEH,IAAuB,IAAnBqJ,EAAMc,SAAmB,MAC7B,IAAIC,IAAUC,EAAM+D,aAAc,MAElC7C,GAAUrN,IAAIwL,EAAMyE,QAAS,GAAIE,MAAO3E,EAAMyE,QAAS,GAAIG,OAC3D9C,EAAYC,WAAWF,EAAWhB,GAGlClB,EAAMqC,WAAW,EAAIrE,KAAKE,GAAKiE,EAAYG,EAAIN,EAAQO,YAAcvC,EAAMwC,aAE3ExC,EAAMyC,SAAS,EAAIzE,KAAKE,GAAKiE,EAAYnK,EAAIgK,EAAQU,aAAe1C,EAAMwC,aAE1EtB,EAAYyB,KAAKT,GAEbU,IACFrC,EAAeF,EAAMyE,QAAS,GAAIE,MAAQpC,EAAcoC,MACxDxE,EAAaH,EAAMyE,QAAS,GAAIG,MAAQrC,EAAcqC,OAGxDrC,GACEoC,MAAO3E,EAAMyE,QAAS,GAAIE,MAC1BC,MAAO5E,EAAMyE,QAAS,GAAIG,OAG5BjF,EAAMtG,QACN,MAEF,KAAK,GAEH,IAAqB,IAAjBsG,EAAMsB,OAAiB,MAC3B,IAAIP,IAAUC,EAAMkE,YAAa,MAEjC,IAAIC,GAAK9E,EAAMyE,QAAS,GAAIE,MAAQ3E,EAAMyE,QAAS,GAAIE,MACnDI,EAAK/E,EAAMyE,QAAS,GAAIG,MAAQ5E,EAAMyE,QAAS,GAAIG,KACxCjH,MAAKO,KAAK4G,EAAKA,EAAKC,EAAKA,EAEpC/E,GAAMkF,MAAQ,GAChBvF,EAAM7F,OAAOuJ,IAAO1D,EAAM7F,OAAOuJ,IAAM1D,EAAM2D,OACzC3D,EAAM7F,OAAOuJ,IAAM,EACnB1D,EAAM2D,OACV3D,EAAM7F,OAAOyJ,0BACJvD,EAAMkF,MAAQ,IACvBvF,EAAM7F,OAAOuJ,IAAO1D,EAAM7F,OAAOuJ,IAAM1D,EAAM6D,OACzC7D,EAAM7F,OAAOuJ,IAAM,EACnB1D,EAAM6D,OACV7D,EAAM7F,OAAOyJ,0BAGf5D,EAAMtG,SACNsG,EAAMlL,cAAcgP,EACpB,MAEF,KAAK,GAEH,IAAoB,IAAhB9D,EAAM0B,MAAgB,MAC1B,IAAIX,IAAUC,EAAMqE,UAAW,MAE/BpC,GAAOpO,IAAIwL,EAAMyE,QAAS,GAAIE,MAAO3E,EAAMyE,QAAS,GAAIG,OACxD/B,EAASd,WAAWa,EAAQtB,GAE5B3B,EAAMmD,IAAID,EAASZ,EAAGY,EAASlL,GAE/B2J,EAASgB,KAAKM,GAEdjD,EAAMtG,QACN,MAEF,SAEEqH,EAAQC,EAAMY,OAIpB,QAAS4D,KACPlF,GAAa,EAEbsC,MAAgB/I,IAEM,IAAlBmG,EAAMS,UAEVT,EAAMlL,cAAcsO,GACpBrC,EAAQC,EAAMY,MAnqBhBzS,KAAKgL,OAASA,EACdhL,KAAK2Q,eAA6BjG,KAAfiG,EAA4BA,EAAahH,SAC5D3J,KAAKsW,QAKLtW,KAAKsR,SAAU,EAIftR,KAAKuW,OAAS,GAAI7R,GAAA,QAGlB1E,KAAKwW,OAASxW,KAAKuW,OAInBvW,KAAKmS,QAAS,EACdnS,KAAKgR,UAAY,EAGjBhR,KAAKyW,YAAc,EACnBzW,KAAK0W,YAAcC,IAGnB3W,KAAK4W,QAAU,EACf5W,KAAK6W,QAAUF,IAGf3W,KAAK2R,UAAW,EAChB3R,KAAKqT,aAAe,IAGpBrT,KAAKuS,OAAQ,EACbvS,KAAK8W,YAAc,EAGnB9W,KAAK+W,YAAa,EAClB/W,KAAK8Q,gBAAkB,EAIvB9Q,KAAKgX,cAAgB,EACrBhX,KAAKiX,cAAgBpI,KAAKE,GAGzB/O,KAAKkX,sBAAwB,GAC7BlX,KAAKmX,uBAAyB,KAC9BnX,KAAKyV,sBAAwB,GAG7BzV,KAAK0U,OAAS,GACd1U,KAAKwU,OAAS,IAIfxU,KAAKoX,iBAAmBT,IACxB3W,KAAKqX,gBAAkBV,IAGvB3W,KAAKwV,QAAS,EAGdxV,KAAK8U,MAASK,KAAM,GAAIJ,GAAI,GAAIM,MAAO,GAAIJ,OAAQ,IAGnDjV,KAAKyR,cAAiBC,MAAOhN,EAAA,MAAYyQ,KAAMjD,KAAMxN,EAAA,MAAY4S,OAAQhF,IAAK5N,EAAA,MAAY2Q,MAK1F,IAoBIkC,GACAC,EAUc/D,EAGduB,EAAOE,EAAWE,EAASE,EAlC3BzE,EAAQ7Q,KAKR+R,EAAc,GAAIrN,GAAA,QAClBqO,EAAY,GAAIrO,GAAA,QAChBsO,EAAc,GAAItO,GAAA,QAElB8N,EAAW,GAAI9N,GAAA,QACfoP,EAAS,GAAIpP,GAAA,QACbqP,EAAW,GAAIrP,GAAA,QACf+S,EAAY,GAAI/S,GAAA,QAEhBgT,EAAS,GAAIhT,GAAA,QAEb2N,EAAa,GAAI3N,GAAA,QACjBgP,EAAW,GAAIhP,GAAA,QACfiP,EAAa,GAAIjP,GAAA,QAIjBiT,EAAW,EACXC,EAAa,EACbxB,EAAQ,EACRpC,EAAM,GAAItP,GAAA,QAEVmT,EAAe,GAAInT,GAAA,QACnBoT,EAAiB,GAAIpT,GAAA,WAErB0M,EAAe,EAAGC,EAAa,EAE/BF,GAAa,EAIbU,GAAUY,MAAO,EAAGX,OAAQ,EAAGM,MAAO,EAAGE,IAAK,EAAGsD,aAAc,EAAGG,YAAa,EAAGG,UAAW,GAE7FtE,EAAQC,EAAMY,IAIlBzS,MAAK+X,QAAU/X,KAAKuW,OAAOyB,QAC3BhY,KAAKiY,UAAYjY,KAAKgL,OAAOkN,SAASF,QACtChY,KAAKmY,MAAQnY,KAAKgL,OAAOoN,IAIzB,IAAIC,IAAO,GAAI3T,GAAA,YAAmB4T,mBAAmBtN,EAAOuN,GAAI,GAAI7T,GAAA,QAAc,EAAG,EAAG,IACpF8T,EAAcH,EAAKL,QAAQS,UAI3B9D,GAAgB9S,KAAM,UACtB+Q,GAAe/Q,KAAM,SACrBoS,GAAapS,KAAM,MAEvB7B,MAAK0Y,kBAAoB,SAAUC,GACjCb,EAAetE,KAAKmF,GACpB9H,EAAM7F,OAAO2N,WAAWnF,KAAKmF,IAG/B3Y,KAAK4Y,gBAAkB,WACrB,MAAOf,IAGT7X,KAAKkT,WAAa,SAAU2F,OACZnO,KAAVmO,IACFA,EAAQjI,KAGVgH,GAAciB,GAGhB7Y,KAAKsT,SAAW,SAAUuF,OACVnO,KAAVmO,IACFA,EAAQjI,KAGV+G,GAAYkB,GAId7Y,KAAK8Y,QAAU,SAAUC,GACvB,GAAIC,GAAKhZ,KAAKgL,OAAOiO,OAAOC,QAG5BzB,GAAU/R,IAAIsT,EAAI,GAAKA,EAAI,GAAKA,EAAI,IACpCvB,EAAU0B,gBAAgBJ,GAE1B/E,EAAI1K,IAAImO,IAIVzX,KAAKoZ,MAAQ,SAAUL,GACrB,GAAIC,GAAKhZ,KAAKgL,OAAOiO,OAAOC,QAG5BzB,GAAU/R,IAAIsT,EAAI,GAAKA,EAAI,GAAKA,EAAI,IACpCvB,EAAU0B,eAAeJ,GAEzB/E,EAAI1K,IAAImO,IAKVzX,KAAKgU,IAAM,SAAUqF,EAAQC,GAC3B,GAAIzG,GAAUhC,EAAMF,aAAehH,SAAWkH,EAAMF,WAAWmC,KAAOjC,EAAMF,UAE5E,IAAIE,EAAM7F,iBAAkBtG,GAAA,kBAAyB,CAEnD,GAAIwT,GAAWrH,EAAM7F,OAAOkN,SACxBR,EAASQ,EAASF,QAAQuB,IAAI1I,EAAM0F,QACpCiD,EAAiB9B,EAAOlQ,QAG5BgS,IAAkB3K,KAAK4K,IAAK5I,EAAM7F,OAAOuJ,IAAM,EAAK1F,KAAKE,GAAK,KAG9D8B,EAAMiI,QAAQ,EAAIO,EAASG,EAAiB3G,EAAQU,cACpD1C,EAAMuI,MAAM,EAAIE,EAASE,EAAiB3G,EAAQU,kBACzC1C,GAAM7F,iBAAkBtG,GAAA,oBAEjCmM,EAAMiI,QAAQO,GAAUxI,EAAM7F,OAAO0O,MAAQ7I,EAAM7F,OAAO2O,MAAQ9G,EAAQO,aAC1EvC,EAAMuI,MAAME,GAAUzI,EAAM7F,OAAO4O,IAAM/I,EAAM7F,OAAO6O,QAAUhH,EAAQU,eAGxE9J,QAAQC,KAAK,iFAIjB1J,KAAK8Z,SAAW,WACd,GAAK3I,EAAL,CAEA,GAAItC,KAAKkL,IAAI3I,GAnIJ,MAmI4BvC,KAAKkL,IAAI1I,GAnIrC,KAqIP,YADAF,GAAa,EAIfE,IAAcrR,KAAKkX,sBACnB9F,GAAgBpR,KAAKkX,sBAErBU,GAAc5X,KAAKmX,sBAAwB/F,EAC3CuG,GAAY3X,KAAKmX,sBAAwB9F,IAG3CrR,KAAK4T,QAAU,SAAUoG,OACJtP,KAAfsP,IACFA,EAAajJ,KAGXF,EAAM7F,iBAAkBtG,GAAA,kBAC1B0R,GAAS4D,EACAnJ,EAAM7F,iBAAkBtG,GAAA,oBACjCmM,EAAM7F,OAAOoN,KAAOvJ,KAAKoL,IAAIja,KAAK4W,QAAS/H,KAAKqL,IAAIla,KAAK6W,QAAS7W,KAAKgL,OAAOoN,KAAO4B,IACrFnJ,EAAM7F,OAAOyJ,yBACb5D,EAAMlL,cAAcgP,IAEpBlL,QAAQC,KAAK,wFAIjB1J,KAAK6T,SAAW,SAAUmG,OACLtP,KAAfsP,IACFA,EAAajJ,KAGXF,EAAM7F,iBAAkBtG,GAAA,kBAC1B0R,GAAS4D,EACAnJ,EAAM7F,iBAAkBtG,GAAA,oBACjCmM,EAAM7F,OAAOoN,KAAOvJ,KAAKoL,IAAIja,KAAK4W,QAAS/H,KAAKqL,IAAIla,KAAK6W,QAAS7W,KAAKgL,OAAOoN,KAAO4B,IACrFnJ,EAAM7F,OAAOyJ,yBACb5D,EAAMlL,cAAcgP,IAEpBlL,QAAQC,KAAK,wFAIjB1J,KAAKuK,OAAS,SAAU4P,GACtB,GAAIjC,GAAWlY,KAAKgL,OAAOkN,QAE3BR,GAAOlE,KAAK0E,GAAUqB,IAAIvZ,KAAKuW,QAG/BmB,EAAO0C,gBAAgB/B,GAIvBd,EAAQ1I,KAAKwL,MAAM3C,EAAOvE,EAAGuE,EAAO4C,GAIpC9C,EAAM3I,KAAKwL,MAAMxL,KAAKO,KAAKsI,EAAOvE,EAAIuE,EAAOvE,EAAIuE,EAAO4C,EAAI5C,EAAO4C,GAAI5C,EAAO7O,GAE1E7I,KAAK+W,YAAcnF,IAAUC,EAAMY,MACrCzS,KAAKkT,WAAWtC,KAGlB5Q,KAAK8Z,WAELvC,GAASK,EACTJ,GAAOG,EAGPJ,EAAQ1I,KAAKoL,IAAIja,KAAKoX,gBAAiBvI,KAAKqL,IAAIla,KAAKqX,gBAAiBE,IAGtEC,EAAM3I,KAAKoL,IAAIja,KAAKgX,cAAenI,KAAKqL,IAAIla,KAAKiX,cAAeO,IAGhEA,EAAM3I,KAAKoL,IAhNH,KAgNYpL,KAAKqL,IAAIrL,KAAKE,GAhN1B,KAgNoCyI,GAE5C,IAAI+C,GAAS7C,EAAOlQ,SAAW4O,CAG/BmE,GAAS1L,KAAKoL,IAAIja,KAAKyW,YAAa5H,KAAKqL,IAAIla,KAAK0W,YAAa6D,IAG/Dva,KAAKuW,OAAOjN,IAAI0K,GAEhB0D,EAAOvE,EAAIoH,EAAS1L,KAAKG,IAAIwI,GAAO3I,KAAKG,IAAIuI,GAC7CG,EAAO7O,EAAI0R,EAAS1L,KAAKC,IAAI0I,GAC7BE,EAAO4C,EAAIC,EAAS1L,KAAKG,IAAIwI,GAAO3I,KAAKC,IAAIyI,GAG7CG,EAAO0C,gBAAgB5B,GAEvBN,EAAS1E,KAAKxT,KAAKuW,QAAQjN,IAAIoO,GAE/B1X,KAAKgL,OAAOwP,OAAOxa,KAAKuW,QAExBqB,EAAa,EACbD,EAAW,EACXvB,EAAQ,EACRpC,EAAItO,IAAI,EAAG,EAAG,IAKVmS,EAAa4C,kBAAkBza,KAAKgL,OAAOkN,UA7OvC,MA8ON,GAAK,EAAIJ,EAAe4C,IAAI1a,KAAKgL,OAAO2N,aA9OlC,SA+OW,IAAjBwB,GAAyBna,KAAK2F,cAAcgP,GAE5CkD,EAAarE,KAAKxT,KAAKgL,OAAOkN,UAC9BJ,EAAetE,KAAKxT,KAAKgL,OAAO2N,cAIpC3Y,KAAK2a,MAAQ,WACX/I,EAAQC,EAAMY,KAEdzS,KAAKuW,OAAO/C,KAAKxT,KAAK+X,SACtB/X,KAAKgL,OAAOkN,SAAS1E,KAAKxT,KAAKiY,WAC/BjY,KAAKgL,OAAOoN,KAAOpY,KAAKmY,MAExBnY,KAAKgL,OAAOyJ,yBACZzU,KAAK2F,cAAcgP,GAEnB3U,KAAKuK,UAGPvK,KAAK4a,cAAgB,WACnB,MAAOpD,IAGTxX,KAAK6a,kBAAoB,WACvB,MAAOtD,IAqVTvX,KAAK2Q,WAAWnL,iBAAiB,YAAayL,GAAa,GAC3DjR,KAAK2Q,WAAWnL,iBAAiB,aAAc0O,GAAc,GAC7DlU,KAAK2Q,WAAWnL,iBAAiB,iBAAkB0O,GAAc,GAEjElU,KAAK2Q,WAAWnL,iBAAiB,aAAckQ,GAAY,GAC3D1V,KAAK2Q,WAAWnL,iBAAiB,WAAY6Q,GAAU,GACvDrW,KAAK2Q,WAAWnL,iBAAiB,YAAa2Q,GAAW,GAEzDxL,OAAOnF,iBAAiB,QAASoP,GAAS,GAC1CjK,OAAOnF,iBAAiB,UAAW+P,GAAW,GAG9CvV,KAAKuK,UAGP7F,EAAA,cAAoBoW,UAAY3W,IAAcO,EAAA,gBAAsBoW,WACpEpW,EAAA,cAAoBoW,UAAUC,YAAcrW,EAAA,cAO5CA,EAAA,0BAAkC,SAAUsW,EAAQrK,GAClD,GAAIE,GAAQ7Q,KACR2U,GAAgB9S,KAAM,UAEtBoZ,EAAO,EACPC,EAAO,EACPC,EAAQ,EACRC,EAAQ,CAEZpb,MAAKgb,OAASA,EACdhb,KAAKgb,OAAOK,SAASC,QAAQ,OAC7Btb,KAAK2Q,eAA6BjG,KAAfiG,EAA4BA,EAAahH,SAE5D3J,KAAKsR,SAAU,EAEftR,KAAKub,qBACLvb,KAAKwb,kBAAoB,EAEzBxb,KAAKyb,MAAQ,EACbzb,KAAK0b,iBAAmB,CAExB,IAAIC,GAAiC,SAAUzK,GAC7CL,EAAM0K,kBAAoBrK,GAGxB0K,EAAiC,WACnC/K,EAAM2K,kBAAoB7Q,OAAOkR,aAAe,GAG9CC,EAAoB,SAAU5K,GAChCA,EAAMK,iBACNL,EAAMiD,kBAENgH,EAAQjK,EAAMyE,QAAS,GAAIE,MAC3BuF,EAAQlK,EAAMyE,QAAS,GAAIG,OAGzBiG,EAAmB,SAAU7K,GAC/BA,EAAMK,iBACNL,EAAMiD,kBAEN8G,GAAQvW,EAAA,KAAWsX,UAAU9K,EAAMyE,QAAS,GAAIE,MAAQsF,GAAS,GACjED,GAAQxW,EAAA,KAAWsX,UAAUZ,EAAQlK,EAAMyE,QAAS,GAAIG,OAAS,GAEjEjF,EAAMoL,uBAAuBhB,GAE7BE,EAAQjK,EAAMyE,QAAS,GAAIE,MAC3BuF,EAAQlK,EAAMyE,QAAS,GAAIG,OAKzBoG,EAAsB,SAAUvD,EAAY8C,EAAOU,EAAMC,EAAOC,GAClE,GAQIC,GARAC,EAAM,GAAI7X,GAAA,QAAc,EAAG,EAAG,GAE9B8X,EAAQ,GAAI9X,GAAA,MAEZ+X,EAAK,GAAI/X,GAAA,WAETgY,EAAK,GAAIhY,GAAA,YAAkBmK,KAAKO,KAAK,IAAM,EAAG,EAAGP,KAAKO,KAAK,KAG3DuN,EAAW,GAAIjY,GAAA,WACfkY,EAAW,GAAIlY,GAAA,UAEY,IAA3BmM,EAAM2K,mBACRc,EAAgB,GAAI5X,GAAA,QAAc,EAAG,EAAG,GACxCiY,EAASE,iBAAiBP,GAAgBpB,IACN,KAA3BrK,EAAM2K,mBACfc,EAAgB,GAAI5X,GAAA,QAAc,EAAG,EAAG,GACxCiY,EAASE,iBAAiBP,EAAepB,IACL,IAA3BrK,EAAM2K,mBACfc,EAAgB,GAAI5X,GAAA,QAAc,EAAG,EAAG,GACxCiY,EAASE,iBAAiBP,EAAepB,KACJ,IAA5BrK,EAAM2K,oBACfc,EAAgB,GAAI5X,GAAA,QAAc,EAAG,EAAG,GACxCiY,EAASE,iBAAiBP,GAAgBpB,IAG5CwB,EAAGI,SAASH,GACZD,EAAGI,SAASF,GAEZJ,EAAM9W,IAAIyW,EAAMV,GAAQW,EAAO,OAE/BzD,EAAWoE,aAAaP,GAExB7D,EAAWmE,SAASJ,GAEpB/D,EAAWmE,SAASL,EAAGI,iBAAiBN,GAAMF,IAGhDrc,MAAKgd,QAAU,WACbpB,IAEAjR,OAAOnF,iBAAiB,oBAAqBoW,GAAgC,GAC7EjR,OAAOnF,iBAAiB,oBAAqBmW,GAAgC,GAC7EhR,OAAOnF,iBAAiB,oBAAqBxF,KAAKuK,OAAOhC,KAAKvI,OAAO,GAErE6Q,EAAMF,WAAWnL,iBAAiB,aAAcsW,GAAmB,GACnEjL,EAAMF,WAAWnL,iBAAiB,YAAauW,GAAkB,GAEjElL,EAAMS,SAAU,GAGlBtR,KAAKid,WAAa,WAChBtS,OAAOpB,oBAAoB,oBAAqBqS,GAAgC,GAChFjR,OAAOpB,oBAAoB,oBAAqBoS,GAAgC,GAChFhR,OAAOpB,oBAAoB,oBAAqBvJ,KAAKuK,OAAOhC,KAAKvI,OAAO,GAExE6Q,EAAMF,WAAWpH,oBAAoB,aAAcuS,GAAmB,GACtEjL,EAAMF,WAAWpH,oBAAoB,YAAawS,GAAkB,GAEpElL,EAAMS,SAAU,GAGlBtR,KAAKuK,OAAS,SAAU4P,GACtB,IAAsB,IAAlBtJ,EAAMS,QAAV,CAEA,GAAImK,GAAQ5K,EAAM0K,kBAAkBE,MAAQ/W,EAAA,KAAWsX,SAASnL,EAAM0K,kBAAkBE,OAASzb,KAAK0b,iBAAmB,EACrHS,EAAOtL,EAAM0K,kBAAkBY,KAAOzX,EAAA,KAAWsX,SAASnL,EAAM0K,kBAAkBY,MAAQ,EAC1FC,EAAQvL,EAAM0K,kBAAkBa,MAAQ1X,EAAA,KAAWsX,SAASnL,EAAM0K,kBAAkBa,OAAS,EAC7FC,EAASxL,EAAM2K,kBAAoB9W,EAAA,KAAWsX,SAASnL,EAAM2K,mBAAqB,CAEtFU,GAAoBrL,EAAMmK,OAAOrC,WAAY8C,EAAOU,EAAMC,EAAOC,GACjErc,KAAKyb,MAAQA,GAEI,IAAjBtB,GAAyBna,KAAK2F,cAAcgP,KAG9C3U,KAAKic,uBAAyB,SAAUpD,GACtC7Y,KAAK0b,iBAAmB7C,EACxB7Y,KAAKuK,UAGPvK,KAAKkd,QAAU,WACbld,KAAKid,cAGPjd,KAAKgd,WAGPtY,EAAA,0BAAgCoW,UAAY3W,IAAcO,EAAA,gBAAsBoW,WAChFpW,EAAA,0BAAgCoW,UAAUC,YAAcrW,EAAA,0BAYxDA,EAAA,aAAqB,aAIrBA,EAAA,aAAmBoW,WAEjBC,YAAarW,EAAA,aAEbgB,IAAK,SAAUyX,EAAWC,EAAMvE,GAI9B,MAHA7Y,MAAKmd,UAAY,GAAIzY,GAAA,QAAiB1E,KAAKmd,UAAU3J,KAAK2J,GAC1Dnd,KAAKod,KAAO,GAAI1Y,GAAA,QAAiB1E,KAAKod,KAAK5J,KAAK4J,GAChDpd,KAAK6Y,MAAQA,EACN7Y,MAGTqd,MAAO,SAAUnY,GACf,MAAOA,GAAI,GAAK,EAAIA,EAAI,EAAI,EAAI,GAGlCoY,MAAO,SAAUnK,GACf,OAAQtE,KAAK0O,IAAIpK,GAAKtE,KAAK0O,KAAKpK,IAAM,GAGxCqK,aAAc,SAAUrK,GACtB,MAAOtE,MAAK4O,IAAI5O,KAAKkL,IAAI5G,GAAKtE,KAAKO,KAAK+D,EAAIA,EAAI,KAGlDuK,OAAQ,SAAUC,GAChB,GAAIC,GAAY,GAAIlZ,GAAA,OAAiBkZ,GAAUC,aAAa7d,KAAKmd,UAAWnd,KAAKod,KAGjF,IAAIU,GAAI,GAAIpZ,GAAA,OACZoZ,GAAEpY,IAAIkY,EAAUzK,EAAGyK,EAAU/U,EAAG+U,EAAUtD,EAAG,EAC3Cta,KAAKmd,UAAUhK,EAAGnT,KAAKmd,UAAUtU,EAAG7I,KAAKmd,UAAU7C,EAAG,EACtDta,KAAKod,KAAKjK,EAAGnT,KAAKod,KAAKvU,EAAG7I,KAAKod,KAAK9C,EAAG,EACvC,EAAG,EAAG,EAAG,GAAGyD,WAQd,KAAK,GANDC,IAAW,GAAItZ,GAAA,SAAgBuZ,WAAWH,GAC1CI,KAAsBC,KAAsBC,KAE5CC,EAA8B,EAAOC,EAA8B,EACnEC,EAA8B,EAAOC,EAA8B,EAE9Dtf,EAAI,EAAGA,EAAIye,EAASc,SAASjX,OAAQtI,IAC5Cgf,EAAYhf,GAAK,GAAIwF,GAAA,QAAiBwZ,EAAYhf,GAAGsU,KAAKmK,EAASc,SAASvf,IAAIwf,aAAaV,GACzFE,EAAYhf,GAAGiU,EAAIkL,IAA+BA,EAA8BH,EAAYhf,GAAGiU,GAC/F+K,EAAYhf,GAAGiU,EAAImL,IAA+BA,EAA8BJ,EAAYhf,GAAGiU,GAC/F+K,EAAYhf,GAAG2J,EAAI0V,IAA+BA,EAA8BL,EAAYhf,GAAG2J,GAC/FqV,EAAYhf,GAAG2J,EAAI2V,IAA+BA,EAA8BN,EAAYhf,GAAG2J,EASrG,KAAK,GAND8V,GAAeN,EAA8BC,EAC7CM,EAAYL,EAA8BC,EAC1CK,EAAS,EAAI7e,KAAKwd,aAAa3O,KAAK4K,IAAIzZ,KAAK6Y,QAAU8F,EACvDG,GAAcT,EAA8BC,GAA+B,EAC3ES,GAAcR,EAA8BC,GAA+B,EAEtEtf,EAAI,EAAGA,EAAIye,EAASc,SAASjX,OAAQtI,IAC5Cif,EAAYjf,GAAK,GAAIwF,GAAA,QAAiByZ,EAAYjf,GAAGsU,KAAK0K,EAAYhf,IACtEgf,EAAYhf,GAAGiU,EAAgD,EAA5CnT,KAAKqd,MAAMa,EAAYhf,GAAGiU,EAAI2L,GAAkBD,EAAS7e,KAAKwd,cAAcU,EAAYhf,GAAGiU,EAAI2L,GAAcD,EAGlI,IAAIG,GAAY,EAAIH,EAAS7e,KAAKwd,aAAamB,EAAe,EAAIE,GAE9DI,EAAY,EAAIjf,KAAKwd,aAAa3O,KAAK4K,IAAIzZ,KAAK6Y,QAAUmG,EAE1DE,EAAe,GAAIxa,GAAA,QAAcsa,EAAY,GAAIJ,EAAY,EAAG,EACpEM,GAAarW,EAAI,EAAIoW,EAAYjf,KAAKsd,MAAM2B,EAAYC,EAAa/L,GAAK,EAAI8L,EAAYL,EAAY,CAItG,KAAK,GAFDO,GAAa,GAAIza,GAAA,QAAc,EAAGwa,EAAarW,EAAIqW,EAAa/L,EAAItE,KAAK4K,IAAIzZ,KAAK6Y,OAAQ,GAErF3Z,EAAI,EAAGA,EAAIye,EAASc,SAASjX,OAAQtI,IAAK,CACjD,GAAIkgB,GAAiD,EAA5Cpf,KAAKqd,MAAMc,EAAYjf,GAAGiU,EAAI2L,GAAkBD,EAAS7e,KAAKwd,cAAcW,EAAYjf,GAAGiU,EAAI2L,GAAcD,GAClHQ,EAAK,EAAIJ,EAAYjf,KAAKsd,MAAM2B,EAAYG,GAAM,EAAIH,EAEtDxY,EAAI,GAAI/B,GAAA,QAAcya,EAAWhM,EAAIiM,EAAID,EAAWtW,GAAKwW,EAAKT,EAAY,GAAIO,EAAW7E,GAAGgF,YAE5FC,EAAI,GAAI7a,GAAA,OACZ6a,GAAEC,WAAW,GAAI9a,GAAA,QAAc0a,EAAIC,EAAKT,EAAY,EAAGT,EAAYjf,GAAGob,GAAI7T,EAAE0S,eAAegF,EAAYjf,GAAG2J,EAAI+V,EAAY,IAC1HV,EAAYhf,GAAGiU,EAAIoM,EAAEpM,EAAG+K,EAAYhf,GAAG2J,EAAI0W,EAAE1W,EAK/C,IAAK,GAFD4W,GAASX,EAAaE,EAAYL,EAE7Bzf,EAAI,EAAGA,EAAIye,EAASc,SAASjX,OAAQtI,IAAK,CACjD,GAAIwgB,GAAI,GAAIhb,GAAA,QAAcoa,EAAYC,EAAYZ,EAAYjf,GAAGob,IACzD,GAAI5V,GAAA,SAAmBuO,WAAWkL,EAAYjf,GAAIwgB,IAClD,GAAIhb,GAAA,SAAmBuO,WAAWiL,EAAYhf,GAAIwgB,GAE1DtB,EAA+Blf,GAAK2P,KAAK8Q,KAAK,EAAI3f,KAAKsd,MAAMuB,EAASX,EAAYhf,GAAGiU,IAAMnT,KAAKqd,MAAMa,EAAYhf,GAAGiU,GAErH+K,EAAYhf,GAAGiU,EAAI+K,EAAYhf,GAAGiU,EAAIsM,EACtC9B,EAASc,SAASvf,GAAGsU,KAAK0K,EAAYhf,GAAGwf,aAAaZ,IAGxDH,EAASiC,qBACTjC,EAASkC,oBAAqB,EAC9BlC,EAASmC,mBAAoB,CAK7B,KAAK,GAFDC,IAAY,IAAK,IAAK,IAAK,KAEtBnX,EAAI,EAAGoX,EAAKrC,EAASsC,MAAMzY,OAAQoB,EAAIoX,EAAIpX,IAAK,CACvD,GAAIsX,GAAOvC,EAASsC,MAAOrX,EAC3B,QAA2B8B,KAAvBwV,EAAKC,cAGT,IAAK,GAAI/X,GAAI,EAAGgY,EAAKF,EAAKC,cAAc3Y,OAAQY,EAAIgY,EAAIhY,IAAK,CAC3D,GAAIyQ,GAAQuF,EAAgC8B,EAAMH,EAAS3X,KACvD+K,EAAInT,KAAKod,KAAKjK,EAChBtK,EAAI7I,KAAKod,KAAKvU,EACdyR,EAAIta,KAAKod,KAAK9C,EAEZ+F,EAAe,GAAI3b,GAAA,OACvB2b,GAAa3a,IAAImJ,KAAKC,IAAI+J,IAAU,EAAIhK,KAAKC,IAAI+J,IAAU1F,EAAIA,GAAI,EAAItE,KAAKC,IAAI+J,IAAU1F,EAAItK,EAAIgG,KAAKG,IAAI6J,GAASyB,GAAI,EAAIzL,KAAKC,IAAI+J,IAAU1F,EAAImH,EAAIzL,KAAKG,IAAI6J,GAAShQ,GACtK,EAAIgG,KAAKC,IAAI+J,IAAUhQ,EAAIsK,EAAItE,KAAKG,IAAI6J,GAASyB,EAAGzL,KAAKC,IAAI+J,IAAU,EAAIhK,KAAKC,IAAI+J,IAAUhQ,EAAIA,GAAI,EAAIgG,KAAKC,IAAI+J,IAAUhQ,EAAIyR,EAAIzL,KAAKG,IAAI6J,GAAS1F,GACvJ,EAAItE,KAAKC,IAAI+J,IAAUyB,EAAInH,EAAItE,KAAKG,IAAI6J,GAAShQ,GAAI,EAAIgG,KAAKC,IAAI+J,IAAUyB,EAAIzR,EAAIgG,KAAKG,IAAI6J,GAAS1F,EAAGtE,KAAKC,IAAI+J,IAAU,EAAIhK,KAAKC,IAAI+J,IAAUyB,EAAIA,GAE1J4F,EAAKC,cAAe/X,GAAIkY,aAAaD,IAKzC,MAAOrgB,QAMX0E,EAAA,gBAAwB,SAAU6b,GAChC,GAAIC,GAAU,GAAI9b,GAAA,oBAA0B,EAAG,EAAG,GAAI,EAAG,EAAG,GAExD+b,EAAS,GAAI/b,GAAA,MAEbgc,EAAU,GAAIhc,GAAA,YAClBgc,GAAQC,OAAS,EAEjB,IAAIC,IAAYC,UAAWnc,EAAA,aAAoBoc,UAAWpc,EAAA,cAAqBqc,OAAQrc,EAAA,YAEnFsc,EAAgB,GAAItc,GAAA,kBAAwB,IAAK,IAAKkc,EAC1DI,GAAcC,aAAc,EAC5BD,EAAcE,QAAQC,iBAAkB,CAKxC,IAAIC,GAAa,GAAI1c,GAAA,QAAc,KAAO,MAEtCiZ,EAAW,GAAIjZ,GAAA,oBAA0B,EAAG,EAAG,GAAI,IAAI2c,gBAAgB,UAAUC,eAEjFC,EAAY5D,EAAS6D,WAAWtJ,SAASuJ,MACzCC,EAAM/D,EAAS6D,WAAWG,GAAGF,KAGjC9D,GAAS6D,WAAWtJ,SAAS0J,OAAS,EACtCjE,EAAS6D,WAAWG,GAAGC,OAAS,CAEhC,IAAIC,GAAa,GAAIC,cAAgC,EAAnBP,EAAU/Z,OAC5Cqa,GAAWnc,IAAI6b,GACfM,EAAWnc,IAAI6b,EAAWA,EAAU/Z,OAEpC,IAAIua,GAAO,GAAID,cAA0B,EAAbJ,EAAIla,OAChCua,GAAKrc,IAAIgc,GACTK,EAAKrc,IAAIgc,EAAKA,EAAIla,OAKlB,KAAK,GAHDwa,GAAS,GAAItd,GAAA,QACb8C,EAAS+Z,EAAU/Z,OAAS,EAEvBtI,EAAI,EAAGyJ,EAAIkZ,EAAWra,OAAS,EAAGtI,EAAIyJ,EAAGzJ,IAAK,CACrD8iB,EAAO7O,EAAI0O,EAAgB,EAAJ3iB,EAAQ,GAC/B8iB,EAAOnZ,EAAIgZ,EAAgB,EAAJ3iB,EAAQ,EAE/B,IAAIwb,GAAMsH,EAAOtH,IAAIsH,GACjBC,EAAS,KAAOb,EAAWjO,EAAIiO,EAAWvY,EAAI6R,GAAOA,EAErDhD,EAASxY,EAAIsI,EAAS,EAAI,CAE9Bqa,GAAgB,EAAJ3iB,EAAQ,GAAO8iB,EAAO7O,EAAI8O,EAAU,IAAM,GAAMvK,EAC5DmK,EAAgB,EAAJ3iB,EAAQ,GAAO8iB,EAAOnZ,EAAIoZ,EAAU,EAEhDF,EAAU,EAAJ7iB,GAAqC,IAA1B6iB,EAAU,EAAJ7iB,GAAUwY,GAGnCiG,EAAS6D,WAAWtJ,SAASuJ,MAAQI,EACrClE,EAAS6D,WAAWG,GAAGF,MAAQM,CAK/B,IAAIG,GAAW,GAAIxd,GAAA,mBAA0Byd,IAAKnB,EAAcE,UAC5DkB,EAAO,GAAI1d,GAAA,KAAWiZ,EAAUuE,EACpCzB,GAAOnX,IAAI8Y,GAIXpiB,KAAKqiB,QAAU,SAAU/hB,EAAOC,GAC9BggB,EAAS8B,QAAQ/hB,EAAOC,EAExB,IAAI+hB,GAAa/B,EAASgC,eAE1BvB,GAAcqB,QAAQ/hB,EAAQgiB,EAAY/hB,EAAS+hB,IAGrDtiB,KAAKF,OAAS,SAAU0iB,EAAOxH,GAC7BwH,EAAMC,oBAEgB,OAAlBzH,EAAO0H,QAAiB1H,EAAOyH,oBAEnC/B,EAAQnW,OAAOyQ,EAEf,IAAI1a,GAAQ0gB,EAAc1gB,MAAQ,EAC9BC,EAASygB,EAAczgB,MAE3BygB,GAAc2B,QAAQjd,IAAI,EAAG,EAAGpF,EAAOC,GACvCygB,EAAc4B,SAASld,IAAI,EAAG,EAAGpF,EAAOC,GACxCggB,EAASzgB,OAAO0iB,EAAO9B,EAAQmC,QAAS7B,GAExCA,EAAc2B,QAAQjd,IAAIpF,EAAO,EAAGA,EAAOC,GAC3CygB,EAAc4B,SAASld,IAAIpF,EAAO,EAAGA,EAAOC,GAC5CggB,EAASzgB,OAAO0iB,EAAO9B,EAAQoC,QAAS9B,GAExCT,EAASzgB,OAAO2gB,EAAQD,KAS5B9b,EAAA,aAAqB,SAAU6b,GAC7B,GAAIG,GAAU,GAAIhc,GAAA,YAClBgc,GAAQC,OAAS,GAEjB3gB,KAAK+iB,iBAAmB,SAAUC,GAChCtC,EAAQsC,OAASA,GAGnBhjB,KAAKqiB,QAAU,SAAU/hB,EAAOC,GAC9BggB,EAAS8B,QAAQ/hB,EAAOC,IAG1BP,KAAKF,OAAS,SAAU0iB,EAAOxH,GAC7BwH,EAAMC,oBAEgB,OAAlBzH,EAAO0H,QAAiB1H,EAAOyH,oBAEnC/B,EAAQnW,OAAOyQ,EAEf,IAAIiI,GAAO1C,EAAS2C,SAEhB3C,GAAS4C,WAAW5C,EAAS6C,QACjC7C,EAAS8C,gBAAe,GAExB9C,EAAS+C,WAAW,EAAG,EAAGL,EAAK3iB,MAAQ,EAAG2iB,EAAK1iB,QAC/CggB,EAASgD,YAAY,EAAG,EAAGN,EAAK3iB,MAAQ,EAAG2iB,EAAK1iB,QAChDggB,EAASzgB,OAAO0iB,EAAO9B,EAAQmC,SAE/BtC,EAAS+C,WAAWL,EAAK3iB,MAAQ,EAAG,EAAG2iB,EAAK3iB,MAAQ,EAAG2iB,EAAK1iB,QAC5DggB,EAASgD,YAAYN,EAAK3iB,MAAQ,EAAG,EAAG2iB,EAAK3iB,MAAQ,EAAG2iB,EAAK1iB,QAC7DggB,EAASzgB,OAAO0iB,EAAO9B,EAAQoC,SAE/BvC,EAAS8C,gBAAe,IAG5B,IAAIG,GAAUA,KACdA,GAAQC,WAAa,SAAUC,GAG7B,GAEEC,GACAC,EAHEC,EAAcH,MAIhBI,EAAc,GAAIC,QAAOC,KAAKC,kBAC9BC,EAAS,EACTC,EAAS,EACTC,KACAC,KACAC,EAAM,EACNC,EAAM,EAGNC,EAAY,GAIVC,GAAY,EAAG,EAAG,EAAG,EAAG,GAAI,IAC9BC,GAAY,EAAG,EAAG,EAAG,EAAG,EAAG,IAEzBC,GAAW,IAAK,IAAK,KAAM,KAAM,KAAM,OACzCC,GAAY,IAAK,IAAK,IAAK,KAAM,KAAM,MAErCC,EAAK,IACT,KACE,GAAIC,GAASnb,SAASob,cAAc,SACnCF,GAAKC,EAAOE,WAAW,sBACb,MAANH,IACAA,EAAKC,EAAOE,WAAW,UAE5B,MAAOC,IAET,GAAIC,GAAO,KACTC,EAAO,IAET,IAAIN,EAAI,CACN,GAAIO,GAAavW,KAAKoL,IAAI4K,EAAGQ,aAAaR,EAAGS,kBAAmB,KAEhEJ,GAAOC,EAAOC,EAGhBplB,KAAKulB,YAAc,SAAUC,EAAQC,GAC/BzlB,KAAK0lB,YACP1lB,KAAK0lB,YAAYF,OAAQA,EAAQC,MAAOA,KAI5CzlB,KAAK2lB,WAAa,SAAUC,GACtB5lB,KAAK6lB,QACP7lB,KAAK6lB,QAAQD,GAEbnc,QAAQwb,MAAMW,IAIlB5lB,KAAK8lB,mBAAqB,WACxB,GAAIzd,GAAuB,IAAnBoc,EAASd,GACfpd,EAAuB,IAAnBme,EAASf,EAEftb,GAAIsc,EAAQhB,GACZpd,EAAIqe,EAASjB,GAEbW,EAAMzV,KAAKkX,KAAK1d,EAAI6c,GACpBX,EAAM1V,KAAKkX,KAAKxf,EAAI4e,GAEpBf,KAAcC,IAGd,KAAK,GADD2B,GAAM,EACDnd,EAAI,EAAGA,EAAI0b,EAAK1b,IACvB,IAAK,GAAIsK,GAAI,EAAGA,EAAImR,EAAKnR,IAAK,CAC5B,GAAIvL,GAAI+B,SAASob,cAAc,SACZnd,GAAEtH,MAAjB6S,EAAKmR,EAAM,EAAcY,EAAqB7c,EAAK6c,EAAO/R,EAC3CvL,EAAErH,OAAjBsI,EAAK0b,EAAM,EAAeY,EAAsB5e,EAAK4e,EAAOtc,EAChEub,EAAQnlB,KAAK2I,GACbyc,EAAKplB,KAAK2I,EAAEod,WAAW,OACvBgB,MAKNhmB,KAAKimB,gBAAkB,SAAU9S,EAAGtK,EAAGqY,GACrC/N,GAAK,IACLtK,GAAK,GACL,IAAIqd,GAAKrX,KAAKW,MAAM2D,EAAI+R,GAAOiB,EAAKtX,KAAKW,MAAM3G,EAAIsc,EAEnDhS,IAAK+S,EAAKhB,EACVrc,GAAKsd,EAAKhB,EAEVd,EAAM8B,EAAK7B,EAAM4B,GAAKE,UAAUlF,EAAS,EAAG,EAAGA,EAAQ5gB,MAAO4gB,EAAQ3gB,OAAQ4S,EAAGtK,EAAG,IAAK,KACzF7I,KAAKqmB,YAGPrmB,KAAKqmB,SAAW,WACdnC,GAEQrV,MAAKyX,MAAe,IAATpC,EAAeC,EAClCnkB,MAAKulB,YAAYrB,EAAQC,GAErBD,IAAWC,IACbnkB,KAAK8kB,OAASV,EACdpkB,KAAKumB,OAAS3C,EACd5jB,KAAKoY,KAAOuL,EACR3jB,KAAKwmB,gBACPxmB,KAAKwmB,eAAepC,EAAQ,MAKlCpkB,KAAKymB,WAAa,SAAUC,GAC1B9C,EAAU8C,EACV1mB,KAAK2mB,mBAGP3mB,KAAK2mB,gBAAkB,WACrB3mB,KAAKulB,YAAY,EAAG,EAEpB,IAGEqB,GACAzT,EACAtK,EALER,EAAIoc,EAASd,GACfpd,EAAIme,EAASf,GACbkD,EAAO7mB,IAKTkkB,GAAS,EACTC,EAAS9b,EAAI9B,CAGb,KAAK,GADDsgB,GAAO7mB,KACF6I,EAAI,EAAGA,EAAItC,EAAGsC,IACrB,IAAK,GAAIsK,GAAI,EAAGA,EAAI9K,EAAG8K,IAAK,CAC1B,GAAIyT,GAAM,0FAA4FjD,EAAQ,MAAQxQ,EAAI,MAAQtK,EAAI,WAAa+a,EAAU,gBAC7J,SAAWzQ,EAAGtK,GACZ,GAAIgb,EAAYiD,SACd,GAAI5F,GAAUxc,EAAA,WAAiBqiB,YAAYH,EAAK,KAAM,WACpDC,EAAKZ,gBAAgB9S,EAAGtK,EAAGqY,SAExB,CACL,GAAI8F,GAAM,GAAIC,MACdD,GAAIxhB,iBAAiB,OAAQ,WAC3BqhB,EAAKZ,gBAAgB9S,EAAGtK,EAAG7I,QAE7BgnB,EAAIhhB,YAAc,GAClBghB,EAAI/gB,IAAM2gB,IAEXzT,EAAGtK,KAKZ7I,KAAKyH,KAAO,SAAUyf,GACpBlnB,KAAKmnB,SAASD,IAGhBlnB,KAAKmnB,SAAW,SAAUT,GACxB,GAAIG,GAAO7mB,IACX8jB,GAAYsD,gBAAgBV,EAAI,SAAUW,EAAQC,GAC5CA,IAAWvD,OAAOC,KAAKuD,iBAAiBC,IAC1CX,EAAKQ,OAASA,EACVR,EAAKY,gBAAgBZ,EAAKY,eAAeJ,GAG7C7C,EAAY6C,EAAO7C,UACnBqC,EAAKrC,UAAY6C,EAAO7C,UACxBZ,EAAUyD,EAAOK,SAASC,KAC1Bd,EAAKa,SAAWA,SAChBb,EAAKF,oBAEDE,EAAKe,kBAAkBf,EAAKe,iBAAiBN,GACjDT,EAAKlB,WAAW,yDAA2D2B,OAKjFtnB,KAAK6nB,QAAU,SAAUvN,GACvBqJ,EAAQrJ,EACRta,KAAK8lB,sBAGP9lB,KAAK6nB,QAAQhE,EAAYzL,MAAQ,IAChC,WAODzT,EAASmjB,gBAAkB,iDAO3BnjB,EAASojB,WACPC,KAAMrjB,EAASmjB,gBAAkB,kBACjCG,MAAOtjB,EAASmjB,gBAAkB,eAClCI,gBAAiBvjB,EAASmjB,gBAAkB,iBAC5CK,gBAAiBxjB,EAASmjB,gBAAkB,sBAC5CM,UAAWzjB,EAASmjB,gBAAkB,iBACtCO,WAAY1jB,EAASmjB,gBAAkB,YACvCQ,UAAW3jB,EAASmjB,gBAAkB,YACtCS,YAAa5jB,EAASmjB,gBAAkB,mBACxCU,QAAS7jB,EAASmjB,gBAAkB,cACpCW,aAAc9jB,EAASmjB,gBAAkB,oBACzCY,MAAO/jB,EAASmjB,gBAAkB,YAClCa,cAAehkB,EAASmjB,gBAAkB,qBAC1Cc,aAAcjkB,EAASmjB,gBAAkB,4BAEvC,WASJnjB,EAASkkB,UAEPnX,MAAO,EAEPoX,kBAAmB,GASrBnkB,EAASokB,OAGPC,QAAS,EAGTC,OAAQ,EAGRC,UAAW,EAGXC,OAAQ,MAGN,WASJxkB,EAAS+K,SAET/K,EAAS+K,MAAM0Z,oBAAsB,WACnC,QAAOze,SAAS,gBAAkBA,SAAUA,OAAOxB,UAAUkgB,sBAE3D,WAQJ1kB,EAAS+K,MAAM4Z,eAWf3kB,EAAS+K,MAAM4Z,YAAY7hB,KAAO,SAAUmf,EAAK3kB,EAAQyjB,EAAYG,GAmCnE,QAAS0D,KACPC,EAAWC,gBAAgBC,EAAMzjB,KACjChE,GAAUA,EAAOynB,GApCnB,GAAIC,GAAQC,EAASC,EAAiBC,EAAMN,EAAYE,EAAOK,CAG/D,KAAK,GAAIC,KAAYrlB,GAASojB,UACxBpjB,EAASojB,UAAUkC,eAAeD,IACxCpD,IAAQjiB,EAASojB,UAAWiC,KACxBD,EAAYC,EAOhB,YAAetf,MAFfif,EAASjlB,EAAA,MAAYe,IAAIskB,GAAanD,KAGhC3kB,GACFioB,WAAW,WACLxE,GACFA,GAAaF,OAAQ,EAAGC,MAAO,IAGjCxjB,EAAO0nB,IACN,GAGEA,IAITH,EAAa7e,OAAOwf,KAAOxf,OAAOyf,UAClCV,EAAQ/f,SAAS0gB,gBAAgB,+BAAgC,OAGjE3lB,EAAA,MAAY4E,IAAIygB,GAAanD,EAAK8C,GAOL,IAAzB9C,EAAIle,QAAQ,UACdghB,EAAMlkB,iBAAiB,OAAQ+jB,GAAe,GAC9CG,EAAMzjB,IAAM2gB,EACL8C,IAGTA,EAAM1jB,gBAAmC0E,KAArB1K,KAAKgG,YAA4BhG,KAAKgG,YAAc,GAExE4jB,EAAU,GAAIU,gBACdV,EAAQW,KAAK,MAAO3D,GAAK,GACzBgD,EAAQY,aAAe,cACvBZ,EAAQa,WAAa,SAAUvZ,GACzBA,EAAMwZ,kBACRhF,GAAcA,GAAaF,OAAQtU,EAAMsU,OAAQC,MAAOvU,EAAMuU,SAGlEmE,EAAQe,UAAY,SAAUzZ,GAC5B2Y,EAAkB,GAAIe,YAAW5qB,KAAK6qB,UACtCf,EAAO,GAAIgB,OAAOjB,IAElBH,EAAMlkB,iBAAiB,OAAQ+jB,GAAe,GAC9CG,EAAMzjB,IAAMujB,EAAWuB,gBAAgBjB,QAGzCF,GAAQoB,KAAK,SAIftmB,EAAA,MAAY4M,SAAU,KAClB,WAQJ3M,EAAS+K,MAAMub,iBAUftmB,EAAS+K,MAAMub,cAAcxjB,KAAO,SAAUmf,EAAK3kB,EAAQyjB,EAAYG,GACrE,GAAI3E,GAAU,GAAIxc,GAAA,OASlB,OAPAC,GAAS+K,MAAM4Z,YAAY7hB,KAAKmf,EAAK,SAAU8C,GAC7CxI,EAAQwI,MAAQA,EAChBxI,EAAQgK,aAAc,EAEtBjpB,GAAUA,EAAOif,IAChBwE,EAAYG,GAER3E,MAEL,WAQJvc,EAAS+K,MAAMyb,qBAUfxmB,EAAS+K,MAAMyb,kBAAkB1jB,KAAO,SAAU2jB,EAAMnpB,EAAQyjB,EAAYG,GAC1E,GAAI3E,GAASsE,EAAQa,EAAUgF,EAAKC,CAwCpC,OAtCApK,GAAU,GAAIxc,GAAA,gBAEd8gB,EAAS,EACTa,KACAgF,KAEAD,EAAKjJ,IAAI,SAAUyE,EAAK2E,GACtB5mB,EAAS+K,MAAM4Z,YAAY7hB,KAAKmf,EAAK,SAAU8C,GAC7CxI,EAAQsK,OAAQD,GAAU7B,EAIX,MAFflE,IAGEtE,EAAQgK,aAAc,EAEtBjpB,GAAUA,EAAOif,KAElB,SAAUhQ,GACXmV,EAAUkF,IAAY/F,OAAQtU,EAAMsU,OAAQC,MAAOvU,EAAMuU,OAEzD4F,EAAI7F,OAAS,EACb6F,EAAI5F,MAAQ,EACZ6F,EAAW,CAEX,KAAK,GAAIpsB,KAAKmnB,GACZiF,IACAD,EAAI7F,QAAUa,EAAUnnB,GAAIsmB,OAC5B6F,EAAI5F,OAASY,EAAUnnB,GAAIumB,KAGzB6F,GAAW,IACbD,EAAI5F,MAAQ4F,EAAI5F,MAAQ6F,EAAW,GAGrC5F,GAAcA,EAAW2F,IACxBxF,KAGE3E,MAQXvc,EAAS8mB,qBAEPC,UAEEC,UAActpB,MAAO,GAAIqC,GAAA,SACzBknB,YAAgBvpB,MAAO,GACvBwpB,WAAexpB,MAAO,GAAIqC,GAAA,SAC1B0T,MAAU/V,MAAO,IAInBypB,cAEE,oBAEA,gBAEA,YACA,uCAEA,KAEAC,KAAK,MAEPC,gBAEE,8BACA,4BACA,0BACA,sBAEA,oBAEA,sCAEA,eAEA,qCAEA,qDAEA,kEACA,sEAEA,4DAEA,wBACA,uDACA,kCACA,KAEA,kDAEA,KAEAD,KAAK,OAEN,WASDpnB,EAASsnB,SAAW,SAAUtO,EAAUuE,GACtCxd,EAAA,KAAWmI,KAAK7M,MAEhBA,KAAK6B,KAAO,WAEZ7B,KAAKksB,gBAAkB,EACvBlsB,KAAKmsB,iBAAmB,EACxBnsB,KAAKosB,mBAAqB,EAC1BpsB,KAAKqsB,iBAAmB,EACxBrsB,KAAKssB,sBAAwB,EAE7BtsB,KAAKusB,kBAAoB,IAEzBvsB,KAAKwsB,oBAAsB,IAE3BxsB,KAAKysB,cAAY/hB,GAEjB1K,KAAKwlB,QAAS,EAEdxlB,KAAK0sB,eAEL1sB,KAAK2sB,mBAAoB,EAEzB3sB,KAAK4sB,oBAAkBliB,GACvB1K,KAAK6sB,sBAAoBniB,GAEzB1K,KAAK2d,SAAWA,EAEhB3d,KAAKkiB,SAAWA,EAChBliB,KAAKkiB,SAAS4K,KAAOpoB,EAAA,WACrB1E,KAAKkiB,SAAS6K,SAAU,EAExB/sB,KAAKoW,MAAMjD,IAAM,EAEjBnT,KAAKgtB,kBAAoB,GAAIhjB,GAAMe,MAAM/K,MAAMuB,MAAOvB,KAAKusB,kBAAoB,GAE/EvsB,KAAKwF,iBAAiB,OAAQxF,KAAKitB,OAAO1kB,KAAKvI,OAC/CA,KAAKwF,iBAAiB,qBAAsBxF,KAAKktB,aAAa3kB,KAAKvI,OACnEA,KAAKwF,iBAAiB,QAASxF,KAAKmtB,QAAQ5kB,KAAKvI,OAEjDA,KAAKotB,oBAGPzoB,EAASsnB,SAASnR,UAAY3W,IAAcO,EAAA,KAAWoW,WAEvDnW,EAASsnB,SAASnR,UAAUC,YAAcpW,EAASsnB,SAQnDtnB,EAASsnB,SAASnR,UAAUxR,IAAM,SAAU0B,GAC1C,GAAI6F,GAAOwc,CAIX,IAFAxc,EAAQ7Q,KAEJ0N,UAAUlG,OAAS,EAAG,CACxB,IAAK,GAAItI,GAAI,EAAGA,EAAIwO,UAAUlG,OAAQtI,IACpCc,KAAKsJ,IAAIoE,UAAWxO,GAGtB,OAAOc,MAILgL,YAAkBrG,GAAS2oB,UAC7BD,EAAiBriB,EAEbA,EAAOrF,gBACT3F,KAAKysB,WAAazhB,EAAOrF,eAAgB9D,KAAM,qBAAsB4qB,UAAWzsB,KAAKysB,YAErFzhB,EAAOrF,eAAgB9D,KAAM,0BAC3B0rB,OAAQ,SAAUvL,EAAQlb,EAAUyG,GAQnCsD,EAAMlL,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,qBAAsBC,MAAQxL,EAAQlb,EAAUyG,WAKpH8f,EAAiB,GAAI3oB,GAAA,SACrB2oB,EAAejX,MAAMjD,GAAK,EAC1Bka,EAAeI,kBAAmB,EAClCJ,EAAe/jB,IAAI0B,IAGrBtG,EAAA,SAAeoW,UAAUxR,IAAIuD,KAAK7M,KAAMqtB,IAG1C1oB,EAASsnB,SAASnR,UAAUrT,KAAO,WACjCzH,KAAKiC,UAQP0C,EAASsnB,SAASnR,UAAUqS,QAAU,SAAUjc,GAC1CA,EAAMwc,YAA0C,IAA5Bxc,EAAMwc,WAAWlmB,QACvCxH,KAAK2tB,SAAS,SAAU3iB,GAMtBA,EAAOrF,eAAgB9D,KAAM,eAUnC8C,EAASsnB,SAASnR,UAAUoS,aAAe,SAAUM,GACnD,GAAIf,EAEAe,aAAgBI,aAClBnB,EAAYe,EACHA,GAAQA,EAAKf,YACtBA,EAAYe,EAAKf,WAGfA,IACFzsB,KAAK6tB,SAASC,QAAQ,SAAUC,GAC1BA,YAAiBppB,GAAS2oB,UAAYS,EAAMpoB,eAO9CooB,EAAMpoB,eAAgB9D,KAAM,qBAAsB4qB,UAAWA,MAIjEzsB,KAAKysB,UAAYA,IAQrB9nB,EAASsnB,SAASnR,UAAU7Y,OAAS,WACnCjC,KAAKwlB,QAAS,EAOdxlB,KAAK2F,eAAgB9D,KAAM,UAO7B8C,EAASsnB,SAASnR,UAAU4K,WAAa,SAAUW,GAOjDrmB,KAAK2F,eAAgB9D,KAAM,WAAYwkB,SAAUA,KAOnD1hB,EAASsnB,SAASnR,UAAU+K,QAAU,WAMpC7lB,KAAK2F,eAAgB9D,KAAM,WAO7B8C,EAASsnB,SAASnR,UAAUkT,aAAe,WAezC,MAZIrjB,QAAOsjB,YAAc,IACXjuB,KAAKmsB,iBACRxhB,OAAOsjB,WAAa,KAAOtjB,OAAOsjB,YAAc,KAC7CjuB,KAAKosB,mBACRzhB,OAAOsjB,WAAa,MAAQtjB,OAAOsjB,YAAc,KAC9CjuB,KAAKqsB,iBACR1hB,OAAOsjB,WAAa,KACjBjuB,KAAKssB,sBAELtsB,KAAKksB,iBAUrBvnB,EAASsnB,SAASnR,UAAUoT,cAAgB,SAAUhN,GACpDlhB,KAAKkiB,SAASC,IAAMjB,EAEpBlhB,KAAKkiB,SAASgJ,aAAc,GAS9BvmB,EAASsnB,SAASnR,UAAUqT,yBAA2B,SAAUC,EAAWnhB,GAC1EA,MAAmBvC,KAAVuC,EAAuBA,EAAQ,CAExC,IAAI4D,GAAOkc,CAEXlc,GAAQ7Q,KACR+sB,MAAyBriB,KAAd0jB,EAA2BA,GAAcpuB,KAAK2sB,kBAEzD3sB,KAAK2tB,SAAS,SAAU3iB,GAClBA,YAAkBrG,GAAS2oB,WAC7BP,EAAU/hB,EAAOqjB,KAAKphB,GAASjC,EAAOsjB,KAAKrhB,MAI/CjN,KAAK2sB,kBAAoBI,EAGzB/sB,KAAKgtB,kBAAkBlf,WAAW,WAMhC+C,EAAMlL,eAAgB9D,KAAM,8BAA+BkrB,QAASA,MACnE9f,MAAMA,GAAO9H,SAQlBR,EAASsnB,SAASnR,UAAUyT,gBAAkB,SAAU3H,EAAKxQ,GAC3DpW,KAAK4sB,gBAAkBhG,EACvB5mB,KAAK6sB,kBAAoBzW,GAU3BzR,EAASsnB,SAASnR,UAAU0T,KAAO,SAAU7G,EAAMzP,EAAUuW,EAAYC,GACvE,GAAkBC,GAAMvY,EAAO4Q,EAA3BnW,EAAQ7Q,IAIZ,IAFAA,KAAK+sB,SAAU,GAEV7U,EAGH,WAFAzO,SAAQC,KAAK,+CAOb0M,OADiB1L,KAAf+jB,EACMA,MAC4B/jB,KAA3Bid,EAAKkF,kBACNlF,EAAKkF,kBAEL,IAKR7F,EADE0H,IAEO/G,EAAKiF,gBACRjF,EAAKiF,gBAELjoB,EAASojB,UAAUE,OAI3B0G,EAAO,GAAIhqB,GAAS2oB,SAASlX,EAAO4Q,GACpC2H,EAAKzW,SAAS1E,KAAK0E,GACnByW,EAAKC,WAAajH,EAClBgH,EAAKnpB,iBAAiB,QAAS,WAQ1BqL,EAAMlL,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,cAAeC,KAAM7F,MAGzF3nB,KAAK0sB,YAAYztB,KAAK0vB,GAEtB3uB,KAAKsJ,IAAIqlB,GAET3uB,KAAK+sB,SAAU,GAGjBpoB,EAASsnB,SAASnR,UAAUH,MAAQ,WAClC3a,KAAK6tB,SAASrmB,OAAS,GAGzB7C,EAASsnB,SAASnR,UAAUsS,iBAAmB,WAC7CptB,KAAK6uB,gBAAkB,GAAI7kB,GAAMe,MAAM/K,KAAKkiB,UACzC3U,OAAOvD,EAAM8B,OAAO4C,QAAQH,KAC5BZ,QAAQ,WACP3N,KAAK+sB,SAAU,EACf/sB,KAAKkiB,SAAS6K,SAAU,EAOxB/sB,KAAK2F,eAAgB9D,KAAM,sBAC3B0G,KAAKvI,OAETA,KAAK8uB,iBAAmB,GAAI9kB,GAAMe,MAAM/K,KAAKkiB,UAC1C3U,OAAOvD,EAAM8B,OAAO4C,QAAQH,KAC5BT,WAAW,WACV9N,KAAK+sB,SAAU,EACf/sB,KAAKkiB,SAAS6K,SAAU,EAOxB/sB,KAAK2F,eAAgB9D,KAAM,oBAC3B0G,KAAKvI,OAETA,KAAK+uB,gBAAkB,GAAI/kB,GAAMe,MAAM/K,MACpCuN,OAAOvD,EAAM8B,OAAO4C,QAAQH,KAC5BT,WAAW,WAMV9N,KAAK2F,eAAgB9D,KAAM,8BAC3B0G,KAAKvI,OACNmF,QAEHnF,KAAKgvB,gBAAkB,GAAIhlB,GAAMe,MAAM/K,MACpCuN,OAAOvD,EAAM8B,OAAO4C,QAAQH,MAOjC5J,EAASsnB,SAASnR,UAAUmS,OAAS,SAAUnmB,GAC7CA,EAAWA,GAAY,EAAIA,EAAW9G,KAAKusB,kBAE3CvsB,KAAK8uB,iBAAiB1pB,OACtBpF,KAAK6uB,gBACFttB,IAAK0tB,QAAS,GAAKnoB,GACnBgH,WAAW,WACV9N,KAAKmuB,0BAAyB,EAAMrnB,EAAW,GAO/C9G,KAAK2F,eAAgB9D,KAAM,yBAC3B0G,KAAKvI,OACNmF,SAMLR,EAASsnB,SAASnR,UAAUoU,QAAU,SAAUpoB,GAC9CA,EAAWA,GAAY,EAAIA,EAAW9G,KAAKusB,kBAE3CvsB,KAAK6uB,gBAAgBzpB,OACrBpF,KAAK8uB,iBAAiBvtB,IAAK0tB,QAAS,GAAKnoB,GAAU3B,SAQrDR,EAASsnB,SAASnR,UAAUqU,QAAU,WACpC,GAAIroB,GAAW9G,KAAKusB,iBAEpBvsB,MAAKgvB,gBAAgB5pB,OACrBpF,KAAK+uB,gBACFxtB,MAAOuF,GACP6G,QAAQ,WAMP3N,KAAK2F,eAAgB9D,KAAM,0BAEvB7B,KAAKwlB,OACPxlB,KAAKitB,OAAOnmB,GAEZ9G,KAAKyH,QAEPc,KAAKvI,OACNmF,QAOHnF,KAAK2F,eAAgB9D,KAAM,WAO7B8C,EAASsnB,SAASnR,UAAUsU,QAAU,WACpC,GAAItoB,GAAW9G,KAAKusB,iBAEpBvsB,MAAK+uB,gBAAgB3pB,OACrBpF,KAAKgvB,gBACFztB,MAAOuF,GACP6G,QAAQ,WAMP3N,KAAK2F,eAAgB9D,KAAM,0BAE3B7B,KAAKkvB,QAAQpoB,GACb9G,KAAKmuB,0BAAyB,IAC9B5lB,KAAKvI,OACNmF,QAOHnF,KAAK2F,eAAgB9D,KAAM,WAM7B8C,EAASsnB,SAASnR,UAAUoC,QAAU,WAWpC,QAASmS,GAAkBrkB,GACzB,IAAK,GAAI9L,GAAI8L,EAAO6iB,SAASrmB,OAAS,EAAGtI,GAAK,EAAGA,IAC/CmwB,EAAiBrkB,EAAO6iB,SAAS3uB,IACjC8L,EAAOX,OAAOW,EAAO6iB,SAAS3uB,GAG5B8L,aAAkBrG,GAAS2oB,UAC7BtiB,EAAOkS,UAGTlS,EAAO2S,UAAY3S,EAAO2S,SAAST,UACnClS,EAAOkX,UAAYlX,EAAOkX,SAAShF,UAdpCld,KAAK2F,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,oBAAqBC,KAAMxtB,OAiB1FqvB,EAAiBrvB,MAEbA,KAAK0iB,QACP1iB,KAAK0iB,OAAOrY,OAAOrK,UAGnB,WASJ2E,EAAS2qB,cAAgB,SAAU5F,EAAOnP,GACxCA,EAASA,GAAU,GAEnB,IAAIoD,GAAW,GAAIjZ,GAAA,eAAqB6V,EAAQ,GAAI,IAClD2H,EAAW,GAAIxd,GAAA,mBAA0BuqB,QAAS,EAAGM,aAAa,GAEpE5qB,GAASsnB,SAASpf,KAAK7M,KAAM2d,EAAUuE,GAEvCliB,KAAKiG,IAAMyjB,GAGb/kB,EAAS2qB,cAAcxU,UAAY3W,IAAcQ,EAASsnB,SAASnR,WAEnEnW,EAAS2qB,cAAcxU,UAAUC,YAAcpW,EAAS2qB,cAMxD3qB,EAAS2qB,cAAcxU,UAAUrT,KAAO,SAAUxB,GAChDA,EAAMA,GAAOjG,KAAKiG,IAEbA,EAEqB,gBAARA,GAChBtB,EAAS+K,MAAMub,cAAcxjB,KAAKxB,EAAKjG,KAAKiC,OAAOsG,KAAKvI,MAAOA,KAAK0lB,WAAWnd,KAAKvI,MAAOA,KAAK6lB,QAAQtd,KAAKvI,OACpGiG,YAAeupB,mBACxBxvB,KAAKiC,OAAO,GAAIyC,GAAA,QAAcuB,IAJ9BwD,QAAQC,KAAK,2BAYjB/E,EAAS2qB,cAAcxU,UAAU7Y,OAAS,SAAUif,GAClDA,EAAQL,UAAYK,EAAQJ,UAAYpc,EAAA,aAExCwc,EAAQgK,aAAc,EAEtBlrB,KAAKkuB,cAAchN,GAGnBvW,OAAOtF,sBAAsB,WAC3BsF,OAAOtF,sBAAsB,WAC3BV,EAASsnB,SAASnR,UAAU7Y,OAAO4K,KAAK7M,OACxCuI,KAAKvI,QACPuI,KAAKvI,QAGT2E,EAAS2qB,cAAcxU,UAAUH,MAAQ,WACvChW,EAASsnB,SAASnR,UAAUH,MAAM9N,KAAK7M,UAErC,WAWJ2E,EAAS8qB,yBAA2B,SAAUlJ,EAAQhM,GACpD5V,EAAS2qB,cAAcziB,KAAK7M,SAAM0K,GAAW6P,GAE7Cva,KAAKumB,OAASA,EAEdvmB,KAAK0vB,cAAYhlB,GAEjB1K,KAAK2vB,eAAgB,EAErB3vB,KAAK4vB,qBAGPjrB,EAAS8qB,yBAAyB3U,UAAY3W,IAAcQ,EAAS2qB,cAAcxU,WAEnFnW,EAAS8qB,yBAAyB1U,YAAcpW,EAAS8qB,yBAMzD9qB,EAAS8qB,yBAAyB3U,UAAUrT,KAAO,SAAU8e,GAC3DvmB,KAAK2vB,eAAgB,EAErBpJ,EAAUA,GAAUvmB,KAAKumB,WAErBA,GAAUvmB,KAAK0vB,UACjB1vB,KAAK6vB,cAActJ,GAEnBvmB,KAAK0vB,cAOT/qB,EAAS8qB,yBAAyB3U,UAAU8U,kBAAoB,WAC9D,GAAIE,GAASnmB,SAASob,cAAc,SACpC+K,GAAO7pB,IAAM,0CACb6pB,EAAOC,mBAAqB/vB,KAAKgwB,aAAaznB,KAAKvI,MAClD8vB,EAAOG,OAASjwB,KAAKgwB,aAAaznB,KAAKvI,MAExC2J,SAASumB,qBAAqB,QAAQ,GAAGC,YAAYL,IAMvDnrB,EAAS8qB,yBAAyB3U,UAAUkV,aAAe,WACzDhwB,KAAK0vB,UAAY,GAAIlM,GAAQC,YAEzBzjB,KAAK0vB,gBAAoB1vB,KAAK2vB,gBAChC3vB,KAAKyH,QAQT9C,EAAS8qB,yBAAyB3U,UAAUsV,aAAe,WACzD,MAAOpwB,MAAK0vB,WAOd/qB,EAAS8qB,yBAAyB3U,UAAU+U,cAAgB,SAAUtJ,GACpEvmB,KAAK2vB,eAAgB,EAErB3vB,KAAK0vB,UAAUhK,WAAa1lB,KAAK0lB,WAAWnd,KAAKvI,MAEjDA,KAAK0vB,UAAUlJ,eAAiBxmB,KAAKiC,OAAOsG,KAAKvI,MAEjDA,KAAK0vB,UAAU7H,QAAQ7nB,KAAKguB,gBAE5BhuB,KAAK0vB,UAAUjoB,KAAK8e,GAEpBvmB,KAAK0vB,UAAUlK,QAAS,GAO1B7gB,EAAS8qB,yBAAyB3U,UAAU7Y,OAAS,SAAU6iB,GACxD9kB,KAAK0vB,WAEV/qB,EAAS2qB,cAAcxU,UAAU7Y,OAAO4K,KAAK7M,KAAM,GAAI0E,GAAA,QAAcogB,KAGvEngB,EAAS8qB,yBAAyB3U,UAAUH,MAAQ,WAClD3a,KAAK0vB,cAAYhlB,GAEjB/F,EAAS2qB,cAAcxU,UAAUH,MAAM9N,KAAK7M,UAE1C,WASJ2E,EAAS0rB,aAAe,SAAU7E,EAAQ8E,GACxC,GAAIC,GAAQ5S,EAAUuE,CAEtBliB,MAAKwrB,OAASA,MAEd8E,EAAaA,GAAc,IAC3BC,EAASC,KAAKC,MAAMxsB,IAAeS,EAAA,iBAEnCiZ,EAAW,GAAIjZ,GAAA,YAAkB4rB,EAAYA,EAAYA,GACzDpO,EAAW,GAAIxd,GAAA,gBAEbsnB,eAAgBuE,EAAOvE,eACvBF,aAAcyE,EAAOzE,aACrBJ,SAAU6E,EAAO7E,SACjBoB,KAAMpoB,EAAA,WAIRC,EAASsnB,SAASpf,KAAK7M,KAAM2d,EAAUuE,IAGzCvd,EAAS0rB,aAAavV,UAAY3W,IAAcQ,EAASsnB,SAASnR,WAElEnW,EAAS0rB,aAAavV,UAAUC,YAAcpW,EAAS0rB,aAKvD1rB,EAAS0rB,aAAavV,UAAUrT,KAAO,WACrC9C,EAAS+K,MAAMyb,kBAAkB1jB,KAE/BzH,KAAKwrB,OAELxrB,KAAKiC,OAAOsG,KAAKvI,MACjBA,KAAK0lB,WAAWnd,KAAKvI,MACrBA,KAAK6lB,QAAQtd,KAAKvI,QAStB2E,EAAS0rB,aAAavV,UAAU7Y,OAAS,SAAUif,GACjDlhB,KAAKkiB,SAASwJ,SAAd,MAAkCrpB,MAAQ6e,EAE1Cvc,EAASsnB,SAASnR,UAAU7Y,OAAO4K,KAAK7M,UAEtC,WAQJ2E,EAAS+rB,cAAgB,SAAUJ,GACjC,GAAIK,GAAOhsB,EAASojB,UAAUO,SAE9B3jB,GAAS0rB,aAAaxjB,KAAK7M,MAAQ2wB,EAAMA,EAAMA,EAAMA,EAAMA,EAAMA,GAAQL,IAG3E3rB,EAAS+rB,cAAc5V,UAAY3W,IAAcQ,EAAS0rB,aAAavV,WAEvEnW,EAAS+rB,cAAc5V,UAAUC,YAAcpW,EAAS+rB,iBACpD,WAgBJ/rB,EAASisB,cAAgB,SAAU3qB,EAAK4qB,EAAStW,GAC/CA,EAASA,GAAU,GAEnB,IAAIoD,GAAW,GAAIjZ,GAAA,eAAqB6V,EAAQ,GAAI,IAClD2H,EAAW,GAAIxd,GAAA,mBAA0BuqB,QAAS,EAAGM,aAAa,GAEpE5qB,GAASsnB,SAASpf,KAAK7M,KAAM2d,EAAUuE,GAEvCliB,KAAKiG,IAAMA,EACXjG,KAAK6wB,QAAUA,MACf7wB,KAAK6wB,QAAQC,aAA2C,IAA7B9wB,KAAK6wB,QAAQC,YAExC9wB,KAAK+wB,iBAAermB,GACpB1K,KAAKgxB,sBAAoBtmB,GACzB1K,KAAKixB,cAAgB,EAErBjxB,KAAKkxB,MAAQ,oBAAoBhoB,KAAKC,UAAUC,WAChDpJ,KAAKmxB,SAAWnxB,KAAKkxB,OAAS,0CAA0ChoB,KAAKC,UAAUC,WAEvFpJ,KAAKwF,iBAAiB,QAASxF,KAAKoxB,WAAW7oB,KAAKvI,OACpDA,KAAKwF,iBAAiB,mBAAoBxF,KAAKqxB,oBAAoB9oB,KAAKvI,OACxEA,KAAKwF,iBAAiB,eAAgBxF,KAAKsxB,YAAY/oB,KAAKvI,OAC5DA,KAAKwF,iBAAiB,aAAcxF,KAAKuxB,oBAAoBhpB,KAAKvI,QAGpE2E,EAASisB,cAAc9V,UAAY3W,IAAcQ,EAASsnB,SAASnR,WAEnEnW,EAASisB,cAAc7V,YAAcpW,EAASisB,cAQ9CjsB,EAASisB,cAAc9V,UAAUrT,KAAO,SAAUxB,EAAK4qB,GACrD,GAAIhgB,GAAQ7Q,IAEZiG,GAAOA,GAAOjG,KAAKiG,KAAQ,GAC3B4qB,EAAWA,GAAW7wB,KAAK6wB,YAE3B7wB,KAAK+wB,aAAeF,EAAQE,cAAgBpnB,SAASob,cAAc,SAEnE/kB,KAAK+wB,aAAavoB,MAAQqoB,EAAQroB,QAAS,EAC3CxI,KAAK+wB,aAAa3pB,SAAyBsD,KAAjBmmB,EAAQzpB,MAAsBypB,EAAQzpB,KAChEpH,KAAK+wB,aAAatoB,aAAiCiC,KAArBmmB,EAAQpoB,UAA0BooB,EAAQpoB,SACxEzI,KAAK+wB,aAAa/qB,gBAAuC0E,KAAxBmmB,EAAQ7qB,YAA6B6qB,EAAQ7qB,YAAc,YAGxF6qB,EAAQC,cACV9wB,KAAK+wB,aAAaS,aAAa,cAAe,IAC9CxxB,KAAK+wB,aAAaS,aAAa,qBAAsB,IAGvD,IAAIC,GAAe,WACjB5gB,EAAM6U,YAAaF,OAAQ,EAAGC,MAAO,IACrC5U,EAAM6gB,gBAAgB7gB,EAAMkgB,cAExBlgB,EAAMkgB,aAAatoB,UAOrBoI,EAAMlL,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,wBAAyBC,MAAM,IAI5F3c,EAAMsgB,WACJtgB,EAAMkgB,aAAatoB,UAAYoI,EAAMkgB,aAAavoB,MAOpDqI,EAAMlL,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,wBAAyBC,MAAM,IAQ9F3c,EAAMlL,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,wBAAyBC,MAAM,KAIlG3c,EAAM5O,SAWJjC,MAAK+wB,aAAa/pB,WAAa,EACjCyqB,KAEKzxB,KAAK+wB,aAAaY,iBAAiB,UAAUnqB,QAAWxH,KAAK+wB,aAAa9qB,MAC7EjG,KAAK+wB,aAAa9qB,IAAMA,GAG1BjG,KAAK+wB,aAAatpB,QAGpBzH,KAAK+wB,aAAaU,aAAeA,EAEjCzxB,KAAK+wB,aAAaa,aAAe,SAAU1gB,GACzCL,EAAMogB,cAAgBjxB,KAAK8G,UAAY,EAAI9G,KAAKwG,YAAcxG,KAAK8G,SAAW,EAQ9E+J,EAAMlL,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,gBAAiBC,KAAM3c,EAAMogB,iBAG9FjxB,KAAK+wB,aAAavrB,iBAAiB,QAAS,WACrCqL,EAAMggB,QAAQzpB,OACjByJ,EAAMghB,aACNhhB,EAAMlL,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,wBAAyBC,MAAM,OAE/F,IAQL7oB,EAASisB,cAAc9V,UAAU4W,gBAAkB,SAAU7qB,GAC3D,GAAIirB,GAAcd,CAEbnqB,KAELirB,EAAe,GAAIptB,GAAA,aAAmBmC,GACtCirB,EAAajR,UAAYnc,EAAA,aACzBotB,EAAahR,UAAYpc,EAAA,aACzBotB,EAAa/Q,OAASrc,EAAA,UAEtBssB,GAEEnqB,MAAOA,EACPirB,aAAcA,GAIZ9xB,KAAKkxB,OACPrsB,EAAkBgC,GAGpB7G,KAAKkuB,cAAc4D,GAEnB9xB,KAAKgxB,kBAAoBA,IAG3BrsB,EAASisB,cAAc9V,UAAUH,MAAQ,WACvC3a,KAAK+wB,iBAAermB,GAEpB/F,EAASsnB,SAASnR,UAAUH,MAAM9N,KAAK7M,OAOzC2E,EAASisB,cAAc9V,UAAUiX,cAAgB,WAC/C,MAAO/xB,MAAKgxB,kBAAkBnqB,MAAMmB,QAMtCrD,EAASisB,cAAc9V,UAAUwW,YAAc,WACzCtxB,KAAKgxB,mBAAqBhxB,KAAKgxB,kBAAkBnqB,QAC/C7G,KAAK+xB,gBACP/xB,KAAKgxB,kBAAkBnqB,MAAMoB,OAE7BjI,KAAKgxB,kBAAkBnqB,MAAMc,UASnChD,EAASisB,cAAc9V,UAAUyW,oBAAsB,SAAUrgB,GAC3DlR,KAAKgxB,mBAAqBhxB,KAAKgxB,kBAAkBnqB,QAAU9C,IAAamN,EAAM8gB,aAAoC,IAArB9gB,EAAM8gB,aACrGhyB,KAAKgxB,kBAAkBnqB,MAAML,YAAcxG,KAAKgxB,kBAAkBnqB,MAAMC,SAAWoK,EAAM8gB,WAEzFhyB,KAAK2F,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,gBAAiBC,KAAMtc,EAAM8gB,eAO/FrtB,EAASisB,cAAc9V,UAAUmX,UAAY,WACvCjyB,KAAKgxB,mBAAqBhxB,KAAKgxB,kBAAkBnqB,OAAS7G,KAAK+xB,iBACjE/xB,KAAKgxB,kBAAkBnqB,MAAMoB,OAQ/BjI,KAAK2F,eAAgB9D,KAAM,UAM7B8C,EAASisB,cAAc9V,UAAUsW,WAAa,WACxCpxB,KAAKgxB,mBAAqBhxB,KAAKgxB,kBAAkBnqB,QAAU7G,KAAK+xB,iBAClE/xB,KAAKgxB,kBAAkBnqB,MAAMc,QAQ/B3H,KAAK2F,eAAgB9D,KAAM,WAM7B8C,EAASisB,cAAc9V,UAAUuW,oBAAsB,WACjDrxB,KAAK+wB,aAAatoB,WAAazI,KAAKmxB,UACtCnxB,KAAKiyB,YAQLjyB,KAAK2F,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,wBAAyBC,MAAM,MAE7FxtB,KAAKoxB,aAQLpxB,KAAK2F,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,wBAAyBC,MAAM,KAG/FxtB,KAAKuxB,qBAAsBS,WAAYhyB,KAAKixB,iBAM9CtsB,EAASisB,cAAc9V,UAAU+W,WAAa,WACxC7xB,KAAKgxB,mBAAqBhxB,KAAKgxB,kBAAkBnqB,OACnD7G,KAAKuxB,qBAAsBS,WAAY,KAQ3CrtB,EAASisB,cAAc9V,UAAUoX,aAAe,WAC9C,MAAOlyB,MAAKgxB,kBAAkBnqB,MAAM2B,OAMtC7D,EAASisB,cAAc9V,UAAUqX,UAAY,WACvCnyB,KAAKgxB,mBAAqBhxB,KAAKgxB,kBAAkBnqB,QAAU7G,KAAKkyB,iBAClElyB,KAAKgxB,kBAAkBnqB,MAAM2B,OAAQ,GAGvCxI,KAAK2F,eAAgB9D,KAAM,kBAM7B8C,EAASisB,cAAc9V,UAAUsX,YAAc,WACzCpyB,KAAKgxB,mBAAqBhxB,KAAKgxB,kBAAkBnqB,OAAS7G,KAAKkyB,iBACjElyB,KAAKgxB,kBAAkBnqB,MAAM2B,OAAQ,GAGvCxI,KAAK2F,eAAgB9D,KAAM,kBAM7B8C,EAASisB,cAAc9V,UAAUuX,gBAAkB,WACjD,MAAOryB,MAAKgxB,kBAAkBnqB,OAMhClC,EAASisB,cAAc9V,UAAUoC,QAAU,WACzCld,KAAK6xB,aACL7xB,KAAKoxB,aAELpxB,KAAKuJ,oBAAoB,QAASvJ,KAAKoxB,WAAW7oB,KAAKvI,OACvDA,KAAKuJ,oBAAoB,mBAAoBvJ,KAAKqxB,oBAAoB9oB,KAAKvI,OAC3EA,KAAKuJ,oBAAoB,eAAgBvJ,KAAKsxB,YAAY/oB,KAAKvI,OAC/DA,KAAKuJ,oBAAoB,aAAcvJ,KAAKuxB,oBAAoBhpB,KAAKvI,OAErE2E,EAASsnB,SAASnR,UAAUoC,QAAQrQ,KAAK7M,UAEvC,WAQJ2E,EAAS2tB,cAAgB,SAAU/X,GACjCA,EAASA,GAAU,GAEnB,IAAIoD,GAAW,GAAIjZ,GAAA,SACjBwd,EAAW,GAAIxd,GAAA,mBACb6tB,MAAO,EAAUtD,QAAS,EAAGM,aAAa,GAG9C5qB,GAASsnB,SAASpf,KAAK7M,KAAM2d,EAAUuE,IAGzCvd,EAAS2tB,cAAcxX,UAAY3W,IAAcQ,EAASsnB,SAASnR,WAEnEnW,EAAS2tB,cAAcxX,UAAUC,YAAcpW,EAAS2tB,iBACpD,WASJ3tB,EAAS6tB,aAAe,SAAU3wB,EAAMC,EAAQmhB,EAAMwP,GACpD5wB,EAAOA,GAAQ,QAEN,UAATA,GAAoB8C,EAAS2qB,cAAcziB,KAAK7M,KAAM8B,EAAQmhB,GAE9DjjB,KAAKijB,KAAOA,GAAQ,IACpBjjB,KAAKyyB,MAAQA,GAAS,GACtBzyB,KAAK0yB,IAAM,KACX1yB,KAAKsW,QAELtW,KAAK2d,SAAW3d,KAAK2yB,iBACrB3yB,KAAKkiB,SAAWliB,KAAK4yB,eAAe5yB,KAAKijB,MAEzCjjB,KAAK6yB,UAAW,EAChB7yB,KAAK8yB,UAAY,GAAIpuB,GAAA,QAErB1E,KAAK+yB,MAAQ,GAAIruB,GAAA,WACjB1E,KAAKgzB,MAAQ,GAAItuB,GAAA,WACjB1E,KAAKizB,QAAU,GAAIvuB,GAAA,WACnB1E,KAAKkzB,UAAY,GAAIxuB,GAAA,WAErB1E,KAAKmzB,QAAU,GAAIzuB,GAAA,QAAc,EAAG,EAAG,GACvC1E,KAAKozB,QAAU,GAAI1uB,GAAA,QAAc,EAAG,EAAG,GAEvC1E,KAAKwF,iBAAiB,gBAAiBxF,KAAKqzB,iBAG9C1uB,EAAS6tB,aAAa1X,UAAY3W,IAAcQ,EAAS2qB,cAAcxU,WAEvEnW,EAAS6tB,aAAa1X,UAAUC,YAAcpW,EAAS6tB,aAEvD7tB,EAAS6tB,aAAa1X,UAAU6X,eAAiB,WAC/C,MAAO,IAAIjuB,GAAA,cAAoB1E,KAAKijB,KAAMjjB,KAAKijB,KAAOjjB,KAAKyyB,QAG7D9tB,EAAS6tB,aAAa1X,UAAU8X,eAAiB,SAAU3P,GACzD,GAAIyI,GAAW/mB,EAAS8mB,oBAAoBC,QAG5C,OAFAA,GAAStT,KAAK/V,MAAQ4gB,EAEf,GAAIve,GAAA,gBAETgnB,SAAUA,EACVI,aAAcnnB,EAAS8mB,oBAAoBK,aAC3CE,eAAgBrnB,EAAS8mB,oBAAoBO,kBAKjDrnB,EAAS6tB,aAAa1X,UAAUwY,oBAAsB,WACpDtzB,KAAKysB,UAAUjnB,iBAAiB,YAAaxF,KAAKiR,YAAY1I,KAAKvI,OAAO,GAC1EA,KAAKysB,UAAUjnB,iBAAiB,YAAaxF,KAAK0S,YAAYnK,KAAKvI,OAAO,GAC1EA,KAAKysB,UAAUjnB,iBAAiB,UAAWxF,KAAK2S,UAAUpK,KAAKvI,OAAO,GACtEA,KAAKysB,UAAUjnB,iBAAiB,aAAcxF,KAAKiR,YAAY1I,KAAKvI,OAAO,GAC3EA,KAAKysB,UAAUjnB,iBAAiB,YAAaxF,KAAK0S,YAAYnK,KAAKvI,OAAO,GAC1EA,KAAKysB,UAAUjnB,iBAAiB,WAAYxF,KAAK2S,UAAUpK,KAAKvI,OAAO,GACvEA,KAAKysB,UAAUjnB,iBAAiB,aAAcxF,KAAKkU,aAAa3L,KAAKvI,OAAO,GAC5EA,KAAKysB,UAAUjnB,iBAAiB,iBAAkBxF,KAAKkU,aAAa3L,KAAKvI,OAAO,GAChFA,KAAKysB,UAAUjnB,iBAAiB,cAAexF,KAAKuzB,cAAchrB,KAAKvI,OAAO,IAGhF2E,EAAS6tB,aAAa1X,UAAU0Y,sBAAwB,WACtDxzB,KAAKysB,UAAUljB,oBAAoB,YAAavJ,KAAKiR,YAAY1I,KAAKvI,OAAO,GAC7EA,KAAKysB,UAAUljB,oBAAoB,YAAavJ,KAAK0S,YAAYnK,KAAKvI,OAAO,GAC7EA,KAAKysB,UAAUljB,oBAAoB,UAAWvJ,KAAK2S,UAAUpK,KAAKvI,OAAO,GACzEA,KAAKysB,UAAUljB,oBAAoB,aAAcvJ,KAAKiR,YAAY1I,KAAKvI,OAAO,GAC9EA,KAAKysB,UAAUljB,oBAAoB,YAAavJ,KAAK0S,YAAYnK,KAAKvI,OAAO,GAC7EA,KAAKysB,UAAUljB,oBAAoB,WAAYvJ,KAAK2S,UAAUpK,KAAKvI,OAAO,GAC1EA,KAAKysB,UAAUljB,oBAAoB,aAAcvJ,KAAKkU,aAAa3L,KAAKvI,OAAO,GAC/EA,KAAKysB,UAAUljB,oBAAoB,iBAAkBvJ,KAAKkU,aAAa3L,KAAKvI,OAAO,GACnFA,KAAKysB,UAAUljB,oBAAoB,cAAevJ,KAAKuzB,cAAchrB,KAAKvI,OAAO,IAGnF2E,EAAS6tB,aAAa1X,UAAU7J,YAAc,SAAUC,GACtD,GAAIiC,GAAKjC,EAAMc,SAAW,EAAKd,EAAMc,QAAUd,EAAMyE,QAAS,GAAI3D,QAC9DnJ,EAAKqI,EAAMe,SAAW,EAAKf,EAAMe,QAAUf,EAAMyE,QAAS,GAAI1D,OAIlE,QAFkBf,EAAMyE,SAAWzE,EAAMyE,QAAQnO,QAAW,GAG1D,IAAK,GAEHxH,KAAK6yB,UAAW,EAChB7yB,KAAK8yB,UAAUptB,IAAIyN,EAAGtK,EAEtB,MAEF,KAAK,GAEH,GAAImN,GAAK9E,EAAMyE,QAAS,GAAIE,MAAQ3E,EAAMyE,QAAS,GAAIE,MACnDI,EAAK/E,EAAMyE,QAAS,GAAIG,MAAQ5E,EAAMyE,QAAS,GAAIG,MACnDiD,EAAWlK,KAAKO,KAAK4G,EAAKA,EAAKC,EAAKA,EACxCjW,MAAK8yB,UAAUW,cAAgB1a,EASnC/Y,KAAK0zB,oBAGP/uB,EAAS6tB,aAAa1X,UAAUpI,YAAc,SAAUxB,GACtD,GAAIiC,GAAKjC,EAAMc,SAAW,EAAKd,EAAMc,QAAUd,EAAMyE,QAAS,GAAI3D,QAC9DnJ,EAAKqI,EAAMe,SAAW,EAAKf,EAAMe,QAAUf,EAAMyE,QAAS,GAAI1D,OAIlE,QAFkBf,EAAMyE,SAAWzE,EAAMyE,QAAQnO,QAAW,GAG1D,IAAK,GAEH,GAAImsB,GAAqD,GAA5CjvB,EAAA,KAAWsX,SAAS7I,EAAInT,KAAK8yB,UAAU3f,GAChDygB,EAAqD,GAA5ClvB,EAAA,KAAWsX,SAASnT,EAAI7I,KAAK8yB,UAAUjqB,EAEhD7I,MAAK6yB,WACP7yB,KAAK+yB,MAAMlW,iBAAiB7c,KAAKozB,QAASO,GAC1C3zB,KAAKgzB,MAAMnW,iBAAiB7c,KAAKmzB,QAASS,GAC1C5zB,KAAKizB,QAAQnW,SAAS9c,KAAK+yB,OAAOjW,SAAS9c,KAAKgzB,OAChDhzB,KAAK8yB,UAAUptB,IAAIyN,EAAGtK,GAGxB,MAEF,KAAK,GAEH,GACImN,IADWhW,KAAKkiB,SAASwJ,SACpBxa,EAAMyE,QAAS,GAAIE,MAAQ3E,EAAMyE,QAAS,GAAIE,OACnDI,EAAK/E,EAAMyE,QAAS,GAAIG,MAAQ5E,EAAMyE,QAAS,GAAIG,MACnDiD,EAAWlK,KAAKO,KAAK4G,EAAKA,EAAKC,EAAKA,EAExCjW,MAAK6zB,aAAa7zB,KAAK8yB,UAAUW,cAAgB1a,KAUvDpU,EAAS6tB,aAAa1X,UAAUnI,UAAY,SAAUzB,GACpDlR,KAAK6yB,UAAW,GAGlBluB,EAAS6tB,aAAa1X,UAAU5G,aAAe,SAAUhD,GACvDA,EAAMK,iBACNL,EAAMiD,iBAEN,IAAIC,GAAQ,MAEa1J,KAArBwG,EAAMmD,WACRD,EAAQlD,EAAMmD,eACY3J,KAAjBwG,EAAMoD,SACfF,GAASlD,EAAMoD,QAGjBtU,KAAK6zB,aAAazf,GAClBpU,KAAK0zB,oBAGP/uB,EAAS6tB,aAAa1X,UAAU+Y,aAAe,SAAUzf,GACvD,GAAIsX,GAAW1rB,KAAKkiB,SAASwJ,SACzBoI,EAAyB,GAAZ9zB,KAAKijB,KAClB8Q,EAAyB,GAAZ/zB,KAAKijB,IAEtByI,GAAStT,KAAK/V,OAAS+R,EAEnBsX,EAAStT,KAAK/V,OAASyxB,EACzBpI,EAAStT,KAAK/V,MAAQyxB,EACbpI,EAAStT,KAAK/V,OAAS0xB,IAChCrI,EAAStT,KAAK/V,MAAQ0xB,IAI1BpvB,EAAS6tB,aAAa1X,UAAU4Y,iBAAmB,WACjD1zB,KAAKsW,QAAU3L,OAAOtF,sBAAsBrF,KAAK0zB,iBAAiBnrB,KAAKvI,OAEvEA,KAAKkzB,UAAUc,MAAMh0B,KAAKizB,QAAS,IACnCjzB,KAAKkiB,SAASwJ,SAASG,UAAUxpB,MAAM4xB,2BAA2Bj0B,KAAKkzB,YAElElzB,KAAK6yB,UAAY,EAAM7yB,KAAKkzB,UAAUlb,QAAQ0C,IAAI1a,KAAKizB,SAAWjzB,KAAK0yB,KAC1E/nB,OAAOrF,qBAAqBtF,KAAKsW,UAIrC3R,EAAS6tB,aAAa1X,UAAUH,MAAQ,WACtC3a,KAAKizB,QAAQvtB,IAAI,EAAG,EAAG,EAAG,GAC1B1F,KAAKkzB,UAAUxtB,IAAI,EAAG,EAAG,EAAG,GAC5B1F,KAAK0zB,oBAGP/uB,EAAS6tB,aAAa1X,UAAU7Y,OAAS,WACvCjC,KAAKkiB,SAASwJ,SAASE,WAAWvpB,MAAQrC,KAAKysB,UAAUrZ,YAAcpT,KAAKysB,UAAUlZ,aAEtFvT,KAAKszB,sBACLtzB,KAAK0zB,mBAEL1zB,KAAK2F,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,oBAGhE5oB,EAAS6tB,aAAa1X,UAAUsU,QAAU,WACxCpvB,KAAKwzB,wBAELxzB,KAAK2F,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,gBAAiBC,KAAM7oB,EAASkkB,SAASnX,QAEvG/G,OAAOrF,qBAAqBtF,KAAKsW,SAEjC3R,EAASsnB,SAASnR,UAAUsU,QAAQviB,KAAK7M,OAG3C2E,EAAS6tB,aAAa1X,UAAUuY,eAAiB,WAC/CrzB,KAAKkiB,SAASwJ,SAASE,WAAWvpB,MAAQrC,KAAKysB,UAAUrZ,YAAcpT,KAAKysB,UAAUlZ,cAGxF5O,EAAS6tB,aAAa1X,UAAUyY,cAAgB,WAC9CvzB,KAAK6yB,UAAW,MAEd,WAQJluB,EAASuvB,kBAAoB,SAAUpyB,EAAQmhB,EAAMwP,GACnD9tB,EAAS6tB,aAAa3lB,KAAK7M,KAAM,QAAS8B,EAAQmhB,EAAMwP,IAG1D9tB,EAASuvB,kBAAkBpZ,UAAY3W,IAAcQ,EAAS6tB,aAAa1X,WAE3EnW,EAASuvB,kBAAkBpZ,UAAUC,YAAcpW,EAASuvB,kBAE5DvvB,EAASuvB,kBAAkBpZ,UAAU7Y,OAAS,SAAUif,GACtDlhB,KAAKkuB,cAAchN,GAEnBvc,EAAS2qB,cAAcxU,UAAU7Y,OAAO4K,KAAK7M,KAAMkhB,GACnDvc,EAAS6tB,aAAa1X,UAAU7Y,OAAO4K,KAAK7M,OAG9C2E,EAASuvB,kBAAkBpZ,UAAUoT,cAAgB,SAAUhN,GAC7DA,EAAQL,UAAYK,EAAQJ,UAAYpc,EAAA,aAExC1E,KAAKkiB,SAASwJ,SAAd,SAAqCrpB,MAAQ6e,MAE3C,WAWJvc,EAASwvB,QAAU,SAAU5B,EAAO6B,EAAYC,EAAcC,EAAeC,EAAWC,GACtFjC,EAAQA,GAAS,SAEjBvyB,KAAKo0B,eAA2B1pB,IAAd0pB,GAA0BA,EAE5Cp0B,KAAKu0B,UAAYA,GAAa,KAC9Bv0B,KAAKw0B,kBAAoBA,GAAqB,GAC9Cx0B,KAAKy0B,cAAgBz0B,KAAKu0B,UAAYv0B,KAAKw0B,kBAE3Cx0B,KAAK00B,KAAO,EACZ10B,KAAK20B,SAAW,EAChB30B,KAAKsnB,OAELtnB,KAAK40B,UAAY,GAAIlwB,GAAA,QAAc,GAAK,GAAK,GAC7C1E,KAAK60B,WAAa,GAAInwB,GAAA,QAAc,EAAG,GAAK,GAE5C1E,KAAK80B,eAAgB,EACrB90B,KAAKq0B,aAAeA,GAAgB1vB,EAASojB,UAAUQ,YACvDvoB,KAAKs0B,cAAgBA,GAAiB3vB,EAASojB,UAAUa,aACzD5oB,KAAK+0B,YAAc,GAAIrwB,GAAA,QACvB1E,KAAKg1B,aAAe,GAAItwB,GAAA,QAExBA,EAAA,OAAamI,KAAK7M,KAAM,GAAI0E,GAAA,gBAAuB6tB,MAAOA,EAAO0C,WAAW,KAE5Ej1B,KAAKk1B,YAAc,EACnBl1B,KAAKm1B,UAAY,EAEjBn1B,KAAK+sB,SAAU,EACf/sB,KAAKo1B,YAAc,GACnBp1B,KAAKq1B,QAGLr1B,KAAKs1B,aAAat1B,KAAK00B,OAGzB/vB,EAASwvB,QAAQrZ,UAAY3W,IAAcO,EAAA,OAAaoW,WAExDnW,EAASwvB,QAAQrZ,UAAUC,YAAcpW,EAASwvB,QAKlDxvB,EAASwvB,QAAQrZ,UAAUuT,KAAO,WAChCruB,KAAK+sB,SAAU,GAMjBpoB,EAASwvB,QAAQrZ,UAAUwT,KAAO,WAChCtuB,KAAK+sB,SAAU,GAMjBpoB,EAASwvB,QAAQrZ,UAAUya,aAAe,WACxCv1B,KAAK+0B,YAAcpwB,EAAS+K,MAAMub,cAAcxjB,KAAKzH,KAAKq0B,cAC1Dr0B,KAAKg1B,aAAerwB,EAAS+K,MAAMub,cAAcxjB,KAAKzH,KAAKs0B,eAE3Dt0B,KAAKkiB,SAASC,IAAMniB,KAAK+0B,YACzB/0B,KAAKw1B,iBAAiBx1B,KAAKg1B,cAC3Bh1B,KAAK80B,eAAgB,GAOvBnwB,EAASwvB,QAAQrZ,UAAU2a,OAAS,SAAUC,GACxC7qB,YAAYvE,MAAQtG,KAAKm1B,WAAan1B,KAAKu0B,WAC7Cv0B,KAAK21B,mBACLD,KACS11B,KAAKo0B,aACdp0B,KAAK41B,eAAe/qB,YAAYvE,OAChCtG,KAAKq1B,QAAU1qB,OAAOtF,sBAAsBrF,KAAKy1B,OAAOltB,KAAKvI,KAAM01B,MAOvE/wB,EAASwvB,QAAQrZ,UAAU+a,WAAa,WACtClrB,OAAOrF,qBAAqBtF,KAAKq1B,SACjCr1B,KAAKq1B,QAAU,MAMjB1wB,EAASwvB,QAAQrZ,UAAU0a,iBAAmB,SAAUtU,GACtDA,EAAQ4U,MAAQpxB,EAAA,eAChBwc,EAAQ/T,OAAOzH,IAAI,EAAI1F,KAAKw0B,kBAAmB,IAOjD7vB,EAASwvB,QAAQrZ,UAAUwa,aAAe,SAAUhO,GAClDtnB,KAAKsnB,OAASA,EAEVA,IAAWtnB,KAAK00B,MAClB10B,KAAKoW,MAAM5C,KAAKxT,KAAK40B,WACrB50B,KAAKkiB,SAASC,IAAMniB,KAAK+0B,aAChBzN,IAAWtnB,KAAK20B,WACzB30B,KAAKoW,MAAM5C,KAAKxT,KAAK60B,YACrB70B,KAAKkiB,SAASC,IAAMniB,KAAKg1B,cAG3Bh1B,KAAKk1B,YAAc,EACnBl1B,KAAKkiB,SAASC,IAAIzK,OAAOvE,EAAI,GAM/BxO,EAASwvB,QAAQrZ,UAAUib,cAAgB,SAAUL,GAC9C11B,KAAKo0B,aAIVp0B,KAAKm1B,UAAYtqB,YAAYvE,MAC7BtG,KAAKs1B,aAAat1B,KAAK20B,UACvB30B,KAAKy1B,OAAOC,KAOd/wB,EAASwvB,QAAQrZ,UAAU8a,eAAiB,SAAUprB,GACpD,GAAIwrB,GAAUxrB,EAAOxK,KAAKm1B,SAEtBn1B,MAAKk1B,aAAel1B,KAAKw0B,mBAC3Bx0B,KAAKk1B,YAAcrmB,KAAKW,MAAMwmB,EAAUh2B,KAAKu0B,UAAYv0B,KAAKw0B,mBAC9Dx0B,KAAKkiB,SAASC,IAAIzK,OAAOvE,EAAInT,KAAKk1B,YAAcl1B,KAAKw0B,mBAErDx0B,KAAKs1B,aAAat1B,KAAK00B,OAO3B/vB,EAASwvB,QAAQrZ,UAAUmb,eAAiB,WAC1Cj2B,KAAK61B,aACL71B,KAAKs1B,aAAat1B,KAAK00B,OAMzB/vB,EAASwvB,QAAQrZ,UAAU6a,iBAAmB,WAC5C31B,KAAK61B,aACL71B,KAAKs1B,aAAat1B,KAAK00B,UAErB,WAYJ/vB,EAASuxB,KAAO,SAAU51B,EAAOC,EAAQ41B,EAAeC,EAAgBC,EAAgBC,EAAWC,GAGjGv2B,KAAK0jB,YACHpjB,MAAOA,EACPC,OAAQA,EACR41B,cAAeA,EACfC,eAAgBA,EAChBC,eAAgBA,EAChBC,UAAWA,EACXC,WAAYA,GAGdj2B,EAAQA,GAAS,GACjBC,EAASA,GAAU,EACnB41B,EAAgBA,GAAiB,EACjCC,EAAiBA,GAAkB,EACnCC,EAAiBA,GAAkB,GAAI3xB,GAAA,QAAc,EAAG,EAAG,GAC3D4xB,EAAYA,GAAa,GAAI5xB,GAAA,QAAc,EAAG,EAAG,GACjD6xB,MAA4B7rB,KAAf6rB,EAA2BA,EAAa,EAErD7xB,EAAA,KAAWmI,KAAK7M,KACd,GAAI0E,GAAA,cAAoBpE,EAAOC,EAAQ41B,EAAeC,GACtD,GAAI1xB,GAAA,mBAA0B6tB,MAAO,SAAUhD,aAAa,KAG9DvvB,KAAKw2B,aAAe,GAAI9xB,GAAA,aAExB1E,KAAKy2B,WAAS/rB,GAEd1K,KAAKusB,kBAAoB,IACzBvsB,KAAK02B,qBAAmBhsB,GACxB1K,KAAK22B,oBAAkBjsB,GACvB1K,KAAK42B,yBAAuBlsB,GAC5B1K,KAAK62B,UAEc,IAAfN,GACFv2B,KAAK82B,KAAKT,EAAgBC,EAAWC,GAGvCv2B,KAAK+2B,iBAAmB/2B,KAAK2d,SAAS3F,SAGxCrT,EAASuxB,KAAKpb,UAAY3W,IAAcO,EAAA,KAAWoW,WAEnDnW,EAASuxB,KAAKpb,UAAUC,YAAcpW,EAASuxB,KAE/CvxB,EAASuxB,KAAKpb,UAAU9C,MAAQ,WAC9B,GAAkC2Y,GAA9BjN,EAAa1jB,KAAK0jB,UAetB,OAbAiN,GAAO,GAAIhsB,GAASuxB,KAClBxS,EAAWpjB,MACXojB,EAAWnjB,OACXmjB,EAAWyS,cACXzS,EAAW0S,eACX1S,EAAW2S,eACX3S,EAAW4S,UACX5S,EAAW6S,YAGb5F,EAAKqG,UAAUh3B,KAAKy2B,QACpB9F,EAAKzO,SAAWliB,KAAKkiB,SAASlK,QAEvB2Y,GASThsB,EAASuxB,KAAKpb,UAAUgc,KAAO,SAAU3Z,EAAWC,EAAMvE,GACxD7Y,KAAKw2B,aAAa9wB,IAAIyX,EAAWC,EAAMvE,GAAO6E,OAAO1d,KAAK2d,WAM5DhZ,EAASuxB,KAAKpb,UAAUmc,OAAS,WAC/B,GAAItZ,GAAW3d,KAAK2d,QAEpB3d,MAAK2d,SAAW3d,KAAK+2B,iBACrB/2B,KAAK+2B,iBAAmB/2B,KAAK2d,SAAS3F,QAEtC2F,EAAST,UACTS,EAAW,MAiBbhZ,EAASuxB,KAAKpb,UAAU1Q,MAAQ,SAAUjI,EAAM6I,EAAQksB,EAASpwB,EAAUyG,EAAQN,EAAOU,EAASE,EAAUC,GAoB1G,MAnBD9C,GAASA,GAAUhL,KAClBk3B,EAAUA,MACVpwB,EAAWA,GAAY9G,KAAKusB,kBAC5Bhf,EAASA,GAAUvD,EAAM8B,OAAOmD,YAAYV,IAC5CtB,MAAkBvC,KAAVuC,EAAsBA,EAAQ,EACtCU,EAAUA,GAAW,KACrBE,EAAWA,GAAY,KACvBC,EAAaA,GAAc,KAEtB9N,KAAK62B,OAAO10B,KAChBnC,KAAK62B,OAAO10B,GAAQ,GAAI6H,GAAMe,MAAMC,GAClCzJ,GAAG21B,EAASpwB,GACTyG,OAAOA,GACPN,MAAMA,GACNU,QAAQA,GACRE,SAASA,GACTC,WAAWA,IAGV9N,KAAK62B,OAAO10B,IAUtBwC,EAASuxB,KAAKpb,UAAUqc,OAAS,SAAU/gB,EAAOtP,EAAUyG,GACzD6I,EAAQA,GAAS,EACjBtP,EAAWA,GAAY,IACvByG,EAASA,GAAUvD,EAAM8B,OAAO2C,MAAMF,GAEtC,IAAIsC,GAAQ7Q,KAAMm3B,EAASn3B,KAAKgY,OAEjC,IAAIhO,GAAMe,MAAMosB,EAAO/gB,OACpB7U,IAAI4R,EAAGiD,EAAOvN,EAAGuN,GAAQtP,GACzByG,OAAOA,GACPpI,QAEH,GAAI6E,GAAMe,MAAMosB,EAAOjV,UACpB3gB,IAAI0tB,QAAS,GAAInoB,GACjByG,OAAOA,GACPO,WAAW,WACV+C,EAAMxG,OAAO8sB,GACbA,EAAOxZ,SAAST,UAChBia,EAAOjV,SAAShF,YAEjB/X,QAEHnF,KAAKsJ,IAAI6tB,IAOXxyB,EAASuxB,KAAKpb,UAAUkc,UAAY,SAAUP,GAC5Cz2B,KAAKy2B,OAASA,MAEZ,WAYJ9xB,EAASyyB,UAAY,SAAUC,EAAWC,EAAaC,EAAUhL,EAAmB7U,GAClF,GAAI7G,GAAQ7Q,IAEZ0E,GAAA,SAAemI,KAAK7M,MAEpBA,KAAKq3B,UAAYA,MACjBr3B,KAAK0X,WAAoBhN,KAAXgN,EAAuBA,EAAS,EAC9C1X,KAAKw3B,UAAwB9sB,KAAhB4sB,EAA4BA,EAAc,EACvDt3B,KAAKy3B,UAAqB/sB,KAAb6sB,EAAyBA,EAAW,EACjDv3B,KAAKusB,sBAA0C7hB,KAAtB6hB,EAAkCA,EAAoB,IAC/EvsB,KAAK03B,gBAAkB1tB,EAAM8B,OAAOmD,YAAYV,IAChDvO,KAAK23B,aAAe,EAEpB33B,KAAKq3B,UAAUlV,IAAI,SAAUwO,EAAMpF,GAC7BoF,EAAKjH,OACP/kB,EAAS+K,MAAMub,cAAcxjB,KAAKkpB,EAAKjH,MAAO7Y,EAAM+mB,WAAWrvB,KAAKooB,IAGtEA,EAAKzY,SAASxS,IAAI,EAAG6lB,GAAS1a,EAAM2mB,MAAOjM,GAAS1a,EAAM4mB,OAC1D9G,EAAKkH,iBAAmBlH,EAAKzY,SAASF,QACtC2Y,EAAKqG,UAAUnmB,GACfA,EAAMvH,IAAIqnB,KAGZ3wB,KAAK83B,mBAGPnzB,EAASyyB,UAAUtc,UAAY3W,IAAcO,EAAA,SAAeoW,WAE5DnW,EAASyyB,UAAUtc,UAAUC,YAAcpW,EAASyyB,UAMpDzyB,EAASyyB,UAAUtc,UAAUoT,cAAgB,SAAU6J,GACrD,GAAIlnB,GAAQ7Q,IAEZ+3B,GAAaA,MACb/3B,KAAK6tB,SAAS1L,IAAI,SAAU4L,EAAOxC,GAC7BwC,YAAiBppB,GAASuxB,MAAQ6B,EAAWxM,KAC/C5mB,EAAS+K,MAAMub,cAAcxjB,KAAKswB,EAAWxM,GAAQ1a,EAAM+mB,WAAWrvB,KAAKwlB,IACxEA,EAAMiK,UACTjK,EAAMiK,QAAQ9V,SAAS6K,SAAU,OAUvCpoB,EAASyyB,UAAUtc,UAAUmd,iBAAmB,SAAUF,GAGxD,GAFA/3B,KAAKkuB,cAAc6J,GAEfA,EAAWvwB,OAASxH,KAAK6tB,SAASrmB,OACpC,IAAK,GAAItI,GAAI64B,EAAWvwB,OAAQtI,EAAIc,KAAK6tB,SAASrmB,OAAQtI,IACpDc,KAAK6tB,SAAS3uB,YAAcyF,GAASuxB,OACvCl2B,KAAK6tB,SAAS3uB,GAAGgjB,SAAS6K,SAAU,EAChC/sB,KAAK6tB,SAAS3uB,GAAG84B,UACnBh4B,KAAK6tB,SAAS3uB,GAAG84B,QAAQ9V,SAAS6K,SAAU,KAWtDpoB,EAASyyB,UAAUtc,UAAU8c,WAAa,SAAU1W,GAClDA,EAAQL,UAAYnc,EAAA,aACpBwc,EAAQJ,UAAYpc,EAAA,aACpB1E,KAAKkiB,SAAS6K,SAAU,EACxB/sB,KAAKkiB,SAASC,IAAMjB,EACpBlhB,KAAKkiB,SAASgJ,aAAc,GAM9BvmB,EAASyyB,UAAUtc,UAAUgd,gBAAkB,WAC5C93B,KAAK6tB,SAAS7tB,KAAK0X,QAAQqV,SAAU,EACrC,GAAI/iB,GAAMe,MAAM/K,KAAK6tB,SAAS7tB,KAAK0X,QAAQwK,UACzC3gB,IAAK0tB,QAAS,GAAKjvB,KAAKusB,mBACxBhf,OAAOvN,KAAK03B,iBACZvyB,QAEEnF,KAAK6tB,SAAS7tB,KAAK0X,QAAQsgB,UAC9Bh4B,KAAK6tB,SAAS7tB,KAAK0X,QAAQsgB,QAAQjL,SAAU,EAI9C,KAAK,GAAI7tB,GAAIc,KAAK0X,OAAS,EAAGxY,GAAK,EAAGA,KACa,IAA9Cc,KAAKq3B,UAAU3uB,QAAQ1I,KAAK6tB,SAAS3uB,MAErCc,KAAK0X,OAASxY,GAAKc,KAAK23B,cAC3B33B,KAAK6tB,SAAS3uB,GAAG6tB,SAAU,EAC3B,GAAI/iB,GAAMe,MAAM/K,KAAK6tB,SAAS3uB,GAAGgjB,UAChC3gB,IAAK0tB,QAAS,GAAKjvB,KAAK0X,OAASxY,GAAK,IAAOc,KAAKusB,mBAClDhf,OAAOvN,KAAK03B,iBACZvyB,SAEDnF,KAAK6tB,SAAS3uB,GAAG6tB,SAAU,EAG5B/sB,KAAK6tB,SAAS3uB,GAAG84B,UAAYh4B,KAAK6tB,SAAS3uB,GAAG84B,QAAQjL,SAAU,GAIjE,KAAK,GAAI7tB,GAAIc,KAAK0X,OAAS,EAAGxY,EAAIc,KAAK6tB,SAASrmB,OAAQtI,KACL,IAA9Cc,KAAKq3B,UAAU3uB,QAAQ1I,KAAK6tB,SAAS3uB,MAErCA,EAAIc,KAAK0X,QAAU1X,KAAK23B,cAC3B33B,KAAK6tB,SAAS3uB,GAAG6tB,SAAU,EAC3B,GAAI/iB,GAAMe,MAAM/K,KAAK6tB,SAAS3uB,GAAGgjB,UAChC3gB,IAAK0tB,QAAS,GAAK/vB,EAAIc,KAAK0X,QAAU,IAAO1X,KAAKusB,mBAClDhf,OAAOvN,KAAK03B,iBACZvyB,SAEDnF,KAAK6tB,SAAS3uB,GAAG6tB,SAAU,EAG5B/sB,KAAK6tB,SAAS3uB,GAAG84B,UAAYh4B,KAAK6tB,SAAS3uB,GAAG84B,QAAQjL,SAAU,KAQpEpoB,EAASyyB,UAAUtc,UAAUod,SAAW,SAAUpxB,GAC/C,GAA4B4Q,GAAxBygB,EAAQn4B,KAAKq3B,SAMjB,IAJAvwB,MAAwB4D,KAAb5D,EAAyBA,EAAW9G,KAAKusB,kBAEpD7U,EAAS1X,KAAK0X,OAAS,EAEnB1X,KAAK0X,OAASygB,EAAM3wB,OAAS,GAAK2wB,EAAOn4B,KAAK0X,OAAS,GAAIwK,SAAS6K,QAAS,CAChF,IAAK,GAAI7tB,GAAIi5B,EAAM3wB,OAAS,EAAGtI,GAAK,EAAGA,IACtC,GAAI8K,GAAMe,MAAMotB,EAAMj5B,GAAGgZ,UACxB3W,IAAKsH,GAAI3J,EAAIwY,IAAW1X,KAAKw3B,MAC3Bld,EAAGzL,KAAKkL,IAAI7a,EAAIwY,IAAW1X,KAAKy3B,OAAS3wB,GAC3CyG,OAAOvN,KAAK03B,iBACZvyB,OAGFnF,MAAK0X,SACL1X,KAAK83B,kBACL93B,KAAK2F,eAAgB9D,KAAM,SAAUsb,UAAW,SAQpDxY,EAASyyB,UAAUtc,UAAUsd,WAAa,SAAUtxB,GACjD,GAA4B4Q,GAAxBygB,EAAQn4B,KAAKq3B,SAMjB,IAJAvwB,MAAwB4D,KAAb5D,EAAyBA,EAAW9G,KAAKusB,kBAEpD7U,EAAS1X,KAAK0X,OAAS,EAEnB1X,KAAK0X,OAAS,GAAKygB,EAAOn4B,KAAK0X,OAAS,GAAIwK,SAAS6K,QAAS,CACjE,IAAK,GAAI7tB,GAAI,EAAGA,EAAIi5B,EAAM3wB,OAAQtI,IACjC,GAAI8K,GAAMe,MAAMotB,EAAMj5B,GAAGgZ,UACxB3W,IAAKsH,GAAI3J,EAAIwY,IAAW1X,KAAKw3B,MAC3Bld,EAAGzL,KAAKkL,IAAI7a,EAAIwY,IAAW1X,KAAKy3B,OAAS3wB,GAC3CyG,OAAOvN,KAAK03B,iBACZvyB,OAGFnF,MAAK0X,SACL1X,KAAK83B,kBACL93B,KAAK2F,eAAgB9D,KAAM,SAAUsb,UAAW,WAIpDxY,EAASyyB,UAAUtc,UAAUH,MAAQ,WAClC3a,KAAKq3B,UAAUlV,IAAI,SAAU4L,EAAOxC,GACnCwC,EAAM7V,SAAS1E,KAAKua,EAAM8J,oBAG3B73B,KAAK0X,OAAS,EACd1X,KAAK83B,mBAORnzB,EAASyyB,UAAUtc,UAAUud,SAAW,WACrC,MAAOr4B,MAAK0X,QAOf/S,EAASyyB,UAAUtc,UAAUwd,aAAe,WACzC,GAAI1W,GAAQ,CAQZ,OANA5hB,MAAKq3B,UAAUlV,IAAI,SAAUwO,GACxBA,EAAKzO,SAAS6K,SACjBnL,MAIKA,MAEN,WAGJ,GAAI2W,GAAYC,EACZC,IAWJ9zB,GAAS+zB,WAAa,SAAUC,EAAMC,EAAUrG,EAAOtD,EAAS4B,GAC9DnsB,EAAA,SAAemI,KAAK7M,MAEpBA,KAAK24B,KAAOA,GAAQ,GACpB34B,KAAK44B,SAAWA,GAAY,IAC5B54B,KAAKuyB,MAAQA,GAAS,SACtBvyB,KAAKivB,YAAsBvkB,KAAZukB,EAAwBA,EAAU,EACjDjvB,KAAK6wB,QAAUA,MAEf7wB,KAAKusB,kBAAoB,IACzBvsB,KAAK02B,qBAAmBhsB,GACxB1K,KAAK22B,oBAAkBjsB,GACvB1K,KAAK62B,UAEL72B,KAAK64B,QAAQF,IAGfh0B,EAAS+zB,WAAW5d,UAAY3W,IAAcO,EAAA,SAAeoW,WAE7DnW,EAAS+zB,WAAW5d,UAAUC,YAAcpW,EAAS+zB,WAGrD/zB,EAAS+zB,WAAW5d,UAAUge,qBAAuB,aACrDn0B,EAAS+zB,WAAW5d,UAAUie,kBAAoB,aAQlDp0B,EAAS+zB,WAAW5d,UAAUke,UAAY,SAAUprB,EAAUqrB,EAAM/X,GAClEA,EAAQgK,aAAc,EACtBhK,EAAQL,UAAYnc,EAAA,yBACpBwc,EAAQJ,UAAYpc,EAAA,aACpBwc,EAAQC,iBAAkB,EAC1BD,EAAQgY,WAAa,EAErBX,EAAaU,EACbT,EAAgBtX,CAEhB,KAAK,GAAIhiB,GAAIu5B,EAAajxB,OAAS,EAAGtI,GAAK,EAAGA,IAC5Cu5B,EAAcv5B,GAAIqX,OAAOsiB,QAAQJ,EAAcv5B,GAAIy5B,KAGrD,MAAOF,EAAajxB,OAAS,GAC3BixB,EAAaU,KAGfvrB,IAAYA,KAOdjJ,EAAS+zB,WAAW5d,UAAU+d,QAAU,SAAUF,GAChD,IAAKJ,IAAeC,EAElB,WADAC,GAAax5B,MAAOsX,OAAQvW,KAAM24B,KAAMA,GAI1C,IAAIS,GAAa,GAAI10B,GAAA,QAErB1E,MAAK6wB,QAAQ8H,KAAOA,EACpB34B,KAAK6wB,QAAQoI,KAAOV,EACpBv4B,KAAK6wB,QAAQvwB,MAAQN,KAAK44B,QAE1B,IAAIjb,GAAW3d,KAAK84B,qBAAqB94B,KAAK6wB,QAC9ClT,GAAS0b,qBACT1b,EAAS2b,uBAET,IAAIpX,GAAW,GAAIxd,GAAA,kBAAwB1E,KAAK+4B,mBAC9C5W,IAAKqW,EACL1L,KAAMpoB,EAAA,WACN6qB,aAAa,EACbgD,MAAOvyB,KAAKuyB,MACZtD,QAASjvB,KAAKivB,WAGZsK,EAAS5b,EAAS4b,OAClBC,EAAW,GAAI90B,GAAA,KAAWiZ,EAAUuE,EAExCsX,GAAS/C,OAASz2B,KAClBw5B,EAASthB,SAAS/E,GAAKomB,EAAOj5B,MAAQ,EACtCk5B,EAASthB,SAASrP,EAAoB,MAAhB0wB,EAAOh5B,OAE7B64B,EAAWhjB,MAAMjD,EAAIimB,EAAWhjB,MAAMvN,GAAK,IAC3CuwB,EAAW9vB,IAAIkwB,GAEfx5B,KAAKoiB,KAAOoX,EACZx5B,KAAKsJ,IAAI8vB,IAQXz0B,EAAS+zB,WAAW5d,UAAUvQ,OAAS,SAAUsmB,GAC/C,GAAIzO,EAEJyO,GAAUA,MAEVzO,EAAOpiB,KAAKoiB,KAEZA,EAAKzE,SAASpT,OAAOsmB,GACrBzO,EAAKlK,SAAS/E,GAAKiP,EAAKzE,SAAS4b,OAAOj5B,MAAQ,EAChD8hB,EAAKlK,SAASrP,EAAkC,MAA9BuZ,EAAKzE,SAAS4b,OAAOh5B,QAiBzCoE,EAAS+zB,WAAW5d,UAAU1Q,MAAQ,SAAUjI,EAAM6I,EAAQksB,EAASpwB,EAAUyG,EAAQN,EAAOU,EAASE,EAAUC,GAoBjH,MAnBA9C,GAASA,GAAUhL,KACnBk3B,EAAUA,MACVpwB,EAAWA,GAAY9G,KAAKusB,kBAC5Bhf,EAASA,GAAUvD,EAAM8B,OAAOmD,YAAYV,IAC5CtB,MAAkBvC,KAAVuC,EAAsBA,EAAQ,EACtCU,EAAUA,GAAW,KACrBE,EAAWA,GAAY,KACvBC,EAAaA,GAAc,KAEtB9N,KAAK62B,OAAO10B,KACfnC,KAAK62B,OAAO10B,GAAQ,GAAI6H,GAAMe,MAAMC,GACjCzJ,GAAG21B,EAASpwB,GACVyG,OAAOA,GACPN,MAAMA,GACNU,QAAQA,GACRE,SAASA,GACTC,WAAWA,IAGX9N,KAAK62B,OAAO10B,IAOrBwC,EAAS+zB,WAAW5d,UAAU2e,UAAY,WACxC,MAAOz5B,MAAKoiB,MAAQpiB,KAAKoiB,KAAKzE,UAAY3d,KAAKoiB,KAAKzE,SAAS4b,YAO/D50B,EAAS+zB,WAAW5d,UAAUkc,UAAY,SAAUP,GAClDz2B,KAAKy2B,OAASA,MAEZ,WAMJ9xB,EAAS+0B,OAAS,SAAUjN,GAC1B/nB,EAAA,gBAAsBmI,KAAK7M,MAE3BA,KAAK25B,mBAAqB,iBAC1B35B,KAAK45B,cAAgBj1B,EAAS+K,MAAM0Z,sBACpCppB,KAAK65B,sBAAwB,SAAU3oB,GACrCA,EAAMK,iBACNL,EAAMiD,mBAGRnU,KAAKysB,UAAYA,EAEjBzsB,KAAK85B,WACL95B,KAAK+5B,kBACL/5B,KAAK+wB,aACL/wB,KAAKg6B,eAELh6B,KAAKi6B,SAELj6B,KAAKk6B,eACLl6B,KAAKm6B,cACLn6B,KAAKo6B,MAGPz1B,EAAS+0B,OAAO5e,UAAY3W,IAAcO,EAAA,gBAAsBoW,WAEhEnW,EAAS+0B,OAAO5e,UAAUC,YAAcpW,EAAS+0B,OAKjD/0B,EAAS+0B,OAAO5e,UAAUuf,cAAgB,WACxC,IAAKr6B,KAAKysB,UAER,WADAhjB,SAAQC,KAAK,2BAIf,IAAkB4wB,GAAKC,EAAgBC,EAAcC,EAAjD5pB,EAAQ7Q,IAEZy6B,GAAgB,0DAEhBH,EAAM3wB,SAASob,cAAc,OAC7BuV,EAAIzwB,MAAMvJ,MAAQ,OAClBg6B,EAAIzwB,MAAMtJ,OAAS,OACnB+5B,EAAIzwB,MAAM6wB,MAAQ,OAClBJ,EAAIzwB,MAAMgiB,UAAYyO,EAAIzwB,MAAM8wB,gBAAkBL,EAAIzwB,MAAM+wB,YAAc,oBAC1EN,EAAIzwB,MAAMgxB,WAAa,WAAaJ,EACpCH,EAAIzwB,MAAMgxB,WAAa,QAAUJ,EACjCH,EAAIzwB,MAAMgxB,WAAa,MAAQJ,EAC/BH,EAAIzwB,MAAMgxB,WAAa,OAASJ,EAChCH,EAAIzwB,MAAMgxB,WAAaJ,EACvBH,EAAIzwB,MAAMixB,WAAa96B,KAAK25B,mBAC5BW,EAAIzwB,MAAMkxB,cAAgB,OAC1BT,EAAIU,UAAW,EACfV,EAAIW,OAAS,WACXX,EAAIU,UAAYV,EAAIU,SACpBT,EAAiBD,EAAIU,SAAW,gBAAkB,oBAClDR,EAAeF,EAAIU,SAAW,EAAI,EAClCV,EAAIzwB,MAAMgiB,UAAYyO,EAAIzwB,MAAM8wB,gBAAkBL,EAAIzwB,MAAM+wB,YAAcL,EAC1ED,EAAIzwB,MAAMolB,QAAUuL,EAItB,IAAIU,GAAOl7B,KAAKm7B,mBAChBn7B,MAAKi6B,SAAWj6B,KAAKo7B,eAAeF,GACpCZ,EAAInK,YAAYnwB,KAAKi6B,SAGrB,IAAIG,GAAOp6B,KAAKq7B,YAChBr7B,MAAKo6B,KAAOA,EACZp6B,KAAKysB,UAAU0D,YAAYiK,GAG3BE,EAAIpd,QAAU,WACRrM,EAAMkpB,oBACRO,EAAIgB,YAAYzqB,EAAMkpB,mBACtBlpB,EAAMkpB,kBAAkB7c,UACxBrM,EAAMkpB,kBAAoB,MAGxBlpB,EAAMmpB,iBACRM,EAAIgB,YAAYzqB,EAAMmpB,gBACtBnpB,EAAMmpB,eAAe9c,UACrBrM,EAAMmpB,eAAiB,MAGrBnpB,EAAMkgB,eACRuJ,EAAIgB,YAAYzqB,EAAMkgB,cACtBlgB,EAAMkgB,aAAa7T,UACnBrM,EAAMkgB,aAAe,OAIzB/wB,KAAKysB,UAAU0D,YAAYmK,GAG3Bt6B,KAAKo6B,KAAK50B,iBAAiB,YAAaxF,KAAK65B,uBAAuB,GACpE75B,KAAKo6B,KAAK50B,iBAAiB,UAAWxF,KAAK65B,uBAAuB,GAClE75B,KAAKo6B,KAAK50B,iBAAiB,YAAaxF,KAAK65B,uBAAuB,GACpE75B,KAAKo6B,KAAK50B,iBAAiBqL,EAAM+oB,cAAgB,WAAa,QAAS,SAAU1oB,GAC/EA,EAAMK,iBACNL,EAAMiD,kBAENtD,EAAMupB,KAAK9L,OACXzd,EAAMmpB,eAAeuB,eACpB,GAGHv7B,KAAKwF,iBAAiB,qBAAsB80B,EAAIW,QAEhDj7B,KAAK85B,WAAaQ,GAMpB31B,EAAS+0B,OAAO5e,UAAUqgB,kBAAoB,WAC5C,GAAkBK,GAAd3qB,EAAQ7Q,IAcZ,OAZAw7B,GAAU,SAAUjO,EAAQC,GAC1B,MAAO,YACL3c,EAAMlL,eAEJ9D,KAAM,0BACN0rB,OAAQA,EACRC,KAAMA,QASRiO,MAAO,UACPC,UAEID,MAAOz7B,KAAK45B,cAAgB,QAAU,QACtC4B,QAASA,EAAQ,gBAAiB72B,EAASkkB,SAASnX,SAGpD+pB,MAAO,SACPD,QAASA,EAAQ,gBAAiB72B,EAASkkB,SAASC,uBAMxD2S,MAAO,OACPC,UAEID,MAAO,SACPD,QAASA,EAAQ,mBAGjBC,MAAO,YACPD,QAASA,EAAQ,eAAgB72B,EAASokB,MAAMG,aAGhDuS,MAAO,eACPD,QAASA,EAAQ,eAAgB72B,EAASokB,MAAMI,aAY1DxkB,EAAS+0B,OAAO5e,UAAU6gB,iBAAmB,SAAUx5B,GACrD,GAAI0Q,EAEJ,QAAQ1Q,GACN,IAAK,aAEH0Q,EAAU7S,KAAK47B,yBACf57B,KAAK+5B,kBAAoBlnB,CAEzB,MAEF,KAAK,UAEHA,EAAU7S,KAAK67B,sBACf77B,KAAKg6B,eAAiBnnB,CAEtB,MAEF,KAAK,QAEHA,EAAU7S,KAAK87B,qBACf97B,KAAK+wB,aAAele,CAEpB,MAEF,SAEE,OAGCA,GAIL7S,KAAK85B,WAAW3J,YAAYtd,IAG9BlO,EAAS+0B,OAAO5e,UAAUugB,WAAa,WACrC,GAAIxoB,GAAUlJ,SAASob,cAAc,MAiBrC,OAhBAlS,GAAQhJ,MAAMqO,SAAW,WACzBrF,EAAQhJ,MAAM+P,IAAM,EACpB/G,EAAQhJ,MAAM8P,KAAO,EACrB9G,EAAQhJ,MAAMvJ,MAAQ,OACtBuS,EAAQhJ,MAAMtJ,OAAS,OACvBsS,EAAQhJ,MAAMgxB,WAAa,cAC3BhoB,EAAQhJ,MAAMkyB,QAAU,OAExBlpB,EAAQwb,KAAO,WACbruB,KAAK6J,MAAMkyB,QAAU,SAGvBlpB,EAAQyb,KAAO,WACbtuB,KAAK6J,MAAMkyB,QAAU,QAGhBlpB,GAMTlO,EAAS+0B,OAAO5e,UAAU+gB,oBAAsB,WAG9C,QAASG,GAAO9qB,GACdA,EAAMK,iBACNL,EAAMiD,kBAENtD,EAAMopB,SAASgB,SAEXj7B,KAAKi8B,UACPj8B,KAAKu7B,aAELv7B,KAAKk8B,WAXT,GAAkBC,GAAdtrB,EAAQ7Q,IAwDZ,OAzCAm8B,GAAOn8B,KAAKo8B,kBAEVvyB,OAEEwyB,gBAAiB,QAAU13B,EAASojB,UAAUS,QAAU,KACxD8T,iBAAkBt8B,KAAK25B,mBACvBmB,WAAY96B,KAAK25B,oBAInBqC,MAAOA,IAITG,EAAKD,SAAW,WACdl8B,KAAK6J,MAAMgiB,UAAY,wBACvB7rB,KAAKi8B,WAAY,EACjBprB,EAAMupB,KAAK/L,QAGb8N,EAAKZ,WAAa,WAChBv7B,KAAK6J,MAAMgiB,UAAY,oBACvB7rB,KAAKi8B,WAAY,EACjBprB,EAAMupB,KAAK9L,OAEPzd,EAAMopB,UAAYppB,EAAMopB,SAASlN,SACnClc,EAAMopB,SAAS3L,OAGbzd,EAAMspB,eAAiBtpB,EAAMspB,cAAcpN,SAC7Clc,EAAMspB,cAAc7L,OAGlBzd,EAAMopB,UAAYppB,EAAMopB,SAASsC,SACnC1rB,EAAMopB,SAASuC,WAAW3rB,EAAMopB,SAASsC,QACzC1rB,EAAMopB,SAASwC,eAInBN,EAAKF,WAAY,EAEVE,GAQTx3B,EAAS+0B,OAAO5e,UAAU8gB,uBAAyB,WAajD,QAASI,GAAO9qB,GACdA,EAAMK,iBACNL,EAAMiD,kBAENuoB,GAAa,EAERC,GAOJhzB,SAASizB,gBAAkBjzB,SAASizB,iBACpCjzB,SAASkzB,kBAAoBlzB,SAASkzB,mBACtClzB,SAASmzB,qBAAuBnzB,SAASmzB,sBACzCnzB,SAASozB,sBAAwBpzB,SAASozB,uBACzCJ,GAAe,IAVhB9rB,EAAM4b,UAAUuQ,mBAAqBnsB,EAAM4b,UAAUuQ,oBACrDnsB,EAAM4b,UAAUwQ,qBAAuBpsB,EAAM4b,UAAUwQ,sBACvDpsB,EAAM4b,UAAUyQ,sBAAwBrsB,EAAM4b,UAAUyQ,uBACxDrsB,EAAM4b,UAAU0Q,yBAA2BtsB,EAAM4b,UAAU0Q,wBAAwBC,QAAQC,sBAC1FV,GAAe,GASjB38B,KAAK6J,MAAMwyB,gBAAmBM,EAC1B,QAAUh4B,EAASojB,UAAUI,gBAAkB,KAC/C,QAAUxjB,EAASojB,UAAUG,gBAAkB,KAGrD,QAASoV,GAAoBx4B,GACvB43B,IACFC,GAAgBA,EAEhBR,EAAKtyB,MAAMwyB,gBAAmBM,EAC1B,QAAUh4B,EAASojB,UAAUI,gBAAkB,KAC/C,QAAUxjB,EAASojB,UAAUG,gBAAkB,MAQrDrX,EAAMlL,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,iBAAkBC,MAAM,IAEvFkP,GAAa,EArDf,GAAkBP,GAA+CoB,EAA7D1sB,EAAQ7Q,KAAY28B,GAAe,EAAOD,GAAa,CAK3D,IAHAa,EAAe,uBAGV5zB,SAAS6zB,mBACb7zB,SAAS8zB,yBACT9zB,SAAS+zB,sBACT/zB,SAASg0B,oBAHV,CAqEA,GAlBAh0B,SAASnE,iBAAiB,mBAAoB83B,GAAoB,GAClE3zB,SAASnE,iBAAiB,yBAA0B83B,GAAoB,GACxE3zB,SAASnE,iBAAiB,sBAAuB83B,GAAoB,GACrE3zB,SAASnE,iBAAiB,qBAAsB83B,GAAoB,GAEpEnB,EAAOn8B,KAAKo8B,kBAEVvyB,OAEEwyB,gBAAiB,QAAU13B,EAASojB,UAAUG,gBAAkB,MAIlE8T,MAAOA,KAKJryB,SAASi0B,cAAcL,GAAe,CACzC,GAAIM,GAAQl0B,SAASob,cAAc,QACnC8Y,GAAMnX,GAAK6W,EACXM,EAAMC,UAAY,2EAClBn0B,SAASmJ,KAAKqd,YAAY0N,GAG5B,MAAO1B,KAOTx3B,EAAS+0B,OAAO5e,UAAUghB,mBAAqB,WAC7C,GAAIK,EAkCJ,OAhCAA,GAAOxyB,SAASob,cAAc,QAC9BoX,EAAKtyB,MAAMkyB,QAAU,OACrBI,EAAK9N,KAAO,WACV8N,EAAKtyB,MAAMkyB,QAAU,IAGvBI,EAAK7N,KAAO,WACV6N,EAAKtyB,MAAMkyB,QAAU,OACrBI,EAAK4B,cAAc/1B,QAAS,EAC5Bm0B,EAAK4B,cAAcxzB,UAGrB4xB,EAAK4B,cAAgB/9B,KAAKg+B,2BAC1B7B,EAAK8B,QAAUj+B,KAAKk+B,4BAEpB/B,EAAKhM,YAAYgM,EAAK4B,eACtB5B,EAAKhM,YAAYgM,EAAK8B,SAEtB9B,EAAKjf,QAAU,WACbif,EAAKb,YAAYa,EAAK4B,eACtB5B,EAAKb,YAAYa,EAAK8B,SAEtB9B,EAAK4B,cAAc7gB,UACnBif,EAAK4B,cAAgB,KAErB5B,EAAK8B,QAAQ/gB,UACbif,EAAK8B,QAAU,MAGjBj+B,KAAKwF,iBAAiB,qBAAsB22B,EAAK9N,MACjDruB,KAAKwF,iBAAiB,qBAAsB22B,EAAK7N,MAE1C6N,GAQTx3B,EAAS+0B,OAAO5e,UAAUkjB,yBAA2B,WAGnD,QAAShC,GAAO9qB,GACdA,EAAMK,iBACNL,EAAMiD,kBAONtD,EAAMlL,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,kBAAmBC,MAAOxtB,KAAKgI,SAE9FhI,KAAKgI,QAAUhI,KAAKgI,OAEpBm0B,EAAK5xB,SAfP,GAAkB4xB,GAAdtrB,EAAQ7Q,IAyCZ,OAvBAm8B,GAAOn8B,KAAKo8B,kBAEVvyB,OAEE6wB,MAAO,OACP2B,gBAAiB,QAAU13B,EAASojB,UAAUK,UAAY,MAI5D4T,MAAOA,IAITG,EAAKn0B,QAAS,EAEdm0B,EAAK5xB,OAAS,SAAUvC,GACtBhI,KAAKgI,WAAoB0C,KAAX1C,EAAuBA,EAAShI,KAAKgI,OAEnDhI,KAAK6J,MAAMwyB,gBAAkB,SAAWr8B,KAAKgI,OACzCrD,EAASojB,UAAUK,UACnBzjB,EAASojB,UAAUM,YAAc,MAGhC8T,GAQTx3B,EAAS+0B,OAAO5e,UAAUojB,0BAA4B,WAoBpD,QAASjtB,GAAaC,GACpBA,EAAMiD,kBAENgqB,GAAa,EAEbC,EAASltB,EAAMc,SAAYd,EAAMmtB,gBAAkBntB,EAAMmtB,eAAe,GAAGrsB,QAE3EssB,EAAgBC,SAASC,EAAgB30B,MAAMvJ,OAAS,IAExDm+B,IAGF,QAASC,GAAoBxtB,GAC3B,GAAIc,EAEAmsB,KACFnsB,EAAUd,EAAMc,SAAYd,EAAMmtB,gBAAkBntB,EAAMmtB,eAAe,GAAGrsB,QAE5E2sB,GAAkB3sB,EAAUosB,GAAUjC,EAAK/oB,YAE3CurB,EAAiBL,EAAgBK,EAEjCA,EAAiBA,EAAiB,EAAI,EAAMA,EAAiB,EAAK,EAAIA,EAEtExC,EAAK5W,YAAYoZ,GAQjB9tB,EAAMlL,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,sBAAuBC,KAAMmR,KAIhG,QAASC,GAAoB1tB,GAC3BA,EAAMiD,kBAENgqB,GAAa,EAEbU,IAGF,QAASJ,KACP5tB,EAAM4b,UAAUjnB,iBAAiB,YAAak5B,GAAoB,GAClE7tB,EAAM4b,UAAUjnB,iBAAiB,UAAWo5B,GAAoB,GAChE/tB,EAAM4b,UAAUjnB,iBAAiB,YAAak5B,GAAoB,GAClE7tB,EAAM4b,UAAUjnB,iBAAiB,WAAYo5B,GAAoB,GAGnE,QAASC,KACPhuB,EAAM4b,UAAUljB,oBAAoB,YAAam1B,GAAoB,GACrE7tB,EAAM4b,UAAUljB,oBAAoB,UAAWq1B,GAAoB,GACnE/tB,EAAM4b,UAAUljB,oBAAoB,YAAam1B,GAAoB,GACrE7tB,EAAM4b,UAAUljB,oBAAoB,WAAYq1B,GAAoB,GAGtE,QAAS5C,GAAO9qB,GACdA,EAAMK,iBACNL,EAAMiD,iBAEN,IAAI6d,EAEA9gB,GAAMqF,SAAWuoB,IAErB9M,EAAc9gB,EAAMmtB,gBAAkBntB,EAAMmtB,eAAe72B,OAAS,GAC/D0J,EAAMmtB,eAAe,GAAGxoB,MAAQ3E,EAAMqF,OAAOwoB,wBAAwBplB,MAAQ3Z,KAAKoT,YACnFlC,EAAM8tB,QAAUh/B,KAAKoT,YAQzBvC,EAAMlL,eAAgB9D,KAAM,0BAA2B0rB,OAAQ,sBAAuBC,KAAMwE,IAE5FmK,EAAK5W,YAAYrU,EAAM8tB,QAAUh/B,KAAKoT,cAGxC,QAAS6rB,KACPJ,IACAL,EAAkB,KAClBM,EAAyB,KAvG3B,GAAkB3C,GAAMqC,EAAiBM,EACnBV,EAAQE,EAAeK,EADzC9tB,EAAQ7Q,KACVm+B,GAAa,CAsIf,OApIAK,GAAkB70B,SAASob,cAAc,OACzCyZ,EAAgB30B,MAAMvJ,MAAQ,KAC9Bk+B,EAAgB30B,MAAMtJ,OAAS,OAC/Bi+B,EAAgB30B,MAAMq1B,gBAAkB,OAExCJ,EAAyBn1B,SAASob,cAAc,OAChD+Z,EAAuBj1B,MAAM6wB,MAAQ,QACrCoE,EAAuBj1B,MAAMvJ,MAAQ,OACrCw+B,EAAuBj1B,MAAMtJ,OAAS,OACtCu+B,EAAuBj1B,MAAMgiB,UAAY,uBACzCiT,EAAuBj1B,MAAMs1B,aAAe,MAC5CL,EAAuBj1B,MAAMq1B,gBAAkB,OAE/CJ,EAAuBt5B,iBAAiB,YAAayL,GAAa,GAClE6tB,EAAuBt5B,iBAAiB,aAAcyL,GAAa,GAyFnEutB,EAAgBrO,YAAY2O,GAE5B3C,EAAOn8B,KAAKo8B,kBAEVvyB,OAEE6wB,MAAO,OACPp6B,MAAO,MACPC,OAAQ,MACR6+B,UAAW,OACXF,gBAAiB,yBAInBlD,MAAOA,EACPiD,UAAWA,IAIb9C,EAAKhM,YAAYqO,GAEjBrC,EAAK5W,YAAc,SAAUyM,GAC3BwM,EAAgB30B,MAAMvJ,MAAqB,IAAb0xB,EAAmB,KAGnDhyB,KAAKwF,iBAAiB,eAAgB,SAAU0L,GAC9CirB,EAAK5W,YAAYrU,EAAM8gB,cAGlBmK,GAQTx3B,EAAS+0B,OAAO5e,UAAUukB,eAAiB,SAAU5D,GACnD,GAAI5qB,GAAQ7Q,KAAMm8B,EAAOxyB,SAASob,cAAc,IA+EhD,OA9EAoX,GAAKmD,YAAc7D,EACnBU,EAAKtyB,MAAMkyB,QAAU,QACrBI,EAAKtyB,MAAMnJ,QAAU,OACrBy7B,EAAKtyB,MAAM01B,eAAiB,OAC5BpD,EAAKtyB,MAAM21B,OAAS,UACpBrD,EAAKtyB,MAAMkxB,cAAgB,OAC3BoB,EAAKtyB,MAAMixB,WAAa96B,KAAK25B,mBAE7BwC,EAAKsD,MAAQ,SAAU/lB,GACrB1Z,KAAK6J,MAAMgiB,UAAY,eAAiBnS,EAAQ,GAAK,KAAO,SAG9DyiB,EAAKuD,QAAU,WACb1/B,KAAK6J,MAAMgiB,UAAY,iBAGzBsQ,EAAKwD,QAAU,SAAU/Y,GACnB5mB,KAAK4/B,OACP5/B,KAAK4/B,KAAK/1B,MAAMwyB,gBAAkB,OAASzV,EAAM,MAIrDuV,EAAK0D,kBAAoB,SAAUpE,GAC7Bz7B,KAAK8/B,YACP9/B,KAAK8/B,UAAUR,YAAc7D,IAIjCU,EAAK4D,aAAe,SAAU59B,GAC5B,GAAI29B,GAAYn2B,SAASob,cAAc,OASvC,OARA+a,GAAUj2B,MAAMm2B,SAAW,OAC3BF,EAAUj2B,MAAMo2B,WAAa,MAC7BH,EAAUj2B,MAAM6wB,MAAQ,QAExB16B,KAAK8/B,UAAYA,EACjB9/B,KAAK6/B,kBAAkB19B,GACvBnC,KAAKmwB,YAAY2P,GAEV9/B,MAGTm8B,EAAK+D,QAAU,SAAUtZ,EAAKjN,EAAMwmB,GAClCvZ,EAAMA,GAAOjiB,EAASojB,UAAUU,aAChC9O,EAAOA,IAAQ,EACfwmB,EAAOA,IAAQ,CAEf,IAAIttB,GAAUlJ,SAASob,cAAc,OAerC,OAdAlS,GAAQhJ,MAAM6wB,MAAQ/gB,EAAO,OAAS,QACtC9G,EAAQhJ,MAAMvJ,MAAQ,OACtBuS,EAAQhJ,MAAMtJ,OAAS,OACvBsS,EAAQhJ,MAAO,UAAY8P,EAAO,QAAU,SAAY,OACxD9G,EAAQhJ,MAAMu2B,eAAiB,QAE3BD,IACFttB,EAAQhJ,MAAMgiB,UAAY,mBAG5B7rB,KAAK4/B,KAAO/sB,EACZ7S,KAAK2/B,QAAQ/Y,GACb5mB,KAAKmwB,YAAYtd,GAEV7S,MAGTm8B,EAAKkE,WAAa,SAAU5E,EAAO6E,GAGjC,MAFAtgC,MAAK07B,QAAU7qB,EAAM0vB,cAAc9E,EAAO6E,GAEnCtgC,MAGTm8B,EAAK32B,iBAAiB,aAAc,WAClCxF,KAAK6J,MAAMq1B,gBAAkB,YAC5B,GAEH/C,EAAK32B,iBAAiB,aAAc,WAClCxF,KAAK6J,MAAMq1B,gBAAkB,YAC5B,GAEI/C,GAQTx3B,EAAS+0B,OAAO5e,UAAU0lB,qBAAuB,SAAU/E,GACzD,GAAIgF,GAASzgC,KAAKq/B,eAAe5D,EAKjC,OAHAgF,GAAO52B,MAAM62B,aAAe,iBAC5BD,EAAO52B,MAAM82B,cAAgB,OAEtBF,GAQT97B,EAAS+0B,OAAO5e,UAAUsgB,eAAiB,SAAUwF,GAMnD,QAAS5E,GAAO9qB,GAMd,QAAS2vB,KACP5G,EAASuC,WAAWd,EAAQtoB,aAC5BsoB,EAAQrN,OACRqN,EAAQe,aARVvrB,EAAMK,iBACNL,EAAMiD,iBAEN,IAAI8lB,GAAWppB,EAAMopB,SAAUyB,EAAU17B,KAAK07B,OAQ9CzB,GAAS3L,OACT2L,EAAS6G,WACT7G,EAAS8G,cAAc5Q,YAAYuL,GAEnC7qB,EAAMqpB,eAAiBl6B,KACvB6Q,EAAMspB,cAAgBuB,EAEtB/wB,OAAOtF,sBAAsBw7B,GAxB/B,GAAIhwB,GAAQ7Q,KAAMk7B,EAAOl7B,KAAKghC,YAE9B9F,GAAKqB,OAAS,IACdrB,EAAKsB,WAAWtB,EAAKqB,OAwBrB,KAAK,GAAIr9B,GAAI,EAAGA,EAAI0hC,EAAMp5B,OAAQtI,IAAK,CACrC,GAAIi9B,GAAOjB,EAAK+F,QAAQL,EAAO1hC,GAAIu8B,MAOnC,IALAU,EAAKtyB,MAAMq3B,YAAc,OAEzB/E,EAAK+D,UACF16B,iBAAiBqL,EAAM+oB,cAAgB,WAAa,QAASoC,GAAO,GAEnE4E,EAAO1hC,GAAIw8B,SAAWkF,EAAO1hC,GAAIw8B,QAAQl0B,OAAS,EAAG,CACvD,GAAIi0B,GAAQmF,EAAO1hC,GAAIw8B,QAAS,GAAID,KAEpCU,GAAK4D,aAAatE,GACf4E,WAAWO,EAAO1hC,GAAIu8B,MAAOmF,EAAO1hC,GAAIw8B,UAI/C,MAAOR,IASTv2B,EAAS+0B,OAAO5e,UAAUylB,cAAgB,SAAU9E,EAAO6E,GAMzD,QAAStE,GAAO9qB,GACdA,EAAMK,iBACNL,EAAMiD,kBAEN+mB,EAAOrqB,EAAMopB,SACbiB,EAAKsB,WAAWtB,EAAKqB,QACrBrB,EAAKuB,aACLvB,EAAK7M,OACLqN,EAAQoF,UAAS,GACjBpF,EAAQpN,OAEU,WAAdtuB,KAAK6B,OACP65B,EAAQyF,cAAcnhC,MACtB6Q,EAAMqpB,eAAe2F,kBAAkB7/B,KAAKs/B,aAE5Ct/B,KAAKw7B,SAAWx7B,KAAKw7B,WApBzB,GAAkBN,GAAdrqB,EAAQ7Q,KAAY07B,EAAU17B,KAAKghC,YAEvCtF,GAAQ4E,MAAQA,EAChB5E,EAAQ0F,WAqBR1F,EAAQ2F,UAAU5F,GAAOyE,YAAQx1B,IAAW,GAAM,GAAMlF,iBAAiBqL,EAAM+oB,cAAgB,WAAa,QAASoC,GAAO,EAE5H,KAAK,GAAI98B,GAAI,EAAGA,EAAIohC,EAAM94B,OAAQtI,IAAK,CACrC,GAAIi9B,GAAOT,EAAQuF,QAAQX,EAAOphC,GAAIu8B,MAEtCU,GAAKtyB,MAAMo2B,WAAa,IACxB9D,EAAKX,QAAU8E,EAAOphC,GAAIs8B,QAC1BW,EAAK+D,QAAQ,KAAK,GAClB/D,EAAK32B,iBAAiBqL,EAAM+oB,cAAgB,WAAa,QAASoC,GAAO,GAEpEN,EAAQ0F,YACX1F,EAAQyF,cAAchF,GAM1B,MAFAT,GAAQoF,UAAS,GAEVpF,GAOT/2B,EAAS+0B,OAAO5e,UAAUkmB,WAAa,WACrC,GAAyDn3B,GAArDgH,EAAQ7Q,KAAMk7B,EAAOvxB,SAASob,cAAc,OAoGhD,OAlGAlb,GAAQqxB,EAAKrxB,MAEbA,EAAMnJ,QAAU,QAChBmJ,EAAMqO,SAAW,QACjBrO,EAAMgQ,OAAS,OACfhQ,EAAM6P,MAAQ,OACd7P,EAAMq1B,gBAAkB,UACxBr1B,EAAMy3B,WAAa,iBACnBz3B,EAAMm2B,SAAW,OACjBn2B,EAAM03B,WAAa,SACnB13B,EAAMolB,QAAU,EAChBplB,EAAM23B,UAAY,4BAClB33B,EAAMs1B,aAAe,MACrBt1B,EAAM43B,SAAW,SACjB53B,EAAM63B,WAAa,yBACnB73B,EAAMkxB,cAAgB,OACtBlxB,EAAMixB,WAAa96B,KAAK25B,mBAExBuB,EAAKnO,SAAU,EAEfmO,EAAKsB,WAAa,SAAUl8B,EAAOC,GAC7BD,IACFN,KAAK6J,MAAMvJ,MAAQA,EAAQ,MAGzBC,IACFP,KAAK6J,MAAMtJ,OAASA,EAAS,OAIjC26B,EAAK7M,KAAO,WACVruB,KAAK6J,MAAMolB,QAAU,EACrBjvB,KAAK6J,MAAM03B,WAAa,UACxBvhC,KAAK+sB,SAAU,GAGjBmO,EAAK5M,KAAO,WACVtuB,KAAK6J,MAAMolB,QAAU,EACrBjvB,KAAK6J,MAAM03B,WAAa,SACxBvhC,KAAK+sB,SAAU,GAGjBmO,EAAKD,OAAS,WACRj7B,KAAK+sB,QACP/sB,KAAKsuB,OAELtuB,KAAKquB,QAIT6M,EAAK4F,SAAW,SAAUpnB,GACxB,IAAK,GAAIxa,GAAI,EAAGA,EAAIg8B,EAAKrN,SAASrmB,OAAQtI,IACpCg8B,EAAKrN,SAAU3uB,GAAIugC,OACrBvE,EAAKrN,SAAU3uB,GAAIugC,MAAM/lB,IAK/BwhB,EAAKuB,WAAa,WAChB,IAAK,GAAIv9B,GAAI,EAAGA,EAAIg8B,EAAKrN,SAASrmB,OAAQtI,IACpCg8B,EAAKrN,SAAU3uB,GAAIwgC,SACrBxE,EAAKrN,SAAU3uB,GAAIwgC,WAKzBxE,EAAKmG,UAAY,SAAU5F,GACzB,GAAIgF,GAAS5vB,EAAM2vB,qBAAqB/E,EAKxC,OAJAgF,GAAO5+B,KAAO,SAEd7B,KAAKmwB,YAAYsQ,GAEVA,GAGTvF,EAAK+F,QAAU,SAAUxF,GACvB,GAAIU,GAAOtrB,EAAMwuB,eAAe5D,EAKhC,OAJAU,GAAKt6B,KAAO,OAEZ7B,KAAKmwB,YAAYgM,GAEVA,GAGTjB,EAAKiG,cAAgB,SAAUhF,GACzBn8B,KAAKohC,YACPphC,KAAKohC,WAAWzB,QAAQ,KAG1BxD,EAAKwD,QAAQh7B,EAASojB,UAAUW,OAEhC1oB,KAAKohC,WAAajF,GAGpBjB,EAAK11B,iBAAiB,YAAaxF,KAAK65B,uBAAuB,GAC/DqB,EAAK11B,iBAAiB,UAAWxF,KAAK65B,uBAAuB,GAC7DqB,EAAK11B,iBAAiB,YAAaxF,KAAK65B,uBAAuB,GAExDqB,GAOTv2B,EAAS+0B,OAAO5e,UAAUshB,iBAAmB,SAAUvL,GACrDA,EAAUA,KAEV,IAAIhgB,GAAQ7Q,KACVm8B,EAAOtL,EAAQhe,SAAWlJ,SAASob,cAAc,OAqCnD,OAnCAoX,GAAKtyB,MAAM21B,OAAS,UACpBrD,EAAKtyB,MAAM6wB,MAAQ,QACnByB,EAAKtyB,MAAMvJ,MAAQ,OACnB67B,EAAKtyB,MAAMtJ,OAAS,OACpB47B,EAAKtyB,MAAMu2B,eAAiB,MAC5BjE,EAAKtyB,MAAM83B,iBAAmB,YAC9BxF,EAAKtyB,MAAM+3B,mBAAqB,SAChCzF,EAAKtyB,MAAMg4B,iBACb1F,EAAKtyB,MAAMi4B,cACX3F,EAAKtyB,MAAMk4B,WAAa,OACtB5F,EAAKtyB,MAAMqO,SAAW,WACtBikB,EAAKtyB,MAAMkxB,cAAgB,OAG3BoB,EAAK32B,iBAAiBqL,EAAM+oB,cAAgB,aAAe,aAAc,WACvEuC,EAAKtyB,MAAMm4B,OACd7F,EAAKtyB,MAAMo4B,aAAe,6CAEzB9F,EAAK32B,iBAAiBqL,EAAM+oB,cAAgB,WAAa,aAAc,WACrEuC,EAAKtyB,MAAMm4B,OACd7F,EAAKtyB,MAAMo4B,aAAe,KAGzB9F,EAAOn8B,KAAKkiC,kBAAkB/F,EAAMtL,EAAQhnB,OAExCgnB,EAAQmL,OACVG,EAAK32B,iBAAiBqL,EAAM+oB,cAAgB,WAAa,QAAS/I,EAAQmL,OAAO,GAGnFG,EAAKjf,QAAU,WACbif,EAAK5yB,oBAAoBsH,EAAM+oB,cAAgB,WAAa,QAAS/I,EAAQmL,OAAO,GAEpFnL,EAAQoO,WAAapO,EAAQoO,aAGxB9C,GASTx3B,EAAS+0B,OAAO5e,UAAUonB,kBAAoB,SAAUrvB,EAASge,GAC/DA,EAAUA,KAEV,KAAK,GAAInkB,KAAYmkB,GACfA,EAAQ5G,eAAevd,KACzBmG,EAAQhJ,MAAO6C,GAAamkB,EAASnkB,GAIzC,OAAOmG,IAMTlO,EAAS+0B,OAAO5e,UAAUoC,QAAU,WAC9Bld,KAAK85B,aACP95B,KAAKysB,UAAU6O,YAAYt7B,KAAK85B,YAChC95B,KAAK85B,WAAW5c,UAChBld,KAAK85B,WAAa,UAGlB,WAQJn1B,EAAS2oB,SAAW,SAAUlX,EAAOsY,EAAUyT,GAgC7C,QAASC,GAAUlhB,GACjBA,EAAQ4U,MAAQpxB,EAAA,eAChBwc,EAAQ/T,OAAOgG,GAAK,EAEpB+N,EAAQwI,MAAMppB,MAAQ4gB,EAAQwI,MAAM2Y,cAAgB,GACpDnhB,EAAQwI,MAAMnpB,OAAS2gB,EAAQwI,MAAM4Y,eAAiB,GAEtD7P,EAAQvR,EAAQwI,MAAMppB,MAAQ4gB,EAAQwI,MAAMnpB,OAC5CsQ,EAAMuF,MAAM1Q,IAAI+sB,EAAQrc,EAAOA,EAAO,GAEtCmsB,EAAa1xB,EAAMuF,MAAM4B,QAEzBnH,EAAM2xB,iBAAmB,GAAIx4B,GAAMe,MAAM8F,EAAMuF,OAC5C7U,IAAK4R,EAAGovB,EAAWpvB,EAAItC,EAAM4xB,YAAa55B,EAAG05B,EAAW15B,EAAIgI,EAAM4xB,aAAe37B,GACjFyG,OAAOvD,EAAM8B,OAAOuD,QAAQd,KAE/BsC,EAAM6xB,mBAAqB,GAAI14B,GAAMe,MAAM8F,EAAMuF,OAC9C7U,IAAK4R,EAAGovB,EAAWpvB,EAAGtK,EAAG05B,EAAW15B,GAAK/B,GACzCyG,OAAOvD,EAAM8B,OAAOuD,QAAQd,KAE/BsC,EAAMqR,SAAS4K,KAAOpoB,EAAA,WACtBmM,EAAMqR,SAASC,IAAMjB,EACrBrQ,EAAMqR,SAAS+S,WAAY,EAC3BpkB,EAAMqR,SAASgJ,aAAc,EAG/B,QAASmD,KACPruB,KAAK+sB,SAAU,EAGjB,QAASuB,KACPtuB,KAAK+sB,SAAU,EA9DjB,GAAkB0F,GAAO8P,EAAsBz7B,EAA3C+J,EAAQ7Q,IAEZoW,GAAQA,GAAS,IACjBsY,EAAWA,GAAY/pB,EAASojB,UAAUC,KAC1ClhB,EAAW,IAEXpC,EAAA,OAAamI,KAAK7M,MAElBA,KAAK6B,KAAO,WAEZ7B,KAAKmiC,aAAwBz3B,KAAby3B,GAAyBA,EACzCniC,KAAK2iC,YAAa,EAClB3iC,KAAK+sB,SAAU,EAEf/sB,KAAK6S,QACL7S,KAAK4uB,WACL5uB,KAAK4iC,YAEL5iC,KAAK6iC,KAAOl+B,EAASokB,MAAMC,QAE3BhpB,KAAKoW,MAAM1Q,IAAI0Q,EAAOA,EAAO,GAC7BpW,KAAKqb,SAASxS,EAAIgG,KAAKE,GACvB/O,KAAKyiC,YAAc,IAEnBziC,KAAKysB,UAGLzsB,KAAK8iC,cAELn+B,EAAS+K,MAAMub,cAAcxjB,KAAKinB,EAAU0T,GAqC5CpiC,KAAK+iC,cAAgB,GAAI/4B,GAAMe,MAAM/K,KAAKkiB,UACvC3gB,IAAK0tB,QAAS,GAAKnoB,GACnB6G,QAAQ0gB,EAAK9lB,KAAKvI,OAClBuN,OAAOvD,EAAM8B,OAAO4C,QAAQH,KAE/BvO,KAAKgjC,cAAgB,GAAIh5B,GAAMe,MAAM/K,KAAKkiB,UACvC3gB,IAAK0tB,QAAS,GAAKnoB,GACnBgH,WAAWwgB,EAAK/lB,KAAKvI,OACrBuN,OAAOvD,EAAM8B,OAAO4C,QAAQH,KAG/BvO,KAAKwF,iBAAiB,QAASxF,KAAKmtB,SACpCntB,KAAKwF,iBAAiB,QAASxF,KAAKijC,SACpCjjC,KAAKwF,iBAAiB,aAAcxF,KAAKkjC,cACzCljC,KAAKwF,iBAAiB,aAAcxF,KAAKmjC,YACzCnjC,KAAKwF,iBAAiB,2BAA4BxF,KAAKojC,iBACvDpjC,KAAKwF,iBAAiB,qBAAsBxF,KAAKktB,aAAa3kB,KAAKvI,OACnEA,KAAKwF,iBAAiB,UAAWxF,KAAKqjC,WACtCrjC,KAAKwF,iBAAiB,0BAA2BxF,KAAKsjC,iBAGxD3+B,EAAS2oB,SAASxS,UAAY3W,IAAcO,EAAA,OAAaoW,WAMzDnW,EAAS2oB,SAASxS,UAAUoS,aAAe,SAAUM,GACnD,GAAIf,EAEAe,aAAgBI,aAClBnB,EAAYe,EACHA,GAAQA,EAAKf,YACtBA,EAAYe,EAAKf,WAIfA,GAAazsB,KAAK6S,SACpB4Z,EAAU0D,YAAYnwB,KAAK6S,SAG7B7S,KAAKysB,UAAYA,GAOnB9nB,EAAS2oB,SAASxS,UAAUyoB,aAAe,WACzC,MAAOvjC,MAAKysB,WAQd9nB,EAAS2oB,SAASxS,UAAUqS,QAAU,SAAUjc,GAC1ClR,KAAK6S,SAAW7S,KAAKujC,iBACvBvjC,KAAKkjC,aAAahyB,GAGlBlR,KAAKwjC,qBAQT7+B,EAAS2oB,SAASxS,UAAUuoB,UAAY,SAAUnyB,GAC5ClR,KAAK6S,UACP7S,KAAKyjC,qBACLzjC,KAAKmjC,eASTx+B,EAAS2oB,SAASxS,UAAUmoB,QAAU,SAAU/xB,KAQhDvM,EAAS2oB,SAASxS,UAAUooB,aAAe,SAAUhyB,GACnD,GAAKlR,KAAKujC,eAAV,CAEA,GAAIX,GAAc5iC,KAAK4iC,cAAgB5iC,KAAK6iC,OAASl+B,EAASokB,MAAME,OAAS,UAAY,UAEzFjpB,MAAK2iC,YAAa,EAClB3iC,KAAKysB,UAAU5iB,MAAM21B,OAASoD,EAE1B5iC,KAAKmiC,WACPniC,KAAK0iC,oBAAsB1iC,KAAK0iC,mBAAmBt9B,OACnDpF,KAAKwiC,kBAAoBxiC,KAAKwiC,iBAAiBr9B,SAG7CnF,KAAK6S,SAAW3B,EAAMwyB,WAAW1xB,SAAW,GAAKd,EAAMwyB,WAAWzxB,SAAW,IAC3EjS,KAAK6iC,OAASl+B,EAASokB,MAAMG,WAAalpB,KAAK6iC,OAASl+B,EAASokB,MAAMI,QACzEnpB,KAAK6S,QAAQhJ,MAAMkyB,QAAU,OAC7B/7B,KAAK6S,QAAQ8G,OAAS3Z,KAAK6S,QAAQ8G,KAAK9P,MAAMkyB,QAAU,SACxD/7B,KAAK6S,QAAQ6G,QAAU1Z,KAAK6S,QAAQ6G,MAAM7P,MAAMkyB,QAAU,SAG1D/7B,KAAK6S,QAAQ0pB,OAASv8B,KAAK6S,QAAQ8G,KAAKvG,YACxCpT,KAAK6S,QAAQ8wB,QAAU3jC,KAAK6S,QAAQ8G,KAAKpG,eAEzCvT,KAAK6S,QAAQhJ,MAAMkyB,QAAU,QAC7B/7B,KAAK6S,QAAQ8G,OAAS3Z,KAAK6S,QAAQ8G,KAAK9P,MAAMkyB,QAAU,QACxD/7B,KAAK6S,QAAQ6G,QAAU1Z,KAAK6S,QAAQ6G,MAAM7P,MAAMkyB,QAAU,QAG1D/7B,KAAK6S,QAAQ0pB,OAASv8B,KAAK6S,QAAQO,YACnCpT,KAAK6S,QAAQ8wB,QAAU3jC,KAAK6S,QAAQU,iBAS1C5O,EAAS2oB,SAASxS,UAAUqoB,WAAa,WAClCnjC,KAAKujC,iBAEVvjC,KAAK2iC,YAAa,EAClB3iC,KAAKysB,UAAU5iB,MAAM21B,OAAS,UAE1Bx/B,KAAKmiC,WACPniC,KAAKwiC,kBAAoBxiC,KAAKwiC,iBAAiBp9B,OAC/CpF,KAAK0iC,oBAAsB1iC,KAAK0iC,mBAAmBv9B,SAGjDnF,KAAK6S,UAAY7S,KAAK6S,QAAQ+wB,SAChC5jC,KAAK6S,QAAQhJ,MAAMkyB,QAAU,OAC7B/7B,KAAK6S,QAAQ8G,OAAS3Z,KAAK6S,QAAQ8G,KAAK9P,MAAMkyB,QAAU,QACxD/7B,KAAK6S,QAAQ6G,QAAU1Z,KAAK6S,QAAQ6G,MAAM7P,MAAMkyB,QAAU,QAE1D/7B,KAAKyjC,wBAST9+B,EAAS2oB,SAASxS,UAAUsoB,gBAAkB,SAAUlyB,GACtD,GAAKlR,KAAKujC,eAAV,CAEA,GAAI1wB,GAASgxB,EAAWC,CAExB9jC,MAAK6iC,KAAO3xB,EAAM2xB,KAElBhwB,EAAU7S,KAAK6S,QAEfgxB,EAAY7jC,KAAKysB,UAAUrZ,YAAc,EACzC0wB,EAAa9jC,KAAKysB,UAAUlZ,aAAe,EAEtCV,IAIAA,EAAQ8G,MAAS9G,EAAQ6G,QAC5B7G,EAAQ8G,KAAO9G,EAAQkxB,WAAU,GACjClxB,EAAQ6G,MAAQ7G,EAAQkxB,WAAU,IAGhC/jC,KAAK6iC,OAASl+B,EAASokB,MAAMG,WAAalpB,KAAK6iC,OAASl+B,EAASokB,MAAMI,QACzEtW,EAAQ8G,KAAK9P,MAAMkyB,QAAUlpB,EAAQhJ,MAAMkyB,QAC3ClpB,EAAQ6G,MAAM7P,MAAMkyB,QAAUlpB,EAAQhJ,MAAMkyB,QAC5ClpB,EAAQhJ,MAAMkyB,QAAU,SAExBlpB,EAAQhJ,MAAMkyB,QAAUlpB,EAAQ8G,KAAK9P,MAAMkyB,QAC3ClpB,EAAQ8G,KAAK9P,MAAMkyB,QAAU,OAC7BlpB,EAAQ6G,MAAM7P,MAAMkyB,QAAU,QAIhC/7B,KAAKgkC,iBAAiBH,EAAWC,GAEjC9jC,KAAKysB,UAAU0D,YAAYtd,EAAQ8G,MACnC3Z,KAAKysB,UAAU0D,YAAYtd,EAAQ6G,UAQrC/U,EAAS2oB,SAASxS,UAAUkpB,iBAAmB,SAAU7wB,EAAGtK,GAC1D,GAAK7I,KAAK6S,QAAQ0pB,QAAWv8B,KAAK6S,QAAQ8wB,SAAY3jC,KAAKujC,eAA3D,CAIA,GAAI5pB,GAAMC,EAAK/G,EAASvS,EAAOC,EAAQ6T,EAAOqY,CAE9CA,GAAYzsB,KAAKysB,UACjB5Z,EAAU7S,KAAK6S,QACfvS,EAAQuS,EAAQ0pB,OAAS,EACzBh8B,EAASsS,EAAQ8wB,QAAU,EAC3BvvB,MAAkC1J,KAA1BmI,EAAQoxB,cAA8BpxB,EAAQoxB,cAAgB,GAEtEtqB,EAAOxG,EAAI7S,EACXsZ,EAAM/Q,EAAItI,EAAS6T,EAEdpU,KAAK6iC,OAASl+B,EAASokB,MAAMG,WAAalpB,KAAK6iC,OAASl+B,EAASokB,MAAMI,SAC5EtW,EAAQ8G,OAAQ9G,EAAQ6G,OACtBvG,IAAMsZ,EAAUrZ,YAAc,GAAKvK,IAAM4jB,EAAUlZ,aAAe,EAUlEvT,KAAKkkC,gBAAgB,YAAarxB,EAAS,aAAe8G,EAAO,OAASC,EAAM,QAThFD,EAAO8S,EAAUrZ,YAAc,EAAI9S,GAAS6S,EAAIsZ,EAAUrZ,YAAc,GACxEwG,EAAM6S,EAAUlZ,aAAe,EAAIhT,EAAS6T,GAASvL,EAAI4jB,EAAUlZ,aAAe,GAElFvT,KAAKkkC,gBAAgB,YAAarxB,EAAQ8G,KAAM,aAAeA,EAAO,OAASC,EAAM,OAErFD,GAAQ8S,EAAUrZ,YAAc,EAEhCpT,KAAKkkC,gBAAgB,YAAarxB,EAAQ6G,MAAO,aAAeC,EAAO,OAASC,EAAM,UAY1FjV,EAAS2oB,SAASxS,UAAUopB,gBAAkB,SAAUriC,EAAMgR,EAASxQ,GACrE,GAAIwH,GAAQgJ,EAAQhJ,KAEP,eAAThI,IACFgI,EAAM8wB,gBAAkB9wB,EAAM+wB,YAAc/wB,EAAMgiB,UAAYxpB,IAQlEsC,EAAS2oB,SAASxS,UAAUqpB,QAAU,SAAUxL,GAC1C34B,KAAK6S,UACP7S,KAAK6S,QAAQysB,YAAc3G,IAO/Bh0B,EAAS2oB,SAASxS,UAAUspB,oBAAsB,SAAUv6B,GAC1D7J,KAAK4iC,YAAc/4B,GAQrBlF,EAAS2oB,SAASxS,UAAUupB,aAAe,SAAU1L,EAAMvkB,GACpDpU,KAAK6S,UACR7S,KAAK6S,QAAUlJ,SAASob,cAAc,OACtC/kB,KAAK6S,QAAQhJ,MAAMkyB,QAAU,OAC7B/7B,KAAK6S,QAAQhJ,MAAM0oB,MAAQ,OAC3BvyB,KAAK6S,QAAQhJ,MAAM+P,IAAM,EACzB5Z,KAAK6S,QAAQhJ,MAAM+uB,SAAW,MAC9B54B,KAAK6S,QAAQhJ,MAAMy6B,UAAY,MAC/BtkC,KAAK6S,QAAQhJ,MAAM06B,WAAa,kBAChCvkC,KAAK6S,QAAQhJ,MAAMy3B,WAAa,wCAChCthC,KAAK6S,QAAQhJ,MAAMqO,SAAW,WAC9BlY,KAAK6S,QAAQxJ,UAAUC,IAAI,qBAC3BtJ,KAAK6S,QAAQoxB,kBAA0Bv5B,KAAV0J,EAAsBA,EAAQ,IAG7DpU,KAAKmkC,QAAQxL,IAQfh0B,EAAS2oB,SAASxS,UAAU0pB,gBAAkB,SAAUC,EAAIrwB,GACrDpU,KAAK6S,UACR7S,KAAK6S,QAAU4xB,EAAGV,WAAU,GAC5B/jC,KAAK6S,QAAQhJ,MAAMkyB,QAAU,OAC7B/7B,KAAK6S,QAAQhJ,MAAM+P,IAAM,EACzB5Z,KAAK6S,QAAQhJ,MAAMqO,SAAW,WAC9BlY,KAAK6S,QAAQxJ,UAAUC,IAAI,qBAC3BtJ,KAAK6S,QAAQoxB,kBAA0Bv5B,KAAV0J,EAAsBA,EAAQ,KAO/DzP,EAAS2oB,SAASxS,UAAU4pB,mBAAqB,WAC3C1kC,KAAK6S,UACH7S,KAAK6S,QAAQ8G,OACf3Z,KAAKysB,UAAU6O,YAAYt7B,KAAK6S,QAAQ8G,MACxC3Z,KAAK6S,QAAQ8G,KAAO,MAGlB3Z,KAAK6S,QAAQ6G,QACf1Z,KAAKysB,UAAU6O,YAAYt7B,KAAK6S,QAAQ6G,OACxC1Z,KAAK6S,QAAQ6G,MAAQ,MAGvB1Z,KAAKysB,UAAU6O,YAAYt7B,KAAK6S,SAChC7S,KAAK6S,QAAU,OAOnBlO,EAAS2oB,SAASxS,UAAU0oB,iBAAmB,WACzCxjC,KAAK6S,UACP7S,KAAK6S,QAAQ+wB,QAAS,IAO1Bj/B,EAAS2oB,SAASxS,UAAU2oB,mBAAqB,WAC3CzjC,KAAK6S,UACP7S,KAAK6S,QAAQ+wB,QAAS,IAQ1Bj/B,EAAS2oB,SAASxS,UAAUuT,KAAO,SAAUphB,GAC3CA,EAAQA,GAAS,EAEbjN,KAAKmiC,WACPniC,KAAKgjC,eAAiBhjC,KAAKgjC,cAAc59B,OACzCpF,KAAK+iC,eAAiB/iC,KAAK+iC,cAAc91B,MAAMA,GAAO9H,UAQ1DR,EAAS2oB,SAASxS,UAAUwT,KAAO,SAAUrhB,GAC3CA,EAAQA,GAAS,EAEbjN,KAAKmiC,WACPniC,KAAK+iC,eAAiB/iC,KAAK+iC,cAAc39B,OACzCpF,KAAKgjC,eAAiBhjC,KAAKgjC,cAAc/1B,MAAMA,GAAO9H,UAO1DR,EAAS2oB,SAASxS,UAAUwoB,eAAiB,SAAUpyB,GACjDA,IACFlR,KAAK8iC,cAAgB5xB,EAAMqc,SAS/B5oB,EAAS2oB,SAASxS,UAAU6pB,MAAQ,SAAU79B,EAAUyG,GAClDvN,KAAK8iC,gBACP9iC,KAAK8iC,cAAc9iC,KAAKkY,SAAUpR,EAAUyG,GAC5CvN,KAAKqjC,cAOT1+B,EAAS2oB,SAASxS,UAAUoC,QAAU,WACpCld,KAAK0kC,qBACL1kC,KAAKkiB,SAAShF,UAEVld,KAAK0iB,QACP1iB,KAAK0iB,OAAOrY,OAAOrK,UAGnB,WA0BJ2E,EAASigC,OAAS,SAAU/T,GAG1B,GAFAnsB,EAAA,gBAAsBmI,KAAK7M,OAEtB0E,EAGH,WAFA+E,SAAQwb,MAAM,qBAKhB,IAAIwH,EAEJoE,GAAUA,MACVA,EAAQgU,eAAoCn6B,KAAvBmmB,EAAQgU,YAA2BhU,EAAQgU,WAChEhU,EAAQiU,eAAiBjU,EAAQiU,iBAAoB,aAAc,UAAW,SAC9EjU,EAAQkU,uBAAoDr6B,KAA/BmmB,EAAQkU,oBAAmClU,EAAQkU,mBAChFlU,EAAQmU,qBAAgDt6B,KAA7BmmB,EAAQmU,kBAAiCnU,EAAQmU,iBAC5EnU,EAAQoU,mBAA4Cv6B,KAA3BmmB,EAAQoU,gBAA+BpU,EAAQoU,eACxEpU,EAAQqU,eAAiBrU,EAAQqU,gBAAkB,GACnDrU,EAAQsU,UAAYtU,EAAQsU,WAAa,GACzCtU,EAAQuU,gBAAkBvU,EAAQuU,kBAAmB,EACrDvU,EAAQwU,cAAgBxU,EAAQwU,gBAAiB,EACjDxU,EAAQ0D,UAAY1D,EAAQ0D,WAAa,KACzC1D,EAAQyU,sBAAkD56B,KAA9BmmB,EAAQyU,mBAAkCzU,EAAQyU,kBAC9EzU,EAAQ0U,kBAA0C76B,KAA1BmmB,EAAQ0U,eAA8B1U,EAAQ0U,cACtE1U,EAAQ2U,cAAgB3U,EAAQ2U,eAAiB,GACjD3U,EAAQ4U,OAAS5U,EAAQ4U,OAAS5U,EAAQ4U,OAAS,OAEnDzlC,KAAK6wB,QAAUA,EAGXA,EAAQpE,WACVA,EAAYoE,EAAQpE,UACpBA,EAAU8P,OAAS9P,EAAUrZ,YAC7BqZ,EAAUkX,QAAUlX,EAAUlZ,eAE9BkZ,EAAY9iB,SAASob,cAAc,OACnC0H,EAAUpjB,UAAUC,IAAI,sBACxBmjB,EAAU5iB,MAAMvJ,MAAQ,OACxBmsB,EAAU5iB,MAAMtJ,OAAS,OACzBksB,EAAU8P,OAAS5xB,OAAOsjB,WAC1BxB,EAAUkX,QAAUh5B,OAAO+6B,YAC3B/7B,SAASmJ,KAAKqd,YAAY1D,IAG5BzsB,KAAKysB,UAAYA,EAEjBzsB,KAAKgb,OAAS6V,EAAQ7V,QAAU,GAAItW,GAAA,kBAAwB1E,KAAK6wB,QAAQsU,UAAWnlC,KAAKysB,UAAUrZ,YAAcpT,KAAKysB,UAAUlZ,aAAc,EAAG,KACjJvT,KAAKwiB,MAAQqO,EAAQrO,OAAS,GAAI9d,GAAA,MAClC1E,KAAKugB,SAAWsQ,EAAQtQ,UAAY,GAAI7b,GAAA,eAAsB+W,OAAO,EAAMkqB,WAAW,IAEtF3lC,KAAK4lC,kBAAoB/U,EAAQ2U,cAEjCxlC,KAAK6lC,WACL7lC,KAAK8lC,kBAAoB9lC,KAAK6wB,QAAQwU,cAEtCrlC,KAAK6iC,KAAOl+B,EAASokB,MAAME,OAE3BjpB,KAAK+lC,cACL/lC,KAAKgmC,0BAELhmC,KAAKimC,gBACLjmC,KAAKkmC,aAELlmC,KAAKmmC,SACLnmC,KAAKomC,OACLpmC,KAAKqmC,SACLrmC,KAAKsmC,OAELtmC,KAAKumC,YACLvmC,KAAKwmC,SACLxmC,KAAKymC,kBACLzmC,KAAK0mC,YAEL1mC,KAAK2mC,UAAY,GAAIjiC,GAAA,UACrB1E,KAAK4mC,eAAiB,GAAIliC,GAAA,QAC1B1E,KAAK8yB,UAAY,GAAIpuB,GAAA,QACrB1E,KAAK6mC,mBACL7mC,KAAK8mC,mBAEL9mC,KAAK+mC,cAAgB,GAAIriC,GAAA,QACzB1E,KAAKgnC,2BAA6B,GAAItiC,GAAA,QAEtC1E,KAAKinC,iBAGLjnC,KAAKknC,mBAAqBlnC,KAAKiR,YAAY1I,KAAKvI,MAChDA,KAAKmnC,iBAAmBnnC,KAAK2S,UAAUpK,KAAKvI,MAC5CA,KAAKonC,mBAAqBpnC,KAAK0S,YAAYnK,KAAKvI,MAChDA,KAAKqnC,sBAAwBrnC,KAAKqzB,eAAe9qB,KAAKvI,MACtDA,KAAKsnC,iBAAmBtnC,KAAKuV,UAAUhN,KAAKvI,MAC5CA,KAAKunC,eAAiBvnC,KAAK4U,QAAQrM,KAAKvI,MACxCA,KAAKwnC,YAAcxnC,KAAKg8B,MAAMzzB,KAAKvI,MACjCgS,QAAShS,KAAKysB,UAAUrZ,YAAc,EACtCnB,QAASjS,KAAKysB,UAAUlZ,aAAe,IAIzCvT,KAAKynC,iBAAkB,EAGvBznC,KAAK0nC,mBAAqB,GAAI19B,GAAMe,MACpC/K,KAAK2nC,iBAAmB,GAAI39B,GAAMe,MAGlC/K,KAAKugB,SAASqnB,cAAcj9B,OAAOk9B,kBACnC7nC,KAAKugB,SAAS8B,QAAQriB,KAAKysB,UAAUrZ,YAAapT,KAAKysB,UAAUlZ,cACjEvT,KAAKugB,SAASunB,cAAc,EAAU,GACtC9nC,KAAKugB,SAASwnB,aAAc,EAG5B/nC,KAAKugB,SAAS5P,WAAWtH,UAAUC,IAAI,mBACvCtJ,KAAKugB,SAAS5P,WAAW9G,MAAMkyB,QAAU,QACzC/7B,KAAKysB,UAAU5iB,MAAMq1B,gBAAkB,OACvCl/B,KAAKysB,UAAU0D,YAAYnwB,KAAKugB,SAAS5P,YAGzC3Q,KAAK+lC,cAAgB,GAAIrhC,GAAA,cAAoB1E,KAAKgb,OAAQhb,KAAKysB,WAC/DzsB,KAAK+lC,cAAc5jC,KAAO,QAC1BnC,KAAK+lC,cAActvB,YAAc,EACjCzW,KAAK+lC,cAAcxzB,OAAQ,EAC3BvS,KAAKgmC,0BAA4B,GAAIthC,GAAA,0BAAgC1E,KAAKgb,OAAQhb,KAAKysB,WACvFzsB,KAAKgmC,0BAA0B7jC,KAAO,qBACtCnC,KAAKgmC,0BAA0B10B,SAAU,EACzCtR,KAAKgb,OAAO9C,SAASoC,EAAI,EAGrBta,KAAK6wB,QAAQmX,kBACfv+B,QAAQC,KAAK,sCAIf1J,KAAKmmC,UAAanmC,KAAK+lC,cAAe/lC,KAAKgmC,2BAC3ChmC,KAAKioC,QAAUjoC,KAAK+lC,cAGpB/lC,KAAKimC,gBAAkB,GAAIvhC,GAAA,gBAAsB1E,KAAKugB,UACtDvgB,KAAKimC,gBAAgB5jB,QAAQriB,KAAKysB,UAAUrZ,YAAapT,KAAKysB,UAAUlZ,cAGxEvT,KAAKkmC,aAAe,GAAIxhC,GAAA,aAAmB1E,KAAKugB,UAChDvgB,KAAKkmC,aAAa7jB,QAAQriB,KAAKysB,UAAUrZ,YAAapT,KAAKysB,UAAUlZ,cAErEvT,KAAKomC,OAASpmC,KAAKimC,gBAGnBjmC,KAAKkoC,aAGDloC,KAAK6wB,QAAQoU,iBACfjlC,KAAK+lC,cAAc/uB,cAAgBnI,KAAKE,GAAK,EAC7C/O,KAAK+lC,cAAc9uB,cAAgBpI,KAAKE,GAAK,IAIf,IAA5B/O,KAAK6wB,QAAQgU,YACf7kC,KAAKmoC,qBAAqBnoC,KAAK6wB,QAAQiU,gBAIrC9kC,KAAK6wB,QAAQ0U,eACfvlC,KAAKooC,mBAIHpoC,KAAK6wB,QAAQuU,iBACfplC,KAAKqoC,2BAIHroC,KAAK6wB,QAAQwU,cACfrlC,KAAKsoC,uBAELtoC,KAAKuoC,8BAGqB,YAAxBvoC,KAAK6wB,QAAQ4U,QACfzlC,KAAKwoC,mBAIPxoC,KAAKyoC,yBAGLzoC,KAAK0oC,QAAQ77B,KAAK7M,OAGpB2E,EAASigC,OAAO9pB,UAAY3W,IAAcO,EAAA,gBAAsBoW,WAEhEnW,EAASigC,OAAO9pB,UAAUC,YAAcpW,EAASigC,OAQjDjgC,EAASigC,OAAO9pB,UAAUxR,IAAM,SAAU0B,GACxC,GAAI0C,UAAUlG,OAAS,EAAG,CACxB,IAAK,GAAItI,GAAI,EAAGA,EAAIwO,UAAUlG,OAAQtI,IACpCc,KAAKsJ,IAAIoE,UAAWxO,GAGtB,OAAOc,MAGTA,KAAKwiB,MAAMlZ,IAAI0B,GAGXA,EAAOxF,kBACTwF,EAAOxF,iBAAiB,0BAA2BxF,KAAK2oC,aAAapgC,KAAKvI,OAIxEgL,YAAkBrG,GAASsnB,UAAYjhB,EAAOrF,eAChDqF,EAAOrF,eAAgB9D,KAAM,qBAAsB4qB,UAAWzsB,KAAKysB,YAIjD,aAAhBzhB,EAAOnJ,OACT7B,KAAK4oC,yBAAyB59B,GAEzBhL,KAAKqmC,UACRrmC,KAAK6oC,YAAY79B,KASvBrG,EAASigC,OAAO9pB,UAAUzQ,OAAS,SAAUW,GACvCA,EAAOzB,qBACTyB,EAAOzB,oBAAoB,0BAA2BvJ,KAAK2oC,aAAapgC,KAAKvI,OAG/EA,KAAKwiB,MAAMnY,OAAOW,IAOpBrG,EAASigC,OAAO9pB,UAAUqtB,qBAAuB,SAAU1mB,GACzD,GAAI5Q,GAAQ7Q,IAEZ,IAAIA,KAAKsmC,OAEP,WADA78B,SAAQC,KAAK,6BAIf1J,MAAKsmC,OAAS,GAAI3hC,GAAS+0B,OAAO15B,KAAKysB,WACvCzsB,KAAKsmC,OAAO9gC,iBAAiB,0BAA2BxF,KAAK2oC,aAAapgC,KAAKvI,OAC/EA,KAAKsmC,OAAOjM,gBACZ5Y,EAAMqM,QAAQ,SAAUgb,GACtBj4B,EAAMy1B,OAAO3K,iBAAiBmN,MAQlCnkC,EAASigC,OAAO9pB,UAAU+tB,YAAc,SAAUlhB,GAChD,GAAkBohB,GAAkB/oC,KAAKqmC,QAEzC,IAAkB,aAAd1e,EAAK9lB,MAAuBknC,IAAoBphB,EAAM,CAExD3nB,KAAKgpC,cAEL,IAAIC,GAAqB,QAArBA,KACFF,GAAmBA,EAAgB3Z,UACnCzH,EAAKpe,oBAAoB,mBAAoB0/B,GAG/CthB,GAAKniB,iBAAiB,mBAAoByjC,IAGzCjpC,KAAKqmC,SAAW1e,GAAMwH,YAQ3BxqB,EAASigC,OAAO9pB,UAAU6tB,aAAe,SAAUz3B,GAC7CA,EAAMqc,QAAUvtB,KAAMkR,EAAMqc,SAC9BvtB,KAAMkR,EAAMqc,QAASrc,EAAMsc,OAQ/B7oB,EAASigC,OAAO9pB,UAAUouB,wBAA0B,SAAUh4B,GAC5DlR,KAAKwiB,MAAMmL,SAAS,SAAU3iB,GACxBA,EAAOrF,eACTqF,EAAOrF,cAAcuL,MAU3BvM,EAASigC,OAAO9pB,UAAUquB,mBAAqB,SAAUC,EAAcvG,GACrE,GAII1G,GAJAlC,EAAWj6B,KAAKsmC,OAAOrM,SACvBoP,EAAkBpP,EAASpM,SAAU,GACrCyb,EAAerP,EAASpM,SAAU,EAItC,QAAqBnjB,KAAjB0+B,EAA4B,CAC9B,OAAQA,GACN,IAAK,GAEHjN,EAAOkN,EAAgB3N,QAAQ7N,SAAU,EAEzC,MAEF,KAAK,GAEHsO,EAAOkN,EAAgB3N,QAAQ7N,SAAU,EAEzC,MAEF,SAEEsO,EAAOkN,EAAgB3N,QAAQ7N,SAAU,GAK7Cwb,EAAgB3N,QAAQyF,cAAchF,GACtCkN,EAAgBxJ,kBAAkB1D,EAAKmD,aAGzC,OAAa50B,KAATm4B,EAAoB,CACtB,OAAQA,GACN,IAAKl+B,GAASokB,MAAMG,UAElBiT,EAAOmN,EAAa5N,QAAQ7N,SAAU,EAEtC,MAEF,KAAKlpB,GAASokB,MAAMI,OAElBgT,EAAOmN,EAAa5N,QAAQ7N,SAAU,EAEtC,MAEF,SAEEsO,EAAOmN,EAAa5N,QAAQ7N,SAAU,GAK1Cyb,EAAa5N,QAAQyF,cAAchF,GACnCmN,EAAazJ,kBAAkB1D,EAAKmD,eAQxC36B,EAASigC,OAAO9pB,UAAUyuB,aAAe,SAAU1G,GACjD,GAAI7iC,KAAK6iC,OAASA,EAAlB,CACA,GAAIA,IAASl+B,EAASokB,MAAME,OAAgC,WAAtBjpB,MAAKwpC,eAAiCxpC,MAAK6iC,KAAOA,CAExF,IAAItuB,GAAMvU,KAAKgb,OAAOzG,GAEtB,QAAQsuB,GACN,IAAKl+B,GAASokB,MAAMG,UAElBlpB,KAAKomC,OAASpmC,KAAKimC,gBACnBjmC,KAAKsoC,sBAEL,MAEF,KAAK3jC,GAASokB,MAAMI,OAElBnpB,KAAKomC,OAASpmC,KAAKkmC,aACnBlmC,KAAKsoC,sBAEL,MAEF,SAEEtoC,KAAKomC,OAAS,KACdpmC,KAAKypC,wBAKTzpC,KAAKmpC,uBAAmBz+B,GAAW1K,KAAK6iC,MASxC7iC,KAAKkpC,yBAA0BrnC,KAAM,2BAA4BghC,KAAM7iC,KAAK6iC,OAG5E7iC,KAAKgb,OAAOzG,IAAMA,EAAM,IACxBvU,KAAKomC,OAAO/jB,QAAQriB,KAAKysB,UAAUrZ,YAAapT,KAAKysB,UAAUlZ,cAC/DvT,KAAKF,SACLE,KAAKgb,OAAOzG,IAAMA,IAMpB5P,EAASigC,OAAO9pB,UAAU0uB,cAAgB,WACpCxpC,KAAK6iC,OAASl+B,EAASokB,MAAME,SAEjCjpB,KAAK6iC,KAAOl+B,EAASokB,MAAME,OAC3BjpB,KAAKypC,wBAELzpC,KAAKmpC,uBAAmBz+B,GAAW1K,KAAK6iC,MASxC7iC,KAAKkpC,yBAA0BrnC,KAAM,2BAA4BghC,KAAM7iC,KAAK6iC,OAE5E7iC,KAAKugB,SAAS8B,QAAQriB,KAAKysB,UAAUrZ,YAAapT,KAAKysB,UAAUlZ,cACjEvT,KAAKF,WAMP6E,EAASigC,OAAO9pB,UAAUwtB,qBAAuB,WAC3CtoC,KAAK6lC,QAAQ9Y,UACZ/sB,KAAK6lC,QAAQ/Q,eAAiB90B,KAAK6lC,QAAQtQ,eAEhDv1B,KAAK8lC,mBAAoB,EAGzB9lC,KAAK0pC,gCACL1pC,KAAK6lC,QAAQxX,OACbruB,KAAK2pC,uBACL3pC,KAAK4pC,uBAMPjlC,EAASigC,OAAO9pB,UAAU2uB,sBAAwB,WAChDzpC,KAAK8lC,mBAAoB,EAGpB9lC,KAAK6wB,QAAQwU,cAKhBrlC,KAAK4pC,sBAJL5pC,KAAK6lC,QAAQvX,OACbtuB,KAAK6pC,yBACL7pC,KAAKuoC,gCAUT5jC,EAASigC,OAAO9pB,UAAUgvB,gBAAkB,SAAUniC,GAChD3H,KAAKqmC,mBAAoB1hC,GAASisB,eAMpC5wB,KAAKqmC,SAAS1gC,eAAgB9D,KAAM,eAAgB8F,MAAOA,KAS/DhD,EAASigC,OAAO9pB,UAAUyW,oBAAsB,SAAUS,GACpDhyB,KAAKqmC,mBAAoB1hC,GAASisB,eAOpC5wB,KAAKqmC,SAAS1gC,eAAgB9D,KAAM,aAAcmwB,WAAYA,KASlErtB,EAASigC,OAAO9pB,UAAUivB,cAAgB,SAAU/X,GAOlDhyB,KAAKsmC,QAAUtmC,KAAKsmC,OAAO3gC,eAAgB9D,KAAM,eAAgBmwB,WAAYA,KAM/ErtB,EAASigC,OAAO9pB,UAAUkvB,kBAAoB,SAAUv6B,GAClDA,GACFzP,KAAK6mC,gBAAgB5nC,KAAKwQ,IAQ9B9K,EAASigC,OAAO9pB,UAAUmvB,qBAAuB,SAAUx6B,GACzD,GAAI8b,GAAQvrB,KAAK6mC,gBAAgBn+B,QAAQ+G,EAErCA,IAAM8b,GAAS,GACjBvrB,KAAK6mC,gBAAgBv8B,OAAOihB,EAAO,IAOvC5mB,EAASigC,OAAO9pB,UAAUovB,gBAAkB,WAM1ClqC,KAAKsmC,QAAUtmC,KAAKsmC,OAAO3gC,eAAgB9D,KAAM,wBAMnD8C,EAASigC,OAAO9pB,UAAUqvB,gBAAkB,WAM1CnqC,KAAKsmC,QAAUtmC,KAAKsmC,OAAO3gC,eAAgB9D,KAAM,wBAGnD8C,EAASigC,OAAO9pB,UAAUsvB,sBAAwB,SAAUpiC,GACtDhI,KAAKsmC,QACTtmC,KAAKsmC,OAAOvV,cACZ/wB,KAAKsmC,OAAOvV,aAAagN,eACvB/9B,KAAKsmC,OAAOvV,aAAagN,cAAcxzB,OAAOvC,IAQlDrD,EAASigC,OAAO9pB,UAAU8tB,yBAA2B,SAAUjhB,GAI7DA,EAAKniB,iBAAiB,mBAAoBxF,KAAKqqC,iBAAiB9hC,KAAKvI,OAGjE2nB,YAAgBhjB,GAASisB,gBAC3BjJ,EAAKniB,iBAAiB,mBAAoBxF,KAAKkqC,gBAAgB3hC,KAAKvI,OACpE2nB,EAAKniB,iBAAiB,QAAS,WACvBxF,KAAKqmC,mBAAoB1hC,GAASisB,eACtC5wB,KAAKmqC,gBAAgBt9B,KAAK7M,OAE5BuI,KAAKvI,SAOX2E,EAASigC,OAAO9pB,UAAUuvB,iBAAmB,WAC3CrqC,KAAK+lC,cAAcxvB,OAAO/C,KAAKxT,KAAKqmC,SAASnuB,WAO/CvT,EAASigC,OAAO9pB,UAAUwvB,WAAa,WACrC,MAAOtqC,MAAKioC,SAOdtjC,EAASigC,OAAO9pB,UAAUyvB,SAAW,WACnC,MAAOvqC,MAAKwiB,OAOd7d,EAASigC,OAAO9pB,UAAU0vB,UAAY,WACpC,MAAOxqC,MAAKgb,QAOdrW,EAASigC,OAAO9pB,UAAU2vB,YAAc,WACtC,MAAOzqC,MAAKugB,UAOd5b,EAASigC,OAAO9pB,UAAUyoB,aAAe,WACvC,MAAOvjC,MAAKysB,WAOd9nB,EAASigC,OAAO9pB,UAAU4vB,eAAiB,WACzC,MAAO1qC,MAAKioC,QAAQ9lC,MAOtBwC,EAASigC,OAAO9pB,UAAU6vB,mBAAqB,WAC7C,MAAO3qC,MAAKmmC,SAAUnmC,KAAK4qC,uBAAwBzoC,MAOrDwC,EAASigC,OAAO9pB,UAAU8vB,oBAAsB,WAC9C,GAAIzE,GAAU8B,EAAS4C,CAMvB,OAJA1E,GAAWnmC,KAAKmmC,SAChB8B,EAAUjoC,KAAKioC,QACf4C,EAAY1E,EAASz9B,QAAQu/B,GAAW,EAEhC4C,GAAa1E,EAAS3+B,OAAU,EAAIqjC,GAM9ClmC,EAASigC,OAAO9pB,UAAUgwB,aAAe,SAAUv2B,GACjDvU,KAAKgb,OAAOzG,IAAMA,EAClBvU,KAAKgb,OAAOvG,0BAOd9P,EAASigC,OAAO9pB,UAAUiwB,cAAgB,SAAUxf,GASlD,OARAA,EAASA,GAAS,GAAKA,EAAQvrB,KAAKmmC,SAAS3+B,OAAU+jB,EAAQ,EAE/DvrB,KAAKioC,QAAQ32B,SAAU,EAEvBtR,KAAKioC,QAAUjoC,KAAKmmC,SAAU5a,GAE9BvrB,KAAKioC,QAAQ32B,SAAU,EAEfia,GACN,IAAK5mB,GAASkkB,SAASnX,MAErB1R,KAAKgb,OAAO9C,SAAS1E,KAAKxT,KAAKqmC,SAASnuB,UACxClY,KAAKgb,OAAO9C,SAASoC,GAAK,CAE1B,MAEF,KAAK3V,GAASkkB,SAASC,kBAErB9oB,KAAKgb,OAAO9C,SAAS1E,KAAKxT,KAAKqmC,SAASnuB,UAS5ClY,KAAKioC,QAAQ19B,SAEbvK,KAAKmpC,mBAAmB5d,MAAO7gB,KAMjC/F,EAASigC,OAAO9pB,UAAUkwB,eAAiB,WACzChrC,KAAKioC,QAAQ32B,SAAU,GAMzB3M,EAASigC,OAAO9pB,UAAUmwB,kBAAoB,WAC5CjrC,KAAK+qC,cAAc/qC,KAAK4qC,wBAM1BjmC,EAASigC,OAAO9pB,UAAUowB,gBAAkB,SAAUC,GACpD,GAAInpB,GAASmpB,EAAYnzB,QACrBozB,EAAaprC,KAAKysB,UAAUrZ,YAAe,EAC3Ci4B,EAAarrC,KAAKysB,UAAUlZ,aAAe,CAQ/C,OANAyO,GAAOspB,QAAQtrC,KAAKgb,QAEpBgH,EAAO7O,EAAK6O,EAAO7O,EAAIi4B,EAAaA,EACpCppB,EAAOnZ,GAAMmZ,EAAOnZ,EAAIwiC,EAAcA,EACtCrpB,EAAO1H,EAAI,EAEJ0H,GAMTrd,EAASigC,OAAO9pB,UAAUywB,sBAAwB,SAAUC,GAK1D,MAJAxrC,MAAKgb,OAAOywB,mBAAmBxtB,WAAWje,KAAKgb,OAAO0wB,aACtD1rC,KAAKgnC,2BAA2B2E,iBAAiB3rC,KAAKgb,OAAO4wB,iBAAkB5rC,KAAKgb,OAAOywB,oBAC3FzrC,KAAK+mC,cAAc8E,cAAc7rC,KAAKgnC,4BAE/BwE,EAAOze,SAAW/sB,KAAK+mC,cAAc+E,iBAAiBN,IAM/D7mC,EAASigC,OAAO9pB,UAAUutB,yBAA2B,WACnDroC,KAAK+lC,cAAc1yB,cAAgB,EACnCrT,KAAK+lC,cAAc5uB,wBAA0B,GAM/CxS,EAASigC,OAAO9pB,UAAUotB,WAAa,WACrCloC,KAAK6lC,QAAU,GAAIlhC,GAASwvB,QAAQ,SAClCn0B,KAAK6wB,QAAQyU,kBACb3gC,EAASojB,UAAUQ,YACnB5jB,EAASojB,UAAUa,aACnB5oB,KAAK6wB,QAAQ0D,UACb,IACFv0B,KAAK6lC,QAAQ3tB,SAASoC,GAAK,GAC3Bta,KAAKgb,OAAO1R,IAAItJ,KAAK6lC,SACrB7lC,KAAKwiB,MAAMlZ,IAAItJ,KAAKgb,SAStBrW,EAASigC,OAAO9pB,UAAUixB,mBAAqB,SAAU/pB,EAAQlb,EAAUyG,GACzE,GAAIvN,KAAKioC,UAAYjoC,KAAK+lC,cAA1B,CAKI/jB,YAAkBrV,SACpB7F,EAAWkb,EAAQ,GACnBzU,EAASyU,EAAQ,GACjBA,EAASA,EAAQ,IAGnBlb,MAAwB4D,KAAb5D,EAAyBA,EAAW,IAC/CyG,EAASA,GAAUvD,EAAM8B,OAAOmD,YAAYV,GAE5C,IAAIsC,GAAOm7B,EAAIC,EAAIC,EAAKC,EAAKC,EAAIC,EAAIC,EAAMC,EAAIC,CAE/C37B,GAAQ7Q,KAERksC,EAAMlsC,KAAKgb,OAAOyxB,oBAClBN,EAAMD,EAAIl0B,QAEVs0B,EAAOtsC,KAAKqmC,SAASqG,mBAAmBnzB,IAAIvZ,KAAKgb,OAAO0xB,oBAExDN,EAAKpqB,EAAOhK,QAEZo0B,EAAGj5B,IAAM,EACTi5B,EAAG9iC,IAAIgjC,GAAMhtB,YACb+sB,EAAKD,EAAGp0B,QAERk0B,EAAIrjC,EAAI,EACRujC,EAAGvjC,EAAI,EAEPmjC,EAAKn9B,KAAKwL,MAAM+xB,EAAG9xB,EAAG8xB,EAAGj5B,GAAKtE,KAAKwL,MAAM6xB,EAAI5xB,EAAG4xB,EAAI/4B,GACpD64B,EAAKA,EAAKn9B,KAAKE,GAAKi9B,EAAK,EAAIn9B,KAAKE,GAAKi9B,EACvCA,EAAKA,GAAMn9B,KAAKE,GAAKi9B,EAAK,EAAIn9B,KAAKE,GAAKi9B,EACxCC,EAAKp9B,KAAKkL,IAAIoyB,EAAIQ,QAAQT,IAAQC,EAAItjC,EAAIwjC,EAAGxjC,GAAK,EAAIwjC,EAAGM,QAAQP,IAAOC,EAAGM,QAAQP,KACnFH,GAAMI,EAAGxjC,EAAIsjC,EAAItjC,EAAI,GAAK,EAE1B0jC,GAAO5yB,KAAM,EAAGpB,GAAI,GACpBi0B,GAAO7yB,KAAM,EAAGpB,GAAI,GAEpBvY,KAAK0nC,mBAAmBtiC,OACxBpF,KAAK2nC,iBAAiBviC,OAEtBpF,KAAK0nC,mBAAqB,GAAI19B,GAAMe,MAAMwhC,GACvChrC,IAAKoY,KAAMqyB,GAAMllC,GACjByG,OAAOA,GACPM,SAAS,WACRgD,EAAMo3B,QAAQ/0B,WAAWlT,KAAK2Z,KAAO6yB,EAAG7yB,MACxC6yB,EAAG7yB,KAAO3Z,KAAK2Z,OAEhBxU,QAEHnF,KAAK2nC,iBAAmB,GAAI39B,GAAMe,MAAMwhC,GACrChrC,IAAKgX,GAAI0zB,GAAMnlC,GACfyG,OAAOA,GACPM,SAAS,WACRgD,EAAMo3B,QAAQ30B,SAAStT,KAAKuY,GAAKi0B,EAAGj0B,IACpCi0B,EAAGj0B,GAAKvY,KAAKuY,KAEdpT,UASLR,EAASigC,OAAO9pB,UAAU8xB,2BAA6B,SAAU5hC,EAAQlE,EAAUyG,GACjF,GAAIs/B,IAA0B,CAQ9B,IANA7hC,EAAO8hC,kBAAkB,SAAUC,GAC7BA,EAAStf,mBACXof,GAA0B,KAI1BA,EAAyB,CAC3B,GAAIG,GAAgB,GAAItoC,GAAA,SAAe,EAAG,EAAG,EAE7C1E,MAAK+rC,mBAAmB/gC,EAAO0hC,mBAAmB5vB,SAASkwB,GAAgBlmC,EAAUyG,OAErFvN,MAAK+rC,mBAAmB/gC,EAAO0hC,mBAAoB5lC,EAAUyG,IAUjE5I,EAASigC,OAAO9pB,UAAUuY,eAAiB,SAAU4Z,EAAaC,GAChE,GAAI5sC,GAAOC,EAAQ4sC,CAEnBA,GAASntC,KAAKysB,UAAUpjB,UAAU+jC,SAAS,uBAAyBptC,KAAKysB,UAAUkQ,iBAE/DjyB,KAAhBuiC,OAA8CviC,KAAjBwiC,GAC/B5sC,EAAQ2sC,EACR1sC,EAAS2sC,EACTltC,KAAKysB,UAAU8P,OAAS0Q,EACxBjtC,KAAKysB,UAAUkX,QAAUuJ,IAEzB5sC,EAAQ6sC,EAASt+B,KAAKoL,IAAItQ,SAAS0jC,gBAAgBj6B,YAAazI,OAAOsjB,YAAc,GAAKjuB,KAAKysB,UAAUrZ,YACzG7S,EAAS4sC,EAASt+B,KAAKoL,IAAItQ,SAAS0jC,gBAAgB95B,aAAc5I,OAAO+6B,aAAe,GAAK1lC,KAAKysB,UAAUlZ,aAC5GvT,KAAKysB,UAAU8P,OAASj8B,EACxBN,KAAKysB,UAAUkX,QAAUpjC,GAG3BP,KAAKgb,OAAO2F,OAASrgB,EAAQC,EAC7BP,KAAKgb,OAAOvG,yBAEZzU,KAAKugB,SAAS8B,QAAQ/hB,EAAOC,IAGzBP,KAAK6wB,QAAQwU,eAAiBrlC,KAAK8lC,oBACrC9lC,KAAK4pC,qBAUP5pC,KAAK2F,eAAgB9D,KAAM,gBAAiBvB,MAAOA,EAAOC,OAAQA,IAClEP,KAAKwiB,MAAMmL,SAAS,SAAU3iB,GACxBA,EAAOrF,eACTqF,EAAOrF,eAAgB9D,KAAM,gBAAiBvB,MAAOA,EAAOC,OAAQA,OAK1EoE,EAASigC,OAAO9pB,UAAU0tB,iBAAmB,WAC3C,GAAI31B,GAAUlJ,SAASob,cAAc,MACrClS,GAAQhJ,MAAMqO,SAAW,WACzBrF,EAAQhJ,MAAM6P,MAAQ,OACtB7G,EAAQhJ,MAAM+P,IAAM,OACpB/G,EAAQhJ,MAAM0oB,MAAQ,OACtBvyB,KAAKysB,UAAU0D,YAAYtd,GAC3B7S,KAAKinC,iBAAmBp0B,GAM1BlO,EAASigC,OAAO9pB,UAAUwyB,uBAAyB,WACjD,GAAI5f,GAAY6f,EAAOC,EAAuBC,CAI9C,IAFA/f,EAAa1tB,KAAK2mC,UAAU+G,gBAAgB1tC,KAAKqmC,UAAU,GAEvD3Y,EAAWlmB,OAAS,EAWtB,OAVA+lC,EAAQ7f,EAAW,GAAG6f,MACtBC,EAAwBxtC,KAAKqmC,SAASqG,mBAGtCe,EAAiB,GAAI/oC,GAAA,UACjB6oC,EAAMp6B,EAAIq6B,EAAsBr6B,GAAGw6B,QAAQ,IAC5CJ,EAAM1kC,EAAI2kC,EAAsB3kC,GAAG8kC,QAAQ,IAC3CJ,EAAMjzB,EAAIkzB,EAAsBlzB,GAAGqzB,QAAQ,IAGtC3tC,KAAK6wB,QAAQ4U,QACnB,IAAK,UACHh8B,QAAQmkC,KAAKH,EAAet6B,EAAI,KAAOs6B,EAAe5kC,EAAI,KAAO4kC,EAAenzB,EAChF,MAEF,KAAK,UACHta,KAAKinC,iBAAiB3H,YAAcmO,EAAet6B,EAAI,KAAOs6B,EAAe5kC,EAAI,KAAO4kC,EAAenzB,IAS/G3V,EAASigC,OAAO9pB,UAAU7J,YAAc,SAAUC,GAChDA,EAAMK,iBAENvR,KAAK8yB,UAAU3f,EAAKjC,EAAMc,SAAW,EAAKd,EAAMc,QAAUd,EAAMyE,QAAQ,GAAG3D,QAC3EhS,KAAK8yB,UAAUjqB,EAAKqI,EAAMe,SAAW,EAAKf,EAAMe,QAAUf,EAAMyE,QAAQ,GAAG1D,QAC3EjS,KAAK8yB,UAAUjxB,KAAO,YACtB7B,KAAKg8B,MAAM9qB,IAGbvM,EAASigC,OAAO9pB,UAAUpI,YAAc,SAAUxB,GAChDA,EAAMK,iBACNvR,KAAK8yB,UAAUjxB,KAAO,YACtB7B,KAAKg8B,MAAM9qB,IAGbvM,EAASigC,OAAO9pB,UAAUnI,UAAY,SAAUzB,GAC9C,GAAsBrP,GAAlBgsC,GAAW,CAEf7tC,MAAK8yB,UAAUjxB,KAAO,UAEtBA,EAAQ7B,KAAK8yB,UAAU3f,GAAKjC,EAAMc,QAAUhS,KAAK6wB,QAAQqU,gBACzDllC,KAAK8yB,UAAU3f,GAAKjC,EAAMc,QAAUhS,KAAK6wB,QAAQqU,gBACjDllC,KAAK8yB,UAAUjqB,GAAKqI,EAAMe,QAAUjS,KAAK6wB,QAAQqU,gBACjDllC,KAAK8yB,UAAUjqB,GAAKqI,EAAMe,QAAUjS,KAAK6wB,QAAQqU,gBAChDh0B,EAAMmtB,gBACPr+B,KAAK8yB,UAAU3f,GAAKjC,EAAMmtB,eAAe,GAAGrsB,QAAUhS,KAAK6wB,QAAQqU,gBACnEllC,KAAK8yB,UAAU3f,GAAKjC,EAAMmtB,eAAe,GAAGrsB,QAAUhS,KAAK6wB,QAAQqU,gBACnEllC,KAAK8yB,UAAUjqB,GAAKqI,EAAMmtB,eAAe,GAAGpsB,QAAUjS,KAAK6wB,QAAQqU,gBACnEllC,KAAK8yB,UAAUjqB,GAAKqI,EAAMmtB,eAAe,GAAGpsB,QAAUjS,KAAK6wB,QAAQqU,eAC/D,YAAUx6B,GAGVwG,GAASA,EAAMqF,SAAWrF,EAAMqF,OAAOlN,UAAU+jC,SAAS,qBAE9Dl8B,EAAMK,iBAGJs8B,EADE38B,EAAMmtB,gBAAkD,IAAhCntB,EAAMmtB,eAAe72B,OACpCxH,KAAKg8B,OAAQhqB,QAASd,EAAMmtB,eAAe,GAAGrsB,QAASC,QAASf,EAAMmtB,eAAe,GAAGpsB,SAAWpQ,GAEnG7B,KAAKg8B,MAAM9qB,EAAOrP,GAG/B7B,KAAK8yB,UAAUjxB,KAAO,OAElBgsC,GAIS,UAAThsC,IACF7B,KAAK6wB,QAAQmU,kBAAoBhlC,KAAKqmC,UAAYrmC,KAAKqmC,SAASlY,2BAChEnuB,KAAK6wB,QAAQkU,oBAAsB/kC,KAAK8tC,sBAI5CnpC,EAASigC,OAAO9pB,UAAUkhB,MAAQ,SAAU9qB,EAAOrP,GACjD,GAAI6rB,GAAYqgB,EAAkBC,CAQlC,IANAhuC,KAAK4mC,eAAezzB,GAAMjC,EAAMc,QAAUhS,KAAKysB,UAAUwhB,YAAcjuC,KAAKysB,UAAUrZ,YAAe,EAAI,EACzGpT,KAAK4mC,eAAe/9B,IAAOqI,EAAMe,QAAUjS,KAAKysB,UAAUyhB,WAAaluC,KAAKysB,UAAUlZ,aAAgB,EAAI,EAE1GvT,KAAK2mC,UAAUwH,cAAcnuC,KAAK4mC,eAAgB5mC,KAAKgb,QAGlDhb,KAAKqmC,SAmHV,IA9GmB,cAAfn1B,EAAMrP,MAAwB8C,EAAS+K,MAAM0Z,uBAAyBppB,KAAKynC,kBAC7EznC,KAAKstC,yBAGP5f,EAAa1tB,KAAK2mC,UAAUyH,iBAAiBpuC,KAAKqmC,SAASxY,UAAU,GAErEkgB,EAAmB/tC,KAAKquC,sBAAsB3gB,GAE9CsgB,EAAatgB,EAAWlmB,OAAS,EAAKkmB,EAAW,GAAG1iB,OAASgjC,EAEjC,YAAxBhuC,KAAK8yB,UAAUjxB,OACbksC,GAAoB/tC,KAAKymC,oBAAsBsH,GAAoB/tC,KAAKymC,kBAAkB9gC,eAC5F3F,KAAKymC,kBAAkB9gC,eAAgB9D,KAAM,mBAAoB6hC,WAAYxyB,IAG/ElR,KAAKymC,sBAAoB/7B,IAGC,YAAxB1K,KAAK8yB,UAAUjxB,OACbmsC,GAAahuC,KAAK0mC,cAAgBsH,GAAahuC,KAAK0mC,YAAY/gC,eAClE3F,KAAK0mC,YAAY/gC,eAAgB9D,KAAM,YAAa6hC,WAAYxyB,IAGlElR,KAAK0mC,gBAAch8B,IAGR,UAAT7I,GACF7B,KAAKqmC,SAAS1gC,eAAgB9D,KAAM,QAAS6rB,WAAYA,EAAYgW,WAAYxyB,IAE7E68B,GAAoBA,EAAiBpoC,eACvCooC,EAAiBpoC,eAAgB9D,KAAM,eAAgB6hC,WAAYxyB,IAGjE88B,GAAaA,EAAUroC,eACzBqoC,EAAUroC,eAAgB9D,KAAM,QAAS6hC,WAAYxyB,MAGvDlR,KAAKqmC,SAAS1gC,eAAgB9D,KAAM,QAAS6rB,WAAYA,EAAYgW,WAAYxyB,KAE5ElR,KAAKumC,aAAe7Y,EAAWlmB,OAAS,GAAKxH,KAAKumC,cAAgBwH,GACxE/tC,KAAKumC,aAAqC,IAAtB7Y,EAAWlmB,UACxBxH,KAAKumC,YAAY5gC,gBACnB3F,KAAKumC,YAAY5gC,eAAgB9D,KAAM,aAAc6hC,WAAYxyB,IAGjElR,KAAK6lC,QAAQ5P,kBAGfj2B,KAAKumC,gBAAc77B,IAGjBqjC,GAAoBrgB,EAAWlmB,OAAS,IACtCxH,KAAKumC,cAAgBwH,IACvB/tC,KAAKumC,YAAcwH,EAEf/tC,KAAKumC,YAAY5gC,gBACnB3F,KAAKumC,YAAY5gC,eAAgB9D,KAAM,aAAc6hC,WAAYxyB,KAG7DlR,KAAK6wB,QAAQyU,mBAAqBtlC,KAAK6wB,QAAQwU,eAAiBrlC,KAAK8lC,oBACvE9lC,KAAK6lC,QAAQ9P,cAAc/1B,KAAKg8B,MAAMzzB,KAAKvI,KAAMkR,EAAO,YAKlC,cAAxBlR,KAAK8yB,UAAUjxB,MAAwB7B,KAAKymC,mBAAqBsH,IACnE/tC,KAAKymC,kBAAoBsH,EAErB/tC,KAAKymC,kBAAkB9gC,eACzB3F,KAAKymC,kBAAkB9gC,eAAgB9D,KAAM,oBAAqB6hC,WAAYxyB,KAItD,cAAxBlR,KAAK8yB,UAAUjxB,MAAwB7B,KAAK0mC,aAAesH,IAC7DhuC,KAAK0mC,YAAcsH,EAEfhuC,KAAK0mC,YAAY/gC,eACnB3F,KAAK0mC,YAAY/gC,eAAgB9D,KAAM,aAAc6hC,WAAYxyB,MAIzC,cAAxBlR,KAAK8yB,UAAUjxB,MAAwB7B,KAAK6wB,QAAQwU,iBAClD2I,GAAaA,EAAUroC,eACzBqoC,EAAUroC,eAAgB9D,KAAM,QAAS6hC,WAAYxyB,IAGnDlR,KAAKymC,mBAAqBzmC,KAAKymC,kBAAkB9gC,eACnD3F,KAAKymC,kBAAkB9gC,eAAgB9D,KAAM,mBAAoB6hC,WAAYxyB,IAG3ElR,KAAK0mC,aAAe1mC,KAAK0mC,YAAY/gC,eACvC3F,KAAK0mC,YAAY/gC,eAAgB9D,KAAM,YAAa6hC,WAAYxyB,OAKjE68B,GAAoB/tC,KAAKymC,mBAAqBzmC,KAAKymC,kBAAkB9gC,gBACxE3F,KAAKymC,kBAAkB9gC,eAAgB9D,KAAM,mBAAoB6hC,WAAYxyB,IAE7ElR,KAAKymC,sBAAoB/7B,KAGtBsjC,GAAahuC,KAAK0mC,aAAe1mC,KAAK0mC,YAAY/gC,gBACrD3F,KAAK0mC,YAAY/gC,eAAgB9D,KAAM,YAAa6hC,WAAYxyB,IAEhElR,KAAK0mC,gBAAch8B,KAKnBsjC,GAAaA,YAAqBrpC,GAAS2oB,UAG7C,GAFAttB,KAAKwmC,SAAWwH,EAEH,UAATnsC,EACF,OAAO,MAEA7B,MAAKwmC,UACdxmC,KAAKgpC,gBAITrkC,EAASigC,OAAO9pB,UAAUuzB,sBAAwB,SAAU3gB,GAG1D,IAAK,GAFDsgB,GAEK9uC,EAAI,EAAGA,EAAIwuB,EAAWlmB,OAAQtI,IACrC,GAAIwuB,EAAWxuB,GAAG6Z,UAAY,GAAK2U,EAAWxuB,GAAG8L,SAAW0iB,EAAWxuB,GAAG8L,OAAOsjC,YAAa,CAC5F,GAAI5gB,EAAWxuB,GAAG8L,OAAOyrB,QAAU/I,EAAWxuB,GAAG8L,OAAOyrB,OAAO6X,YAC7D,QACK,IAAI5gB,EAAWxuB,GAAG8L,OAAOyrB,SAAW/I,EAAWxuB,GAAG8L,OAAOyrB,OAAO6X,YAAa,CAClFN,EAAYtgB,EAAWxuB,GAAG8L,OAAOyrB,MACjC,OAEAuX,EAAYtgB,EAAWxuB,GAAG8L,MAC1B,OAKN,MAAOgjC,IAGTrpC,EAASigC,OAAO9pB,UAAUkuB,aAAe,SAAUtb,GAC7C1tB,KAAKwmC,WACPxmC,KAAKwmC,SAASrD,aAEdnjC,KAAKwmC,aAAW97B,KAQpB/F,EAASigC,OAAO9pB,UAAUgzB,iBAAmB,WAM3C9tC,KAAKsmC,QAAUtmC,KAAKsmC,OAAO3gC,eAAgB9D,KAAM,wBAGnD8C,EAASigC,OAAO9pB,UAAUvF,UAAY,SAAUrE,GAC1ClR,KAAK6wB,QAAQ4U,QAAkC,SAAxBzlC,KAAK6wB,QAAQ4U,QAAmC,YAAdv0B,EAAMq9B,MACjEvuC,KAAKynC,iBAAkB,IAI3B9iC,EAASigC,OAAO9pB,UAAUlG,QAAU,SAAU1D,GAC5ClR,KAAKynC,iBAAkB,GAMzB9iC,EAASigC,OAAO9pB,UAAUvQ,OAAS,WACjCP,EAAMO,SAENvK,KAAK6mC,gBAAgB/Y,QAAQ,SAAUlgB,GAAYA,MAEnD5N,KAAKioC,QAAQ19B,SAEbvK,KAAKwiB,MAAMmL,SAAS,SAAUI,GAC5B,GAAIA,YAAiBppB,GAAS2oB,UAChCS,EAAMlb,UACL7S,KAAKumC,cAAgBxY,GACW,SAAhCA,EAAMlb,QAAQhJ,MAAMkyB,SACnBhO,EAAMlb,QAAQ8G,MAA6C,SAArCoU,EAAMlb,QAAQ8G,KAAK9P,MAAMkyB,SAC/ChO,EAAMlb,QAAQ6G,OAA+C,SAAtCqU,EAAMlb,QAAQ6G,MAAM7P,MAAMkyB,SAC/C,GAAI/7B,KAAKurC,sBAAsBxd,GAAQ,CACrC,GAAI/L,GAAShiB,KAAKkrC,gBAAgBnd,EAAM2e,mBACxC3e,GAAMiW,iBAAiBhiB,EAAO7O,EAAG6O,EAAOnZ,OAExCklB,GAAMsV,aAGV96B,KAAKvI,QAMT2E,EAASigC,OAAO9pB,UAAUhb,OAAS,WAC7BE,KAAK6iC,OAASl+B,EAASokB,MAAMG,WAAalpB,KAAK6iC,OAASl+B,EAASokB,MAAMI,OACzEnpB,KAAKomC,OAAOtmC,OAAOE,KAAKwiB,MAAOxiB,KAAKgb,QAEpChb,KAAKugB,SAASzgB,OAAOE,KAAKwiB,MAAOxiB,KAAKgb,SAI1CrW,EAASigC,OAAO9pB,UAAU4tB,QAAU,WAClC1oC,KAAK8mC,mBAAqBn8B,OAAOtF,sBAAsBrF,KAAK0oC,QAAQngC,KAAKvI,OAEzEA,KAAKwuC,YAGP7pC,EAASigC,OAAO9pB,UAAU0zB,SAAW,WACnCxuC,KAAKuK,SACLvK,KAAKF,UAMP6E,EAASigC,OAAO9pB,UAAUytB,4BAA8B,WACtDvoC,KAAKysB,UAAUjnB,iBAAiB,YAAcxF,KAAKknC,oBAAoB,GACvElnC,KAAKysB,UAAUjnB,iBAAiB,YAAcxF,KAAKonC,oBAAoB,GACvEpnC,KAAKysB,UAAUjnB,iBAAiB,UAAYxF,KAAKmnC,kBAAkB,GACnEnnC,KAAKysB,UAAUjnB,iBAAiB,aAAexF,KAAKknC,oBAAoB,GACxElnC,KAAKysB,UAAUjnB,iBAAiB,WAAaxF,KAAKmnC,kBAAkB,IAMtExiC,EAASigC,OAAO9pB,UAAU4uB,8BAAgC,WACxD1pC,KAAKysB,UAAUljB,oBAAoB,YAAavJ,KAAKknC,oBAAoB,GACzElnC,KAAKysB,UAAUljB,oBAAoB,YAAavJ,KAAKonC,oBAAoB,GACzEpnC,KAAKysB,UAAUljB,oBAAoB,UAAWvJ,KAAKmnC,kBAAkB,GACrEnnC,KAAKysB,UAAUljB,oBAAoB,aAAcvJ,KAAKknC,oBAAoB,GAC1ElnC,KAAKysB,UAAUljB,oBAAoB,WAAYvJ,KAAKmnC,kBAAkB,IAMxExiC,EAASigC,OAAO9pB,UAAU6uB,qBAAuB,WAC/C3pC,KAAKgqC,kBAAkBhqC,KAAKwnC,cAM9B7iC,EAASigC,OAAO9pB,UAAU+uB,uBAAyB,WACjD7pC,KAAKiqC,qBAAqBjqC,KAAKwnC,cAMjC7iC,EAASigC,OAAO9pB,UAAU8uB,mBAAqB,WAC7C,GAAI6E,GAASC,CAEbD,GAAUzuC,KAAKysB,UAAUrZ,YAAc,EAAIpT,KAAKysB,UAAUwhB,WAC1DS,EAAU1uC,KAAKysB,UAAUlZ,aAAe,EAExCvT,KAAKiqC,qBAAqBjqC,KAAKwnC,aAC/BxnC,KAAKwnC,YAAcxnC,KAAKg8B,MAAMzzB,KAAKvI,MAAQgS,QAASy8B,EAASx8B,QAASy8B,IACtE1uC,KAAKgqC,kBAAkBhqC,KAAKwnC,cAM9B7iC,EAASigC,OAAO9pB,UAAU2tB,uBAAyB,WAEjD99B,OAAOnF,iBAAiB,SAAUxF,KAAKqnC,uBAAuB,GAG9D18B,OAAOnF,iBAAiB,UAAWxF,KAAKsnC,kBAAkB,GAC1D38B,OAAOnF,iBAAiB,QAASxF,KAAKunC,gBAAgB,IAMxD5iC,EAASigC,OAAO9pB,UAAU6zB,yBAA2B,WAEnDhkC,OAAOpB,oBAAoB,SAAUvJ,KAAKqnC,uBAAuB,GAGjE18B,OAAOpB,oBAAoB,UAAWvJ,KAAKsnC,kBAAkB,GAC7D38B,OAAOpB,oBAAoB,QAASvJ,KAAKunC,gBAAgB,IAM3D5iC,EAASigC,OAAO9pB,UAAUoC,QAAU,WAKlC,QAASmS,GAAkBrkB,GACzB,IAAK,GAAI9L,GAAI8L,EAAO6iB,SAASrmB,OAAS,EAAGtI,GAAK,EAAGA,IAC/CmwB,EAAiBrkB,EAAO6iB,SAAS3uB,IACjC8L,EAAOX,OAAOW,EAAO6iB,SAAS3uB,GAG5B8L,aAAkBrG,GAAS2oB,UAC7BtiB,EAAOkS,UAGTlS,EAAO2S,UAAY3S,EAAO2S,SAAST,UACnClS,EAAOkX,UAAYlX,EAAOkX,SAAShF,UAdrCld,KAAK2uC,2BAiBLtf,EAAiBrvB,KAAKwiB,OAGlBxiB,KAAKsmC,SACPtmC,KAAKsmC,OAAOppB,UACZld,KAAKsmC,OAAS,MAIZ5hC,EAAA,OAAeA,EAAA,MAAY4M,SAC7B5M,EAAA,MAAY0e,SAOhBze,EAASigC,OAAO9pB,UAAU8zB,QAAU,WAClC5uC,KAAKkd,UACLld,KAAKF,SACL6K,OAAOrF,qBAAqBtF,KAAK8mC,qBAMnCniC,EAASigC,OAAO9pB,UAAU+zB,kBAAoB,SAAUxI,GAClDA,YAAoB1hC,GAASisB,eAC/B5wB,KAAKmqC,kBAGH9D,IAAarmC,KAAKqmC,WACpBrmC,KAAKqmC,SAAW,OASpB1hC,EAASigC,OAAO9pB,UAAUg0B,iBAAmB,SAAUloB,EAAKhZ,GAC1D,GAAIgc,GAAU,GAAIU,eAClBV,GAAQe,UAAY,SAAUzZ,GAC5BtD,GAAYA,EAASsD,IAEvB0Y,EAAQW,KAAK,MAAO3D,GAAK,GACzBgD,EAAQoB,KAAK,OAMfrmB,EAASigC,OAAO9pB,UAAUstB,iBAAmB,WAG3C,QAAS2G,GAAmBC,GAC1B,GAA0B,IAAtBA,EAAWxpB,OAAf,CAEA,GAAIypB,GAAmBD,EAAWz4B,OAAO24B,YAAY7B,eACrD4B,GAAiBplC,MAAMvJ,MAAQuQ,EAAM+0B,kBAAoB,KACzDqJ,EAAiBplC,MAAMtJ,OAASsQ,EAAM+0B,kBAAoB,KAC1DqJ,EAAiBplC,MAAMqO,SAAW,WAClC+2B,EAAiBplC,MAAM+P,IAAM,OAC7Bq1B,EAAiBplC,MAAM8P,KAAO,OAC9Bs1B,EAAiBplC,MAAMolB,QAAU,MACjCggB,EAAiBplC,MAAM21B,OAAS,UAChCyP,EAAiBvoB,GAAK,oCAEtB7V,EAAM4b,UAAU0D,YAAY8e,EAE5B,IAAIE,GAAYF,EAAiBrR,cAAc,cAC3CwR,EAAgB,WAClBv+B,EAAM0J,OAAmC,KAA1B1J,EAAM+0B,kBACrB/0B,EAAMw+B,iBAAmBx+B,EAAMmK,OAAOK,SAASxS,EAAInE,EAAA,KAAWsX,SAAS,IACvEnL,EAAMy+B,SAAW5qC,EAAA,KAAWsX,SAASnL,EAAMmK,OAAOzG,KAClD1D,EAAM0+B,WAAa1+B,EAAMw+B,iBAAmBx+B,EAAMy+B,SAAW,EAC7Dz+B,EAAM2+B,YAAc3+B,EAAMw+B,iBAAmBx+B,EAAMy+B,SAAW,EAC9Dz+B,EAAM4+B,MAAQ5+B,EAAM0J,OAAS1L,KAAKC,IAAI+B,EAAM0+B,WAC5C1+B,EAAM6+B,MAAQ7+B,EAAM0J,OAAS1L,KAAKG,IAAI6B,EAAM0+B,WAC5C1+B,EAAM8+B,OAAS9+B,EAAM0J,OAAS1L,KAAKC,IAAI+B,EAAM2+B,YAC7C3+B,EAAM++B,OAAS/+B,EAAM0J,OAAS1L,KAAKG,IAAI6B,EAAM2+B,YAC7C3+B,EAAMg/B,WAAa,KAAOh/B,EAAM4+B,MAAQ,IAAM5+B,EAAM6+B,MAAQ,MAAQ7+B,EAAM0J,OAAS,IAAM1J,EAAM0J,OAAS,UAAY1J,EAAM8+B,OAAS,IAAM9+B,EAAM++B,OAE3I/+B,EAAM4+B,OAAS5+B,EAAM6+B,OAAS7+B,EAAM8+B,QAAU9+B,EAAM++B,QAAU/+B,EAAM0J,QACtE40B,EAAU3d,aAAa,IAAK3gB,EAAMg/B,YAItCh/B,GAAMm5B,kBAAkBoF,EAExB,IAAIU,GAAwB,WAC1B9vC,KAAK6J,MAAMolB,QAAU,KAGnB8gB,EAAwB,WAC1B/vC,KAAK6J,MAAMolB,QAAU,MAGvBggB,GAAiBzpC,iBAAiB,aAAcsqC,GAChDb,EAAiBzpC,iBAAiB,aAAcuqC,IA9ClD,GAAIl/B,GAAQ7Q,IAiDZA,MAAK8uC,iBAAiBnqC,EAASojB,UAAUY,cAAeomB,IAO1DpqC,EAASigC,OAAO9pB,UAAUk1B,kBAAoB,SAAUC,GACtD,GAAI9T,GAAOn8B,KAAKsmC,OAAOlK,iBAAiB6T,EAQxC,OANqB,UAAjBA,EAAOC,MACTlwC,KAAKsmC,OAAOvV,aAAaZ,YAAYgM,GAErCn8B,KAAKsmC,OAAOxM,WAAW3J,YAAYgM,GAG9BA,MAGV,QAAUr3B,GAAGE,EAAGrB,EAAGoB,GAAK,QAASgC,GAAGJ,EAAGR,GAAK,IAAKxC,EAAEgD,GAAI,CAAE,IAAK3B,EAAE2B,GAAI,CAAE,GAAIzB,GAAuB,kBAAZ1B,IAA0BA,CAAS,KAAK2C,GAAKjB,EAAG,MAAO1B,GAAEmD,GAAG,EAAK,IAAIzH,EAAG,MAAOA,GAAEyH,GAAG,EAAK,IAAIiC,GAAI,GAAIunC,OAAM,uBAAyBxpC,EAAI,IAAM,MAAMiC,GAAElH,KAAO,mBAAoBkH,EAAI,GAAID,GAAIhF,EAAEgD,IAAM5H,WAAciG,GAAE2B,GAAG,GAAGkG,KAAKlE,EAAE5J,QAAS,SAAU+F,GAAyB,MAAOiC,GAAnB/B,EAAE2B,GAAG,GAAG7B,IAAkBA,IAAM6D,EAAGA,EAAE5J,QAAS+F,EAAGE,EAAGrB,EAAGoB,GAAK,MAAOpB,GAAEgD,GAAG5H,QAA4D,IAAK,GAAnDG,GAAuB,kBAAZsE,IAA0BA,EAAkBmD,EAAI,EAAGA,EAAI5B,EAAEyC,OAAQb,IAAII,EAAEhC,EAAE4B,GAAK,OAAOI,KAAMqpC,GAAI,SAAU5sC,EAAS1E,EAAQC,GAgBjjB,QAASsxC,GAAcC,GACtBC,EAAK1jC,KAAK7M,MAES,gBAARswC,KACTA,GAAQ3X,KAAM2X,IAKhBtwC,KAAKwwC,KAAOC,KAAWH,GAGnBA,GAAKtwC,KAAKuK,OAAO+lC,GA3BtB,GAAII,GAAeltC,EAAQ,sBACvBmtC,EAAWntC,EAAQ,YACnBotC,EAAgBptC,EAAQ,gBACxBqtC,EAASrtC,EAAQ,4BACjBitC,EAASjtC,EAAQ,iBAEjBib,EAAWjb,EAAQ,kBACnBstC,EAAQttC,EAAQ,eAEhB+sC,EAAO7rC,EAAA,cAEX5F,GAAOC,QAAU,SAA6BuxC,GAC7C,MAAO,IAAID,GAAaC,IAkBzBK,EAASN,EAAcE,GAEvBF,EAAav1B,UAAUvQ,OAAS,SAAU+lC,GAQzC,GAPmB,gBAARA,KACTA,GAAQ3X,KAAM2X,IAIhBA,EAAMG,KAAWzwC,KAAKwwC,KAAMF,IAEvBA,EAAIrX,KACP,KAAM,IAAI8X,WAAU,qCAGtB/wC,MAAKu5B,OAASmX,EAAaJ,EAG3B,IAAIU,IAAsB,IAAdV,EAAIU,MAGZ/X,EAAOqX,EAAIrX,KAGXgY,EAAWhY,EAAKiY,OAAOC,OACvBC,EAAYnY,EAAKiY,OAAOG,OAGxBC,EAAStxC,KAAKu5B,OAAO+X,OAAOtP,OAAO,SAAUuP,GAC/C,GAAIC,GAASD,EAAM/jB,IACnB,OAAOgkB,GAAOlxC,MAAQkxC,EAAOjxC,OAAS,GAIxCP,MAAKyxC,cAAgBH,CAGrB,IAAI/vB,GAAY9C,EAAS8C,UAAU+vB,GAC/B5vB,EAAMjD,EAASiD,IAAI4vB,EAAQL,EAAUG,EAAWJ,GAChDU,EAAUd,GACZe,WAAW,EACX9vC,KAAM,SACN+f,MAAO0vB,EAAO9pC,QAShB,IALAqpC,EAAOtlB,MAAMvrB,KAAM0xC,EAAS,EAAG,UAC/Bb,EAAOe,KAAK5xC,KAAM,WAAYuhB,EAAW,GACzCsvB,EAAOe,KAAK5xC,KAAM,KAAM0hB,EAAK,IAGxB4uB,EAAIuB,WAAa,QAAU7xC,MAAKwhB,WAEnCxhB,KAAKqhB,gBAAgB,YAChB,IAAIivB,EAAIuB,UAAW,CACxB,GAAIC,GAAQrzB,EAASqzB,MAAMR,EAE3BT,GAAOe,KAAK5xC,KAAM,OAAQ8xC,EAAO,KAIpCzB,EAAav1B,UAAUwe,sBAAwB,WAClB,OAAxBt5B,KAAK+xC,iBACP/xC,KAAK+xC,eAAiB,GAAIrtC,GAAA,OAG5B,IAAI6c,GAAYvhB,KAAKwhB,WAAWtJ,SAASuJ,MACrCuwB,EAAWhyC,KAAKwhB,WAAWtJ,SAAS85B,QACxC,KAAKzwB,IAAcywB,GAAYzwB,EAAU/Z,OAAS,EAGhD,MAFAxH,MAAK+xC,eAAex3B,OAAS,MAC7Bva,MAAK+xC,eAAev7B,OAAO9Q,IAAI,EAAG,EAAG,EAGvCorC,GAAMmB,cAAc1wB,EAAWvhB,KAAK+xC,gBAChCG,MAAMlyC,KAAK+xC,eAAex3B,SAC5B9Q,QAAQwb,MAAM,iIAMjBorB,EAAav1B,UAAUue,mBAAqB,WAClB,OAArBr5B,KAAKmyC,cACPnyC,KAAKmyC,YAAc,GAAIztC,GAAA,KAGzB,IAAI0tC,GAAOpyC,KAAKmyC,YACZ5wB,EAAYvhB,KAAKwhB,WAAWtJ,SAASuJ,MACrCuwB,EAAWhyC,KAAKwhB,WAAWtJ,SAAS85B,QACxC,KAAKzwB,IAAcywB,GAAYzwB,EAAU/Z,OAAS,EAEhD,WADA4qC,GAAKC,WAGPvB,GAAMwB,WAAW/wB,EAAW6wB,MAE3BG,cAAe,EAAGC,iBAAkB,EAAG7B,SAAY,EAAG8B,qBAAsB,EAAGC,gBAAiB,GAAIC,eAAgB,GAAIC,2BAA4B,KACxJC,GAAI,SAAUrvC,EAAS1E,EAAQC,GAI7B,QAAS+zC,GAAQvxB,GAChB,GAAIK,GAAQL,EAAU/Z,OAASwqC,CAC/Be,GAAI74B,IAAI,GAAKqH,EAAU,GACvBwxB,EAAI74B,IAAI,GAAKqH,EAAU,GACvBwxB,EAAI94B,IAAI,GAAKsH,EAAU,GACvBwxB,EAAI94B,IAAI,GAAKsH,EAAU,EAEvB,KAAK,GAAIriB,GAAI,EAAGA,EAAI0iB,EAAO1iB,IAAK,CAC9B,GAAIiU,GAAIoO,EAAUriB,EAAI8yC,EAAW,GAC7BnpC,EAAI0Y,EAAUriB,EAAI8yC,EAAW,EACjCe,GAAI74B,IAAI,GAAKrL,KAAKqL,IAAI/G,EAAG4/B,EAAI74B,IAAI,IACjC64B,EAAI74B,IAAI,GAAKrL,KAAKqL,IAAIrR,EAAGkqC,EAAI74B,IAAI,IACjC64B,EAAI94B,IAAI,GAAKpL,KAAKoL,IAAI9G,EAAG4/B,EAAI94B,IAAI,IACjC84B,EAAI94B,IAAI,GAAKpL,KAAKoL,IAAIpR,EAAGkqC,EAAI94B,IAAI,KAhBpC,GAAI+3B,GAAW,EACXe,GAAQ74B,KAAM,EAAG,GAAID,KAAM,EAAG,GAmBlCnb,GAAOC,QAAQuzC,WAAa,SAAU/wB,EAAWkkB,GAChDqN,EAAOvxB,GACPkkB,EAAOvrB,IAAIxU,IAAIqtC,EAAI74B,IAAI,GAAI64B,EAAI74B,IAAI,GAAI,GACvCurB,EAAOxrB,IAAIvU,IAAIqtC,EAAI94B,IAAI,GAAI84B,EAAI94B,IAAI,GAAI,IAGxCnb,EAAOC,QAAQkzC,cAAgB,SAAU1wB,EAAWkkB,GACnDqN,EAAOvxB,EACP,IAAIyxB,GAAOD,EAAI74B,IAAI,GACf+4B,EAAOF,EAAI74B,IAAI,GACfg5B,EAAOH,EAAI94B,IAAI,GACfk5B,EAAOJ,EAAI94B,IAAI,GACf3Z,EAAQ4yC,EAAOF,EACfzyC,EAAS4yC,EAAOF,EAChBzrC,EAASqH,KAAKO,KAAK9O,EAAQA,EAAQC,EAASA,EAChDklC,GAAOjvB,OAAO9Q,IAAIstC,EAAO1yC,EAAQ,EAAG2yC,EAAO1yC,EAAS,EAAG,GACvDklC,EAAOlrB,OAAS/S,EAAS,QAG5B4rC,GAAI,SAAU5vC,EAAS1E,EAAQC,GAC7BD,EAAOC,QAAQ+yC,MAAQ,SAAgBR,GACtC,GAAIQ,GAAQ,GAAIhwB,cAA6B,EAAhBwvB,EAAO9pC,OAAa,GAC7CtI,EAAI,CAQR,OAPAoyC,GAAOxjB,QAAQ,SAAUyjB,GACvB,GAAI7qB,GAAK6qB,EAAM/jB,KAAK6lB,MAAQ,CAC5BvB,GAAM5yC,KAAOwnB,EACborB,EAAM5yC,KAAOwnB,EACborB,EAAM5yC,KAAOwnB,EACborB,EAAM5yC,KAAOwnB,IAERorB,GAGRhzC,EAAOC,QAAQ2iB,IAAM,SAAc4vB,EAAQL,EAAUG,EAAWJ,GAC/D,GAAItvB,GAAM,GAAII,cAA6B,EAAhBwvB,EAAO9pC,OAAa,GAC3CtI,EAAI,CA8BR,OA7BAoyC,GAAOxjB,QAAQ,SAAUyjB,GACvB,GAAIC,GAASD,EAAM/jB,KACf8lB,EAAM9B,EAAOr+B,EAAIq+B,EAAOlxC,MACxBizC,EAAM/B,EAAO3oC,EAAI2oC,EAAOjxC,OAGxBizC,EAAKhC,EAAOr+B,EAAI89B,EAChB1gC,EAAKihC,EAAO3oC,EAAIuoC,EAChBqC,EAAKH,EAAKrC,EACV3gC,EAAKijC,EAAKnC,CAEVJ,KACFzgC,GAAM6gC,EAAYI,EAAO3oC,GAAKuoC,EAC9B9gC,GAAM8gC,EAAYmC,GAAMnC,GAI1B1vB,EAAIxiB,KAAOs0C,EACX9xB,EAAIxiB,KAAOqR,EAEXmR,EAAIxiB,KAAOs0C,EACX9xB,EAAIxiB,KAAOoR,EAEXoR,EAAIxiB,KAAOu0C,EACX/xB,EAAIxiB,KAAOoR,EAEXoR,EAAIxiB,KAAOu0C,EACX/xB,EAAIxiB,KAAOqR,IAENmR,GAGR5iB,EAAOC,QAAQwiB,UAAY,SAAoB+vB,GAC9C,GAAI/vB,GAAY,GAAIO,cAA6B,EAAhBwvB,EAAO9pC,OAAa,GACjDtI,EAAI,CAyBR,OAxBAoyC,GAAOxjB,QAAQ,SAAUyjB,GACvB,GAAIC,GAASD,EAAM/jB,KAGfra,EAAIo+B,EAAMr5B,SAAS,GAAKs5B,EAAOkC,QAC/B7qC,EAAI0oC,EAAMr5B,SAAS,GAAKs5B,EAAOmC,QAG/BtrC,EAAImpC,EAAOlxC,MACXiG,EAAIirC,EAAOjxC,MAGfghB,GAAUriB,KAAOiU,EACjBoO,EAAUriB,KAAO2J,EAEjB0Y,EAAUriB,KAAOiU,EACjBoO,EAAUriB,KAAO2J,EAAItC,EAErBgb,EAAUriB,KAAOiU,EAAI9K,EACrBkZ,EAAUriB,KAAO2J,EAAItC,EAErBgb,EAAUriB,KAAOiU,EAAI9K,EACrBkZ,EAAUriB,KAAO2J,IAEZ0Y,QAGVqyB,GAAI,SAAUpwC,EAAS1E,EAAQC,GACA,kBAAzBoF,GAAAe,EAEHpG,EAAOC,QAAU,SAAmB80C,EAAMC,GACxCD,EAAKE,OAASD,EACdD,EAAK/4B,UAAY3W,IAAc2vC,EAAUh5B,WACvCC,aACE1Y,MAAOwxC,EACPG,YAAY,EACZC,UAAU,EACVC,cAAc,MAMpBp1C,EAAOC,QAAU,SAAmB80C,EAAMC,GACxCD,EAAKE,OAASD,CACd,IAAIK,GAAW,YACfA,GAASr5B,UAAYg5B,EAAUh5B,UAC/B+4B,EAAK/4B,UAAY,GAAIq5B,GACrBN,EAAK/4B,UAAUC,YAAc84B,QAIlCO,GAAI,SAAU5wC,EAAS1E,EAAQC,GAoB7B,QAASs1C,GAAY/D,GACpBtwC,KAAKsxC,UACLtxC,KAAKs0C,SAAWt0C,KAAKu0C,eAAehsC,KAAKvI,MACzCA,KAAKuK,OAAO+lC,GAwLb,QAASkE,GAAWryC,GACnBsC,IAAsB4vC,EAAWv5B,UAAW3Y,GAC1CsD,IAAKgvC,EAAQtyC,GACb+xC,cAAc,IAKjB,QAASO,GAAStyC,GACjB,MAAQ,IAAIuyC,WACV,mBAAqBvyC,EAAO,OAC5B,kBAAoBA,EACpB,KACA4pB,KAAK,SAGR,QAAS4oB,GAAc1b,EAAMvS,GAC5B,IAAKuS,EAAK2b,OAA+B,IAAtB3b,EAAK2b,MAAMptC,OAAgB,MAAO,KAErD,IAAIqtC,GAAWC,EAAS7b,EAAK2b,MAAOluB,EACpC,OAAImuB,IAAY,EAAY5b,EAAK2b,MAAMC,GAChC,KAGR,QAASE,GAAY9b,GACpB,IAAK,GAAI/5B,GAAI,EAAGA,EAAI81C,EAAUxtC,OAAQtI,IAAK,CACzC,GAAIwnB,GAAKsuB,EAAU91C,GAAG+1C,WAAW,GAC7BC,EAAMJ,EAAS7b,EAAK2b,MAAOluB,EAC/B,IAAIwuB,GAAO,EAAK,MAAOjc,GAAK2b,MAAMM,GAAK30C,OAEzC,MAAO,GAGR,QAAS40C,GAAWlc,GACnB,IAAK,GAAI/5B,GAAI,EAAGA,EAAIk2C,EAAS5tC,OAAQtI,IAAK,CACxC,GAAIwnB,GAAK0uB,EAASl2C,GAAG+1C,WAAW,GAC5BC,EAAMJ,EAAS7b,EAAK2b,MAAOluB,EAC/B,IAAIwuB,GAAO,EAAK,MAAOjc,GAAK2b,MAAMM,GAEpC,MAAO,GAGR,QAASG,GAAcpc,GACtB,IAAK,GAAI/5B,GAAI,EAAGA,EAAIo2C,EAAY9tC,OAAQtI,IAAK,CAC3C,GAAIwnB,GAAK4uB,EAAYp2C,GAAG+1C,WAAW,GAC/BC,EAAMJ,EAAS7b,EAAK2b,MAAOluB,EAC/B,IAAIwuB,GAAO,EAAK,MAAOjc,GAAK2b,MAAMM,GAAK30C,OAEzC,MAAO,GAGR,QAASg1C,GAAYtc,EAAMtf,EAAMD,GAChC,IAAKuf,EAAKuc,UAAqC,IAAzBvc,EAAKuc,SAAShuC,OAAgB,MAAO,EAG3D,KAAK,GADDiuC,GAAQxc,EAAKuc,SACRt2C,EAAI,EAAGA,EAAIu2C,EAAMjuC,OAAQtI,IAAK,CACrC,GAAIw2C,GAAOD,EAAMv2C,EACjB,IAAIw2C,EAAKC,QAAUh8B,GAAQ+7B,EAAKE,SAAWl8B,EAAS,MAAOg8B,GAAKxoC,OAElE,MAAO,GAGR,QAAS2oC,GAAcC,GACtB,MAAc,WAAVA,EAA6BC,EAAkC,UAAVD,EAA4BE,EAC9EC,EA9QR,GAAIC,GAAW1yC,EAAQ,gBACnB2yC,EAAQ3yC,EAAQ,SAChBsxC,EAAWtxC,EAAQ,oBAAoB,MACvC4yC,EAAS5yC,EAAQ,aAEjBwxC,GAAa,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACzEI,GAAY,IAAK,KACjBE,GAAe,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAEhFe,EAAS,KAAKpB,WAAW,GACzBqB,EAAW,IAAIrB,WAAW,GAC1BgB,EAAa,EACdF,EAAe,EACfC,EAAc,CAEjBl3C,GAAOC,QAAU,SAAuBuxC,GACvC,MAAO,IAAI+D,GAAW/D,IASvB+D,EAAWv5B,UAAUvQ,OAAS,SAAU+lC,GAOvC,GANAA,EAAM6F,GACJI,QAASv2C,KAAKs0C,UACbhE,GACHtwC,KAAKwwC,KAAOF,EACZtwC,KAAKwwC,KAAKgG,QAAUJ,EAAOp2C,KAAKwwC,KAAKgG,QAAS,IAEzClG,EAAIrX,KAAQ,KAAM,IAAIkX,OAAM,mCAEjC,IAAImB,GAAStxC,KAAKsxC,OACd3Y,EAAO2X,EAAI3X,MAAQ,GACnBM,EAAOqX,EAAIrX,IACfj5B,MAAKy2C,kBAAkBxd,EAEvB,IAAIyd,GAAQR,EAASQ,MAAM/d,EAAM2X,GAC7BqG,EAAWrG,EAAIhwC,OAAS,CAG5BgxC,GAAO9pC,OAAS,CAGhB,IAAIovC,GAAeF,EAAMG,OAAO,SAAUC,EAAMC,GAC9C,MAAOloC,MAAKoL,IAAI68B,EAAMC,EAAKz2C,MAAOq2C,IACjC,GAGCxjC,EAAI,EACJtK,EAAI,EACJmuC,EAAaZ,EAAO9F,EAAI0G,WAAY/d,EAAKiY,OAAO8F,YAChDC,EAAWhe,EAAKiY,OAAOgG,KACvBC,EAAYH,EAAaC,EACzBG,EAAgB9G,EAAI8G,eAAiB,EACrC72C,EAASy2C,EAAaN,EAAMlvC,OAAS2vC,EACrCrB,EAAQD,EAAa71C,KAAKwwC,KAAKsF,MAGnCjtC,IAAKtI,EAGLP,KAAKu8B,OAASqa,EACd52C,KAAK2jC,QAAUpjC,EACfP,KAAKq3C,WAAaL,EAAaC,EAC/Bj3C,KAAKs3C,UAAYL,EACjBj3C,KAAKu3C,SAAWxC,EAAW9b,GAC3Bj5B,KAAKw3C,WAAanC,EAAapc,GAC/Bj5B,KAAKy3C,YAAcT,EACnBh3C,KAAK03C,UAAYV,EAAaG,EAAYn3C,KAAKu3C,QAG/C,IAAI1wB,GAAO7mB,IACX02C,GAAM5oB,QAAQ,SAAUipB,EAAMY,GAO5B,IAAK,GAHDC,GAHAzyC,EAAQ4xC,EAAK5xC,MACb4H,EAAMgqC,EAAKhqC,IACX8qC,EAAYd,EAAKz2C,MAIZpB,EAAIiG,EAAOjG,EAAI6N,EAAK7N,IAAK,CAChC,GAAIwnB,GAAKiS,EAAKsc,WAAW/1C,GACrBqyC,EAAQ1qB,EAAKixB,SAAS7e,EAAMvS,EAChC,IAAI6qB,EAAO,CACLqG,IAAazkC,GAAKoiC,EAAWtc,EAAM2e,EAAUlxB,GAAI6qB,EAAM7qB,IAE3D,IAAIqxB,GAAK5kC,CACL2iC,KAAUC,EAAgBgC,IAAOnB,EAAeiB,GAAa,EAAa/B,IAAUE,IAAe+B,GAAOnB,EAAeiB,GAE7HvG,EAAOryC,MACLiZ,UAAW6/B,EAAIlvC,GACf2kB,KAAM+jB,EACNhmB,MAAOrsB,EACP63C,KAAMY,IAIRxkC,GAAKo+B,EAAMyG,SAAWZ,EACtBQ,EAAYrG,GAKhB1oC,GAAKmuC,EACL7jC,EAAI,IAENnT,KAAKi4C,YAAcvB,EAAMlvC,QAG1B6sC,EAAWv5B,UAAU27B,kBAAoB,SAAUxd,GAMlD,GAHAj5B,KAAKk4C,oBAAsB,KAC3Bl4C,KAAKm4C,kBAAoB,KAEpBlf,EAAK2b,OAA+B,IAAtB3b,EAAK2b,MAAMptC,OAA9B,CAKA,GAAI4wC,GAAQzD,EAAa1b,EAAMqd,IACvBnB,EAAUlc,IACVA,EAAK2b,MAAM,GAGfyD,EAAWr4C,KAAKwwC,KAAKgG,QAAU4B,EAAMJ,QACzCh4C,MAAKk4C,oBAAsBE,EAC3Bp4C,KAAKm4C,kBAAoBhC,EAAMiC,GAC7BjlC,EAAG,EACFtK,EAAG,EACHmvC,SAAUK,EACV3xB,GAAI2vB,EACL3C,QAAS,EACRC,QAAS,EACTrzC,MAAO,EACPC,OAAQ,MAIZ8zC,EAAWv5B,UAAUg9B,SAAW,SAAU7e,EAAMvS,GAC/C,GAAI6qB,GAAQoD,EAAa1b,EAAMvS,EAC/B,OAAI6qB,KAAiC7qB,IAAO2vB,EAAiBr2C,KAAKm4C,kBAA6BzxB,IAAO4vB,EAAmBt2C,KAAKk4C,oBACvH,OAGR7D,EAAWv5B,UAAUy5B,eAAiB,SAAU5b,EAAMxzB,EAAO4H,EAAKzM,GACjE,GAKIixC,GACAqG,EANAR,EAAgBp3C,KAAKwwC,KAAK4G,eAAiB,EAC3Cne,EAAOj5B,KAAKwwC,KAAKvX,KACjBqf,EAAS,EACTC,EAAW,EACX32B,EAAQ,CAIZ,KAAKqX,EAAK2b,OAA+B,IAAtB3b,EAAK2b,MAAMptC,OAC5B,OACErC,MAAOA,EACP4H,IAAK5H,EACL7E,MAAO,EAIXyM,GAAM8B,KAAKqL,IAAIye,EAAKnxB,OAAQuF,EAC5B,KAAK,GAAI7N,GAAIiG,EAAOjG,EAAI6N,EAAK7N,IAAK,CAChC,GAAIwnB,GAAKiS,EAAKsc,WAAW/1C,GACrBqyC,EAAQvxC,KAAK83C,SAAS7e,EAAMvS,EAEhC,IAAI6qB,EAAO,CAEEA,EAAMmC,OAEjB4E,IADWV,EAAYrC,EAAWtc,EAAM2e,EAAUlxB,GAAI6qB,EAAM7qB,IAAM,CAGlE,IAAI8xB,GAAUF,EAAS/G,EAAMyG,SAAWZ,EACpCqB,EAAYH,EAAS/G,EAAMjxC,KAG/B,IAAIm4C,GAAan4C,GAASk4C,GAAWl4C,EAAS,KAG9Cg4C,GAASE,EACTD,EAAWE,EACXb,EAAYrG,EAEd3vB,IAMF,MAFIg2B,KAAaW,GAAYX,EAAUlE,UAGrCvuC,MAAOA,EACP4H,IAAK5H,EAAQyc,EACbthB,MAAOi4C,KAKR,QAAS,SACV,YAAa,WACb,UAAW,WACX,YACA,cAAezqB,QAAQ0mB,KAoEtBkE,YAAa,EAAGC,mBAAoB,EAAGC,eAAgB,EAAGzC,MAAS,IACvE0C,GAAI,SAAUr1C,EAAS1E,EAAQC,GAC7BD,EAAOC,QAAU,SAAkB+5C,EAAKC,GACvC,MAAsB,gBAARD,GACVA,EACgB,gBAARC,GAAmBA,EAAM,QAGxCC,GAAI,SAAUx1C,EAAS1E,EAAQC,GAC7BD,EAAOC,QAAU,SAAkB2N,GAClC,IAAKA,GAAgC,gBAAbA,GAAyB,KAAM,IAAIyjC,OAAM,2CAEjE,OAAO,IAAIuE,UAAS,QAAS,QAAS,SACpC,qBACA,yCACA,mBAAqBhoC,EAAW,gBAChC,iBACA,aACAqf,KAAK,aAGVktB,GAAI,SAAUz1C,EAAS1E,EAAQC,GA4B7B,QAASm6C,GAAOvgB,EAAMwgB,EAAKh0C,EAAO4H,GAC/B,GAAImoC,GAAMvc,EAAKjwB,QAAQywC,EAAKh0C,EAC5B,QAAa,IAAT+vC,GAAcA,EAAMnoC,EAAcA,EAC/BmoC,EAGV,QAASkE,GAAcD,GACpB,MAAOE,GAAWnwC,KAAKiwC,GAG1B,QAASG,GAAK/C,EAAS5d,EAAMxzB,EAAO4H,EAAKzM,GAGtC,IAAK,GAFDo2C,MACA6C,EAAYp0C,EACPjG,EAAIiG,EAAOjG,EAAI6N,GAAO7N,EAAIy5B,EAAKnxB,OAAQtI,IAAK,CACjD,GAAIi6C,GAAMxgB,EAAK1qB,OAAO/O,GAClBs6C,EAAYC,EAAQvwC,KAAKiwC,EAI7B,IAAIK,GAAat6C,IAAM6N,EAAM,EAAG,CAC5B,GAAI2sC,GAAUF,EAAYt6C,EAAIA,EAAI,EAC9By6C,EAAWpD,EAAQ5d,EAAM4gB,EAAWG,EAASp5C,EACjDo2C,GAAMz3C,KAAK06C,GAEXJ,EAAYr6C,EAAI,GAGxB,MAAOw3C,GAGV,QAASkD,GAAQrD,EAAS5d,EAAMxzB,EAAO4H,EAAKzM,EAAOuiC,GAGhD,GAAI6T,MAEAmD,EAAYv5C,CAIhB,KAFa,WAATuiC,IAAqBgX,EAAYC,OAAOC,WAErC50C,EAAQ4H,GAAO5H,EAAQwzB,EAAKnxB,QAAQ,CAKvC,IAHA,GAAIwyC,GAAUd,EAAMvgB,EAAMshB,EAAa90C,EAAO4H,GAGvC5H,EAAQ60C,GACNZ,EAAazgB,EAAK1qB,OAAO9I,KAC9BA,GAIJ,IAAIw0C,GAAWpD,EAAQ5d,EAAMxzB,EAAO60C,EAASH,GAEzCH,EAAUv0C,GAASw0C,EAAS5sC,IAAM4sC,EAASx0C,OAC3C+0C,EAAYR,EAAUO,EAAYzyC,MAGtC,IAAIkyC,EAAUM,EAAS,CAEnB,KAAON,EAAUv0C,IACTi0C,EAAazgB,EAAK1qB,OAAOyrC,KAC7BA,GAEJ,IAAIA,IAAYv0C,EACR+0C,EAAY/0C,EAAQ80C,EAAYzyC,QAAQ0yC,IAC5CR,EAAUQ,MAIV,KAFAA,EAAYR,EAELA,EAAUv0C,GACRi0C,EAAazgB,EAAK1qB,OAAOyrC,EAAUO,EAAYzyC,UACpDkyC,IAIZ,GAAIA,GAAWv0C,EAAO,CAClB,GAAIkiB,GAASkvB,EAAQ5d,EAAMxzB,EAAOu0C,EAASG,EAC3CnD,GAAMz3C,KAAKooB,GAEfliB,EAAQ+0C,EAEZ,MAAOxD,GAIV,QAASyD,GAAWxhB,EAAMxzB,EAAO4H,EAAKzM,GAEnC,OACI6E,MAAOA,EACP4H,IAAK5H,EAHI0J,KAAKqL,IAAI5Z,EAAOyM,EAAM5H,IAhHtC,GAAIs0C,GAAU,KACVQ,EAAc,KACdZ,EAAa,IAEjBv6C,GAAOC,QAAU,SAAU45B,EAAM2X,GAE9B,MADYxxC,GAAOC,QAAQ23C,MAAM/d,EAAM2X,GAC1BnuB,IAAI,SAAU40B,GACvB,MAAOpe,GAAKyhB,UAAUrD,EAAK5xC,MAAO4xC,EAAKhqC,OACxCgf,KAAK,OAGXjtB,EAAOC,QAAQ23C,MAAQ,SAAmB/d,EAAM2X,GAI7C,GAHAA,EAAMA,MAGY,IAAdA,EAAIhwC,OAA4B,WAAbgwC,EAAIzN,KAAqB,QAEhDlK,GAAOA,GAAQ,EACf,IAAIr4B,GAA6B,gBAAdgwC,GAAIhwC,MAAqBgwC,EAAIhwC,MAAQw5C,OAAOC,UAC3D50C,EAAQ0J,KAAKoL,IAAI,EAAGq2B,EAAInrC,OAAS,GACjC4H,EAAyB,gBAAZujC,GAAIvjC,IAAmBujC,EAAIvjC,IAAM4rB,EAAKnxB,OACnDq7B,EAAOyN,EAAIzN,KAEX0T,EAAUjG,EAAIiG,SAAW4D,CAC7B,OAAa,QAATtX,EAAyByW,EAAI/C,EAAS5d,EAAMxzB,EAAO4H,EAAKzM,GAAuBs5C,EAAOrD,EAAS5d,EAAMxzB,EAAO4H,EAAKzM,EAAOuiC,SA+FjIwX,GAAI,SAAU72C,EAAS1E,EAAQC,GAK7B,QAASu7C,KAGN,IAAK,GAFD/jC,MAEKrX,EAAI,EAAGA,EAAIwO,UAAUlG,OAAQtI,IAAK,CACvC,GAAI4C,GAAS4L,UAAUxO,EAEvB,KAAK,GAAIqvC,KAAOzsC,GACRmoB,EAAepd,KAAK/K,EAAQysC,KAC5Bh4B,EAAOg4B,GAAOzsC,EAAOysC,IAKjC,MAAOh4B,GAjBVzX,EAAOC,QAAUu7C,CAEjB,IAAIrwB,GAAiBswB,OAAOz/B,UAAUmP,oBAkBxCuwB,IAAK,SAAUh3C,EAAS1E,EAAQC,IAC9B,SAAW07C,GA8DT,QAASC,GAAeC,GAEzB,MAAyB,yBADfJ,OAAOz/B,UAAU8/B,SAChB/tC,KAAK8tC,GAGf,QAASE,GAAevK,GAEzB,GAAIwK,EAAQ,MAAO3E,GAAM7F,GAAO9lB,aAAc,eAE9C,QAAqC,KAA1B7f,OAAO2f,eAAkC,KAAM,IAAI6lB,OAAM,4CAGpE,IAAI4K,GAAM,GAAIpwC,QAAO2f,cAErB,OADAywB,GAAIC,iBAAiB,sCACd7E,GACL8E,IAAKF,GACJzK,GA7EF,GAAI2K,GAAMz3C,EAAQ,OACd03C,EAAO,aACPC,EAAa33C,EAAQ,sBACrB43C,EAAW53C,EAAQ,oBACnB63C,EAAa73C,EAAQ,uBACrB83C,EAAiB93C,EAAQ,mBACzB2yC,EAAQ3yC,EAAQ,SAEhBs3C,EAAQ,WACb,MAAOnwC,QAAO2f,gBAAkB,mBAAqB,IAAIA,kBAGxDxrB,GAAOC,QAAU,SAAUuxC,EAAKiL,GACjCA,EAAmB,kBAAPA,GAAoBA,EAAKL,EAElB,gBAAR5K,GAAoBA,GAAQkL,IAAKlL,GAAkBA,IAAOA,MAElDA,EAAImL,SACHnL,EAAMuK,EAAcvK,IAExC2K,EAAI3K,EAAK,SAAUoL,EAAKC,EAAK7oC,GAC3B,GAAI4oC,EAAO,MAAOH,GAAGG,EACrB,KAAK,KAAKxyC,KAAKyyC,EAAIC,YAAe,MAAOL,GAAG,GAAIpL,OAAM,qBAAuBwL,EAAIC,YACjF,KAAK9oC,EAAQ,MAAOyoC,GAAG,GAAIpL,OAAM,kBAEjC,IAAIsL,IAAS,CAIb,IAAIf,EAAc5nC,GAAO,CACvB,GAAI2O,GAAQ,GAAImJ,YAAW9X,EAC3BA,GAAO,GAAI2nC,GAAOh5B,EAAO,UAKvB65B,EAAexoC,KACjB2oC,GAAS,EAEW,gBAAT3oC,KAAqBA,EAAO,GAAI2nC,GAAO3nC,EAAM,YAIrD2oC,IAEChB,EAAOoB,SAAS/oC,KAASA,EAAOA,EAAK8nC,SAAStK,EAAIwL,WACtDhpC,EAAOA,EAAKipC,OAGd,IAAI10B,EACJ,KACE,GAAIxlB,GAAO85C,EAAIK,QAAQ,eACT30B,GAAVo0B,EAAmBJ,EAAWvoC,GAAiB,OAAO5J,KAAKrH,IAA4B,MAAnBiR,EAAK7E,OAAO,GAAuBuiB,KAAKC,MAAM3d,GAAiB,MAAM5J,KAAKrH,IAA4B,MAAnBiR,EAAK7E,OAAO,GAAuBmtC,EAAStoC,GAAwBqoC,EAAWroC,GAC1O,MAAOhO,GACPy2C,EAAG,GAAIpL,OAAM,sBAAwBrrC,EAAE8gB,UACvC21B,EAAKL,EAEPK,EAAG,KAAMl0B,QAsBTxa,KAAK7M,KAAMwD,EAAQ,UAAUi3C,UAC9BwB,kBAAmB,GAAIpL,OAAU,GAAIqL,qBAAsB,GAAIC,sBAAuB,GAAIC,mBAAoB,GAAInB,IAAO,GAAI9E,MAAS,KAC1IkG,IAAK,SAAU74C,EAAS1E,EAAQC,IAC9B,SAAW07C,GACT,GAAI6B,GAAQ94C,EAAQ,gBAChB+4C,EAAS,GAAI9B,IAAQ,GAAI,GAAI,GAAI,GAErC37C,GAAOC,QAAU,SAAUy9C,GAC5B,MAAmB,gBAARA,GAAmD,QAAxBA,EAAIpC,UAAU,EAAG,GAChDoC,EAAIh1C,OAAS,GAAK80C,EAAME,EAAIC,MAAM,EAAG,GAAIF,MAE9C1vC,KAAK7M,KAAMwD,EAAQ,UAAUi3C,UAC9B5J,OAAU,GAAI6L,eAAgB,KAClCC,IAAK,SAAUn5C,EAAS1E,EAAQC,GAC9B,GAAI07C,GAASj3C,EAAQ,UAAUi3C,MAE/B37C,GAAOC,QAAU,SAAUmG,EAAG6D,GAC3B,GAAK0xC,EAAOoB,SAAS32C,IAChBu1C,EAAOoB,SAAS9yC,GAArB,CACA,GAAwB,kBAAb7D,GAAE03C,OAAuB,MAAO13C,GAAE03C,OAAO7zC,EACpD,IAAI7D,EAAEsC,SAAWuB,EAAEvB,OAAQ,OAAO,CAElC,KAAK,GAAItI,GAAI,EAAGA,EAAIgG,EAAEsC,OAAQtI,IAC1B,GAAIgG,EAAEhG,KAAO6J,EAAE7J,GAAI,OAAO,CAG9B,QAAO,MAER2xC,OAAU,KACdgM,IAAK,SAAUr5C,EAAS1E,EAAQC,GAsC9B,QAAS+9C,GAAW/F,EAAM7B,GAEzB,KADA6B,EAAOA,EAAKgG,QAAQ,OAAQ,KAAKhB,QACpB,MAAO,KAEpB,IAAI3D,GAAQrB,EAAKruC,QAAQ,IACzB,KAAe,IAAX0vC,EAAgB,KAAM,IAAIjI,OAAM,wBAA0B+E,EAE9D,IAAI3G,GAAMwI,EAAKqD,UAAU,EAAGhC,EAE5BrB,GAAOA,EAAKqD,UAAUhC,EAAQ,GAG9BrB,EAAOA,EAAKgG,QAAQ,2BAA4B,IAChDhG,EAAOA,EAAKiG,MAAM,KAClBjG,EAAOA,EAAK50B,IAAI,SAAU86B,GACxB,MAAOA,GAAIlB,OAAOmB,MAAO,kCAI3B,KAAK,GADD1vB,MACKtuB,EAAI,EAAGA,EAAI63C,EAAKvvC,OAAQtI,IAAK,CACpC,GAAIi+C,GAAKpG,EAAK73C,EACJ,KAANA,EACFsuB,EAAKvuB,MACHsvC,IAAK4O,EAAG,GACR3vB,KAAM,KAECtuB,IAAM63C,EAAKvvC,OAAS,EAC7BgmB,EAAKA,EAAKhmB,OAAS,GAAGgmB,KAAO4vB,EAAUD,EAAG,KAE1C3vB,EAAKA,EAAKhmB,OAAS,GAAGgmB,KAAO4vB,EAAUD,EAAG,IAC1C3vB,EAAKvuB,MACHsvC,IAAK4O,EAAG,GACR3vB,KAAM,MAKZ,GAAI6vB,IACF9O,IAAKA,EACL/gB,QAOF,OAJAA,GAAKM,QAAQ,SAAU1lB,GACrBi1C,EAAI7vB,KAAKplB,EAAEmmC,KAAOnmC,EAAEolB,OAGf6vB,EAGR,QAASD,GAAW5vB,GACnB,MAAKA,IAAwB,IAAhBA,EAAKhmB,OAEQ,IAAtBgmB,EAAK9kB,QAAQ,MAAoC,IAAtB8kB,EAAK9kB,QAAQ,KAAqB8kB,EAAK4sB,UAAU,EAAG5sB,EAAKhmB,OAAS,IACtE,IAAvBgmB,EAAK9kB,QAAQ,KAAsB40C,EAAa9vB,GAC7C+Q,SAAS/Q,EAAM,IAJmB,GAO1C,QAAS8vB,GAAc9vB,GACtB,MAAOA,GAAKwvB,MAAM,KAAK76B,IAAI,SAAUo7B,GACnC,MAAOhf,UAASgf,EAAK,MAhGxBz+C,EAAOC,QAAU,SAA2ByuB,GAC3C,IAAKA,EAAQ,KAAM,IAAI2iB,OAAM,mBAC7B3iB,GAAOA,EAAKotB,WAAWmB,MAEvB,IAAItW,IACFqM,SACA8C,SACAY,aAGEkB,EAAQlpB,EAAKwvB,MAAM,YAEvB,IAAqB,IAAjBtG,EAAMlvC,OAAgB,KAAM,IAAI2oC,OAAM,yBAE1C,KAAK,GAAIjxC,GAAI,EAAGA,EAAIw3C,EAAMlvC,OAAQtI,IAAK,CACrC,GAAIs+C,GAAWV,EAAUpG,EAAMx3C,GAAIA,EACnC,IAAKs+C,EAGL,GAAqB,SAAjBA,EAASjP,IAAgB,CAC3B,GAAgC,gBAArBiP,GAAShwB,KAAK9G,GAAmB,KAAM,IAAIypB,OAAM,0BAA4BjxC,EAAI,sBAC5F,IAAkC,gBAAvBs+C,GAAShwB,KAAKiwB,KAAqB,KAAM,IAAItN,OAAM,0BAA4BjxC,EAAI,6BAC9FumC,GAAOqM,MAAM0L,EAAShwB,KAAK9G,IAAM82B,EAAShwB,KAAKiwB,SACrB,UAAjBD,EAASjP,KAAoC,aAAjBiP,EAASjP,MAEpB,SAAjBiP,EAASjP,IAClB9I,EAAOmP,MAAM31C,KAAKu+C,EAAShwB,MACD,YAAjBgwB,EAASjP,IAClB9I,EAAO+P,SAASv2C,KAAKu+C,EAAShwB,MAE9BiY,EAAO+X,EAASjP,KAAOiP,EAAShwB,MAIpC,MAAOiY,SAkEViY,IAAK,SAAUl6C,EAAS1E,EAAQC,GAqB9B,QAAS4+C,GAAWpnC,EAAQimC,EAAKt9C,GAChC,GAAIA,EAAIs9C,EAAIh1C,OAAS,EAAK,MAAO,EAEjC,IAAIo2C,GAAUpB,EAAIqB,UAAU3+C,KACxB4+C,EAAYtB,EAAIuB,YAAY7+C,EAGhC,QAFAA,GAAK,EAEG0+C,GACN,IAAK,GACHrnC,EAAOq3B,KAAOoQ,EAASxB,EAAKt9C,EAC5B,MACF,KAAK,GACHqX,EAAO26B,OAAS+M,EAAWzB,EAAKt9C,EAChC,MACF,KAAK,GACHqX,EAAOu7B,MAAQoM,EAAU1B,EAAKt9C,EAAG4+C,EACjC,MACF,KAAK,GACHvnC,EAAOq+B,MAAQuJ,EAAU3B,EAAKt9C,EAAG4+C,EACjC,MACF,KAAK,GACHvnC,EAAOi/B,SAAW4I,EAAa5B,EAAKt9C,EAAG4+C,GAG3C,MAAO,GAAIA,EAGZ,QAASE,GAAUxB,EAAKt9C,GACvB,GAAI0uC,KACJA,GAAK3qB,KAAOu5B,EAAI6B,YAAYn/C,EAE5B,IAAIo/C,GAAW9B,EAAIqB,UAAU3+C,EAAI,EAwBjC,OAvBA0uC,GAAK2Q,OAAUD,GAAY,EAAK,EAChC1Q,EAAK4Q,QAAWF,GAAY,EAAK,EACjC1Q,EAAK6Q,OAAUH,GAAY,EAAK,EAChC1Q,EAAK8Q,KAAQJ,GAAY,EAAK,EAGzBA,GAAY,EAAK,IAAK1Q,EAAK+Q,YAAc,GAE9C/Q,EAAKgR,QAAUpC,EAAIqB,UAAU3+C,EAAI,IAAM,GACvC0uC,EAAKiR,SAAWrC,EAAIsC,aAAa5/C,EAAI,GACrC0uC,EAAKmR,GAAKvC,EAAIqB,UAAU3+C,EAAI,GAC5B0uC,EAAKltC,SACH87C,EAAIwC,SAAS9/C,EAAI,GACjBs9C,EAAIwC,SAAS9/C,EAAI,GACjBs9C,EAAIwC,SAAS9/C,EAAI,GACjBs9C,EAAIwC,SAAS9/C,EAAI,KAEnB0uC,EAAKqR,SACHzC,EAAIwC,SAAS9/C,EAAI,IACjBs9C,EAAIwC,SAAS9/C,EAAI,KAEnB0uC,EAAK5V,QAAUwkB,EAAIqB,UAAU3+C,EAAI,IACjC0uC,EAAK1tB,KAAOg/B,EAAa1C,EAAKt9C,EAAI,IAC3B0uC,EAGR,QAASqQ,GAAYzB,EAAKt9C,GACzB,GAAIgyC,KACJA,GAAO8F,WAAawF,EAAIsC,aAAa5/C,GACrCgyC,EAAOgG,KAAOsF,EAAIsC,aAAa5/C,EAAI,GACnCgyC,EAAOC,OAASqL,EAAIsC,aAAa5/C,EAAI,GACrCgyC,EAAOG,OAASmL,EAAIsC,aAAa5/C,EAAI,GACrCgyC,EAAOY,MAAQ0K,EAAIsC,aAAa5/C,EAAI,EACrBs9C,GAAIqB,UAAU3+C,EAAI,GAMjC,OALAgyC,GAAOiO,OAAS,EAChBjO,EAAOkO,UAAY5C,EAAIqB,UAAU3+C,EAAI,IACrCgyC,EAAOmO,QAAU7C,EAAIqB,UAAU3+C,EAAI,IACnCgyC,EAAOoO,UAAY9C,EAAIqB,UAAU3+C,EAAI,IACrCgyC,EAAOqO,SAAW/C,EAAIqB,UAAU3+C,EAAI,IAC7BgyC,EAGR,QAASgN,GAAW1B,EAAKt9C,EAAG+jB,GAK3B,IAAK,GAJD6uB,MACAnZ,EAAO6mB,EAAWhD,EAAKt9C,GACvBugD,EAAM9mB,EAAKnxB,OAAS,EACpBoa,EAAQqB,EAAOw8B,EACV73C,EAAI,EAAGA,EAAIga,EAAOha,IACzBkqC,EAAMlqC,GAAK40C,EAAIC,MAAMv9C,EAAGA,EAAIy5B,EAAKnxB,QAAQozC,SAAS,QAClD17C,GAAKugD,CAEP,OAAO3N,GAGR,QAASqM,GAAW3B,EAAKt9C,EAAG4+C,GAI3B,IAAK,GAHDlJ,MAEAhzB,EAAQk8B,EAAY,GACfl2C,EAAI,EAAGA,EAAIga,EAAOha,IAAK,CAC9B,GAAI83C,MACAC,EAAU,GAAJ/3C,CACV83C,GAAKh5B,GAAK81B,EAAIoD,aAAa1gD,EAAI,EAAIygD,GACnCD,EAAKvsC,EAAIqpC,EAAIsC,aAAa5/C,EAAI,EAAIygD,GAClCD,EAAK72C,EAAI2zC,EAAIsC,aAAa5/C,EAAI,EAAIygD,GAClCD,EAAKp/C,MAAQk8C,EAAIsC,aAAa5/C,EAAI,EAAIygD,GACtCD,EAAKn/C,OAASi8C,EAAIsC,aAAa5/C,EAAI,GAAKygD,GACxCD,EAAKhM,QAAU8I,EAAI6B,YAAYn/C,EAAI,GAAKygD,GACxCD,EAAK/L,QAAU6I,EAAI6B,YAAYn/C,EAAI,GAAKygD,GACxCD,EAAK1H,SAAWwE,EAAI6B,YAAYn/C,EAAI,GAAKygD,GACzCD,EAAKrM,KAAOmJ,EAAIqB,UAAU3+C,EAAI,GAAKygD,GACnCD,EAAKG,KAAOrD,EAAIqB,UAAU3+C,EAAI,GAAKygD,GACnC/K,EAAMhtC,GAAK83C,EAEb,MAAO9K,GAGR,QAASwJ,GAAc5B,EAAKt9C,EAAG4+C,GAG9B,IAAK,GAFDtI,MACA5zB,EAAQk8B,EAAY,GACfl2C,EAAI,EAAGA,EAAIga,EAAOha,IAAK,CAC9B,GAAI8tC,MACAiK,EAAU,GAAJ/3C,CACV8tC,GAAKC,MAAQ6G,EAAIoD,aAAa1gD,EAAI,EAAIygD,GACtCjK,EAAKE,OAAS4G,EAAIoD,aAAa1gD,EAAI,EAAIygD,GACvCjK,EAAKxoC,OAASsvC,EAAI6B,YAAYn/C,EAAI,EAAIygD,GACtCnK,EAAS5tC,GAAK8tC,EAEhB,MAAOF,GAGR,QAASgK,GAAYhD,EAAK9kC,GAEzB,IADA,GAAIooC,GAAMpoC,EACHooC,EAAMtD,EAAIh1C,QACE,IAAbg1C,EAAIsD,GADeA,KAGzB,MAAOtD,GAAIC,MAAM/kC,EAAQooC,GAG1B,QAASZ,GAAc1C,EAAK9kC,GAC3B,MAAO8nC,GAAWhD,EAAK9kC,GAAQkjC,SAAS,QAvJzC,GAAI2B,IAAU,GAAI,GAAI,GAEtBz9C,GAAOC,QAAU,SAA2By9C,GAC3C,GAAIA,EAAIh1C,OAAS,EAAK,KAAM,IAAI2oC,OAAM,mCAMtC,KAJaoM,EAAOwD,MAAM,SAAUC,EAAM9gD,GACxC,MAAOs9C,GAAIqB,UAAU3+C,KAAO8gD,IAGf,KAAM,IAAI7P,OAAM,iCAE/B,IAAIjxC,GAAI,CAER,IADWs9C,EAAIqB,UAAU3+C,KACd,EAAK,KAAM,IAAIixC,OAAM,oDAGhC,KAAK,GADD55B,IAAWi/B,YAAcZ,UACpB7rC,EAAI,EAAGA,EAAI,EAAGA,IAAO7J,GAAKy+C,EAAUpnC,EAAQimC,EAAKt9C,EAC1D,OAAOqX,SAyIV0pC,IAAK,SAAUz8C,EAAS1E,EAAQC,GA6D9B,QAASmhD,GAAYrtC,GAEpB,MADcstC,GAActtC,GACbgkC,OAAO,SAAUuJ,EAAMC,GAGpC,MADAD,GADUE,EAAQD,EAAOE,WACbF,EAAOG,UACZJ,OAIV,QAASD,GAAettC,GAGvB,IAAK,GADD4tC,MACKvhD,EAAI,EAAGA,EAAI2T,EAAQ2O,WAAWha,OAAQtI,IAAOuhD,EAAQxhD,KAAK4T,EAAQ2O,WAAWtiB,GACtF,OAAOuhD,GAGR,QAASH,GAASC,GACjB,MAAOG,GAASH,EAASI,gBAAkBJ,EA7E5C,GAAIK,GAAkBp9C,EAAQ,mBAC1Bq9C,EAAkBr9C,EAAQ,yBAK1Bk9C,GACHI,OAAQ,SACRC,OAAQ,SACRC,SAAU,WACVC,WAAY,aACZC,UAAW,YACXC,QAAS,UACTC,UAAW,YACXC,SAAU,WAGXviD,GAAOC,QAAU,SAAgByuB,GAChCA,EAAOA,EAAKotB,UAEZ,IAAI0G,GAAUT,EAAgBrzB,GAC1BiY,GACFqM,SACA8C,SACAY,cAIA,OAAQ,UAAU1nB,QAAQ,SAAUygB,GACpC,GAAI17B,GAAUyuC,EAAQpxB,qBAAqBqe,GAAK,EAC5C17B,KAAW4yB,EAAO8I,GAAOqS,EAAgBV,EAAWrtC,MAI1D,IAAI0uC,GAAWD,EAAQpxB,qBAAqB,SAAS,EACrD,KAAKqxB,EAAY,KAAM,IAAIpR,OAAM,uCAEjC,KAAK,GADD2B,GAAQyP,EAASrxB,qBAAqB,QACjChxB,EAAI,EAAGA,EAAI4yC,EAAMtqC,OAAQtI,IAAK,CACrC,GAAIoJ,GAAIwpC,EAAM5yC,GACVwnB,EAAK6X,SAASj2B,EAAEk5C,aAAa,MAAO,IACpC/D,EAAOn1C,EAAEk5C,aAAa,OAC1B,IAAItP,MAAMxrB,GAAO,KAAM,IAAIypB,OAAM,+CACjC,KAAKsN,EAAQ,KAAM,IAAItN,OAAM,gDAC7B1K,GAAOqM,MAAMvT,SAAS7X,EAAI,KAAO+2B,EAcnC,OAVC,QAAS,YAAY3vB,QAAQ,SAAUygB,GACtC,GAAI17B,GAAUyuC,EAAQpxB,qBAAqBqe,GAAK,EAChD,IAAK17B,EAGL,IAAK,GAFD4uC,GAAWlT,EAAI6L,UAAU,EAAG7L,EAAI/mC,OAAS,GACzCqmB,EAAWhb,EAAQqd,qBAAqBuxB,GACnCviD,EAAI,EAAGA,EAAI2uB,EAASrmB,OAAQtI,IAAK,CACxC,GAAI6uB,GAAQF,EAAS3uB,EACrBumC,GAAO8I,GAAKtvC,KAAK2hD,EAAgBV,EAAWnyB,QAGzC0X,KAsBNic,kBAAmB,GAAIC,wBAAyB,KACpDC,IAAK,SAAUp+C,EAAS1E,EAAQC,GAmB9B,QAASu+C,GAAc9vB,GACtB,MAAOA,GAAKwvB,MAAM,KAAK76B,IAAI,SAAUo7B,GACnC,MAAOhf,UAASgf,EAAK,MAdxBz+C,EAAOC,QAAU,SAA0B8iD,GAFhB,YAGEA,KAC1BA,EAAA,QAAiBA,EAAA,eACVA,GAAA,SAGT,KAAK,GAAIp7C,KAAKo7C,GACF,SAANp7C,GAAsB,YAANA,IAA6Eo7C,EAAIp7C,GAApC,YAANA,GAAyB,YAANA,EAA4B62C,EAAauE,EAAIp7C,IAAsB83B,SAASsjB,EAAIp7C,GAAI,IAEpK,OAAOo7C,SASVC,IAAK,SAAUt+C,EAAS1E,EAAQC,GAC9BD,EAAOC,QAAW,WAEjB,WAAgC,KAArB4L,OAAOo3C,UACT,SAAU9E,GAEf,OADa,GAAItyC,QAAOo3C,WACVlB,gBAAgB5D,EAAK,wBAKH,KAAzBtyC,OAAOq3C,eACd,GAAIr3C,QAAOq3C,cAAc,oBACpB,SAAU/E,GACf,GAAIgF,GAAS,GAAIt3C,QAAOq3C,cAAc,mBAGtC,OAFAC,GAAOC,MAAQ,QACfD,EAAOE,QAAQlF,GACRgF,GAKJ,SAAUhF,GACf,GAAImF,GAAMz4C,SAASob,cAAc,MAEjC,OADAq9B,GAAItkB,UAAYmf,EACTmF,WAIZC,IAAK,SAAU7+C,EAAS1E,EAAQC,GA0B9B,QAASujD,GAAST,GACf,IAAK,GAAI3iD,KAAK2iD,GACV,GAAIA,EAAI53B,eAAe/qB,GAAI,OAAO,CAEtC,QAAO,EAGV,QAASqjD,GAAY/G,EAAK3qB,EAASjjB,GAChC,GAAI40C,GAAShH,CAYb,OAVIiH,GAAW5xB,IACXjjB,EAAWijB,EACQ,gBAAR2qB,KACPgH,GAAUhH,IAAKA,KAGnBgH,EAASrM,EAAMtlB,GAAU2qB,IAAKA,IAGlCgH,EAAO50C,SAAWA,EACX40C,EAGV,QAASE,GAAWlH,EAAK3qB,EAASjjB,GAE/B,MADAijB,GAAU0xB,EAAW/G,EAAK3qB,EAASjjB,GAC5B+0C,EAAW9xB,GAGrB,QAAS8xB,GAAY9xB,GAOlB,QAAS+xB,KACkB,IAAnB3H,EAAIj0C,YACJ67C,IAIR,QAASC,KAEL,GAAIhwC,OAAOpI,EAQX,IANIuwC,EAAIpwB,SACJ/X,EAAOmoC,EAAIpwB,SACiB,SAArBowB,EAAIzwB,cAA4BywB,EAAIzwB,eAC3C1X,EAAOmoC,EAAI8H,cAAgB9H,EAAI/L,aAG/B8T,EACA,IACIlwC,EAAO0d,KAAKC,MAAM3d,GACpB,MAAOhO,IAGb,MAAOgO,GAYX,QAASmwC,GAAWC,GAChBC,aAAaC,GACPF,YAAe/S,SACjB+S,EAAM,GAAI/S,OAAM,IAAM+S,GAAO,kCAEjCA,EAAItH,WAAa,EACjBhuC,EAASs1C,EAAKG,GAIlB,QAASR,KACL,IAAIS,EAAJ,CACA,GAAIh8B,EACJ67B,cAAaC,GAGT97B,EAFAuJ,EAAQ0yB,YAAyB74C,KAAfuwC,EAAI3zB,OAEb,IAEgB,OAAf2zB,EAAI3zB,OAAkB,IAAM2zB,EAAI3zB,MAE9C,IAAIuD,GAAWw4B,EACX3H,EAAM,IAEK,KAAXp0B,GACAuD,GACI/X,KAAMgwC,IACNlH,WAAYt0B,EACZiG,OAAQA,EACRyuB,WACAp1B,IAAK40B,EACLgI,WAAYvI,GAEZA,EAAIwI,wBACJ54B,EAASmxB,QAAU0H,EAAazI,EAAIwI,2BAGxC/H,EAAM,GAAIvL,OAAM,iCAEpBviC,EAAS8tC,EAAK7wB,EAAUA,EAAS/X,OA9ErC,GAAIlF,GAAWijB,EAAQjjB,QACvB,QAAwB,KAAbA,EACP,KAAM,IAAIuiC,OAAM,4BAEpBviC,GAAW+1C,EAAK/1C,EA2BhB,IAAIy1C,IACQvwC,SAAMpI,GACNsxC,WACAJ,WAAY,EACZruB,OAAQA,EACR3G,IAAK40B,EACLgI,WAAYvI,GA4CpBA,EAAMpqB,EAAQoqB,KAAO,IAEpBA,KAEGA,EADApqB,EAAQ+yB,MAAQ/yB,EAAQ0yB,OAClB,GAAIb,GAAUmB,eAEd,GAAInB,GAAUp4B,eAI5B,IAAIikB,GACA+U,EAOAF,EANA5H,EAAMP,EAAIr0B,IAAMiK,EAAQ2qB,KAAO3qB,EAAQjK,IACvC2G,EAAS0tB,EAAI1tB,OAASsD,EAAQtD,QAAU,MACxCza,EAAO+d,EAAQ/d,MAAQ+d,EAAQrD,MAAQ,KACvCwuB,EAAUf,EAAIe,QAAUnrB,EAAQmrB,YAChC8H,IAASjzB,EAAQizB,KACjBd,GAAS,CAsCb,IAnCI,QAAUnyB,KACVmyB,GAAS,EACThH,EAAA,QAAqBA,EAAA,SAAsBA,EAAA,OAAoB,oBAChD,QAAXzuB,GAA+B,SAAXA,IACpByuB,EAAQ,iBAAmBA,EAAQ,kBAAoBA,EAAQ,gBAAkB,oBACjFlpC,EAAO7O,IAAe4sB,EAAQkzB,QAItC9I,EAAIlrB,mBAAqB6yB,EACzB3H,EAAIhrB,OAAS4yB,EACb5H,EAAI+I,QAAUf,EAEdhI,EAAIxwB,WAAa,aAGjBwwB,EAAIgJ,UAAYhB,EAChBhI,EAAI1wB,KAAKgD,EAAQiuB,GAAMsI,EAAMjzB,EAAQqzB,SAAUrzB,EAAQszB,UAElDL,IACD7I,EAAImJ,kBAAoBvzB,EAAQuzB,kBAK/BN,GAAQjzB,EAAQwzB,QAAU,IAC3BjB,EAAel5B,WAAW,WACtBo5B,GAAU,EACVrI,EAAIqJ,MAAM,UACV,IAAIx/C,GAAI,GAAIqrC,OAAM,yBAClBrrC,GAAEpD,KAAO,YACTuhD,EAAUn+C,IACX+rB,EAAQwzB,UAGXpJ,EAAIsJ,iBACJ,IAAKhW,IAAOyN,GACJA,EAAQ/xB,eAAeskB,IACvB0M,EAAIsJ,iBAAiBhW,EAAKyN,EAAQzN,QAGvC,IAAI1d,EAAQmrB,UAAYsG,EAAQzxB,EAAQmrB,SAC3C,KAAM,IAAI7L,OAAM,oDAepB,OAZI,gBAAkBtf,KAClBoqB,EAAIzwB,aAAeqG,EAAQrG,cAG3B,cAAgBqG,IACc,kBAAvBA,GAAQ2zB,YAEf3zB,EAAQ2zB,WAAWvJ,GAGvBA,EAAIjwB,KAAKlY,GAEFmoC,EAGV,QAASC,MAtNT,GAAIvwC,GAASnH,EAAQ,iBACjBmgD,EAAOngD,EAAQ,QACfi/C,EAAaj/C,EAAQ,eACrBkgD,EAAelgD,EAAQ,iBACvB2yC,EAAQ3yC,EAAQ,QAEpB1E,GAAOC,QAAU2jD,EACjBA,EAAUp4B,eAAiB3f,EAAO2f,gBAAkB4wB,EACpDwH,EAAUmB,eAAiB,mBAAsB,IAAInB,GAAUp4B,eAAoBo4B,EAAUp4B,eAAiB3f,EAAOk5C,eAUrH,SAAuBpiC,EAAOgjC,GAC3B,IAAK,GAAIvlD,GAAI,EAAGA,EAAIuiB,EAAMja,OAAQtI,IAC9BulD,EAAShjC,EAAMviB,MAVR,MAAO,MAAO,OAAQ,QAAS,OAAQ,UAAW,SAAUquB,GACvEm1B,EAAqB,WAAXn1B,EAAsB,MAAQA,GAAU,SAAUiuB,EAAK3qB,EAASjjB,GAGtE,MAFAijB,GAAU0xB,EAAW/G,EAAK3qB,EAASjjB,GACnCijB,EAAQtD,OAASA,EAAOm3B,cACjB/B,EAAW9xB,QAyMvB8zB,gBAAiB,GAAIC,cAAe,GAAIjB,KAAQ,GAAIkB,gBAAiB,GAAI1O,MAAS,KACtF2O,IAAK,SAAUthD,EAAS1E,EAAQC,IAC9B,SAAWwE,GACa,mBAAXoH,QACV7L,EAAOC,QAAU4L,WACW,KAAXpH,EACjBzE,EAAOC,QAAUwE,EACS,mBAATsjB,MACjB/nB,EAAOC,QAAU8nB,KAEjB/nB,EAAOC,aAEP8N,KAAK7M,SAAwB,KAAXuD,EAAyBA,EAAyB,mBAATsjB,MAAuBA,KAAyB,mBAAXlc,QAAyBA,gBAE9Ho6C,IAAK,SAAUvhD,EAAS1E,EAAQC,GAK9B,QAAS0jD,GAAYhzC,GACpB,GAAIu1C,GAASpK,EAAS/tC,KAAK4C,EAC3B,OAAkB,sBAAXu1C,GACU,kBAAPv1C,IAAgC,oBAAXu1C,GACV,mBAAXr6C,UAEN8E,IAAO9E,OAAOuf,YACdza,IAAO9E,OAAOs6C,OACdx1C,IAAO9E,OAAOu6C,SACdz1C,IAAO9E,OAAOw6C,QAbnBrmD,EAAOC,QAAU0jD,CAEjB,IAAI7H,GAAWL,OAAOz/B,UAAU8/B,cAclCwK,IAAK,SAAU5hD,EAAS1E,EAAQC,GAY9B,QAAS4kD,GAAMl0C,GACd,GAAI41C,IAAS,CACb,OAAO,YACL,IAAIA,EAEJ,MADAA,IAAS,EACF51C,EAAG61C,MAAMtlD,KAAM0N,YAhBzB5O,EAAOC,QAAU4kD,EAEjBA,EAAK4B,MAAQ5B,EAAK,WACjBpJ,OAAOiL,eAAe9Q,SAAS55B,UAAW,QACxCzY,MAAO,WACL,MAAOshD,GAAK3jD,OAEdk0C,cAAc,WAanBuR,IAAK,SAAUjiD,EAAS1E,EAAQC,GAQ9B,QAAS+uB,GAAS43B,EAAMjB,EAAUkB,GAC/B,IAAKlD,EAAWgC,GACZ,KAAM,IAAI1T,WAAU,8BAGpBrjC,WAAUlG,OAAS,IACnBm+C,EAAU3lD,MAGc,mBAAxB46C,EAAS/tC,KAAK64C,GAA8BE,EAAaF,EAAMjB,EAAUkB,GAAoC,gBAATD,GAAqBG,EAAcH,EAAMjB,EAAUkB,GAAkBG,EAAcJ,EAAMjB,EAAUkB,GAG9M,QAASC,GAAcnkC,EAAOgjC,EAAUkB,GACrC,IAAK,GAAIzmD,GAAI,EAAGugD,EAAMh+B,EAAMja,OAAQtI,EAAIugD,EAAKvgD,IACrC+qB,EAAepd,KAAK4U,EAAOviB,IAC3BulD,EAAS53C,KAAK84C,EAASlkC,EAAMviB,GAAIA,EAAGuiB,GAK/C,QAASokC,GAAeb,EAAQP,EAAUkB,GACvC,IAAK,GAAIzmD,GAAI,EAAGugD,EAAMuF,EAAOx9C,OAAQtI,EAAIugD,EAAKvgD,IAE1CulD,EAAS53C,KAAK84C,EAASX,EAAO/2C,OAAO/O,GAAIA,EAAG8lD,GAInD,QAASc,GAAe96C,EAAQy5C,EAAUkB,GACvC,IAAK,GAAIl/C,KAAKuE,GACNif,EAAepd,KAAK7B,EAAQvE,IAC5Bg+C,EAAS53C,KAAK84C,EAAS36C,EAAOvE,GAAIA,EAAGuE,GArChD,GAAIy3C,GAAaj/C,EAAQ,cAEzB1E,GAAOC,QAAU+uB,CAEjB,IAAI8sB,GAAWL,OAAOz/B,UAAU8/B,SAC5B3wB,EAAiBswB,OAAOz/B,UAAUmP,iBAoCpC26B,cAAe,KACnBtlD,IAAK,SAAUkE,EAAS1E,EAAQC,GAG9B,QAASg9C,GAAMkB,GACd,MAAOA,GAAIF,QAAQ,aAAc,IAHlCh+C,EAAUD,EAAOC,QAAUg9C,EAM3Bh9C,EAAQ4a,KAAO,SAAUsjC,GACxB,MAAOA,GAAIF,QAAQ,OAAQ,KAG5Bh+C,EAAQ2a,MAAQ,SAAUujC,GACzB,MAAOA,GAAIF,QAAQ,OAAQ,UAG9BgJ,IAAK,SAAUviD,EAAS1E,EAAQC,GAC9B,GAAIg9C,GAAOv4C,EAAQ,QACjBsqB,EAAUtqB,EAAQ,YAClBwiD,EAAU,SAAUC,GACjB,MAA+C,mBAAxC1L,OAAOz/B,UAAU8/B,SAAS/tC,KAAKo5C,GAG3CnnD,GAAOC,QAAU,SAAUi9C,GAC1B,IAAKA,EAAW,QAEhB,IAAI30B,KAmBJ,OAjBAyG,GACIiuB,EAAKC,GAASgB,MAAM,MACpB,SAAUkJ,GACR,GAAI36B,GAAQ26B,EAAIx9C,QAAQ,KACrB6lC,EAAMwN,EAAKmK,EAAIzJ,MAAM,EAAGlxB,IAAQo1B,cAChCt+C,EAAQ05C,EAAKmK,EAAIzJ,MAAMlxB,EAAQ,QAEL,KAAjBlE,EAAOknB,GACjBlnB,EAAOknB,GAAOlsC,EACL2jD,EAAQ3+B,EAAOknB,IACxBlnB,EAAOknB,GAAKtvC,KAAKoD,GAEjBglB,EAAOknB,IAASlnB,EAAOknB,GAAMlsC,KAK9BglB,KAEN8+B,WAAY,GAAIpK,KAAQ,KAC5BqK,IAAK,SAAU5iD,EAAS1E,EAAQC,GAC9B2O,UAAU,GAAG,GAAG,GAAG43C,MAAMvmD,EAAS2O,aAChC24C,IAAO,IACXC,IAAK,SAAU9iD,EAAS1E,EAAQC,GAM9B,QAASwnD,GAAUhJ,GAClB,GAAY,OAARA,OAAwB7yC,KAAR6yC,EAClB,KAAM,IAAIxM,WAAU,wDAGtB,OAAOwJ,QAAOgD,GARf,GAAItzB,GAAiBswB,OAAOz/B,UAAUmP,eAClCu8B,EAAmBjM,OAAOz/B,UAAU2rC,oBAUxC3nD,GAAOC,QAAU8E,EAAAqB,GAAiB,SAAUqR,EAAQzU,GAKnD,IAAK,GAJD4kD,GAEAC,EADAplD,EAAKglD,EAAShwC,GAGTxP,EAAI,EAAGA,EAAI2G,UAAUlG,OAAQT,IAAK,CACzC2/C,EAAOnM,OAAO7sC,UAAU3G,GAExB,KAAK,GAAIwnC,KAAOmY,GACVz8B,EAAepd,KAAK65C,EAAMnY,KAC5BhtC,EAAGgtC,GAAOmY,EAAKnY,GAInB,IAAA7qC,EAAAwB,EAAkC,CAChCyhD,EAAUjjD,IAA6BgjD,EACvC,KAAK,GAAIxnD,GAAI,EAAGA,EAAIynD,EAAQn/C,OAAQtI,IAC9BsnD,EAAiB35C,KAAK65C,EAAMC,EAAQznD,MACtCqC,EAAGolD,EAAQznD,IAAMwnD,EAAKC,EAAQznD,MAMtC,MAAOqC,SAGVqlD,IAAK,SAAUpjD,EAAS1E,EAAQC,GAC9B,GAAI8nD,GAAQrjD,EAAQ,SAChBsjD,EAAUtjD,EAAQ,YAClBq4C,EAAWr4C,EAAQ,aAEnBujD,GAAM,EAAG,EAAG,GACZC,GAAO,EAAG,EAAG,EAEjBloD,GAAOC,QAAU,SAA6B0iB,EAAO6uB,GAE7C7uB,IAAWqlC,EAAQrlC,IAAUo6B,EAASp6B,MACvC6uB,EAAM7uB,MACNA,EAAQ,MAIN6uB,EADa,gBAARA,IACG1uB,MAAO0uB,GAAqBA,KAc1C,KAAK,GAZDzuC,GAA2B,gBAAbyuC,GAAIzuC,KAAoByuC,EAAIzuC,KAAO,SACjD+f,EAA6B,gBAAd0uB,GAAI1uB,MAAqB0uB,EAAI1uB,MAAQ,EACpDzc,EAASmrC,EAAInrC,OAAS,EAEtB8hD,GAAwB,IAAlB3W,EAAIqB,UAAsBoV,EAAKC,EACrC9hD,EAAI+hD,EAAI,GACRl+C,EAAIk+C,EAAI,GACRr/C,EAAIq/C,EAAI,GAERC,EAAqB,EAARtlC,EAEb8vB,EAAUjwB,GAAS,IAAKolC,EAAMhlD,IAAOqlD,GAChChoD,EAAI,EAAGioD,EAAI,EAAGjoD,EAAIgoD,EAAYhoD,GAAK,EAAGioD,GAAK,EAAG,CACnD,GAAIh0C,GAAIjU,EAAIiG,CACZusC,GAAQv+B,EAAI,GAAKg0C,EAAI,EACrBzV,EAAQv+B,EAAI,GAAKg0C,EAAI,EACrBzV,EAAQv+B,EAAI,GAAKg0C,EAAI,EACrBzV,EAAQv+B,EAAI,GAAKg0C,EAAIjiD,EACrBwsC,EAAQv+B,EAAI,GAAKg0C,EAAIp+C,EACrB2oC,EAAQv+B,EAAI,GAAKg0C,EAAIv/C,EAEzB,MAAO8pC,MAER0V,WAAY,GAAIP,MAAS,GAAIQ,YAAa,KAC9CC,IAAK,SAAU9jD,EAAS1E,EAAQC,GAK9B,QAAS+nD,GAASnM,GACjB,MACKA,GAAI4M,mBACkB,yBAAzBtK,EAAIpwC,KAAK8tC,EAAI9J,SACblkC,MAAMq5C,QAAQrL,GARjB,GAAIsC,GAAM1C,OAAOz/B,UAAU8/B,QAE3B97C,GAAOC,QAAU+nD,OAUnBU,IAAK,SAAUhkD,EAAS1E,EAAQC,GAC9BD,EAAOC,QAAU,SAAU8nD,GAC1B,OAAQA,GACN,IAAK,OACH,MAAOY,UACT,KAAK,QACH,MAAOC,WACT,KAAK,QACH,MAAOC,WACT,KAAK,QACH,MAAO/8B,WACT,KAAK,SACH,MAAOg9B,YACT,KAAK,SACH,MAAOC,YACT,KAAK,UACH,MAAO/lC,aACT,KAAK,UACH,MAAOgmC,aACT,KAAK,QACH,MAAOn7C,MACT,KAAK,gBACH,MAAOo7C,0BAIdC,IAAK,SAAUxkD,EAAS1E,EAAQC,GAU9BD,EAAOC,QAAU,SAAU8iD,GAC1B,QAAiB,MAAPA,KACPA,EAAIoG,WACFpG,EAAI9mC,aAC+B,kBAA7B8mC,GAAI9mC,YAAY8gC,UACvBgG,EAAI9mC,YAAY8gC,SAASgG,WAIhCqG,IAAK,SAAU1kD,EAAS1E,EAAQC,GAM9B,QAASopD,GAAUxqC,EAAU6P,EAAMwkB,EAAU6U,GACpB,gBAAb7U,KAAuBA,EAAW,GACxB,gBAAV6U,KAAoBA,EAAQ,SAEvC,IAAIuB,IAASzqC,EAAS4N,OAAsC,kBAAtB5N,GAASwqC,SAC3C9H,EAAS+H,EAAQzqC,EAAS6jC,aAAa,SAAW7jC,EAAS4N,MAC3D88B,EAAYC,EAAgBjI,EAAQ7yB,EAAMwkB,EAAU6U,EACpDwB,KACED,EAAOzqC,EAAS4qC,aAAa,QAASF,GACrC1qC,EAAS4N,MAAQ88B,GAIzB,QAAS72B,GAAc7T,EAAU4wB,EAAK/gB,EAAMwkB,EAAU6U,GAGrD,GAFwB,gBAAb7U,KAAuBA,EAAW,GACxB,gBAAV6U,KAAoBA,EAAQ,WACnCl6C,MAAMq5C,QAAQx4B,IAChB7gB,MAAMq5C,QAAQx4B,EAAK,KACnBA,EAAK,GAAGhmB,SAAWwqC,EACnB,KAAM,IAAI7B,OAAM,qDACd6B,EAAW,cAAgBxkB,EAAK,GAAGhmB,OAGvC,IAAI64C,GAAS1iC,EAAS6jC,aAAajT,GAC/B8Z,EAAYC,EAAgBjI,EAAQ7yB,EAAMwkB,EAAU6U,EACpDwB,IACF1qC,EAAS4qC,aAAaha,EAAK8Z,GAI9B,QAASC,GAAiBjI,EAAQ7yB,EAAMwkB,EAAU6U,GAEjD,MADAr5B,GAAOA,OACF6yB,GAAUmI,EAAiBnI,EAAQ7yB,EAAMwkB,IAE5CxkB,EAAOi7B,EAAQj7B,EAAMq5B,GACrBxG,EAAS,GAAI37C,GAAA,gBAAsB8oB,EAAMwkB,GACzCqO,EAAOn1B,aAAc,EACdm1B,IAGPoI,EAAQj7B,EAAM6yB,EAAO5+B,OACrB4+B,EAAOn1B,aAAc,EACd,MAMV,QAASs9B,GAAkBnI,EAAQ7yB,EAAMwkB,GACxC,GAAIqO,EAAOrO,WAAaA,EAAU,OAAO,CACzC,KAAKqO,EAAO5+B,MAAO,OAAO,CAC1B,IAAIinC,GAAerI,EAAO5+B,MAAMja,MAChC,OAAImF,OAAMq5C,QAAQx4B,IAAS7gB,MAAMq5C,QAAQx4B,EAAK,IAErCk7B,IAAiBl7B,EAAKhmB,OAASwqC,EAG/B0W,IAAiBl7B,EAAKhmB,OA9DhC,GAAIihD,GAAUjlD,EAAQ,sBAEtB1E,GAAOC,QAAQ6yC,KAAOpgB,EACtB1yB,EAAOC,QAAQwsB,MAAQ48B,IA8DrBQ,sBAAuB,KAC3BC,IAAK,SAAUplD,EAAS1E,EAAQC,GAI9B,QAAS8pD,GAAmBr7B,EAAMiY,EAAQ/tB,GACzC,IAAK8V,EAAM,KAAM,IAAIujB,WAAU,uCAG/B,IAFAr5B,EAA0B,IAAfA,GAAU,GAEjB/K,MAAMq5C,QAAQx4B,IAAS7gB,MAAMq5C,QAAQx4B,EAAK,IAAK,CACjD,GAAIs7B,GAAMt7B,EAAK,GAAGhmB,OACdA,EAASgmB,EAAKhmB,OAASshD,CAGtBrjB,IAA4B,gBAAXA,KACpBA,EAAS,IAAKohB,EAAMphB,GAAU,YAAYj+B,EAASkQ,GAGrD,IAAIqxC,GAAYtjB,EAAOj+B,OAASkQ,CAChC,IAAIlQ,IAAWuhD,EACb,KAAM,IAAI5Y,OAAM,iBAAmB3oC,EAAS,KAAOshD,EAAM,IAAMt7B,EAAKhmB,OAAS,uCACnCuhD,EAG5C,KAAK,GAAI7pD,GAAI,EAAGuH,EAAIiR,EAAQxY,EAAIsuB,EAAKhmB,OAAQtI,IAC3C,IAAK,GAAIioD,GAAI,EAAGA,EAAI2B,EAAK3B,IACvB1hB,EAAOh/B,KAAO+mB,EAAKtuB,GAAGioD,OAI1B,IAAK1hB,GAA4B,gBAAXA,GAWpBA,EAAO//B,IAAI8nB,EAAM9V,OAXwB,CAEzC,GAAIsxC,GAAOnC,EAAMphB,GAAU,UACZ,KAAX/tB,EACF+tB,EAAS,GAAIujB,GAAKx7B,IAElBiY,EAAS,GAAIujB,GAAKx7B,EAAKhmB,OAASkQ,GAChC+tB,EAAO//B,IAAI8nB,EAAM9V,IAQvB,MAAO+tB,GA1CR,GAAIohB,GAAQrjD,EAAQ,QACpB1E,GAAOC,QAAU8pD,IA2CfhC,MAAS,KACboC,IAAK,SAAUzlD,EAAS1E,EAAQC,GAC9B2O,UAAU,GAAG,IAAI,GAAG43C,MAAMvmD,EAAS2O,aACjC24C,IAAO,KACX6C,IAAK,SAAU1lD,EAAS1E,EAAQC,GAC9B,GAAI0xC,GAASjtC,EAAQ,gBAErB1E,GAAOC,QAAU,SAA0BuxC,GAC1CA,EAAMA,KACN,IAAIrhB,GAAiC,gBAAhBqhB,GAAIrhB,QAAuBqhB,EAAIrhB,QAAU,EAC1Dk6B,EAAqC,gBAAlB7Y,GAAI6Y,UAAyB7Y,EAAI6Y,UAAY,KAChEC,EAAY9Y,EAAI8Y,WAAa,QAC7B72B,EAAQ+d,EAAI/d,MACZpQ,EAAMmuB,EAAInuB,GAQd,cALOmuB,GAAInuB,UACJmuB,GAAI/d,YACJ+d,GAAI8Y,gBACJ9Y,GAAIrhB,QAEJwhB,GACL/kB,UACEuD,SAAWptB,KAAM,IAAKQ,MAAO4sB,GAC7B9M,KAAOtgB,KAAM,IAAKQ,MAAO8f,GAAO,GAAIzd,GAAA,SACpC6tB,OAAS1wB,KAAM,IAAKQ,MAAO,GAAIqC,GAAA,MAAY6tB,KAE7CzG,cACE,qBACA,2BACA,iCACA,gCACA,oBACA,gBACA,YACA,+DACA,KACAC,KAAK,MACPC,gBACE,qCACA,kDACA,SACA,aAAeo9B,EAAY,UAC3B,yBACA,sBACA,yBACA,oBAEA,8BACA,uCACA,oFACA,UACA,oFACA,WACA,4DACA,IAEA,gBACA,yCACA,sCACA,iDACc,IAAdD,EACI,GACA,0BAA4BA,EAAY,aAC5C,KACAp9B,KAAK,OACNukB,MAEFoC,gBAAiB,KACrB2W,IAAK,SAAU7lD,EAAS1E,EAAQC,GAC9B,GAAIuqD,GAAW9lD,EAAQ,cAIvB1E,GAAOC,QAAU,SAAUuxC,EAAKiL,GAC/B+N,EAAShZ,EAAIrX,KAAM,SAAUyiB,EAAKziB,GAChC,GAAIyiB,EAAK,KAAMA,EACd/2C,GAAS+K,MAAMub,cAAcxjB,KAAK6oC,EAAI5mB,MAAO,SAAU6/B,GACtDhO,EAAGtiB,EAAMswB,UAIZC,cAAe,KACnBC,IAAK,SAAUjmD,EAAS1E,EAAQC,GAC9B,GAAI2qD,GAAalmD,EAAQ,OACrBmmD,EAAYnmD,EAAQ,iBAEpBmB,IAAYA,EAAS+K,OAAS/K,EAAS+zB,aACzC/zB,EAAS+K,MAAMk6C,WAAa,SAAUC,EAAYj8C,GAChDpK,EAAQ,UAAUqmD,EAAYllD,EAAS+zB,WAAW5d,UAAUke,UAAUzwB,KAAK5D,EAAS+zB,WAAW5d,UAAWlN,KAE5GjJ,EAAS+zB,WAAW5d,UAAUge,qBAAuB4wB,EACrD/kD,EAAS+zB,WAAW5d,UAAUie,kBAAoB4wB,KAElDG,MAAO,EAAGC,iBAAkB,GAAIC,SAAU,KAC9CC,IAAK,SAAUzmD,EAAS1E,EAAQC,IAC9B,SAAWwE,GA8DT,QAAS2mD,KACV,MAAOzP,GAAO0P,oBACV,WACA,WAeH,QAAS1P,GAAQwL,GAClB,MAAMjmD,gBAAgBy6C,IAMjBA,EAAO0P,sBACVnqD,KAAKwH,OAAS,EACdxH,KAAK0iB,WAAShY,IAIG,gBAARu7C,GACFmE,EAAWpqD,KAAMimD,GAIP,gBAARA,GACFoE,EAAWrqD,KAAMimD,EAAKv4C,UAAUlG,OAAS,EAAIkG,UAAU,GAAK,QAI9D48C,EAAWtqD,KAAMimD,IApBlBv4C,UAAUlG,OAAS,EAAU,GAAIizC,GAAOwL,EAAKv4C,UAAU,IACpD,GAAI+sC,GAAOwL,GAsBnB,QAASmE,GAAYG,EAAM/iD,GAE5B,GADA+iD,EAAOC,EAASD,EAAM/iD,EAAS,EAAI,EAAsB,EAAlBijD,EAAQjjD,KAC1CizC,EAAO0P,oBACV,IAAK,GAAIjrD,GAAI,EAAGA,EAAIsI,EAAQtI,IAC1BqrD,EAAKrrD,GAAK,CAGd,OAAOqrD,GAGN,QAASF,GAAYE,EAAMvF,EAAQlJ,GAQpC,MAPwB,gBAAbA,IAAsC,KAAbA,IAAiBA,EAAW,QAIhEyO,EAAOC,EAASD,EAD4B,EAA/BG,EAAW1F,EAAQlJ,IAGhCyO,EAAKI,MAAM3F,EAAQlJ,GACZyO,EAGN,QAASD,GAAYC,EAAMv/C,GAC5B,GAAIyvC,EAAOoB,SAAS7wC,GAAS,MAAO4/C,GAAWL,EAAMv/C,EAErD,IAAIg7C,EAAQh7C,GAAS,MAAO6/C,GAAUN,EAAMv/C,EAE5C,IAAc,MAAVA,EACF,KAAM,IAAI+lC,WAAU,kDAGtB,IAA2B,mBAAhB+Z,aAA6B,CACtC,GAAI9/C,EAAO6lC,iBAAkBia,aAC3B,MAAOC,GAAeR,EAAMv/C,EAE9B,IAAIA,YAAkB8/C,aACpB,MAAOE,GAAgBT,EAAMv/C,GAIjC,MAAIA,GAAOxD,OAAeyjD,EAAcV,EAAMv/C,GAEvCkgD,EAAeX,EAAMv/C,GAG3B,QAAS4/C,GAAYL,EAAM1Z,GAC5B,GAAIrpC,GAAkC,EAAzBijD,EAAQ5Z,EAAOrpC,OAG5B,OAFA+iD,GAAOC,EAASD,EAAM/iD,GACtBqpC,EAAOr9B,KAAK+2C,EAAM,EAAG,EAAG/iD,GACjB+iD,EAGN,QAASM,GAAWN,EAAM9oC,GAC3B,GAAIja,GAAiC,EAAxBijD,EAAQhpC,EAAMja,OAC3B+iD,GAAOC,EAASD,EAAM/iD,EACtB,KAAK,GAAItI,GAAI,EAAGA,EAAIsI,EAAQtI,GAAK,EAC/BqrD,EAAKrrD,GAAgB,IAAXuiB,EAAMviB,EAElB,OAAOqrD,GAIN,QAASQ,GAAgBR,EAAM9oC,GAChC,GAAIja,GAAiC,EAAxBijD,EAAQhpC,EAAMja,OAC3B+iD,GAAOC,EAASD,EAAM/iD,EAItB,KAAK,GAAItI,GAAI,EAAGA,EAAIsI,EAAQtI,GAAK,EAC/BqrD,EAAKrrD,GAAgB,IAAXuiB,EAAMviB,EAElB,OAAOqrD,GAGN,QAASS,GAAiBT,EAAM9oC,GAWjC,MARIg5B,GAAO0P,qBAETI,EAAO,GAAI3/B,YAAWnJ,GACtB8oC,EAAKY,UAAY1Q,EAAO3/B,WAGxByvC,EAAOQ,EAAeR,EAAM,GAAI3/B,YAAWnJ,IAEtC8oC,EAGN,QAASU,GAAeV,EAAM9oC,GAC/B,GAAIja,GAAiC,EAAxBijD,EAAQhpC,EAAMja,OAC3B+iD,GAAOC,EAASD,EAAM/iD,EACtB,KAAK,GAAItI,GAAI,EAAGA,EAAIsI,EAAQtI,GAAK,EAC/BqrD,EAAKrrD,GAAgB,IAAXuiB,EAAMviB,EAElB,OAAOqrD,GAKN,QAASW,GAAgBX,EAAMv/C,GAChC,GAAIyW,GACAja,EAAS,CAEO,YAAhBwD,EAAOnJ,MAAqBmkD,EAAQh7C,EAAOwiB,QAC7C/L,EAAQzW,EAAOwiB,KACfhmB,EAAiC,EAAxBijD,EAAQhpC,EAAMja,SAEzB+iD,EAAOC,EAASD,EAAM/iD,EAEtB,KAAK,GAAItI,GAAI,EAAGA,EAAIsI,EAAQtI,GAAK,EAC/BqrD,EAAKrrD,GAAgB,IAAXuiB,EAAMviB,EAElB,OAAOqrD,GAYN,QAASC,GAAUD,EAAM/iD,GAa1B,MAZIizC,GAAO0P,qBAETI,EAAO,GAAI3/B,YAAWpjB,GACtB+iD,EAAKY,UAAY1Q,EAAO3/B,WAGxByvC,EAAK/iD,OAASA,EAGU,IAAXA,GAAgBA,GAAUizC,EAAO2Q,WAAa,IAC/Cb,EAAK7nC,OAAS2oC,GAErBd,EAGN,QAASE,GAASjjD,GAGnB,GAAIA,GAAU0iD,IACZ,KAAM,IAAIoB,YAAW,0DACapB,IAAatP,SAAS,IAAM,SAEhE,OAAgB,GAATpzC,EAGN,QAAS+jD,GAAYC,EAAS1P,GAC/B,KAAM97C,eAAgBurD,IAAa,MAAO,IAAIA,GAAWC,EAAS1P,EAElE,IAAIU,GAAM,GAAI/B,GAAO+Q,EAAS1P,EAE9B,cADOU,GAAI95B,OACJ85B,EA+EN,QAASkO,GAAY1F,EAAQlJ,GACR,gBAAXkJ,KAAqBA,EAAS,GAAKA,EAE9C,IAAIvF,GAAMuF,EAAOx9C,MACjB,IAAY,IAARi4C,EAAW,MAAO,EAItB,KADA,GAAIgM,IAAc,IAEhB,OAAQ3P,GACN,IAAK,QACL,IAAK,SAEL,IAAK,MACL,IAAK,OACH,MAAO2D,EACT,KAAK,OACL,IAAK,QACH,MAAOiM,GAAY1G,GAAQx9C,MAC7B,KAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,MAAa,GAANi4C,CACT,KAAK,MACH,MAAOA,KAAQ,CACjB,KAAK,SACH,MAAOkM,GAAc3G,GAAQx9C,MAC/B,SACE,GAAIikD,EAAa,MAAOC,GAAY1G,GAAQx9C,MAC5Cs0C,IAAY,GAAKA,GAAU6E,cAC3B8K,GAAc,GAMnB,QAASG,GAAc9P,EAAU32C,EAAO4H,GACzC,GAAI0+C,IAAc,CAQlB,IANAtmD,GAAgB,EAChB4H,MAAcrC,KAARqC,GAAqBA,IAAQ4J,IAAW3W,KAAKwH,OAAe,EAANuF,EAEvD+uC,IAAUA,EAAW,QACtB32C,EAAQ,IAAGA,EAAQ,GACnB4H,EAAM/M,KAAKwH,SAAQuF,EAAM/M,KAAKwH,QAC9BuF,GAAO5H,EAAO,MAAO,EAEzB,QACE,OAAQ22C,GACN,IAAK,MACH,MAAO+P,GAAS7rD,KAAMmF,EAAO4H,EAE/B,KAAK,OACL,IAAK,QACH,MAAO++C,GAAU9rD,KAAMmF,EAAO4H,EAEhC,KAAK,QACH,MAAOg/C,GAAW/rD,KAAMmF,EAAO4H,EAEjC,KAAK,SACH,MAAOi/C,GAAYhsD,KAAMmF,EAAO4H,EAElC,KAAK,SACH,MAAOk/C,GAAYjsD,KAAMmF,EAAO4H,EAElC,KAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,MAAOm/C,GAAalsD,KAAMmF,EAAO4H,EAEnC,SACE,GAAI0+C,EAAa,KAAM,IAAI1a,WAAU,qBAAuB+K,EAC5DA,IAAYA,EAAW,IAAI6E,cAC3B8K,GAAc,GA+EnB,QAASU,GAAU3P,EAAKwI,EAAQttC,EAAQlQ,GACzCkQ,EAASoiC,OAAOpiC,IAAW,CAC3B,IAAI00C,GAAY5P,EAAIh1C,OAASkQ,CACxBlQ,IAGHA,EAASsyC,OAAOtyC,IACH4kD,IACX5kD,EAAS4kD,GAJX5kD,EAAS4kD,CASX,IAAIC,GAASrH,EAAOx9C,MACpB,IAAI6kD,EAAS,GAAM,EAAG,KAAM,IAAIlc,OAAM,qBAElC3oC,GAAS6kD,EAAS,IACpB7kD,EAAS6kD,EAAS,EAEpB,KAAK,GAAIntD,GAAI,EAAGA,EAAIsI,EAAQtI,IAAK,CAC/B,GAAIotD,GAAS/tB,SAASymB,EAAOuH,OAAW,EAAJrtD,EAAO,GAAI,GAC/C,IAAIgzC,MAAMoa,GAAS,KAAM,IAAInc,OAAM,qBACnCqM,GAAI9kC,EAASxY,GAAKotD,EAEpB,MAAOptD,GAGN,QAASstD,GAAWhQ,EAAKwI,EAAQttC,EAAQlQ,GAC1C,MAAOilD,GAAWf,EAAY1G,EAAQxI,EAAIh1C,OAASkQ,GAAS8kC,EAAK9kC,EAAQlQ,GAGxE,QAASklD,GAAYlQ,EAAKwI,EAAQttC,EAAQlQ,GAC3C,MAAOilD,GAAWE,EAAa3H,GAASxI,EAAK9kC,EAAQlQ,GAGpD,QAASolD,GAAapQ,EAAKwI,EAAQttC,EAAQlQ,GAC5C,MAAOklD,GAAWlQ,EAAKwI,EAAQttC,EAAQlQ,GAGtC,QAASqlD,GAAarQ,EAAKwI,EAAQttC,EAAQlQ,GAC5C,MAAOilD,GAAWd,EAAc3G,GAASxI,EAAK9kC,EAAQlQ,GAGrD,QAASslD,GAAWtQ,EAAKwI,EAAQttC,EAAQlQ,GAC1C,MAAOilD,GAAWM,EAAe/H,EAAQxI,EAAIh1C,OAASkQ,GAAS8kC,EAAK9kC,EAAQlQ,GAkF3E,QAASykD,GAAazP,EAAKr3C,EAAO4H,GACnC,MAAc,KAAV5H,GAAe4H,IAAQyvC,EAAIh1C,OACtBwlD,EAAOC,cAAczQ,GAErBwQ,EAAOC,cAAczQ,EAAIC,MAAMt3C,EAAO4H,IAI9C,QAAS++C,GAAWtP,EAAKr3C,EAAO4H,GACjCA,EAAM8B,KAAKqL,IAAIsiC,EAAIh1C,OAAQuF,EAI3B,KAHA,GAAI4uC,MAEAz8C,EAAIiG,EACDjG,EAAI6N,GAAK,CACd,GAAImgD,GAAY1Q,EAAIt9C,GAChBiuD,EAAY,KACZC,EAAoBF,EAAY,IAAQ,EACvCA,EAAY,IAAQ,EACpBA,EAAY,IAAQ,EACrB,CAEJ,IAAIhuD,EAAIkuD,GAAoBrgD,EAAK,CAC/B,GAAIsgD,GAAYC,EAAWC,EAAYC,CAEvC,QAAQJ,GACN,IAAK,GACCF,EAAY,MACdC,EAAYD,EAEd,MACF,KAAK,GACHG,EAAa7Q,EAAIt9C,EAAI,GACO,MAAV,IAAbmuD,KACHG,GAA6B,GAAZN,IAAqB,EAAoB,GAAbG,GACzB,MAClBF,EAAYK,EAGhB,MACF,KAAK,GACHH,EAAa7Q,EAAIt9C,EAAI,GACrBouD,EAAY9Q,EAAIt9C,EAAI,GACQ,MAAV,IAAbmuD,IAAsD,MAAV,IAAZC,KACnCE,GAA6B,GAAZN,IAAoB,IAAoB,GAAbG,IAAsB,EAAmB,GAAZC,GACrD,OAAUE,EAAgB,OAAUA,EAAgB,SACtEL,EAAYK,EAGhB,MACF,KAAK,GACHH,EAAa7Q,EAAIt9C,EAAI,GACrBouD,EAAY9Q,EAAIt9C,EAAI,GACpBquD,EAAa/Q,EAAIt9C,EAAI,GACO,MAAV,IAAbmuD,IAAsD,MAAV,IAAZC,IAAsD,MAAV,IAAbC,KAClEC,GAA6B,GAAZN,IAAoB,IAAqB,GAAbG,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,GAClF,OAAUC,EAAgB,UAC5CL,EAAYK,IAMJ,OAAdL,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACbxR,EAAI18C,KAAKkuD,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBxR,EAAI18C,KAAKkuD,GACTjuD,GAAKkuD,EAGP,MAAOK,GAAsB9R,GAQ5B,QAAS8R,GAAuBC,GACjC,GAAIjO,GAAMiO,EAAWlmD,MACrB,IAAIi4C,GAAOkO,EACT,MAAOC,QAAOC,aAAavI,MAAMsI,OAAQF,EAM3C,KAFA,GAAI/R,GAAM,GACNz8C,EAAI,EACDA,EAAIugD,GACT9D,GAAOiS,OAAOC,aAAavI,MACzBsI,OACAF,EAAWjR,MAAMv9C,EAAGA,GAAKyuD,GAG7B,OAAOhS,GAGN,QAASoQ,GAAYvP,EAAKr3C,EAAO4H,GAClC,GAAI+gD,GAAM,EACV/gD,GAAM8B,KAAKqL,IAAIsiC,EAAIh1C,OAAQuF,EAE3B,KAAK,GAAI7N,GAAIiG,EAAOjG,EAAI6N,EAAK7N,IAC3B4uD,GAAOF,OAAOC,aAAsB,IAATrR,EAAIt9C,GAEjC,OAAO4uD,GAGN,QAAS9B,GAAaxP,EAAKr3C,EAAO4H,GACnC,GAAI+gD,GAAM,EACV/gD,GAAM8B,KAAKqL,IAAIsiC,EAAIh1C,OAAQuF,EAE3B,KAAK,GAAI7N,GAAIiG,EAAOjG,EAAI6N,EAAK7N,IAC3B4uD,GAAOF,OAAOC,aAAarR,EAAIt9C,GAEjC,OAAO4uD,GAGN,QAASjC,GAAUrP,EAAKr3C,EAAO4H,GAChC,GAAI0yC,GAAMjD,EAAIh1C,SAETrC,GAASA,EAAQ,KAAGA,EAAQ,KAC5B4H,GAAOA,EAAM,GAAKA,EAAM0yC,KAAK1yC,EAAM0yC,EAGxC,KAAK,GADDpC,GAAM,GACDn+C,EAAIiG,EAAOjG,EAAI6N,EAAK7N,IAC3Bm+C,GAAO0Q,EAAMvR,EAAIt9C,GAEnB,OAAOm+C,GAGN,QAAS6O,GAAc1P,EAAKr3C,EAAO4H,GAGpC,IAAK,GAFDihD,GAAQxR,EAAIC,MAAMt3C,EAAO4H,GACzB4uC,EAAM,GACDz8C,EAAI,EAAGA,EAAI8uD,EAAMxmD,OAAQtI,GAAK,EACrCy8C,GAAOiS,OAAOC,aAAaG,EAAM9uD,GAAoB,IAAf8uD,EAAM9uD,EAAI,GAElD,OAAOy8C,GA4CN,QAASsS,GAAav2C,EAAQw2C,EAAK1mD,GACpC,GAAKkQ,EAAS,GAAO,GAAKA,EAAS,EAAG,KAAM,IAAI4zC,YAAW,qBAC3D,IAAI5zC,EAASw2C,EAAM1mD,EAAQ,KAAM,IAAI8jD,YAAW,yCA+J/C,QAAS6C,GAAU3R,EAAKn6C,EAAOqV,EAAQw2C,EAAKj0C,EAAKC,GAClD,IAAKugC,EAAOoB,SAASW,GAAM,KAAM,IAAIzL,WAAU,mCAC/C,IAAI1uC,EAAQ4X,GAAO5X,EAAQ6X,EAAK,KAAM,IAAIoxC,YAAW,yBACrD,IAAI5zC,EAASw2C,EAAM1R,EAAIh1C,OAAQ,KAAM,IAAI8jD,YAAW,sBA4CnD,QAAS8C,GAAmB5R,EAAKn6C,EAAOqV,EAAQ22C,GAC7ChsD,EAAQ,IAAGA,EAAQ,MAASA,EAAQ,EACxC,KAAK,GAAInD,GAAI,EAAGioD,EAAIt4C,KAAKqL,IAAIsiC,EAAIh1C,OAASkQ,EAAQ,GAAIxY,EAAIioD,EAAGjoD,IAC3Ds9C,EAAI9kC,EAASxY,IAAMmD,EAAS,KAAS,GAAKgsD,EAAenvD,EAAI,EAAIA,MAClC,GAA5BmvD,EAAenvD,EAAI,EAAIA,GA8B3B,QAASovD,GAAmB9R,EAAKn6C,EAAOqV,EAAQ22C,GAC7ChsD,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,EAC5C,KAAK,GAAInD,GAAI,EAAGioD,EAAIt4C,KAAKqL,IAAIsiC,EAAIh1C,OAASkQ,EAAQ,GAAIxY,EAAIioD,EAAGjoD,IAC3Ds9C,EAAI9kC,EAASxY,GAAMmD,IAAuC,GAA5BgsD,EAAenvD,EAAI,EAAIA,GAAU,IA6IhE,QAASqvD,GAAc/R,EAAKn6C,EAAOqV,EAAQw2C,EAAKj0C,EAAKC,GACtD,GAAI7X,EAAQ4X,GAAO5X,EAAQ6X,EAAK,KAAM,IAAIoxC,YAAW,yBACrD,IAAI5zC,EAASw2C,EAAM1R,EAAIh1C,OAAQ,KAAM,IAAI8jD,YAAW,qBACpD,IAAI5zC,EAAS,EAAG,KAAM,IAAI4zC,YAAW,sBAGpC,QAASkD,GAAYhS,EAAKn6C,EAAOqV,EAAQ22C,EAAcI,GAKxD,MAJKA,IACHF,EAAa/R,EAAKn6C,EAAOqV,EAAQ,EAAG,uBAAyB,uBAE/Dg3C,EAAQ/D,MAAMnO,EAAKn6C,EAAOqV,EAAQ22C,EAAc,GAAI,GAC7C32C,EAAS,EAWf,QAASi3C,GAAanS,EAAKn6C,EAAOqV,EAAQ22C,EAAcI,GAKzD,MAJKA,IACHF,EAAa/R,EAAKn6C,EAAOqV,EAAQ,EAAG,wBAA0B,wBAEhEg3C,EAAQ/D,MAAMnO,EAAKn6C,EAAOqV,EAAQ22C,EAAc,GAAI,GAC7C32C,EAAS,EAgGf,QAASk3C,GAAa3R,GAIvB,GAFAA,EAAM4R,EAAW5R,GAAKF,QAAQ+R,EAAmB,IAE7C7R,EAAIz1C,OAAS,EAAG,MAAO,EAE3B,MAAOy1C,EAAIz1C,OAAS,GAAM,GACxBy1C,GAAY,GAEd,OAAOA,GAGN,QAAS4R,GAAY5R,GACtB,MAAIA,GAAIlB,KAAakB,EAAIlB,OAClBkB,EAAIF,QAAQ,aAAc,IAGhC,QAASgR,GAAOpqD,GACjB,MAAIA,GAAI,GAAW,IAAMA,EAAEi3C,SAAS,IAC7Bj3C,EAAEi3C,SAAS,IAGjB,QAAS8Q,GAAa1G,EAAQ+J,GAC/BA,EAAQA,GAASp4C,GAMjB,KAAK,GALDw2C,GACA3lD,EAASw9C,EAAOx9C,OAChBwnD,EAAgB,KAChBhB,KAEK9uD,EAAI,EAAGA,EAAIsI,EAAQtI,IAAK,CAI/B,IAHAiuD,EAAYnI,EAAO/P,WAAW/1C,IAGd,OAAUiuD,EAAY,MAAQ,CAE5C,IAAK6B,EAAe,CAElB,GAAI7B,EAAY,MAAQ,EAEjB4B,GAAS,IAAM,GAAGf,EAAM/uD,KAAK,IAAM,IAAM,IAC9C,UACK,GAAIC,EAAI,IAAMsI,EAAQ,EAEtBunD,GAAS,IAAM,GAAGf,EAAM/uD,KAAK,IAAM,IAAM,IAC9C,UAIF+vD,EAAgB7B,CAEhB,UAIF,GAAIA,EAAY,MAAQ,EACjB4B,GAAS,IAAM,GAAGf,EAAM/uD,KAAK,IAAM,IAAM,KAC9C+vD,EAAgB7B,CAChB,UAIFA,EAAkE,OAArD6B,EAAgB,OAAU,GAAK7B,EAAY,WAC/C6B,KAEJD,GAAS,IAAM,GAAGf,EAAM/uD,KAAK,IAAM,IAAM,IAMhD,IAHA+vD,EAAgB,KAGZ7B,EAAY,IAAM,CACpB,IAAK4B,GAAS,GAAK,EAAG,KACtBf,GAAM/uD,KAAKkuD,OACN,IAAIA,EAAY,KAAO,CAC5B,IAAK4B,GAAS,GAAK,EAAG,KACtBf,GAAM/uD,KACJkuD,GAAa,EAAM,IACP,GAAZA,EAAmB,SAEhB,IAAIA,EAAY,MAAS,CAC9B,IAAK4B,GAAS,GAAK,EAAG,KACtBf,GAAM/uD,KACJkuD,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,SAEhB,MAAIA,EAAY,SASrB,KAAM,IAAIhd,OAAM,qBARhB,KAAK4e,GAAS,GAAK,EAAG,KACtBf,GAAM/uD,KACJkuD,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,MAOzB,MAAOa,GAGN,QAASrB,GAAc1P,GAExB,IAAK,GADDgS,MACK/vD,EAAI,EAAGA,EAAI+9C,EAAIz1C,OAAQtI,IAE9B+vD,EAAUhwD,KAAyB,IAApBg+C,EAAIhI,WAAW/1C,GAEhC,OAAO+vD,GAGN,QAASlC,GAAgB9P,EAAK8R,GAG/B,IAAK,GAFDnnD,GAAGsnD,EAAIC,EACPF,KACK/vD,EAAI,EAAGA,EAAI+9C,EAAIz1C,WACjBunD,GAAS,GAAK,GADW7vD,IAG9B0I,EAAIq1C,EAAIhI,WAAW/1C,GACnBgwD,EAAKtnD,GAAK,EACVunD,EAAKvnD,EAAI,IACTqnD,EAAUhwD,KAAKkwD,GACfF,EAAUhwD,KAAKiwD,EAGjB,OAAOD,GAGN,QAAStD,GAAe1O,GACzB,MAAO+P,GAAOoC,YAAYR,EAAY3R,IAGrC,QAASwP,GAAYxmD,EAAKopD,EAAK33C,EAAQlQ,GACxC,IAAK,GAAItI,GAAI,EAAGA,EAAIsI,KACbtI,EAAIwY,GAAU23C,EAAI7nD,QAAYtI,GAAK+G,EAAIuB,QADlBtI,IAE1BmwD,EAAInwD,EAAIwY,GAAUzR,EAAI/G,EAExB,OAAOA,GAh6CN,GAAI8tD,GAASxpD,EAAQ,aACjBkrD,EAAUlrD,EAAQ,WAClBwiD,EAAUxiD,EAAQ,UAEtBzE,GAAQ07C,OAASA,EACjB17C,EAAQwsD,WAAaA,EACrBxsD,EAAQuwD,kBAAoB,GAC5B7U,EAAO2Q,SAAW,IAElB,IAAIC,KA0BJ5Q,GAAO0P,wBAAqDz/C,KAA/BnH,EAAO4mD,oBACnC5mD,EAAO4mD,oBAGR,WACD,IACE,GAAIxP,GAAM,GAAI/vB,YAAW,EAEzB,OADA+vB,GAAI4U,IAAM,WAAc,MAAO,KACV,KAAd5U,EAAI4U,OACiB,kBAAjB5U,GAAI6U,UACuB,IAAlC7U,EAAI6U,SAAS,EAAG,GAAG9E,WACvB,MAAO5lD,GACP,OAAO,MAkKJ21C,EAAO0P,qBACZ1P,EAAO3/B,UAAUqwC,UAAYvgC,WAAW9P,UACxC2/B,EAAO0Q,UAAYvgC,aAGnB6vB,EAAO3/B,UAAUtT,WAASkD,GAC1B+vC,EAAO3/B,UAAU4H,WAAShY,IAqCzB+vC,EAAOoB,SAAW,SAAmB9yC,GACtC,QAAe,MAALA,IAAaA,EAAEk/C,YAGxBxN,EAAOgV,QAAU,SAAkBvqD,EAAG6D,GACvC,IAAK0xC,EAAOoB,SAAS32C,KAAOu1C,EAAOoB,SAAS9yC,GAC1C,KAAM,IAAIgoC,WAAU,4BAGtB,IAAI7rC,IAAM6D,EAAG,MAAO,EAOpB,KALA,GAAIoK,GAAIjO,EAAEsC,OACNqB,EAAIE,EAAEvB,OAENtI,EAAI,EACJugD,EAAM5wC,KAAKqL,IAAI/G,EAAGtK,GACf3J,EAAIugD,GACLv6C,EAAEhG,KAAO6J,EAAE7J,MAEbA,CAQJ,OALIA,KAAMugD,IACRtsC,EAAIjO,EAAEhG,GACN2J,EAAIE,EAAE7J,IAGJiU,EAAItK,GAAW,EACfA,EAAIsK,EAAU,EACX,GAGNsnC,EAAOiV,WAAa,SAAqB5T,GAC1C,OAAQ8R,OAAO9R,GAAU6E,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,CACT,SACE,OAAO,IAIVlG,EAAO7tC,OAAS,SAAiB84C,EAAMl+C,GACxC,IAAKw+C,EAAQN,GAAO,KAAM,IAAI3U,WAAU,6CAExC,IAAoB,IAAhB2U,EAAKl+C,OACP,MAAO,IAAIizC,GAAO,EAGpB,IAAIv7C,EACJ,QAAewL,KAAXlD,EAEF,IADAA,EAAS,EACJtI,EAAI,EAAGA,EAAIwmD,EAAKl+C,OAAQtI,IAC3BsI,GAAUk+C,EAAKxmD,GAAGsI,MAItB,IAAIg1C,GAAM,GAAI/B,GAAOjzC,GACjBs4C,EAAM,CACV,KAAK5gD,EAAI,EAAGA,EAAIwmD,EAAKl+C,OAAQtI,IAAK,CAChC,GAAIi9B,GAAOupB,EAAKxmD,EAChBi9B,GAAK3oB,KAAKgpC,EAAKsD,GACfA,GAAO3jB,EAAK30B,OAEd,MAAOg1C,IAsCN/B,EAAOiQ,WAAaA,EA+CpBjQ,EAAO3/B,UAAUmtC,WAAY,EAE7BxN,EAAO3/B,UAAU8/B,SAAW,WAC7B,GAAIpzC,GAAuB,EAAdxH,KAAKwH,MAClB,OAAe,KAAXA,EAAqB,GACA,IAArBkG,UAAUlG,OAAqBskD,EAAU9rD,KAAM,EAAGwH,GAC/CokD,EAAatG,MAAMtlD,KAAM0N,YAG/B+sC,EAAO3/B,UAAU8hC,OAAS,SAAiB7zC,GAC5C,IAAK0xC,EAAOoB,SAAS9yC,GAAI,KAAM,IAAIgoC,WAAU,4BAC7C,OAAI/wC,QAAS+I,GACsB,IAA5B0xC,EAAOgV,QAAQzvD,KAAM+I,IAG3B0xC,EAAO3/B,UAAU60C,QAAU,WAC5B,GAAI1S,GAAM,GACNhjC,EAAMlb,EAAQuwD,iBAKlB,OAJItvD,MAAKwH,OAAS,IAChBy1C,EAAMj9C,KAAK46C,SAAS,MAAO,EAAG3gC,GAAKijC,MAAM,SAASnxB,KAAK,KACnD/rB,KAAKwH,OAASyS,IAAKgjC,GAAO,UAEzB,WAAaA,EAAM,KAGzBxC,EAAO3/B,UAAU20C,QAAU,SAAkB1mD,GAC9C,IAAK0xC,EAAOoB,SAAS9yC,GAAI,KAAM,IAAIgoC,WAAU,4BAC7C,OAAI/wC,QAAS+I,EAAU,EAChB0xC,EAAOgV,QAAQzvD,KAAM+I,IAG3B0xC,EAAO3/B,UAAUpS,QAAU,SAAkB60C,EAAKqS,GAyBnD,QAASC,GAAclV,EAAK4C,EAAKqS,GAE/B,IAAK,GADDE,IAAc,EACT5wD,EAAI,EAAG0wD,EAAa1wD,EAAIy7C,EAAInzC,OAAQtI,IAC3C,GAAIy7C,EAAIiV,EAAa1wD,KAAOq+C,GAAoB,IAAhBuS,EAAoB,EAAI5wD,EAAI4wD,IAE1D,IADoB,IAAhBA,IAAmBA,EAAa5wD,GAChCA,EAAI4wD,EAAa,IAAMvS,EAAI/1C,OAAQ,MAAOooD,GAAaE,MAE3DA,IAAc,CAGlB,QAAQ,EA9BV,GAJIF,EAAa,WAAYA,EAAa,WACjCA,GAAc,aAAYA,GAAc,YACjDA,IAAe,EAEK,IAAhB5vD,KAAKwH,OAAc,OAAQ,CAC/B,IAAIooD,GAAc5vD,KAAKwH,OAAQ,OAAQ,CAKvC,IAFIooD,EAAa,IAAGA,EAAa/gD,KAAKoL,IAAIja,KAAKwH,OAASooD,EAAY,IAEjD,gBAARrS,GACT,MAAmB,KAAfA,EAAI/1C,QAAsB,EACvBomD,OAAO9yC,UAAUpS,QAAQmE,KAAK7M,KAAMu9C,EAAKqS,EAElD,IAAInV,EAAOoB,SAAS0B,GAClB,MAAOsS,GAAa7vD,KAAMu9C,EAAKqS,EAEjC,IAAmB,gBAARrS,GACT,MAAI9C,GAAO0P,qBAAwD,aAAjCv/B,WAAW9P,UAAUpS,QAC9CkiB,WAAW9P,UAAUpS,QAAQmE,KAAK7M,KAAMu9C,EAAKqS,GAE/CC,EAAa7vD,MAAQu9C,GAAOqS,EAgBrC,MAAM,IAAI7e,WAAU,yCAkDnB0J,EAAO3/B,UAAU6vC,MAAQ,SAAgB3F,EAAQttC,EAAQlQ,EAAQs0C,GAElE,OAAepxC,KAAXgN,EACFokC,EAAW,OACXt0C,EAASxH,KAAKwH,OACdkQ,EAAS,MAEJ,QAAehN,KAAXlD,GAA0C,gBAAXkQ,GACxCokC,EAAWpkC,EACXlQ,EAASxH,KAAKwH,OACdkQ,EAAS,MAEJ,IAAIvJ,SAASuJ,GAClBA,GAAkB,EACdvJ,SAAS3G,IACXA,GAAkB,MACDkD,KAAboxC,IAAwBA,EAAW,UAEvCA,EAAWt0C,EACXA,MAASkD,QAGN,CACL,GAAIqlD,GAAOjU,CACXA,GAAWpkC,EACXA,EAAkB,EAATlQ,EACTA,EAASuoD,EAGX,GAAI3D,GAAYpsD,KAAKwH,OAASkQ,CAG9B,SAFehN,KAAXlD,GAAwBA,EAAS4kD,KAAW5kD,EAAS4kD,GAEpDpH,EAAOx9C,OAAS,IAAMA,EAAS,GAAKkQ,EAAS,IAAOA,EAAS1X,KAAKwH,OACrE,KAAM,IAAI8jD,YAAW,yCAGlBxP,KAAUA,EAAW,OAG1B,KADA,GAAI2P,IAAc,IAEhB,OAAQ3P,GACN,IAAK,MACH,MAAOqQ,GAASnsD,KAAMglD,EAAQttC,EAAQlQ,EAExC,KAAK,OACL,IAAK,QACH,MAAOglD,GAAUxsD,KAAMglD,EAAQttC,EAAQlQ,EAEzC,KAAK,QACH,MAAOklD,GAAW1sD,KAAMglD,EAAQttC,EAAQlQ,EAE1C,KAAK,SACH,MAAOolD,GAAY5sD,KAAMglD,EAAQttC,EAAQlQ,EAE3C,KAAK,SAEH,MAAOqlD,GAAY7sD,KAAMglD,EAAQttC,EAAQlQ,EAE3C,KAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,MAAOslD,GAAU9sD,KAAMglD,EAAQttC,EAAQlQ,EAEzC,SACE,GAAIikD,EAAa,KAAM,IAAI1a,WAAU,qBAAuB+K,EAC5DA,IAAY,GAAKA,GAAU6E,cAC3B8K,GAAc,IAKnBhR,EAAO3/B,UAAUk1C,OAAS,WAC3B,OACEnuD,KAAM,SACN2rB,KAAM7gB,MAAMmO,UAAU2hC,MAAM5vC,KAAK7M,KAAKiwD,MAAQjwD,KAAM,IAwFrD,IAAI2tD,GAAuB,IA8D3BlT,GAAO3/B,UAAU2hC,MAAQ,SAAgBt3C,EAAO4H,GACjD,GAAI0yC,GAAMz/C,KAAKwH,MACfrC,KAAUA,EACV4H,MAAcrC,KAARqC,EAAoB0yC,IAAQ1yC,EAE9B5H,EAAQ,GACVA,GAASs6C,GACG,IAAGt6C,EAAQ,GACdA,EAAQs6C,IACjBt6C,EAAQs6C,GAGN1yC,EAAM,GACRA,GAAO0yC,GACG,IAAG1yC,EAAM,GACVA,EAAM0yC,IACf1yC,EAAM0yC,GAGJ1yC,EAAM5H,IAAO4H,EAAM5H,EAEvB,IAAI+qD,EACJ,IAAIzV,EAAO0P,oBACT+F,EAASlwD,KAAKwvD,SAASrqD,EAAO4H,GAC9BmjD,EAAO/E,UAAY1Q,EAAO3/B,cACrB,CACL,GAAIq1C,GAAWpjD,EAAM5H,CACrB+qD,GAAS,GAAIzV,GAAO0V,MAAUzlD,GAC9B,KAAK,GAAIxL,GAAI,EAAGA,EAAIixD,EAAUjxD,IAC5BgxD,EAAOhxD,GAAKc,KAAKd,EAAIiG,GAMzB,MAFI+qD,GAAO1oD,SAAQ0oD,EAAOxtC,OAAS1iB,KAAK0iB,QAAU1iB,MAE3CkwD,GAWNzV,EAAO3/B,UAAUs1C,WAAa,SAAqB14C,EAAQgzC,EAAY+D,GACxE/2C,GAAkB,EAClBgzC,GAA0B,EACrB+D,GAAUR,EAAYv2C,EAAQgzC,EAAY1qD,KAAKwH,OAKpD,KAHA,GAAI+1C,GAAMv9C,KAAK0X,GACX24C,EAAM,EACNnxD,EAAI,IACCA,EAAIwrD,IAAe2F,GAAO,MACjC9S,GAAOv9C,KAAK0X,EAASxY,GAAKmxD,CAG5B,OAAO9S,IAGN9C,EAAO3/B,UAAUw1C,WAAa,SAAqB54C,EAAQgzC,EAAY+D,GACxE/2C,GAAkB,EAClBgzC,GAA0B,EACrB+D,GACHR,EAAYv2C,EAAQgzC,EAAY1qD,KAAKwH,OAKvC,KAFA,GAAI+1C,GAAMv9C,KAAK0X,IAAWgzC,GACtB2F,EAAM,EACH3F,EAAa,IAAM2F,GAAO,MAC/B9S,GAAOv9C,KAAK0X,IAAWgzC,GAAc2F,CAGvC,OAAO9S,IAGN9C,EAAO3/B,UAAU+iC,UAAY,SAAoBnmC,EAAQ+2C,GAE1D,MADKA,IAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,QACpCxH,KAAK0X,IAGX+iC,EAAO3/B,UAAUgkC,aAAe,SAAuBpnC,EAAQ+2C,GAEhE,MADKA,IAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,QACpCxH,KAAK0X,GAAW1X,KAAK0X,EAAS,IAAM,GAG1C+iC,EAAO3/B,UAAUy1C,aAAe,SAAuB74C,EAAQ+2C,GAEhE,MADKA,IAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,QACnCxH,KAAK0X,IAAW,EAAK1X,KAAK0X,EAAS,IAG1C+iC,EAAO3/B,UAAU8kC,aAAe,SAAuBloC,EAAQ+2C,GAGhE,MAFKA,IAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,SAElCxH,KAAK0X,GACT1X,KAAK0X,EAAS,IAAM,EACpB1X,KAAK0X,EAAS,IAAM,IACD,SAAnB1X,KAAK0X,EAAS,IAGlB+iC,EAAO3/B,UAAU01C,aAAe,SAAuB94C,EAAQ+2C,GAGhE,MAFKA,IAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,QAEpB,SAAfxH,KAAK0X,IACT1X,KAAK0X,EAAS,IAAM,GACrB1X,KAAK0X,EAAS,IAAM,EACrB1X,KAAK0X,EAAS,KAGf+iC,EAAO3/B,UAAU21C,UAAY,SAAoB/4C,EAAQgzC,EAAY+D,GACtE/2C,GAAkB,EAClBgzC,GAA0B,EACrB+D,GAAUR,EAAYv2C,EAAQgzC,EAAY1qD,KAAKwH,OAKpD,KAHA,GAAI+1C,GAAMv9C,KAAK0X,GACX24C,EAAM,EACNnxD,EAAI,IACCA,EAAIwrD,IAAe2F,GAAO,MACjC9S,GAAOv9C,KAAK0X,EAASxY,GAAKmxD,CAM5B,OAJAA,IAAO,IAEH9S,GAAO8S,IAAK9S,GAAO1uC,KAAKK,IAAI,EAAG,EAAIw7C,IAEhCnN,GAGN9C,EAAO3/B,UAAU41C,UAAY,SAAoBh5C,EAAQgzC,EAAY+D,GACtE/2C,GAAkB,EAClBgzC,GAA0B,EACrB+D,GAAUR,EAAYv2C,EAAQgzC,EAAY1qD,KAAKwH,OAKpD,KAHA,GAAItI,GAAIwrD,EACJ2F,EAAM,EACN9S,EAAMv9C,KAAK0X,IAAWxY,GACnBA,EAAI,IAAMmxD,GAAO,MACtB9S,GAAOv9C,KAAK0X,IAAWxY,GAAKmxD,CAM9B,OAJAA,IAAO,IAEH9S,GAAO8S,IAAK9S,GAAO1uC,KAAKK,IAAI,EAAG,EAAIw7C,IAEhCnN,GAGN9C,EAAO3/B,UAAUkkC,SAAW,SAAmBtnC,EAAQ+2C,GAExD,MADKA,IAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,QACtB,IAAfxH,KAAK0X,IAC0B,GAA5B,IAAO1X,KAAK0X,GAAU,GADK1X,KAAK0X,IAIxC+iC,EAAO3/B,UAAUujC,YAAc,SAAsB3mC,EAAQ+2C,GACzDA,GAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,OAC3C,IAAI+1C,GAAMv9C,KAAK0X,GAAW1X,KAAK0X,EAAS,IAAM,CAC9C,OAAc,OAAN6lC,EAAsB,WAANA,EAAmBA,GAG1C9C,EAAO3/B,UAAU61C,YAAc,SAAsBj5C,EAAQ+2C,GACzDA,GAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,OAC3C,IAAI+1C,GAAMv9C,KAAK0X,EAAS,GAAM1X,KAAK0X,IAAW,CAC9C,OAAc,OAAN6lC,EAAsB,WAANA,EAAmBA,GAG1C9C,EAAO3/B,UAAUijC,YAAc,SAAsBrmC,EAAQ+2C,GAG9D,MAFKA,IAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,QAEnCxH,KAAK0X,GACV1X,KAAK0X,EAAS,IAAM,EACpB1X,KAAK0X,EAAS,IAAM,GACpB1X,KAAK0X,EAAS,IAAM,IAGtB+iC,EAAO3/B,UAAU81C,YAAc,SAAsBl5C,EAAQ+2C,GAG9D,MAFKA,IAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,QAEnCxH,KAAK0X,IAAW,GACrB1X,KAAK0X,EAAS,IAAM,GACpB1X,KAAK0X,EAAS,IAAM,EACpB1X,KAAK0X,EAAS,IAGhB+iC,EAAO3/B,UAAU+1C,YAAc,SAAsBn5C,EAAQ+2C,GAE9D,MADKA,IAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,QACpCknD,EAAQoC,KAAK9wD,KAAM0X,GAAQ,EAAM,GAAI,IAG3C+iC,EAAO3/B,UAAUi2C,YAAc,SAAsBr5C,EAAQ+2C,GAE9D,MADKA,IAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,QACpCknD,EAAQoC,KAAK9wD,KAAM0X,GAAQ,EAAO,GAAI,IAG5C+iC,EAAO3/B,UAAUk2C,aAAe,SAAuBt5C,EAAQ+2C,GAEhE,MADKA,IAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,QACpCknD,EAAQoC,KAAK9wD,KAAM0X,GAAQ,EAAM,GAAI,IAG3C+iC,EAAO3/B,UAAUm2C,aAAe,SAAuBv5C,EAAQ+2C,GAEhE,MADKA,IAAUR,EAAYv2C,EAAQ,EAAG1X,KAAKwH,QACpCknD,EAAQoC,KAAK9wD,KAAM0X,GAAQ,EAAO,GAAI,IAS5C+iC,EAAO3/B,UAAUo2C,YAAc,SAAsB7uD,EAAOqV,EAAQgzC,EAAY+D,GACjFpsD,GAASA,EACTqV,GAAkB,EAClBgzC,GAA0B,EACrB+D,GAAUN,EAASnuD,KAAMqC,EAAOqV,EAAQgzC,EAAY77C,KAAKK,IAAI,EAAG,EAAIw7C,GAAa,EAEtF,IAAI2F,GAAM,EACNnxD,EAAI,CAER,KADAc,KAAK0X,GAAkB,IAARrV,IACNnD,EAAIwrD,IAAe2F,GAAO,MACjCrwD,KAAK0X,EAASxY,GAAMmD,EAAQguD,EAAO,GAGrC,OAAO34C,GAASgzC,GAGfjQ,EAAO3/B,UAAUq2C,YAAc,SAAsB9uD,EAAOqV,EAAQgzC,EAAY+D,GACjFpsD,GAASA,EACTqV,GAAkB,EAClBgzC,GAA0B,EACrB+D,GAAUN,EAASnuD,KAAMqC,EAAOqV,EAAQgzC,EAAY77C,KAAKK,IAAI,EAAG,EAAIw7C,GAAa,EAEtF,IAAIxrD,GAAIwrD,EAAa,EACjB2F,EAAM,CAEV,KADArwD,KAAK0X,EAASxY,GAAa,IAARmD,IACVnD,GAAK,IAAMmxD,GAAO,MACzBrwD,KAAK0X,EAASxY,GAAMmD,EAAQguD,EAAO,GAGrC,OAAO34C,GAASgzC,GAGfjQ,EAAO3/B,UAAUs2C,WAAa,SAAqB/uD,EAAOqV,EAAQ+2C,GAMnE,MALApsD,IAASA,EACTqV,GAAkB,EACb+2C,GAAUN,EAASnuD,KAAMqC,EAAOqV,EAAQ,EAAG,IAAM,GACjD+iC,EAAO0P,sBAAqB9nD,EAAQwM,KAAKW,MAAMnN,IACpDrC,KAAK0X,GAAmB,IAARrV,EACTqV,EAAS,GAWf+iC,EAAO3/B,UAAUu2C,cAAgB,SAAwBhvD,EAAOqV,EAAQ+2C,GAUzE,MATApsD,IAASA,EACTqV,GAAkB,EACb+2C,GAAUN,EAASnuD,KAAMqC,EAAOqV,EAAQ,EAAG,MAAQ,GACpD+iC,EAAO0P,qBACTnqD,KAAK0X,GAAmB,IAARrV,EAChBrC,KAAK0X,EAAS,GAAMrV,IAAU,GAE9B+rD,EAAkBpuD,KAAMqC,EAAOqV,GAAQ,GAElCA,EAAS,GAGf+iC,EAAO3/B,UAAUw2C,cAAgB,SAAwBjvD,EAAOqV,EAAQ+2C,GAUzE,MATApsD,IAASA,EACTqV,GAAkB,EACb+2C,GAAUN,EAASnuD,KAAMqC,EAAOqV,EAAQ,EAAG,MAAQ,GACpD+iC,EAAO0P,qBACTnqD,KAAK0X,GAAWrV,IAAU,EAC1BrC,KAAK0X,EAAS,GAAc,IAARrV,GAEpB+rD,EAAkBpuD,KAAMqC,EAAOqV,GAAQ,GAElCA,EAAS,GAUf+iC,EAAO3/B,UAAUy2C,cAAgB,SAAwBlvD,EAAOqV,EAAQ+2C,GAYzE,MAXApsD,IAASA,EACTqV,GAAkB,EACb+2C,GAAUN,EAASnuD,KAAMqC,EAAOqV,EAAQ,EAAG,WAAY,GACxD+iC,EAAO0P,qBACTnqD,KAAK0X,EAAS,GAAMrV,IAAU,GAC9BrC,KAAK0X,EAAS,GAAMrV,IAAU,GAC9BrC,KAAK0X,EAAS,GAAMrV,IAAU,EAC9BrC,KAAK0X,GAAmB,IAARrV,GAEhBisD,EAAkBtuD,KAAMqC,EAAOqV,GAAQ,GAElCA,EAAS,GAGf+iC,EAAO3/B,UAAU02C,cAAgB,SAAwBnvD,EAAOqV,EAAQ+2C,GAYzE,MAXApsD,IAASA,EACTqV,GAAkB,EACb+2C,GAAUN,EAASnuD,KAAMqC,EAAOqV,EAAQ,EAAG,WAAY,GACxD+iC,EAAO0P,qBACTnqD,KAAK0X,GAAWrV,IAAU,GAC1BrC,KAAK0X,EAAS,GAAMrV,IAAU,GAC9BrC,KAAK0X,EAAS,GAAMrV,IAAU,EAC9BrC,KAAK0X,EAAS,GAAc,IAARrV,GAEpBisD,EAAkBtuD,KAAMqC,EAAOqV,GAAQ,GAElCA,EAAS,GAGf+iC,EAAO3/B,UAAU22C,WAAa,SAAqBpvD,EAAOqV,EAAQgzC,EAAY+D,GAG/E,GAFApsD,GAASA,EACTqV,GAAkB,GACb+2C,EAAU,CACb,GAAIiD,GAAQ7iD,KAAKK,IAAI,EAAG,EAAIw7C,EAAa,EAEzCyD,GAASnuD,KAAMqC,EAAOqV,EAAQgzC,EAAYgH,EAAQ,GAAIA,GAGxD,GAAIxyD,GAAI,EACJmxD,EAAM,EACN92C,EAAMlX,EAAQ,EAAI,EAAI,CAE1B,KADArC,KAAK0X,GAAkB,IAARrV,IACNnD,EAAIwrD,IAAe2F,GAAO,MACjCrwD,KAAK0X,EAASxY,IAAOmD,EAAQguD,GAAQ,GAAK92C,EAAM,GAGlD,OAAO7B,GAASgzC,GAGfjQ,EAAO3/B,UAAU62C,WAAa,SAAqBtvD,EAAOqV,EAAQgzC,EAAY+D,GAG/E,GAFApsD,GAASA,EACTqV,GAAkB,GACb+2C,EAAU,CACb,GAAIiD,GAAQ7iD,KAAKK,IAAI,EAAG,EAAIw7C,EAAa,EAEzCyD,GAASnuD,KAAMqC,EAAOqV,EAAQgzC,EAAYgH,EAAQ,GAAIA,GAGxD,GAAIxyD,GAAIwrD,EAAa,EACjB2F,EAAM,EACN92C,EAAMlX,EAAQ,EAAI,EAAI,CAE1B,KADArC,KAAK0X,EAASxY,GAAa,IAARmD,IACVnD,GAAK,IAAMmxD,GAAO,MACzBrwD,KAAK0X,EAASxY,IAAOmD,EAAQguD,GAAQ,GAAK92C,EAAM,GAGlD,OAAO7B,GAASgzC,GAGfjQ,EAAO3/B,UAAU82C,UAAY,SAAoBvvD,EAAOqV,EAAQ+2C,GAOjE,MANApsD,IAASA,EACTqV,GAAkB,EACb+2C,GAAUN,EAASnuD,KAAMqC,EAAOqV,EAAQ,EAAG,KAAO,KAClD+iC,EAAO0P,sBAAqB9nD,EAAQwM,KAAKW,MAAMnN,IAChDA,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtCrC,KAAK0X,GAAmB,IAARrV,EACTqV,EAAS,GAGf+iC,EAAO3/B,UAAU+2C,aAAe,SAAuBxvD,EAAOqV,EAAQ+2C,GAUvE,MATApsD,IAASA,EACTqV,GAAkB,EACb+2C,GAAUN,EAASnuD,KAAMqC,EAAOqV,EAAQ,EAAG,OAAS,OACrD+iC,EAAO0P,qBACTnqD,KAAK0X,GAAmB,IAARrV,EAChBrC,KAAK0X,EAAS,GAAMrV,IAAU,GAE9B+rD,EAAkBpuD,KAAMqC,EAAOqV,GAAQ,GAElCA,EAAS,GAGf+iC,EAAO3/B,UAAUg3C,aAAe,SAAuBzvD,EAAOqV,EAAQ+2C,GAUvE,MATApsD,IAASA,EACTqV,GAAkB,EACb+2C,GAAUN,EAASnuD,KAAMqC,EAAOqV,EAAQ,EAAG,OAAS,OACrD+iC,EAAO0P,qBACTnqD,KAAK0X,GAAWrV,IAAU,EAC1BrC,KAAK0X,EAAS,GAAc,IAARrV,GAEpB+rD,EAAkBpuD,KAAMqC,EAAOqV,GAAQ,GAElCA,EAAS,GAGf+iC,EAAO3/B,UAAUi3C,aAAe,SAAuB1vD,EAAOqV,EAAQ+2C,GAYvE,MAXApsD,IAASA,EACTqV,GAAkB,EACb+2C,GAAUN,EAASnuD,KAAMqC,EAAOqV,EAAQ,EAAG,YAAa,YACzD+iC,EAAO0P,qBACTnqD,KAAK0X,GAAmB,IAARrV,EAChBrC,KAAK0X,EAAS,GAAMrV,IAAU,EAC9BrC,KAAK0X,EAAS,GAAMrV,IAAU,GAC9BrC,KAAK0X,EAAS,GAAMrV,IAAU,IAE9BisD,EAAkBtuD,KAAMqC,EAAOqV,GAAQ,GAElCA,EAAS,GAGf+iC,EAAO3/B,UAAUk3C,aAAe,SAAuB3vD,EAAOqV,EAAQ+2C,GAavE,MAZApsD,IAASA,EACTqV,GAAkB,EACb+2C,GAAUN,EAASnuD,KAAMqC,EAAOqV,EAAQ,EAAG,YAAa,YACzDrV,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GACxCo4C,EAAO0P,qBACTnqD,KAAK0X,GAAWrV,IAAU,GAC1BrC,KAAK0X,EAAS,GAAMrV,IAAU,GAC9BrC,KAAK0X,EAAS,GAAMrV,IAAU,EAC9BrC,KAAK0X,EAAS,GAAc,IAARrV,GAEpBisD,EAAkBtuD,KAAMqC,EAAOqV,GAAQ,GAElCA,EAAS,GAiBf+iC,EAAO3/B,UAAUm3C,aAAe,SAAuB5vD,EAAOqV,EAAQ+2C,GACvE,MAAOD,GAAWxuD,KAAMqC,EAAOqV,GAAQ,EAAM+2C,IAG5ChU,EAAO3/B,UAAUo3C,aAAe,SAAuB7vD,EAAOqV,EAAQ+2C,GACvE,MAAOD,GAAWxuD,KAAMqC,EAAOqV,GAAQ,EAAO+2C,IAW7ChU,EAAO3/B,UAAUq3C,cAAgB,SAAwB9vD,EAAOqV,EAAQ+2C,GACzE,MAAOE,GAAY3uD,KAAMqC,EAAOqV,GAAQ,EAAM+2C,IAG7ChU,EAAO3/B,UAAUs3C,cAAgB,SAAwB/vD,EAAOqV,EAAQ+2C,GACzE,MAAOE,GAAY3uD,KAAMqC,EAAOqV,GAAQ,EAAO+2C,IAI9ChU,EAAO3/B,UAAUtH,KAAO,SAAe+C,EAAQ87C,EAAaltD,EAAO4H,GAQpE,GAPK5H,IAAOA,EAAQ,GACf4H,GAAe,IAARA,IAAWA,EAAM/M,KAAKwH,QAC9B6qD,GAAe97C,EAAO/O,SAAQ6qD,EAAc97C,EAAO/O,QAClD6qD,IAAaA,EAAc,GAC5BtlD,EAAM,GAAKA,EAAM5H,IAAO4H,EAAM5H,GAG9B4H,IAAQ5H,EAAO,MAAO,EAC1B,IAAsB,IAAlBoR,EAAO/O,QAAgC,IAAhBxH,KAAKwH,OAAc,MAAO,EAGrD,IAAI6qD,EAAc,EAChB,KAAM,IAAI/G,YAAW,4BAEvB,IAAInmD,EAAQ,GAAKA,GAASnF,KAAKwH,OAAQ,KAAM,IAAI8jD,YAAW,4BAC5D,IAAIv+C,EAAM,EAAG,KAAM,IAAIu+C,YAAW,0BAG9Bv+C,GAAM/M,KAAKwH,SAAQuF,EAAM/M,KAAKwH,QAC9B+O,EAAO/O,OAAS6qD,EAActlD,EAAM5H,IACtC4H,EAAMwJ,EAAO/O,OAAS6qD,EAAcltD,EAGtC,IACIjG,GADAugD,EAAM1yC,EAAM5H,CAGhB,IAAInF,OAASuW,GAAUpR,EAAQktD,GAAeA,EAActlD,EAE1D,IAAK7N,EAAIugD,EAAM,EAAGvgD,GAAK,EAAGA,IACxBqX,EAAOrX,EAAImzD,GAAeryD,KAAKd,EAAIiG,OAEhC,IAAIs6C,EAAM,MAAShF,EAAO0P,oBAE/B,IAAKjrD,EAAI,EAAGA,EAAIugD,EAAKvgD,IACnBqX,EAAOrX,EAAImzD,GAAeryD,KAAKd,EAAIiG,OAGrCylB,YAAW9P,UAAUpV,IAAImH,KACvB0J,EACAvW,KAAKwvD,SAASrqD,EAAOA,EAAQs6C,GAC7B4S,EAIJ,OAAO5S,IAINhF,EAAO3/B,UAAUw3C,KAAO,SAAejwD,EAAO8C,EAAO4H,GAKtD,GAJK1K,IAAOA,EAAQ,GACf8C,IAAOA,EAAQ,GACf4H,IAAKA,EAAM/M,KAAKwH,QAEjBuF,EAAM5H,EAAO,KAAM,IAAImmD,YAAW,cAGtC,IAAIv+C,IAAQ5H,GACQ,IAAhBnF,KAAKwH,OAAT,CAEA,GAAIrC,EAAQ,GAAKA,GAASnF,KAAKwH,OAAQ,KAAM,IAAI8jD,YAAW,sBAC5D,IAAIv+C,EAAM,GAAKA,EAAM/M,KAAKwH,OAAQ,KAAM,IAAI8jD,YAAW,oBAEvD,IAAIpsD,EACJ,IAAqB,gBAAVmD,GACT,IAAKnD,EAAIiG,EAAOjG,EAAI6N,EAAK7N,IACvBc,KAAKd,GAAKmD,MAEP,CACL,GAAI2rD,GAAQtC,EAAYrpD,EAAMu4C,YAC1B6E,EAAMuO,EAAMxmD,MAChB,KAAKtI,EAAIiG,EAAOjG,EAAI6N,EAAK7N,IACvBc,KAAKd,GAAK8uD,EAAM9uD,EAAIugD,GAIxB,MAAOz/C,OAMN,IAAI8uD,GAAoB,uBA4IvBjiD,KAAK7M,SAAwB,KAAXuD,EAAyBA,EAAyB,mBAATsjB,MAAuBA,KAAyB,mBAAXlc,QAAyBA,aAC1H4nD,YAAa,GAAI7D,QAAW,GAAI8D,QAAW,KAC/CrvD,IAAK,SAAUK,EAAS1E,EAAQC,IAC7B,SAAUA,GAiBV,QAAS0zD,GAAQC,GACf,GAAIhxD,GAAOgxD,EAAIzd,WAAW,EAC1B,OAAIvzC,KAASixD,GAAQjxD,IAASkxD,EAAsB,GAChDlxD,IAASmxD,GAASnxD,IAASoxD,EAAuB,GAClDpxD,EAAOqxD,GAAgB,EACvBrxD,EAAOqxD,EAAS,GAAWrxD,EAAOqxD,EAAS,GAAK,GAChDrxD,EAAOsxD,EAAQ,GAAWtxD,EAAOsxD,EACjCtxD,EAAOuxD,EAAQ,GAAWvxD,EAAOuxD,EAAQ,OAA7C,GAGF,QAASC,GAAgBC,GAuBvB,QAASl0D,GAAMmJ,GACbuyC,EAAIyY,KAAOhrD,EAvBb,GAAIlJ,GAAGioD,EAAGx+C,EAAGyF,EAAKilD,EAAc1Y,CAEhC,IAAIwY,EAAI3rD,OAAS,EAAI,EACnB,KAAM,IAAI2oC,OAAM,iDAQlB,IAAIsP,GAAM0T,EAAI3rD,MACd6rD,GAAuC,MAAxBF,EAAIllD,OAAOwxC,EAAM,GAAa,EAA4B,MAAxB0T,EAAIllD,OAAOwxC,EAAM,GAAa,EAAI,EAGnF9E,EAAM,GAAI2Y,GAAiB,EAAbH,EAAI3rD,OAAa,EAAI6rD,GAGnC1qD,EAAI0qD,EAAe,EAAIF,EAAI3rD,OAAS,EAAI2rD,EAAI3rD,MAE5C,IAAI4rD,GAAI,CAMR,KAAKl0D,EAAI,EAAGioD,EAAI,EAAGjoD,EAAIyJ,EAAGzJ,GAAK,EAAGioD,GAAK,EACrC/4C,EAAOqkD,EAAOU,EAAIllD,OAAO/O,KAAO,GAAOuzD,EAAOU,EAAIllD,OAAO/O,EAAI,KAAO,GAAOuzD,EAAOU,EAAIllD,OAAO/O,EAAI,KAAO,EAAKuzD,EAAOU,EAAIllD,OAAO/O,EAAI,IACnID,GAAY,SAANmP,IAAmB,IACzBnP,GAAY,MAANmP,IAAiB,GACvBnP,EAAW,IAANmP,EAYP,OATqB,KAAjBilD,GACFjlD,EAAOqkD,EAAOU,EAAIllD,OAAO/O,KAAO,EAAMuzD,EAAOU,EAAIllD,OAAO/O,EAAI,KAAO,EACnED,EAAW,IAANmP,IACqB,IAAjBilD,IACTjlD,EAAOqkD,EAAOU,EAAIllD,OAAO/O,KAAO,GAAOuzD,EAAOU,EAAIllD,OAAO/O,EAAI,KAAO,EAAMuzD,EAAOU,EAAIllD,OAAO/O,EAAI,KAAO,EACvGD,EAAMmP,GAAO,EAAK,KAClBnP,EAAW,IAANmP,IAGAusC,EAGT,QAAS4Y,GAAeC,GAMtB,QAASC,GAAQ3a,GACf,MAAO4a,GAAOzlD,OAAO6qC,GANvB,GAAI55C,GAGAy0D,EAAMnsD,EAFNosD,EAAaJ,EAAMhsD,OAAS,EAC5Bi+B,EAAS,EAYb,KAAKvmC,EAAI,EAAGsI,EAASgsD,EAAMhsD,OAASosD,EAAY10D,EAAIsI,EAAQtI,GAAK,EAC/Dy0D,GAAQH,EAAMt0D,IAAM,KAAOs0D,EAAMt0D,EAAI,IAAM,GAAMs0D,EAAMt0D,EAAI,GAC3DumC,GAPF,SAA0BqT,GACxB,MAAO2a,GAAO3a,GAAO,GAAK,IAAQ2a,EAAO3a,GAAO,GAAK,IAAQ2a,EAAO3a,GAAO,EAAI,IAAQ2a,EAAa,GAAN3a,IAMpE6a,EAI5B,QAAQC,GACN,IAAK,GACHD,EAAOH,EAAMA,EAAMhsD,OAAS,GAC5Bi+B,GAAUguB,EAAOE,GAAQ,GACzBluB,GAAUguB,EAAQE,GAAQ,EAAK,IAC/BluB,GAAU,IACV,MACF,KAAK,GACHkuB,GAAQH,EAAMA,EAAMhsD,OAAS,IAAM,GAAMgsD,EAAMA,EAAMhsD,OAAS,GAC9Di+B,GAAUguB,EAAOE,GAAQ,IACzBluB,GAAUguB,EAAQE,GAAQ,EAAK,IAC/BluB,GAAUguB,EAAQE,GAAQ,EAAK,IAC/BluB,GAAU,IAMd,MAAOA,GA7GT,GAAIiuB,GAAS,mEAETJ,EAA6B,mBAAf1oC,YACdA,WACAje,MAEAgmD,EAAO,IAAI1d,WAAW,GACtB4d,EAAQ,IAAI5d,WAAW,GACvB8d,EAAS,IAAI9d,WAAW,GACxBge,EAAQ,IAAIhe,WAAW,GACvB+d,EAAQ,IAAI/d,WAAW,GACvB2d,EAAgB,IAAI3d,WAAW,GAC/B6d,EAAiB,IAAI7d,WAAW,EAoGpCl2C,GAAQqwD,YAAc8D,EACtBn0D,EAAQkuD,cAAgBsG,OACJ,KAAZx0D,EAA2BiB,KAAK6zD,YAAiB90D,QAE5D+0D,IAAK,SAAUtwD,EAAS1E,EAAQC,GAC9BA,EAAQ+xD,KAAO,SAAUjgB,EAAQn5B,EAAQq8C,EAAMC,EAAMC,GACpD,GAAInvD,GAAGsB,EACH8tD,EAAgB,EAATD,EAAaD,EAAO,EAC3BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACTn1D,EAAI60D,EAAQE,EAAS,EAAK,EAC1BhvD,EAAI8uD,GAAQ,EAAI,EAChBhtD,EAAI8pC,EAAOn5B,EAASxY,EAOxB,KALAA,GAAK+F,EAELH,EAAIiC,GAAM,IAAOstD,GAAU,EAC3BttD,KAAQstD,EACRA,GAASH,EACFG,EAAQ,EAAGvvD,EAAQ,IAAJA,EAAU+rC,EAAOn5B,EAASxY,GAAIA,GAAK+F,EAAGovD,GAAS,GAKrE,IAHAjuD,EAAItB,GAAM,IAAOuvD,GAAU,EAC3BvvD,KAAQuvD,EACRA,GAASL,EACFK,EAAQ,EAAGjuD,EAAQ,IAAJA,EAAUyqC,EAAOn5B,EAASxY,GAAIA,GAAK+F,EAAGovD,GAAS,GAErE,GAAU,IAANvvD,EACFA,EAAI,EAAIsvD,MACH,IAAItvD,IAAMqvD,EACf,MAAO/tD,GAAIkuD,IAAsB39C,KAAd5P,GAAK,EAAI,EAE5BX,IAAQyI,KAAKK,IAAI,EAAG8kD,GACpBlvD,GAAQsvD,EAEV,OAAQrtD,GAAK,EAAI,GAAKX,EAAIyI,KAAKK,IAAI,EAAGpK,EAAIkvD,IAG3Cj1D,EAAQ4rD,MAAQ,SAAU9Z,EAAQxuC,EAAOqV,EAAQq8C,EAAMC,EAAMC,GAC5D,GAAInvD,GAAGsB,EAAGwB,EACNssD,EAAgB,EAATD,EAAaD,EAAO,EAC3BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBI,EAAe,KAATP,EAAcnlD,KAAKK,IAAI,GAAI,IAAML,KAAKK,IAAI,GAAI,IAAM,EAC1DhQ,EAAI60D,EAAO,EAAKE,EAAS,EACzBhvD,EAAI8uD,EAAO,GAAK,EAChBhtD,EAAI1E,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,CAmC1D,KAjCAA,EAAQwM,KAAKkL,IAAI1X,GAEb6vC,MAAM7vC,IAAUA,IAAUsU,KAC5BvQ,EAAI8rC,MAAM7vC,GAAS,EAAI,EACvByC,EAAIqvD,IAEJrvD,EAAI+J,KAAKW,MAAMX,KAAK4O,IAAIpb,GAASwM,KAAK2lD,KAClCnyD,GAASuF,EAAIiH,KAAKK,IAAI,GAAIpK,IAAM,IAClCA,IACA8C,GAAK,GAGLvF,GADEyC,EAAIsvD,GAAS,EACNG,EAAK3sD,EAEL2sD,EAAK1lD,KAAKK,IAAI,EAAG,EAAIklD,GAE5B/xD,EAAQuF,GAAK,IACf9C,IACA8C,GAAK,GAGH9C,EAAIsvD,GAASD,GACf/tD,EAAI,EACJtB,EAAIqvD,GACKrvD,EAAIsvD,GAAS,GACtBhuD,GAAK/D,EAAQuF,EAAI,GAAKiH,KAAKK,IAAI,EAAG8kD,GAClClvD,GAAQsvD,IAERhuD,EAAI/D,EAAQwM,KAAKK,IAAI,EAAGklD,EAAQ,GAAKvlD,KAAKK,IAAI,EAAG8kD,GACjDlvD,EAAI,IAIDkvD,GAAQ,EAAGnjB,EAAOn5B,EAASxY,GAAS,IAAJkH,EAAUlH,GAAK+F,EAAGmB,GAAK,IAAK4tD,GAAQ,GAI3E,IAFAlvD,EAAKA,GAAKkvD,EAAQ5tD,EAClB8tD,GAAQF,EACDE,EAAO,EAAGrjB,EAAOn5B,EAASxY,GAAS,IAAJ4F,EAAU5F,GAAK+F,EAAGH,GAAK,IAAKovD,GAAQ,GAE1ErjB,EAAOn5B,EAASxY,EAAI+F,IAAU,IAAJ8B,QAG7B0tD,IAAK,SAAUjxD,EAAS1E,EAAQC,GAC9B,GAAI67C,MAAcA,QAElB97C,GAAOC,QAAU4N,MAAMq5C,SAAW,SAAUrL,GAC3C,MAA6B,kBAAtBC,EAAS/tC,KAAK8tC,cAEV,KAEdt3C,EAAA,MtB9jC6BwJ,KAAKxJ,EAAqBrE,EAAoB,IAAKA,EAAoB,KAAKF,GAASE,EAAoB,MAIhI01D,GACA,SAAU51D,EAAQuE,EAAqBrE,GAE7C,YACqB,IAAI21D,GAAoC31D,EAAoB,IACxD41D,EAA2C51D,EAAoB,KAC/D61D,EAAuC71D,EAAoB,GuBnwTpF21D,GAAA,EAAIG,IAAIF,EAAA,EAER,IAAMG,GAASF,EAAA,EAAM1yC,IAAI,SAAAkxB,GACvB,GAAMlxC,GAAOkxC,EAAKlxC,IAClB,QACE6yD,KAAM,IAAM7yD,EAAK46C,QAAQ,kBAAmB,SAAS4D,cACrDx+C,OACA8yD,UAAW5hB,IAIf5pC,SAAQgU,IAAIs3C,GAEZA,EAAO91D,MACL+1D,KAAM,IACNE,SAAU,eAGZ7xD,EAAA,KAAmBuxD,GAAA,GAASG,YvB6wTtBI,GACA,SAAUr2D,EAAQC,EAASC,GwBnyTjCA,EAAA,IAEA,IAAAO,GAAAP,EAAA,GAEAA,EAAA,IAEAA,EAAA,KAEA,KAEA,KAGAF,GAAAC,QAAAQ,EAAAR,SxB4yTMq2D,GACA,SAAUt2D,EAAQuE,EAAqBrE,GAE7C,YACAu7C,QAAOiL,eAAeniD,EAAqB,cAAgBhB,OAAO,GAC7C,IAAIsyD,GAAoC31D,EAAoB,IACxDq2D,EAAyCr2D,EAAoB,IAC7Ds2D,EAAiDt2D,EAAoB2E,EAAE0xD,GACvEE,EAAwCv2D,EAAoB,GyB/zTrF,IAAI21D,GAAA,GACFlwB,GAAI,OACJ+wB,OAAAD,EAAA,EACAz1D,OAAQ,SAAAyG,GAAA,MAAKA,GAAE+uD,EAAApwD,OzB20TXuwD,GACA,SAAU32D,EAAQuE,EAAqBrE,GAE7C,YAC+BA,GAAoBiG,EAAE5B,EAAqB,IAAK,WAAa,MAAOyuC,IAC9E,IAAI4jB,GAA2C12D,EAAoB,KAC/D22D,EAAmD32D,EAAoB2E,EAAE+xD,GACzEE,EAAgD52D,EAAoB,KACpE62D,EAAwD72D,EAAoB2E,EAAEiyD,GAC9EE,EAAiD92D,EAAoB,KACrE+2D,EAAyD/2D,EAAoB2E,EAAEmyD,GAC/EE,EAA2Ch3D,EAAoB,KAC/Di3D,EAAmDj3D,EAAoB2E,EAAEqyD,G0Bz1T5FlkB,GACJ6jB,EAAAzwD,EACA2wD,EAAA3wD,EACA6wD,EAAA7wD,EACA+wD,EAAA/wD,I1Bi2TIgxD,GACA,SAAUp3D,EAAQuE,EAAqBrE,GAE7C,YACAu7C,QAAOiL,eAAeniD,EAAqB,cAAgBhB,OAAO,I2Bl1TlEgB,EAAA,S3Bs1TElB,K2Bp1TF,Q3By1TMg0D,GACA,SAAUr3D,EAAQuE,EAAqBrE,GAE7C,YACAu7C,QAAOiL,eAAeniD,EAAqB,cAAgBhB,OAAO,GAC7C,IAAI+zD,GAA+Dp3D,EAAoB,KAEnFq3D,GADuEr3D,EAAoB2E,EAAEyyD,GAChDp3D,EAAoB,MACjEs3D,EAAqDt3D,EAAoB2E,EAAE0yD,G4B31TpGE,EAAA,SAAA70D,G5Bm2TE,MAAOA,GAAKq7C,QAAQ,c4B/1TtB,kFAIA15C,GAAA,S5Bg2TElB,K4B91TF,M5B+1TEq0D,OACEr1D,SACEU,K4B91TN+rD,O5B+1TM6I,Q4B71TN,I5B+1TIr1D,UACES,K4B91TN+rD,O5B+1TM6I,Q4B51TN,Y5B+1TEC,QAAS,WACPJ,EAAmDpxD,EAAEyxD,eAAe32D,KAAK42D,M4B91T7Ez1D,S5B+1TIm1D,EAAmDpxD,EAAEyxD,eAAe32D,KAAK42D,M4B91T7Ex1D,W5Bg2TEosB,KAAM,WACJ,UAGFqpC,SACEn1D,KAAM,SAAc67C,GAClB,MAAOgZ,G4B/1TbhZ,K5Bk2TEuZ,gBAKIC,GACA,SAAUj4D,EAAQuE,EAAqBrE,GAE7C,YACAu7C,QAAOiL,eAAeniD,EAAqB,cAAgBhB,OAAO,GAC7C,IAAI20D,GAAuDh4D,EAAoB,IAC3Ei4D,EAA+Dj4D,EAAoB2E,EAAEqzD,GACrFE,EAA8Cl4D,EAAoB,IAClEm4D,EAAsDn4D,EAAoB2E,EAAEuzD,E6Bv3TrG7zD,GAAA,S7Bm4TIlB,K6Bj4TJ,e7Bk4TIqrB,KAAM,WACF,O6Bh4TR9rB,KA1BA,6RA2BAN,SARA,sS7B04TYg2D,S6Bh4TZ,I7Bo4TIC,SACIp1D,OAAQ,WACJjC,KAAKo3D,S6Bl4TjB,I7Bq4TIN,Y6Bj4TJQ,KAAAH,EAAAjyD,EAEAqyD,UAAAN,EAAA/xD,K7Bu4TMsyD,GACA,SAAU14D,EAAQuE,EAAqBrE,GAE7C,YACAu7C,QAAOiL,eAAeniD,EAAqB,cAAgBhB,OAAO,GAC7C,IAAI20D,GAAuDh4D,EAAoB,IAC3Ei4D,EAA+Dj4D,EAAoB2E,EAAEqzD,GACrFE,EAA8Cl4D,EAAoB,IAClEm4D,EAAsDn4D,EAAoB2E,EAAEuzD,E8Bl6TrG7zD,GAAA,S9B86TIlB,K8B56TJ,W9B66TIqrB,KAAM,WACF,O8B36TR9rB,KAzBA,4QA0BAN,SARA,sS9Bq7TYg2D,S8B36TZ,I9B+6TIC,SACIp1D,OAAQ,WACJjC,KAAKo3D,S8B76TjB,I9Bg7TIN,Y8B56TJQ,KAAAH,EAAAjyD,EAEAqyD,UAAAN,EAAA/xD,K9Bk7TMuyD,GACA,SAAU34D,EAAQuE,EAAqBrE,GAE7C,YACAu7C,QAAOiL,eAAeniD,EAAqB,cAAgBhB,OAAO,GAC7C,IAAI20D,GAAuDh4D,EAAoB,IAC3Ei4D,EAA+Dj4D,EAAoB2E,EAAEqzD,GACrFU,EAA8C14D,EAAoB,KAClE24D,EAAsD34D,EAAoB2E,EAAE+zD,E+B93TrGr0D,GAAA,S/B04TElB,K+Bx4TF,W/By4TEqrB,KAAM,WACJ,O+Bv4TJ9rB,KA3BA,+/DA4BAN,SARA,+T/Bi5TMg2D,S+Bx4TN,E/By4TMz0D,SACE4rC,I+Bx4TR,U/By4TQlI,UACEvkC,O+Bx4TV,6B/By4TUD,K+Bv4TV,S/By4TQsR,E+Bx4TR,E/By4TQtK,E+Bx4TR,E/By4TQyR,E+Bx4TR,E/By4TQs9C,G+Bx4TR,E/By4TQC,G+Bx4TR,E/By4TQC,G+Bx4TR,G/By4TQC,a+Bv4TR,SACA,SAGA,a/Bq4TQxpB,I+Bn4TR,S/Bo4TQlI,UACEvkC,O+Bn4TV,2B/Bo4TUD,K+Bl4TV,Q/Bo4TQsR,E+Bn4TR,I/Bo4TQtK,E+Bn4TR,E/Bo4TQyR,E+Bn4TR,I/Bo4TQs9C,G+Bn4TR,E/Bo4TQC,G+Bn4TR,E/Bo4TQC,G+Bn4TR,E/Bo4TQC,a+Bh4TR,a/Bk4TQxpB,I+Bh4TR,S/Bi4TQlI,UACEvkC,O+Bh4TV,2B/Bi4TUD,K+B/3TV,Q/Bi4TQsR,E+Bh4TR,I/Bi4TQtK,E+Bh4TR,E/Bi4TQyR,G+Bh4TR,I/Bi4TQs9C,G+Bh4TR,E/Bi4TQC,G+Bh4TR,E/Bi4TQC,G+Bh4TR,E/Bi4TQC,a+B73TR,a/B+3TQxpB,I+B73TR,U/B83TQlI,UACEvkC,O+B73TV,2B/B83TUD,K+B53TV,Q/B83TQsR,G+B73TR,I/B83TQtK,E+B73TR,E/B83TQyR,G+B73TR,I/B83TQs9C,G+B73TR,E/B83TQC,G+B73TR,E/B83TQC,G+B73TR,E/B83TQC,a+Bx3TR,e/B63TEV,SACEp1D,OAAQ,WACNwH,QAAQgU,I+B33Td,U/B43TMzd,KAAKo3D,S+B33TX,G/B63TI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","file":"assets/js/app.076ab2b5f52c3919a8ec.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 127:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(37)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"div[data-v-09ad1f51]{cursor:pointer}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 128:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(37)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:70%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:30%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .hljs{background:transparent}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 129:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(37)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.demos,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.demos-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.demos-header .title{font-weight:700;font-size:18px;display:inline-block}.demos-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.demos-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.demos-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.demos-menu .demos-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.demos-menu .demos-menu-item>a{display:block;width:100%;height:100%}.demos-menu .demos-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.demos-menu .demos-menu-item:hover>a{color:#39f}.demos-pages{height:100%;overflow:hidden}.demo-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.demo-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;animation:loading-rotate .75s 0s linear infinite}.demo-loading:after,.demo-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.demo-loading:after{height:100%;width:0}@keyframes loading-rotate{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(.6)}to{transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 130:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 23:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(326)\n\nvar Component = __webpack_require__(7)(\n  /* script */\n  __webpack_require__(67),\n  /* template */\n  __webpack_require__(317),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 311:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(7)(\n  /* script */\n  __webpack_require__(68),\n  /* template */\n  __webpack_require__(319),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 312:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(7)(\n  /* script */\n  __webpack_require__(69),\n  /* template */\n  __webpack_require__(320),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 313:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(7)(\n  /* script */\n  __webpack_require__(70),\n  /* template */\n  __webpack_require__(323),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 314:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(7)(\n  /* script */\n  __webpack_require__(71),\n  /* template */\n  __webpack_require__(321),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 315:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(325)\n\nvar Component = __webpack_require__(7)(\n  /* script */\n  __webpack_require__(73),\n  /* template */\n  __webpack_require__(316),\n  /* scopeId */\n  \"data-v-09ad1f51\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 316:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 317:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"             \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n        \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"          \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)) + \"\\n          \")]), _vm._v(\"\\n        \")])])])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 318:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demos\"\n  }, [_c('div', {\n    staticClass: \"demos-content\"\n  }, [_c('ul', {\n    staticClass: \"demos-menu\"\n  }, [_c('li', {\n    staticClass: \"demos-menu-title\"\n  }, [_vm._v(\"demos\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-pano\"\n    }\n  }, [_vm._v(\"basic panorama\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-cube-pano\"\n    }\n  }, [_vm._v(\"Cube Faces\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-video-pano\"\n    }\n  }, [_vm._v(\"Video Pano\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-tour\"\n    }\n  }, [_vm._v(\"VR Tour\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demos-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 319:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"cube\",\n      \"source\": \"assets/faces/pano_%s.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 320:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"source\": \"assets/equirectangular.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 321:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"video\",\n      \"source\": \"assets/ClashofClans.mp4\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 322:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 323:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Tour', {\n    attrs: {\n      \"scenes\": _vm.scenes\n    },\n    on: {\n      \"on-load-start\": _vm.onLoadStart,\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 325:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(127);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(39)(\"4136a65b\", content, true);\n\n/***/ }),\n\n/***/ 326:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(128);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(39)(\"56304fc1\", content, true);\n\n/***/ }),\n\n/***/ 327:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(129);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(39)(\"48e2ad6a\", content, true);\n\n/***/ }),\n\n/***/ 38:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(7)(\n  /* script */\n  __webpack_require__(72),\n  /* template */\n  __webpack_require__(322),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 41:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process, module, global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__ = __webpack_require__(74);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__ = __webpack_require__(83);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_three__ = __webpack_require__(61);\nvar require;var require;\n\n\n\n\n\n\n\n\n\nvar PANOLENS = { REVISION: '9' };\n\nvar enableInlineVideo = function () {\n  'use strict';\n\n  function e(e, i, n, r) {\n    function t(n) {\n      d = i(t, r), e(n - (a || n)), a = n;\n    }var d, a;return { start: function start() {\n        d || t(0);\n      }, stop: function stop() {\n        n(d), d = null, a = 0;\n      } };\n  }function i(i) {\n    return e(i, requestAnimationFrame, cancelAnimationFrame);\n  }function n(e, i, n) {\n    function r(r) {\n      n && !n(e, i) || r.stopImmediatePropagation();\n    }return e.addEventListener(i, r), r;\n  }function r(e, i, n, r) {\n    function t() {\n      return n[i];\n    }function d(e) {\n      n[i] = e;\n    }r && d(e[i]), __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default()(e, i, { get: t, set: d });\n  }function t(e, i, n) {\n    n.addEventListener(i, function () {\n      return e.dispatchEvent(new Event(i));\n    });\n  }function d(e, i) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default.a.resolve().then(function () {\n      e.dispatchEvent(new Event(i));\n    });\n  }function a(e) {\n    var i = new Audio();return t(e, 'play', i), t(e, 'playing', i), t(e, 'pause', i), i.crossOrigin = e.crossOrigin, i.src = e.src || e.currentSrc || 'data:', i;\n  }function u(e, i, n) {\n    (m || 0) + 200 < Date.now() && (e[h] = !0, m = Date.now()), n || (e.currentTime = i), k[++T % 3] = 100 * i | 0;\n  }function o(e) {\n    return e.driver.currentTime >= e.video.duration;\n  }function s(e) {\n    var i = this;i.video.readyState >= i.video.HAVE_FUTURE_DATA ? (i.hasAudio || (i.driver.currentTime = i.video.currentTime + e * i.video.playbackRate / 1e3, i.video.loop && o(i) && (i.driver.currentTime = 0)), u(i.video, i.driver.currentTime)) : i.video.networkState === i.video.NETWORK_IDLE && i.video.buffered.length === 0 && i.video.load(), i.video.ended && (delete i.video[h], i.video.pause(!0));\n  }function c() {\n    var e = this,\n        i = e[g];if (e.webkitDisplayingFullscreen) return void e[E]();i.driver.src !== 'data:' && i.driver.src !== e.src && (u(e, 0, !0), i.driver.src = e.src), e.paused && (i.paused = !1, e.buffered.length === 0 && e.load(), i.driver.play(), i.updater.start(), i.hasAudio || (d(e, 'play'), i.video.readyState >= i.video.HAVE_ENOUGH_DATA && d(e, 'playing')));\n  }function v(e) {\n    var i = this,\n        n = i[g];n.driver.pause(), n.updater.stop(), i.webkitDisplayingFullscreen && i[w](), n.paused && !e || (n.paused = !0, n.hasAudio || d(i, 'pause'), i.ended && !i.webkitDisplayingFullscreen && (i[h] = !0, d(i, 'ended')));\n  }function p(e, n) {\n    var r = {};e[g] = r, r.paused = !0, r.hasAudio = n, r.video = e, r.updater = i(s.bind(r)), n ? r.driver = a(e) : (e.addEventListener('canplay', function () {\n      e.paused || d(e, 'playing');\n    }), r.driver = { src: e.src || e.currentSrc || 'data:', muted: !0, paused: !0, pause: function pause() {\n        r.driver.paused = !0;\n      }, play: function play() {\n        r.driver.paused = !1, o(r) && u(e, 0);\n      }, get ended() {\n        return o(r);\n      } }), e.addEventListener('emptied', function () {\n      var i = !r.driver.src || r.driver.src === 'data:';r.driver.src && r.driver.src !== e.src && (u(e, 0, !0), r.driver.src = e.src, i || !n && e.autoplay ? r.driver.play() : r.updater.stop());\n    }, !1), e.addEventListener('webkitbeginfullscreen', function () {\n      e.paused ? n && r.driver.buffered.length === 0 && r.driver.load() : (e.pause(), e[E]());\n    }), n && (e.addEventListener('webkitendfullscreen', function () {\n      r.driver.currentTime = e.currentTime;\n    }), e.addEventListener('seeking', function () {\n      k.indexOf(100 * e.currentTime | 0) < 0 && (r.driver.currentTime = e.currentTime);\n    }));\n  }function l(e) {\n    var i = e[h];return delete e[h], !e.webkitDisplayingFullscreen && !i;\n  }function f(e) {\n    var i = e[g];e[E] = e.play, e[w] = e.pause, e.play = c, e.pause = v, r(e, 'paused', i.driver), r(e, 'muted', i.driver, !0), r(e, 'playbackRate', i.driver, !0), r(e, 'ended', i.driver), r(e, 'loop', i.driver, !0), n(e, 'seeking', function (e) {\n      return !e.webkitDisplayingFullscreen;\n    }), n(e, 'seeked', function (e) {\n      return !e.webkitDisplayingFullscreen;\n    }), n(e, 'timeupdate', l), n(e, 'ended', l);\n  }function y(e, i) {\n    if (void 0 === i && (i = {}), !e[g]) {\n      if (!i.everywhere) {\n        if (!b) return;if (!(i.iPad || i.ipad ? /iPhone|iPod|iPad/ : /iPhone|iPod/).test(navigator.userAgent)) return;\n      }e.pause();var n = e.autoplay;e.autoplay = !1, p(e, !e.muted), f(e), e.classList.add('IIV'), e.muted && n && (e.play(), e.addEventListener('playing', function i() {\n        e.autoplay = !0, e.removeEventListener('playing', i);\n      })), /iPhone|iPod|iPad/.test(navigator.platform) || console.warn('iphone-inline-video is not guaranteed to work in emulated environments');\n    }\n  }var m,\n      b = (typeof document === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default()(document)) === 'object' && 'object-fit' in document.head.style && !matchMedia('(-webkit-video-playable-inline)').matches,\n      g = 'bfred-it:iphone-inline-video',\n      h = 'bfred-it:iphone-inline-video:event',\n      E = 'bfred-it:iphone-inline-video:nativeplay',\n      w = 'bfred-it:iphone-inline-video:nativepause',\n      k = [],\n      T = 0;return y;\n}();\n\n\nvar TWEEN = TWEEN || function () {\n  var _tweens = [];\n\n  return {\n\n    getAll: function getAll() {\n      return _tweens;\n    },\n\n    removeAll: function removeAll() {\n      _tweens = [];\n    },\n\n    add: function add(tween) {\n      _tweens.push(tween);\n    },\n\n    remove: function remove(tween) {\n      var i = _tweens.indexOf(tween);\n\n      if (i !== -1) {\n        _tweens.splice(i, 1);\n      }\n    },\n\n    update: function update(time, preserve) {\n      if (_tweens.length === 0) {\n        return false;\n      }\n\n      var i = 0;\n\n      time = time !== undefined ? time : TWEEN.now();\n\n      while (i < _tweens.length) {\n        if (_tweens[i].update(time) || preserve) {\n          i++;\n        } else {\n          _tweens.splice(i, 1);\n        }\n      }\n\n      return true;\n    }\n  };\n}();\n\nif (typeof window === 'undefined' && typeof process !== 'undefined') {\n  TWEEN.now = function () {\n    var time = process.hrtime();\n\n    return time[0] * 1000 + time[1] / 1000000;\n  };\n} else if (typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined) {\n    TWEEN.now = window.performance.now.bind(window.performance);\n  } else if (Date.now !== undefined) {\n      TWEEN.now = Date.now;\n    } else {\n        TWEEN.now = function () {\n          return new Date().getTime();\n        };\n      }\n\nTWEEN.Tween = function (object) {\n  var _object = object;\n  var _valuesStart = {};\n  var _valuesEnd = {};\n  var _valuesStartRepeat = {};\n  var _duration = 1000;\n  var _repeat = 0;\n  var _repeatDelayTime;\n  var _yoyo = false;\n  var _isPlaying = false;\n  var _reversed = false;\n  var _delayTime = 0;\n  var _startTime = null;\n  var _easingFunction = TWEEN.Easing.Linear.None;\n  var _interpolationFunction = TWEEN.Interpolation.Linear;\n  var _chainedTweens = [];\n  var _onStartCallback = null;\n  var _onStartCallbackFired = false;\n  var _onUpdateCallback = null;\n  var _onCompleteCallback = null;\n  var _onStopCallback = null;\n\n  this.to = function (properties, duration) {\n    _valuesEnd = properties;\n\n    if (duration !== undefined) {\n      _duration = duration;\n    }\n\n    return this;\n  };\n\n  this.start = function (time) {\n    TWEEN.add(this);\n\n    _isPlaying = true;\n\n    _onStartCallbackFired = false;\n\n    _startTime = time !== undefined ? time : TWEEN.now();\n    _startTime += _delayTime;\n\n    for (var property in _valuesEnd) {\n      if (_valuesEnd[property] instanceof Array) {\n        if (_valuesEnd[property].length === 0) {\n          continue;\n        }\n\n        _valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n      }\n\n      if (_object[property] === undefined) {\n        continue;\n      }\n\n      _valuesStart[property] = _object[property];\n\n      if (_valuesStart[property] instanceof Array === false) {\n        _valuesStart[property] *= 1.0;\n      }\n\n      _valuesStartRepeat[property] = _valuesStart[property] || 0;\n    }\n\n    return this;\n  };\n\n  this.stop = function () {\n    if (!_isPlaying) {\n      return this;\n    }\n\n    TWEEN.remove(this);\n    _isPlaying = false;\n\n    if (_onStopCallback !== null) {\n      _onStopCallback.call(_object, _object);\n    }\n\n    this.stopChainedTweens();\n    return this;\n  };\n\n  this.end = function () {\n    this.update(_startTime + _duration);\n    return this;\n  };\n\n  this.stopChainedTweens = function () {\n    for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n      _chainedTweens[i].stop();\n    }\n  };\n\n  this.delay = function (amount) {\n    _delayTime = amount;\n    return this;\n  };\n\n  this.repeat = function (times) {\n    _repeat = times;\n    return this;\n  };\n\n  this.repeatDelay = function (amount) {\n    _repeatDelayTime = amount;\n    return this;\n  };\n\n  this.yoyo = function (yoyo) {\n    _yoyo = yoyo;\n    return this;\n  };\n\n  this.easing = function (easing) {\n    _easingFunction = easing;\n    return this;\n  };\n\n  this.interpolation = function (interpolation) {\n    _interpolationFunction = interpolation;\n    return this;\n  };\n\n  this.chain = function () {\n    _chainedTweens = arguments;\n    return this;\n  };\n\n  this.onStart = function (callback) {\n    _onStartCallback = callback;\n    return this;\n  };\n\n  this.onUpdate = function (callback) {\n    _onUpdateCallback = callback;\n    return this;\n  };\n\n  this.onComplete = function (callback) {\n    _onCompleteCallback = callback;\n    return this;\n  };\n\n  this.onStop = function (callback) {\n    _onStopCallback = callback;\n    return this;\n  };\n\n  this.update = function (time) {\n    var property;\n    var elapsed;\n    var value;\n\n    if (time < _startTime) {\n      return true;\n    }\n\n    if (_onStartCallbackFired === false) {\n      if (_onStartCallback !== null) {\n        _onStartCallback.call(_object, _object);\n      }\n\n      _onStartCallbackFired = true;\n    }\n\n    elapsed = (time - _startTime) / _duration;\n    elapsed = elapsed > 1 ? 1 : elapsed;\n\n    value = _easingFunction(elapsed);\n\n    for (property in _valuesEnd) {\n      if (_valuesStart[property] === undefined) {\n        continue;\n      }\n\n      var start = _valuesStart[property] || 0;\n      var end = _valuesEnd[property];\n\n      if (end instanceof Array) {\n        _object[property] = _interpolationFunction(end, value);\n      } else {\n        if (typeof end === 'string') {\n          if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            end = start + parseFloat(end);\n          } else {\n            end = parseFloat(end);\n          }\n        }\n\n        if (typeof end === 'number') {\n          _object[property] = start + (end - start) * value;\n        }\n      }\n    }\n\n    if (_onUpdateCallback !== null) {\n      _onUpdateCallback.call(_object, value);\n    }\n\n    if (elapsed === 1) {\n      if (_repeat > 0) {\n        if (isFinite(_repeat)) {\n          _repeat--;\n        }\n\n        for (property in _valuesStartRepeat) {\n          if (typeof _valuesEnd[property] === 'string') {\n            _valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property]);\n          }\n\n          if (_yoyo) {\n            var tmp = _valuesStartRepeat[property];\n\n            _valuesStartRepeat[property] = _valuesEnd[property];\n            _valuesEnd[property] = tmp;\n          }\n\n          _valuesStart[property] = _valuesStartRepeat[property];\n        }\n\n        if (_yoyo) {\n          _reversed = !_reversed;\n        }\n\n        if (_repeatDelayTime !== undefined) {\n          _startTime = time + _repeatDelayTime;\n        } else {\n          _startTime = time + _delayTime;\n        }\n\n        return true;\n      } else {\n        if (_onCompleteCallback !== null) {\n          _onCompleteCallback.call(_object, _object);\n        }\n\n        for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n          _chainedTweens[i].start(_startTime + _duration);\n        }\n\n        return false;\n      }\n    }\n\n    return true;\n  };\n};\n\nTWEEN.Easing = {\n\n  Linear: {\n\n    None: function None(k) {\n      return k;\n    }\n\n  },\n\n  Quadratic: {\n\n    In: function In(k) {\n      return k * k;\n    },\n\n    Out: function Out(k) {\n      return k * (2 - k);\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k;\n      }\n\n      return -0.5 * (--k * (k - 2) - 1);\n    }\n\n  },\n\n  Cubic: {\n\n    In: function In(k) {\n      return k * k * k;\n    },\n\n    Out: function Out(k) {\n      return --k * k * k + 1;\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2);\n    }\n\n  },\n\n  Quartic: {\n\n    In: function In(k) {\n      return k * k * k * k;\n    },\n\n    Out: function Out(k) {\n      return 1 - --k * k * k * k;\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k;\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2);\n    }\n\n  },\n\n  Quintic: {\n\n    In: function In(k) {\n      return k * k * k * k * k;\n    },\n\n    Out: function Out(k) {\n      return --k * k * k * k * k + 1;\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In: function In(k) {\n      return 1 - Math.cos(k * Math.PI / 2);\n    },\n\n    Out: function Out(k) {\n      return Math.sin(k * Math.PI / 2);\n    },\n\n    InOut: function InOut(k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n\n  },\n\n  Exponential: {\n\n    In: function In(k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n\n    Out: function Out(k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n\n    InOut: function InOut(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1);\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    }\n\n  },\n\n  Circular: {\n\n    In: function In(k) {\n      return 1 - Math.sqrt(1 - k * k);\n    },\n\n    Out: function Out(k) {\n      return Math.sqrt(1 - --k * k);\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1);\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    }\n\n  },\n\n  Elastic: {\n\n    In: function In(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n    },\n\n    Out: function Out(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n    },\n\n    InOut: function InOut(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      k *= 2;\n\n      if (k < 1) {\n        return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n      }\n\n      return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n    }\n\n  },\n\n  Back: {\n\n    In: function In(k) {\n      var s = 1.70158;\n\n      return k * k * ((s + 1) * k - s);\n    },\n\n    Out: function Out(k) {\n      var s = 1.70158;\n\n      return --k * k * ((s + 1) * k + s) + 1;\n    },\n\n    InOut: function InOut(k) {\n      var s = 1.70158 * 1.525;\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s));\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    }\n\n  },\n\n  Bounce: {\n\n    In: function In(k) {\n      return 1 - TWEEN.Easing.Bounce.Out(1 - k);\n    },\n\n    Out: function Out(k) {\n      if (k < 1 / 2.75) {\n        return 7.5625 * k * k;\n      } else if (k < 2 / 2.75) {\n        return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n      } else if (k < 2.5 / 2.75) {\n        return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n      } else {\n        return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n      }\n    },\n\n    InOut: function InOut(k) {\n      if (k < 0.5) {\n        return TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n      }\n\n      return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n    }\n\n  }\n\n};\n\nTWEEN.Interpolation = {\n\n  Linear: function Linear(v, k) {\n    var m = v.length - 1;\n    var f = m * k;\n    var i = Math.floor(f);\n    var fn = TWEEN.Interpolation.Utils.Linear;\n\n    if (k < 0) {\n      return fn(v[0], v[1], f);\n    }\n\n    if (k > 1) {\n      return fn(v[m], v[m - 1], m - f);\n    }\n\n    return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n  },\n\n  Bezier: function Bezier(v, k) {\n    var b = 0;\n    var n = v.length - 1;\n    var pw = Math.pow;\n    var bn = TWEEN.Interpolation.Utils.Bernstein;\n\n    for (var i = 0; i <= n; i++) {\n      b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n    }\n\n    return b;\n  },\n\n  CatmullRom: function CatmullRom(v, k) {\n    var m = v.length - 1;\n    var f = m * k;\n    var i = Math.floor(f);\n    var fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n    if (v[0] === v[m]) {\n      if (k < 0) {\n        i = Math.floor(f = m * (1 + k));\n      }\n\n      return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n    } else {\n      if (k < 0) {\n        return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n      }\n\n      if (k > 1) {\n        return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n      }\n\n      return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n    }\n  },\n\n  Utils: {\n\n    Linear: function Linear(p0, p1, t) {\n      return (p1 - p0) * t + p0;\n    },\n\n    Bernstein: function Bernstein(n, i) {\n      var fc = TWEEN.Interpolation.Utils.Factorial;\n\n      return fc(n) / fc(i) / fc(n - i);\n    },\n\n    Factorial: function () {\n      var a = [1];\n\n      return function (n) {\n        var s = 1;\n\n        if (a[n]) {\n          return a[n];\n        }\n\n        for (var i = n; i > 1; i--) {\n          s *= i;\n        }\n\n        a[n] = s;\n        return s;\n      };\n    }(),\n\n    CatmullRom: function CatmullRom(p0, p1, p2, p3, t) {\n      var v0 = (p2 - p0) * 0.5;\n      var v1 = (p3 - p1) * 0.5;\n      var t2 = t * t;\n      var t3 = t * t2;\n\n      return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n    }\n\n  }\n\n};\n\n(function (root) {\n  if (typeof define === 'function' && __webpack_require__(329)) {\n    define([], function () {\n      return TWEEN;\n    });\n  } else if (typeof module !== 'undefined' && (typeof exports === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default()(exports)) === 'object') {\n    module.exports = TWEEN;\n  } else if (root !== undefined) {\n    root.TWEEN = TWEEN;\n  }\n})(this);\n\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"] = function (object, domElement) {\n  this.object = object;\n  this.domElement = domElement !== undefined ? domElement : document;\n  this.frameId;\n\n  this.enabled = true;\n\n  this.target = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  this.center = this.target;\n\n  this.noZoom = false;\n  this.zoomSpeed = 1.0;\n\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  this.minZoom = 0;\n  this.maxZoom = Infinity;\n\n  this.noRotate = false;\n  this.rotateSpeed = -0.15;\n\n  this.noPan = true;\n  this.keyPanSpeed = 7.0;\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0;\n  this.minPolarAngle = 0;\n  this.maxPolarAngle = Math.PI;\n  this.momentumDampingFactor = 0.90;\n  this.momentumScalingFactor = -0.005;\n  this.momentumKeydownFactor = 20;\n\n  this.minFov = 30;\n  this.maxFov = 120;\n\n  this.minAzimuthAngle = -Infinity;\n  this.maxAzimuthAngle = Infinity;\n  this.noKeys = false;\n\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n  this.mouseButtons = { ORBIT: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].LEFT, ZOOM: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].MIDDLE, PAN: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].RIGHT };\n\n  var scope = this;\n\n  var EPS = 10e-8;\n  var MEPS = 10e-5;\n\n  var rotateStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var rotateEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var rotateDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n  var panStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var panEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var panDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var panOffset = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  var offset = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  var dollyStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var dollyEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var dollyDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n  var theta;\n  var phi;\n  var phiDelta = 0;\n  var thetaDelta = 0;\n  var scale = 1;\n  var pan = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  var lastPosition = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n  var lastQuaternion = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n  var momentumLeft = 0,\n      momentumUp = 0;\n  var eventCurrent, eventPrevious;\n  var momentumOn = false;\n\n  var keyUp, keyBottom, keyLeft, keyRight;\n\n  var STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n  var state = STATE.NONE;\n\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  var quat = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]().setFromUnitVectors(object.up, new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0));\n  var quatInverse = quat.clone().inverse();\n\n  var changeEvent = { type: 'change' };\n  var startEvent = { type: 'start' };\n  var endEvent = { type: 'end' };\n\n  this.setLastQuaternion = function (quaternion) {\n    lastQuaternion.copy(quaternion);\n    scope.object.quaternion.copy(quaternion);\n  };\n\n  this.getLastPosition = function () {\n    return lastPosition;\n  };\n\n  this.rotateLeft = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle();\n    }\n\n    thetaDelta -= angle;\n  };\n\n  this.rotateUp = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle();\n    }\n\n    phiDelta -= angle;\n  };\n\n  this.panLeft = function (distance) {\n    var te = this.object.matrix.elements;\n\n    panOffset.set(te[0], te[1], te[2]);\n    panOffset.multiplyScalar(-distance);\n\n    pan.add(panOffset);\n  };\n\n  this.panUp = function (distance) {\n    var te = this.object.matrix.elements;\n\n    panOffset.set(te[4], te[5], te[6]);\n    panOffset.multiplyScalar(distance);\n\n    pan.add(panOffset);\n  };\n\n  this.pan = function (deltaX, deltaY) {\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n      var position = scope.object.position;\n      var offset = position.clone().sub(scope.target);\n      var targetDistance = offset.length();\n\n      targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n      scope.panLeft(2 * deltaX * targetDistance / element.clientHeight);\n      scope.panUp(2 * deltaY * targetDistance / element.clientHeight);\n    } else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n      scope.panLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth);\n      scope.panUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight);\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n    }\n  };\n\n  this.momentum = function () {\n    if (!momentumOn) return;\n\n    if (Math.abs(momentumLeft) < MEPS && Math.abs(momentumUp) < MEPS) {\n      momentumOn = false;\n      return;\n    }\n\n    momentumUp *= this.momentumDampingFactor;\n    momentumLeft *= this.momentumDampingFactor;\n\n    thetaDelta -= this.momentumScalingFactor * momentumLeft;\n    phiDelta -= this.momentumScalingFactor * momentumUp;\n  };\n\n  this.dollyIn = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale();\n    }\n\n    if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n      scale /= dollyScale;\n    } else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale));\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(changeEvent);\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n    }\n  };\n\n  this.dollyOut = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale();\n    }\n\n    if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n      scale *= dollyScale;\n    } else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale));\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(changeEvent);\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n    }\n  };\n\n  this.update = function (ignoreUpdate) {\n    var position = this.object.position;\n\n    offset.copy(position).sub(this.target);\n\n    offset.applyQuaternion(quat);\n\n    theta = Math.atan2(offset.x, offset.z);\n\n    phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y);\n\n    if (this.autoRotate && state === STATE.NONE) {\n      this.rotateLeft(getAutoRotationAngle());\n    }\n\n    this.momentum();\n\n    theta += thetaDelta;\n    phi += phiDelta;\n\n    theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta));\n\n    phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi));\n\n    phi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\n\n    var radius = offset.length() * scale;\n\n    radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\n\n    this.target.add(pan);\n\n    offset.x = radius * Math.sin(phi) * Math.sin(theta);\n    offset.y = radius * Math.cos(phi);\n    offset.z = radius * Math.sin(phi) * Math.cos(theta);\n\n    offset.applyQuaternion(quatInverse);\n\n    position.copy(this.target).add(offset);\n\n    this.object.lookAt(this.target);\n\n    thetaDelta = 0;\n    phiDelta = 0;\n    scale = 1;\n    pan.set(0, 0, 0);\n\n    if (lastPosition.distanceToSquared(this.object.position) > EPS || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n      ignoreUpdate !== true && this.dispatchEvent(changeEvent);\n\n      lastPosition.copy(this.object.position);\n      lastQuaternion.copy(this.object.quaternion);\n    }\n  };\n\n  this.reset = function () {\n    state = STATE.NONE;\n\n    this.target.copy(this.target0);\n    this.object.position.copy(this.position0);\n    this.object.zoom = this.zoom0;\n\n    this.object.updateProjectionMatrix();\n    this.dispatchEvent(changeEvent);\n\n    this.update();\n  };\n\n  this.getPolarAngle = function () {\n    return phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n    return theta;\n  };\n\n  function getAutoRotationAngle() {\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale() {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function onMouseDown(event) {\n    momentumOn = false;\n\n    momentumLeft = momentumUp = 0;\n\n    if (scope.enabled === false) return;\n    event.preventDefault();\n\n    if (event.button === scope.mouseButtons.ORBIT) {\n      if (scope.noRotate === true) return;\n\n      state = STATE.ROTATE;\n\n      rotateStart.set(event.clientX, event.clientY);\n    } else if (event.button === scope.mouseButtons.ZOOM) {\n      if (scope.noZoom === true) return;\n\n      state = STATE.DOLLY;\n\n      dollyStart.set(event.clientX, event.clientY);\n    } else if (event.button === scope.mouseButtons.PAN) {\n      if (scope.noPan === true) return;\n\n      state = STATE.PAN;\n\n      panStart.set(event.clientX, event.clientY);\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener('mousemove', onMouseMove, false);\n      document.addEventListener('mouseup', onMouseUp, false);\n      scope.dispatchEvent(startEvent);\n    }\n\n    scope.update();\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    if (state === STATE.ROTATE) {\n      if (scope.noRotate === true) return;\n\n      rotateEnd.set(event.clientX, event.clientY);\n      rotateDelta.subVectors(rotateEnd, rotateStart);\n\n      scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n      scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n      rotateStart.copy(rotateEnd);\n\n      if (eventPrevious) {\n        momentumLeft = event.clientX - eventPrevious.clientX;\n        momentumUp = event.clientY - eventPrevious.clientY;\n      }\n\n      eventPrevious = event;\n    } else if (state === STATE.DOLLY) {\n      if (scope.noZoom === true) return;\n\n      dollyEnd.set(event.clientX, event.clientY);\n      dollyDelta.subVectors(dollyEnd, dollyStart);\n\n      if (dollyDelta.y > 0) {\n        scope.dollyIn();\n      } else if (dollyDelta.y < 0) {\n        scope.dollyOut();\n      }\n\n      dollyStart.copy(dollyEnd);\n    } else if (state === STATE.PAN) {\n      if (scope.noPan === true) return;\n\n      panEnd.set(event.clientX, event.clientY);\n      panDelta.subVectors(panEnd, panStart);\n\n      scope.pan(panDelta.x, panDelta.y);\n\n      panStart.copy(panEnd);\n    }\n\n    if (state !== STATE.NONE) scope.update();\n  }\n\n  function onMouseUp() {\n    momentumOn = true;\n\n    eventPrevious = undefined;\n\n    if (scope.enabled === false) return;\n\n    document.removeEventListener('mousemove', onMouseMove, false);\n    document.removeEventListener('mouseup', onMouseUp, false);\n    scope.dispatchEvent(endEvent);\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n    if (scope.enabled === false || scope.noZoom === true || state !== STATE.NONE) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    var delta = 0;\n\n    if (event.wheelDelta !== undefined) {\n      delta = event.wheelDelta;\n    } else if (event.detail !== undefined) {\n      delta = -event.detail;\n    }\n\n    if (delta > 0) {\n      scope.object.fov = scope.object.fov < scope.maxFov ? scope.object.fov + 1 : scope.maxFov;\n      scope.object.updateProjectionMatrix();\n    } else if (delta < 0) {\n      scope.object.fov = scope.object.fov > scope.minFov ? scope.object.fov - 1 : scope.minFov;\n      scope.object.updateProjectionMatrix();\n    }\n\n    scope.update();\n    scope.dispatchEvent(changeEvent);\n    scope.dispatchEvent(startEvent);\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyUp(event) {\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = false;\n        break;\n\n      case scope.keys.BOTTOM:\n        keyBottom = false;\n        break;\n\n      case scope.keys.LEFT:\n        keyLeft = false;\n        break;\n\n      case scope.keys.RIGHT:\n        keyRight = false;\n        break;\n    }\n  }\n\n  function onKeyDown(event) {\n    if (scope.enabled === false || scope.noKeys === true || scope.noRotate === true) return;\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = true;\n        break;\n\n      case scope.keys.BOTTOM:\n        keyBottom = true;\n        break;\n\n      case scope.keys.LEFT:\n        keyLeft = true;\n        break;\n\n      case scope.keys.RIGHT:\n        keyRight = true;\n        break;\n    }\n\n    if (keyUp || keyBottom || keyLeft || keyRight) {\n      momentumOn = true;\n\n      if (keyUp) momentumUp = -scope.rotateSpeed * scope.momentumKeydownFactor;\n      if (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor;\n      if (keyLeft) momentumLeft = -scope.rotateSpeed * scope.momentumKeydownFactor;\n      if (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor;\n    }\n  }\n\n  function touchstart(event) {\n    momentumOn = false;\n\n    momentumLeft = momentumUp = 0;\n\n    if (scope.enabled === false) return;\n\n    switch (event.touches.length) {\n      case 1:\n\n        if (scope.noRotate === true) return;\n\n        state = STATE.TOUCH_ROTATE;\n\n        rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n        break;\n\n      case 2:\n\n        if (scope.noZoom === true) return;\n\n        state = STATE.TOUCH_DOLLY;\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        break;\n\n      case 3:\n\n        if (scope.noPan === true) return;\n\n        state = STATE.TOUCH_PAN;\n\n        panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n        break;\n\n      default:\n\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) scope.dispatchEvent(startEvent);\n  }\n\n  function touchmove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    switch (event.touches.length) {\n      case 1:\n\n        if (scope.noRotate === true) return;\n        if (state !== STATE.TOUCH_ROTATE) return;\n\n        rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n\n        scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n        scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n        rotateStart.copy(rotateEnd);\n\n        if (eventPrevious) {\n          momentumLeft = event.touches[0].pageX - eventPrevious.pageX;\n          momentumUp = event.touches[0].pageY - eventPrevious.pageY;\n        }\n\n        eventPrevious = {\n          pageX: event.touches[0].pageX,\n          pageY: event.touches[0].pageY\n        };\n\n        scope.update();\n        break;\n\n      case 2:\n\n        if (scope.noZoom === true) return;\n        if (state !== STATE.TOUCH_DOLLY) return;\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (event.scale < 1) {\n          scope.object.fov = scope.object.fov < scope.maxFov ? scope.object.fov + 1 : scope.maxFov;\n          scope.object.updateProjectionMatrix();\n        } else if (event.scale > 1) {\n          scope.object.fov = scope.object.fov > scope.minFov ? scope.object.fov - 1 : scope.minFov;\n          scope.object.updateProjectionMatrix();\n        }\n\n        scope.update();\n        scope.dispatchEvent(changeEvent);\n        break;\n\n      case 3:\n\n        if (scope.noPan === true) return;\n        if (state !== STATE.TOUCH_PAN) return;\n\n        panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        panDelta.subVectors(panEnd, panStart);\n\n        scope.pan(panDelta.x, panDelta.y);\n\n        panStart.copy(panEnd);\n\n        scope.update();\n        break;\n\n      default:\n\n        state = STATE.NONE;\n    }\n  }\n\n  function touchend() {\n    momentumOn = true;\n\n    eventPrevious = undefined;\n\n    if (scope.enabled === false) return;\n\n    scope.dispatchEvent(endEvent);\n    state = STATE.NONE;\n  }\n\n  this.domElement.addEventListener('mousedown', onMouseDown, false);\n  this.domElement.addEventListener('mousewheel', onMouseWheel, false);\n  this.domElement.addEventListener('DOMMouseScroll', onMouseWheel, false);\n\n  this.domElement.addEventListener('touchstart', touchstart, false);\n  this.domElement.addEventListener('touchend', touchend, false);\n  this.domElement.addEventListener('touchmove', touchmove, false);\n\n  window.addEventListener('keyup', onKeyUp, false);\n  window.addEventListener('keydown', onKeyDown, false);\n\n  this.update();\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"].prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"].prototype.constructor = __WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"];\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"] = function (camera, domElement) {\n  var scope = this;\n  var changeEvent = { type: 'change' };\n\n  var rotY = 0;\n  var rotX = 0;\n  var tempX = 0;\n  var tempY = 0;\n\n  this.camera = camera;\n  this.camera.rotation.reorder('YXZ');\n  this.domElement = domElement !== undefined ? domElement : document;\n\n  this.enabled = true;\n\n  this.deviceOrientation = {};\n  this.screenOrientation = 0;\n\n  this.alpha = 0;\n  this.alphaOffsetAngle = 0;\n\n  var onDeviceOrientationChangeEvent = function onDeviceOrientationChangeEvent(event) {\n    scope.deviceOrientation = event;\n  };\n\n  var onScreenOrientationChangeEvent = function onScreenOrientationChangeEvent() {\n    scope.screenOrientation = window.orientation || 0;\n  };\n\n  var onTouchStartEvent = function onTouchStartEvent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    tempX = event.touches[0].pageX;\n    tempY = event.touches[0].pageY;\n  };\n\n  var onTouchMoveEvent = function onTouchMoveEvent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    rotY += __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad((event.touches[0].pageX - tempX) / 4);\n    rotX += __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad((tempY - event.touches[0].pageY) / 4);\n\n    scope.updateAlphaOffsetAngle(rotY);\n\n    tempX = event.touches[0].pageX;\n    tempY = event.touches[0].pageY;\n  };\n\n  var setCameraQuaternion = function setCameraQuaternion(quaternion, alpha, beta, gamma, orient) {\n    var zee = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 0, 1);\n\n    var euler = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Euler\"]();\n\n    var q0 = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n    var q1 = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"](-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5));\n\n    var vectorFingerY;\n    var fingerQY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    var fingerQX = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n    if (scope.screenOrientation == 0) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX);\n    } else if (scope.screenOrientation == 180) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX);\n    } else if (scope.screenOrientation == 90) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX);\n    } else if (scope.screenOrientation == -90) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX);\n    }\n\n    q1.multiply(fingerQY);\n    q1.multiply(fingerQX);\n\n    euler.set(beta, alpha, -gamma, 'YXZ');\n\n    quaternion.setFromEuler(euler);\n\n    quaternion.multiply(q1);\n\n    quaternion.multiply(q0.setFromAxisAngle(zee, -orient));\n  };\n\n  this.connect = function () {\n    onScreenOrientationChangeEvent();\n\n    window.addEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n    window.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n    window.addEventListener('deviceorientation', this.update.bind(this), false);\n\n    scope.domElement.addEventListener('touchstart', onTouchStartEvent, false);\n    scope.domElement.addEventListener('touchmove', onTouchMoveEvent, false);\n\n    scope.enabled = true;\n  };\n\n  this.disconnect = function () {\n    window.removeEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n    window.removeEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n    window.removeEventListener('deviceorientation', this.update.bind(this), false);\n\n    scope.domElement.removeEventListener('touchstart', onTouchStartEvent, false);\n    scope.domElement.removeEventListener('touchmove', onTouchMoveEvent, false);\n\n    scope.enabled = false;\n  };\n\n  this.update = function (ignoreUpdate) {\n    if (scope.enabled === false) return;\n\n    var alpha = scope.deviceOrientation.alpha ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.alpha) + this.alphaOffsetAngle : 0;\n    var beta = scope.deviceOrientation.beta ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.beta) : 0;\n    var gamma = scope.deviceOrientation.gamma ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.gamma) : 0;\n    var orient = scope.screenOrientation ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.screenOrientation) : 0;\n\n    setCameraQuaternion(scope.camera.quaternion, alpha, beta, gamma, orient);\n    this.alpha = alpha;\n\n    ignoreUpdate !== true && this.dispatchEvent(changeEvent);\n  };\n\n  this.updateAlphaOffsetAngle = function (angle) {\n    this.alphaOffsetAngle = angle;\n    this.update();\n  };\n\n  this.dispose = function () {\n    this.disconnect();\n  };\n\n  this.connect();\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"].prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"].prototype.constructor = __WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"];\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"] = function () {};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"].prototype = {\n\n  constructor: __WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"],\n\n  set: function set(direction, axis, angle) {\n    this.direction = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();this.direction.copy(direction);\n    this.axis = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();this.axis.copy(axis);\n    this.angle = angle;\n    return this;\n  },\n\n  _sign: function _sign(a) {\n    return a < 0 ? -1 : a > 0 ? 1 : 0;\n  },\n\n  _cosh: function _cosh(x) {\n    return (Math.exp(x) + Math.exp(-x)) / 2;\n  },\n\n  _sinhInverse: function _sinhInverse(x) {\n    return Math.log(Math.abs(x) + Math.sqrt(x * x + 1));\n  },\n\n  modify: function modify(geometry) {\n    var thirdAxis = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();thirdAxis.crossVectors(this.direction, this.axis);\n\n    var P = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]();\n    P.set(thirdAxis.x, thirdAxis.y, thirdAxis.z, 0, this.direction.x, this.direction.y, this.direction.z, 0, this.axis.x, this.axis.y, this.axis.z, 0, 0, 0, 0, 1).transpose();\n\n    var InverseP = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]().getInverse(P);\n    var newVertices = [];var oldVertices = [];var anglesBetweenOldandNewVertices = [];\n\n    var meshGeometryBoundingBoxMaxx = 0;var meshGeometryBoundingBoxMinx = 0;\n    var meshGeometryBoundingBoxMaxy = 0;var meshGeometryBoundingBoxMiny = 0;\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      newVertices[i] = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();newVertices[i].copy(geometry.vertices[i]).applyMatrix4(InverseP);\n      if (newVertices[i].x > meshGeometryBoundingBoxMaxx) {\n        meshGeometryBoundingBoxMaxx = newVertices[i].x;\n      }\n      if (newVertices[i].x < meshGeometryBoundingBoxMinx) {\n        meshGeometryBoundingBoxMinx = newVertices[i].x;\n      }\n      if (newVertices[i].y > meshGeometryBoundingBoxMaxy) {\n        meshGeometryBoundingBoxMaxy = newVertices[i].y;\n      }\n      if (newVertices[i].y < meshGeometryBoundingBoxMiny) {\n        meshGeometryBoundingBoxMiny = newVertices[i].y;\n      }\n    }\n\n    var meshWidthold = meshGeometryBoundingBoxMaxx - meshGeometryBoundingBoxMinx;\n    var meshDepth = meshGeometryBoundingBoxMaxy - meshGeometryBoundingBoxMiny;\n    var ParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidthold;\n    var oldMiddlex = (meshGeometryBoundingBoxMaxx + meshGeometryBoundingBoxMinx) / 2;\n    var oldMiddley = (meshGeometryBoundingBoxMaxy + meshGeometryBoundingBoxMiny) / 2;\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      oldVertices[i] = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();oldVertices[i].copy(newVertices[i]);\n      newVertices[i].x = this._sign(newVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((newVertices[i].x - oldMiddlex) * ParamB);\n    }\n\n    var meshWidth = 2 / ParamB * this._sinhInverse(meshWidthold / 2 * ParamB);\n\n    var NewParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidth;\n\n    var rightEdgePos = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](meshWidth / 2, -meshDepth / 2, 0);\n    rightEdgePos.y = 1 / NewParamB * this._cosh(NewParamB * rightEdgePos.x) - 1 / NewParamB - meshDepth / 2;\n\n    var bendCenter = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, rightEdgePos.y + rightEdgePos.x / Math.tan(this.angle), 0);\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var x0 = this._sign(oldVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((oldVertices[i].x - oldMiddlex) * ParamB);\n      var y0 = 1 / NewParamB * this._cosh(NewParamB * x0) - 1 / NewParamB;\n\n      var k = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](bendCenter.x - x0, bendCenter.y - (y0 - meshDepth / 2), bendCenter.z).normalize();\n\n      var Q = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n      Q.addVectors(new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](x0, y0 - meshDepth / 2, oldVertices[i].z), k.multiplyScalar(oldVertices[i].y + meshDepth / 2));\n      newVertices[i].x = Q.x;newVertices[i].y = Q.y;\n    }\n\n    var middle = oldMiddlex * meshWidth / meshWidthold;\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var O = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](oldMiddlex, oldMiddley, oldVertices[i].z);\n      var p = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();p.subVectors(oldVertices[i], O);\n      var q = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();q.subVectors(newVertices[i], O);\n\n      anglesBetweenOldandNewVertices[i] = Math.acos(1 / this._cosh(ParamB * newVertices[i].x)) * this._sign(newVertices[i].x);\n\n      newVertices[i].x = newVertices[i].x + middle;\n      geometry.vertices[i].copy(newVertices[i].applyMatrix4(P));\n    }\n\n    geometry.computeFaceNormals();\n    geometry.verticesNeedUpdate = true;\n    geometry.normalsNeedUpdate = true;\n\n    var fvNames = ['a', 'b', 'c', 'd'];\n\n    for (var f = 0, fl = geometry.faces.length; f < fl; f++) {\n      var face = geometry.faces[f];\n      if (face.vertexNormals === undefined) {\n        continue;\n      }\n      for (var v = 0, vl = face.vertexNormals.length; v < vl; v++) {\n        var angle = anglesBetweenOldandNewVertices[face[fvNames[v]]];\n        var x = this.axis.x,\n            y = this.axis.y,\n            z = this.axis.z;\n\n        var rotateMatrix = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix3\"]();\n        rotateMatrix.set(Math.cos(angle) + (1 - Math.cos(angle)) * x * x, (1 - Math.cos(angle)) * x * y - Math.sin(angle) * z, (1 - Math.cos(angle)) * x * z + Math.sin(angle) * y, (1 - Math.cos(angle)) * y * x + Math.sin(angle) * z, Math.cos(angle) + (1 - Math.cos(angle)) * y * y, (1 - Math.cos(angle)) * y * z - Math.sin(angle) * x, (1 - Math.cos(angle)) * z * x - Math.sin(angle) * y, (1 - Math.cos(angle)) * z * y + Math.sin(angle) * x, Math.cos(angle) + (1 - Math.cos(angle)) * z * z);\n\n        face.vertexNormals[v].applyMatrix3(rotateMatrix);\n      }\n    }\n\n\n    return this;\n  }\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"CardboardEffect\"] = function (renderer) {\n  var _camera = new __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"](-1, 1, 1, -1, 0, 1);\n\n  var _scene = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Scene\"]();\n\n  var _stereo = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoCamera\"]();\n  _stereo.aspect = 0.5;\n\n  var _params = { minFilter: __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"], magFilter: __WEBPACK_IMPORTED_MODULE_8_three__[\"NearestFilter\"], format: __WEBPACK_IMPORTED_MODULE_8_three__[\"RGBAFormat\"] };\n\n  var _renderTarget = new __WEBPACK_IMPORTED_MODULE_8_three__[\"WebGLRenderTarget\"](512, 512, _params);\n  _renderTarget.scissorTest = true;\n  _renderTarget.texture.generateMipmaps = false;\n\n  var distortion = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"](0.441, 0.156);\n\n  var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneBufferGeometry\"](1, 1, 10, 20).removeAttribute('normal').toNonIndexed();\n\n  var positions = geometry.attributes.position.array;\n  var uvs = geometry.attributes.uv.array;\n\n  geometry.attributes.position.count *= 2;\n  geometry.attributes.uv.count *= 2;\n\n  var positions2 = new Float32Array(positions.length * 2);\n  positions2.set(positions);\n  positions2.set(positions, positions.length);\n\n  var uvs2 = new Float32Array(uvs.length * 2);\n  uvs2.set(uvs);\n  uvs2.set(uvs, uvs.length);\n\n  var vector = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var length = positions.length / 3;\n\n  for (var i = 0, l = positions2.length / 3; i < l; i++) {\n    vector.x = positions2[i * 3 + 0];\n    vector.y = positions2[i * 3 + 1];\n\n    var dot = vector.dot(vector);\n    var scalar = 1.5 + (distortion.x + distortion.y * dot) * dot;\n\n    var offset = i < length ? 0 : 1;\n\n    positions2[i * 3 + 0] = vector.x / scalar * 1.5 - 0.5 + offset;\n    positions2[i * 3 + 1] = vector.y / scalar * 3.0;\n\n    uvs2[i * 2] = (uvs2[i * 2] + offset) * 0.5;\n  }\n\n  geometry.attributes.position.array = positions2;\n  geometry.attributes.uv.array = uvs2;\n\n  var material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ map: _renderTarget.texture });\n  var mesh = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"](geometry, material);\n  _scene.add(mesh);\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height);\n\n    var pixelRatio = renderer.getPixelRatio();\n\n    _renderTarget.setSize(width * pixelRatio, height * pixelRatio);\n  };\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld();\n\n    if (camera.parent === null) camera.updateMatrixWorld();\n\n    _stereo.update(camera);\n\n    var width = _renderTarget.width / 2;\n    var height = _renderTarget.height;\n\n    _renderTarget.scissor.set(0, 0, width, height);\n    _renderTarget.viewport.set(0, 0, width, height);\n    renderer.render(scene, _stereo.cameraL, _renderTarget);\n\n    _renderTarget.scissor.set(width, 0, width, height);\n    _renderTarget.viewport.set(width, 0, width, height);\n    renderer.render(scene, _stereo.cameraR, _renderTarget);\n\n    renderer.render(_scene, _camera);\n  };\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"StereoEffect\"] = function (renderer) {\n  var _stereo = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoCamera\"]();\n  _stereo.aspect = 0.5;\n\n  this.setEyeSeparation = function (eyeSep) {\n    _stereo.eyeSep = eyeSep;\n  };\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height);\n  };\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld();\n\n    if (camera.parent === null) camera.updateMatrixWorld();\n\n    _stereo.update(camera);\n\n    var size = renderer.getSize();\n\n    if (renderer.autoClear) renderer.clear();\n    renderer.setScissorTest(true);\n\n    renderer.setScissor(0, 0, size.width / 2, size.height);\n    renderer.setViewport(0, 0, size.width / 2, size.height);\n    renderer.render(scene, _stereo.cameraL);\n\n    renderer.setScissor(size.width / 2, 0, size.width / 2, size.height);\n    renderer.setViewport(size.width / 2, 0, size.width / 2, size.height);\n    renderer.render(scene, _stereo.cameraR);\n\n    renderer.setScissorTest(false);\n  };\n};\nvar GSVPANO = GSVPANO || {};\nGSVPANO.PanoLoader = function (parameters) {\n  'use strict';\n\n  var _parameters = parameters || {},\n      _location,\n      _zoom,\n      _panoId,\n      _panoClient = new google.maps.StreetViewService(),\n      _count = 0,\n      _total = 0,\n      _canvas = [],\n      _ctx = [],\n      _wc = 0,\n      _hc = 0,\n      result = null,\n      rotation = 0,\n      copyright = '',\n      onSizeChange = null,\n      onPanoramaLoad = null;\n\n  var levelsW = [1, 2, 4, 7, 13, 26],\n      levelsH = [1, 1, 2, 4, 7, 13];\n\n  var widths = [416, 832, 1664, 3328, 6656, 13312],\n      heights = [416, 416, 832, 1664, 3328, 6656];\n\n  var gl = null;\n  try {\n    var canvas = document.createElement('canvas');\n    gl = canvas.getContext('experimental-webgl');\n    if (gl == null) {\n      gl = canvas.getContext('webgl');\n    }\n  } catch (error) {}\n\n  var maxW = 1024,\n      maxH = 1024;\n\n  if (gl) {\n    var maxTexSize = Math.max(gl.getParameter(gl.MAX_TEXTURE_SIZE), 6656);\n\n    maxW = maxH = maxTexSize;\n  }\n\n  this.setProgress = function (loaded, total) {\n    if (this.onProgress) {\n      this.onProgress({ loaded: loaded, total: total });\n    }\n  };\n\n  this.throwError = function (message) {\n    if (this.onError) {\n      this.onError(message);\n    } else {\n      console.error(message);\n    }\n  };\n\n  this.adaptTextureToZoom = function () {\n    var w = levelsW[_zoom] * 416,\n        h = levelsH[_zoom] * 416;\n\n    w = widths[_zoom];\n    h = heights[_zoom];\n\n    _wc = Math.ceil(w / maxW);\n    _hc = Math.ceil(h / maxH);\n\n    _canvas = [];_ctx = [];\n\n    var ptr = 0;\n    for (var y = 0; y < _hc; y++) {\n      for (var x = 0; x < _wc; x++) {\n        var c = document.createElement('canvas');\n        if (x < _wc - 1) c.width = maxW;else c.width = w - maxW * x;\n        if (y < _hc - 1) c.height = maxH;else c.height = h - maxH * y;\n        _canvas.push(c);\n        _ctx.push(c.getContext('2d'));\n        ptr++;\n      }\n    }\n  };\n\n  this.composeFromTile = function (x, y, texture) {\n    x *= 512;\n    y *= 512;\n    var px = Math.floor(x / maxW),\n        py = Math.floor(y / maxH);\n\n    x -= px * maxW;\n    y -= py * maxH;\n\n    _ctx[py * _wc + px].drawImage(texture, 0, 0, texture.width, texture.height, x, y, 512, 512);\n    this.progress();\n  };\n\n  this.progress = function () {\n    _count++;\n\n    var p = Math.round(_count * 100 / _total);\n    this.setProgress(_count, _total);\n\n    if (_count === _total) {\n      this.canvas = _canvas;\n      this.panoId = _panoId;\n      this.zoom = _zoom;\n      if (this.onPanoramaLoad) {\n        this.onPanoramaLoad(_canvas[0]);\n      }\n    }\n  };\n\n  this.loadFromId = function (id) {\n    _panoId = id;\n    this.composePanorama();\n  };\n\n  this.composePanorama = function () {\n    this.setProgress(0, 1);\n\n    var w = levelsW[_zoom],\n        h = levelsH[_zoom],\n        self = this,\n        url,\n        x,\n        y;\n\n    _count = 0;\n    _total = w * h;\n\n    var self = this;\n    for (var y = 0; y < h; y++) {\n      for (var x = 0; x < w; x++) {\n        var url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + _zoom + '&x=' + x + '&y=' + y + '&panoid=' + _panoId + '&nbt&fover=2';\n        (function (x, y) {\n          if (_parameters.useWebGL) {\n            var texture = __WEBPACK_IMPORTED_MODULE_8_three__[\"ImageUtils\"].loadTexture(url, null, function () {\n              self.composeFromTile(x, y, texture);\n            });\n          } else {\n            var img = new Image();\n            img.addEventListener('load', function () {\n              self.composeFromTile(x, y, this);\n            });\n            img.crossOrigin = '';\n            img.src = url;\n          }\n        })(x, y);\n      }\n    }\n  };\n\n  this.load = function (panoid) {\n    this.loadPano(panoid);\n  };\n\n  this.loadPano = function (id) {\n    var self = this;\n    _panoClient.getPanoramaById(id, function (result, status) {\n      if (status === google.maps.StreetViewStatus.OK) {\n        self.result = result;\n        if (self.onPanoramaData) self.onPanoramaData(result);\n\n        copyright = result.copyright;\n        self.copyright = result.copyright;\n        _panoId = result.location.pano;\n        self.location = location;\n        self.composePanorama();\n      } else {\n        if (self.onNoPanoramaData) self.onNoPanoramaData(status);\n        self.throwError('Could not retrieve panorama for the following reason: ' + status);\n      }\n    });\n  };\n\n  this.setZoom = function (z) {\n    _zoom = z;\n    this.adaptTextureToZoom();\n  };\n\n  this.setZoom(_parameters.zoom || 1);\n};(function () {\n  'use strict';\n\n  PANOLENS.DataImageSource = 'https://pchen66.github.io/Panolens/asset/icon/';\n\n  PANOLENS.DataImage = {\n    Info: PANOLENS.DataImageSource + 'information.png',\n    Arrow: PANOLENS.DataImageSource + 'arrow-up.png',\n    FullscreenEnter: PANOLENS.DataImageSource + 'fullscreen.png',\n    FullscreenLeave: PANOLENS.DataImageSource + 'fullscreen-exit.png',\n    VideoPlay: PANOLENS.DataImageSource + 'video-play.png',\n    VideoPause: PANOLENS.DataImageSource + 'pause.png',\n    WhiteTile: PANOLENS.DataImageSource + 'tiles.png',\n    ReticleIdle: PANOLENS.DataImageSource + 'reticle-idle.png',\n    Setting: PANOLENS.DataImageSource + 'setting.png',\n    ChevronRight: PANOLENS.DataImageSource + 'chevron-right.png',\n    Check: PANOLENS.DataImageSource + 'check.png',\n    ViewIndicator: PANOLENS.DataImageSource + 'view-indicator.svg',\n    ReticleDwell: PANOLENS.DataImageSource + 'reticle-animation.png'\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Controls = {\n\n    ORBIT: 0,\n\n    DEVICEORIENTATION: 1\n\n  };\n\n  PANOLENS.Modes = {\n    UNKNOWN: 0,\n\n    NORMAL: 1,\n\n    CARDBOARD: 2,\n\n    STEREO: 3\n\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils = {};\n\n  PANOLENS.Utils.checkTouchSupported = function () {\n    return window ? 'ontouchstart' in window || window.navigator.msMaxTouchPoints : false;\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils.ImageLoader = {};\n\n  PANOLENS.Utils.ImageLoader.load = function (url, onLoad, onProgress, onError) {\n    var cached, request, arrayBufferView, blob, urlCreator, image, reference;\n\n    for (var iconName in PANOLENS.DataImage) {\n      if (PANOLENS.DataImage.hasOwnProperty(iconName) && url === PANOLENS.DataImage[iconName]) {\n        reference = iconName;\n      }\n    }\n\n    cached = __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].get(reference || url);\n\n    if (cached !== undefined) {\n      if (onLoad) {\n        setTimeout(function () {\n          if (onProgress) {\n            onProgress({ loaded: 1, total: 1 });\n          }\n\n          onLoad(cached);\n        }, 0);\n      }\n\n      return cached;\n    }\n\n    urlCreator = window.URL || window.webkitURL;\n    image = document.createElementNS('http://www.w3.org/1999/xhtml', 'img');\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].add(reference || url, image);\n\n    function onImageLoaded() {\n      urlCreator.revokeObjectURL(image.src);\n      onLoad && onLoad(image);\n    }\n\n    if (url.indexOf('data:') === 0) {\n      image.addEventListener('load', onImageLoaded, false);\n      image.src = url;\n      return image;\n    }\n\n    image.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : '';\n\n    request = new XMLHttpRequest();\n    request.open('GET', url, true);\n    request.responseType = 'arraybuffer';\n    request.onprogress = function (event) {\n      if (event.lengthComputable) {\n        onProgress && onProgress({ loaded: event.loaded, total: event.total });\n      }\n    };\n    request.onloadend = function (event) {\n      arrayBufferView = new Uint8Array(this.response);\n      blob = new Blob([arrayBufferView]);\n\n      image.addEventListener('load', onImageLoaded, false);\n      image.src = urlCreator.createObjectURL(blob);\n    };\n\n    request.send(null);\n  };\n\n  __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].enabled = true;\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils.TextureLoader = {};\n\n  PANOLENS.Utils.TextureLoader.load = function (url, onLoad, onProgress, onError) {\n    var texture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\n    PANOLENS.Utils.ImageLoader.load(url, function (image) {\n      texture.image = image;\n      texture.needsUpdate = true;\n\n      onLoad && onLoad(texture);\n    }, onProgress, onError);\n\n    return texture;\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils.CubeTextureLoader = {};\n\n  PANOLENS.Utils.CubeTextureLoader.load = function (urls, onLoad, onProgress, onError) {\n    var texture, loaded, progress, all, loadings;\n\n    texture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"CubeTexture\"]([]);\n\n    loaded = 0;\n    progress = {};\n    all = {};\n\n    urls.map(function (url, index) {\n      PANOLENS.Utils.ImageLoader.load(url, function (image) {\n        texture.images[index] = image;\n\n        loaded++;\n\n        if (loaded === 6) {\n          texture.needsUpdate = true;\n\n          onLoad && onLoad(texture);\n        }\n      }, function (event) {\n        progress[index] = { loaded: event.loaded, total: event.total };\n\n        all.loaded = 0;\n        all.total = 0;\n        loadings = 0;\n\n        for (var i in progress) {\n          loadings++;\n          all.loaded += progress[i].loaded;\n          all.total += progress[i].total;\n        }\n\n        if (loadings < 6) {\n          all.total = all.total / loadings * 6;\n        }\n\n        onProgress && onProgress(all);\n      }, onError);\n    });\n\n    return texture;\n  };\n})();\n\nPANOLENS.StereographicShader = {\n\n  uniforms: {\n\n    'tDiffuse': { value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]() },\n    'resolution': { value: 1.0 },\n    'transform': { value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]() },\n    'zoom': { value: 1.0 }\n\n  },\n\n  vertexShader: ['varying vec2 vUv;', 'void main() {', 'vUv = uv;', 'gl_Position = vec4( position, 1.0 );', '}'].join('\\n'),\n\n  fragmentShader: ['uniform sampler2D tDiffuse;', 'uniform float resolution;', 'uniform mat4 transform;', 'uniform float zoom;', 'varying vec2 vUv;', 'const float PI = 3.141592653589793;', 'void main(){', 'vec2 position = -1.0 +  2.0 * vUv;', 'position *= vec2( zoom * resolution, zoom * 0.5 );', 'float x2y2 = position.x * position.x + position.y * position.y;', 'vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );', 'sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );', 'vec2 sampleUV = vec2(', '(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,', '(asin(sphere_pnt.z) / PI + 0.5)', ');', 'gl_FragColor = texture2D( tDiffuse, sampleUV );', '}'].join('\\n')\n\n};(function () {\n  'use strict';\n\n  PANOLENS.Panorama = function (geometry, material) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].call(this);\n\n    this.type = 'panorama';\n\n    this.ImageQualityLow = 1;\n    this.ImageQualityFair = 2;\n    this.ImageQualityMedium = 3;\n    this.ImageQualityHigh = 4;\n    this.ImageQualitySuperHigh = 5;\n\n    this.animationDuration = 1000;\n\n    this.defaultInfospotSize = 350;\n\n    this.container = undefined;\n\n    this.loaded = false;\n\n    this.linkedSpots = [];\n\n    this.isInfospotVisible = false;\n\n    this.linkingImageURL = undefined;\n    this.linkingImageScale = undefined;\n\n    this.geometry = geometry;\n\n    this.material = material;\n    this.material.side = __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"];\n    this.material.visible = false;\n\n    this.scale.x *= -1;\n\n    this.infospotAnimation = new TWEEN.Tween(this).to({}, this.animationDuration / 2);\n\n    this.addEventListener('load', this.fadeIn.bind(this));\n    this.addEventListener('panolens-container', this.setContainer.bind(this));\n    this.addEventListener('click', this.onClick.bind(this));\n\n    this.setupTransitions();\n  };\n\n  PANOLENS.Panorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].prototype);\n\n  PANOLENS.Panorama.prototype.constructor = PANOLENS.Panorama;\n\n  PANOLENS.Panorama.prototype.add = function (object) {\n    var scope, invertedObject;\n\n    scope = this;\n\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    if (object instanceof PANOLENS.Infospot) {\n      invertedObject = object;\n\n      if (object.dispatchEvent) {\n        this.container && object.dispatchEvent({ type: 'panolens-container', container: this.container });\n\n        object.dispatchEvent({ type: 'panolens-infospot-focus',\n          method: function method(vector, duration, easing) {\n            scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'tweenControlCenter', data: [vector, duration, easing] });\n          } });\n      }\n    } else {\n      invertedObject = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"]();\n      invertedObject.scale.x = -1;\n      invertedObject.scalePlaceHolder = true;\n      invertedObject.add(object);\n    }\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype.add.call(this, invertedObject);\n  };\n\n  PANOLENS.Panorama.prototype.load = function () {\n    this.onLoad();\n  };\n\n  PANOLENS.Panorama.prototype.onClick = function (event) {\n    if (event.intersects && event.intersects.length === 0) {\n      this.traverse(function (object) {\n        object.dispatchEvent({ type: 'dismiss' });\n      });\n    }\n  };\n\n  PANOLENS.Panorama.prototype.setContainer = function (data) {\n    var container;\n\n    if (data instanceof HTMLElement) {\n      container = data;\n    } else if (data && data.container) {\n      container = data.container;\n    }\n\n    if (container) {\n      this.children.forEach(function (child) {\n        if (child instanceof PANOLENS.Infospot && child.dispatchEvent) {\n          child.dispatchEvent({ type: 'panolens-container', container: container });\n        }\n      });\n\n      this.container = container;\n    }\n  };\n\n  PANOLENS.Panorama.prototype.onLoad = function () {\n    this.loaded = true;\n\n    this.dispatchEvent({ type: 'load' });\n  };\n\n  PANOLENS.Panorama.prototype.onProgress = function (progress) {\n    this.dispatchEvent({ type: 'progress', progress: progress });\n  };\n\n  PANOLENS.Panorama.prototype.onError = function () {\n    this.dispatchEvent({ type: 'error' });\n  };\n\n  PANOLENS.Panorama.prototype.getZoomLevel = function () {\n    var zoomLevel;\n\n    if (window.innerWidth <= 800) {\n      zoomLevel = this.ImageQualityFair;\n    } else if (window.innerWidth > 800 && window.innerWidth <= 1280) {\n      zoomLevel = this.ImageQualityMedium;\n    } else if (window.innerWidth > 1280 && window.innerWidth <= 1920) {\n      zoomLevel = this.ImageQualityHigh;\n    } else if (window.innerWidth > 1920) {\n      zoomLevel = this.ImageQualitySuperHigh;\n    } else {\n      zoomLevel = this.ImageQualityLow;\n    }\n\n    return zoomLevel;\n  };\n\n  PANOLENS.Panorama.prototype.updateTexture = function (texture) {\n    this.material.map = texture;\n\n    this.material.needsUpdate = true;\n  };\n\n  PANOLENS.Panorama.prototype.toggleInfospotVisibility = function (isVisible, delay) {\n    delay = delay !== undefined ? delay : 0;\n\n    var scope, visible;\n\n    scope = this;\n    visible = isVisible !== undefined ? isVisible : !this.isInfospotVisible;\n\n    this.traverse(function (object) {\n      if (object instanceof PANOLENS.Infospot) {\n        visible ? object.show(delay) : object.hide(delay);\n      }\n    });\n\n    this.isInfospotVisible = visible;\n\n    this.infospotAnimation.onComplete(function () {\n      scope.dispatchEvent({ type: 'infospot-animation-complete', visible: visible });\n    }).delay(delay).start();\n  };\n\n  PANOLENS.Panorama.prototype.setLinkingImage = function (url, scale) {\n    this.linkingImageURL = url;\n    this.linkingImageScale = scale;\n  };\n\n  PANOLENS.Panorama.prototype.link = function (pano, position, imageScale, imageSrc) {\n    var scope = this,\n        spot,\n        scale,\n        img;\n\n    this.visible = true;\n\n    if (!position) {\n      console.warn('Please specify infospot position for linking');\n\n      return;\n    }\n\n    if (imageScale !== undefined) {\n      scale = imageScale;\n    } else if (pano.linkingImageScale !== undefined) {\n      scale = pano.linkingImageScale;\n    } else {\n      scale = 300;\n    }\n\n    if (imageSrc) {\n      img = imageSrc;\n    } else if (pano.linkingImageURL) {\n      img = pano.linkingImageURL;\n    } else {\n      img = PANOLENS.DataImage.Arrow;\n    }\n\n    spot = new PANOLENS.Infospot(scale, img);\n    spot.position.copy(position);\n    spot.toPanorama = pano;\n    spot.addEventListener('click', function () {\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setPanorama', data: pano });\n    });\n\n    this.linkedSpots.push(spot);\n\n    this.add(spot);\n\n    this.visible = false;\n  };\n\n  PANOLENS.Panorama.prototype.reset = function () {\n    this.children.length = 0;\n  };\n\n  PANOLENS.Panorama.prototype.setupTransitions = function () {\n    this.fadeInAnimation = new TWEEN.Tween(this.material).easing(TWEEN.Easing.Quartic.Out).onStart(function () {\n      this.visible = true;\n      this.material.visible = true;\n\n      this.dispatchEvent({ type: 'enter-fade-start' });\n    }.bind(this));\n\n    this.fadeOutAnimation = new TWEEN.Tween(this.material).easing(TWEEN.Easing.Quartic.Out).onComplete(function () {\n      this.visible = false;\n      this.material.visible = true;\n\n      this.dispatchEvent({ type: 'leave-complete' });\n    }.bind(this));\n\n    this.enterTransition = new TWEEN.Tween(this).easing(TWEEN.Easing.Quartic.Out).onComplete(function () {\n      this.dispatchEvent({ type: 'enter-animation-complete' });\n    }.bind(this)).start();\n\n    this.leaveTransition = new TWEEN.Tween(this).easing(TWEEN.Easing.Quartic.Out);\n  };\n\n  PANOLENS.Panorama.prototype.fadeIn = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration;\n\n    this.fadeOutAnimation.stop();\n    this.fadeInAnimation.to({ opacity: 1 }, duration).onComplete(function () {\n      this.toggleInfospotVisibility(true, duration / 2);\n\n      this.dispatchEvent({ type: 'enter-fade-complete' });\n    }.bind(this)).start();\n  };\n\n  PANOLENS.Panorama.prototype.fadeOut = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration;\n\n    this.fadeInAnimation.stop();\n    this.fadeOutAnimation.to({ opacity: 0 }, duration).start();\n  };\n\n  PANOLENS.Panorama.prototype.onEnter = function () {\n    var duration = this.animationDuration;\n\n    this.leaveTransition.stop();\n    this.enterTransition.to({}, duration).onStart(function () {\n      this.dispatchEvent({ type: 'enter-animation-start' });\n\n      if (this.loaded) {\n        this.fadeIn(duration);\n      } else {\n        this.load();\n      }\n    }.bind(this)).start();\n\n    this.dispatchEvent({ type: 'enter' });\n  };\n\n  PANOLENS.Panorama.prototype.onLeave = function () {\n    var duration = this.animationDuration;\n\n    this.enterTransition.stop();\n    this.leaveTransition.to({}, duration).onStart(function () {\n      this.dispatchEvent({ type: 'leave-animation-start' });\n\n      this.fadeOut(duration);\n      this.toggleInfospotVisibility(false);\n    }.bind(this)).start();\n\n    this.dispatchEvent({ type: 'leave' });\n  };\n\n  PANOLENS.Panorama.prototype.dispose = function () {\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this });\n\n    function recursiveDispose(object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i]);\n        object.remove(object.children[i]);\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose();\n      }\n\n      object.geometry && object.geometry.dispose();\n      object.material && object.material.dispose();\n    }\n\n    recursiveDispose(this);\n\n    if (this.parent) {\n      this.parent.remove(this);\n    }\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.ImagePanorama = function (image, radius) {\n    radius = radius || 5000;\n\n    var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"SphereGeometry\"](radius, 60, 40),\n        material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ opacity: 0, transparent: true });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n\n    this.src = image;\n  };\n\n  PANOLENS.ImagePanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.ImagePanorama.prototype.constructor = PANOLENS.ImagePanorama;\n\n  PANOLENS.ImagePanorama.prototype.load = function (src) {\n    src = src || this.src;\n\n    if (!src) {\n      console.warn('Image source undefined');\n    } else if (typeof src === 'string') {\n      PANOLENS.Utils.TextureLoader.load(src, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this));\n    } else if (src instanceof HTMLImageElement) {\n      this.onLoad(new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"](src));\n    }\n  };\n\n  PANOLENS.ImagePanorama.prototype.onLoad = function (texture) {\n    texture.minFilter = texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\n    texture.needsUpdate = true;\n\n    this.updateTexture(texture);\n\n    window.requestAnimationFrame(function () {\n      window.requestAnimationFrame(function () {\n        PANOLENS.Panorama.prototype.onLoad.call(this);\n      }.bind(this));\n    }.bind(this));\n  };\n\n  PANOLENS.ImagePanorama.prototype.reset = function () {\n    PANOLENS.Panorama.prototype.reset.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.GoogleStreetviewPanorama = function (panoId, radius) {\n    PANOLENS.ImagePanorama.call(this, undefined, radius);\n\n    this.panoId = panoId;\n\n    this.gsvLoader = undefined;\n\n    this.loadRequested = false;\n\n    this.setupGoogleMapAPI();\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.ImagePanorama.prototype);\n\n  PANOLENS.GoogleStreetviewPanorama.constructor = PANOLENS.GoogleStreetviewPanorama;\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.load = function (panoId) {\n    this.loadRequested = true;\n\n    panoId = panoId || this.panoId || {};\n\n    if (panoId && this.gsvLoader) {\n      this.loadGSVLoader(panoId);\n    } else {\n      this.gsvLoader = {};\n    }\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI = function () {\n    var script = document.createElement('script');\n    script.src = 'https://maps.googleapis.com/maps/api/js';\n    script.onreadystatechange = this.setGSVLoader.bind(this);\n    script.onload = this.setGSVLoader.bind(this);\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader = function () {\n    this.gsvLoader = new GSVPANO.PanoLoader();\n\n    if (this.gsvLoader === {} || this.loadRequested) {\n      this.load();\n    }\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader = function () {\n    return this.gsvLoader;\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader = function (panoId) {\n    this.loadRequested = false;\n\n    this.gsvLoader.onProgress = this.onProgress.bind(this);\n\n    this.gsvLoader.onPanoramaLoad = this.onLoad.bind(this);\n\n    this.gsvLoader.setZoom(this.getZoomLevel());\n\n    this.gsvLoader.load(panoId);\n\n    this.gsvLoader.loaded = true;\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.onLoad = function (canvas) {\n    if (!this.gsvLoader) {\n      return;\n    }\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"](canvas));\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.reset = function () {\n    this.gsvLoader = undefined;\n\n    PANOLENS.ImagePanorama.prototype.reset.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.CubePanorama = function (images, edgeLength) {\n    var shader, geometry, material;\n\n    this.images = images || [];\n\n    edgeLength = edgeLength || 10000;\n    shader = JSON.parse(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderLib\"]['cube']));\n\n    geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BoxGeometry\"](edgeLength, edgeLength, edgeLength);\n    material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderMaterial\"]({\n\n      fragmentShader: shader.fragmentShader,\n      vertexShader: shader.vertexShader,\n      uniforms: shader.uniforms,\n      side: __WEBPACK_IMPORTED_MODULE_8_three__[\"BackSide\"]\n\n    });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n  };\n\n  PANOLENS.CubePanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.CubePanorama.prototype.constructor = PANOLENS.CubePanorama;\n\n  PANOLENS.CubePanorama.prototype.load = function () {\n    PANOLENS.Utils.CubeTextureLoader.load(this.images, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this));\n  };\n\n  PANOLENS.CubePanorama.prototype.onLoad = function (texture) {\n    this.material.uniforms['tCube'].value = texture;\n\n    PANOLENS.Panorama.prototype.onLoad.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.BasicPanorama = function (edgeLength) {\n    var tile = PANOLENS.DataImage.WhiteTile;\n\n    PANOLENS.CubePanorama.call(this, [tile, tile, tile, tile, tile, tile], edgeLength);\n  };\n\n  PANOLENS.BasicPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.CubePanorama.prototype);\n\n  PANOLENS.BasicPanorama.prototype.constructor = PANOLENS.BasicPanorama;\n})();(function () {\n  'use strict';\n\n  PANOLENS.VideoPanorama = function (src, options, radius) {\n    radius = radius || 5000;\n\n    var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"SphereGeometry\"](radius, 60, 40),\n        material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ opacity: 0, transparent: true });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n\n    this.src = src;\n    this.options = options || {};\n    this.options.playsinline = this.options.playsinline !== false;\n\n    this.videoElement = undefined;\n    this.videoRenderObject = undefined;\n    this.videoProgress = 0;\n\n    this.isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);\n    this.isMobile = this.isIOS || /Android|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent);\n\n    this.addEventListener('leave', this.pauseVideo.bind(this));\n    this.addEventListener('enter-fade-start', this.resumeVideoProgress.bind(this));\n    this.addEventListener('video-toggle', this.toggleVideo.bind(this));\n    this.addEventListener('video-time', this.setVideoCurrentTime.bind(this));\n  };\n\n  PANOLENS.VideoPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.VideoPanorama.constructor = PANOLENS.VideoPanorama;\n\n  PANOLENS.VideoPanorama.prototype.load = function (src, options) {\n    var scope = this;\n\n    src = src || this.src || '';\n    options = options || this.options || {};\n\n    this.videoElement = options.videoElement || document.createElement('video');\n\n    this.videoElement.muted = options.muted || false;\n    this.videoElement.loop = options.loop !== undefined ? options.loop : true;\n    this.videoElement.autoplay = options.autoplay !== undefined ? options.autoplay : false;\n    this.videoElement.crossOrigin = options.crossOrigin !== undefined ? options.crossOrigin : 'anonymous';\n\n    if (options.playsinline) {\n      this.videoElement.setAttribute('playsinline', '');\n      this.videoElement.setAttribute('webkit-playsinline', '');\n    }\n\n    var onloadeddata = function onloadeddata() {\n      scope.onProgress({ loaded: 1, total: 1 });\n      scope.setVideoTexture(scope.videoElement);\n\n      if (scope.videoElement.autoplay) {\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n      }\n\n      if (scope.isMobile) {\n        if (scope.videoElement.autoplay && scope.videoElement.muted) {\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n        } else {\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n        }\n      }\n\n      scope.onLoad();\n    };\n\n    if (this.videoElement.readyState > 2) {\n      onloadeddata();\n    } else {\n      if (!this.videoElement.querySelectorAll('source').length || !this.videoElement.src) {\n        this.videoElement.src = src;\n      }\n\n      this.videoElement.load();\n    }\n\n    this.videoElement.onloadeddata = onloadeddata;\n\n    this.videoElement.ontimeupdate = function (event) {\n      scope.videoProgress = this.duration >= 0 ? this.currentTime / this.duration : 0;\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: scope.videoProgress });\n    };\n\n    this.videoElement.addEventListener('ended', function () {\n      if (!scope.options.loop) {\n        scope.resetVideo();\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n      }\n    }, false);\n  };\n\n  PANOLENS.VideoPanorama.prototype.setVideoTexture = function (video) {\n    var videoTexture, videoRenderObject, scene;\n\n    if (!video) return;\n\n    videoTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"VideoTexture\"](video);\n    videoTexture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    videoTexture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    videoTexture.format = __WEBPACK_IMPORTED_MODULE_8_three__[\"RGBFormat\"];\n\n    videoRenderObject = {\n\n      video: video,\n      videoTexture: videoTexture\n\n    };\n\n    if (this.isIOS) {\n      enableInlineVideo(video);\n    }\n\n    this.updateTexture(videoTexture);\n\n    this.videoRenderObject = videoRenderObject;\n  };\n\n  PANOLENS.VideoPanorama.prototype.reset = function () {\n    this.videoElement = undefined;\n\n    PANOLENS.Panorama.prototype.reset.call(this);\n  };\n\n  PANOLENS.VideoPanorama.prototype.isVideoPaused = function () {\n    return this.videoRenderObject.video.paused;\n  };\n\n  PANOLENS.VideoPanorama.prototype.toggleVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      if (this.isVideoPaused()) {\n        this.videoRenderObject.video.play();\n      } else {\n        this.videoRenderObject.video.pause();\n      }\n    }\n  };\n\n  PANOLENS.VideoPanorama.prototype.setVideoCurrentTime = function (event) {\n    if (this.videoRenderObject && this.videoRenderObject.video && !__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default()(event.percentage) && event.percentage !== 1) {\n      this.videoRenderObject.video.currentTime = this.videoRenderObject.video.duration * event.percentage;\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: event.percentage });\n    }\n  };\n\n  PANOLENS.VideoPanorama.prototype.playVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoPaused()) {\n      this.videoRenderObject.video.play();\n    }\n\n    this.dispatchEvent({ type: 'play' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.pauseVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoPaused()) {\n      this.videoRenderObject.video.pause();\n    }\n\n    this.dispatchEvent({ type: 'pause' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.resumeVideoProgress = function () {\n    if (this.videoElement.autoplay && !this.isMobile) {\n      this.playVideo();\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n    } else {\n      this.pauseVideo();\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n    }\n\n    this.setVideoCurrentTime({ percentage: this.videoProgress });\n  };\n\n  PANOLENS.VideoPanorama.prototype.resetVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      this.setVideoCurrentTime({ percentage: 0 });\n    }\n  };\n\n  PANOLENS.VideoPanorama.prototype.isVideoMuted = function () {\n    return this.videoRenderObject.video.muted;\n  };\n\n  PANOLENS.VideoPanorama.prototype.muteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = true;\n    }\n\n    this.dispatchEvent({ type: 'volumechange' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.unmuteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = false;\n    }\n\n    this.dispatchEvent({ type: 'volumechange' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.getVideoElement = function () {\n    return this.videoRenderObject.video;\n  };\n\n  PANOLENS.VideoPanorama.prototype.dispose = function () {\n    this.resetVideo();\n    this.pauseVideo();\n\n    this.removeEventListener('leave', this.pauseVideo.bind(this));\n    this.removeEventListener('enter-fade-start', this.resumeVideoProgress.bind(this));\n    this.removeEventListener('video-toggle', this.toggleVideo.bind(this));\n    this.removeEventListener('video-time', this.setVideoCurrentTime.bind(this));\n\n    PANOLENS.Panorama.prototype.dispose.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.EmptyPanorama = function (radius) {\n    radius = radius || 5000;\n\n    var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Geometry\"](),\n        material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({\n      color: 0x000000, opacity: 1, transparent: true\n    });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n  };\n\n  PANOLENS.EmptyPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.EmptyPanorama.prototype.constructor = PANOLENS.EmptyPanorama;\n})();(function () {\n  PANOLENS.LittlePlanet = function (type, source, size, ratio) {\n    type = type || 'image';\n\n    type === 'image' && PANOLENS.ImagePanorama.call(this, source, size);\n\n    this.size = size || 10000;\n    this.ratio = ratio || 0.5;\n    this.EPS = 0.000001;\n    this.frameId;\n\n    this.geometry = this.createGeometry();\n    this.material = this.createMaterial(this.size);\n\n    this.dragging = false;\n    this.userMouse = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n    this.quatA = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    this.quatB = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    this.quatCur = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    this.quatSlerp = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n    this.vectorX = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n    this.vectorY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n\n    this.addEventListener('window-resize', this.onWindowResize);\n  };\n\n  PANOLENS.LittlePlanet.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.ImagePanorama.prototype);\n\n  PANOLENS.LittlePlanet.prototype.constructor = PANOLENS.LittlePlanet;\n\n  PANOLENS.LittlePlanet.prototype.createGeometry = function () {\n    return new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneGeometry\"](this.size, this.size * this.ratio);\n  };\n\n  PANOLENS.LittlePlanet.prototype.createMaterial = function (size) {\n    var uniforms = PANOLENS.StereographicShader.uniforms;\n    uniforms.zoom.value = size;\n\n    return new __WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderMaterial\"]({\n\n      uniforms: uniforms,\n      vertexShader: PANOLENS.StereographicShader.vertexShader,\n      fragmentShader: PANOLENS.StereographicShader.fragmentShader\n\n    });\n  };\n\n  PANOLENS.LittlePlanet.prototype.registerMouseEvents = function () {\n    this.container.addEventListener('mousedown', this.onMouseDown.bind(this), false);\n    this.container.addEventListener('mousemove', this.onMouseMove.bind(this), false);\n    this.container.addEventListener('mouseup', this.onMouseUp.bind(this), false);\n    this.container.addEventListener('touchstart', this.onMouseDown.bind(this), false);\n    this.container.addEventListener('touchmove', this.onMouseMove.bind(this), false);\n    this.container.addEventListener('touchend', this.onMouseUp.bind(this), false);\n    this.container.addEventListener('mousewheel', this.onMouseWheel.bind(this), false);\n    this.container.addEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false);\n    this.container.addEventListener('contextmenu', this.onContextMenu.bind(this), false);\n  };\n\n  PANOLENS.LittlePlanet.prototype.unregisterMouseEvents = function () {\n    this.container.removeEventListener('mousedown', this.onMouseDown.bind(this), false);\n    this.container.removeEventListener('mousemove', this.onMouseMove.bind(this), false);\n    this.container.removeEventListener('mouseup', this.onMouseUp.bind(this), false);\n    this.container.removeEventListener('touchstart', this.onMouseDown.bind(this), false);\n    this.container.removeEventListener('touchmove', this.onMouseMove.bind(this), false);\n    this.container.removeEventListener('touchend', this.onMouseUp.bind(this), false);\n    this.container.removeEventListener('mousewheel', this.onMouseWheel.bind(this), false);\n    this.container.removeEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false);\n    this.container.removeEventListener('contextmenu', this.onContextMenu.bind(this), false);\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseDown = function (event) {\n    var x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n    var y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\n    var inputCount = event.touches && event.touches.length || 1;\n\n    switch (inputCount) {\n      case 1:\n\n        this.dragging = true;\n        this.userMouse.set(x, y);\n\n        break;\n\n      case 2:\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        this.userMouse.pinchDistance = distance;\n\n        break;\n\n      default:\n\n        break;\n    }\n\n    this.onUpdateCallback();\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseMove = function (event) {\n    var x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n    var y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\n    var inputCount = event.touches && event.touches.length || 1;\n\n    switch (inputCount) {\n      case 1:\n\n        var angleX = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(x - this.userMouse.x) * 0.4;\n        var angleY = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(y - this.userMouse.y) * 0.4;\n\n        if (this.dragging) {\n          this.quatA.setFromAxisAngle(this.vectorY, angleX);\n          this.quatB.setFromAxisAngle(this.vectorX, angleY);\n          this.quatCur.multiply(this.quatA).multiply(this.quatB);\n          this.userMouse.set(x, y);\n        }\n\n        break;\n\n      case 2:\n\n        var uniforms = this.material.uniforms;\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        this.addZoomDelta(this.userMouse.pinchDistance - distance);\n\n        break;\n\n      default:\n\n        break;\n    }\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseUp = function (event) {\n    this.dragging = false;\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseWheel = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    var delta = 0;\n\n    if (event.wheelDelta !== undefined) {\n      delta = event.wheelDelta;\n    } else if (event.detail !== undefined) {\n      delta = -event.detail;\n    }\n\n    this.addZoomDelta(delta);\n    this.onUpdateCallback();\n  };\n\n  PANOLENS.LittlePlanet.prototype.addZoomDelta = function (delta) {\n    var uniforms = this.material.uniforms;\n    var lowerBound = this.size * 0.1;\n    var upperBound = this.size * 10;\n\n    uniforms.zoom.value += delta;\n\n    if (uniforms.zoom.value <= lowerBound) {\n      uniforms.zoom.value = lowerBound;\n    } else if (uniforms.zoom.value >= upperBound) {\n      uniforms.zoom.value = upperBound;\n    }\n  };\n\n  PANOLENS.LittlePlanet.prototype.onUpdateCallback = function () {\n    this.frameId = window.requestAnimationFrame(this.onUpdateCallback.bind(this));\n\n    this.quatSlerp.slerp(this.quatCur, 0.1);\n    this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp);\n\n    if (!this.dragging && 1.0 - this.quatSlerp.clone().dot(this.quatCur) < this.EPS) {\n      window.cancelAnimationFrame(this.frameId);\n    }\n  };\n\n  PANOLENS.LittlePlanet.prototype.reset = function () {\n    this.quatCur.set(0, 0, 0, 1);\n    this.quatSlerp.set(0, 0, 0, 1);\n    this.onUpdateCallback();\n  };\n\n  PANOLENS.LittlePlanet.prototype.onLoad = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\n    this.registerMouseEvents();\n    this.onUpdateCallback();\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'disableControl' });\n  };\n\n  PANOLENS.LittlePlanet.prototype.onLeave = function () {\n    this.unregisterMouseEvents();\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'enableControl', data: PANOLENS.Controls.ORBIT });\n\n    window.cancelAnimationFrame(this.frameId);\n\n    PANOLENS.Panorama.prototype.onLeave.call(this);\n  };\n\n  PANOLENS.LittlePlanet.prototype.onWindowResize = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n  };\n\n  PANOLENS.LittlePlanet.prototype.onContextMenu = function () {\n    this.dragging = false;\n  };\n})();(function () {\n  PANOLENS.ImageLittlePlanet = function (source, size, ratio) {\n    PANOLENS.LittlePlanet.call(this, 'image', source, size, ratio);\n  };\n\n  PANOLENS.ImageLittlePlanet.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.LittlePlanet.prototype);\n\n  PANOLENS.ImageLittlePlanet.prototype.constructor = PANOLENS.ImageLittlePlanet;\n\n  PANOLENS.ImageLittlePlanet.prototype.onLoad = function (texture) {\n    this.updateTexture(texture);\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, texture);\n    PANOLENS.LittlePlanet.prototype.onLoad.call(this);\n  };\n\n  PANOLENS.ImageLittlePlanet.prototype.updateTexture = function (texture) {\n    texture.minFilter = texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\n    this.material.uniforms['tDiffuse'].value = texture;\n  };\n})();(function () {\n  PANOLENS.Reticle = function (color, autoSelect, idleImageUrl, dwellImageUrl, dwellTime, dwellSpriteAmount) {\n    color = color || 0xffffff;\n\n    this.autoSelect = autoSelect != undefined ? autoSelect : true;\n\n    this.dwellTime = dwellTime || 1500;\n    this.dwellSpriteAmount = dwellSpriteAmount || 45;\n    this.dwellInterval = this.dwellTime / this.dwellSpriteAmount;\n\n    this.IDLE = 0;\n    this.DWELLING = 1;\n    this.status;\n\n    this.scaleIdle = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0.2, 0.2, 1);\n    this.scaleDwell = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0.8, 1);\n\n    this.textureLoaded = false;\n    this.idleImageUrl = idleImageUrl || PANOLENS.DataImage.ReticleIdle;\n    this.dwellImageUrl = dwellImageUrl || PANOLENS.DataImage.ReticleDwell;\n    this.idleTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n    this.dwellTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"SpriteMaterial\"]({ color: color, depthTest: false }));\n\n    this.currentTile = 0;\n    this.startTime = 0;\n\n    this.visible = false;\n    this.renderOrder = 10;\n    this.timerId;\n\n    this.updateStatus(this.IDLE);\n  };\n\n  PANOLENS.Reticle.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].prototype);\n\n  PANOLENS.Reticle.prototype.constructor = PANOLENS.Reticle;\n\n  PANOLENS.Reticle.prototype.show = function () {\n    this.visible = true;\n  };\n\n  PANOLENS.Reticle.prototype.hide = function () {\n    this.visible = false;\n  };\n\n  PANOLENS.Reticle.prototype.loadTextures = function () {\n    this.idleTexture = PANOLENS.Utils.TextureLoader.load(this.idleImageUrl);\n    this.dwellTexture = PANOLENS.Utils.TextureLoader.load(this.dwellImageUrl);\n\n    this.material.map = this.idleTexture;\n    this.setupDwellSprite(this.dwellTexture);\n    this.textureLoaded = true;\n  };\n\n  PANOLENS.Reticle.prototype.select = function (completeCallback) {\n    if (performance.now() - this.startTime >= this.dwellTime) {\n      this.completeDwelling();\n      completeCallback();\n    } else if (this.autoSelect) {\n      this.updateDwelling(performance.now());\n      this.timerId = window.requestAnimationFrame(this.select.bind(this, completeCallback));\n    }\n  };\n\n  PANOLENS.Reticle.prototype.clearTimer = function () {\n    window.cancelAnimationFrame(this.timerId);\n    this.timerId = null;\n  };\n\n  PANOLENS.Reticle.prototype.setupDwellSprite = function (texture) {\n    texture.wrapS = __WEBPACK_IMPORTED_MODULE_8_three__[\"RepeatWrapping\"];\n    texture.repeat.set(1 / this.dwellSpriteAmount, 1);\n  };\n\n  PANOLENS.Reticle.prototype.updateStatus = function (status) {\n    this.status = status;\n\n    if (status === this.IDLE) {\n      this.scale.copy(this.scaleIdle);\n      this.material.map = this.idleTexture;\n    } else if (status === this.DWELLING) {\n      this.scale.copy(this.scaleDwell);\n      this.material.map = this.dwellTexture;\n    }\n\n    this.currentTile = 0;\n    this.material.map.offset.x = 0;\n  };\n\n  PANOLENS.Reticle.prototype.startDwelling = function (completeCallback) {\n    if (!this.autoSelect) {\n      return;\n    }\n\n    this.startTime = performance.now();\n    this.updateStatus(this.DWELLING);\n    this.select(completeCallback);\n  };\n\n  PANOLENS.Reticle.prototype.updateDwelling = function (time) {\n    var elasped = time - this.startTime;\n\n    if (this.currentTile <= this.dwellSpriteAmount) {\n      this.currentTile = Math.floor(elasped / this.dwellTime * this.dwellSpriteAmount);\n      this.material.map.offset.x = this.currentTile / this.dwellSpriteAmount;\n    } else {\n      this.updateStatus(this.IDLE);\n    }\n  };\n\n  PANOLENS.Reticle.prototype.cancelDwelling = function () {\n    this.clearTimer();\n    this.updateStatus(this.IDLE);\n  };\n\n  PANOLENS.Reticle.prototype.completeDwelling = function () {\n    this.clearTimer();\n    this.updateStatus(this.IDLE);\n  };\n})();(function () {\n  PANOLENS.Tile = function (width, height, widthSegments, heightSegments, forceDirection, forceAxis, forceAngle) {\n    var scope = this;\n\n    this.parameters = {\n      width: width,\n      height: height,\n      widthSegments: widthSegments,\n      heightSegments: heightSegments,\n      forceDirection: forceDirection,\n      forceAxis: forceAxis,\n      forceAngle: forceAngle\n    };\n\n    width = width || 10;\n    height = height || 5;\n    widthSegments = widthSegments || 1;\n    heightSegments = heightSegments || 1;\n    forceDirection = forceDirection || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 0, 1);\n    forceAxis = forceAxis || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n    forceAngle = forceAngle !== undefined ? forceAngle : 0;\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneGeometry\"](width, height, widthSegments, heightSegments), new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ color: 0xffffff, transparent: true }));\n\n    this.bendModifier = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"]();\n\n    this.entity = undefined;\n\n    this.animationDuration = 500;\n    this.animationFadeOut = undefined;\n    this.animationFadeIn = undefined;\n    this.animationTranslation = undefined;\n    this.tweens = {};\n\n    if (forceAngle !== 0) {\n      this.bend(forceDirection, forceAxis, forceAngle);\n    }\n\n    this.originalGeometry = this.geometry.clone();\n  };\n\n  PANOLENS.Tile.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].prototype);\n\n  PANOLENS.Tile.prototype.constructor = PANOLENS.Tile;\n\n  PANOLENS.Tile.prototype.clone = function () {\n    var parameters = this.parameters,\n        tile;\n\n    tile = new PANOLENS.Tile(parameters.width, parameters.height, parameters.widthSegments, parameters.heightSegments, parameters.forceDirection, parameters.forceAxis, parameters.forceAngle);\n\n    tile.setEntity(this.entity);\n    tile.material = this.material.clone();\n\n    return tile;\n  };\n\n  PANOLENS.Tile.prototype.bend = function (direction, axis, angle) {\n    this.bendModifier.set(direction, axis, angle).modify(this.geometry);\n  };\n\n  PANOLENS.Tile.prototype.unbend = function () {\n    var geometry = this.geometry;\n\n    this.geometry = this.originalGeometry;\n    this.originalGeometry = this.geometry.clone();\n\n    geometry.dispose();\n    geometry = null;\n  };\n\n  PANOLENS.Tile.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this;\n    toState = toState || {};\n    duration = duration || this.animationDuration;\n    easing = easing || TWEEN.Easing.Exponential.Out;\n    delay = delay !== undefined ? delay : 0;\n    onStart = onStart || null;\n    onUpdate = onUpdate || null;\n    onComplete = onComplete || null;\n\n    if (!this.tweens[name]) {\n      this.tweens[name] = new TWEEN.Tween(object).to(toState, duration).easing(easing).delay(delay).onStart(onStart).onUpdate(onUpdate).onComplete(onComplete);\n    }\n\n    return this.tweens[name];\n  };\n\n  PANOLENS.Tile.prototype.ripple = function (scale, duration, easing) {\n    scale = scale || 2;\n    duration = duration || 200;\n    easing = easing || TWEEN.Easing.Cubic.Out;\n\n    var scope = this,\n        ripple = this.clone();\n\n    new TWEEN.Tween(ripple.scale).to({ x: scale, y: scale }, duration).easing(easing).start();\n\n    new TWEEN.Tween(ripple.material).to({ opacity: 0 }, duration).easing(easing).onComplete(function () {\n      scope.remove(ripple);\n      ripple.geometry.dispose();\n      ripple.material.dispose();\n    }).start();\n\n    this.add(ripple);\n  };\n\n  PANOLENS.Tile.prototype.setEntity = function (entity) {\n    this.entity = entity;\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.TileGroup = function (tileArray, verticalGap, depthGap, animationDuration, offset) {\n    var scope = this,\n        textureLoader;\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].call(this);\n\n    this.tileArray = tileArray || [];\n    this.offset = offset !== undefined ? offset : 0;\n    this.v_gap = verticalGap !== undefined ? verticalGap : 6;\n    this.d_gap = depthGap !== undefined ? depthGap : 2;\n    this.animationDuration = animationDuration !== undefined ? animationDuration : 200;\n    this.animationEasing = TWEEN.Easing.Exponential.Out;\n    this.visibleDelta = 2;\n\n    this.tileArray.map(function (tile, index) {\n      if (tile.image) {\n        PANOLENS.Utils.TextureLoader.load(tile.image, scope.setTexture.bind(tile));\n      }\n\n      tile.position.set(0, index * -scope.v_gap, index * -scope.d_gap);\n      tile.originalPosition = tile.position.clone();\n      tile.setEntity(scope);\n      scope.add(tile);\n    });\n\n    this.updateVisbility();\n  };\n\n  PANOLENS.TileGroup.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype);\n\n  PANOLENS.TileGroup.prototype.constructor = PANOLENS.TileGroup;\n\n  PANOLENS.TileGroup.prototype.updateTexture = function (imageArray) {\n    var scope = this;\n\n    imageArray = imageArray || [];\n    this.children.map(function (child, index) {\n      if (child instanceof PANOLENS.Tile && imageArray[index]) {\n        PANOLENS.Utils.TextureLoader.load(imageArray[index], scope.setTexture.bind(child));\n        if (child.outline) {\n          child.outline.material.visible = true;\n        }\n      }\n    });\n  };\n\n  PANOLENS.TileGroup.prototype.updateAllTexture = function (imageArray) {\n    this.updateTexture(imageArray);\n\n    if (imageArray.length < this.children.length) {\n      for (var i = imageArray.length; i < this.children.length; i++) {\n        if (this.children[i] instanceof PANOLENS.Tile) {\n          this.children[i].material.visible = false;\n          if (this.children[i].outline) {\n            this.children[i].outline.material.visible = false;\n          }\n        }\n      }\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.setTexture = function (texture) {\n    texture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    this.material.visible = true;\n    this.material.map = texture;\n    this.material.needsUpdate = true;\n  };\n\n  PANOLENS.TileGroup.prototype.updateVisbility = function () {\n    this.children[this.offset].visible = true;\n    new TWEEN.Tween(this.children[this.offset].material).to({ opacity: 1 }, this.animationDuration).easing(this.animationEasing).start();\n\n    if (this.children[this.offset].outline) {\n      this.children[this.offset].outline.visible = true;\n    }\n\n    for (var i = this.offset - 1; i >= 0; i--) {\n      if (this.tileArray.indexOf(this.children[i]) === -1) {\n        continue;\n      }\n\n      if (this.offset - i <= this.visibleDelta) {\n        this.children[i].visible = true;\n        new TWEEN.Tween(this.children[i].material).to({ opacity: 1 / (this.offset - i) * 0.5 }, this.animationDuration).easing(this.animationEasing).start();\n      } else {\n        this.children[i].visible = false;\n      }\n\n      this.children[i].outline && (this.children[i].outline.visible = false);\n    }\n\n    for (var i = this.offset + 1; i < this.children.length; i++) {\n      if (this.tileArray.indexOf(this.children[i]) === -1) {\n        continue;\n      }\n\n      if (i - this.offset <= this.visibleDelta) {\n        this.children[i].visible = true;\n        new TWEEN.Tween(this.children[i].material).to({ opacity: 1 / (i - this.offset) * 0.5 }, this.animationDuration).easing(this.animationEasing).start();\n      } else {\n        this.children[i].visible = false;\n      }\n\n      this.children[i].outline && (this.children[i].outline.visible = false);\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.scrollUp = function (duration) {\n    var tiles = this.tileArray,\n        offset;\n\n    duration = duration !== undefined ? duration : this.animationDuration;\n\n    offset = this.offset + 1;\n\n    if (this.offset < tiles.length - 1 && tiles[this.offset + 1].material.visible) {\n      for (var i = tiles.length - 1; i >= 0; i--) {\n        new TWEEN.Tween(tiles[i].position).to({ y: (i - offset) * -this.v_gap,\n          z: Math.abs(i - offset) * -this.d_gap }, duration).easing(this.animationEasing).start();\n      }\n\n      this.offset++;\n      this.updateVisbility();\n      this.dispatchEvent({ type: 'scroll', direction: 'up' });\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.scrollDown = function (duration) {\n    var tiles = this.tileArray,\n        offset;\n\n    duration = duration !== undefined ? duration : this.animationDuration;\n\n    offset = this.offset - 1;\n\n    if (this.offset > 0 && tiles[this.offset - 1].material.visible) {\n      for (var i = 0; i < tiles.length; i++) {\n        new TWEEN.Tween(tiles[i].position).to({ y: (i - offset) * -this.v_gap,\n          z: Math.abs(i - offset) * -this.d_gap }, duration).easing(this.animationEasing).start();\n      }\n\n      this.offset--;\n      this.updateVisbility();\n      this.dispatchEvent({ type: 'scroll', direction: 'down' });\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.reset = function () {\n    this.tileArray.map(function (child, index) {\n      child.position.copy(child.originalPosition);\n    });\n\n    this.offset = 0;\n    this.updateVisbility();\n  };\n\n  PANOLENS.TileGroup.prototype.getIndex = function () {\n    return this.offset;\n  };\n\n  PANOLENS.TileGroup.prototype.getTileCount = function () {\n    var count = 0;\n\n    this.tileArray.map(function (tile) {\n      if (tile.material.visible) {\n        count++;\n      }\n    });\n\n    return count;\n  };\n})();(function () {\n  'use strict';\n\n  var sharedFont, sharedTexture;\n  var pendingQueue = [];\n\n  PANOLENS.SpriteText = function (text, maxWidth, color, opacity, options) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].call(this);\n\n    this.text = text || '';\n    this.maxWidth = maxWidth || 2000;\n    this.color = color || 0xffffff;\n    this.opacity = opacity !== undefined ? opacity : 1;\n    this.options = options || {};\n\n    this.animationDuration = 500;\n    this.animationFadeOut = undefined;\n    this.animationFadeIn = undefined;\n    this.tweens = {};\n\n    this.addText(text);\n  };\n\n  PANOLENS.SpriteText.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype);\n\n  PANOLENS.SpriteText.prototype.constructor = PANOLENS.SpriteText;\n\n  PANOLENS.SpriteText.prototype.generateTextGeometry = function () {};\n  PANOLENS.SpriteText.prototype.generateSDFShader = function () {};\n\n  PANOLENS.SpriteText.prototype.setBMFont = function (callback, font, texture) {\n    texture.needsUpdate = true;\n    texture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearMipMapLinearFilter\"];\n    texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    texture.generateMipmaps = true;\n    texture.anisotropy = 8;\n\n    sharedFont = font;\n    sharedTexture = texture;\n\n    for (var i = pendingQueue.length - 1; i >= 0; i--) {\n      pendingQueue[i].target.addText(pendingQueue[i].text);\n    }\n\n    while (pendingQueue.length > 0) {\n      pendingQueue.pop();\n    }\n\n    callback && callback();\n  };\n\n  PANOLENS.SpriteText.prototype.addText = function (text) {\n    if (!sharedFont || !sharedTexture) {\n      pendingQueue.push({ target: this, text: text });\n      return;\n    }\n\n    var textAnchor = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"]();\n\n    this.options.text = text;\n    this.options.font = sharedFont;\n    this.options.width = this.maxWidth;\n\n    var geometry = this.generateTextGeometry(this.options);\n    geometry.computeBoundingBox();\n    geometry.computeBoundingSphere();\n\n    var material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"RawShaderMaterial\"](this.generateSDFShader({\n      map: sharedTexture,\n      side: __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"],\n      transparent: true,\n      color: this.color,\n      opacity: this.opacity\n    }));\n\n    var layout = geometry.layout;\n    var textMesh = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"](geometry, material);\n\n    textMesh.entity = this;\n    textMesh.position.x = -layout.width / 2;\n    textMesh.position.y = layout.height * 1.035;\n\n    textAnchor.scale.x = textAnchor.scale.y = -0.05;\n    textAnchor.add(textMesh);\n\n    this.mesh = textMesh;\n    this.add(textAnchor);\n  };\n\n  PANOLENS.SpriteText.prototype.update = function (options) {\n    var mesh;\n\n    options = options || {};\n\n    mesh = this.mesh;\n\n    mesh.geometry.update(options);\n    mesh.position.x = -mesh.geometry.layout.width / 2;\n    mesh.position.y = mesh.geometry.layout.height * 1.035;\n  };\n\n  PANOLENS.SpriteText.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this;\n    toState = toState || {};\n    duration = duration || this.animationDuration;\n    easing = easing || TWEEN.Easing.Exponential.Out;\n    delay = delay !== undefined ? delay : 0;\n    onStart = onStart || null;\n    onUpdate = onUpdate || null;\n    onComplete = onComplete || null;\n\n    if (!this.tweens[name]) {\n      this.tweens[name] = new TWEEN.Tween(object).to(toState, duration).easing(easing).delay(delay).onStart(onStart).onUpdate(onUpdate).onComplete(onComplete);\n    }\n\n    return this.tweens[name];\n  };\n\n  PANOLENS.SpriteText.prototype.getLayout = function () {\n    return this.mesh && this.mesh.geometry && this.mesh.geometry.layout || {};\n  };\n\n  PANOLENS.SpriteText.prototype.setEntity = function (entity) {\n    this.entity = entity;\n  };\n})();(function () {\n  PANOLENS.Widget = function (container) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].call(this);\n\n    this.DEFAULT_TRANSITION = 'all 0.27s ease';\n    this.TOUCH_ENABLED = PANOLENS.Utils.checkTouchSupported();\n    this.PREVENT_EVENT_HANDLER = function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    };\n\n    this.container = container;\n\n    this.barElement;\n    this.fullscreenElement;\n    this.videoElement;\n    this.settingElement;\n\n    this.mainMenu;\n\n    this.activeMainItem;\n    this.activeSubMenu;\n    this.mask;\n  };\n\n  PANOLENS.Widget.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n\n  PANOLENS.Widget.prototype.constructor = PANOLENS.Widget;\n\n  PANOLENS.Widget.prototype.addControlBar = function () {\n    if (!this.container) {\n      console.warn('Widget container not set');\n      return;\n    }\n\n    var scope = this,\n        bar,\n        styleTranslate,\n        styleOpacity,\n        gradientStyle;\n\n    gradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))';\n\n    bar = document.createElement('div');\n    bar.style.width = '100%';\n    bar.style.height = '44px';\n    bar.style.float = 'left';\n    bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)';\n    bar.style.background = '-webkit-' + gradientStyle;\n    bar.style.background = '-moz-' + gradientStyle;\n    bar.style.background = '-o-' + gradientStyle;\n    bar.style.background = '-ms-' + gradientStyle;\n    bar.style.background = gradientStyle;\n    bar.style.transition = this.DEFAULT_TRANSITION;\n    bar.style.pointerEvents = 'none';\n    bar.isHidden = false;\n    bar.toggle = function () {\n      bar.isHidden = !bar.isHidden;\n      styleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)';\n      styleOpacity = bar.isHidden ? 0 : 1;\n      bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate;\n      bar.style.opacity = styleOpacity;\n    };\n\n    var menu = this.createDefaultMenu();\n    this.mainMenu = this.createMainMenu(menu);\n    bar.appendChild(this.mainMenu);\n\n    var mask = this.createMask();\n    this.mask = mask;\n    this.container.appendChild(mask);\n\n    bar.dispose = function () {\n      if (scope.fullscreenElement) {\n        bar.removeChild(scope.fullscreenElement);\n        scope.fullscreenElement.dispose();\n        scope.fullscreenElement = null;\n      }\n\n      if (scope.settingElement) {\n        bar.removeChild(scope.settingElement);\n        scope.settingElement.dispose();\n        scope.settingElement = null;\n      }\n\n      if (scope.videoElement) {\n        bar.removeChild(scope.videoElement);\n        scope.videoElement.dispose();\n        scope.videoElement = null;\n      }\n    };\n\n    this.container.appendChild(bar);\n\n    this.mask.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true);\n    this.mask.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true);\n    this.mask.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true);\n    this.mask.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.mask.hide();\n      scope.settingElement.deactivate();\n    }, false);\n\n    this.addEventListener('control-bar-toggle', bar.toggle);\n\n    this.barElement = bar;\n  };\n\n  PANOLENS.Widget.prototype.createDefaultMenu = function () {\n    var scope = this,\n        handler;\n\n    handler = function handler(method, data) {\n      return function () {\n        scope.dispatchEvent({\n\n          type: 'panolens-viewer-handler',\n          method: method,\n          data: data\n\n        });\n      };\n    };\n\n    return [{\n      title: 'Control',\n      subMenu: [{\n        title: this.TOUCH_ENABLED ? 'Touch' : 'Mouse',\n        handler: handler('enableControl', PANOLENS.Controls.ORBIT)\n      }, {\n        title: 'Sensor',\n        handler: handler('enableControl', PANOLENS.Controls.DEVICEORIENTATION)\n      }]\n    }, {\n      title: 'Mode',\n      subMenu: [{\n        title: 'Normal',\n        handler: handler('disableEffect')\n      }, {\n        title: 'Cardboard',\n        handler: handler('enableEffect', PANOLENS.Modes.CARDBOARD)\n      }, {\n        title: 'Stereoscopic',\n        handler: handler('enableEffect', PANOLENS.Modes.STEREO)\n      }]\n    }];\n  };\n\n  PANOLENS.Widget.prototype.addControlButton = function (name) {\n    var element;\n\n    switch (name) {\n      case 'fullscreen':\n\n        element = this.createFullscreenButton();\n        this.fullscreenElement = element;\n\n        break;\n\n      case 'setting':\n\n        element = this.createSettingButton();\n        this.settingElement = element;\n\n        break;\n\n      case 'video':\n\n        element = this.createVideoControl();\n        this.videoElement = element;\n\n        break;\n\n      default:\n\n        return;\n    }\n\n    if (!element) {\n      return;\n    }\n\n    this.barElement.appendChild(element);\n  };\n\n  PANOLENS.Widget.prototype.createMask = function () {\n    var element = document.createElement('div');\n    element.style.position = 'absolute';\n    element.style.top = 0;\n    element.style.left = 0;\n    element.style.width = '100%';\n    element.style.height = '100%';\n    element.style.background = 'transparent';\n    element.style.display = 'none';\n\n    element.show = function () {\n      this.style.display = 'block';\n    };\n\n    element.hide = function () {\n      this.style.display = 'none';\n    };\n\n    return element;\n  };\n\n  PANOLENS.Widget.prototype.createSettingButton = function () {\n    var scope = this,\n        item;\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.mainMenu.toggle();\n\n      if (this.activated) {\n        this.deactivate();\n      } else {\n        this.activate();\n      }\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.Setting + '\")',\n        webkitTransition: this.DEFAULT_TRANSITION,\n        transition: this.DEFAULT_TRANSITION\n\n      },\n\n      onTap: onTap\n\n    });\n\n    item.activate = function () {\n      this.style.transform = 'rotate3d(0,0,1,90deg)';\n      this.activated = true;\n      scope.mask.show();\n    };\n\n    item.deactivate = function () {\n      this.style.transform = 'rotate3d(0,0,0,0)';\n      this.activated = false;\n      scope.mask.hide();\n\n      if (scope.mainMenu && scope.mainMenu.visible) {\n        scope.mainMenu.hide();\n      }\n\n      if (scope.activeSubMenu && scope.activeSubMenu.visible) {\n        scope.activeSubMenu.hide();\n      }\n\n      if (scope.mainMenu && scope.mainMenu._width) {\n        scope.mainMenu.changeSize(scope.mainMenu._width);\n        scope.mainMenu.unslideAll();\n      }\n    };\n\n    item.activated = false;\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createFullscreenButton = function () {\n    var scope = this,\n        item,\n        isFullscreen = false,\n        tapSkipped = true,\n        stylesheetId;\n\n    stylesheetId = 'panolens-style-addon';\n\n    if (!document.fullscreenEnabled && !document.webkitFullscreenEnabled && !document.mozFullScreenEnabled && !document.msFullscreenEnabled) {\n      return;\n    }\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      tapSkipped = false;\n\n      if (!isFullscreen) {\n        scope.container.requestFullscreen && scope.container.requestFullscreen();\n        scope.container.msRequestFullscreen && scope.container.msRequestFullscreen();\n        scope.container.mozRequestFullScreen && scope.container.mozRequestFullScreen();\n        scope.container.webkitRequestFullscreen && scope.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        isFullscreen = true;\n      } else {\n        document.exitFullscreen && document.exitFullscreen();\n        document.msExitFullscreen && document.msExitFullscreen();\n        document.mozCancelFullScreen && document.mozCancelFullScreen();\n        document.webkitExitFullscreen && document.webkitExitFullscreen();\n        isFullscreen = false;\n      }\n\n      this.style.backgroundImage = isFullscreen ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n    }\n\n    function onFullScreenChange(e) {\n      if (tapSkipped) {\n        isFullscreen = !isFullscreen;\n\n        item.style.backgroundImage = isFullscreen ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n      }\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onWindowResize', data: false });\n\n      tapSkipped = true;\n    }\n\n    document.addEventListener('fullscreenchange', onFullScreenChange, false);\n    document.addEventListener('webkitfullscreenchange', onFullScreenChange, false);\n    document.addEventListener('mozfullscreenchange', onFullScreenChange, false);\n    document.addEventListener('MSFullscreenChange', onFullScreenChange, false);\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n\n      },\n\n      onTap: onTap\n\n    });\n\n    if (!document.querySelector(stylesheetId)) {\n      var sheet = document.createElement('style');\n      sheet.id = stylesheetId;\n      sheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }';\n      document.body.appendChild(sheet);\n    }\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createVideoControl = function () {\n    var item;\n\n    item = document.createElement('span');\n    item.style.display = 'none';\n    item.show = function () {\n      item.style.display = '';\n    };\n\n    item.hide = function () {\n      item.style.display = 'none';\n      item.controlButton.paused = true;\n      item.controlButton.update();\n    };\n\n    item.controlButton = this.createVideoControlButton();\n    item.seekBar = this.createVideoControlSeekbar();\n\n    item.appendChild(item.controlButton);\n    item.appendChild(item.seekBar);\n\n    item.dispose = function () {\n      item.removeChild(item.controlButton);\n      item.removeChild(item.seekBar);\n\n      item.controlButton.dispose();\n      item.controlButton = null;\n\n      item.seekBar.dispose();\n      item.seekBar = null;\n    };\n\n    this.addEventListener('video-control-show', item.show);\n    this.addEventListener('video-control-hide', item.hide);\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createVideoControlButton = function () {\n    var scope = this,\n        item;\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused });\n\n      this.paused = !this.paused;\n\n      item.update();\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.VideoPlay + '\")'\n\n      },\n\n      onTap: onTap\n\n    });\n\n    item.paused = true;\n\n    item.update = function (paused) {\n      this.paused = paused !== undefined ? paused : this.paused;\n\n      this.style.backgroundImage = 'url(\"' + (this.paused ? PANOLENS.DataImage.VideoPlay : PANOLENS.DataImage.VideoPause) + '\")';\n    };\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createVideoControlSeekbar = function () {\n    var scope = this,\n        item,\n        progressElement,\n        progressElementControl,\n        isDragging = false,\n        mouseX,\n        percentageNow,\n        percentageNext;\n\n    progressElement = document.createElement('div');\n    progressElement.style.width = '0%';\n    progressElement.style.height = '100%';\n    progressElement.style.backgroundColor = '#fff';\n\n    progressElementControl = document.createElement('div');\n    progressElementControl.style.float = 'right';\n    progressElementControl.style.width = '14px';\n    progressElementControl.style.height = '14px';\n    progressElementControl.style.transform = 'translate(7px, -5px)';\n    progressElementControl.style.borderRadius = '50%';\n    progressElementControl.style.backgroundColor = '#ddd';\n\n    progressElementControl.addEventListener('mousedown', onMouseDown, false);\n    progressElementControl.addEventListener('touchstart', onMouseDown, false);\n\n    function onMouseDown(event) {\n      event.stopPropagation();\n\n      isDragging = true;\n\n      mouseX = event.clientX || event.changedTouches && event.changedTouches[0].clientX;\n\n      percentageNow = parseInt(progressElement.style.width) / 100;\n\n      addControlListeners();\n    }\n\n    function onVideoControlDrag(event) {\n      var clientX;\n\n      if (isDragging) {\n        clientX = event.clientX || event.changedTouches && event.changedTouches[0].clientX;\n\n        percentageNext = (clientX - mouseX) / item.clientWidth;\n\n        percentageNext = percentageNow + percentageNext;\n\n        percentageNext = percentageNext > 1 ? 1 : percentageNext < 0 ? 0 : percentageNext;\n\n        item.setProgress(percentageNext);\n\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext });\n      }\n    }\n\n    function onVideoControlStop(event) {\n      event.stopPropagation();\n\n      isDragging = false;\n\n      removeControlListeners();\n    }\n\n    function addControlListeners() {\n      scope.container.addEventListener('mousemove', onVideoControlDrag, false);\n      scope.container.addEventListener('mouseup', onVideoControlStop, false);\n      scope.container.addEventListener('touchmove', onVideoControlDrag, false);\n      scope.container.addEventListener('touchend', onVideoControlStop, false);\n    }\n\n    function removeControlListeners() {\n      scope.container.removeEventListener('mousemove', onVideoControlDrag, false);\n      scope.container.removeEventListener('mouseup', onVideoControlStop, false);\n      scope.container.removeEventListener('touchmove', onVideoControlDrag, false);\n      scope.container.removeEventListener('touchend', onVideoControlStop, false);\n    }\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      var percentage;\n\n      if (event.target === progressElementControl) {\n        return;\n      }\n\n      percentage = event.changedTouches && event.changedTouches.length > 0 ? (event.changedTouches[0].pageX - event.target.getBoundingClientRect().left) / this.clientWidth : event.offsetX / this.clientWidth;\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage });\n\n      item.setProgress(event.offsetX / this.clientWidth);\n    }\n\n    function onDispose() {\n      removeControlListeners();\n      progressElement = null;\n      progressElementControl = null;\n    }\n\n    progressElement.appendChild(progressElementControl);\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        width: '30%',\n        height: '4px',\n        marginTop: '20px',\n        backgroundColor: 'rgba(188,188,188,0.8)'\n\n      },\n\n      onTap: onTap,\n      onDispose: onDispose\n\n    });\n\n    item.appendChild(progressElement);\n\n    item.setProgress = function (percentage) {\n      progressElement.style.width = percentage * 100 + '%';\n    };\n\n    this.addEventListener('video-update', function (event) {\n      item.setProgress(event.percentage);\n    });\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createMenuItem = function (title) {\n    var scope = this,\n        item = document.createElement('a');\n    item.textContent = title;\n    item.style.display = 'block';\n    item.style.padding = '10px';\n    item.style.textDecoration = 'none';\n    item.style.cursor = 'pointer';\n    item.style.pointerEvents = 'auto';\n    item.style.transition = this.DEFAULT_TRANSITION;\n\n    item.slide = function (right) {\n      this.style.transform = 'translateX(' + (right ? '' : '-') + '100%)';\n    };\n\n    item.unslide = function () {\n      this.style.transform = 'translateX(0)';\n    };\n\n    item.setIcon = function (url) {\n      if (this.icon) {\n        this.icon.style.backgroundImage = 'url(' + url + ')';\n      }\n    };\n\n    item.setSelectionTitle = function (title) {\n      if (this.selection) {\n        this.selection.textContent = title;\n      }\n    };\n\n    item.addSelection = function (name) {\n      var selection = document.createElement('span');\n      selection.style.fontSize = '13px';\n      selection.style.fontWeight = '300';\n      selection.style.float = 'right';\n\n      this.selection = selection;\n      this.setSelectionTitle(name);\n      this.appendChild(selection);\n\n      return this;\n    };\n\n    item.addIcon = function (url, left, flip) {\n      url = url || PANOLENS.DataImage.ChevronRight;\n      left = left || false;\n      flip = flip || false;\n\n      var element = document.createElement('span');\n      element.style.float = left ? 'left' : 'right';\n      element.style.width = '17px';\n      element.style.height = '17px';\n      element.style['margin' + (left ? 'Right' : 'Left')] = '12px';\n      element.style.backgroundSize = 'cover';\n\n      if (flip) {\n        element.style.transform = 'rotateZ(180deg)';\n      }\n\n      this.icon = element;\n      this.setIcon(url);\n      this.appendChild(element);\n\n      return this;\n    };\n\n    item.addSubMenu = function (title, items) {\n      this.subMenu = scope.createSubMenu(title, items);\n\n      return this;\n    };\n\n    item.addEventListener('mouseenter', function () {\n      this.style.backgroundColor = '#e0e0e0';\n    }, false);\n\n    item.addEventListener('mouseleave', function () {\n      this.style.backgroundColor = '#fafafa';\n    }, false);\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createMenuItemHeader = function (title) {\n    var header = this.createMenuItem(title);\n\n    header.style.borderBottom = '1px solid #333';\n    header.style.paddingBottom = '15px';\n\n    return header;\n  };\n\n  PANOLENS.Widget.prototype.createMainMenu = function (menus) {\n    var scope = this,\n        menu = this.createMenu(),\n        subMenu;\n\n    menu._width = 200;\n    menu.changeSize(menu._width);\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      var mainMenu = scope.mainMenu,\n          subMenu = this.subMenu;\n\n      function onNextTick() {\n        mainMenu.changeSize(subMenu.clientWidth);\n        subMenu.show();\n        subMenu.unslideAll();\n      }\n\n      mainMenu.hide();\n      mainMenu.slideAll();\n      mainMenu.parentElement.appendChild(subMenu);\n\n      scope.activeMainItem = this;\n      scope.activeSubMenu = subMenu;\n\n      window.requestAnimationFrame(onNextTick);\n    }\n\n    for (var i = 0; i < menus.length; i++) {\n      var item = menu.addItem(menus[i].title);\n\n      item.style.paddingLeft = '20px';\n\n      item.addIcon().addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n      if (menus[i].subMenu && menus[i].subMenu.length > 0) {\n        var title = menus[i].subMenu[0].title;\n\n        item.addSelection(title).addSubMenu(menus[i].title, menus[i].subMenu);\n      }\n    }\n\n    return menu;\n  };\n\n  PANOLENS.Widget.prototype.createSubMenu = function (title, items) {\n    var scope = this,\n        menu,\n        subMenu = this.createMenu();\n\n    subMenu.items = items;\n    subMenu.activeItem;\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      menu = scope.mainMenu;\n      menu.changeSize(menu._width);\n      menu.unslideAll();\n      menu.show();\n      subMenu.slideAll(true);\n      subMenu.hide();\n\n      if (this.type !== 'header') {\n        subMenu.setActiveItem(this);\n        scope.activeMainItem.setSelectionTitle(this.textContent);\n\n        this.handler && this.handler();\n      }\n    }\n\n    subMenu.addHeader(title).addIcon(undefined, true, true).addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n    for (var i = 0; i < items.length; i++) {\n      var item = subMenu.addItem(items[i].title);\n\n      item.style.fontWeight = 300;\n      item.handler = items[i].handler;\n      item.addIcon(' ', true);\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n      if (!subMenu.activeItem) {\n        subMenu.setActiveItem(item);\n      }\n    }\n\n    subMenu.slideAll(true);\n\n    return subMenu;\n  };\n\n  PANOLENS.Widget.prototype.createMenu = function () {\n    var scope = this,\n        menu = document.createElement('span'),\n        style;\n\n    style = menu.style;\n\n    style.padding = '5px 0';\n    style.position = 'fixed';\n    style.bottom = '100%';\n    style.right = '14px';\n    style.backgroundColor = '#fafafa';\n    style.fontFamily = 'Helvetica Neue';\n    style.fontSize = '14px';\n    style.visibility = 'hidden';\n    style.opacity = 0;\n    style.boxShadow = '0 0 12pt rgba(0,0,0,0.25)';\n    style.borderRadius = '2px';\n    style.overflow = 'hidden';\n    style.willChange = 'width, height, opacity';\n    style.pointerEvents = 'auto';\n    style.transition = this.DEFAULT_TRANSITION;\n\n    menu.visible = false;\n\n    menu.changeSize = function (width, height) {\n      if (width) {\n        this.style.width = width + 'px';\n      }\n\n      if (height) {\n        this.style.height = height + 'px';\n      }\n    };\n\n    menu.show = function () {\n      this.style.opacity = 1;\n      this.style.visibility = 'visible';\n      this.visible = true;\n    };\n\n    menu.hide = function () {\n      this.style.opacity = 0;\n      this.style.visibility = 'hidden';\n      this.visible = false;\n    };\n\n    menu.toggle = function () {\n      if (this.visible) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    };\n\n    menu.slideAll = function (right) {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[i].slide) {\n          menu.children[i].slide(right);\n        }\n      }\n    };\n\n    menu.unslideAll = function () {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[i].unslide) {\n          menu.children[i].unslide();\n        }\n      }\n    };\n\n    menu.addHeader = function (title) {\n      var header = scope.createMenuItemHeader(title);\n      header.type = 'header';\n\n      this.appendChild(header);\n\n      return header;\n    };\n\n    menu.addItem = function (title) {\n      var item = scope.createMenuItem(title);\n      item.type = 'item';\n\n      this.appendChild(item);\n\n      return item;\n    };\n\n    menu.setActiveItem = function (item) {\n      if (this.activeItem) {\n        this.activeItem.setIcon(' ');\n      }\n\n      item.setIcon(PANOLENS.DataImage.Check);\n\n      this.activeItem = item;\n    };\n\n    menu.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true);\n    menu.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true);\n    menu.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true);\n\n    return menu;\n  };\n\n  PANOLENS.Widget.prototype.createCustomItem = function (options) {\n    options = options || {};\n\n    var scope = this,\n        item = options.element || document.createElement('span');\n\n    item.style.cursor = 'pointer';\n    item.style.float = 'right';\n    item.style.width = '44px';\n    item.style.height = '100%';\n    item.style.backgroundSize = '60%';\n    item.style.backgroundRepeat = 'no-repeat';\n    item.style.backgroundPosition = 'center';\n    item.style.webkitUserSelect = item.style.MozUserSelect = item.style.userSelect = 'none';\n    item.style.position = 'relative';\n    item.style.pointerEvents = 'auto';\n\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function () {\n      item.style.filter = item.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))';\n    });\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function () {\n      item.style.filter = item.style.webkitFilter = '';\n    });\n\n    item = this.mergeStyleOptions(item, options.style);\n\n    if (options.onTap) {\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false);\n    }\n\n    item.dispose = function () {\n      item.removeEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false);\n\n      options.onDispose && options.onDispose();\n    };\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.mergeStyleOptions = function (element, options) {\n    options = options || {};\n\n    for (var property in options) {\n      if (options.hasOwnProperty(property)) {\n        element.style[property] = options[property];\n      }\n    }\n\n    return element;\n  };\n\n  PANOLENS.Widget.prototype.dispose = function () {\n    if (this.barElement) {\n      this.container.removeChild(this.barElement);\n      this.barElement.dispose();\n      this.barElement = null;\n    }\n  };\n})();(function () {\n  PANOLENS.Infospot = function (scale, imageSrc, animated) {\n    var scope = this,\n        ratio,\n        startScale,\n        endScale,\n        duration;\n\n    scale = scale || 300;\n    imageSrc = imageSrc || PANOLENS.DataImage.Info;\n    duration = 500;\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].call(this);\n\n    this.type = 'infospot';\n\n    this.animated = animated !== undefined ? animated : true;\n    this.isHovering = false;\n    this.visible = false;\n\n    this.element;\n    this.toPanorama;\n    this.cursorStyle;\n\n    this.mode = PANOLENS.Modes.UNKNOWN;\n\n    this.scale.set(scale, scale, 1);\n    this.rotation.y = Math.PI;\n    this.scaleFactor = 1.3;\n\n    this.container;\n\n    this.HANDLER_FOCUS;\n\n    PANOLENS.Utils.TextureLoader.load(imageSrc, postLoad);\n\n    function postLoad(texture) {\n      texture.wrapS = __WEBPACK_IMPORTED_MODULE_8_three__[\"RepeatWrapping\"];\n      texture.repeat.x = -1;\n\n      texture.image.width = texture.image.naturalWidth || 64;\n      texture.image.height = texture.image.naturalHeight || 64;\n\n      ratio = texture.image.width / texture.image.height;\n      scope.scale.set(ratio * scale, scale, 1);\n\n      startScale = scope.scale.clone();\n\n      scope.scaleUpAnimation = new TWEEN.Tween(scope.scale).to({ x: startScale.x * scope.scaleFactor, y: startScale.y * scope.scaleFactor }, duration).easing(TWEEN.Easing.Elastic.Out);\n\n      scope.scaleDownAnimation = new TWEEN.Tween(scope.scale).to({ x: startScale.x, y: startScale.y }, duration).easing(TWEEN.Easing.Elastic.Out);\n\n      scope.material.side = __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"];\n      scope.material.map = texture;\n      scope.material.depthTest = false;\n      scope.material.needsUpdate = true;\n    }\n\n    function show() {\n      this.visible = true;\n    }\n\n    function hide() {\n      this.visible = false;\n    }\n\n    this.showAnimation = new TWEEN.Tween(this.material).to({ opacity: 1 }, duration).onStart(show.bind(this)).easing(TWEEN.Easing.Quartic.Out);\n\n    this.hideAnimation = new TWEEN.Tween(this.material).to({ opacity: 0 }, duration).onComplete(hide.bind(this)).easing(TWEEN.Easing.Quartic.Out);\n\n    this.addEventListener('click', this.onClick);\n    this.addEventListener('hover', this.onHover);\n    this.addEventListener('hoverenter', this.onHoverStart);\n    this.addEventListener('hoverleave', this.onHoverEnd);\n    this.addEventListener('panolens-dual-eye-effect', this.onDualEyeEffect);\n    this.addEventListener('panolens-container', this.setContainer.bind(this));\n    this.addEventListener('dismiss', this.onDismiss);\n    this.addEventListener('panolens-infospot-focus', this.setFocusMethod);\n  };\n\n  PANOLENS.Infospot.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].prototype);\n\n  PANOLENS.Infospot.prototype.setContainer = function (data) {\n    var container;\n\n    if (data instanceof HTMLElement) {\n      container = data;\n    } else if (data && data.container) {\n      container = data.container;\n    }\n\n    if (container && this.element) {\n      container.appendChild(this.element);\n    }\n\n    this.container = container;\n  };\n\n  PANOLENS.Infospot.prototype.getContainer = function () {\n    return this.container;\n  };\n\n  PANOLENS.Infospot.prototype.onClick = function (event) {\n    if (this.element && this.getContainer()) {\n      this.onHoverStart(event);\n\n      this.lockHoverElement();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onDismiss = function (event) {\n    if (this.element) {\n      this.unlockHoverElement();\n      this.onHoverEnd();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onHover = function (event) {};\n\n  PANOLENS.Infospot.prototype.onHoverStart = function (event) {\n    if (!this.getContainer()) {\n      return;\n    }\n\n    var cursorStyle = this.cursorStyle || (this.mode === PANOLENS.Modes.NORMAL ? 'pointer' : 'default');\n\n    this.isHovering = true;\n    this.container.style.cursor = cursorStyle;\n\n    if (this.animated) {\n      this.scaleDownAnimation && this.scaleDownAnimation.stop();\n      this.scaleUpAnimation && this.scaleUpAnimation.start();\n    }\n\n    if (this.element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0) {\n      if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n        this.element.style.display = 'none';\n        this.element.left && (this.element.left.style.display = 'block');\n        this.element.right && (this.element.right.style.display = 'block');\n\n        this.element._width = this.element.left.clientWidth;\n        this.element._height = this.element.left.clientHeight;\n      } else {\n        this.element.style.display = 'block';\n        this.element.left && (this.element.left.style.display = 'none');\n        this.element.right && (this.element.right.style.display = 'none');\n\n        this.element._width = this.element.clientWidth;\n        this.element._height = this.element.clientHeight;\n      }\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onHoverEnd = function () {\n    if (!this.getContainer()) {\n      return;\n    }\n\n    this.isHovering = false;\n    this.container.style.cursor = 'default';\n\n    if (this.animated) {\n      this.scaleUpAnimation && this.scaleUpAnimation.stop();\n      this.scaleDownAnimation && this.scaleDownAnimation.start();\n    }\n\n    if (this.element && !this.element.locked) {\n      this.element.style.display = 'none';\n      this.element.left && (this.element.left.style.display = 'none');\n      this.element.right && (this.element.right.style.display = 'none');\n\n      this.unlockHoverElement();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onDualEyeEffect = function (event) {\n    if (!this.getContainer()) {\n      return;\n    }\n\n    var element, halfWidth, halfHeight;\n\n    this.mode = event.mode;\n\n    element = this.element;\n\n    halfWidth = this.container.clientWidth / 2;\n    halfHeight = this.container.clientHeight / 2;\n\n    if (!element) {\n      return;\n    }\n\n    if (!element.left || !element.right) {\n      element.left = element.cloneNode(true);\n      element.right = element.cloneNode(true);\n    }\n\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      element.left.style.display = element.style.display;\n      element.right.style.display = element.style.display;\n      element.style.display = 'none';\n    } else {\n      element.style.display = element.left.style.display;\n      element.left.style.display = 'none';\n      element.right.style.display = 'none';\n    }\n\n    this.translateElement(halfWidth, halfHeight);\n\n    this.container.appendChild(element.left);\n    this.container.appendChild(element.right);\n  };\n\n  PANOLENS.Infospot.prototype.translateElement = function (x, y) {\n    if (!this.element._width || !this.element._height || !this.getContainer()) {\n      return;\n    }\n\n    var left, top, element, width, height, delta, container;\n\n    container = this.container;\n    element = this.element;\n    width = element._width / 2;\n    height = element._height / 2;\n    delta = element.verticalDelta !== undefined ? element.verticalDelta : 40;\n\n    left = x - width;\n    top = y - height - delta;\n\n    if ((this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) && element.left && element.right && !(x === container.clientWidth / 2 && y === container.clientHeight / 2)) {\n      left = container.clientWidth / 4 - width + (x - container.clientWidth / 2);\n      top = container.clientHeight / 2 - height - delta + (y - container.clientHeight / 2);\n\n      this.setElementStyle('transform', element.left, 'translate(' + left + 'px, ' + top + 'px)');\n\n      left += container.clientWidth / 2;\n\n      this.setElementStyle('transform', element.right, 'translate(' + left + 'px, ' + top + 'px)');\n    } else {\n      this.setElementStyle('transform', element, 'translate(' + left + 'px, ' + top + 'px)');\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setElementStyle = function (type, element, value) {\n    var style = element.style;\n\n    if (type === 'transform') {\n      style.webkitTransform = style.msTransform = style.transform = value;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setText = function (text) {\n    if (this.element) {\n      this.element.textContent = text;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setCursorHoverStyle = function (style) {\n    this.cursorStyle = style;\n  };\n\n  PANOLENS.Infospot.prototype.addHoverText = function (text, delta) {\n    if (!this.element) {\n      this.element = document.createElement('div');\n      this.element.style.display = 'none';\n      this.element.style.color = '#fff';\n      this.element.style.top = 0;\n      this.element.style.maxWidth = '50%';\n      this.element.style.maxHeight = '50%';\n      this.element.style.textShadow = '0 0 3px #000000';\n      this.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif';\n      this.element.style.position = 'absolute';\n      this.element.classList.add('panolens-infospot');\n      this.element.verticalDelta = delta !== undefined ? delta : 40;\n    }\n\n    this.setText(text);\n  };\n\n  PANOLENS.Infospot.prototype.addHoverElement = function (el, delta) {\n    if (!this.element) {\n      this.element = el.cloneNode(true);\n      this.element.style.display = 'none';\n      this.element.style.top = 0;\n      this.element.style.position = 'absolute';\n      this.element.classList.add('panolens-infospot');\n      this.element.verticalDelta = delta !== undefined ? delta : 40;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.removeHoverElement = function () {\n    if (this.element) {\n      if (this.element.left) {\n        this.container.removeChild(this.element.left);\n        this.element.left = null;\n      }\n\n      if (this.element.right) {\n        this.container.removeChild(this.element.right);\n        this.element.right = null;\n      }\n\n      this.container.removeChild(this.element);\n      this.element = null;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.lockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = true;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.unlockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = false;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.show = function (delay) {\n    delay = delay || 0;\n\n    if (this.animated) {\n      this.hideAnimation && this.hideAnimation.stop();\n      this.showAnimation && this.showAnimation.delay(delay).start();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.hide = function (delay) {\n    delay = delay || 0;\n\n    if (this.animated) {\n      this.showAnimation && this.showAnimation.stop();\n      this.hideAnimation && this.hideAnimation.delay(delay).start();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setFocusMethod = function (event) {\n    if (event) {\n      this.HANDLER_FOCUS = event.method;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.focus = function (duration, easing) {\n    if (this.HANDLER_FOCUS) {\n      this.HANDLER_FOCUS(this.position, duration, easing);\n      this.onDismiss();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.dispose = function () {\n    this.removeHoverElement();\n    this.material.dispose();\n\n    if (this.parent) {\n      this.parent.remove(this);\n    }\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Viewer = function (options) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].call(this);\n\n    if (!__WEBPACK_IMPORTED_MODULE_8_three__) {\n      console.error('Three.JS not found');\n\n      return;\n    }\n\n    var container;\n\n    options = options || {};\n    options.controlBar = options.controlBar !== undefined ? options.controlBar : true;\n    options.controlButtons = options.controlButtons || ['fullscreen', 'setting', 'video'];\n    options.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false;\n    options.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true;\n    options.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false;\n    options.clickTolerance = options.clickTolerance || 10;\n    options.cameraFov = options.cameraFov || 60;\n    options.reverseDragging = options.reverseDragging || false;\n    options.enableReticle = options.enableReticle || false;\n    options.dwellTime = options.dwellTime || 1500;\n    options.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true;\n    options.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false;\n    options.indicatorSize = options.indicatorSize || 30;\n    options.output = options.output ? options.output : 'none';\n\n    this.options = options;\n\n    if (options.container) {\n      container = options.container;\n      container._width = container.clientWidth;\n      container._height = container.clientHeight;\n    } else {\n      container = document.createElement('div');\n      container.classList.add('panolens-container');\n      container.style.width = '100%';\n      container.style.height = '100%';\n      container._width = window.innerWidth;\n      container._height = window.innerHeight;\n      document.body.appendChild(container);\n    }\n\n    this.container = container;\n\n    this.camera = options.camera || new __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"](this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 10000);\n    this.scene = options.scene || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Scene\"]();\n    this.renderer = options.renderer || new __WEBPACK_IMPORTED_MODULE_8_three__[\"WebGLRenderer\"]({ alpha: true, antialias: false });\n\n    this.viewIndicatorSize = options.indicatorSize;\n\n    this.reticle = {};\n    this.tempEnableReticle = this.options.enableReticle;\n\n    this.mode = PANOLENS.Modes.NORMAL;\n\n    this.OrbitControls;\n    this.DeviceOrientationControls;\n\n    this.CardboardEffect;\n    this.StereoEffect;\n\n    this.controls;\n    this.effect;\n    this.panorama;\n    this.widget;\n\n    this.hoverObject;\n    this.infospot;\n    this.pressEntityObject;\n    this.pressObject;\n\n    this.raycaster = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Raycaster\"]();\n    this.raycasterPoint = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n    this.userMouse = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n    this.updateCallbacks = [];\n    this.requestAnimationId;\n\n    this.cameraFrustum = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Frustum\"]();\n    this.cameraViewProjectionMatrix = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]();\n\n    this.outputDivElement;\n\n    this.HANDLER_MOUSE_DOWN = this.onMouseDown.bind(this);\n    this.HANDLER_MOUSE_UP = this.onMouseUp.bind(this);\n    this.HANDLER_MOUSE_MOVE = this.onMouseMove.bind(this);\n    this.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind(this);\n    this.HANDLER_KEY_DOWN = this.onKeyDown.bind(this);\n    this.HANDLER_KEY_UP = this.onKeyUp.bind(this);\n    this.HANDLER_TAP = this.onTap.bind(this, {\n      clientX: this.container.clientWidth / 2,\n      clientY: this.container.clientHeight / 2\n    });\n\n    this.OUTPUT_INFOSPOT = false;\n\n    this.tweenLeftAnimation = new TWEEN.Tween();\n    this.tweenUpAnimation = new TWEEN.Tween();\n\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n    this.renderer.setClearColor(0x000000, 1);\n    this.renderer.sortObjects = false;\n\n    this.renderer.domElement.classList.add('panolens-canvas');\n    this.renderer.domElement.style.display = 'block';\n    this.container.style.backgroundColor = '#000';\n    this.container.appendChild(this.renderer.domElement);\n\n    this.OrbitControls = new __WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"](this.camera, this.container);\n    this.OrbitControls.name = 'orbit';\n    this.OrbitControls.minDistance = 1;\n    this.OrbitControls.noPan = true;\n    this.DeviceOrientationControls = new __WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"](this.camera, this.container);\n    this.DeviceOrientationControls.name = 'device-orientation';\n    this.DeviceOrientationControls.enabled = false;\n    this.camera.position.z = 1;\n\n    if (this.options.passiveRendering) {\n      console.warn('passiveRendering is now deprecated');\n    }\n\n    this.controls = [this.OrbitControls, this.DeviceOrientationControls];\n    this.control = this.OrbitControls;\n\n    this.CardboardEffect = new __WEBPACK_IMPORTED_MODULE_8_three__[\"CardboardEffect\"](this.renderer);\n    this.CardboardEffect.setSize(this.container.clientWidth, this.container.clientHeight);\n\n    this.StereoEffect = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoEffect\"](this.renderer);\n    this.StereoEffect.setSize(this.container.clientWidth, this.container.clientHeight);\n\n    this.effect = this.CardboardEffect;\n\n    this.addReticle();\n\n    if (this.options.horizontalView) {\n      this.OrbitControls.minPolarAngle = Math.PI / 2;\n      this.OrbitControls.maxPolarAngle = Math.PI / 2;\n    }\n\n    if (this.options.controlBar !== false) {\n      this.addDefaultControlBar(this.options.controlButtons);\n    }\n\n    if (this.options.viewIndicator) {\n      this.addViewIndicator();\n    }\n\n    if (this.options.reverseDragging) {\n      this.reverseDraggingDirection();\n    }\n\n    if (this.options.enableReticle) {\n      this.enableReticleControl();\n    } else {\n      this.registerMouseAndTouchEvents();\n    }\n\n    if (this.options.output === 'overlay') {\n      this.addOutputElement();\n    }\n\n    this.registerEventListeners();\n\n    this.animate.call(this);\n  };\n\n  PANOLENS.Viewer.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n\n  PANOLENS.Viewer.prototype.constructor = PANOLENS.Viewer;\n\n  PANOLENS.Viewer.prototype.add = function (object) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    this.scene.add(object);\n\n    if (object.addEventListener) {\n      object.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n    }\n\n    if (object instanceof PANOLENS.Panorama && object.dispatchEvent) {\n      object.dispatchEvent({ type: 'panolens-container', container: this.container });\n    }\n\n    if (object.type === 'panorama') {\n      this.addPanoramaEventListener(object);\n\n      if (!this.panorama) {\n        this.setPanorama(object);\n      }\n    }\n  };\n\n  PANOLENS.Viewer.prototype.remove = function (object) {\n    if (object.removeEventListener) {\n      object.removeEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n    }\n\n    this.scene.remove(object);\n  };\n\n  PANOLENS.Viewer.prototype.addDefaultControlBar = function (array) {\n    var scope = this;\n\n    if (this.widget) {\n      console.warn('Default control bar exists');\n      return;\n    }\n\n    this.widget = new PANOLENS.Widget(this.container);\n    this.widget.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n    this.widget.addControlBar();\n    array.forEach(function (buttonName) {\n      scope.widget.addControlButton(buttonName);\n    });\n  };\n\n  PANOLENS.Viewer.prototype.setPanorama = function (pano) {\n    var scope = this,\n        leavingPanorama = this.panorama;\n\n    if (pano.type === 'panorama' && leavingPanorama !== pano) {\n      this.hideInfospot();\n\n      var afterEnterComplete = function afterEnterComplete() {\n        leavingPanorama && leavingPanorama.onLeave();\n        pano.removeEventListener('enter-fade-start', afterEnterComplete);\n      };\n\n      pano.addEventListener('enter-fade-start', afterEnterComplete);\n\n      (this.panorama = pano).onEnter();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.eventHandler = function (event) {\n    if (event.method && this[event.method]) {\n      this[event.method](event.data);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.dispatchEventToChildren = function (event) {\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent(event);\n      }\n    });\n  };\n\n  PANOLENS.Viewer.prototype.activateWidgetItem = function (controlIndex, mode) {\n    var mainMenu = this.widget.mainMenu;\n    var ControlMenuItem = mainMenu.children[0];\n    var ModeMenuItem = mainMenu.children[1];\n\n    var item;\n\n    if (controlIndex !== undefined) {\n      switch (controlIndex) {\n        case 0:\n\n          item = ControlMenuItem.subMenu.children[1];\n\n          break;\n\n        case 1:\n\n          item = ControlMenuItem.subMenu.children[2];\n\n          break;\n\n        default:\n\n          item = ControlMenuItem.subMenu.children[1];\n\n          break;\n      }\n\n      ControlMenuItem.subMenu.setActiveItem(item);\n      ControlMenuItem.setSelectionTitle(item.textContent);\n    }\n\n    if (mode !== undefined) {\n      switch (mode) {\n        case PANOLENS.Modes.CARDBOARD:\n\n          item = ModeMenuItem.subMenu.children[2];\n\n          break;\n\n        case PANOLENS.Modes.STEREO:\n\n          item = ModeMenuItem.subMenu.children[3];\n\n          break;\n\n        default:\n\n          item = ModeMenuItem.subMenu.children[1];\n\n          break;\n      }\n\n      ModeMenuItem.subMenu.setActiveItem(item);\n      ModeMenuItem.setSelectionTitle(item.textContent);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.enableEffect = function (mode) {\n    if (this.mode === mode) {\n      return;\n    }\n    if (mode === PANOLENS.Modes.NORMAL) {\n      this.disableEffect();return;\n    } else {\n      this.mode = mode;\n    }\n\n    var fov = this.camera.fov;\n\n    switch (mode) {\n      case PANOLENS.Modes.CARDBOARD:\n\n        this.effect = this.CardboardEffect;\n        this.enableReticleControl();\n\n        break;\n\n      case PANOLENS.Modes.STEREO:\n\n        this.effect = this.StereoEffect;\n        this.enableReticleControl();\n\n        break;\n\n      default:\n\n        this.effect = null;\n        this.disableReticleControl();\n\n        break;\n    }\n\n    this.activateWidgetItem(undefined, this.mode);\n\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode });\n\n    this.camera.fov = fov + 10e-3;\n    this.effect.setSize(this.container.clientWidth, this.container.clientHeight);\n    this.render();\n    this.camera.fov = fov;\n  };\n\n  PANOLENS.Viewer.prototype.disableEffect = function () {\n    if (this.mode === PANOLENS.Modes.NORMAL) {\n      return;\n    }\n\n    this.mode = PANOLENS.Modes.NORMAL;\n    this.disableReticleControl();\n\n    this.activateWidgetItem(undefined, this.mode);\n\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode });\n\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n    this.render();\n  };\n\n  PANOLENS.Viewer.prototype.enableReticleControl = function () {\n    if (this.reticle.visible) {\n      return;\n    }\n    if (!this.reticle.textureLoaded) {\n      this.reticle.loadTextures();\n    }\n\n    this.tempEnableReticle = true;\n\n    this.unregisterMouseAndTouchEvents();\n    this.reticle.show();\n    this.registerReticleEvent();\n    this.updateReticleEvent();\n  };\n\n  PANOLENS.Viewer.prototype.disableReticleControl = function () {\n    this.tempEnableReticle = false;\n\n    if (!this.options.enableReticle) {\n      this.reticle.hide();\n      this.unregisterReticleEvent();\n      this.registerMouseAndTouchEvents();\n    } else {\n      this.updateReticleEvent();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.toggleVideoPlay = function (pause) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      this.panorama.dispatchEvent({ type: 'video-toggle', pause: pause });\n    }\n  };\n\n  PANOLENS.Viewer.prototype.setVideoCurrentTime = function (percentage) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      this.panorama.dispatchEvent({ type: 'video-time', percentage: percentage });\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onVideoUpdate = function (percentage) {\n    this.widget && this.widget.dispatchEvent({ type: 'video-update', percentage: percentage });\n  };\n\n  PANOLENS.Viewer.prototype.addUpdateCallback = function (fn) {\n    if (fn) {\n      this.updateCallbacks.push(fn);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.removeUpdateCallback = function (fn) {\n    var index = this.updateCallbacks.indexOf(fn);\n\n    if (fn && index >= 0) {\n      this.updateCallbacks.splice(index, 1);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.showVideoWidget = function () {\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-show' });\n  };\n\n  PANOLENS.Viewer.prototype.hideVideoWidget = function () {\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-hide' });\n  };\n\n  PANOLENS.Viewer.prototype.updateVideoPlayButton = function (paused) {\n    if (this.widget && this.widget.videoElement && this.widget.videoElement.controlButton) {\n      this.widget.videoElement.controlButton.update(paused);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.addPanoramaEventListener = function (pano) {\n    var scope = this;\n\n    pano.addEventListener('enter-fade-start', this.setCameraControl.bind(this));\n\n    if (pano instanceof PANOLENS.VideoPanorama) {\n      pano.addEventListener('enter-fade-start', this.showVideoWidget.bind(this));\n      pano.addEventListener('leave', function () {\n        if (!(this.panorama instanceof PANOLENS.VideoPanorama)) {\n          this.hideVideoWidget.call(this);\n        }\n      }.bind(this));\n    }\n  };\n\n  PANOLENS.Viewer.prototype.setCameraControl = function () {\n    this.OrbitControls.target.copy(this.panorama.position);\n  };\n\n  PANOLENS.Viewer.prototype.getControl = function () {\n    return this.control;\n  }, PANOLENS.Viewer.prototype.getScene = function () {\n    return this.scene;\n  };\n\n  PANOLENS.Viewer.prototype.getCamera = function () {\n    return this.camera;\n  }, PANOLENS.Viewer.prototype.getRenderer = function () {\n    return this.renderer;\n  };\n\n  PANOLENS.Viewer.prototype.getContainer = function () {\n    return this.container;\n  };\n\n  PANOLENS.Viewer.prototype.getControlName = function () {\n    return this.control.name;\n  };\n\n  PANOLENS.Viewer.prototype.getNextControlName = function () {\n    return this.controls[this.getNextControlIndex()].name;\n  };\n\n  PANOLENS.Viewer.prototype.getNextControlIndex = function () {\n    var controls, control, nextIndex;\n\n    controls = this.controls;\n    control = this.control;\n    nextIndex = controls.indexOf(control) + 1;\n\n    return nextIndex >= controls.length ? 0 : nextIndex;\n  };\n\n  PANOLENS.Viewer.prototype.setCameraFov = function (fov) {\n    this.camera.fov = fov;\n    this.camera.updateProjectionMatrix();\n  };\n\n  PANOLENS.Viewer.prototype.enableControl = function (index) {\n    index = index >= 0 && index < this.controls.length ? index : 0;\n\n    this.control.enabled = false;\n\n    this.control = this.controls[index];\n\n    this.control.enabled = true;\n\n    switch (index) {\n      case PANOLENS.Controls.ORBIT:\n\n        this.camera.position.copy(this.panorama.position);\n        this.camera.position.z += 1;\n\n        break;\n\n      case PANOLENS.Controls.DEVICEORIENTATION:\n\n        this.camera.position.copy(this.panorama.position);\n\n        break;\n\n      default:\n\n        break;\n    }\n\n    this.control.update();\n\n    this.activateWidgetItem(index, undefined);\n  };\n\n  PANOLENS.Viewer.prototype.disableControl = function () {\n    this.control.enabled = false;\n  };\n\n  PANOLENS.Viewer.prototype.toggleNextControl = function () {\n    this.enableControl(this.getNextControlIndex());\n  };\n\n  PANOLENS.Viewer.prototype.getScreenVector = function (worldVector) {\n    var vector = worldVector.clone();\n    var widthHalf = this.container.clientWidth / 2;\n    var heightHalf = this.container.clientHeight / 2;\n\n    vector.project(this.camera);\n\n    vector.x = vector.x * widthHalf + widthHalf;\n    vector.y = -(vector.y * heightHalf) + heightHalf;\n    vector.z = 0;\n\n    return vector;\n  };\n\n  PANOLENS.Viewer.prototype.checkSpriteInViewport = function (sprite) {\n    this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld);\n    this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse);\n    this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix);\n\n    return sprite.visible && this.cameraFrustum.intersectsSprite(sprite);\n  };\n\n  PANOLENS.Viewer.prototype.reverseDraggingDirection = function () {\n    this.OrbitControls.rotateSpeed *= -1;\n    this.OrbitControls.momentumScalingFactor *= -1;\n  };\n\n  PANOLENS.Viewer.prototype.addReticle = function () {\n    this.reticle = new PANOLENS.Reticle(0xffffff, this.options.autoReticleSelect, PANOLENS.DataImage.ReticleIdle, PANOLENS.DataImage.ReticleDwell, this.options.dwellTime, 45);\n    this.reticle.position.z = -10;\n    this.camera.add(this.reticle);\n    this.scene.add(this.camera);\n  };\n\n  PANOLENS.Viewer.prototype.tweenControlCenter = function (vector, duration, easing) {\n    if (this.control !== this.OrbitControls) {\n      return;\n    }\n\n    if (vector instanceof Array) {\n      duration = vector[1];\n      easing = vector[2];\n      vector = vector[0];\n    }\n\n    duration = duration !== undefined ? duration : 1000;\n    easing = easing || TWEEN.Easing.Exponential.Out;\n\n    var scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv;\n\n    scope = this;\n\n    chv = this.camera.getWorldDirection();\n    cvv = chv.clone();\n\n    vptc = this.panorama.getWorldPosition().sub(this.camera.getWorldPosition());\n\n    hv = vector.clone();\n\n    hv.x *= -1;\n    hv.add(vptc).normalize();\n    vv = hv.clone();\n\n    chv.y = 0;\n    hv.y = 0;\n\n    ha = Math.atan2(hv.z, hv.x) - Math.atan2(chv.z, chv.x);\n    ha = ha > Math.PI ? ha - 2 * Math.PI : ha;\n    ha = ha < -Math.PI ? ha + 2 * Math.PI : ha;\n    va = Math.abs(cvv.angleTo(chv) + (cvv.y * vv.y <= 0 ? vv.angleTo(hv) : -vv.angleTo(hv)));\n    va *= vv.y < cvv.y ? 1 : -1;\n\n    ov = { left: 0, up: 0 };\n    nv = { left: 0, up: 0 };\n\n    this.tweenLeftAnimation.stop();\n    this.tweenUpAnimation.stop();\n\n    this.tweenLeftAnimation = new TWEEN.Tween(ov).to({ left: ha }, duration).easing(easing).onUpdate(function () {\n      scope.control.rotateLeft(this.left - nv.left);\n      nv.left = this.left;\n    }).start();\n\n    this.tweenUpAnimation = new TWEEN.Tween(ov).to({ up: va }, duration).easing(easing).onUpdate(function () {\n      scope.control.rotateUp(this.up - nv.up);\n      nv.up = this.up;\n    }).start();\n  };\n\n  PANOLENS.Viewer.prototype.tweenControlCenterByObject = function (object, duration, easing) {\n    var isUnderScalePlaceHolder = false;\n\n    object.traverseAncestors(function (ancestor) {\n      if (ancestor.scalePlaceHolder) {\n        isUnderScalePlaceHolder = true;\n      }\n    });\n\n    if (isUnderScalePlaceHolder) {\n      var invertXVector = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](-1, 1, 1);\n\n      this.tweenControlCenter(object.getWorldPosition().multiply(invertXVector), duration, easing);\n    } else {\n      this.tweenControlCenter(object.getWorldPosition(), duration, easing);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onWindowResize = function (windowWidth, windowHeight) {\n    var width, height, expand;\n\n    expand = this.container.classList.contains('panolens-container') || this.container.isFullscreen;\n\n    if (windowWidth !== undefined && windowHeight !== undefined) {\n      width = windowWidth;\n      height = windowHeight;\n      this.container._width = windowWidth;\n      this.container._height = windowHeight;\n    } else {\n      width = expand ? Math.max(document.documentElement.clientWidth, window.innerWidth || 0) : this.container.clientWidth;\n      height = expand ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : this.container.clientHeight;\n      this.container._width = width;\n      this.container._height = height;\n    }\n\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n\n    this.renderer.setSize(width, height);\n\n    if (this.options.enableReticle || this.tempEnableReticle) {\n      this.updateReticleEvent();\n    }\n\n    this.dispatchEvent({ type: 'window-resize', width: width, height: height });\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent({ type: 'window-resize', width: width, height: height });\n      }\n    });\n  };\n\n  PANOLENS.Viewer.prototype.addOutputElement = function () {\n    var element = document.createElement('div');\n    element.style.position = 'absolute';\n    element.style.right = '10px';\n    element.style.top = '10px';\n    element.style.color = '#fff';\n    this.container.appendChild(element);\n    this.outputDivElement = element;\n  };\n\n  PANOLENS.Viewer.prototype.outputInfospotPosition = function () {\n    var intersects, point, panoramaWorldPosition, outputPosition;\n\n    intersects = this.raycaster.intersectObject(this.panorama, true);\n\n    if (intersects.length > 0) {\n      point = intersects[0].point;\n      panoramaWorldPosition = this.panorama.getWorldPosition();\n\n      outputPosition = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](-(point.x - panoramaWorldPosition.x).toFixed(2), (point.y - panoramaWorldPosition.y).toFixed(2), (point.z - panoramaWorldPosition.z).toFixed(2));\n\n      switch (this.options.output) {\n        case 'console':\n          console.info(outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z);\n          break;\n\n        case 'overlay':\n          this.outputDivElement.textContent = outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z;\n          break;\n\n        default:\n          break;\n      }\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onMouseDown = function (event) {\n    event.preventDefault();\n\n    this.userMouse.x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n    this.userMouse.y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n    this.userMouse.type = 'mousedown';\n    this.onTap(event);\n  };\n\n  PANOLENS.Viewer.prototype.onMouseMove = function (event) {\n    event.preventDefault();\n    this.userMouse.type = 'mousemove';\n    this.onTap(event);\n  };\n\n  PANOLENS.Viewer.prototype.onMouseUp = function (event) {\n    var onTarget = false,\n        type;\n\n    this.userMouse.type = 'mouseup';\n\n    type = this.userMouse.x >= event.clientX - this.options.clickTolerance && this.userMouse.x <= event.clientX + this.options.clickTolerance && this.userMouse.y >= event.clientY - this.options.clickTolerance && this.userMouse.y <= event.clientY + this.options.clickTolerance || event.changedTouches && this.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance && this.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance && this.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance && this.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance ? 'click' : undefined;\n\n    if (event && event.target && !event.target.classList.contains('panolens-canvas')) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (event.changedTouches && event.changedTouches.length === 1) {\n      onTarget = this.onTap({ clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY }, type);\n    } else {\n      onTarget = this.onTap(event, type);\n    }\n\n    this.userMouse.type = 'none';\n\n    if (onTarget) {\n      return;\n    }\n\n    if (type === 'click') {\n      this.options.autoHideInfospot && this.panorama && this.panorama.toggleInfospotVisibility();\n      this.options.autoHideControlBar && this.toggleControlBar();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onTap = function (event, type) {\n    var intersects, intersect_entity, intersect;\n\n    this.raycasterPoint.x = (event.clientX - this.container.offsetLeft) / this.container.clientWidth * 2 - 1;\n    this.raycasterPoint.y = -((event.clientY - this.container.offsetTop) / this.container.clientHeight) * 2 + 1;\n\n    this.raycaster.setFromCamera(this.raycasterPoint, this.camera);\n\n    if (!this.panorama) {\n      return;\n    }\n\n    if (event.type !== 'mousedown' && PANOLENS.Utils.checkTouchSupported() || this.OUTPUT_INFOSPOT) {\n      this.outputInfospotPosition();\n    }\n\n    intersects = this.raycaster.intersectObjects(this.panorama.children, true);\n\n    intersect_entity = this.getConvertedIntersect(intersects);\n\n    intersect = intersects.length > 0 ? intersects[0].object : intersect;\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event });\n      }\n\n      this.pressEntityObject = undefined;\n    }\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect && this.pressObject === intersect && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event });\n      }\n\n      this.pressObject = undefined;\n    }\n\n    if (type === 'click') {\n      this.panorama.dispatchEvent({ type: 'click', intersects: intersects, mouseEvent: event });\n\n      if (intersect_entity && intersect_entity.dispatchEvent) {\n        intersect_entity.dispatchEvent({ type: 'click-entity', mouseEvent: event });\n      }\n\n      if (intersect && intersect.dispatchEvent) {\n        intersect.dispatchEvent({ type: 'click', mouseEvent: event });\n      }\n    } else {\n      this.panorama.dispatchEvent({ type: 'hover', intersects: intersects, mouseEvent: event });\n\n      if (this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity || this.hoverObject && intersects.length === 0) {\n        if (this.hoverObject.dispatchEvent) {\n          this.hoverObject.dispatchEvent({ type: 'hoverleave', mouseEvent: event });\n\n          this.reticle.cancelDwelling();\n        }\n\n        this.hoverObject = undefined;\n      }\n\n      if (intersect_entity && intersects.length > 0) {\n        if (this.hoverObject !== intersect_entity) {\n          this.hoverObject = intersect_entity;\n\n          if (this.hoverObject.dispatchEvent) {\n            this.hoverObject.dispatchEvent({ type: 'hoverenter', mouseEvent: event });\n\n            if (this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle) {\n              this.reticle.startDwelling(this.onTap.bind(this, event, 'click'));\n            }\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity) {\n          this.pressEntityObject = intersect_entity;\n\n          if (this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressstart-entity', mouseEvent: event });\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressObject != intersect) {\n          this.pressObject = intersect;\n\n          if (this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressstart', mouseEvent: event });\n          }\n        }\n\n        if (this.userMouse.type === 'mousemove' || this.options.enableReticle) {\n          if (intersect && intersect.dispatchEvent) {\n            intersect.dispatchEvent({ type: 'hover', mouseEvent: event });\n          }\n\n          if (this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressmove-entity', mouseEvent: event });\n          }\n\n          if (this.pressObject && this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressmove', mouseEvent: event });\n          }\n        }\n      }\n\n      if (!intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event });\n\n        this.pressEntityObject = undefined;\n      }\n\n      if (!intersect && this.pressObject && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event });\n\n        this.pressObject = undefined;\n      }\n    }\n\n    if (intersect && intersect instanceof PANOLENS.Infospot) {\n      this.infospot = intersect;\n\n      if (type === 'click') {\n        return true;\n      }\n    } else if (this.infospot) {\n      this.hideInfospot();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.getConvertedIntersect = function (intersects) {\n    var intersect;\n\n    for (var i = 0; i < intersects.length; i++) {\n      if (intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough) {\n        if (intersects[i].object.entity && intersects[i].object.entity.passThrough) {\n          continue;\n        } else if (intersects[i].object.entity && !intersects[i].object.entity.passThrough) {\n          intersect = intersects[i].object.entity;\n          break;\n        } else {\n          intersect = intersects[i].object;\n          break;\n        }\n      }\n    }\n\n    return intersect;\n  };\n\n  PANOLENS.Viewer.prototype.hideInfospot = function (intersects) {\n    if (this.infospot) {\n      this.infospot.onHoverEnd();\n\n      this.infospot = undefined;\n    }\n  };\n\n  PANOLENS.Viewer.prototype.toggleControlBar = function () {\n    this.widget && this.widget.dispatchEvent({ type: 'control-bar-toggle' });\n  };\n\n  PANOLENS.Viewer.prototype.onKeyDown = function (event) {\n    if (this.options.output && this.options.output !== 'none' && event.key === 'Control') {\n      this.OUTPUT_INFOSPOT = true;\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onKeyUp = function (event) {\n    this.OUTPUT_INFOSPOT = false;\n  };\n\n  PANOLENS.Viewer.prototype.update = function () {\n    TWEEN.update();\n\n    this.updateCallbacks.forEach(function (callback) {\n      callback();\n    });\n\n    this.control.update();\n\n    this.scene.traverse(function (child) {\n      if (child instanceof PANOLENS.Infospot && child.element && (this.hoverObject === child || child.element.style.display !== 'none' || child.element.left && child.element.left.style.display !== 'none' || child.element.right && child.element.right.style.display !== 'none')) {\n        if (this.checkSpriteInViewport(child)) {\n          var vector = this.getScreenVector(child.getWorldPosition());\n          child.translateElement(vector.x, vector.y);\n        } else {\n          child.onDismiss();\n        }\n      }\n    }.bind(this));\n  };\n\n  PANOLENS.Viewer.prototype.render = function () {\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      this.effect.render(this.scene, this.camera);\n    } else {\n      this.renderer.render(this.scene, this.camera);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.animate = function () {\n    this.requestAnimationId = window.requestAnimationFrame(this.animate.bind(this));\n\n    this.onChange();\n  };\n\n  PANOLENS.Viewer.prototype.onChange = function () {\n    this.update();\n    this.render();\n  };\n\n  PANOLENS.Viewer.prototype.registerMouseAndTouchEvents = function () {\n    this.container.addEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false);\n    this.container.addEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false);\n    this.container.addEventListener('mouseup', this.HANDLER_MOUSE_UP, false);\n    this.container.addEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false);\n    this.container.addEventListener('touchend', this.HANDLER_MOUSE_UP, false);\n  };\n\n  PANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents = function () {\n    this.container.removeEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false);\n    this.container.removeEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false);\n    this.container.removeEventListener('mouseup', this.HANDLER_MOUSE_UP, false);\n    this.container.removeEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false);\n    this.container.removeEventListener('touchend', this.HANDLER_MOUSE_UP, false);\n  };\n\n  PANOLENS.Viewer.prototype.registerReticleEvent = function () {\n    this.addUpdateCallback(this.HANDLER_TAP);\n  };\n\n  PANOLENS.Viewer.prototype.unregisterReticleEvent = function () {\n    this.removeUpdateCallback(this.HANDLER_TAP);\n  };\n\n  PANOLENS.Viewer.prototype.updateReticleEvent = function () {\n    var centerX, centerY;\n\n    centerX = this.container.clientWidth / 2 + this.container.offsetLeft;\n    centerY = this.container.clientHeight / 2;\n\n    this.removeUpdateCallback(this.HANDLER_TAP);\n    this.HANDLER_TAP = this.onTap.bind(this, { clientX: centerX, clientY: centerY });\n    this.addUpdateCallback(this.HANDLER_TAP);\n  };\n\n  PANOLENS.Viewer.prototype.registerEventListeners = function () {\n    window.addEventListener('resize', this.HANDLER_WINDOW_RESIZE, true);\n\n    window.addEventListener('keydown', this.HANDLER_KEY_DOWN, true);\n    window.addEventListener('keyup', this.HANDLER_KEY_UP, true);\n  };\n\n  PANOLENS.Viewer.prototype.unregisterEventListeners = function () {\n    window.removeEventListener('resize', this.HANDLER_WINDOW_RESIZE, true);\n\n    window.removeEventListener('keydown', this.HANDLER_KEY_DOWN, true);\n    window.removeEventListener('keyup', this.HANDLER_KEY_UP, true);\n  };\n\n  PANOLENS.Viewer.prototype.dispose = function () {\n    this.unregisterEventListeners();\n\n    function recursiveDispose(object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i]);\n        object.remove(object.children[i]);\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose();\n      }\n\n      object.geometry && object.geometry.dispose();\n      object.material && object.material.dispose();\n    }\n\n    recursiveDispose(this.scene);\n\n    if (this.widget) {\n      this.widget.dispose();\n      this.widget = null;\n    }\n\n    if (__WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"] && __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].enabled) {\n      __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].clear();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.destory = function () {\n    this.dispose();\n    this.render();\n    window.cancelAnimationFrame(this.requestAnimationId);\n  };\n\n  PANOLENS.Viewer.prototype.onPanoramaDispose = function (panorama) {\n    if (panorama instanceof PANOLENS.VideoPanorama) {\n      this.hideVideoWidget();\n    }\n\n    if (panorama === this.panorama) {\n      this.panorama = null;\n    }\n  };\n\n  PANOLENS.Viewer.prototype.loadAsyncRequest = function (url, callback) {\n    var request = new XMLHttpRequest();\n    request.onloadend = function (event) {\n      callback && callback(event);\n    };\n    request.open('GET', url, true);\n    request.send(null);\n  };\n\n  PANOLENS.Viewer.prototype.addViewIndicator = function () {\n    var scope = this;\n\n    function loadViewIndicator(asyncEvent) {\n      if (asyncEvent.loaded === 0) return;\n\n      var viewIndicatorDiv = asyncEvent.target.responseXML.documentElement;\n      viewIndicatorDiv.style.width = scope.viewIndicatorSize + 'px';\n      viewIndicatorDiv.style.height = scope.viewIndicatorSize + 'px';\n      viewIndicatorDiv.style.position = 'absolute';\n      viewIndicatorDiv.style.top = '10px';\n      viewIndicatorDiv.style.left = '10px';\n      viewIndicatorDiv.style.opacity = '0.5';\n      viewIndicatorDiv.style.cursor = 'pointer';\n      viewIndicatorDiv.id = 'panolens-view-indicator-container';\n\n      scope.container.appendChild(viewIndicatorDiv);\n\n      var indicator = viewIndicatorDiv.querySelector('#indicator');\n      var setIndicatorD = function setIndicatorD() {\n        scope.radius = scope.viewIndicatorSize * 0.225;\n        scope.currentPanoAngle = scope.camera.rotation.y - __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(90);\n        scope.fovAngle = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.camera.fov);\n        scope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2;\n        scope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2;\n        scope.leftX = scope.radius * Math.cos(scope.leftAngle);\n        scope.leftY = scope.radius * Math.sin(scope.leftAngle);\n        scope.rightX = scope.radius * Math.cos(scope.rightAngle);\n        scope.rightY = scope.radius * Math.sin(scope.rightAngle);\n        scope.indicatorD = 'M ' + scope.leftX + ' ' + scope.leftY + ' A ' + scope.radius + ' ' + scope.radius + ' 0 0 1 ' + scope.rightX + ' ' + scope.rightY;\n\n        if (scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius) {\n          indicator.setAttribute('d', scope.indicatorD);\n        }\n      };\n\n      scope.addUpdateCallback(setIndicatorD);\n\n      var indicatorOnMouseEnter = function indicatorOnMouseEnter() {\n        this.style.opacity = '1';\n      };\n\n      var indicatorOnMouseLeave = function indicatorOnMouseLeave() {\n        this.style.opacity = '0.5';\n      };\n\n      viewIndicatorDiv.addEventListener('mouseenter', indicatorOnMouseEnter);\n      viewIndicatorDiv.addEventListener('mouseleave', indicatorOnMouseLeave);\n    }\n\n    this.loadAsyncRequest(PANOLENS.DataImage.ViewIndicator, loadViewIndicator);\n  };\n\n  PANOLENS.Viewer.prototype.appendControlItem = function (option) {\n    var item = this.widget.createCustomItem(option);\n\n    if (option.group === 'video') {\n      this.widget.videoElement.appendChild(item);\n    } else {\n      this.widget.barElement.appendChild(item);\n    }\n\n    return item;\n  };\n})();(function e(t, n, r) {\n  function s(o, u) {\n    if (!n[o]) {\n      if (!t[o]) {\n        var a = typeof require === 'function' && require;if (!u && a) return require(o, !0);if (i) return i(o, !0);var f = new Error(\"Cannot find module '\" + o + \"'\");throw f.code = 'MODULE_NOT_FOUND', f;\n      }var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {\n        var n = t[o][1][e];return s(n || e);\n      }, l, l.exports, e, t, n, r);\n    }return n[o].exports;\n  }var i = typeof require === 'function' && require;for (var o = 0; o < r.length; o++) {\n    s(r[o]);\n  }return s;\n})({ 1: [function (require, module, exports) {\n    var createLayout = require('layout-bmfont-text');\n    var inherits = require('inherits');\n    var createIndices = require('quad-indices');\n    var buffer = require('three-buffer-vertex-data');\n    var assign = require('object-assign');\n\n    var vertices = require('./lib/vertices');\n    var utils = require('./lib/utils');\n\n    var Base = __WEBPACK_IMPORTED_MODULE_8_three__[\"BufferGeometry\"];\n\n    module.exports = function createTextGeometry(opt) {\n      return new TextGeometry(opt);\n    };\n\n    function TextGeometry(opt) {\n      Base.call(this);\n\n      if (typeof opt === 'string') {\n        opt = { text: opt };\n      }\n\n      this._opt = assign({}, opt);\n\n      if (opt) this.update(opt);\n    }\n\n    inherits(TextGeometry, Base);\n\n    TextGeometry.prototype.update = function (opt) {\n      if (typeof opt === 'string') {\n        opt = { text: opt };\n      }\n\n      opt = assign({}, this._opt, opt);\n\n      if (!opt.font) {\n        throw new TypeError('must specify a { font } in options');\n      }\n\n      this.layout = createLayout(opt);\n\n      var flipY = opt.flipY !== false;\n\n      var font = opt.font;\n\n      var texWidth = font.common.scaleW;\n      var texHeight = font.common.scaleH;\n\n      var glyphs = this.layout.glyphs.filter(function (glyph) {\n        var bitmap = glyph.data;\n        return bitmap.width * bitmap.height > 0;\n      });\n\n      this.visibleGlyphs = glyphs;\n\n      var positions = vertices.positions(glyphs);\n      var uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY);\n      var indices = createIndices({\n        clockwise: true,\n        type: 'uint16',\n        count: glyphs.length\n      });\n\n      buffer.index(this, indices, 1, 'uint16');\n      buffer.attr(this, 'position', positions, 2);\n      buffer.attr(this, 'uv', uvs, 2);\n\n      if (!opt.multipage && 'page' in this.attributes) {\n        this.removeAttribute('page');\n      } else if (opt.multipage) {\n        var pages = vertices.pages(glyphs);\n\n        buffer.attr(this, 'page', pages, 1);\n      }\n    };\n\n    TextGeometry.prototype.computeBoundingSphere = function () {\n      if (this.boundingSphere === null) {\n        this.boundingSphere = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Sphere\"]();\n      }\n\n      var positions = this.attributes.position.array;\n      var itemSize = this.attributes.position.itemSize;\n      if (!positions || !itemSize || positions.length < 2) {\n        this.boundingSphere.radius = 0;\n        this.boundingSphere.center.set(0, 0, 0);\n        return;\n      }\n      utils.computeSphere(positions, this.boundingSphere);\n      if (isNaN(this.boundingSphere.radius)) {\n        console.error('THREE.BufferGeometry.computeBoundingSphere(): ' + 'Computed radius is NaN. The ' + '\"position\" attribute is likely to have NaN values.');\n      }\n    };\n\n    TextGeometry.prototype.computeBoundingBox = function () {\n      if (this.boundingBox === null) {\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Box3\"]();\n      }\n\n      var bbox = this.boundingBox;\n      var positions = this.attributes.position.array;\n      var itemSize = this.attributes.position.itemSize;\n      if (!positions || !itemSize || positions.length < 2) {\n        bbox.makeEmpty();\n        return;\n      }\n      utils.computeBox(positions, bbox);\n    };\n  }, { './lib/utils': 2, './lib/vertices': 3, 'inherits': 4, 'layout-bmfont-text': 5, 'object-assign': 26, 'quad-indices': 27, 'three-buffer-vertex-data': 31 }],\n  2: [function (require, module, exports) {\n    var itemSize = 2;\n    var box = { min: [0, 0], max: [0, 0] };\n\n    function bounds(positions) {\n      var count = positions.length / itemSize;\n      box.min[0] = positions[0];\n      box.min[1] = positions[1];\n      box.max[0] = positions[0];\n      box.max[1] = positions[1];\n\n      for (var i = 0; i < count; i++) {\n        var x = positions[i * itemSize + 0];\n        var y = positions[i * itemSize + 1];\n        box.min[0] = Math.min(x, box.min[0]);\n        box.min[1] = Math.min(y, box.min[1]);\n        box.max[0] = Math.max(x, box.max[0]);\n        box.max[1] = Math.max(y, box.max[1]);\n      }\n    }\n\n    module.exports.computeBox = function (positions, output) {\n      bounds(positions);\n      output.min.set(box.min[0], box.min[1], 0);\n      output.max.set(box.max[0], box.max[1], 0);\n    };\n\n    module.exports.computeSphere = function (positions, output) {\n      bounds(positions);\n      var minX = box.min[0];\n      var minY = box.min[1];\n      var maxX = box.max[0];\n      var maxY = box.max[1];\n      var width = maxX - minX;\n      var height = maxY - minY;\n      var length = Math.sqrt(width * width + height * height);\n      output.center.set(minX + width / 2, minY + height / 2, 0);\n      output.radius = length / 2;\n    };\n  }, {}],\n  3: [function (require, module, exports) {\n    module.exports.pages = function pages(glyphs) {\n      var pages = new Float32Array(glyphs.length * 4 * 1);\n      var i = 0;\n      glyphs.forEach(function (glyph) {\n        var id = glyph.data.page || 0;\n        pages[i++] = id;\n        pages[i++] = id;\n        pages[i++] = id;\n        pages[i++] = id;\n      });\n      return pages;\n    };\n\n    module.exports.uvs = function uvs(glyphs, texWidth, texHeight, flipY) {\n      var uvs = new Float32Array(glyphs.length * 4 * 2);\n      var i = 0;\n      glyphs.forEach(function (glyph) {\n        var bitmap = glyph.data;\n        var bw = bitmap.x + bitmap.width;\n        var bh = bitmap.y + bitmap.height;\n\n        var u0 = bitmap.x / texWidth;\n        var v1 = bitmap.y / texHeight;\n        var u1 = bw / texWidth;\n        var v0 = bh / texHeight;\n\n        if (flipY) {\n          v1 = (texHeight - bitmap.y) / texHeight;\n          v0 = (texHeight - bh) / texHeight;\n        }\n\n        uvs[i++] = u0;\n        uvs[i++] = v1;\n\n        uvs[i++] = u0;\n        uvs[i++] = v0;\n\n        uvs[i++] = u1;\n        uvs[i++] = v0;\n\n        uvs[i++] = u1;\n        uvs[i++] = v1;\n      });\n      return uvs;\n    };\n\n    module.exports.positions = function positions(glyphs) {\n      var positions = new Float32Array(glyphs.length * 4 * 2);\n      var i = 0;\n      glyphs.forEach(function (glyph) {\n        var bitmap = glyph.data;\n\n        var x = glyph.position[0] + bitmap.xoffset;\n        var y = glyph.position[1] + bitmap.yoffset;\n\n        var w = bitmap.width;\n        var h = bitmap.height;\n\n        positions[i++] = x;\n        positions[i++] = y;\n\n        positions[i++] = x;\n        positions[i++] = y + h;\n\n        positions[i++] = x + w;\n        positions[i++] = y + h;\n\n        positions[i++] = x + w;\n        positions[i++] = y;\n      });\n      return positions;\n    };\n  }, {}],\n  4: [function (require, module, exports) {\n    if (typeof __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default.a === 'function') {\n      module.exports = function inherits(ctor, superCtor) {\n        ctor.super_ = superCtor;\n        ctor.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(superCtor.prototype, {\n          constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n          }\n        });\n      };\n    } else {\n      module.exports = function inherits(ctor, superCtor) {\n        ctor.super_ = superCtor;\n        var TempCtor = function TempCtor() {};\n        TempCtor.prototype = superCtor.prototype;\n        ctor.prototype = new TempCtor();\n        ctor.prototype.constructor = ctor;\n      };\n    }\n  }, {}],\n  5: [function (require, module, exports) {\n    var wordWrap = require('word-wrapper');\n    var xtend = require('xtend');\n    var findChar = require('indexof-property')('id');\n    var number = require('as-number');\n\n    var X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z'];\n    var M_WIDTHS = ['m', 'w'];\n    var CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\n\n    var TAB_ID = '\\t'.charCodeAt(0);\n    var SPACE_ID = ' '.charCodeAt(0);\n    var ALIGN_LEFT = 0,\n        ALIGN_CENTER = 1,\n        ALIGN_RIGHT = 2;\n\n    module.exports = function createLayout(opt) {\n      return new TextLayout(opt);\n    };\n\n    function TextLayout(opt) {\n      this.glyphs = [];\n      this._measure = this.computeMetrics.bind(this);\n      this.update(opt);\n    }\n\n    TextLayout.prototype.update = function (opt) {\n      opt = xtend({\n        measure: this._measure\n      }, opt);\n      this._opt = opt;\n      this._opt.tabSize = number(this._opt.tabSize, 4);\n\n      if (!opt.font) {\n        throw new Error('must provide a valid bitmap font');\n      }\n\n      var glyphs = this.glyphs;\n      var text = opt.text || '';\n      var font = opt.font;\n      this._setupSpaceGlyphs(font);\n\n      var lines = wordWrap.lines(text, opt);\n      var minWidth = opt.width || 0;\n\n      glyphs.length = 0;\n\n      var maxLineWidth = lines.reduce(function (prev, line) {\n        return Math.max(prev, line.width, minWidth);\n      }, 0);\n\n      var x = 0;\n      var y = 0;\n      var lineHeight = number(opt.lineHeight, font.common.lineHeight);\n      var baseline = font.common.base;\n      var descender = lineHeight - baseline;\n      var letterSpacing = opt.letterSpacing || 0;\n      var height = lineHeight * lines.length - descender;\n      var align = getAlignType(this._opt.align);\n\n      y -= height;\n\n      this._width = maxLineWidth;\n      this._height = height;\n      this._descender = lineHeight - baseline;\n      this._baseline = baseline;\n      this._xHeight = getXHeight(font);\n      this._capHeight = getCapHeight(font);\n      this._lineHeight = lineHeight;\n      this._ascender = lineHeight - descender - this._xHeight;\n\n      var self = this;\n      lines.forEach(function (line, lineIndex) {\n        var start = line.start;\n        var end = line.end;\n        var lineWidth = line.width;\n        var lastGlyph;\n\n        for (var i = start; i < end; i++) {\n          var id = text.charCodeAt(i);\n          var glyph = self.getGlyph(font, id);\n          if (glyph) {\n            if (lastGlyph) {\n              x += getKerning(font, lastGlyph.id, glyph.id);\n            }\n\n            var tx = x;\n            if (align === ALIGN_CENTER) {\n              tx += (maxLineWidth - lineWidth) / 2;\n            } else if (align === ALIGN_RIGHT) {\n              tx += maxLineWidth - lineWidth;\n            }\n\n            glyphs.push({\n              position: [tx, y],\n              data: glyph,\n              index: i,\n              line: lineIndex\n            });\n\n            x += glyph.xadvance + letterSpacing;\n            lastGlyph = glyph;\n          }\n        }\n\n        y += lineHeight;\n        x = 0;\n      });\n      this._linesTotal = lines.length;\n    };\n\n    TextLayout.prototype._setupSpaceGlyphs = function (font) {\n      this._fallbackSpaceGlyph = null;\n      this._fallbackTabGlyph = null;\n\n      if (!font.chars || font.chars.length === 0) {\n        return;\n      }\n\n      var space = getGlyphById(font, SPACE_ID) || getMGlyph(font) || font.chars[0];\n\n      var tabWidth = this._opt.tabSize * space.xadvance;\n      this._fallbackSpaceGlyph = space;\n      this._fallbackTabGlyph = xtend(space, {\n        x: 0,\n        y: 0,\n        xadvance: tabWidth,\n        id: TAB_ID,\n        xoffset: 0,\n        yoffset: 0,\n        width: 0,\n        height: 0\n      });\n    };\n\n    TextLayout.prototype.getGlyph = function (font, id) {\n      var glyph = getGlyphById(font, id);\n      if (glyph) {\n        return glyph;\n      } else if (id === TAB_ID) {\n        return this._fallbackTabGlyph;\n      } else if (id === SPACE_ID) {\n        return this._fallbackSpaceGlyph;\n      }\n      return null;\n    };\n\n    TextLayout.prototype.computeMetrics = function (text, start, end, width) {\n      var letterSpacing = this._opt.letterSpacing || 0;\n      var font = this._opt.font;\n      var curPen = 0;\n      var curWidth = 0;\n      var count = 0;\n      var glyph;\n      var lastGlyph;\n\n      if (!font.chars || font.chars.length === 0) {\n        return {\n          start: start,\n          end: start,\n          width: 0\n        };\n      }\n\n      end = Math.min(text.length, end);\n      for (var i = start; i < end; i++) {\n        var id = text.charCodeAt(i);\n        var glyph = this.getGlyph(font, id);\n\n        if (glyph) {\n          var xoff = glyph.xoffset;\n          var kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0;\n          curPen += kern;\n\n          var nextPen = curPen + glyph.xadvance + letterSpacing;\n          var nextWidth = curPen + glyph.width;\n\n          if (nextWidth >= width || nextPen >= width) {\n            break;\n          }\n\n          curPen = nextPen;\n          curWidth = nextWidth;\n          lastGlyph = glyph;\n        }\n        count++;\n      }\n\n      if (lastGlyph) {\n        curWidth += lastGlyph.xoffset;\n      }\n\n      return {\n        start: start,\n        end: start + count,\n        width: curWidth\n      };\n    };['width', 'height', 'descender', 'ascender', 'xHeight', 'baseline', 'capHeight', 'lineHeight'].forEach(addGetter);\n\n    function addGetter(name) {\n      __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default()(TextLayout.prototype, name, {\n        get: wrapper(name),\n        configurable: true\n      });\n    }\n\n    function wrapper(name) {\n      return new Function(['return function ' + name + '() {', '  return this._' + name, '}'].join('\\n'))();\n    }\n\n    function getGlyphById(font, id) {\n      if (!font.chars || font.chars.length === 0) {\n        return null;\n      }\n\n      var glyphIdx = findChar(font.chars, id);\n      if (glyphIdx >= 0) {\n        return font.chars[glyphIdx];\n      }\n      return null;\n    }\n\n    function getXHeight(font) {\n      for (var i = 0; i < X_HEIGHTS.length; i++) {\n        var id = X_HEIGHTS[i].charCodeAt(0);\n        var idx = findChar(font.chars, id);\n        if (idx >= 0) {\n          return font.chars[idx].height;\n        }\n      }\n      return 0;\n    }\n\n    function getMGlyph(font) {\n      for (var i = 0; i < M_WIDTHS.length; i++) {\n        var id = M_WIDTHS[i].charCodeAt(0);\n        var idx = findChar(font.chars, id);\n        if (idx >= 0) {\n          return font.chars[idx];\n        }\n      }\n      return 0;\n    }\n\n    function getCapHeight(font) {\n      for (var i = 0; i < CAP_HEIGHTS.length; i++) {\n        var id = CAP_HEIGHTS[i].charCodeAt(0);\n        var idx = findChar(font.chars, id);\n        if (idx >= 0) {\n          return font.chars[idx].height;\n        }\n      }\n      return 0;\n    }\n\n    function getKerning(font, left, right) {\n      if (!font.kernings || font.kernings.length === 0) {\n        return 0;\n      }\n\n      var table = font.kernings;\n      for (var i = 0; i < table.length; i++) {\n        var kern = table[i];\n        if (kern.first === left && kern.second === right) {\n          return kern.amount;\n        }\n      }\n      return 0;\n    }\n\n    function getAlignType(align) {\n      if (align === 'center') {\n        return ALIGN_CENTER;\n      } else if (align === 'right') {\n        return ALIGN_RIGHT;\n      }\n      return ALIGN_LEFT;\n    }\n  }, { 'as-number': 6, 'indexof-property': 7, 'word-wrapper': 8, 'xtend': 9 }],\n  6: [function (require, module, exports) {\n    module.exports = function numtype(num, def) {\n      return typeof num === 'number' ? num : typeof def === 'number' ? def : 0;\n    };\n  }, {}],\n  7: [function (require, module, exports) {\n    module.exports = function compile(property) {\n      if (!property || typeof property !== 'string') {\n        throw new Error('must specify property for indexof search');\n      }\n\n      return new Function('array', 'value', 'start', ['start = start || 0', 'for (var i=start; i<array.length; i++)', '  if (array[i][\"' + property + '\"] === value)', '      return i', 'return -1'].join('\\n'));\n    };\n  }, {}],\n  8: [function (require, module, exports) {\n    var newline = /\\n/;\n    var newlineChar = '\\n';\n    var whitespace = /\\s/;\n\n    module.exports = function (text, opt) {\n      var lines = module.exports.lines(text, opt);\n      return lines.map(function (line) {\n        return text.substring(line.start, line.end);\n      }).join('\\n');\n    };\n\n    module.exports.lines = function wordwrap(text, opt) {\n      opt = opt || {};\n\n      if (opt.width === 0 && opt.mode !== 'nowrap') {\n        return [];\n      }\n\n      text = text || '';\n      var width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE;\n      var start = Math.max(0, opt.start || 0);\n      var end = typeof opt.end === 'number' ? opt.end : text.length;\n      var mode = opt.mode;\n\n      var measure = opt.measure || monospace;\n      if (mode === 'pre') {\n        return pre(measure, text, start, end, width);\n      } else {\n        return greedy(measure, text, start, end, width, mode);\n      }\n    };\n\n    function idxOf(text, chr, start, end) {\n      var idx = text.indexOf(chr, start);\n      if (idx === -1 || idx > end) {\n        return end;\n      }\n      return idx;\n    }\n\n    function isWhitespace(chr) {\n      return whitespace.test(chr);\n    }\n\n    function pre(measure, text, start, end, width) {\n      var lines = [];\n      var lineStart = start;\n      for (var i = start; i < end && i < text.length; i++) {\n        var chr = text.charAt(i);\n        var isNewline = newline.test(chr);\n\n        if (isNewline || i === end - 1) {\n          var lineEnd = isNewline ? i : i + 1;\n          var measured = measure(text, lineStart, lineEnd, width);\n          lines.push(measured);\n\n          lineStart = i + 1;\n        }\n      }\n      return lines;\n    }\n\n    function greedy(measure, text, start, end, width, mode) {\n      var lines = [];\n\n      var testWidth = width;\n\n      if (mode === 'nowrap') {\n        testWidth = Number.MAX_VALUE;\n      }\n\n      while (start < end && start < text.length) {\n        var newLine = idxOf(text, newlineChar, start, end);\n\n        while (start < newLine) {\n          if (!isWhitespace(text.charAt(start))) {\n            break;\n          }\n          start++;\n        }\n\n        var measured = measure(text, start, newLine, testWidth);\n\n        var lineEnd = start + (measured.end - measured.start);\n        var nextStart = lineEnd + newlineChar.length;\n\n        if (lineEnd < newLine) {\n          while (lineEnd > start) {\n            if (isWhitespace(text.charAt(lineEnd))) {\n              break;\n            }\n            lineEnd--;\n          }\n          if (lineEnd === start) {\n            if (nextStart > start + newlineChar.length) nextStart--;\n            lineEnd = nextStart;\n          } else {\n            nextStart = lineEnd;\n\n            while (lineEnd > start) {\n              if (!isWhitespace(text.charAt(lineEnd - newlineChar.length))) {\n                break;\n              }\n              lineEnd--;\n            }\n          }\n        }\n        if (lineEnd >= start) {\n          var result = measure(text, start, lineEnd, testWidth);\n          lines.push(result);\n        }\n        start = nextStart;\n      }\n      return lines;\n    }\n\n    function monospace(text, start, end, width) {\n      var glyphs = Math.min(width, end - start);\n      return {\n        start: start,\n        end: start + glyphs\n      };\n    }\n  }, {}],\n  9: [function (require, module, exports) {\n    module.exports = extend;\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    function extend() {\n      var target = {};\n\n      for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    }\n  }, {}],\n  10: [function (require, module, exports) {\n    (function (Buffer) {\n      var xhr = require('xhr');\n      var noop = function noop() {};\n      var parseASCII = require('parse-bmfont-ascii');\n      var parseXML = require('parse-bmfont-xml');\n      var readBinary = require('parse-bmfont-binary');\n      var isBinaryFormat = require('./lib/is-binary');\n      var xtend = require('xtend');\n\n      var xml2 = function hasXML2() {\n        return window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest();\n      }();\n\n      module.exports = function (opt, cb) {\n        cb = typeof cb === 'function' ? cb : noop;\n\n        if (typeof opt === 'string') {\n          opt = { uri: opt };\n        } else if (!opt) {\n          opt = {};\n        }\n\n        var expectBinary = opt.binary;\n        if (expectBinary) {\n          opt = getBinaryOpts(opt);\n        }\n\n        xhr(opt, function (err, res, body) {\n          if (err) {\n            return cb(err);\n          }\n          if (!/^2/.test(res.statusCode)) {\n            return cb(new Error('http status code: ' + res.statusCode));\n          }\n          if (!body) {\n            return cb(new Error('no body result'));\n          }\n\n          var binary = false;\n\n          if (isArrayBuffer(body)) {\n            var array = new Uint8Array(body);\n            body = new Buffer(array, 'binary');\n          }\n\n          if (isBinaryFormat(body)) {\n            binary = true;\n\n            if (typeof body === 'string') {\n              body = new Buffer(body, 'binary');\n            }\n          }\n\n          if (!binary) {\n            if (Buffer.isBuffer(body)) {\n              body = body.toString(opt.encoding);\n            }\n            body = body.trim();\n          }\n\n          var result;\n          try {\n            var type = res.headers['content-type'];\n            if (binary) {\n              result = readBinary(body);\n            } else if (/json/.test(type) || body.charAt(0) === '{') {\n              result = JSON.parse(body);\n            } else if (/xml/.test(type) || body.charAt(0) === '<') {\n              result = parseXML(body);\n            } else {\n              result = parseASCII(body);\n            }\n          } catch (e) {\n            cb(new Error('error parsing font ' + e.message));\n            cb = noop;\n          }\n          cb(null, result);\n        });\n      };\n\n      function isArrayBuffer(arr) {\n        var str = Object.prototype.toString;\n        return str.call(arr) === '[object ArrayBuffer]';\n      }\n\n      function getBinaryOpts(opt) {\n        if (xml2) {\n          return xtend(opt, { responseType: 'arraybuffer' });\n        }\n\n        if (typeof window.XMLHttpRequest === 'undefined') {\n          throw new Error('your browser does not support XHR loading');\n        }\n\n        var req = new window.XMLHttpRequest();\n        req.overrideMimeType('text/plain; charset=x-user-defined');\n        return xtend({\n          xhr: req\n        }, opt);\n      }\n    }).call(this, require('buffer').Buffer);\n  }, { './lib/is-binary': 11, 'buffer': 37, 'parse-bmfont-ascii': 13, 'parse-bmfont-binary': 14, 'parse-bmfont-xml': 15, 'xhr': 18, 'xtend': 25 }],\n  11: [function (require, module, exports) {\n    (function (Buffer) {\n      var equal = require('buffer-equal');\n      var HEADER = new Buffer([66, 77, 70, 3]);\n\n      module.exports = function (buf) {\n        if (typeof buf === 'string') {\n          return buf.substring(0, 3) === 'BMF';\n        }\n        return buf.length > 4 && equal(buf.slice(0, 4), HEADER);\n      };\n    }).call(this, require('buffer').Buffer);\n  }, { 'buffer': 37, 'buffer-equal': 12 }],\n  12: [function (require, module, exports) {\n    var Buffer = require('buffer').Buffer;\n\n    module.exports = function (a, b) {\n      if (!Buffer.isBuffer(a)) return undefined;\n      if (!Buffer.isBuffer(b)) return undefined;\n      if (typeof a.equals === 'function') return a.equals(b);\n      if (a.length !== b.length) return false;\n\n      for (var i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) return false;\n      }\n\n      return true;\n    };\n  }, { 'buffer': 37 }],\n  13: [function (require, module, exports) {\n    module.exports = function parseBMFontAscii(data) {\n      if (!data) {\n        throw new Error('no data provided');\n      }\n      data = data.toString().trim();\n\n      var output = {\n        pages: [],\n        chars: [],\n        kernings: []\n      };\n\n      var lines = data.split(/\\r\\n?|\\n/g);\n\n      if (lines.length === 0) {\n        throw new Error('no data in BMFont file');\n      }\n\n      for (var i = 0; i < lines.length; i++) {\n        var lineData = splitLine(lines[i], i);\n        if (!lineData) {\n            continue;\n          }\n\n        if (lineData.key === 'page') {\n          if (typeof lineData.data.id !== 'number') {\n            throw new Error('malformed file at line ' + i + ' -- needs page id=N');\n          }\n          if (typeof lineData.data.file !== 'string') {\n            throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"');\n          }\n          output.pages[lineData.data.id] = lineData.data.file;\n        } else if (lineData.key === 'chars' || lineData.key === 'kernings') {} else if (lineData.key === 'char') {\n          output.chars.push(lineData.data);\n        } else if (lineData.key === 'kerning') {\n          output.kernings.push(lineData.data);\n        } else {\n          output[lineData.key] = lineData.data;\n        }\n      }\n\n      return output;\n    };\n\n    function splitLine(line, idx) {\n      line = line.replace(/\\t+/g, ' ').trim();\n      if (!line) {\n        return null;\n      }\n\n      var space = line.indexOf(' ');\n      if (space === -1) {\n        throw new Error('no named row at line ' + idx);\n      }\n\n      var key = line.substring(0, space);\n\n      line = line.substring(space + 1);\n\n      line = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '');\n      line = line.split('=');\n      line = line.map(function (str) {\n        return str.trim().match(/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g);\n      });\n\n      var data = [];\n      for (var i = 0; i < line.length; i++) {\n        var dt = line[i];\n        if (i === 0) {\n          data.push({\n            key: dt[0],\n            data: ''\n          });\n        } else if (i === line.length - 1) {\n          data[data.length - 1].data = parseData(dt[0]);\n        } else {\n          data[data.length - 1].data = parseData(dt[0]);\n          data.push({\n            key: dt[1],\n            data: ''\n          });\n        }\n      }\n\n      var out = {\n        key: key,\n        data: {}\n      };\n\n      data.forEach(function (v) {\n        out.data[v.key] = v.data;\n      });\n\n      return out;\n    }\n\n    function parseData(data) {\n      if (!data || data.length === 0) {\n        return '';\n      }\n\n      if (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0) {\n        return data.substring(1, data.length - 1);\n      }\n      if (data.indexOf(',') !== -1) {\n        return parseIntList(data);\n      }\n      return parseInt(data, 10);\n    }\n\n    function parseIntList(data) {\n      return data.split(',').map(function (val) {\n        return parseInt(val, 10);\n      });\n    }\n  }, {}],\n  14: [function (require, module, exports) {\n    var HEADER = [66, 77, 70];\n\n    module.exports = function readBMFontBinary(buf) {\n      if (buf.length < 6) {\n        throw new Error('invalid buffer length for BMFont');\n      }\n\n      var header = HEADER.every(function (byte, i) {\n        return buf.readUInt8(i) === byte;\n      });\n\n      if (!header) {\n        throw new Error('BMFont missing BMF byte header');\n      }\n\n      var i = 3;\n      var vers = buf.readUInt8(i++);\n      if (vers > 3) {\n        throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)');\n      }\n\n      var target = { kernings: [], chars: [] };\n      for (var b = 0; b < 5; b++) {\n        i += readBlock(target, buf, i);\n      }\n      return target;\n    };\n\n    function readBlock(target, buf, i) {\n      if (i > buf.length - 1) {\n        return 0;\n      }\n\n      var blockID = buf.readUInt8(i++);\n      var blockSize = buf.readInt32LE(i);\n      i += 4;\n\n      switch (blockID) {\n        case 1:\n          target.info = readInfo(buf, i);\n          break;\n        case 2:\n          target.common = readCommon(buf, i);\n          break;\n        case 3:\n          target.pages = readPages(buf, i, blockSize);\n          break;\n        case 4:\n          target.chars = readChars(buf, i, blockSize);\n          break;\n        case 5:\n          target.kernings = readKernings(buf, i, blockSize);\n          break;\n      }\n      return 5 + blockSize;\n    }\n\n    function readInfo(buf, i) {\n      var info = {};\n      info.size = buf.readInt16LE(i);\n\n      var bitField = buf.readUInt8(i + 2);\n      info.smooth = bitField >> 7 & 1;\n      info.unicode = bitField >> 6 & 1;\n      info.italic = bitField >> 5 & 1;\n      info.bold = bitField >> 4 & 1;\n\n      if (bitField >> 3 & 1) {\n        info.fixedHeight = 1;\n      }\n\n      info.charset = buf.readUInt8(i + 3) || '';\n      info.stretchH = buf.readUInt16LE(i + 4);\n      info.aa = buf.readUInt8(i + 6);\n      info.padding = [buf.readInt8(i + 7), buf.readInt8(i + 8), buf.readInt8(i + 9), buf.readInt8(i + 10)];\n      info.spacing = [buf.readInt8(i + 11), buf.readInt8(i + 12)];\n      info.outline = buf.readUInt8(i + 13);\n      info.face = readStringNT(buf, i + 14);\n      return info;\n    }\n\n    function readCommon(buf, i) {\n      var common = {};\n      common.lineHeight = buf.readUInt16LE(i);\n      common.base = buf.readUInt16LE(i + 2);\n      common.scaleW = buf.readUInt16LE(i + 4);\n      common.scaleH = buf.readUInt16LE(i + 6);\n      common.pages = buf.readUInt16LE(i + 8);\n      var bitField = buf.readUInt8(i + 10);\n      common.packed = 0;\n      common.alphaChnl = buf.readUInt8(i + 11);\n      common.redChnl = buf.readUInt8(i + 12);\n      common.greenChnl = buf.readUInt8(i + 13);\n      common.blueChnl = buf.readUInt8(i + 14);\n      return common;\n    }\n\n    function readPages(buf, i, size) {\n      var pages = [];\n      var text = readNameNT(buf, i);\n      var len = text.length + 1;\n      var count = size / len;\n      for (var c = 0; c < count; c++) {\n        pages[c] = buf.slice(i, i + text.length).toString('utf8');\n        i += len;\n      }\n      return pages;\n    }\n\n    function readChars(buf, i, blockSize) {\n      var chars = [];\n\n      var count = blockSize / 20;\n      for (var c = 0; c < count; c++) {\n        var char = {};\n        var off = c * 20;\n        char.id = buf.readUInt32LE(i + 0 + off);\n        char.x = buf.readUInt16LE(i + 4 + off);\n        char.y = buf.readUInt16LE(i + 6 + off);\n        char.width = buf.readUInt16LE(i + 8 + off);\n        char.height = buf.readUInt16LE(i + 10 + off);\n        char.xoffset = buf.readInt16LE(i + 12 + off);\n        char.yoffset = buf.readInt16LE(i + 14 + off);\n        char.xadvance = buf.readInt16LE(i + 16 + off);\n        char.page = buf.readUInt8(i + 18 + off);\n        char.chnl = buf.readUInt8(i + 19 + off);\n        chars[c] = char;\n      }\n      return chars;\n    }\n\n    function readKernings(buf, i, blockSize) {\n      var kernings = [];\n      var count = blockSize / 10;\n      for (var c = 0; c < count; c++) {\n        var kern = {};\n        var off = c * 10;\n        kern.first = buf.readUInt32LE(i + 0 + off);\n        kern.second = buf.readUInt32LE(i + 4 + off);\n        kern.amount = buf.readInt16LE(i + 8 + off);\n        kernings[c] = kern;\n      }\n      return kernings;\n    }\n\n    function readNameNT(buf, offset) {\n      var pos = offset;\n      for (; pos < buf.length; pos++) {\n        if (buf[pos] === 0x00) {\n          break;\n        }\n      }\n      return buf.slice(offset, pos);\n    }\n\n    function readStringNT(buf, offset) {\n      return readNameNT(buf, offset).toString('utf8');\n    }\n  }, {}],\n  15: [function (require, module, exports) {\n    var parseAttributes = require('./parse-attribs');\n    var parseFromString = require('xml-parse-from-string');\n\n    var NAME_MAP = {\n      scaleh: 'scaleH',\n      scalew: 'scaleW',\n      stretchh: 'stretchH',\n      lineheight: 'lineHeight',\n      alphachnl: 'alphaChnl',\n      redchnl: 'redChnl',\n      greenchnl: 'greenChnl',\n      bluechnl: 'blueChnl'\n    };\n\n    module.exports = function parse(data) {\n      data = data.toString();\n\n      var xmlRoot = parseFromString(data);\n      var output = {\n        pages: [],\n        chars: [],\n        kernings: []\n      };['info', 'common'].forEach(function (key) {\n        var element = xmlRoot.getElementsByTagName(key)[0];\n        if (element) {\n          output[key] = parseAttributes(getAttribs(element));\n        }\n      });\n\n      var pageRoot = xmlRoot.getElementsByTagName('pages')[0];\n      if (!pageRoot) {\n        throw new Error('malformed file -- no <pages> element');\n      }\n      var pages = pageRoot.getElementsByTagName('page');\n      for (var i = 0; i < pages.length; i++) {\n        var p = pages[i];\n        var id = parseInt(p.getAttribute('id'), 10);\n        var file = p.getAttribute('file');\n        if (isNaN(id)) {\n          throw new Error('malformed file -- page \"id\" attribute is NaN');\n        }\n        if (!file) {\n          throw new Error('malformed file -- needs page \"file\" attribute');\n        }\n        output.pages[parseInt(id, 10)] = file;\n      }\n\n      ['chars', 'kernings'].forEach(function (key) {\n        var element = xmlRoot.getElementsByTagName(key)[0];\n        if (!element) {\n          return;\n        }\n        var childTag = key.substring(0, key.length - 1);\n        var children = element.getElementsByTagName(childTag);\n        for (var i = 0; i < children.length; i++) {\n          var child = children[i];\n          output[key].push(parseAttributes(getAttribs(child)));\n        }\n      });\n      return output;\n    };\n\n    function getAttribs(element) {\n      var attribs = getAttribList(element);\n      return attribs.reduce(function (dict, attrib) {\n        var key = mapName(attrib.nodeName);\n        dict[key] = attrib.nodeValue;\n        return dict;\n      }, {});\n    }\n\n    function getAttribList(element) {\n      var attribs = [];\n      for (var i = 0; i < element.attributes.length; i++) {\n        attribs.push(element.attributes[i]);\n      }\n      return attribs;\n    }\n\n    function mapName(nodeName) {\n      return NAME_MAP[nodeName.toLowerCase()] || nodeName;\n    }\n  }, { './parse-attribs': 16, 'xml-parse-from-string': 17 }],\n  16: [function (require, module, exports) {\n    var GLYPH_DESIGNER_ERROR = 'chasrset';\n\n    module.exports = function parseAttributes(obj) {\n      if (GLYPH_DESIGNER_ERROR in obj) {\n        obj['charset'] = obj[GLYPH_DESIGNER_ERROR];\n        delete obj[GLYPH_DESIGNER_ERROR];\n      }\n\n      for (var k in obj) {\n        if (k === 'face' || k === 'charset') {\n          continue;\n        } else if (k === 'padding' || k === 'spacing') {\n          obj[k] = parseIntList(obj[k]);\n        } else {\n          obj[k] = parseInt(obj[k], 10);\n        }\n      }\n      return obj;\n    };\n\n    function parseIntList(data) {\n      return data.split(',').map(function (val) {\n        return parseInt(val, 10);\n      });\n    }\n  }, {}],\n  17: [function (require, module, exports) {\n    module.exports = function xmlparser() {\n      if (typeof window.DOMParser !== 'undefined') {\n        return function (str) {\n          var parser = new window.DOMParser();\n          return parser.parseFromString(str, 'application/xml');\n        };\n      }\n\n      if (typeof window.ActiveXObject !== 'undefined' && new window.ActiveXObject('Microsoft.XMLDOM')) {\n        return function (str) {\n          var xmlDoc = new window.ActiveXObject('Microsoft.XMLDOM');\n          xmlDoc.async = 'false';\n          xmlDoc.loadXML(str);\n          return xmlDoc;\n        };\n      }\n\n      return function (str) {\n        var div = document.createElement('div');\n        div.innerHTML = str;\n        return div;\n      };\n    }();\n  }, {}],\n  18: [function (require, module, exports) {\n    'use strict';\n\n    var window = require('global/window');\n    var once = require('once');\n    var isFunction = require('is-function');\n    var parseHeaders = require('parse-headers');\n    var xtend = require('xtend');\n\n    module.exports = createXHR;\n    createXHR.XMLHttpRequest = window.XMLHttpRequest || noop;\n    createXHR.XDomainRequest = 'withCredentials' in new createXHR.XMLHttpRequest() ? createXHR.XMLHttpRequest : window.XDomainRequest;\n\n    forEachArray(['get', 'put', 'post', 'patch', 'head', 'delete'], function (method) {\n      createXHR[method === 'delete' ? 'del' : method] = function (uri, options, callback) {\n        options = initParams(uri, options, callback);\n        options.method = method.toUpperCase();\n        return _createXHR(options);\n      };\n    });\n\n    function forEachArray(array, iterator) {\n      for (var i = 0; i < array.length; i++) {\n        iterator(array[i]);\n      }\n    }\n\n    function isEmpty(obj) {\n      for (var i in obj) {\n        if (obj.hasOwnProperty(i)) return false;\n      }\n      return true;\n    }\n\n    function initParams(uri, options, callback) {\n      var params = uri;\n\n      if (isFunction(options)) {\n        callback = options;\n        if (typeof uri === 'string') {\n          params = { uri: uri };\n        }\n      } else {\n        params = xtend(options, { uri: uri });\n      }\n\n      params.callback = callback;\n      return params;\n    }\n\n    function createXHR(uri, options, callback) {\n      options = initParams(uri, options, callback);\n      return _createXHR(options);\n    }\n\n    function _createXHR(options) {\n      var callback = options.callback;\n      if (typeof callback === 'undefined') {\n        throw new Error('callback argument missing');\n      }\n      callback = once(callback);\n\n      function readystatechange() {\n        if (xhr.readyState === 4) {\n          loadFunc();\n        }\n      }\n\n      function getBody() {\n        var body = undefined;\n\n        if (xhr.response) {\n          body = xhr.response;\n        } else if (xhr.responseType === 'text' || !xhr.responseType) {\n          body = xhr.responseText || xhr.responseXML;\n        }\n\n        if (isJson) {\n          try {\n            body = JSON.parse(body);\n          } catch (e) {}\n        }\n\n        return body;\n      }\n\n      var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n      };\n\n      function errorFunc(evt) {\n        clearTimeout(timeoutTimer);\n        if (!(evt instanceof Error)) {\n          evt = new Error('' + (evt || 'Unknown XMLHttpRequest Error'));\n        }\n        evt.statusCode = 0;\n        callback(evt, failureResponse);\n      }\n\n      function loadFunc() {\n        if (aborted) return;\n        var status;\n        clearTimeout(timeoutTimer);\n        if (options.useXDR && xhr.status === undefined) {\n          status = 200;\n        } else {\n          status = xhr.status === 1223 ? 204 : xhr.status;\n        }\n        var response = failureResponse;\n        var err = null;\n\n        if (status !== 0) {\n          response = {\n            body: getBody(),\n            statusCode: status,\n            method: method,\n            headers: {},\n            url: uri,\n            rawRequest: xhr\n          };\n          if (xhr.getAllResponseHeaders) {\n            response.headers = parseHeaders(xhr.getAllResponseHeaders());\n          }\n        } else {\n          err = new Error('Internal XMLHttpRequest Error');\n        }\n        callback(err, response, response.body);\n      }\n\n      var xhr = options.xhr || null;\n\n      if (!xhr) {\n        if (options.cors || options.useXDR) {\n          xhr = new createXHR.XDomainRequest();\n        } else {\n          xhr = new createXHR.XMLHttpRequest();\n        }\n      }\n\n      var key;\n      var aborted;\n      var uri = xhr.url = options.uri || options.url;\n      var method = xhr.method = options.method || 'GET';\n      var body = options.body || options.data || null;\n      var headers = xhr.headers = options.headers || {};\n      var sync = !!options.sync;\n      var isJson = false;\n      var timeoutTimer;\n\n      if ('json' in options) {\n        isJson = true;\n        headers['accept'] || headers['Accept'] || (headers['Accept'] = 'application/json');\n        if (method !== 'GET' && method !== 'HEAD') {\n          headers['content-type'] || headers['Content-Type'] || (headers['Content-Type'] = 'application/json');\n          body = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(options.json);\n        }\n      }\n\n      xhr.onreadystatechange = readystatechange;\n      xhr.onload = loadFunc;\n      xhr.onerror = errorFunc;\n\n      xhr.onprogress = function () {};\n      xhr.ontimeout = errorFunc;\n      xhr.open(method, uri, !sync, options.username, options.password);\n\n      if (!sync) {\n        xhr.withCredentials = !!options.withCredentials;\n      }\n\n      if (!sync && options.timeout > 0) {\n        timeoutTimer = setTimeout(function () {\n          aborted = true;\n          xhr.abort('timeout');\n          var e = new Error('XMLHttpRequest timeout');\n          e.code = 'ETIMEDOUT';\n          errorFunc(e);\n        }, options.timeout);\n      }\n\n      if (xhr.setRequestHeader) {\n        for (key in headers) {\n          if (headers.hasOwnProperty(key)) {\n            xhr.setRequestHeader(key, headers[key]);\n          }\n        }\n      } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error('Headers cannot be set on an XDomainRequest object');\n      }\n\n      if ('responseType' in options) {\n        xhr.responseType = options.responseType;\n      }\n\n      if ('beforeSend' in options && typeof options.beforeSend === 'function') {\n        options.beforeSend(xhr);\n      }\n\n      xhr.send(body);\n\n      return xhr;\n    }\n\n    function noop() {}\n  }, { 'global/window': 19, 'is-function': 20, 'once': 21, 'parse-headers': 24, 'xtend': 25 }],\n  19: [function (require, module, exports) {\n    (function (global) {\n      if (typeof window !== 'undefined') {\n        module.exports = window;\n      } else if (typeof global !== 'undefined') {\n        module.exports = global;\n      } else if (typeof self !== 'undefined') {\n        module.exports = self;\n      } else {\n        module.exports = {};\n      }\n    }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {});\n  }, {}],\n  20: [function (require, module, exports) {\n    module.exports = isFunction;\n\n    var toString = Object.prototype.toString;\n\n    function isFunction(fn) {\n      var string = toString.call(fn);\n      return string === '[object Function]' || typeof fn === 'function' && string !== '[object RegExp]' || typeof window !== 'undefined' && (fn === window.setTimeout || fn === window.alert || fn === window.confirm || fn === window.prompt);\n    }\n  }, {}],\n  21: [function (require, module, exports) {\n    module.exports = once;\n\n    once.proto = once(function () {\n      Object.defineProperty(Function.prototype, 'once', {\n        value: function value() {\n          return once(this);\n        },\n        configurable: true\n      });\n    });\n\n    function once(fn) {\n      var called = false;\n      return function () {\n        if (called) return;\n        called = true;\n        return fn.apply(this, arguments);\n      };\n    }\n  }, {}],\n  22: [function (require, module, exports) {\n    var isFunction = require('is-function');\n\n    module.exports = forEach;\n\n    var toString = Object.prototype.toString;\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    function forEach(list, iterator, context) {\n      if (!isFunction(iterator)) {\n        throw new TypeError('iterator must be a function');\n      }\n\n      if (arguments.length < 3) {\n        context = this;\n      }\n\n      if (toString.call(list) === '[object Array]') {\n        forEachArray(list, iterator, context);\n      } else if (typeof list === 'string') {\n        forEachString(list, iterator, context);\n      } else {\n        forEachObject(list, iterator, context);\n      }\n    }\n\n    function forEachArray(array, iterator, context) {\n      for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n          iterator.call(context, array[i], i, array);\n        }\n      }\n    }\n\n    function forEachString(string, iterator, context) {\n      for (var i = 0, len = string.length; i < len; i++) {\n        iterator.call(context, string.charAt(i), i, string);\n      }\n    }\n\n    function forEachObject(object, iterator, context) {\n      for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n          iterator.call(context, object[k], k, object);\n        }\n      }\n    }\n  }, { 'is-function': 20 }],\n  23: [function (require, module, exports) {\n    exports = module.exports = trim;\n\n    function trim(str) {\n      return str.replace(/^\\s*|\\s*$/g, '');\n    }\n\n    exports.left = function (str) {\n      return str.replace(/^\\s*/, '');\n    };\n\n    exports.right = function (str) {\n      return str.replace(/\\s*$/, '');\n    };\n  }, {}],\n  24: [function (require, module, exports) {\n    var trim = require('trim'),\n        forEach = require('for-each'),\n        isArray = function isArray(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n\n    module.exports = function (headers) {\n      if (!headers) {\n        return {};\n      }\n\n      var result = {};\n\n      forEach(trim(headers).split('\\n'), function (row) {\n        var index = row.indexOf(':'),\n            key = trim(row.slice(0, index)).toLowerCase(),\n            value = trim(row.slice(index + 1));\n\n        if (typeof result[key] === 'undefined') {\n          result[key] = value;\n        } else if (isArray(result[key])) {\n          result[key].push(value);\n        } else {\n          result[key] = [result[key], value];\n        }\n      });\n\n      return result;\n    };\n  }, { 'for-each': 22, 'trim': 23 }],\n  25: [function (require, module, exports) {\n    arguments[4][9][0].apply(exports, arguments);\n  }, { 'dup': 9 }],\n  26: [function (require, module, exports) {\n    'use strict';\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n    function toObject(val) {\n      if (val === null || val === undefined) {\n        throw new TypeError('Object.assign cannot be called with null or undefined');\n      }\n\n      return Object(val);\n    }\n\n    module.exports = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default.a || function (target, source) {\n      var from;\n      var to = toObject(target);\n      var symbols;\n\n      for (var s = 1; s < arguments.length; s++) {\n        from = Object(arguments[s]);\n\n        for (var key in from) {\n          if (hasOwnProperty.call(from, key)) {\n            to[key] = from[key];\n          }\n        }\n\n        if (__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default.a) {\n          symbols = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default()(from);\n          for (var i = 0; i < symbols.length; i++) {\n            if (propIsEnumerable.call(from, symbols[i])) {\n              to[symbols[i]] = from[symbols[i]];\n            }\n          }\n        }\n      }\n\n      return to;\n    };\n  }, {}],\n  27: [function (require, module, exports) {\n    var dtype = require('dtype');\n    var anArray = require('an-array');\n    var isBuffer = require('is-buffer');\n\n    var CW = [0, 2, 3];\n    var CCW = [2, 1, 3];\n\n    module.exports = function createQuadElements(array, opt) {\n      if (!array || !(anArray(array) || isBuffer(array))) {\n        opt = array || {};\n        array = null;\n      }\n\n      if (typeof opt === 'number') {\n          opt = { count: opt };\n        } else {\n        opt = opt || {};\n      }\n\n      var type = typeof opt.type === 'string' ? opt.type : 'uint16';\n      var count = typeof opt.count === 'number' ? opt.count : 1;\n      var start = opt.start || 0;\n\n      var dir = opt.clockwise !== false ? CW : CCW,\n          a = dir[0],\n          b = dir[1],\n          c = dir[2];\n\n      var numIndices = count * 6;\n\n      var indices = array || new (dtype(type))(numIndices);\n      for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n        var x = i + start;\n        indices[x + 0] = j + 0;\n        indices[x + 1] = j + 1;\n        indices[x + 2] = j + 2;\n        indices[x + 3] = j + a;\n        indices[x + 4] = j + b;\n        indices[x + 5] = j + c;\n      }\n      return indices;\n    };\n  }, { 'an-array': 28, 'dtype': 29, 'is-buffer': 30 }],\n  28: [function (require, module, exports) {\n    var str = Object.prototype.toString;\n\n    module.exports = anArray;\n\n    function anArray(arr) {\n      return arr.BYTES_PER_ELEMENT && str.call(arr.buffer) === '[object ArrayBuffer]' || Array.isArray(arr);\n    }\n  }, {}],\n  29: [function (require, module, exports) {\n    module.exports = function (dtype) {\n      switch (dtype) {\n        case 'int8':\n          return Int8Array;\n        case 'int16':\n          return Int16Array;\n        case 'int32':\n          return Int32Array;\n        case 'uint8':\n          return Uint8Array;\n        case 'uint16':\n          return Uint16Array;\n        case 'uint32':\n          return Uint32Array;\n        case 'float32':\n          return Float32Array;\n        case 'float64':\n          return Float64Array;\n        case 'array':\n          return Array;\n        case 'uint8_clamped':\n          return Uint8ClampedArray;\n      }\n    };\n  }, {}],\n  30: [function (require, module, exports) {\n\n    module.exports = function (obj) {\n      return !!(obj != null && (obj._isBuffer || obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)));\n    };\n  }, {}],\n  31: [function (require, module, exports) {\n    var flatten = require('flatten-vertex-data');\n\n    module.exports.attr = setAttribute;\n    module.exports.index = setIndex;\n\n    function setIndex(geometry, data, itemSize, dtype) {\n      if (typeof itemSize !== 'number') itemSize = 1;\n      if (typeof dtype !== 'number') dtype = 'uint16';\n\n      var isR69 = !geometry.index && typeof geometry.setIndex !== 'function';\n      var attrib = isR69 ? geometry.getAttribute('index') : geometry.index;\n      var newAttrib = updateAttribute(attrib, data, itemSize, dtype);\n      if (newAttrib) {\n        if (isR69) geometry.addAttribute('index', newAttrib);else geometry.index = newAttrib;\n      }\n    }\n\n    function setAttribute(geometry, key, data, itemSize, dtype) {\n      if (typeof itemSize !== 'number') itemSize = 3;\n      if (typeof dtype !== 'number') dtype = 'float32';\n      if (Array.isArray(data) && Array.isArray(data[0]) && data[0].length !== itemSize) {\n        throw new Error('Nested vertex array has unexpected size; expected ' + itemSize + ' but found ' + data[0].length);\n      }\n\n      var attrib = geometry.getAttribute(key);\n      var newAttrib = updateAttribute(attrib, data, itemSize, dtype);\n      if (newAttrib) {\n        geometry.addAttribute(key, newAttrib);\n      }\n    }\n\n    function updateAttribute(attrib, data, itemSize, dtype) {\n      data = data || [];\n      if (!attrib || rebuildAttribute(attrib, data, itemSize)) {\n        data = flatten(data, dtype);\n        attrib = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BufferAttribute\"](data, itemSize);\n        attrib.needsUpdate = true;\n        return attrib;\n      } else {\n        flatten(data, attrib.array);\n        attrib.needsUpdate = true;\n        return null;\n      }\n    }\n\n    function rebuildAttribute(attrib, data, itemSize) {\n      if (attrib.itemSize !== itemSize) return true;\n      if (!attrib.array) return true;\n      var attribLength = attrib.array.length;\n      if (Array.isArray(data) && Array.isArray(data[0])) {\n        return attribLength !== data.length * itemSize;\n      } else {\n        return attribLength !== data.length;\n      }\n    }\n  }, { 'flatten-vertex-data': 32 }],\n  32: [function (require, module, exports) {\n    var dtype = require('dtype');\n    module.exports = flattenVertexData;\n    function flattenVertexData(data, output, offset) {\n      if (!data) throw new TypeError('must specify data as first parameter');\n      offset = +(offset || 0) | 0;\n\n      if (Array.isArray(data) && Array.isArray(data[0])) {\n        var dim = data[0].length;\n        var length = data.length * dim;\n\n        if (!output || typeof output === 'string') {\n          output = new (dtype(output || 'float32'))(length + offset);\n        }\n\n        var dstLength = output.length - offset;\n        if (length !== dstLength) {\n          throw new Error('source length ' + length + ' (' + dim + 'x' + data.length + ')' + ' does not match destination length ' + dstLength);\n        }\n\n        for (var i = 0, k = offset; i < data.length; i++) {\n          for (var j = 0; j < dim; j++) {\n            output[k++] = data[i][j];\n          }\n        }\n      } else {\n        if (!output || typeof output === 'string') {\n          var Ctor = dtype(output || 'float32');\n          if (offset === 0) {\n            output = new Ctor(data);\n          } else {\n            output = new Ctor(data.length + offset);\n            output.set(data, offset);\n          }\n        } else {\n          output.set(data, offset);\n        }\n      }\n\n      return output;\n    }\n  }, { 'dtype': 33 }],\n  33: [function (require, module, exports) {\n    arguments[4][29][0].apply(exports, arguments);\n  }, { 'dup': 29 }],\n  34: [function (require, module, exports) {\n    var assign = require('object-assign');\n\n    module.exports = function createSDFShader(opt) {\n      opt = opt || {};\n      var opacity = typeof opt.opacity === 'number' ? opt.opacity : 1;\n      var alphaTest = typeof opt.alphaTest === 'number' ? opt.alphaTest : 0.0001;\n      var precision = opt.precision || 'highp';\n      var color = opt.color;\n      var map = opt.map;\n\n      delete opt.map;\n      delete opt.color;\n      delete opt.precision;\n      delete opt.opacity;\n\n      return assign({\n        uniforms: {\n          opacity: { type: 'f', value: opacity },\n          map: { type: 't', value: map || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]() },\n          color: { type: 'c', value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Color\"](color) }\n        },\n        vertexShader: ['attribute vec2 uv;', 'attribute vec4 position;', 'uniform mat4 projectionMatrix;', 'uniform mat4 modelViewMatrix;', 'varying vec2 vUv;', 'void main() {', 'vUv = uv;', 'gl_Position = projectionMatrix * modelViewMatrix * position;', '}'].join('\\n'),\n        fragmentShader: ['#ifdef GL_OES_standard_derivatives', '#extension GL_OES_standard_derivatives : enable', '#endif', 'precision ' + precision + ' float;', 'uniform float opacity;', 'uniform vec3 color;', 'uniform sampler2D map;', 'varying vec2 vUv;', 'float aastep(float value) {', '  #ifdef GL_OES_standard_derivatives', '    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;', '  #else', '    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));', '  #endif', '  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);', '}', 'void main() {', '  vec4 texColor = texture2D(map, vUv);', '  float alpha = aastep(texColor.a);', '  gl_FragColor = vec4(color, opacity * alpha);', alphaTest === 0 ? '' : '  if (gl_FragColor.a < ' + alphaTest + ') discard;', '}'].join('\\n')\n      }, opt);\n    };\n  }, { 'object-assign': 26 }],\n  35: [function (require, module, exports) {\n    var loadFont = require('load-bmfont');\n\n    module.exports = function (opt, cb) {\n      loadFont(opt.font, function (err, font) {\n        if (err) throw err;\n        PANOLENS.Utils.TextureLoader.load(opt.image, function (tex) {\n          cb(font, tex);\n        });\n      });\n    };\n  }, { 'load-bmfont': 10 }],\n  36: [function (require, module, exports) {\n    var createText = require('../');\n    var SDFShader = require('../shaders/sdf');\n\n    if (PANOLENS && PANOLENS.Utils && PANOLENS.SpriteText) {\n      PANOLENS.Utils.loadBMFont = function (fontObject, callback) {\n        require('./load')(fontObject, PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype, callback));\n      };\n      PANOLENS.SpriteText.prototype.generateTextGeometry = createText;\n      PANOLENS.SpriteText.prototype.generateSDFShader = SDFShader;\n    }\n  }, { '../': 1, '../shaders/sdf': 34, './load': 35 }],\n  37: [function (require, module, exports) {\n    (function (global) {\n      /*!\n      * The buffer module from node.js, for the browser.\n      *\n      * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n      * @license  MIT\n      */\n      'use strict';\n\n      var base64 = require('base64-js');\n      var ieee754 = require('ieee754');\n      var isArray = require('isarray');\n\n      exports.Buffer = Buffer;\n      exports.SlowBuffer = SlowBuffer;\n      exports.INSPECT_MAX_BYTES = 50;\n      Buffer.poolSize = 8192;\n\n      var rootParent = {};\n\n      Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n\n      function typedArraySupport() {\n        try {\n          var arr = new Uint8Array(1);\n          arr.foo = function () {\n            return 42;\n          };\n          return arr.foo() === 42 && typeof arr.subarray === 'function' && arr.subarray(1, 1).byteLength === 0;\n        } catch (e) {\n          return false;\n        }\n      }\n\n      function kMaxLength() {\n        return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n      }\n\n      function Buffer(arg) {\n        if (!(this instanceof Buffer)) {\n          if (arguments.length > 1) return new Buffer(arg, arguments[1]);\n          return new Buffer(arg);\n        }\n\n        if (!Buffer.TYPED_ARRAY_SUPPORT) {\n          this.length = 0;\n          this.parent = undefined;\n        }\n\n        if (typeof arg === 'number') {\n          return fromNumber(this, arg);\n        }\n\n        if (typeof arg === 'string') {\n          return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8');\n        }\n\n        return fromObject(this, arg);\n      }\n\n      function fromNumber(that, length) {\n        that = allocate(that, length < 0 ? 0 : checked(length) | 0);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) {\n          for (var i = 0; i < length; i++) {\n            that[i] = 0;\n          }\n        }\n        return that;\n      }\n\n      function fromString(that, string, encoding) {\n        if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8';\n\n        var length = byteLength(string, encoding) | 0;\n        that = allocate(that, length);\n\n        that.write(string, encoding);\n        return that;\n      }\n\n      function fromObject(that, object) {\n        if (Buffer.isBuffer(object)) return fromBuffer(that, object);\n\n        if (isArray(object)) return fromArray(that, object);\n\n        if (object == null) {\n          throw new TypeError('must start with number, buffer, array or string');\n        }\n\n        if (typeof ArrayBuffer !== 'undefined') {\n          if (object.buffer instanceof ArrayBuffer) {\n            return fromTypedArray(that, object);\n          }\n          if (object instanceof ArrayBuffer) {\n            return fromArrayBuffer(that, object);\n          }\n        }\n\n        if (object.length) return fromArrayLike(that, object);\n\n        return fromJsonObject(that, object);\n      }\n\n      function fromBuffer(that, buffer) {\n        var length = checked(buffer.length) | 0;\n        that = allocate(that, length);\n        buffer.copy(that, 0, 0, length);\n        return that;\n      }\n\n      function fromArray(that, array) {\n        var length = checked(array.length) | 0;\n        that = allocate(that, length);\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      function fromTypedArray(that, array) {\n        var length = checked(array.length) | 0;\n        that = allocate(that, length);\n\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      function fromArrayBuffer(that, array) {\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          that = new Uint8Array(array);\n          that.__proto__ = Buffer.prototype;\n        } else {\n          that = fromTypedArray(that, new Uint8Array(array));\n        }\n        return that;\n      }\n\n      function fromArrayLike(that, array) {\n        var length = checked(array.length) | 0;\n        that = allocate(that, length);\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      function fromJsonObject(that, object) {\n        var array;\n        var length = 0;\n\n        if (object.type === 'Buffer' && isArray(object.data)) {\n          array = object.data;\n          length = checked(array.length) | 0;\n        }\n        that = allocate(that, length);\n\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        Buffer.prototype.__proto__ = Uint8Array.prototype;\n        Buffer.__proto__ = Uint8Array;\n      } else {\n        Buffer.prototype.length = undefined;\n        Buffer.prototype.parent = undefined;\n      }\n\n      function allocate(that, length) {\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          that = new Uint8Array(length);\n          that.__proto__ = Buffer.prototype;\n        } else {\n          that.length = length;\n        }\n\n        var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1;\n        if (fromPool) that.parent = rootParent;\n\n        return that;\n      }\n\n      function checked(length) {\n        if (length >= kMaxLength()) {\n          throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n        }\n        return length | 0;\n      }\n\n      function SlowBuffer(subject, encoding) {\n        if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding);\n\n        var buf = new Buffer(subject, encoding);\n        delete buf.parent;\n        return buf;\n      }\n\n      Buffer.isBuffer = function isBuffer(b) {\n        return !!(b != null && b._isBuffer);\n      };\n\n      Buffer.compare = function compare(a, b) {\n        if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n          throw new TypeError('Arguments must be Buffers');\n        }\n\n        if (a === b) return 0;\n\n        var x = a.length;\n        var y = b.length;\n\n        var i = 0;\n        var len = Math.min(x, y);\n        while (i < len) {\n          if (a[i] !== b[i]) break;\n\n          ++i;\n        }\n\n        if (i !== len) {\n          x = a[i];\n          y = b[i];\n        }\n\n        if (x < y) return -1;\n        if (y < x) return 1;\n        return 0;\n      };\n\n      Buffer.isEncoding = function isEncoding(encoding) {\n        switch (String(encoding).toLowerCase()) {\n          case 'hex':\n          case 'utf8':\n          case 'utf-8':\n          case 'ascii':\n          case 'binary':\n          case 'base64':\n          case 'raw':\n          case 'ucs2':\n          case 'ucs-2':\n          case 'utf16le':\n          case 'utf-16le':\n            return true;\n          default:\n            return false;\n        }\n      };\n\n      Buffer.concat = function concat(list, length) {\n        if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.');\n\n        if (list.length === 0) {\n          return new Buffer(0);\n        }\n\n        var i;\n        if (length === undefined) {\n          length = 0;\n          for (i = 0; i < list.length; i++) {\n            length += list[i].length;\n          }\n        }\n\n        var buf = new Buffer(length);\n        var pos = 0;\n        for (i = 0; i < list.length; i++) {\n          var item = list[i];\n          item.copy(buf, pos);\n          pos += item.length;\n        }\n        return buf;\n      };\n\n      function byteLength(string, encoding) {\n        if (typeof string !== 'string') string = '' + string;\n\n        var len = string.length;\n        if (len === 0) return 0;\n\n        var loweredCase = false;\n        for (;;) {\n          switch (encoding) {\n            case 'ascii':\n            case 'binary':\n            case 'raw':\n            case 'raws':\n              return len;\n            case 'utf8':\n            case 'utf-8':\n              return utf8ToBytes(string).length;\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return len * 2;\n            case 'hex':\n              return len >>> 1;\n            case 'base64':\n              return base64ToBytes(string).length;\n            default:\n              if (loweredCase) return utf8ToBytes(string).length;\n              encoding = ('' + encoding).toLowerCase();\n              loweredCase = true;\n          }\n        }\n      }\n      Buffer.byteLength = byteLength;\n\n      function slowToString(encoding, start, end) {\n        var loweredCase = false;\n\n        start = start | 0;\n        end = end === undefined || end === Infinity ? this.length : end | 0;\n\n        if (!encoding) encoding = 'utf8';\n        if (start < 0) start = 0;\n        if (end > this.length) end = this.length;\n        if (end <= start) return '';\n\n        while (true) {\n          switch (encoding) {\n            case 'hex':\n              return hexSlice(this, start, end);\n\n            case 'utf8':\n            case 'utf-8':\n              return utf8Slice(this, start, end);\n\n            case 'ascii':\n              return asciiSlice(this, start, end);\n\n            case 'binary':\n              return binarySlice(this, start, end);\n\n            case 'base64':\n              return base64Slice(this, start, end);\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return utf16leSlice(this, start, end);\n\n            default:\n              if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n              encoding = (encoding + '').toLowerCase();\n              loweredCase = true;\n          }\n        }\n      }\n\n      Buffer.prototype._isBuffer = true;\n\n      Buffer.prototype.toString = function toString() {\n        var length = this.length | 0;\n        if (length === 0) return '';\n        if (arguments.length === 0) return utf8Slice(this, 0, length);\n        return slowToString.apply(this, arguments);\n      };\n\n      Buffer.prototype.equals = function equals(b) {\n        if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n        if (this === b) return true;\n        return Buffer.compare(this, b) === 0;\n      };\n\n      Buffer.prototype.inspect = function inspect() {\n        var str = '';\n        var max = exports.INSPECT_MAX_BYTES;\n        if (this.length > 0) {\n          str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n          if (this.length > max) str += ' ... ';\n        }\n        return '<Buffer ' + str + '>';\n      };\n\n      Buffer.prototype.compare = function compare(b) {\n        if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n        if (this === b) return 0;\n        return Buffer.compare(this, b);\n      };\n\n      Buffer.prototype.indexOf = function indexOf(val, byteOffset) {\n        if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff;else if (byteOffset < -0x80000000) byteOffset = -0x80000000;\n        byteOffset >>= 0;\n\n        if (this.length === 0) return -1;\n        if (byteOffset >= this.length) return -1;\n\n        if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0);\n\n        if (typeof val === 'string') {\n          if (val.length === 0) return -1;\n          return String.prototype.indexOf.call(this, val, byteOffset);\n        }\n        if (Buffer.isBuffer(val)) {\n          return arrayIndexOf(this, val, byteOffset);\n        }\n        if (typeof val === 'number') {\n          if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n            return Uint8Array.prototype.indexOf.call(this, val, byteOffset);\n          }\n          return arrayIndexOf(this, [val], byteOffset);\n        }\n\n        function arrayIndexOf(arr, val, byteOffset) {\n          var foundIndex = -1;\n          for (var i = 0; byteOffset + i < arr.length; i++) {\n            if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n              if (foundIndex === -1) foundIndex = i;\n              if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex;\n            } else {\n              foundIndex = -1;\n            }\n          }\n          return -1;\n        }\n\n        throw new TypeError('val must be string, number or Buffer');\n      };\n\n      function hexWrite(buf, string, offset, length) {\n        offset = Number(offset) || 0;\n        var remaining = buf.length - offset;\n        if (!length) {\n          length = remaining;\n        } else {\n          length = Number(length);\n          if (length > remaining) {\n            length = remaining;\n          }\n        }\n\n        var strLen = string.length;\n        if (strLen % 2 !== 0) throw new Error('Invalid hex string');\n\n        if (length > strLen / 2) {\n          length = strLen / 2;\n        }\n        for (var i = 0; i < length; i++) {\n          var parsed = parseInt(string.substr(i * 2, 2), 16);\n          if (isNaN(parsed)) throw new Error('Invalid hex string');\n          buf[offset + i] = parsed;\n        }\n        return i;\n      }\n\n      function utf8Write(buf, string, offset, length) {\n        return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n      }\n\n      function asciiWrite(buf, string, offset, length) {\n        return blitBuffer(asciiToBytes(string), buf, offset, length);\n      }\n\n      function binaryWrite(buf, string, offset, length) {\n        return asciiWrite(buf, string, offset, length);\n      }\n\n      function base64Write(buf, string, offset, length) {\n        return blitBuffer(base64ToBytes(string), buf, offset, length);\n      }\n\n      function ucs2Write(buf, string, offset, length) {\n        return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n      }\n\n      Buffer.prototype.write = function write(string, offset, length, encoding) {\n        if (offset === undefined) {\n          encoding = 'utf8';\n          length = this.length;\n          offset = 0;\n        } else if (length === undefined && typeof offset === 'string') {\n          encoding = offset;\n          length = this.length;\n          offset = 0;\n        } else if (isFinite(offset)) {\n          offset = offset | 0;\n          if (isFinite(length)) {\n            length = length | 0;\n            if (encoding === undefined) encoding = 'utf8';\n          } else {\n            encoding = length;\n            length = undefined;\n          }\n        } else {\n          var swap = encoding;\n          encoding = offset;\n          offset = length | 0;\n          length = swap;\n        }\n\n        var remaining = this.length - offset;\n        if (length === undefined || length > remaining) length = remaining;\n\n        if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n          throw new RangeError('attempt to write outside buffer bounds');\n        }\n\n        if (!encoding) encoding = 'utf8';\n\n        var loweredCase = false;\n        for (;;) {\n          switch (encoding) {\n            case 'hex':\n              return hexWrite(this, string, offset, length);\n\n            case 'utf8':\n            case 'utf-8':\n              return utf8Write(this, string, offset, length);\n\n            case 'ascii':\n              return asciiWrite(this, string, offset, length);\n\n            case 'binary':\n              return binaryWrite(this, string, offset, length);\n\n            case 'base64':\n              return base64Write(this, string, offset, length);\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return ucs2Write(this, string, offset, length);\n\n            default:\n              if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n              encoding = ('' + encoding).toLowerCase();\n              loweredCase = true;\n          }\n        }\n      };\n\n      Buffer.prototype.toJSON = function toJSON() {\n        return {\n          type: 'Buffer',\n          data: Array.prototype.slice.call(this._arr || this, 0)\n        };\n      };\n\n      function base64Slice(buf, start, end) {\n        if (start === 0 && end === buf.length) {\n          return base64.fromByteArray(buf);\n        } else {\n          return base64.fromByteArray(buf.slice(start, end));\n        }\n      }\n\n      function utf8Slice(buf, start, end) {\n        end = Math.min(buf.length, end);\n        var res = [];\n\n        var i = start;\n        while (i < end) {\n          var firstByte = buf[i];\n          var codePoint = null;\n          var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n          if (i + bytesPerSequence <= end) {\n            var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n            switch (bytesPerSequence) {\n              case 1:\n                if (firstByte < 0x80) {\n                  codePoint = firstByte;\n                }\n                break;\n              case 2:\n                secondByte = buf[i + 1];\n                if ((secondByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n                  if (tempCodePoint > 0x7F) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n                break;\n              case 3:\n                secondByte = buf[i + 1];\n                thirdByte = buf[i + 2];\n                if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n                  if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n                break;\n              case 4:\n                secondByte = buf[i + 1];\n                thirdByte = buf[i + 2];\n                fourthByte = buf[i + 3];\n                if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n                  if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n            }\n          }\n\n          if (codePoint === null) {\n            codePoint = 0xFFFD;\n            bytesPerSequence = 1;\n          } else if (codePoint > 0xFFFF) {\n            codePoint -= 0x10000;\n            res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n            codePoint = 0xDC00 | codePoint & 0x3FF;\n          }\n\n          res.push(codePoint);\n          i += bytesPerSequence;\n        }\n\n        return decodeCodePointsArray(res);\n      }\n\n      var MAX_ARGUMENTS_LENGTH = 0x1000;\n\n      function decodeCodePointsArray(codePoints) {\n        var len = codePoints.length;\n        if (len <= MAX_ARGUMENTS_LENGTH) {\n          return String.fromCharCode.apply(String, codePoints);\n        }\n\n        var res = '';\n        var i = 0;\n        while (i < len) {\n          res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n        }\n        return res;\n      }\n\n      function asciiSlice(buf, start, end) {\n        var ret = '';\n        end = Math.min(buf.length, end);\n\n        for (var i = start; i < end; i++) {\n          ret += String.fromCharCode(buf[i] & 0x7F);\n        }\n        return ret;\n      }\n\n      function binarySlice(buf, start, end) {\n        var ret = '';\n        end = Math.min(buf.length, end);\n\n        for (var i = start; i < end; i++) {\n          ret += String.fromCharCode(buf[i]);\n        }\n        return ret;\n      }\n\n      function hexSlice(buf, start, end) {\n        var len = buf.length;\n\n        if (!start || start < 0) start = 0;\n        if (!end || end < 0 || end > len) end = len;\n\n        var out = '';\n        for (var i = start; i < end; i++) {\n          out += toHex(buf[i]);\n        }\n        return out;\n      }\n\n      function utf16leSlice(buf, start, end) {\n        var bytes = buf.slice(start, end);\n        var res = '';\n        for (var i = 0; i < bytes.length; i += 2) {\n          res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n        }\n        return res;\n      }\n\n      Buffer.prototype.slice = function slice(start, end) {\n        var len = this.length;\n        start = ~~start;\n        end = end === undefined ? len : ~~end;\n\n        if (start < 0) {\n          start += len;\n          if (start < 0) start = 0;\n        } else if (start > len) {\n          start = len;\n        }\n\n        if (end < 0) {\n          end += len;\n          if (end < 0) end = 0;\n        } else if (end > len) {\n          end = len;\n        }\n\n        if (end < start) end = start;\n\n        var newBuf;\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          newBuf = this.subarray(start, end);\n          newBuf.__proto__ = Buffer.prototype;\n        } else {\n          var sliceLen = end - start;\n          newBuf = new Buffer(sliceLen, undefined);\n          for (var i = 0; i < sliceLen; i++) {\n            newBuf[i] = this[i + start];\n          }\n        }\n\n        if (newBuf.length) newBuf.parent = this.parent || this;\n\n        return newBuf;\n      };\n\n      function checkOffset(offset, ext, length) {\n        if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n        if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n      }\n\n      Buffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n        var val = this[offset];\n        var mul = 1;\n        var i = 0;\n        while (++i < byteLength && (mul *= 0x100)) {\n          val += this[offset + i] * mul;\n        }\n\n        return val;\n      };\n\n      Buffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) {\n          checkOffset(offset, byteLength, this.length);\n        }\n\n        var val = this[offset + --byteLength];\n        var mul = 1;\n        while (byteLength > 0 && (mul *= 0x100)) {\n          val += this[offset + --byteLength] * mul;\n        }\n\n        return val;\n      };\n\n      Buffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 1, this.length);\n        return this[offset];\n      };\n\n      Buffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        return this[offset] | this[offset + 1] << 8;\n      };\n\n      Buffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        return this[offset] << 8 | this[offset + 1];\n      };\n\n      Buffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n      };\n\n      Buffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n      };\n\n      Buffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n        var val = this[offset];\n        var mul = 1;\n        var i = 0;\n        while (++i < byteLength && (mul *= 0x100)) {\n          val += this[offset + i] * mul;\n        }\n        mul *= 0x80;\n\n        if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n        return val;\n      };\n\n      Buffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n        var i = byteLength;\n        var mul = 1;\n        var val = this[offset + --i];\n        while (i > 0 && (mul *= 0x100)) {\n          val += this[offset + --i] * mul;\n        }\n        mul *= 0x80;\n\n        if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n        return val;\n      };\n\n      Buffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 1, this.length);\n        if (!(this[offset] & 0x80)) return this[offset];\n        return (0xff - this[offset] + 1) * -1;\n      };\n\n      Buffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        var val = this[offset] | this[offset + 1] << 8;\n        return val & 0x8000 ? val | 0xFFFF0000 : val;\n      };\n\n      Buffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        var val = this[offset + 1] | this[offset] << 8;\n        return val & 0x8000 ? val | 0xFFFF0000 : val;\n      };\n\n      Buffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n      };\n\n      Buffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n      };\n\n      Buffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return ieee754.read(this, offset, true, 23, 4);\n      };\n\n      Buffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return ieee754.read(this, offset, false, 23, 4);\n      };\n\n      Buffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 8, this.length);\n        return ieee754.read(this, offset, true, 52, 8);\n      };\n\n      Buffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 8, this.length);\n        return ieee754.read(this, offset, false, 52, 8);\n      };\n\n      function checkInt(buf, value, offset, ext, max, min) {\n        if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance');\n        if (value > max || value < min) throw new RangeError('value is out of bounds');\n        if (offset + ext > buf.length) throw new RangeError('index out of range');\n      }\n\n      Buffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0);\n\n        var mul = 1;\n        var i = 0;\n        this[offset] = value & 0xFF;\n        while (++i < byteLength && (mul *= 0x100)) {\n          this[offset + i] = value / mul & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0);\n\n        var i = byteLength - 1;\n        var mul = 1;\n        this[offset + i] = value & 0xFF;\n        while (--i >= 0 && (mul *= 0x100)) {\n          this[offset + i] = value / mul & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n        this[offset] = value & 0xff;\n        return offset + 1;\n      };\n\n      function objectWriteUInt16(buf, value, offset, littleEndian) {\n        if (value < 0) value = 0xffff + value + 1;\n        for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n          buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n        }\n      }\n\n      Buffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n        } else {\n          objectWriteUInt16(this, value, offset, true);\n        }\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 8;\n          this[offset + 1] = value & 0xff;\n        } else {\n          objectWriteUInt16(this, value, offset, false);\n        }\n        return offset + 2;\n      };\n\n      function objectWriteUInt32(buf, value, offset, littleEndian) {\n        if (value < 0) value = 0xffffffff + value + 1;\n        for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n          buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n        }\n      }\n\n      Buffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset + 3] = value >>> 24;\n          this[offset + 2] = value >>> 16;\n          this[offset + 1] = value >>> 8;\n          this[offset] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, true);\n        }\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 24;\n          this[offset + 1] = value >>> 16;\n          this[offset + 2] = value >>> 8;\n          this[offset + 3] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, false);\n        }\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) {\n          var limit = Math.pow(2, 8 * byteLength - 1);\n\n          checkInt(this, value, offset, byteLength, limit - 1, -limit);\n        }\n\n        var i = 0;\n        var mul = 1;\n        var sub = value < 0 ? 1 : 0;\n        this[offset] = value & 0xFF;\n        while (++i < byteLength && (mul *= 0x100)) {\n          this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) {\n          var limit = Math.pow(2, 8 * byteLength - 1);\n\n          checkInt(this, value, offset, byteLength, limit - 1, -limit);\n        }\n\n        var i = byteLength - 1;\n        var mul = 1;\n        var sub = value < 0 ? 1 : 0;\n        this[offset + i] = value & 0xFF;\n        while (--i >= 0 && (mul *= 0x100)) {\n          this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n        if (value < 0) value = 0xff + value + 1;\n        this[offset] = value & 0xff;\n        return offset + 1;\n      };\n\n      Buffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n        } else {\n          objectWriteUInt16(this, value, offset, true);\n        }\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 8;\n          this[offset + 1] = value & 0xff;\n        } else {\n          objectWriteUInt16(this, value, offset, false);\n        }\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n          this[offset + 2] = value >>> 16;\n          this[offset + 3] = value >>> 24;\n        } else {\n          objectWriteUInt32(this, value, offset, true);\n        }\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n        if (value < 0) value = 0xffffffff + value + 1;\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 24;\n          this[offset + 1] = value >>> 16;\n          this[offset + 2] = value >>> 8;\n          this[offset + 3] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, false);\n        }\n        return offset + 4;\n      };\n\n      function checkIEEE754(buf, value, offset, ext, max, min) {\n        if (value > max || value < min) throw new RangeError('value is out of bounds');\n        if (offset + ext > buf.length) throw new RangeError('index out of range');\n        if (offset < 0) throw new RangeError('index out of range');\n      }\n\n      function writeFloat(buf, value, offset, littleEndian, noAssert) {\n        if (!noAssert) {\n          checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n        }\n        ieee754.write(buf, value, offset, littleEndian, 23, 4);\n        return offset + 4;\n      }\n\n      Buffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n        return writeFloat(this, value, offset, true, noAssert);\n      };\n\n      Buffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n        return writeFloat(this, value, offset, false, noAssert);\n      };\n\n      function writeDouble(buf, value, offset, littleEndian, noAssert) {\n        if (!noAssert) {\n          checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n        }\n        ieee754.write(buf, value, offset, littleEndian, 52, 8);\n        return offset + 8;\n      }\n\n      Buffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n        return writeDouble(this, value, offset, true, noAssert);\n      };\n\n      Buffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n        return writeDouble(this, value, offset, false, noAssert);\n      };\n\n      Buffer.prototype.copy = function copy(target, targetStart, start, end) {\n        if (!start) start = 0;\n        if (!end && end !== 0) end = this.length;\n        if (targetStart >= target.length) targetStart = target.length;\n        if (!targetStart) targetStart = 0;\n        if (end > 0 && end < start) end = start;\n\n        if (end === start) return 0;\n        if (target.length === 0 || this.length === 0) return 0;\n\n        if (targetStart < 0) {\n          throw new RangeError('targetStart out of bounds');\n        }\n        if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n        if (end < 0) throw new RangeError('sourceEnd out of bounds');\n\n        if (end > this.length) end = this.length;\n        if (target.length - targetStart < end - start) {\n          end = target.length - targetStart + start;\n        }\n\n        var len = end - start;\n        var i;\n\n        if (this === target && start < targetStart && targetStart < end) {\n          for (i = len - 1; i >= 0; i--) {\n            target[i + targetStart] = this[i + start];\n          }\n        } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n          for (i = 0; i < len; i++) {\n            target[i + targetStart] = this[i + start];\n          }\n        } else {\n          Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n        }\n\n        return len;\n      };\n\n      Buffer.prototype.fill = function fill(value, start, end) {\n        if (!value) value = 0;\n        if (!start) start = 0;\n        if (!end) end = this.length;\n\n        if (end < start) throw new RangeError('end < start');\n\n        if (end === start) return;\n        if (this.length === 0) return;\n\n        if (start < 0 || start >= this.length) throw new RangeError('start out of bounds');\n        if (end < 0 || end > this.length) throw new RangeError('end out of bounds');\n\n        var i;\n        if (typeof value === 'number') {\n          for (i = start; i < end; i++) {\n            this[i] = value;\n          }\n        } else {\n          var bytes = utf8ToBytes(value.toString());\n          var len = bytes.length;\n          for (i = start; i < end; i++) {\n            this[i] = bytes[i % len];\n          }\n        }\n\n        return this;\n      };\n\n      var INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\n      function base64clean(str) {\n        str = stringtrim(str).replace(INVALID_BASE64_RE, '');\n\n        if (str.length < 2) return '';\n\n        while (str.length % 4 !== 0) {\n          str = str + '=';\n        }\n        return str;\n      }\n\n      function stringtrim(str) {\n        if (str.trim) return str.trim();\n        return str.replace(/^\\s+|\\s+$/g, '');\n      }\n\n      function toHex(n) {\n        if (n < 16) return '0' + n.toString(16);\n        return n.toString(16);\n      }\n\n      function utf8ToBytes(string, units) {\n        units = units || Infinity;\n        var codePoint;\n        var length = string.length;\n        var leadSurrogate = null;\n        var bytes = [];\n\n        for (var i = 0; i < length; i++) {\n          codePoint = string.charCodeAt(i);\n\n          if (codePoint > 0xD7FF && codePoint < 0xE000) {\n            if (!leadSurrogate) {\n              if (codePoint > 0xDBFF) {\n                if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n                continue;\n              } else if (i + 1 === length) {\n                if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n                continue;\n              }\n\n              leadSurrogate = codePoint;\n\n              continue;\n            }\n\n            if (codePoint < 0xDC00) {\n              if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n              leadSurrogate = codePoint;\n              continue;\n            }\n\n            codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n          } else if (leadSurrogate) {\n            if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          }\n\n          leadSurrogate = null;\n\n          if (codePoint < 0x80) {\n            if ((units -= 1) < 0) break;\n            bytes.push(codePoint);\n          } else if (codePoint < 0x800) {\n            if ((units -= 2) < 0) break;\n            bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n          } else if (codePoint < 0x10000) {\n            if ((units -= 3) < 0) break;\n            bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n          } else if (codePoint < 0x110000) {\n            if ((units -= 4) < 0) break;\n            bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n          } else {\n            throw new Error('Invalid code point');\n          }\n        }\n\n        return bytes;\n      }\n\n      function asciiToBytes(str) {\n        var byteArray = [];\n        for (var i = 0; i < str.length; i++) {\n          byteArray.push(str.charCodeAt(i) & 0xFF);\n        }\n        return byteArray;\n      }\n\n      function utf16leToBytes(str, units) {\n        var c, hi, lo;\n        var byteArray = [];\n        for (var i = 0; i < str.length; i++) {\n          if ((units -= 2) < 0) break;\n\n          c = str.charCodeAt(i);\n          hi = c >> 8;\n          lo = c % 256;\n          byteArray.push(lo);\n          byteArray.push(hi);\n        }\n\n        return byteArray;\n      }\n\n      function base64ToBytes(str) {\n        return base64.toByteArray(base64clean(str));\n      }\n\n      function blitBuffer(src, dst, offset, length) {\n        for (var i = 0; i < length; i++) {\n          if (i + offset >= dst.length || i >= src.length) break;\n          dst[i + offset] = src[i];\n        }\n        return i;\n      }\n    }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {});\n  }, { 'base64-js': 38, 'ieee754': 39, 'isarray': 40 }],\n  38: [function (require, module, exports) {\n    (function (exports) {\n      'use strict';\n\n      var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n      var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\n\n      var PLUS = '+'.charCodeAt(0);\n      var SLASH = '/'.charCodeAt(0);\n      var NUMBER = '0'.charCodeAt(0);\n      var LOWER = 'a'.charCodeAt(0);\n      var UPPER = 'A'.charCodeAt(0);\n      var PLUS_URL_SAFE = '-'.charCodeAt(0);\n      var SLASH_URL_SAFE = '_'.charCodeAt(0);\n\n      function decode(elt) {\n        var code = elt.charCodeAt(0);\n        if (code === PLUS || code === PLUS_URL_SAFE) return 62;\n        if (code === SLASH || code === SLASH_URL_SAFE) return 63;\n        if (code < NUMBER) return -1;\n        if (code < NUMBER + 10) return code - NUMBER + 26 + 26;\n        if (code < UPPER + 26) return code - UPPER;\n        if (code < LOWER + 26) return code - LOWER + 26;\n      }\n\n      function b64ToByteArray(b64) {\n        var i, j, l, tmp, placeHolders, arr;\n\n        if (b64.length % 4 > 0) {\n          throw new Error('Invalid string. Length must be a multiple of 4');\n        }\n\n        var len = b64.length;\n        placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0;\n\n        arr = new Arr(b64.length * 3 / 4 - placeHolders);\n\n        l = placeHolders > 0 ? b64.length - 4 : b64.length;\n\n        var L = 0;\n\n        function push(v) {\n          arr[L++] = v;\n        }\n\n        for (i = 0, j = 0; i < l; i += 4, j += 3) {\n          tmp = decode(b64.charAt(i)) << 18 | decode(b64.charAt(i + 1)) << 12 | decode(b64.charAt(i + 2)) << 6 | decode(b64.charAt(i + 3));\n          push((tmp & 0xFF0000) >> 16);\n          push((tmp & 0xFF00) >> 8);\n          push(tmp & 0xFF);\n        }\n\n        if (placeHolders === 2) {\n          tmp = decode(b64.charAt(i)) << 2 | decode(b64.charAt(i + 1)) >> 4;\n          push(tmp & 0xFF);\n        } else if (placeHolders === 1) {\n          tmp = decode(b64.charAt(i)) << 10 | decode(b64.charAt(i + 1)) << 4 | decode(b64.charAt(i + 2)) >> 2;\n          push(tmp >> 8 & 0xFF);\n          push(tmp & 0xFF);\n        }\n\n        return arr;\n      }\n\n      function uint8ToBase64(uint8) {\n        var i;\n        var extraBytes = uint8.length % 3;\n        var output = '';\n        var temp, length;\n\n        function encode(num) {\n          return lookup.charAt(num);\n        }\n\n        function tripletToBase64(num) {\n          return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F);\n        }\n\n        for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n          temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2];\n          output += tripletToBase64(temp);\n        }\n\n        switch (extraBytes) {\n          case 1:\n            temp = uint8[uint8.length - 1];\n            output += encode(temp >> 2);\n            output += encode(temp << 4 & 0x3F);\n            output += '==';\n            break;\n          case 2:\n            temp = (uint8[uint8.length - 2] << 8) + uint8[uint8.length - 1];\n            output += encode(temp >> 10);\n            output += encode(temp >> 4 & 0x3F);\n            output += encode(temp << 2 & 0x3F);\n            output += '=';\n            break;\n          default:\n            break;\n        }\n\n        return output;\n      }\n\n      exports.toByteArray = b64ToByteArray;\n      exports.fromByteArray = uint8ToBase64;\n    })(typeof exports === 'undefined' ? this.base64js = {} : exports);\n  }, {}],\n  39: [function (require, module, exports) {\n    exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n      var e, m;\n      var eLen = nBytes * 8 - mLen - 1;\n      var eMax = (1 << eLen) - 1;\n      var eBias = eMax >> 1;\n      var nBits = -7;\n      var i = isLE ? nBytes - 1 : 0;\n      var d = isLE ? -1 : 1;\n      var s = buffer[offset + i];\n\n      i += d;\n\n      e = s & (1 << -nBits) - 1;\n      s >>= -nBits;\n      nBits += eLen;\n      for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n      m = e & (1 << -nBits) - 1;\n      e >>= -nBits;\n      nBits += mLen;\n      for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n      if (e === 0) {\n        e = 1 - eBias;\n      } else if (e === eMax) {\n        return m ? NaN : (s ? -1 : 1) * Infinity;\n      } else {\n        m = m + Math.pow(2, mLen);\n        e = e - eBias;\n      }\n      return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n    };\n\n    exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n      var e, m, c;\n      var eLen = nBytes * 8 - mLen - 1;\n      var eMax = (1 << eLen) - 1;\n      var eBias = eMax >> 1;\n      var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n      var i = isLE ? 0 : nBytes - 1;\n      var d = isLE ? 1 : -1;\n      var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n\n      value = Math.abs(value);\n\n      if (isNaN(value) || value === Infinity) {\n        m = isNaN(value) ? 1 : 0;\n        e = eMax;\n      } else {\n        e = Math.floor(Math.log(value) / Math.LN2);\n        if (value * (c = Math.pow(2, -e)) < 1) {\n          e--;\n          c *= 2;\n        }\n        if (e + eBias >= 1) {\n          value += rt / c;\n        } else {\n          value += rt * Math.pow(2, 1 - eBias);\n        }\n        if (value * c >= 2) {\n          e++;\n          c /= 2;\n        }\n\n        if (e + eBias >= eMax) {\n          m = 0;\n          e = eMax;\n        } else if (e + eBias >= 1) {\n          m = (value * c - 1) * Math.pow(2, mLen);\n          e = e + eBias;\n        } else {\n          m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n          e = 0;\n        }\n      }\n\n      for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n      e = e << mLen | m;\n      eLen += mLen;\n      for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n      buffer[offset + i - d] |= s * 128;\n    };\n  }, {}],\n  40: [function (require, module, exports) {\n    var toString = {}.toString;\n\n    module.exports = Array.isArray || function (arr) {\n      return toString.call(arr) == '[object Array]';\n    };\n  }, {}] }, {}, [36]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PANOLENS);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(60), __webpack_require__(330)(module), __webpack_require__(24)))\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(324);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages__ = __webpack_require__(65);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\nvar routes = __WEBPACK_IMPORTED_MODULE_2__pages__[\"a\" /* pages */].map(function (page) {\n  var name = page.name;\n  return {\n    path: '/' + name.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase(),\n    name: name,\n    component: page\n  };\n});\n\nconsole.log(routes);\n\nroutes.push({\n  path: '*',\n  redirect: '/demo-pano'\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({ routes: routes }));\n\n/***/ }),\n\n/***/ 63:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(327)\n\nvar Component = __webpack_require__(7)(\n  /* script */\n  __webpack_require__(66),\n  /* template */\n  __webpack_require__(318),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 64:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue__ = __webpack_require__(63);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(62);\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App_vue___default.a);\n  }\n});\n\n/***/ }),\n\n/***/ 65:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return pages; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_pano__ = __webpack_require__(312);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__demo_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__ = __webpack_require__(311);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_video_pano__ = __webpack_require__(314);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__demo_video_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_tour__ = __webpack_require__(313);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__demo_tour___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__demo_tour__);\n\n\n\n\n\nvar pages = [__WEBPACK_IMPORTED_MODULE_0__demo_pano___default.a, __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default.a, __WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default.a, __WEBPACK_IMPORTED_MODULE_3__demo_tour___default.a];\n\n\n\n/***/ }),\n\n/***/ 66:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'App'\n});\n\n/***/ }),\n\n/***/ 67:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__ = __webpack_require__(130);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js__ = __webpack_require__(132);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_highlight_js__);\n\n\n\n\n\nvar codeHandler = function codeHandler(code) {\n  var scripts = '\\n  <script src=\"vue.js\"></script> \\n  <script src=\"vue-vr.min.js\"></script>';\n  return code.replace(/#scripts#/ig, scripts);\n};\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'App',\n  props: {\n    vueCode: {\n      type: String,\n      default: ''\n    },\n    htmlCode: {\n      type: String,\n      default: '// TODO'\n    }\n  },\n  mounted: function mounted() {\n    __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.vueCode);\n    __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.htmlCode);\n  },\n  data: function data() {\n    return {};\n  },\n\n  filters: {\n    code: function code(val) {\n      return codeHandler(val);\n    }\n  },\n  components: {}\n});\n\n/***/ }),\n\n/***/ 68:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        type=\\'cube\\'\\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\\n</template>\\n<script>\\n    import { Pano } from \\'vuejs-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n </script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'cube\\'\\n            source=\"assets/faces/pano_%s.jpg\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'DemoCubePano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 69:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        src=\"assets/equirectangular.jpg\">\\n    </Pano>\\n</template>\\n\\n<script>\\n    import { Pano } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'cube\\'\\n            source=\"assets/equirectangular.jpg\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'DemoPano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Tour_vue__ = __webpack_require__(315);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Tour_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Tour_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Tour\\n        @on-load=\"onLoad\"\\n        :scenes=\\'scenes\\'>\\n\\n    </Tour>\\n    <div\\n      class=\"demo-loading\"\\n      v-show=\"loading\"></div>\\n      \\n</template>\\n\\n<script>\\n    import { Tour } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Tour\\n        },\\n        data(){\\n          return {\\n            scenes: [{\\n              key: \\'M4wOy2s\\',\\n              panorama: {\\n                source: \\'assets/equirectangular.jpg\\',\\n                type: \\'image\\'\\n              },\\n              x: 0,\\n              y: 0,\\n              z: 0,\\n              rx: 0,\\n              rz: 0,\\n              ry: 90,\\n              connections: [\\n                \\'eIm7la\\',\\n                \\'eId9l0\\',\\n                \\'fK2dL7l\\'\\n              ]\\n            },\\n            {\\n              key: \\'eIm7la\\',\\n              panorama: {\\n                source: \\'assets/faces/pano_%s.jpg\\',\\n                type: \\'cube\\'\\n              },\\n              x: 100,\\n              y: 0,\\n              z: 200,\\n              rx: 0,\\n              rz: 0,\\n              ry: 0,\\n              connections: [\\n                \\'M4wOy2s\\'\\n              ]\\n            },\\n            {\\n              key: \\'eId9l0\\',\\n              panorama: {\\n                source: \\'assets/faces/pano_%s.jpg\\',\\n                type: \\'cube\\'\\n              },\\n              x: 150,\\n              y: 0,\\n              z: -300,\\n              rx: 0,\\n              rz: 0,\\n              ry: 0,\\n              connections: [\\n                \\'M4wOy2s\\'\\n              ]\\n            },\\n            {\\n              key: \\'fK2dL7l\\',\\n              panorama: {\\n                source: \\'assets/faces/pano_%s.jpg\\',\\n                type: \\'cube\\'\\n              },\\n              x: -150,\\n              y: 0,\\n              z: -300,\\n              rx: 0,\\n              rz: 0,\\n              ry: 0,\\n              connections: [\\n                \\'M4wOy2s\\'\\n              ]\\n            }]\\n          }\\n        }\\n    }\\n</script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Tour\\n          @on-load=\"onLoad\"\\n          :scenes=\\'scenes\\'>\\n      </Tour>\\n      <div\\n        class=\"demo-loading\"\\n        v-show=\"loading\"></div>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'DemoTour',\n  data: function data() {\n    return {\n      code: code,\n      htmlCode: htmlCode,\n      loading: true,\n      scenes: [{\n        key: 'M4wOy2s',\n        panorama: {\n          source: 'assets/equirectangular.jpg',\n          type: 'image'\n        },\n        x: 0,\n        y: 0,\n        z: 0,\n        rx: 0,\n        rz: 0,\n        ry: 90,\n        connections: ['eIm7la', 'eId9l0', 'fK2dL7l']\n      }, {\n        key: 'eIm7la',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: 100,\n        y: 0,\n        z: 200,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: ['M4wOy2s']\n      }, {\n        key: 'eId9l0',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: 150,\n        y: 0,\n        z: -300,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: ['M4wOy2s']\n      }, {\n        key: 'fK2dL7l',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: -150,\n        y: 0,\n        z: -300,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: ['M4wOy2s']\n      }]\n    };\n  },\n\n  methods: {\n    onLoad: function onLoad() {\n      console.log('onLoad');\n      this.loading = false;\n    },\n    onLoadStart: function onLoadStart() {\n      console.log('onLoadStart');\n      this.loading = true;\n    }\n  },\n  components: {\n    Tour: __WEBPACK_IMPORTED_MODULE_1__src_Tour_vue___default.a,\n    DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n  },\n  mounted: function mounted() {\n    this.initialScene = this.scenes[0].key;\n  }\n});\n\n/***/ }),\n\n/***/ 71:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        type=\\'video\\'\\n        source=\"assets/ClashofClans.mp4\">\\n    </Pano>\\n</template>\\n\\n<script>\\n    import { Pano } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n</script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'video\\'\\n            source=\"assets/ClashofClans.mp4\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'DemoVideoPano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_panolens__ = __webpack_require__(41);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'Pano',\n  props: {\n    source: {\n      type: String,\n      default: ''\n    },\n    type: {\n      type: String,\n      default: 'image'\n    },\n    width: {\n      type: Number,\n      default: 100\n    },\n    height: {\n      type: Number,\n      default: 100\n    }\n  },\n  data: function data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      viewer: null,\n      panorama: null\n    };\n  },\n  created: function created() {\n    window.addEventListener('resize', this.onResize, false);\n  },\n  mounted: function mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].Viewer({\n      container: this.$el,\n      cameraFov: 100\n    });\n\n    this.loadPano();\n  },\n\n  watch: {\n    source: function source() {\n      if (!this.viewer) return;\n      if (!this.panorama) return;\n      this.loadPano();\n    }\n  },\n  methods: {\n    onResize: function onResize() {\n      var _this = this;\n\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(function () {\n          _this.size = {\n            width: _this.$el.offsetWidth,\n            height: _this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    loadPano: function loadPano() {\n      console.log('this.source = ' + this.source);\n      if (!this.source) return;\n\n      switch (this.type) {\n        case 'cube':\n          var l = this.source.replace('%s', 'l');\n          var f = this.source.replace('%s', 'f');\n          var r = this.source.replace('%s', 'r');\n          var b = this.source.replace('%s', 'b');\n          var u = this.source.replace('%s', 'u');\n          var d = this.source.replace('%s', 'd');\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].CubePanorama([r, l, u, d, f, b]);\n          break;\n        case 'video':\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].VideoPanorama(this.source, { autoplay: true });\n          console.log('this is video');\n          break;\n        default:\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].ImagePanorama(this.source);\n          break;\n      }\n\n      this.viewer.add(this.panorama);\n\n      var that = this;\n      this.panorama.addEventListener('load', function () {\n        that.$emit('on-load');\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 73:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_panolens__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_three__ = __webpack_require__(61);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'Tour',\n  props: {\n    scenes: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    sceneIndex: {\n      type: Number,\n      default: 0\n    },\n    width: {\n      type: Number,\n      default: undefined\n    },\n    height: {\n      type: Number,\n      default: undefined\n    }\n  },\n  data: function data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      scene_index: -1,\n      viewer: null,\n      panorama: null,\n      hotspots: [],\n      arrowGroup: null\n    };\n  },\n  created: function created() {\n    window.addEventListener('resize', this.onResize, false);\n  },\n  mounted: function mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].Viewer({\n      container: this.$el,\n      cameraFov: 100\n    });\n    if (this.scene_index === -1) {\n      this.loadScene(this.sceneIndex);\n    }\n  },\n\n  methods: {\n    onResize: function onResize() {\n      var _this = this;\n\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(function () {\n          _this.size = {\n            width: _this.$el.offsetWidth,\n            height: _this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    getSceneIndexByKey: function getSceneIndexByKey(key) {\n      for (var i = 0; i < this.scenes.length; i++) {\n        if (this.scenes[i].key === key) {\n          return i;\n        }\n      }\n      return -1;\n    },\n    loadScene: function loadScene(index) {\n      var _this2 = this;\n\n      this.$emit('on-load-start');\n      console.log('this.scenes = ' + this.scenes);\n      if (!this.scenes || this.scenes.length === 0) return;\n\n      if (this.scene_index === index) return;\n\n      this.scene_index = index;\n\n      var scene = this.scenes[index];\n\n      var pano = scene.panorama;\n      var source = pano.source;\n\n      switch (pano.type) {\n        case 'cube':\n          var l = source.replace('%s', 'l');\n          var f = source.replace('%s', 'f');\n          var r = source.replace('%s', 'r');\n          var b = source.replace('%s', 'b');\n          var u = source.replace('%s', 'u');\n          var d = source.replace('%s', 'd');\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].CubePanorama([r, l, u, d, f, b]);\n          break;\n        case 'video':\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].VideoPanorama(source, { autoplay: true });\n          console.log('this is video');\n          break;\n        default:\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].ImagePanorama(source);\n          break;\n      }\n\n      this.viewer.camera.near = 0.001;\n      this.viewer.camera.position.set(scene.x, scene.y, scene.z);\n\n      this.viewer.camera.translateZ(1);\n\n      this.viewer.add(this.panorama);\n\n      this.viewer.panorama.rotation.set(0, Math.PI, 0);\n      this.panorama.parent.rotation.set(0, Math.PI, 0);\n      this.viewer.panorama.position.set(scene.x, scene.y, scene.z);\n\n      this.viewer.control.target = this.viewer.panorama.position;\n\n      console.log(this.viewer);\n      console.log('panorama = ', this.panorama);\n\n      if (this.arrowGroup) {\n        this.viewer.remove(this.arrowGroup);\n      }\n\n      if (this.hotspots) {\n        this.hotspots.forEach(function (hotspot) {\n          _this2.viewer.remove(hotspot);\n        });\n      }\n\n      this.arrowGroup = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Object3D\"]();\n\n      scene.connections.forEach(function (key) {\n        console.log('connections key = ', key);\n        var index = _this2.getSceneIndexByKey(key);\n        console.log('connections index = ', index);\n        if (index === -1) return;\n\n        var hotspot = addHotspot(scene, _this2.scenes[index]);\n        _this2.viewer.add(hotspot);\n\n        _this2.hotspots.push(hotspot);\n\n        var arrow = addArrow(scene, _this2.scenes[index]);\n\n        arrow.addEventListener('mouseover', function () {\n          console.log('hoverred');\n        });\n\n        _this2.arrowGroup.add(arrow);\n      });\n\n      var that = this;\n\n      var raycaster = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Raycaster\"]();\n\n      var INTERSECTED = null;\n\n      this.viewer.container.addEventListener('click', function (event) {\n        if (Date.now() - timeStamp < rate) return;\n\n        if (INTERSECTED) {\n          console.log(INTERSECTED.targetScene);\n\n\n          alert('TODO: move to next scene ' + INTERSECTED.targetScene.key);\n        }\n      });\n\n      this.viewer.container.addEventListener('mousemove', function (event) {\n\n        var mouse = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Vector2\"]();\n        var camera = that.viewer.camera;\n        mouse.x = (event.clientX - that.$el.parentElement.offsetLeft) / that.viewer.container.offsetWidth * 2 - 1;\n        mouse.y = -((event.clientY - that.$el.parentElement.offsetTop) / that.viewer.container.offsetHeight) * 2 + 1;\n\n        raycaster.setFromCamera(mouse, camera);\n\n        var intersects = raycaster.intersectObjects(that.viewer.scene.children, true);\n\n        var intersectedObject = null;\n\n        if (intersects.length >= 0) {\n          intersects.forEach(function (intersect, index) {\n            if (intersect.object.type === 'hotspot' || intersect.object.type === 'arrow') {\n              intersectedObject = intersect.object;\n            }\n          });\n        }\n\n        if (intersectedObject) {\n          if (INTERSECTED) {\n            if (INTERSECTED.material.color) {\n              INTERSECTED.material.color.setHex(INTERSECTED.currentHex);\n            }\n\n            INTERSECTED.scale.set(1, 1, 1);\n          }\n\n          INTERSECTED = intersects[0].object;\n\n          if (INTERSECTED.material.color) {\n            INTERSECTED.currentHex = INTERSECTED.material.color.getHex();\n          }\n\n          if (INTERSECTED.material.color) {\n            INTERSECTED.material.color.setHex(0xffff00);\n          }\n          INTERSECTED.scale.set(1.2, 1.2, 1.2);\n        } else {\n          if (INTERSECTED) {\n            if (INTERSECTED.material.color) {\n              INTERSECTED.material.color.setHex(INTERSECTED.currentHex);\n            }\n            INTERSECTED.scale.set(1, 1, 1);\n          }\n\n          INTERSECTED = null;\n        }\n      });\n\n      this.viewer.addUpdateCallback(function () {\n\n        this.position.copy(that.viewer.control.target);\n\n        this.rotation.z = that.viewer.camera.rotation.z;\n\n        this.translateZ(0);\n        this.translateX(0);\n        this.translateY(-1);\n        this.translateZ(0);\n      }.bind(this.arrowGroup));\n\n      this.viewer.add(this.arrowGroup);\n\n\n      this.panorama.addEventListener('load', function () {\n        that.$emit('on-load');\n      });\n    }\n  }\n});\n\nvar rate = 1000;\nvar timeStamp = Date.now() - rate;\n\nfunction addHotspot(scene, targetScene) {\n  var pos = {\n    x: targetScene.x,\n    y: targetScene.y,\n    z: targetScene.z\n  };\n\n  var geometry = new __WEBPACK_IMPORTED_MODULE_1_three__[\"RingGeometry\"](8, 13, 100, 100);\n  var material = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshPhongMaterial\"]({\n    color: 1668818,\n    emissive: 0xffffff,\n    transparent: true,\n    opacity: 1,\n    side: __WEBPACK_IMPORTED_MODULE_1_three__[\"DoubleSide\"],\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  });\n\n  var geometryBorder = new __WEBPACK_IMPORTED_MODULE_1_three__[\"CircleGeometry\"](9, 32, 32);\n  var materialBorder = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshPhongMaterial\"]();\n  materialBorder.copy(material);\n\n  materialBorder.opacity = 0.5;\n\n  var circle = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](geometryBorder);\n\n  var hotspot = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](geometry);\n\n  var merged = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Geometry\"]();\n\n  circle.updateMatrix();\n  merged.merge(circle.geometry, circle.matrix, 0);\n  hotspot.updateMatrix();\n\n  merged.merge(hotspot.geometry, hotspot.matrix, 1);\n\n  var group = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](merged, new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshFaceMaterial\"]([material, materialBorder]));\n\n  group.rotation.set(toRadian(90), 0, 0);\n  group.position.set(pos.x, pos.y - 100, pos.z);\n\n  group.type = 'hotspot';\n\n  group.targetScene = targetScene;\n\n  return group;\n}\n\nfunction addArrow(scene, targetScene) {\n  var arrowGeometry = makeArrowGeometry();\n  var arrowMaterial = new __WEBPACK_IMPORTED_MODULE_1_three__[\"MeshBasicMaterial\"]({\n    transparent: true,\n    opacity: 0.8,\n    color: 1668818,\n    emissive: 0xffffff,\n    side: __WEBPACK_IMPORTED_MODULE_1_three__[\"DoubleSide\"],\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  });\n\n  var arrow = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Mesh\"](arrowGeometry, arrowMaterial);\n\n  var x1 = targetScene.x;\n  var z1 = targetScene.z;\n  var x2 = scene.x;\n  var z2 = scene.z;\n\n  var ath = toDegree(Math.atan2(z1 - z2, x1 - x2));\n\n  arrow.rotation.set(toRadian(90), 0, toRadian(ath));\n\n  var arrowPos = sphereToWorld(ath, 0);\n\n  arrow.position.set(arrowPos.x, arrowPos.y, arrowPos.z);\n  arrow.type = 'arrow';\n  arrow.targetScene = targetScene;\n  return arrow;\n}\n\nfunction makeArrowGeometry() {\n  var t = 1 / 10.0;\n  var i = 2 * t / 3;\n  var n = t * Math.cos(60 * __WEBPACK_IMPORTED_MODULE_1_three__[\"Math\"].DEG2RAD);\n  var r = t * Math.sin(60 * __WEBPACK_IMPORTED_MODULE_1_three__[\"Math\"].DEG2RAD);\n  var o = new __WEBPACK_IMPORTED_MODULE_1_three__[\"Shape\"]();\n  o.moveTo(i, 0);\n  o.lineTo(i - n, r);\n  o.lineTo(-n, r);\n  o.lineTo(0, 0);\n  o.lineTo(-n, -r);\n  o.lineTo(i - n, -r);\n  o.lineTo(i, 0);\n  return new __WEBPACK_IMPORTED_MODULE_1_three__[\"ShapeGeometry\"](o);\n}\n\nfunction sphereToWorld(ath, atv) {\n  var d = 1 / 2.0;\n  ath += 90;\n  var mY = -d * Math.sin(toRadian(atv));\n  var r = -d * Math.cos(toRadian(atv));\n  var mX = r * Math.sin(toRadian(-ath));\n  var mZ = r * Math.cos(toRadian(-ath));\n\n  return new __WEBPACK_IMPORTED_MODULE_1_three__[\"Vector3\"](mX, mY, mZ);\n}\nfunction toRadian(a) {\n  return a * Math.PI / 180.0;\n}\n\nfunction toDegree(a) {\n  return a * 180.0 / Math.PI;\n}\n\n/***/ })\n\n},[64]);\n\n\n// WEBPACK FOOTER //\n// assets/js/app.076ab2b5f52c3919a8ec.js","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"div[data-v-09ad1f51]{cursor:pointer}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-09ad1f51\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Tour.vue\n// module id = 127\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:70%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:30%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .hljs{background:transparent}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-213df8bf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/components/demo-block.vue\n// module id = 128\n// module chunks = 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.demos,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.demos-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.demos-header .title{font-weight:700;font-size:18px;display:inline-block}.demos-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.demos-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.demos-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.demos-menu .demos-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.demos-menu .demos-menu-item>a{display:block;width:100%;height:100%}.demos-menu .demos-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.demos-menu .demos-menu-item:hover>a{color:#39f}.demos-pages{height:100%;overflow:hidden}.demo-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.demo-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;animation:loading-rotate .75s 0s linear infinite}.demo-loading:after,.demo-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.demo-loading:after{height:100%;width:0}@keyframes loading-rotate{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(.6)}to{transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-223dbf78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/App.vue\n// module id = 129\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-213df8bf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./demo-block.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-block.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-213df8bf\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-block.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/components/demo-block.vue\n// module id = 23\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-cube-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29108898\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-cube-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-cube-pano.vue\n// module id = 311\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a5bfa54\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-pano.vue\n// module id = 312\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-tour.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8ad7c38c\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-tour.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-tour.vue\n// module id = 313\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-video-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-32faa3e6\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-video-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-video-pano.vue\n// module id = 314\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-09ad1f51\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./Tour.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Tour.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-09ad1f51\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Tour.vue\"),\n  /* scopeId */\n  \"data-v-09ad1f51\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Tour.vue\n// module id = 315\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-09ad1f51\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Tour.vue\n// module id = 316\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"             \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n        \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"          \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)) + \"\\n          \")]), _vm._v(\"\\n        \")])])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-213df8bf\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/components/demo-block.vue\n// module id = 317\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demos\"\n  }, [_c('div', {\n    staticClass: \"demos-content\"\n  }, [_c('ul', {\n    staticClass: \"demos-menu\"\n  }, [_c('li', {\n    staticClass: \"demos-menu-title\"\n  }, [_vm._v(\"demos\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-pano\"\n    }\n  }, [_vm._v(\"basic panorama\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-cube-pano\"\n    }\n  }, [_vm._v(\"Cube Faces\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-video-pano\"\n    }\n  }, [_vm._v(\"Video Pano\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-tour\"\n    }\n  }, [_vm._v(\"VR Tour\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demos-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-223dbf78\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/App.vue\n// module id = 318\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"cube\",\n      \"source\": \"assets/faces/pano_%s.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-29108898\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-cube-pano.vue\n// module id = 319\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"source\": \"assets/equirectangular.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a5bfa54\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-pano.vue\n// module id = 320\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"video\",\n      \"source\": \"assets/ClashofClans.mp4\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-32faa3e6\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-video-pano.vue\n// module id = 321\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-7974fb6b\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Pano.vue\n// module id = 322\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Tour', {\n    attrs: {\n      \"scenes\": _vm.scenes\n    },\n    on: {\n      \"on-load-start\": _vm.onLoadStart,\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-8ad7c38c\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-tour.vue\n// module id = 323\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-09ad1f51\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Tour.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"4136a65b\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-09ad1f51\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/Tour.vue\n// module id = 325\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-213df8bf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./demo-block.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"56304fc1\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-213df8bf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/components/demo-block.vue\n// module id = 326\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-223dbf78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./App.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"48e2ad6a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-223dbf78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/App.vue\n// module id = 327\n// module chunks = 1","var Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Pano.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7974fb6b\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Pano.vue\n// module id = 38\n// module chunks = 1","import * as THREE from 'three'\n\n/**\n * Panolens.js\n * @author pchen66\n * @namespace PANOLENS\n */\n\nvar PANOLENS = { REVISION: '9' }\n/*! npm.im/iphone-inline-video 2.2.2 */\nvar enableInlineVideo = (function () {\n  'use strict'/*! npm.im/intervalometer */\n  function e (e, i, n, r) { function t (n) { d = i(t, r), e(n - (a || n)), a = n } var d, a; return {start: function () { d || t(0) }, stop: function () { n(d), d = null, a = 0 }} } function i (i) { return e(i, requestAnimationFrame, cancelAnimationFrame) } function n (e, i, n) { function r (r) { n && !n(e, i) || r.stopImmediatePropagation() } return e.addEventListener(i, r), r } function r (e, i, n, r) { function t () { return n[i] } function d (e) { n[i] = e }r && d(e[i]), Object.defineProperty(e, i, {get: t, set: d}) } function t (e, i, n) { n.addEventListener(i, function () { return e.dispatchEvent(new Event(i)) }) } function d (e, i) { Promise.resolve().then(function () { e.dispatchEvent(new Event(i)) }) } function a (e) { var i = new Audio(); return t(e, 'play', i), t(e, 'playing', i), t(e, 'pause', i), i.crossOrigin = e.crossOrigin, i.src = e.src || e.currentSrc || 'data:', i } function u (e, i, n) { (m || 0) + 200 < Date.now() && (e[h] = !0, m = Date.now()), n || (e.currentTime = i), k[++T % 3] = 100 * i | 0 } function o (e) { return e.driver.currentTime >= e.video.duration } function s (e) { var i = this; i.video.readyState >= i.video.HAVE_FUTURE_DATA ? (i.hasAudio || (i.driver.currentTime = i.video.currentTime + e * i.video.playbackRate / 1e3, i.video.loop && o(i) && (i.driver.currentTime = 0)), u(i.video, i.driver.currentTime)) : i.video.networkState === i.video.NETWORK_IDLE && i.video.buffered.length === 0 && i.video.load(), i.video.ended && (delete i.video[h], i.video.pause(!0)) } function c () { var e = this, i = e[g]; if (e.webkitDisplayingFullscreen) return void e[E](); i.driver.src !== 'data:' && i.driver.src !== e.src && (u(e, 0, !0), i.driver.src = e.src), e.paused && (i.paused = !1, e.buffered.length === 0 && e.load(), i.driver.play(), i.updater.start(), i.hasAudio || (d(e, 'play'), i.video.readyState >= i.video.HAVE_ENOUGH_DATA && d(e, 'playing'))) } function v (e) { var i = this, n = i[g]; n.driver.pause(), n.updater.stop(), i.webkitDisplayingFullscreen && i[w](), n.paused && !e || (n.paused = !0, n.hasAudio || d(i, 'pause'), i.ended && !i.webkitDisplayingFullscreen && (i[h] = !0, d(i, 'ended'))) } function p (e, n) { var r = {}; e[g] = r, r.paused = !0, r.hasAudio = n, r.video = e, r.updater = i(s.bind(r)), n ? r.driver = a(e) : (e.addEventListener('canplay', function () { e.paused || d(e, 'playing') }), r.driver = {src: e.src || e.currentSrc || 'data:', muted: !0, paused: !0, pause: function () { r.driver.paused = !0 }, play: function () { r.driver.paused = !1, o(r) && u(e, 0) }, get ended () { return o(r) }}), e.addEventListener('emptied', function () { var i = !r.driver.src || r.driver.src === 'data:'; r.driver.src && r.driver.src !== e.src && (u(e, 0, !0), r.driver.src = e.src, i || !n && e.autoplay ? r.driver.play() : r.updater.stop()) }, !1), e.addEventListener('webkitbeginfullscreen', function () { e.paused ? n && r.driver.buffered.length === 0 && r.driver.load() : (e.pause(), e[E]()) }), n && (e.addEventListener('webkitendfullscreen', function () { r.driver.currentTime = e.currentTime }), e.addEventListener('seeking', function () { k.indexOf(100 * e.currentTime | 0) < 0 && (r.driver.currentTime = e.currentTime) })) } function l (e) { var i = e[h]; return delete e[h], !e.webkitDisplayingFullscreen && !i } function f (e) { var i = e[g]; e[E] = e.play, e[w] = e.pause, e.play = c, e.pause = v, r(e, 'paused', i.driver), r(e, 'muted', i.driver, !0), r(e, 'playbackRate', i.driver, !0), r(e, 'ended', i.driver), r(e, 'loop', i.driver, !0), n(e, 'seeking', function (e) { return !e.webkitDisplayingFullscreen }), n(e, 'seeked', function (e) { return !e.webkitDisplayingFullscreen }), n(e, 'timeupdate', l), n(e, 'ended', l) } function y (e, i) { if (void 0 === i && (i = {}), !e[g]) { if (!i.everywhere) { if (!b) return; if (!(i.iPad || i.ipad ? /iPhone|iPod|iPad/ : /iPhone|iPod/).test(navigator.userAgent)) return }e.pause(); var n = e.autoplay; e.autoplay = !1, p(e, !e.muted), f(e), e.classList.add('IIV'), e.muted && n && (e.play(), e.addEventListener('playing', function i () { e.autoplay = !0, e.removeEventListener('playing', i) })), /iPhone|iPod|iPad/.test(navigator.platform) || console.warn('iphone-inline-video is not guaranteed to work in emulated environments') } } var m, b = typeof document === 'object' && 'object-fit' in document.head.style && !matchMedia('(-webkit-video-playable-inline)').matches, g = 'bfred-it:iphone-inline-video', h = 'bfred-it:iphone-inline-video:event', E = 'bfred-it:iphone-inline-video:nativeplay', w = 'bfred-it:iphone-inline-video:nativepause', k = [], T = 0; return y\n}())\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\nvar TWEEN = TWEEN || (function () {\n  var _tweens = []\n\n  return {\n\n    getAll: function () {\n      return _tweens\n    },\n\n    removeAll: function () {\n      _tweens = []\n    },\n\n    add: function (tween) {\n      _tweens.push(tween)\n    },\n\n    remove: function (tween) {\n      var i = _tweens.indexOf(tween)\n\n      if (i !== -1) {\n        _tweens.splice(i, 1)\n      }\n    },\n\n    update: function (time, preserve) {\n      if (_tweens.length === 0) {\n        return false\n      }\n\n      var i = 0\n\n      time = time !== undefined ? time : TWEEN.now()\n\n      while (i < _tweens.length) {\n        if (_tweens[i].update(time) || preserve) {\n          i++\n        } else {\n          _tweens.splice(i, 1)\n        }\n      }\n\n      return true\n    }\n  }\n})()\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {\n  TWEEN.now = function () {\n    var time = process.hrtime()\n\n    // Convert [seconds, nanoseconds] to milliseconds.\n    return time[0] * 1000 + time[1] / 1000000\n  }\n}\n// In a browser, use window.performance.now if it is available.\nelse if (typeof (window) !== 'undefined' &&\n         window.performance !== undefined &&\n\t\t window.performance.now !== undefined) {\n  // This must be bound, because directly assigning this function\n  // leads to an invocation exception in Chrome.\n  TWEEN.now = window.performance.now.bind(window.performance)\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n  TWEEN.now = Date.now\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n  TWEEN.now = function () {\n    return new Date().getTime()\n  }\n}\n\nTWEEN.Tween = function (object) {\n  var _object = object\n  var _valuesStart = {}\n  var _valuesEnd = {}\n  var _valuesStartRepeat = {}\n  var _duration = 1000\n  var _repeat = 0\n  var _repeatDelayTime\n  var _yoyo = false\n  var _isPlaying = false\n  var _reversed = false\n  var _delayTime = 0\n  var _startTime = null\n  var _easingFunction = TWEEN.Easing.Linear.None\n  var _interpolationFunction = TWEEN.Interpolation.Linear\n  var _chainedTweens = []\n  var _onStartCallback = null\n  var _onStartCallbackFired = false\n  var _onUpdateCallback = null\n  var _onCompleteCallback = null\n  var _onStopCallback = null\n\n  this.to = function (properties, duration) {\n    _valuesEnd = properties\n\n    if (duration !== undefined) {\n      _duration = duration\n    }\n\n    return this\n  }\n\n  this.start = function (time) {\n    TWEEN.add(this)\n\n    _isPlaying = true\n\n    _onStartCallbackFired = false\n\n    _startTime = time !== undefined ? time : TWEEN.now()\n    _startTime += _delayTime\n\n    for (var property in _valuesEnd) {\n      // Check if an Array was provided as property value\n      if (_valuesEnd[property] instanceof Array) {\n        if (_valuesEnd[property].length === 0) {\n          continue\n        }\n\n        // Create a local copy of the Array with the start value at the front\n        _valuesEnd[property] = [_object[property]].concat(_valuesEnd[property])\n      }\n\n      // If `to()` specifies a property that doesn't exist in the source object,\n      // we should not set that property in the object\n      if (_object[property] === undefined) {\n        continue\n      }\n\n      // Save the starting value.\n      _valuesStart[property] = _object[property]\n\n      if ((_valuesStart[property] instanceof Array) === false) {\n        _valuesStart[property] *= 1.0 // Ensures we're using numbers, not strings\n      }\n\n      _valuesStartRepeat[property] = _valuesStart[property] || 0\n    }\n\n    return this\n  }\n\n  this.stop = function () {\n    if (!_isPlaying) {\n      return this\n    }\n\n    TWEEN.remove(this)\n    _isPlaying = false\n\n    if (_onStopCallback !== null) {\n      _onStopCallback.call(_object, _object)\n    }\n\n    this.stopChainedTweens()\n    return this\n  }\n\n  this.end = function () {\n    this.update(_startTime + _duration)\n    return this\n  }\n\n  this.stopChainedTweens = function () {\n    for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n      _chainedTweens[i].stop()\n    }\n  }\n\n  this.delay = function (amount) {\n    _delayTime = amount\n    return this\n  }\n\n  this.repeat = function (times) {\n    _repeat = times\n    return this\n  }\n\n  this.repeatDelay = function (amount) {\n    _repeatDelayTime = amount\n    return this\n  }\n\n  this.yoyo = function (yoyo) {\n    _yoyo = yoyo\n    return this\n  }\n\n  this.easing = function (easing) {\n    _easingFunction = easing\n    return this\n  }\n\n  this.interpolation = function (interpolation) {\n    _interpolationFunction = interpolation\n    return this\n  }\n\n  this.chain = function () {\n    _chainedTweens = arguments\n    return this\n  }\n\n  this.onStart = function (callback) {\n    _onStartCallback = callback\n    return this\n  }\n\n  this.onUpdate = function (callback) {\n    _onUpdateCallback = callback\n    return this\n  }\n\n  this.onComplete = function (callback) {\n    _onCompleteCallback = callback\n    return this\n  }\n\n  this.onStop = function (callback) {\n    _onStopCallback = callback\n    return this\n  }\n\n  this.update = function (time) {\n    var property\n    var elapsed\n    var value\n\n    if (time < _startTime) {\n      return true\n    }\n\n    if (_onStartCallbackFired === false) {\n      if (_onStartCallback !== null) {\n        _onStartCallback.call(_object, _object)\n      }\n\n      _onStartCallbackFired = true\n    }\n\n    elapsed = (time - _startTime) / _duration\n    elapsed = elapsed > 1 ? 1 : elapsed\n\n    value = _easingFunction(elapsed)\n\n    for (property in _valuesEnd) {\n      // Don't update properties that do not exist in the source object\n      if (_valuesStart[property] === undefined) {\n        continue\n      }\n\n      var start = _valuesStart[property] || 0\n      var end = _valuesEnd[property]\n\n      if (end instanceof Array) {\n        _object[property] = _interpolationFunction(end, value)\n      } else {\n        // Parses relative end values with start as base (e.g.: +10, -3)\n        if (typeof (end) === 'string') {\n          if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            end = start + parseFloat(end)\n          } else {\n            end = parseFloat(end)\n          }\n        }\n\n        // Protect against non numeric properties.\n        if (typeof (end) === 'number') {\n          _object[property] = start + (end - start) * value\n        }\n      }\n    }\n\n    if (_onUpdateCallback !== null) {\n      _onUpdateCallback.call(_object, value)\n    }\n\n    if (elapsed === 1) {\n      if (_repeat > 0) {\n        if (isFinite(_repeat)) {\n          _repeat--\n        }\n\n        // Reassign starting values, restart by making startTime = now\n        for (property in _valuesStartRepeat) {\n          if (typeof (_valuesEnd[property]) === 'string') {\n            _valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property])\n          }\n\n          if (_yoyo) {\n            var tmp = _valuesStartRepeat[property]\n\n            _valuesStartRepeat[property] = _valuesEnd[property]\n            _valuesEnd[property] = tmp\n          }\n\n          _valuesStart[property] = _valuesStartRepeat[property]\n        }\n\n        if (_yoyo) {\n          _reversed = !_reversed\n        }\n\n        if (_repeatDelayTime !== undefined) {\n          _startTime = time + _repeatDelayTime\n        } else {\n          _startTime = time + _delayTime\n        }\n\n        return true\n      } else {\n        if (_onCompleteCallback !== null) {\n          _onCompleteCallback.call(_object, _object)\n        }\n\n        for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n          // Make the chained tweens start exactly at the time they should,\n          // even if the `update()` method was called way past the duration of the tween\n          _chainedTweens[i].start(_startTime + _duration)\n        }\n\n        return false\n      }\n    }\n\n    return true\n  }\n}\n\nTWEEN.Easing = {\n\n  Linear: {\n\n    None: function (k) {\n      return k\n    }\n\n  },\n\n  Quadratic: {\n\n    In: function (k) {\n      return k * k\n    },\n\n    Out: function (k) {\n      return k * (2 - k)\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k\n      }\n\n      return -0.5 * (--k * (k - 2) - 1)\n    }\n\n  },\n\n  Cubic: {\n\n    In: function (k) {\n      return k * k * k\n    },\n\n    Out: function (k) {\n      return --k * k * k + 1\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2)\n    }\n\n  },\n\n  Quartic: {\n\n    In: function (k) {\n      return k * k * k * k\n    },\n\n    Out: function (k) {\n      return 1 - (--k * k * k * k)\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2)\n    }\n\n  },\n\n  Quintic: {\n\n    In: function (k) {\n      return k * k * k * k * k\n    },\n\n    Out: function (k) {\n      return --k * k * k * k * k + 1\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2)\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In: function (k) {\n      return 1 - Math.cos(k * Math.PI / 2)\n    },\n\n    Out: function (k) {\n      return Math.sin(k * Math.PI / 2)\n    },\n\n    InOut: function (k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k))\n    }\n\n  },\n\n  Exponential: {\n\n    In: function (k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1)\n    },\n\n    Out: function (k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k)\n    },\n\n    InOut: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1)\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2)\n    }\n\n  },\n\n  Circular: {\n\n    In: function (k) {\n      return 1 - Math.sqrt(1 - k * k)\n    },\n\n    Out: function (k) {\n      return Math.sqrt(1 - (--k * k))\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1)\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1)\n    }\n\n  },\n\n  Elastic: {\n\n    In: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n    },\n\n    Out: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1\n    },\n\n    InOut: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      k *= 2\n\n      if (k < 1) {\n        return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n      }\n\n      return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1\n    }\n\n  },\n\n  Back: {\n\n    In: function (k) {\n      var s = 1.70158\n\n      return k * k * ((s + 1) * k - s)\n    },\n\n    Out: function (k) {\n      var s = 1.70158\n\n      return --k * k * ((s + 1) * k + s) + 1\n    },\n\n    InOut: function (k) {\n      var s = 1.70158 * 1.525\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s))\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2)\n    }\n\n  },\n\n  Bounce: {\n\n    In: function (k) {\n      return 1 - TWEEN.Easing.Bounce.Out(1 - k)\n    },\n\n    Out: function (k) {\n      if (k < (1 / 2.75)) {\n        return 7.5625 * k * k\n      } else if (k < (2 / 2.75)) {\n        return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75\n      } else if (k < (2.5 / 2.75)) {\n        return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375\n      } else {\n        return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375\n      }\n    },\n\n    InOut: function (k) {\n      if (k < 0.5) {\n        return TWEEN.Easing.Bounce.In(k * 2) * 0.5\n      }\n\n      return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5\n    }\n\n  }\n\n}\n\nTWEEN.Interpolation = {\n\n  Linear: function (v, k) {\n    var m = v.length - 1\n    var f = m * k\n    var i = Math.floor(f)\n    var fn = TWEEN.Interpolation.Utils.Linear\n\n    if (k < 0) {\n      return fn(v[0], v[1], f)\n    }\n\n    if (k > 1) {\n      return fn(v[m], v[m - 1], m - f)\n    }\n\n    return fn(v[i], v[i + 1 > m ? m : i + 1], f - i)\n  },\n\n  Bezier: function (v, k) {\n    var b = 0\n    var n = v.length - 1\n    var pw = Math.pow\n    var bn = TWEEN.Interpolation.Utils.Bernstein\n\n    for (var i = 0; i <= n; i++) {\n      b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i)\n    }\n\n    return b\n  },\n\n  CatmullRom: function (v, k) {\n    var m = v.length - 1\n    var f = m * k\n    var i = Math.floor(f)\n    var fn = TWEEN.Interpolation.Utils.CatmullRom\n\n    if (v[0] === v[m]) {\n      if (k < 0) {\n        i = Math.floor(f = m * (1 + k))\n      }\n\n      return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i)\n    } else {\n      if (k < 0) {\n        return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0])\n      }\n\n      if (k > 1) {\n        return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m])\n      }\n\n      return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i)\n    }\n  },\n\n  Utils: {\n\n    Linear: function (p0, p1, t) {\n      return (p1 - p0) * t + p0\n    },\n\n    Bernstein: function (n, i) {\n      var fc = TWEEN.Interpolation.Utils.Factorial\n\n      return fc(n) / fc(i) / fc(n - i)\n    },\n\n    Factorial: (function () {\n      var a = [1]\n\n      return function (n) {\n        var s = 1\n\n        if (a[n]) {\n          return a[n]\n        }\n\n        for (var i = n; i > 1; i--) {\n          s *= i\n        }\n\n        a[n] = s\n        return s\n      }\n    })(),\n\n    CatmullRom: function (p0, p1, p2, p3, t) {\n      var v0 = (p2 - p0) * 0.5\n      var v1 = (p3 - p1) * 0.5\n      var t2 = t * t\n      var t3 = t * t2\n\n      return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1\n    }\n\n  }\n\n};\n\n// UMD (Universal Module Definition)\n(function (root) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define([], function () {\n      return TWEEN\n    })\n  } else if (typeof module !== 'undefined' && typeof exports === 'object') {\n    // Node.js\n    module.exports = TWEEN\n  } else if (root !== undefined) {\n    // Global variable\n    root.TWEEN = TWEEN\n  }\n})(this)\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n/* global THREE, console */\n\n// This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n// the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n// supported.\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\nTHREE.OrbitControls = function (object, domElement) {\n  this.object = object\n  this.domElement = (domElement !== undefined) ? domElement : document\n  this.frameId\n\n  // API\n\n  // Set to false to disable this control\n  this.enabled = true\n\n  // \"target\" sets the location of focus, where the control orbits around\n  // and where it pans with respect to.\n  this.target = new THREE.Vector3()\n\n  // center is old, deprecated; use \"target\" instead\n  this.center = this.target\n\n  // This option actually enables dollying in and out; left as \"zoom\" for\n  // backwards compatibility\n  this.noZoom = false\n  this.zoomSpeed = 1.0\n\n  // Limits to how far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = 0\n  this.maxDistance = Infinity\n\n  // Limits to how far you can zoom in and out ( OrthographicCamera only )\n  this.minZoom = 0\n  this.maxZoom = Infinity\n\n  // Set to true to disable this control\n  this.noRotate = false\n  this.rotateSpeed = -0.15\n\n  // Set to true to disable this control\n  this.noPan = true\n  this.keyPanSpeed = 7.0\t// pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  this.autoRotate = false\n  this.autoRotateSpeed = 2.0 // 30 seconds per round when fps is 60\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = 0 // radians\n  this.maxPolarAngle = Math.PI // radians\n\n  // Momentum\n  \tthis.momentumDampingFactor = 0.90\n  \tthis.momentumScalingFactor = -0.005\n  \tthis.momentumKeydownFactor = 20\n\n  \t// Fov\n  \tthis.minFov = 30\n  \tthis.maxFov = 120\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = -Infinity // radians\n  this.maxAzimuthAngle = Infinity // radians\n\n  // Set to true to disable use of the keys\n  this.noKeys = false\n\n  // The four arrow keys\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 }\n\n  // Mouse buttons\n  this.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT }\n\n  /// /////////\n  // internals\n\n  var scope = this\n\n  var EPS = 10e-8\n  var MEPS = 10e-5\n\n  var rotateStart = new THREE.Vector2()\n  var rotateEnd = new THREE.Vector2()\n  var rotateDelta = new THREE.Vector2()\n\n  var panStart = new THREE.Vector2()\n  var panEnd = new THREE.Vector2()\n  var panDelta = new THREE.Vector2()\n  var panOffset = new THREE.Vector3()\n\n  var offset = new THREE.Vector3()\n\n  var dollyStart = new THREE.Vector2()\n  var dollyEnd = new THREE.Vector2()\n  var dollyDelta = new THREE.Vector2()\n\n  var theta\n  var phi\n  var phiDelta = 0\n  var thetaDelta = 0\n  var scale = 1\n  var pan = new THREE.Vector3()\n\n  var lastPosition = new THREE.Vector3()\n  var lastQuaternion = new THREE.Quaternion()\n\n  var momentumLeft = 0, momentumUp = 0\n  var eventCurrent, eventPrevious\n  var momentumOn = false\n\n  var keyUp, keyBottom, keyLeft, keyRight\n\n  var STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 }\n\n  var state = STATE.NONE\n\n  // for reset\n\n  this.target0 = this.target.clone()\n  this.position0 = this.object.position.clone()\n  this.zoom0 = this.object.zoom\n\n  // so camera.up is the orbit axis\n\n  var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0))\n  var quatInverse = quat.clone().inverse()\n\n  // events\n\n  var changeEvent = { type: 'change' }\n  var startEvent = { type: 'start' }\n  var endEvent = { type: 'end' }\n\n  this.setLastQuaternion = function (quaternion) {\n    lastQuaternion.copy(quaternion)\n    scope.object.quaternion.copy(quaternion)\n  }\n\n  this.getLastPosition = function () {\n    return lastPosition\n  }\n\n  this.rotateLeft = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle()\n    }\n\n    thetaDelta -= angle\n  }\n\n  this.rotateUp = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle()\n    }\n\n    phiDelta -= angle\n  }\n\n  // pass in distance in world space to move left\n  this.panLeft = function (distance) {\n    var te = this.object.matrix.elements\n\n    // get X column of matrix\n    panOffset.set(te[ 0 ], te[ 1 ], te[ 2 ])\n    panOffset.multiplyScalar(-distance)\n\n    pan.add(panOffset)\n  }\n\n  // pass in distance in world space to move up\n  this.panUp = function (distance) {\n    var te = this.object.matrix.elements\n\n    // get Y column of matrix\n    panOffset.set(te[ 4 ], te[ 5 ], te[ 6 ])\n    panOffset.multiplyScalar(distance)\n\n    pan.add(panOffset)\n  }\n\n  // pass in x,y of change desired in pixel space,\n  // right and down are positive\n  this.pan = function (deltaX, deltaY) {\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      // perspective\n      var position = scope.object.position\n      var offset = position.clone().sub(scope.target)\n      var targetDistance = offset.length()\n\n      // half of the fov is center to top of screen\n      targetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0)\n\n      // we actually don't use screenWidth, since perspective camera is fixed to screen height\n      scope.panLeft(2 * deltaX * targetDistance / element.clientHeight)\n      scope.panUp(2 * deltaY * targetDistance / element.clientHeight)\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      // orthographic\n      scope.panLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth)\n      scope.panUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight)\n    } else {\n      // camera neither orthographic or perspective\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.')\n    }\n  }\n\n  this.momentum = function () {\n    if (!momentumOn) return\n\n    if (Math.abs(momentumLeft) < MEPS && Math.abs(momentumUp) < MEPS) {\n      momentumOn = false\n      return\n    }\n\n    momentumUp *= this.momentumDampingFactor\n    momentumLeft *= this.momentumDampingFactor\n\n    thetaDelta -= this.momentumScalingFactor * momentumLeft\n    phiDelta -= this.momentumScalingFactor * momentumUp\n  }\n\n  this.dollyIn = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale()\n    }\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      scale /= dollyScale\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale))\n      scope.object.updateProjectionMatrix()\n      scope.dispatchEvent(changeEvent)\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n    }\n  }\n\n  this.dollyOut = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale()\n    }\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      scale *= dollyScale\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale))\n      scope.object.updateProjectionMatrix()\n      scope.dispatchEvent(changeEvent)\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n    }\n  }\n\n  this.update = function (ignoreUpdate) {\n    var position = this.object.position\n\n    offset.copy(position).sub(this.target)\n\n    // rotate offset to \"y-axis-is-up\" space\n    offset.applyQuaternion(quat)\n\n    // angle from z-axis around y-axis\n\n    theta = Math.atan2(offset.x, offset.z)\n\n    // angle from y-axis\n\n    phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y)\n\n    if (this.autoRotate && state === STATE.NONE) {\n      this.rotateLeft(getAutoRotationAngle())\n    }\n\n    this.momentum()\n\n    theta += thetaDelta\n    phi += phiDelta\n\n    // restrict theta to be between desired limits\n    theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta))\n\n    // restrict phi to be between desired limits\n    phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi))\n\n    // restrict phi to be betwee EPS and PI-EPS\n    phi = Math.max(EPS, Math.min(Math.PI - EPS, phi))\n\n    var radius = offset.length() * scale\n\n    // restrict radius to be between desired limits\n    radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius))\n\n    // move target to panned location\n    this.target.add(pan)\n\n    offset.x = radius * Math.sin(phi) * Math.sin(theta)\n    offset.y = radius * Math.cos(phi)\n    offset.z = radius * Math.sin(phi) * Math.cos(theta)\n\n    // rotate offset back to \"camera-up-vector-is-up\" space\n    offset.applyQuaternion(quatInverse)\n\n    position.copy(this.target).add(offset)\n\n    this.object.lookAt(this.target)\n\n    thetaDelta = 0\n    phiDelta = 0\n    scale = 1\n    pan.set(0, 0, 0)\n\n    // update condition is:\n    // min(camera displacement, camera rotation in radians)^2 > EPS\n    // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n    if (lastPosition.distanceToSquared(this.object.position) > EPS ||\n\t\t    8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n      ignoreUpdate !== true && this.dispatchEvent(changeEvent)\n\n      lastPosition.copy(this.object.position)\n      lastQuaternion.copy(this.object.quaternion)\n    }\n  }\n\n  this.reset = function () {\n    state = STATE.NONE\n\n    this.target.copy(this.target0)\n    this.object.position.copy(this.position0)\n    this.object.zoom = this.zoom0\n\n    this.object.updateProjectionMatrix()\n    this.dispatchEvent(changeEvent)\n\n    this.update()\n  }\n\n  this.getPolarAngle = function () {\n    return phi\n  }\n\n  this.getAzimuthalAngle = function () {\n    return theta\n  }\n\n  function getAutoRotationAngle () {\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed\n  }\n\n  function getZoomScale () {\n    return Math.pow(0.95, scope.zoomSpeed)\n  }\n\n  function onMouseDown (event) {\n    momentumOn = false\n\n   \t\tmomentumLeft = momentumUp = 0\n\n    if (scope.enabled === false) return\n    event.preventDefault()\n\n    if (event.button === scope.mouseButtons.ORBIT) {\n      if (scope.noRotate === true) return\n\n      state = STATE.ROTATE\n\n      rotateStart.set(event.clientX, event.clientY)\n    } else if (event.button === scope.mouseButtons.ZOOM) {\n      if (scope.noZoom === true) return\n\n      state = STATE.DOLLY\n\n      dollyStart.set(event.clientX, event.clientY)\n    } else if (event.button === scope.mouseButtons.PAN) {\n      if (scope.noPan === true) return\n\n      state = STATE.PAN\n\n      panStart.set(event.clientX, event.clientY)\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener('mousemove', onMouseMove, false)\n      document.addEventListener('mouseup', onMouseUp, false)\n      scope.dispatchEvent(startEvent)\n    }\n\n    scope.update()\n  }\n\n  function onMouseMove (event) {\n    if (scope.enabled === false) return\n\n    event.preventDefault()\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n    if (state === STATE.ROTATE) {\n      if (scope.noRotate === true) return\n\n      rotateEnd.set(event.clientX, event.clientY)\n      rotateDelta.subVectors(rotateEnd, rotateStart)\n\n      // rotating across whole screen goes 360 degrees around\n      scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed)\n\n      // rotating up and down along whole screen attempts to go 360, but limited to 180\n      scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed)\n\n      rotateStart.copy(rotateEnd)\n\n      if (eventPrevious) {\n        momentumLeft = event.clientX - eventPrevious.clientX\n        momentumUp = event.clientY - eventPrevious.clientY\n      }\n\n      eventPrevious = event\n    } else if (state === STATE.DOLLY) {\n      if (scope.noZoom === true) return\n\n      dollyEnd.set(event.clientX, event.clientY)\n      dollyDelta.subVectors(dollyEnd, dollyStart)\n\n      if (dollyDelta.y > 0) {\n        scope.dollyIn()\n      } else if (dollyDelta.y < 0) {\n        scope.dollyOut()\n      }\n\n      dollyStart.copy(dollyEnd)\n    } else if (state === STATE.PAN) {\n      if (scope.noPan === true) return\n\n      panEnd.set(event.clientX, event.clientY)\n      panDelta.subVectors(panEnd, panStart)\n\n      scope.pan(panDelta.x, panDelta.y)\n\n      panStart.copy(panEnd)\n    }\n\n    if (state !== STATE.NONE) scope.update()\n  }\n\n  function onMouseUp (/* event */) {\n    momentumOn = true\n\n    eventPrevious = undefined\n\n    if (scope.enabled === false) return\n\n    document.removeEventListener('mousemove', onMouseMove, false)\n    document.removeEventListener('mouseup', onMouseUp, false)\n    scope.dispatchEvent(endEvent)\n    state = STATE.NONE\n  }\n\n  function onMouseWheel (event) {\n    if (scope.enabled === false || scope.noZoom === true || state !== STATE.NONE) return\n\n    event.preventDefault()\n    event.stopPropagation()\n\n    var delta = 0\n\n    if (event.wheelDelta !== undefined) { // WebKit / Opera / Explorer 9\n      delta = event.wheelDelta\n    } else if (event.detail !== undefined) { // Firefox\n      delta = -event.detail\n    }\n\n    if (delta > 0) {\n      // scope.dollyOut();\n      scope.object.fov = (scope.object.fov < scope.maxFov)\n        ? scope.object.fov + 1\n        : scope.maxFov\n      scope.object.updateProjectionMatrix()\n    } else if (delta < 0) {\n      // scope.dollyIn();\n      scope.object.fov = (scope.object.fov > scope.minFov)\n        ? scope.object.fov - 1\n        : scope.minFov\n      scope.object.updateProjectionMatrix()\n    }\n\n    scope.update()\n    scope.dispatchEvent(changeEvent)\n    scope.dispatchEvent(startEvent)\n    scope.dispatchEvent(endEvent)\n  }\n\n  function onKeyUp (event) {\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = false\n        break\n\n      case scope.keys.BOTTOM:\n        keyBottom = false\n        break\n\n      case scope.keys.LEFT:\n        keyLeft = false\n        break\n\n      case scope.keys.RIGHT:\n        keyRight = false\n        break\n    }\n  }\n\n  function onKeyDown (event) {\n    if (scope.enabled === false || scope.noKeys === true || scope.noRotate === true) return\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = true\n        break\n\n      case scope.keys.BOTTOM:\n        keyBottom = true\n        break\n\n      case scope.keys.LEFT:\n        keyLeft = true\n        break\n\n      case scope.keys.RIGHT:\n        keyRight = true\n        break\n    }\n\n    if (keyUp || keyBottom || keyLeft || keyRight) {\n      momentumOn = true\n\n      if (keyUp) momentumUp = -scope.rotateSpeed * scope.momentumKeydownFactor\n      if (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor\n      if (keyLeft) momentumLeft = -scope.rotateSpeed * scope.momentumKeydownFactor\n      if (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor\n    }\n  }\n\n  function touchstart (event) {\n    momentumOn = false\n\n    momentumLeft = momentumUp = 0\n\n    if (scope.enabled === false) return\n\n    switch (event.touches.length) {\n      case 1:\t// one-fingered touch: rotate\n\n        if (scope.noRotate === true) return\n\n        state = STATE.TOUCH_ROTATE\n\n        rotateStart.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        break\n\n      case 2:\t// two-fingered touch: dolly\n\n        if (scope.noZoom === true) return\n\n        state = STATE.TOUCH_DOLLY\n\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n\n        break\n\n      case 3: // three-fingered touch: pan\n\n        if (scope.noPan === true) return\n\n        state = STATE.TOUCH_PAN\n\n        panStart.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        break\n\n      default:\n\n        state = STATE.NONE\n    }\n\n    if (state !== STATE.NONE) scope.dispatchEvent(startEvent)\n  }\n\n  function touchmove (event) {\n    if (scope.enabled === false) return\n\n    event.preventDefault()\n    event.stopPropagation()\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n    switch (event.touches.length) {\n      case 1: // one-fingered touch: rotate\n\n        if (scope.noRotate === true) return\n        if (state !== STATE.TOUCH_ROTATE) return\n\n        rotateEnd.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        rotateDelta.subVectors(rotateEnd, rotateStart)\n\n        // rotating across whole screen goes 360 degrees around\n        scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed)\n        // rotating up and down along whole screen attempts to go 360, but limited to 180\n        scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed)\n\n        rotateStart.copy(rotateEnd)\n\n        if (eventPrevious) {\n          momentumLeft = event.touches[ 0 ].pageX - eventPrevious.pageX\n          momentumUp = event.touches[ 0 ].pageY - eventPrevious.pageY\n        }\n\n        eventPrevious = {\n          pageX: event.touches[ 0 ].pageX,\n          pageY: event.touches[ 0 ].pageY\n        }\n\n        scope.update()\n        break\n\n      case 2: // two-fingered touch: dolly\n\n        if (scope.noZoom === true) return\n        if (state !== STATE.TOUCH_DOLLY) return\n\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n\n        if (event.scale < 1) {\n          scope.object.fov = (scope.object.fov < scope.maxFov)\n            ? scope.object.fov + 1\n            : scope.maxFov\n          scope.object.updateProjectionMatrix()\n        } else if (event.scale > 1) {\n          scope.object.fov = (scope.object.fov > scope.minFov)\n            ? scope.object.fov - 1\n            : scope.minFov\n          scope.object.updateProjectionMatrix()\n        }\n\n        scope.update()\n        scope.dispatchEvent(changeEvent)\n        break\n\n      case 3: // three-fingered touch: pan\n\n        if (scope.noPan === true) return\n        if (state !== STATE.TOUCH_PAN) return\n\n        panEnd.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        panDelta.subVectors(panEnd, panStart)\n\n        scope.pan(panDelta.x, panDelta.y)\n\n        panStart.copy(panEnd)\n\n        scope.update()\n        break\n\n      default:\n\n        state = STATE.NONE\n    }\n  }\n\n  function touchend (/* event */) {\n    momentumOn = true\n\n    eventPrevious = undefined\n\n    if (scope.enabled === false) return\n\n    scope.dispatchEvent(endEvent)\n    state = STATE.NONE\n  }\n\n  // this.domElement.addEventListener( 'contextmenu', function ( event ) { event.preventDefault(); }, false );\n  this.domElement.addEventListener('mousedown', onMouseDown, false)\n  this.domElement.addEventListener('mousewheel', onMouseWheel, false)\n  this.domElement.addEventListener('DOMMouseScroll', onMouseWheel, false) // firefox\n\n  this.domElement.addEventListener('touchstart', touchstart, false)\n  this.domElement.addEventListener('touchend', touchend, false)\n  this.domElement.addEventListener('touchmove', touchmove, false)\n\n  window.addEventListener('keyup', onKeyUp, false)\n  window.addEventListener('keydown', onKeyDown, false)\n\n  // force an update at start\n  this.update()\n}\n\nTHREE.OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype)\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls/**\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n *\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\n\nTHREE.DeviceOrientationControls = function (camera, domElement) {\n  var scope = this\n  var changeEvent = { type: 'change' }\n\n  var rotY = 0\n  var rotX = 0\n  var tempX = 0\n  var tempY = 0\n\n  this.camera = camera\n  this.camera.rotation.reorder('YXZ')\n  this.domElement = (domElement !== undefined) ? domElement : document\n\n  this.enabled = true\n\n  this.deviceOrientation = {}\n  this.screenOrientation = 0\n\n  this.alpha = 0\n  this.alphaOffsetAngle = 0\n\n  var onDeviceOrientationChangeEvent = function (event) {\n    scope.deviceOrientation = event\n  }\n\n  var onScreenOrientationChangeEvent = function () {\n    scope.screenOrientation = window.orientation || 0\n  }\n\n  var onTouchStartEvent = function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    tempX = event.touches[ 0 ].pageX\n    tempY = event.touches[ 0 ].pageY\n  }\n\n  var onTouchMoveEvent = function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    rotY += THREE.Math.degToRad((event.touches[ 0 ].pageX - tempX) / 4)\n    rotX += THREE.Math.degToRad((tempY - event.touches[ 0 ].pageY) / 4)\n\n    scope.updateAlphaOffsetAngle(rotY)\n\n    tempX = event.touches[ 0 ].pageX\n    tempY = event.touches[ 0 ].pageY\n  }\n\n  // The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n  var setCameraQuaternion = function (quaternion, alpha, beta, gamma, orient) {\n    var zee = new THREE.Vector3(0, 0, 1)\n\n    var euler = new THREE.Euler()\n\n    var q0 = new THREE.Quaternion()\n\n    var q1 = new THREE.Quaternion(-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5)) // - PI/2 around the x-axis\n\n    var vectorFingerY\n    var fingerQY = new THREE.Quaternion()\n    var fingerQX = new THREE.Quaternion()\n\n    if (scope.screenOrientation == 0) {\n      vectorFingerY = new THREE.Vector3(1, 0, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX)\n    } else if (scope.screenOrientation == 180) {\n      vectorFingerY = new THREE.Vector3(1, 0, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX)\n    } else if (scope.screenOrientation == 90) {\n      vectorFingerY = new THREE.Vector3(0, 1, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX)\n    } else if (scope.screenOrientation == -90) {\n      vectorFingerY = new THREE.Vector3(0, 1, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX)\n    }\n\n    q1.multiply(fingerQY)\n    q1.multiply(fingerQX)\n\n    euler.set(beta, alpha, -gamma, 'YXZ') // 'ZXY' for the device, but 'YXZ' for us\n\n    quaternion.setFromEuler(euler) // orient the device\n\n    quaternion.multiply(q1) // camera looks out the back of the device, not the top\n\n    quaternion.multiply(q0.setFromAxisAngle(zee, -orient)) // adjust for screen orientation\n  }\n\n  this.connect = function () {\n    onScreenOrientationChangeEvent() // run once on load\n\n    window.addEventListener('orientationchange', onScreenOrientationChangeEvent, false)\n    window.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false)\n    window.addEventListener('deviceorientation', this.update.bind(this), false)\n\n    scope.domElement.addEventListener('touchstart', onTouchStartEvent, false)\n    scope.domElement.addEventListener('touchmove', onTouchMoveEvent, false)\n\n    scope.enabled = true\n  }\n\n  this.disconnect = function () {\n    window.removeEventListener('orientationchange', onScreenOrientationChangeEvent, false)\n    window.removeEventListener('deviceorientation', onDeviceOrientationChangeEvent, false)\n    window.removeEventListener('deviceorientation', this.update.bind(this), false)\n\n    scope.domElement.removeEventListener('touchstart', onTouchStartEvent, false)\n    scope.domElement.removeEventListener('touchmove', onTouchMoveEvent, false)\n\n    scope.enabled = false\n  }\n\n  this.update = function (ignoreUpdate) {\n    if (scope.enabled === false) return\n\n    var alpha = scope.deviceOrientation.alpha ? THREE.Math.degToRad(scope.deviceOrientation.alpha) + this.alphaOffsetAngle : 0 // Z\n    var beta = scope.deviceOrientation.beta ? THREE.Math.degToRad(scope.deviceOrientation.beta) : 0 // X'\n    var gamma = scope.deviceOrientation.gamma ? THREE.Math.degToRad(scope.deviceOrientation.gamma) : 0 // Y''\n    var orient = scope.screenOrientation ? THREE.Math.degToRad(scope.screenOrientation) : 0 // O\n\n    setCameraQuaternion(scope.camera.quaternion, alpha, beta, gamma, orient)\n    this.alpha = alpha\n\n    ignoreUpdate !== true && this.dispatchEvent(changeEvent)\n  }\n\n  this.updateAlphaOffsetAngle = function (angle) {\n    this.alphaOffsetAngle = angle\n    this.update()\n  }\n\n  this.dispose = function () {\n    this.disconnect()\n  }\n\n  this.connect()\n}\n\nTHREE.DeviceOrientationControls.prototype = Object.create(THREE.EventDispatcher.prototype)\nTHREE.DeviceOrientationControls.prototype.constructor = THREE.DeviceOrientationControls /** The Bend modifier lets you bend the current selection up to 90 degrees about a single axis,\n * producing a uniform bend in an object's geometry.\n * You can control the angle and direction of the bend on any of three axes.\n * The geometry has to have rather large number of polygons!\n * options:\n * \t direction - deformation direction (in local coordinates!).\n * \t axis - deformation axis (in local coordinates!). Vector of direction and axis are perpendicular.\n * \t angle - deformation angle.\n * @author Vildanov Almaz / alvild@gmail.com\n * The algorithm of a bend is based on the chain line cosh: y = 1/b * cosh(b*x) - 1/b. It can be used only in three.js.\n */\n\nTHREE.BendModifier = function () {\n\n}\n\nTHREE.BendModifier.prototype = {\n\n  constructor: THREE.BendModifier,\n\n  set: function (direction, axis, angle) {\n    this.direction = new THREE.Vector3(); this.direction.copy(direction)\n    this.axis = new THREE.Vector3(); this.axis.copy(axis)\n    this.angle = angle\n    return this\n  },\n\n  _sign: function (a) {\n    return a < 0 ? -1 : a > 0 ? 1 : 0\n  },\n\n  _cosh: function (x) {\n    return (Math.exp(x) + Math.exp(-x)) / 2\n  },\n\n  _sinhInverse: function (x) {\n    return Math.log(Math.abs(x) + Math.sqrt(x * x + 1))\n  },\n\n  modify: function (geometry) {\n    var thirdAxis = new THREE.Vector3(); thirdAxis.crossVectors(this.direction, this.axis)\n\n    // P - matrices of the change-of-coordinates\n    var P = new THREE.Matrix4()\n    P.set(thirdAxis.x, thirdAxis.y, thirdAxis.z, 0,\n      this.direction.x, this.direction.y, this.direction.z, 0,\n      this.axis.x, this.axis.y, this.axis.z, 0,\n      0, 0, 0, 1).transpose()\n\n    var InverseP = new THREE.Matrix4().getInverse(P)\n    var newVertices = []; var oldVertices = []; var anglesBetweenOldandNewVertices = []\n\n    var meshGeometryBoundingBoxMaxx = 0; var meshGeometryBoundingBoxMinx = 0\n    var meshGeometryBoundingBoxMaxy = 0; var meshGeometryBoundingBoxMiny = 0\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      newVertices[i] = new THREE.Vector3(); newVertices[i].copy(geometry.vertices[i]).applyMatrix4(InverseP)\n      if (newVertices[i].x > meshGeometryBoundingBoxMaxx) { meshGeometryBoundingBoxMaxx = newVertices[i].x }\n      if (newVertices[i].x < meshGeometryBoundingBoxMinx) { meshGeometryBoundingBoxMinx = newVertices[i].x }\n      if (newVertices[i].y > meshGeometryBoundingBoxMaxy) { meshGeometryBoundingBoxMaxy = newVertices[i].y }\n      if (newVertices[i].y < meshGeometryBoundingBoxMiny) { meshGeometryBoundingBoxMiny = newVertices[i].y }\n    }\n\n    var meshWidthold = meshGeometryBoundingBoxMaxx - meshGeometryBoundingBoxMinx\n    var meshDepth = meshGeometryBoundingBoxMaxy - meshGeometryBoundingBoxMiny\n    var ParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidthold\n    var oldMiddlex = (meshGeometryBoundingBoxMaxx + meshGeometryBoundingBoxMinx) / 2\n    var oldMiddley = (meshGeometryBoundingBoxMaxy + meshGeometryBoundingBoxMiny) / 2\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      oldVertices[i] = new THREE.Vector3(); oldVertices[i].copy(newVertices[i])\n      newVertices[i].x = this._sign(newVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((newVertices[i].x - oldMiddlex) * ParamB)\n    }\n\n    var meshWidth = 2 / ParamB * this._sinhInverse(meshWidthold / 2 * ParamB)\n\n    var NewParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidth\n\n    var rightEdgePos = new THREE.Vector3(meshWidth / 2, -meshDepth / 2, 0)\n    rightEdgePos.y = 1 / NewParamB * this._cosh(NewParamB * rightEdgePos.x) - 1 / NewParamB - meshDepth / 2\n\n    var bendCenter = new THREE.Vector3(0, rightEdgePos.y + rightEdgePos.x / Math.tan(this.angle), 0)\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var x0 = this._sign(oldVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((oldVertices[i].x - oldMiddlex) * ParamB)\n      var y0 = 1 / NewParamB * this._cosh(NewParamB * x0) - 1 / NewParamB\n\n      var k = new THREE.Vector3(bendCenter.x - x0, bendCenter.y - (y0 - meshDepth / 2), bendCenter.z).normalize()\n\n      var Q = new THREE.Vector3()\n      Q.addVectors(new THREE.Vector3(x0, y0 - meshDepth / 2, oldVertices[i].z), k.multiplyScalar(oldVertices[i].y + meshDepth / 2))\n      newVertices[i].x = Q.x; newVertices[i].y = Q.y\n    }\n\n    var middle = oldMiddlex * meshWidth / meshWidthold\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var O = new THREE.Vector3(oldMiddlex, oldMiddley, oldVertices[i].z)\n      var p = new THREE.Vector3(); p.subVectors(oldVertices[i], O)\n      var q = new THREE.Vector3(); q.subVectors(newVertices[i], O)\n\n      anglesBetweenOldandNewVertices[i] = Math.acos(1 / this._cosh(ParamB * newVertices[i].x)) * this._sign(newVertices[i].x)\n\n      newVertices[i].x = newVertices[i].x + middle\n      geometry.vertices[i].copy(newVertices[i].applyMatrix4(P))\n    }\n\n    geometry.computeFaceNormals()\n    geometry.verticesNeedUpdate = true\n    geometry.normalsNeedUpdate = true\n\n    // compute Vertex Normals\n    var fvNames = [ 'a', 'b', 'c', 'd' ]\n\n    for (var f = 0, fl = geometry.faces.length; f < fl; f++) {\n      var face = geometry.faces[ f ]\n      if (face.vertexNormals === undefined) {\n        continue\n      }\n      for (var v = 0, vl = face.vertexNormals.length; v < vl; v++) {\n        var angle = anglesBetweenOldandNewVertices[ face[ fvNames[ v ] ] ]\n        var x = this.axis.x,\n          y = this.axis.y,\n          z = this.axis.z\n\n        var rotateMatrix = new THREE.Matrix3()\n        rotateMatrix.set(Math.cos(angle) + (1 - Math.cos(angle)) * x * x, (1 - Math.cos(angle)) * x * y - Math.sin(angle) * z, (1 - Math.cos(angle)) * x * z + Math.sin(angle) * y,\n          (1 - Math.cos(angle)) * y * x + Math.sin(angle) * z, Math.cos(angle) + (1 - Math.cos(angle)) * y * y, (1 - Math.cos(angle)) * y * z - Math.sin(angle) * x,\n          (1 - Math.cos(angle)) * z * x - Math.sin(angle) * y, (1 - Math.cos(angle)) * z * y + Math.sin(angle) * x, Math.cos(angle) + (1 - Math.cos(angle)) * z * z)\n\n        face.vertexNormals[ v ].applyMatrix3(rotateMatrix)\n      }\n    }\n    // end compute Vertex Normals\n\n    return this\n  }\n}/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CardboardEffect = function (renderer) {\n  var _camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1)\n\n  var _scene = new THREE.Scene()\n\n  var _stereo = new THREE.StereoCamera()\n  _stereo.aspect = 0.5\n\n  var _params = { minFilter: THREE.LinearFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat }\n\n  var _renderTarget = new THREE.WebGLRenderTarget(512, 512, _params)\n  _renderTarget.scissorTest = true\n  _renderTarget.texture.generateMipmaps = false\n\n  // Distortion Mesh ported from:\n  // https://github.com/borismus/webvr-boilerplate/blob/master/src/distortion/barrel-distortion-fragment.js\n\n  var distortion = new THREE.Vector2(0.441, 0.156)\n\n  var geometry = new THREE.PlaneBufferGeometry(1, 1, 10, 20).removeAttribute('normal').toNonIndexed()\n\n  var positions = geometry.attributes.position.array\n  var uvs = geometry.attributes.uv.array\n\n  // duplicate\n  geometry.attributes.position.count *= 2\n  geometry.attributes.uv.count *= 2\n\n  var positions2 = new Float32Array(positions.length * 2)\n  positions2.set(positions)\n  positions2.set(positions, positions.length)\n\n  var uvs2 = new Float32Array(uvs.length * 2)\n  uvs2.set(uvs)\n  uvs2.set(uvs, uvs.length)\n\n  var vector = new THREE.Vector2()\n  var length = positions.length / 3\n\n  for (var i = 0, l = positions2.length / 3; i < l; i++) {\n    vector.x = positions2[ i * 3 + 0 ]\n    vector.y = positions2[ i * 3 + 1 ]\n\n    var dot = vector.dot(vector)\n    var scalar = 1.5 + (distortion.x + distortion.y * dot) * dot\n\n    var offset = i < length ? 0 : 1\n\n    positions2[ i * 3 + 0 ] = (vector.x / scalar) * 1.5 - 0.5 + offset\n    positions2[ i * 3 + 1 ] = (vector.y / scalar) * 3.0\n\n    uvs2[ i * 2 ] = (uvs2[ i * 2 ] + offset) * 0.5\n  }\n\n  geometry.attributes.position.array = positions2\n  geometry.attributes.uv.array = uvs2\n\n  //\n\n  // var material = new THREE.MeshBasicMaterial( { wireframe: true } );\n  var material = new THREE.MeshBasicMaterial({ map: _renderTarget.texture })\n  var mesh = new THREE.Mesh(geometry, material)\n  _scene.add(mesh)\n\n  //\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height)\n\n    var pixelRatio = renderer.getPixelRatio()\n\n    _renderTarget.setSize(width * pixelRatio, height * pixelRatio)\n  }\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld()\n\n    if (camera.parent === null) camera.updateMatrixWorld()\n\n    _stereo.update(camera)\n\n    var width = _renderTarget.width / 2\n    var height = _renderTarget.height\n\n    _renderTarget.scissor.set(0, 0, width, height)\n    _renderTarget.viewport.set(0, 0, width, height)\n    renderer.render(scene, _stereo.cameraL, _renderTarget)\n\n    _renderTarget.scissor.set(width, 0, width, height)\n    _renderTarget.viewport.set(width, 0, width, height)\n    renderer.render(scene, _stereo.cameraR, _renderTarget)\n\n    renderer.render(_scene, _camera)\n  }\n}/**\n * @author alteredq / http://alteredqualia.com/\n * @authod mrdoob / http://mrdoob.com/\n * @authod arodic / http://aleksandarrodic.com/\n * @authod fonserbc / http://fonserbc.github.io/\n*/\n\nTHREE.StereoEffect = function (renderer) {\n  var _stereo = new THREE.StereoCamera()\n  _stereo.aspect = 0.5\n\n  this.setEyeSeparation = function (eyeSep) {\n    _stereo.eyeSep = eyeSep\n  }\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height)\n  }\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld()\n\n    if (camera.parent === null) camera.updateMatrixWorld()\n\n    _stereo.update(camera)\n\n    var size = renderer.getSize()\n\n    if (renderer.autoClear) renderer.clear()\n    renderer.setScissorTest(true)\n\n    renderer.setScissor(0, 0, size.width / 2, size.height)\n    renderer.setViewport(0, 0, size.width / 2, size.height)\n    renderer.render(scene, _stereo.cameraL)\n\n    renderer.setScissor(size.width / 2, 0, size.width / 2, size.height)\n    renderer.setViewport(size.width / 2, 0, size.width / 2, size.height)\n    renderer.render(scene, _stereo.cameraR)\n\n    renderer.setScissorTest(false)\n  }\n}\nvar GSVPANO = GSVPANO || {}\nGSVPANO.PanoLoader = function (parameters) {\n  'use strict'\n\n  var _parameters = parameters || {},\n    _location,\n    _zoom,\n    _panoId,\n    _panoClient = new google.maps.StreetViewService(),\n    _count = 0,\n    _total = 0,\n    _canvas = [],\n    _ctx = [],\n    _wc = 0,\n    _hc = 0,\n    result = null,\n    rotation = 0,\n    copyright = '',\n    onSizeChange = null,\n    onPanoramaLoad = null\n\n  var levelsW = [ 1, 2, 4, 7, 13, 26 ],\n    levelsH = [ 1, 1, 2, 4, 7, 13 ]\n\n  var widths = [ 416, 832, 1664, 3328, 6656, 13312 ],\n    heights = [ 416, 416, 832, 1664, 3328, 6656 ]\n\n  var gl = null\n  try {\n    var canvas = document.createElement('canvas')\n\t    gl = canvas.getContext('experimental-webgl')\n\t    if (gl == null) {\n\t        gl = canvas.getContext('webgl')\n\t    }\n  } catch (error) {}\n\n  var maxW = 1024,\n    maxH = 1024\n\n  if (gl) {\n    var maxTexSize = Math.max(gl.getParameter(gl.MAX_TEXTURE_SIZE), 6656)\n    // alert( 'MAX_TEXTURE_SIZE ' + maxTexSize );\n    maxW = maxH = maxTexSize\n  }\n\n  this.setProgress = function (loaded, total) {\n    if (this.onProgress) {\n      this.onProgress({loaded: loaded, total: total})\n    }\n  }\n\n  this.throwError = function (message) {\n    if (this.onError) {\n      this.onError(message)\n    } else {\n      console.error(message)\n    }\n  }\n\n  this.adaptTextureToZoom = function () {\n    var w = levelsW[ _zoom ] * 416,\n      h = levelsH[ _zoom ] * 416\n\n    w = widths[ _zoom ]\n    h = heights[ _zoom ]\n\n    _wc = Math.ceil(w / maxW)\n    _hc = Math.ceil(h / maxH)\n\n    _canvas = []; _ctx = []\n\n    var ptr = 0\n    for (var y = 0; y < _hc; y++) {\n      for (var x = 0; x < _wc; x++) {\n        var c = document.createElement('canvas')\n        if (x < (_wc - 1)) c.width = maxW; else c.width = w - (maxW * x)\n        if (y < (_hc - 1)) c.height = maxH; else c.height = h - (maxH * y)\n        _canvas.push(c)\n        _ctx.push(c.getContext('2d'))\n        ptr++\n      }\n    }\n  }\n\n  this.composeFromTile = function (x, y, texture) {\n    x *= 512\n    y *= 512\n    var px = Math.floor(x / maxW), py = Math.floor(y / maxH)\n\n    x -= px * maxW\n    y -= py * maxH\n\n    _ctx[ py * _wc + px ].drawImage(texture, 0, 0, texture.width, texture.height, x, y, 512, 512)\n    this.progress()\n  }\n\n  this.progress = function () {\n    _count++\n\n    var p = Math.round(_count * 100 / _total)\n    this.setProgress(_count, _total)\n\n    if (_count === _total) {\n      this.canvas = _canvas\n      this.panoId = _panoId\n      this.zoom = _zoom\n      if (this.onPanoramaLoad) {\n        this.onPanoramaLoad(_canvas[0])\n      }\n    }\n  }\n\n  this.loadFromId = function (id) {\n    _panoId = id\n    this.composePanorama()\n  }\n\n  this.composePanorama = function () {\n    this.setProgress(0, 1)\n\n    var w = levelsW[ _zoom ],\n      h = levelsH[ _zoom ],\n      self = this,\n      url,\n      x,\n      y\n\n    _count = 0\n    _total = w * h\n\n    var self = this\n    for (var y = 0; y < h; y++) {\n      for (var x = 0; x < w; x++) {\n        var url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + _zoom + '&x=' + x + '&y=' + y + '&panoid=' + _panoId + '&nbt&fover=2';\n        (function (x, y) {\n          if (_parameters.useWebGL) {\n            var texture = THREE.ImageUtils.loadTexture(url, null, function () {\n              self.composeFromTile(x, y, texture)\n            })\n          } else {\n            var img = new Image()\n            img.addEventListener('load', function () {\n              self.composeFromTile(x, y, this)\n            })\n            img.crossOrigin = ''\n            img.src = url\n          }\n        })(x, y)\n      }\n    }\n  }\n\n  this.load = function (panoid) {\n    this.loadPano(panoid)\n  }\n\n  this.loadPano = function (id) {\n    var self = this\n    _panoClient.getPanoramaById(id, function (result, status) {\n      if (status === google.maps.StreetViewStatus.OK) {\n        self.result = result\n        if (self.onPanoramaData) self.onPanoramaData(result)\n        // var h = google.maps.geometry.spherical.computeHeading(location, result.location.latLng);\n        // rotation = (result.tiles.centerHeading - h) * Math.PI / 180.0;\n        copyright = result.copyright\n        self.copyright = result.copyright\n        _panoId = result.location.pano\n        self.location = location\n        self.composePanorama()\n      } else {\n        if (self.onNoPanoramaData) self.onNoPanoramaData(status)\n        self.throwError('Could not retrieve panorama for the following reason: ' + status)\n      }\n    })\n  }\n\n  this.setZoom = function (z) {\n    _zoom = z\n    this.adaptTextureToZoom()\n  }\n\n  this.setZoom(_parameters.zoom || 1)\n}; (function () {\n  'use strict'\n\n  /**\n     * Data Image Source\n     * @type {String}\n     */\n  PANOLENS.DataImageSource = 'https://pchen66.github.io/Panolens/asset/icon/'\n\n  /**\n     * Data Image\n     * @memberOf PANOLENS\n     * @enum {string}\n     */\n  PANOLENS.DataImage = {\n    Info: PANOLENS.DataImageSource + 'information.png',\n    Arrow: PANOLENS.DataImageSource + 'arrow-up.png',\n    FullscreenEnter: PANOLENS.DataImageSource + 'fullscreen.png',\n    FullscreenLeave: PANOLENS.DataImageSource + 'fullscreen-exit.png',\n    VideoPlay: PANOLENS.DataImageSource + 'video-play.png',\n    VideoPause: PANOLENS.DataImageSource + 'pause.png',\n    WhiteTile: PANOLENS.DataImageSource + 'tiles.png',\n    ReticleIdle: PANOLENS.DataImageSource + 'reticle-idle.png',\n    Setting: PANOLENS.DataImageSource + 'setting.png',\n    ChevronRight: PANOLENS.DataImageSource + 'chevron-right.png',\n    Check: PANOLENS.DataImageSource + 'check.png',\n    ViewIndicator: PANOLENS.DataImageSource + 'view-indicator.svg',\n    ReticleDwell: PANOLENS.DataImageSource + 'reticle-animation.png'\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Control Index Enum\n\t * @memberOf PANOLENS\n\t * @enum {number}\n\t */\n\n  PANOLENS.Controls = {\n\n    ORBIT: 0,\n\n    DEVICEORIENTATION: 1\n\n  }\n\n  /**\n\t * Effect Mode Enum\n\t * @memberOf PANOLENS\n\t * @enum {number}\n\t */\n  PANOLENS.Modes = {\n\n    /** Unknown */\n    UNKNOWN: 0,\n\n    /** Normal */\n    NORMAL: 1,\n\n    /** Google Cardboard */\n    CARDBOARD: 2,\n\n    /** Stereoscopic **/\n    STEREO: 3\n\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Utility\n\t * @namespace PANOLENS.Utils\n\t * @memberOf PANOLENS\n\t * @type {object}\n\t */\n  PANOLENS.Utils = {}\n\n  PANOLENS.Utils.checkTouchSupported = function () {\n    return window ? 'ontouchstart' in window || window.navigator.msMaxTouchPoints : false\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Image loader with progress based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/ImageLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n  PANOLENS.Utils.ImageLoader = {}\n\n  /**\n\t * Load an image with XMLHttpRequest to provide progress checking\n\t * @param  {string}   url        - An image url\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {HTMLImageElement}    - DOM image element\n\t */\n\n  PANOLENS.Utils.ImageLoader.load = function (url, onLoad, onProgress, onError) {\n    var cached, request, arrayBufferView, blob, urlCreator, image, reference\n\n    // Reference key\n    for (var iconName in PANOLENS.DataImage) {\n      if (PANOLENS.DataImage.hasOwnProperty(iconName) &&\n\t\t\t\turl === PANOLENS.DataImage[ iconName ]) {\n        reference = iconName\n      }\n    }\n\n    // Cached\n    cached = THREE.Cache.get(reference || url)\n\n    if (cached !== undefined) {\n      if (onLoad) {\n        setTimeout(function () {\n          if (onProgress) {\n            onProgress({ loaded: 1, total: 1 })\n          }\n\n          onLoad(cached)\n        }, 0)\n      }\n\n      return cached\n    }\n\n    // Construct a new XMLHttpRequest\n    urlCreator = window.URL || window.webkitURL\n    image = document.createElementNS('http://www.w3.org/1999/xhtml', 'img')\n\n    // Add to cache\n    THREE.Cache.add(reference || url, image)\n\n    function onImageLoaded () {\n      urlCreator.revokeObjectURL(image.src)\n      onLoad && onLoad(image)\n    }\n\n    if (url.indexOf('data:') === 0) {\n      image.addEventListener('load', onImageLoaded, false)\n      image.src = url\n      return image\n    }\n\n    image.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : ''\n\n    request = new XMLHttpRequest()\n    request.open('GET', url, true)\n    request.responseType = 'arraybuffer'\n    request.onprogress = function (event) {\n\t\t    if (event.lengthComputable) {\n\t\t      onProgress && onProgress({ loaded: event.loaded, total: event.total })\n\t\t    }\n    }\n    request.onloadend = function (event) {\n\t\t    arrayBufferView = new Uint8Array(this.response)\n\t\t    blob = new Blob([ arrayBufferView ])\n\n\t\t    image.addEventListener('load', onImageLoaded, false)\n      image.src = urlCreator.createObjectURL(blob)\n    }\n\n    request.send(null)\n  }\n\n  // Enable cache\n  THREE.Cache.enabled = true\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Texture loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/TextureLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n  PANOLENS.Utils.TextureLoader = {}\n\n  /**\n\t * Load image texture\n\t * @param  {string}   url        - An image url\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {THREE.Texture}   \t - Image texture\n\t */\n  PANOLENS.Utils.TextureLoader.load = function (url, onLoad, onProgress, onError) {\n    var texture = new THREE.Texture()\n\n    PANOLENS.Utils.ImageLoader.load(url, function (image) {\n      texture.image = image\n      texture.needsUpdate = true\n\n      onLoad && onLoad(texture)\n    }, onProgress, onError)\n\n    return texture\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Cube Texture Loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/CubeTextureLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n  PANOLENS.Utils.CubeTextureLoader = {}\n\n  /**\n\t * Load 6 images as a cube texture\n\t * @param  {array}   urls        - Array with 6 image urls\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {THREE.CubeTexture}   - Cube texture\n\t */\n  PANOLENS.Utils.CubeTextureLoader.load = function (urls, onLoad, onProgress, onError) {\n    var texture, loaded, progress, all, loadings\n\n    texture = new THREE.CubeTexture([])\n\n    loaded = 0\n    progress = {}\n    all = {}\n\n    urls.map(function (url, index) {\n      PANOLENS.Utils.ImageLoader.load(url, function (image) {\n        texture.images[ index ] = image\n\n        loaded++\n\n        if (loaded === 6) {\n          texture.needsUpdate = true\n\n          onLoad && onLoad(texture)\n        }\n      }, function (event) {\n        progress[ index ] = { loaded: event.loaded, total: event.total }\n\n        all.loaded = 0\n        all.total = 0\n        loadings = 0\n\n        for (var i in progress) {\n          loadings++\n          all.loaded += progress[ i ].loaded\n          all.total += progress[ i ].total\n        }\n\n        if (loadings < 6) {\n          all.total = all.total / loadings * 6\n        }\n\n        onProgress && onProgress(all)\n      }, onError)\n    })\n\n    return texture\n  }\n})()/**\n * Stereographic projection shader\n * based on http://notlion.github.io/streetview-stereographic\n * @author pchen66\n */\n\nPANOLENS.StereographicShader = {\n\n  uniforms: {\n\n    'tDiffuse': { value: new THREE.Texture() },\n    'resolution': { value: 1.0 },\n    'transform': { value: new THREE.Matrix4() },\n    'zoom': { value: 1.0 }\n\n  },\n\n  vertexShader: [\n\n    'varying vec2 vUv;',\n\n    'void main() {',\n\n    'vUv = uv;',\n    'gl_Position = vec4( position, 1.0 );',\n\n    '}'\n\n  ].join('\\n'),\n\n  fragmentShader: [\n\n    'uniform sampler2D tDiffuse;',\n    'uniform float resolution;',\n    'uniform mat4 transform;',\n    'uniform float zoom;',\n\n    'varying vec2 vUv;',\n\n    'const float PI = 3.141592653589793;',\n\n    'void main(){',\n\n    'vec2 position = -1.0 +  2.0 * vUv;',\n\n    'position *= vec2( zoom * resolution, zoom * 0.5 );',\n\n    'float x2y2 = position.x * position.x + position.y * position.y;',\n    'vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );',\n\n    'sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );',\n\n    'vec2 sampleUV = vec2(',\n    '(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,',\n    '(asin(sphere_pnt.z) / PI + 0.5)',\n    ');',\n\n    'gl_FragColor = texture2D( tDiffuse, sampleUV );',\n\n    '}'\n\n  ].join('\\n')\n\n}; (function () {\n  'use strict'\n\n  /**\n\t * Skeleton panorama derived from THREE.Mesh\n\t * @constructor\n\t * @param {THREE.Geometry} geometry - The geometry for this panorama\n\t * @param {THREE.Material} material - The material for this panorama\n\t */\n  PANOLENS.Panorama = function (geometry, material) {\n    THREE.Mesh.call(this)\n\n    this.type = 'panorama'\n\n    this.ImageQualityLow = 1\n    this.ImageQualityFair = 2\n    this.ImageQualityMedium = 3\n    this.ImageQualityHigh = 4\n    this.ImageQualitySuperHigh = 5\n\n    this.animationDuration = 1000\n\n    this.defaultInfospotSize = 350\n\n    this.container = undefined\n\n    this.loaded = false\n\n    this.linkedSpots = []\n\n    this.isInfospotVisible = false\n\n    this.linkingImageURL = undefined\n    this.linkingImageScale = undefined\n\n    this.geometry = geometry\n\n    this.material = material\n    this.material.side = THREE.DoubleSide\n    this.material.visible = false\n\n    this.scale.x *= -1\n\n    this.infospotAnimation = new TWEEN.Tween(this).to({}, this.animationDuration / 2)\n\n    this.addEventListener('load', this.fadeIn.bind(this))\n    this.addEventListener('panolens-container', this.setContainer.bind(this))\n    this.addEventListener('click', this.onClick.bind(this))\n\n    this.setupTransitions()\n  }\n\n  PANOLENS.Panorama.prototype = Object.create(THREE.Mesh.prototype)\n\n  PANOLENS.Panorama.prototype.constructor = PANOLENS.Panorama\n\n  /**\n\t * Adding an object\n\t * To counter the scale.x = -1, it will automatically add an\n\t * empty object with inverted scale on x\n\t * @param {THREE.Object3D} object - The object to be added\n\t */\n  PANOLENS.Panorama.prototype.add = function (object) {\n    var scope, invertedObject\n\n    scope = this\n\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[ i ])\n      }\n\n      return this\n    }\n\n    // In case of infospots\n    if (object instanceof PANOLENS.Infospot) {\n      invertedObject = object\n\n      if (object.dispatchEvent) {\n        this.container && object.dispatchEvent({ type: 'panolens-container', container: this.container })\n\n        object.dispatchEvent({ type: 'panolens-infospot-focus',\n          method: function (vector, duration, easing) {\n            /**\n\t\t        \t * Infospot focus handler event\n\t\t        \t * @type {object}\n\t\t        \t * @event PANOLENS.Panorama#panolens-viewer-handler\n\t\t        \t * @property {string} method - Viewer function name\n\t\t        \t * @property {*} data - The argument to be passed into the method\n\t\t        \t */\n\t\t        \tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'tweenControlCenter', data: [ vector, duration, easing ] })\n          } })\n      }\n    } else {\n      // Counter scale.x = -1 effect\n      invertedObject = new THREE.Object3D()\n      invertedObject.scale.x = -1\n      invertedObject.scalePlaceHolder = true\n      invertedObject.add(object)\n    }\n\n    THREE.Object3D.prototype.add.call(this, invertedObject)\n  }\n\n  PANOLENS.Panorama.prototype.load = function () {\n    this.onLoad()\n  }\n\n  /**\n\t * Click event handler\n\t * @param  {object} event - Click event\n\t * @fires PANOLENS.Infospot#dismiss\n\t */\n  PANOLENS.Panorama.prototype.onClick = function (event) {\n    if (event.intersects && event.intersects.length === 0) {\n      this.traverse(function (object) {\n        /**\n\t\t\t\t * Dimiss event\n\t\t\t\t * @type {object}\n\t\t\t\t * @event PANOLENS.Infospot#dismiss\n\t\t\t\t */\n        object.dispatchEvent({ type: 'dismiss' })\n      })\n    }\n  }\n\n  /**\n\t * Set container of this panorama\n\t * @param {HTMLElement|object} data - Data with container information\n\t * @fires PANOLENS.Infospot#panolens-container\n\t */\n  PANOLENS.Panorama.prototype.setContainer = function (data) {\n    var container\n\n    if (data instanceof HTMLElement) {\n      container = data\n    } else if (data && data.container) {\n      container = data.container\n    }\n\n    if (container) {\n      this.children.forEach(function (child) {\n        if (child instanceof PANOLENS.Infospot && child.dispatchEvent) {\n          /**\n\t\t\t\t\t * Set container event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @event PANOLENS.Infospot#panolens-container\n\t\t\t\t\t * @property {HTMLElement} container - The container of this panorama\n\t\t\t\t\t */\n          child.dispatchEvent({ type: 'panolens-container', container: container })\n        }\n      })\n\n      this.container = container\n    }\n  }\n\n  /**\n\t * This will be called when panorama is loaded\n\t * @fires PANOLENS.Panorama#load\n\t */\n  PANOLENS.Panorama.prototype.onLoad = function () {\n    this.loaded = true\n\n    /**\n\t\t * Load panorama event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#load\n\t\t */\n    this.dispatchEvent({ type: 'load' })\n  }\n\n  /**\n\t * This will be called when panorama is in progress\n\t * @fires PANOLENS.Panorama#progress\n\t */\n  PANOLENS.Panorama.prototype.onProgress = function (progress) {\n    /**\n\t\t * Loading panorama progress event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#progress\n\t \t * @property {object} progress - The progress object containing loaded and total amount\n\t\t */\n    this.dispatchEvent({ type: 'progress', progress: progress })\n  }\n\n  /**\n\t * This will be called when panorama loading has error\n\t * @fires PANOLENS.Panorama#error\n\t */\n  PANOLENS.Panorama.prototype.onError = function () {\n    /**\n\t\t * Loading panorama error event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#error\n\t\t */\n    this.dispatchEvent({ type: 'error' })\n  }\n\n  /**\n\t * Get zoom level based on window width\n\t * @return {number} zoom level indicating image quality\n\t */\n  PANOLENS.Panorama.prototype.getZoomLevel = function () {\n    var zoomLevel\n\n    if (window.innerWidth <= 800) {\n      zoomLevel = this.ImageQualityFair\n    } else if (window.innerWidth > 800 && window.innerWidth <= 1280) {\n      zoomLevel = this.ImageQualityMedium\n    } else if (window.innerWidth > 1280 && window.innerWidth <= 1920) {\n      zoomLevel = this.ImageQualityHigh\n    } else if (window.innerWidth > 1920) {\n      zoomLevel = this.ImageQualitySuperHigh\n    } else {\n      zoomLevel = this.ImageQualityLow\n    }\n\n    return zoomLevel\n  }\n\n  /**\n\t * Update texture of a panorama\n\t * @param {THREE.Texture} texture - Texture to be updated\n\t */\n  PANOLENS.Panorama.prototype.updateTexture = function (texture) {\n    this.material.map = texture\n\n    this.material.needsUpdate = true\n  }\n\n  /**\n\t * Toggle visibility of infospots in this panorama\n\t * @param  {boolean} isVisible - Visibility of infospots\n\t * @param  {number} delay - Delay in milliseconds to change visibility\n\t * @fires PANOLENS.Panorama#infospot-animation-complete\n\t */\n  PANOLENS.Panorama.prototype.toggleInfospotVisibility = function (isVisible, delay) {\n    delay = (delay !== undefined) ? delay : 0\n\n    var scope, visible\n\n    scope = this\n    visible = (isVisible !== undefined) ? isVisible : (!this.isInfospotVisible)\n\n    this.traverse(function (object) {\n      if (object instanceof PANOLENS.Infospot) {\n        visible ? object.show(delay) : object.hide(delay)\n      }\n    })\n\n    this.isInfospotVisible = visible\n\n    // Animation complete event\n    this.infospotAnimation.onComplete(function () {\n      /**\n\t\t\t * Complete toggling infospot visibility\n\t\t\t * @event PANOLENS.Panorama#infospot-animation-complete\n\t\t\t * @type {object}\n\t\t\t */\n      scope.dispatchEvent({ type: 'infospot-animation-complete', visible: visible })\n    }).delay(delay).start()\n  }\n\n  /**\n\t * Set image of this panorama's linking infospot\n\t * @param {string} url   - Url to the image asset\n\t * @param {number} scale - Scale factor of the infospot\n\t */\n  PANOLENS.Panorama.prototype.setLinkingImage = function (url, scale) {\n    this.linkingImageURL = url\n    this.linkingImageScale = scale\n  }\n\n  /**\n\t * Link one-way panorama\n\t * @param  {PANOLENS.Panorama} pano  - The panorama to be linked to\n\t * @param  {THREE.Vector3} position - The position of infospot which navigates to the pano\n\t * @param  {number} [imageScale=300] - Image scale of linked infospot\n\t * @param  {string} [imageSrc=PANOLENS.DataImage.Arrow] - The image source of linked infospot\n\t */\n  PANOLENS.Panorama.prototype.link = function (pano, position, imageScale, imageSrc) {\n    var scope = this, spot, scale, img\n\n    this.visible = true\n\n    if (!position) {\n      console.warn('Please specify infospot position for linking')\n\n      return\n    }\n\n    // Infospot scale\n    if (imageScale !== undefined) {\n      scale = imageScale\n    } else if (pano.linkingImageScale !== undefined) {\n      scale = pano.linkingImageScale\n    } else {\n      scale = 300\n    }\n\n    // Infospot image\n    if (imageSrc) {\n      img = imageSrc\n    } else if (pano.linkingImageURL) {\n      img = pano.linkingImageURL\n    } else {\n      img = PANOLENS.DataImage.Arrow\n    }\n\n    // Creates a new infospot\n    spot = new PANOLENS.Infospot(scale, img)\n    spot.position.copy(position)\n    spot.toPanorama = pano\n    spot.addEventListener('click', function () {\n        \t/**\n        \t * Viewer handler event\n        \t * @type {object}\n        \t * @event PANOLENS.Panorama#panolens-viewer-handler\n        \t * @property {string} method - Viewer function name\n        \t * @property {*} data - The argument to be passed into the method\n        \t */\n        \tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setPanorama', data: pano })\n    })\n\n    this.linkedSpots.push(spot)\n\n    this.add(spot)\n\n    this.visible = false\n  }\n\n  PANOLENS.Panorama.prototype.reset = function () {\n    this.children.length = 0\n  }\n\n  PANOLENS.Panorama.prototype.setupTransitions = function () {\n    this.fadeInAnimation = new TWEEN.Tween(this.material)\n      .easing(TWEEN.Easing.Quartic.Out)\n      .onStart(function () {\n        this.visible = true\n        this.material.visible = true\n\n        /**\n\t\t\t\t * Enter panorama fade in start event\n\t\t\t\t * @event PANOLENS.Panorama#enter-fade-start\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-fade-start' })\n      }.bind(this))\n\n    this.fadeOutAnimation = new TWEEN.Tween(this.material)\n      .easing(TWEEN.Easing.Quartic.Out)\n      .onComplete(function () {\n        this.visible = false\n        this.material.visible = true\n\n        /**\n\t\t\t\t * Leave panorama complete event\n\t\t\t\t * @event PANOLENS.Panorama#leave-complete\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'leave-complete' })\n      }.bind(this))\n\n    this.enterTransition = new TWEEN.Tween(this)\n      .easing(TWEEN.Easing.Quartic.Out)\n      .onComplete(function () {\n        /**\n\t\t\t\t * Enter panorama and animation complete event\n\t\t\t\t * @event PANOLENS.Panorama#enter-animation-complete\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-animation-complete' })\n      }.bind(this))\n      .start()\n\n    this.leaveTransition = new TWEEN.Tween(this)\n      .easing(TWEEN.Easing.Quartic.Out)\n  }\n\n  /**\n\t * Start fading in animation\n\t * @fires PANOLENS.Panorama#enter-fade-complete\n\t */\n  PANOLENS.Panorama.prototype.fadeIn = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration\n\n    this.fadeOutAnimation.stop()\n    this.fadeInAnimation\n      .to({ opacity: 1 }, duration)\n      .onComplete(function () {\n        this.toggleInfospotVisibility(true, duration / 2)\n\n        /**\n\t\t\t\t * Enter panorama fade complete event\n\t\t\t\t * @event PANOLENS.Panorama#enter-fade-complete\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-fade-complete' })\n      }.bind(this))\n      .start()\n  }\n\n  /**\n\t * Start fading out animation\n\t */\n  PANOLENS.Panorama.prototype.fadeOut = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration\n\n    this.fadeInAnimation.stop()\n    this.fadeOutAnimation.to({ opacity: 0 }, duration).start()\n  }\n\n  /**\n\t * This will be called when entering a panorama\n\t * @fires PANOLENS.Panorama#enter\n\t * @fires PANOLENS.Panorama#enter-animation-start\n\t */\n  PANOLENS.Panorama.prototype.onEnter = function () {\n    var duration = this.animationDuration\n\n    this.leaveTransition.stop()\n    this.enterTransition\n      .to({}, duration)\n      .onStart(function () {\n        /**\n\t\t\t\t * Enter panorama and animation starting event\n\t\t\t\t * @event PANOLENS.Panorama#enter-animation-start\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-animation-start' })\n\n        if (this.loaded) {\n          this.fadeIn(duration)\n        } else {\n          this.load()\n        }\n      }.bind(this))\n      .start()\n\n    /**\n\t\t * Enter panorama event\n\t\t * @event PANOLENS.Panorama#enter\n\t\t * @type {object}\n\t\t */\n    this.dispatchEvent({ type: 'enter' })\n  }\n\n  /**\n\t * This will be called when leaving a panorama\n\t * @fires PANOLENS.Panorama#leave\n\t */\n  PANOLENS.Panorama.prototype.onLeave = function () {\n    var duration = this.animationDuration\n\n    this.enterTransition.stop()\n    this.leaveTransition\n      .to({}, duration)\n      .onStart(function () {\n        /**\n\t\t\t\t * Leave panorama and animation starting event\n\t\t\t\t * @event PANOLENS.Panorama#leave-animation-start\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'leave-animation-start' })\n\n        this.fadeOut(duration)\n        this.toggleInfospotVisibility(false)\n      }.bind(this))\n      .start()\n\n    /**\n\t\t * Leave panorama event\n\t\t * @event PANOLENS.Panorama#leave\n\t\t * @type {object}\n\t\t */\n    this.dispatchEvent({ type: 'leave' })\n  }\n\n  /**\n\t * Dispose panorama\n\t */\n  PANOLENS.Panorama.prototype.dispose = function () {\n    /**\n    \t * On panorama dispose handler\n    \t * @type {object}\n    \t * @event PANOLENS.Panorama#panolens-viewer-handler\n    \t * @property {string} method - Viewer function name\n    \t * @property {*} data - The argument to be passed into the method\n    \t */\n    \tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this })\n\n    // recursive disposal on 3d objects\n    function recursiveDispose (object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i])\n        object.remove(object.children[i])\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose()\n      }\n\n      object.geometry && object.geometry.dispose()\n      object.material && object.material.dispose()\n    }\n\n    recursiveDispose(this)\n\n    if (this.parent) {\n      this.parent.remove(this)\n    }\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Equirectangular based image panorama\n\t * @constructor\n\t * @param {string} image - Image url or HTMLImageElement\n\t * @param {number} [radius=5000] - Radius of panorama\n\t */\n  PANOLENS.ImagePanorama = function (image, radius) {\n    radius = radius || 5000\n\n    var geometry = new THREE.SphereGeometry(radius, 60, 40),\n      material = new THREE.MeshBasicMaterial({ opacity: 0, transparent: true })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n\n    this.src = image\n  }\n\n  PANOLENS.ImagePanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.ImagePanorama.prototype.constructor = PANOLENS.ImagePanorama\n\n  /**\n\t * Load image asset\n\t * @param  {*} src - Url or image element\n\t */\n  PANOLENS.ImagePanorama.prototype.load = function (src) {\n    src = src || this.src\n\n    if (!src) {\n      console.warn('Image source undefined')\n    } else if (typeof src === 'string') {\n      PANOLENS.Utils.TextureLoader.load(src, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this))\n    } else if (src instanceof HTMLImageElement) {\n      this.onLoad(new THREE.Texture(src))\n    }\n  }\n\n  /**\n\t * This will be called when image is loaded\n\t * @param  {THREE.Texture} texture - Texture to be updated\n\t */\n  PANOLENS.ImagePanorama.prototype.onLoad = function (texture) {\n    texture.minFilter = texture.magFilter = THREE.LinearFilter\n\n    texture.needsUpdate = true\n\n    this.updateTexture(texture)\n\n    // Call onLoad after second frame being painted\n    window.requestAnimationFrame(function () {\n      window.requestAnimationFrame(function () {\n        PANOLENS.Panorama.prototype.onLoad.call(this)\n      }.bind(this))\n    }.bind(this))\n  }\n\n  PANOLENS.ImagePanorama.prototype.reset = function () {\n    PANOLENS.Panorama.prototype.reset.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Google streetview panorama\n\t *\n\t * [How to get Panorama ID]{@link http://stackoverflow.com/questions/29916149/google-maps-streetview-how-to-get-panorama-id}\n\t * @constructor\n\t * @param {string} panoId - Panorama id from Google Streetview\n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n  PANOLENS.GoogleStreetviewPanorama = function (panoId, radius) {\n    PANOLENS.ImagePanorama.call(this, undefined, radius)\n\n    this.panoId = panoId\n\n    this.gsvLoader = undefined\n\n    this.loadRequested = false\n\n    this.setupGoogleMapAPI()\n  }\n\n  PANOLENS.GoogleStreetviewPanorama.prototype = Object.create(PANOLENS.ImagePanorama.prototype)\n\n  PANOLENS.GoogleStreetviewPanorama.constructor = PANOLENS.GoogleStreetviewPanorama\n\n  /**\n\t * Load Google Street View by panorama id\n\t * @param {string} panoId - Gogogle Street View panorama id\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.load = function (panoId) {\n    this.loadRequested = true\n\n    panoId = (panoId || this.panoId) || {}\n\n    if (panoId && this.gsvLoader) {\n      this.loadGSVLoader(panoId)\n    } else {\n      this.gsvLoader = {}\n    }\n  }\n\n  /**\n\t * Setup Google Map API\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI = function () {\n    var script = document.createElement('script')\n    script.src = 'https://maps.googleapis.com/maps/api/js'\n    script.onreadystatechange = this.setGSVLoader.bind(this)\n    \tscript.onload = this.setGSVLoader.bind(this)\n\n    document.getElementsByTagName('head')[0].appendChild(script)\n  }\n\n  /**\n\t * Set GSV Loader\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader = function () {\n    this.gsvLoader = new GSVPANO.PanoLoader()\n\n    if (this.gsvLoader === {} || this.loadRequested) {\n      this.load()\n    }\n  }\n\n  /**\n\t * Get GSV Loader\n\t * @return {object} GSV Loader instance\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader = function () {\n    return this.gsvLoader\n  }\n\n  /**\n\t * Load GSV Loader\n\t * @param  {string} panoId - Gogogle Street View panorama id\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader = function (panoId) {\n    this.loadRequested = false\n\n    this.gsvLoader.onProgress = this.onProgress.bind(this)\n\n    this.gsvLoader.onPanoramaLoad = this.onLoad.bind(this)\n\n    this.gsvLoader.setZoom(this.getZoomLevel())\n\n    this.gsvLoader.load(panoId)\n\n    this.gsvLoader.loaded = true\n  }\n\n  /**\n\t * This will be called when panorama is loaded\n\t * @param  {HTMLCanvasElement} canvas - Canvas where the tiles have been drawn\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.onLoad = function (canvas) {\n    if (!this.gsvLoader) { return }\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, new THREE.Texture(canvas))\n  }\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.reset = function () {\n    this.gsvLoader = undefined\n\n    PANOLENS.ImagePanorama.prototype.reset.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Cubemap-based panorama\n\t * @constructor\n\t * @param {array} images - An array of cubetexture containing six images\n\t * @param {number} [edgeLength=10000] - The length of cube's edge\n\t */\n  PANOLENS.CubePanorama = function (images, edgeLength) {\n    var shader, geometry, material\n\n    this.images = images || []\n\n    edgeLength = edgeLength || 10000\n    shader = JSON.parse(JSON.stringify(THREE.ShaderLib[ 'cube' ]))\n\n    geometry = new THREE.BoxGeometry(edgeLength, edgeLength, edgeLength)\n    material = new THREE.ShaderMaterial({\n\n      fragmentShader: shader.fragmentShader,\n      vertexShader: shader.vertexShader,\n      uniforms: shader.uniforms,\n      side: THREE.BackSide\n\n    })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n  }\n\n  PANOLENS.CubePanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.CubePanorama.prototype.constructor = PANOLENS.CubePanorama\n\n  /**\n\t * Load 6 images and bind listeners\n\t */\n  PANOLENS.CubePanorama.prototype.load = function () {\n    PANOLENS.Utils.CubeTextureLoader.load(\n\n      this.images,\n\n      this.onLoad.bind(this),\n      this.onProgress.bind(this),\n      this.onError.bind(this)\n\n    )\n  }\n\n  /**\n\t * This will be called when 6 textures are ready\n\t * @param  {THREE.CubeTexture} texture - Cube texture\n\t */\n  PANOLENS.CubePanorama.prototype.onLoad = function (texture) {\n    this.material.uniforms[ 'tCube' ].value = texture\n\n    PANOLENS.Panorama.prototype.onLoad.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Basic panorama with 6 faces tile images\n\t * @constructor\n\t * @param {number} [edgeLength=10000] - The length of cube's edge\n\t */\n  PANOLENS.BasicPanorama = function (edgeLength) {\n    var tile = PANOLENS.DataImage.WhiteTile\n\n    PANOLENS.CubePanorama.call(this, [ tile, tile, tile, tile, tile, tile ], edgeLength)\n  }\n\n  PANOLENS.BasicPanorama.prototype = Object.create(PANOLENS.CubePanorama.prototype)\n\n  PANOLENS.BasicPanorama.prototype.constructor = PANOLENS.BasicPanorama\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Video Panorama\n\t * @constructor\n\t * @param {string} src - Equirectangular video url\n\t * @param {object} [options] - Option for video settings\n\t * @param {HTMLElement} [options.videoElement] - HTML5 video element contains the video\n\t * @param {boolean} [options.loop=true] - Specify if the video should loop in the end\n\t * @param {boolean} [options.muted=false] - Mute the video or not\n\t * @param {boolean} [options.autoplay=false] - Specify if the video should auto play\n\t * @param {boolean} [options.playsinline=true] - Specify if video should play inline for iOS. If you want it to auto play inline, set both autoplay and muted options to true\n\t * @param {string} [options.crossOrigin=\"anonymous\"] - Sets the cross-origin attribute for the video, which allows for cross-origin videos in some browsers (Firefox, Chrome). Set to either \"anonymous\" or \"use-credentials\".\n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n  PANOLENS.VideoPanorama = function (src, options, radius) {\n    radius = radius || 5000\n\n    var geometry = new THREE.SphereGeometry(radius, 60, 40),\n      material = new THREE.MeshBasicMaterial({ opacity: 0, transparent: true })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n\n    this.src = src\n    this.options = options || {}\n    this.options.playsinline = this.options.playsinline !== false\n\n    this.videoElement = undefined\n    this.videoRenderObject = undefined\n    this.videoProgress = 0\n\n    this.isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent)\n    this.isMobile = this.isIOS || /Android|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent)\n\n    this.addEventListener('leave', this.pauseVideo.bind(this))\n    this.addEventListener('enter-fade-start', this.resumeVideoProgress.bind(this))\n    this.addEventListener('video-toggle', this.toggleVideo.bind(this))\n    this.addEventListener('video-time', this.setVideoCurrentTime.bind(this))\n  }\n\n  PANOLENS.VideoPanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.VideoPanorama.constructor = PANOLENS.VideoPanorama\n\n  /**\n\t * Load video panorama\n\t * @param  {string} src     - The video url\n\t * @param  {object} options - Option object containing videoElement\n\t * @fires  PANOLENS.Panorama#panolens-viewer-handler\n\t */\n  PANOLENS.VideoPanorama.prototype.load = function (src, options) {\n    var scope = this\n\n    src = (src || this.src) || ''\n    options = (options || this.options) || {}\n\n    this.videoElement = options.videoElement || document.createElement('video')\n\n    this.videoElement.muted = options.muted || false\n    this.videoElement.loop = (options.loop !== undefined) ? options.loop : true\n    this.videoElement.autoplay = (options.autoplay !== undefined) ? options.autoplay : false\n    this.videoElement.crossOrigin = (options.crossOrigin !== undefined) ? options.crossOrigin : 'anonymous'\n\n    // iphone inline player\n    if (options.playsinline) {\n      this.videoElement.setAttribute('playsinline', '')\n      this.videoElement.setAttribute('webkit-playsinline', '')\n    }\n\n    var onloadeddata = function () {\n      scope.onProgress({ loaded: 1, total: 1 })\n      scope.setVideoTexture(scope.videoElement)\n\n      if (scope.videoElement.autoplay) {\n        /**\n\t\t\t\t * Viewer handler event\n\t\t\t\t * @type {object}\n\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t */\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false })\n      }\n\n      // For mobile silent autoplay\n      if (scope.isMobile) {\n        if (scope.videoElement.autoplay && scope.videoElement.muted) {\n          /**\n\t\t\t\t\t * Viewer handler event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t\t */\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false })\n        } else {\n          /**\n\t\t\t\t\t * Viewer handler event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t\t */\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true })\n        }\n      }\n\n      scope.onLoad()\n    }\n\n    /**\n\t\t * Ready state of the audio/video element\n\t\t * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready\n\t\t * 1 = HAVE_METADATA - metadata for the audio/video is ready\n\t\t * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond\n\t\t * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available\n\t\t * 4 = HAVE_ENOUGH_DATA - enough data available to start playing\n\t\t */\n    if (this.videoElement.readyState > 2) {\n      onloadeddata()\n    } else {\n      if (!this.videoElement.querySelectorAll('source').length || !this.videoElement.src) {\n        this.videoElement.src = src\n      }\n\n      this.videoElement.load()\n    }\n\n    this.videoElement.onloadeddata = onloadeddata\n\n    this.videoElement.ontimeupdate = function (event) {\n      scope.videoProgress = this.duration >= 0 ? this.currentTime / this.duration : 0\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'onVideoUpdate'\n\t\t\t * @property {number} data - The percentage of video progress. Range from 0.0 to 1.0\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: scope.videoProgress })\n    }\n\n    this.videoElement.addEventListener('ended', function () {\n      if (!scope.options.loop) {\n        scope.resetVideo()\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true })\n      }\n    }, false)\n  }\n\n  /**\n\t * Set video texture\n\t * @param {HTMLVideoElement} video  - The html5 video element\n\t * @fires PANOLENS.Panorama#panolens-viewer-handler\n\t */\n  PANOLENS.VideoPanorama.prototype.setVideoTexture = function (video) {\n    var videoTexture, videoRenderObject, scene\n\n    if (!video) return\n\n    videoTexture = new THREE.VideoTexture(video)\n    videoTexture.minFilter = THREE.LinearFilter\n    videoTexture.magFilter = THREE.LinearFilter\n    videoTexture.format = THREE.RGBFormat\n\n    videoRenderObject = {\n\n      video: video,\n      videoTexture: videoTexture\n\n    }\n\n    if (this.isIOS) {\n      enableInlineVideo(video)\n    }\n\n    this.updateTexture(videoTexture)\n\n    this.videoRenderObject = videoRenderObject\n  }\n\n  PANOLENS.VideoPanorama.prototype.reset = function () {\n    this.videoElement = undefined\n\n    PANOLENS.Panorama.prototype.reset.call(this)\n  }\n\n  /**\n\t * Check if video is paused\n\t * @return {boolean} - is video paused or not\n\t */\n  PANOLENS.VideoPanorama.prototype.isVideoPaused = function () {\n    return this.videoRenderObject.video.paused\n  }\n\n  /**\n\t * Toggle video to play or pause\n\t */\n  PANOLENS.VideoPanorama.prototype.toggleVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      if (this.isVideoPaused()) {\n        this.videoRenderObject.video.play()\n      } else {\n        this.videoRenderObject.video.pause()\n      }\n    }\n  }\n\n  /**\n\t * Set video currentTime\n\t * @param {object} event - Event contains percentage. Range from 0.0 to 1.0\n\t */\n  PANOLENS.VideoPanorama.prototype.setVideoCurrentTime = function (event) {\n    if (this.videoRenderObject && this.videoRenderObject.video && !Number.isNaN(event.percentage) && event.percentage !== 1) {\n      this.videoRenderObject.video.currentTime = this.videoRenderObject.video.duration * event.percentage\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: event.percentage })\n    }\n  }\n\n  /**\n\t * Play video\n\t */\n  PANOLENS.VideoPanorama.prototype.playVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoPaused()) {\n      this.videoRenderObject.video.play()\n    }\n\n    /**\n\t\t * Play event\n\t\t * @type {object}\n\t\t * @event 'play'\n\t\t * */\n    this.dispatchEvent({ type: 'play' })\n  }\n\n  /**\n\t * Pause video\n\t */\n  PANOLENS.VideoPanorama.prototype.pauseVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoPaused()) {\n      this.videoRenderObject.video.pause()\n    }\n\n    /**\n\t\t * Pause event\n\t\t * @type {object}\n\t\t * @event 'pause'\n\t\t * */\n    this.dispatchEvent({ type: 'pause' })\n  }\n\n  /**\n\t * Resume video\n\t */\n  PANOLENS.VideoPanorama.prototype.resumeVideoProgress = function () {\n    if (this.videoElement.autoplay && !this.isMobile) {\n      this.playVideo()\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t */\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false })\n    } else {\n      this.pauseVideo()\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t */\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true })\n    }\n\n    this.setVideoCurrentTime({ percentage: this.videoProgress })\n  }\n\n  /**\n\t * Reset video at stating point\n\t */\n  PANOLENS.VideoPanorama.prototype.resetVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      this.setVideoCurrentTime({ percentage: 0 })\n    }\n  }\n\n  /**\n\t* Check if video is muted\n\t* @return {boolean} - is video muted or not\n\t*/\n  PANOLENS.VideoPanorama.prototype.isVideoMuted = function () {\n    return this.videoRenderObject.video.muted\n  }\n\n  /**\n\t * Mute video\n\t */\n  PANOLENS.VideoPanorama.prototype.muteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = true\n    }\n\n    this.dispatchEvent({ type: 'volumechange' })\n  }\n\n  /**\n\t * Unmute video\n\t */\n  PANOLENS.VideoPanorama.prototype.unmuteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = false\n    }\n\n    this.dispatchEvent({ type: 'volumechange' })\n  }\n\n  /**\n\t * Returns the video element\n\t */\n  PANOLENS.VideoPanorama.prototype.getVideoElement = function () {\n    return this.videoRenderObject.video\n  }\n\n  /**\n\t * Dispose video panorama\n\t */\n  PANOLENS.VideoPanorama.prototype.dispose = function () {\n    this.resetVideo()\n    this.pauseVideo()\n\n    this.removeEventListener('leave', this.pauseVideo.bind(this))\n    this.removeEventListener('enter-fade-start', this.resumeVideoProgress.bind(this))\n    this.removeEventListener('video-toggle', this.toggleVideo.bind(this))\n    this.removeEventListener('video-time', this.setVideoCurrentTime.bind(this))\n\n    PANOLENS.Panorama.prototype.dispose.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Empty panorama\n\t * @constructor\n\t * @param {number} [radius=5000] - Radius of panorama\n\t */\n  PANOLENS.EmptyPanorama = function (radius) {\n    radius = radius || 5000\n\n    var geometry = new THREE.Geometry(),\n      material = new THREE.MeshBasicMaterial({\n        color: 0x000000, opacity: 1, transparent: true\n      })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n  }\n\n  PANOLENS.EmptyPanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.EmptyPanorama.prototype.constructor = PANOLENS.EmptyPanorama\n})(); (function () {\n  /**\n\t * Little Planet\n\t * @constructor\n\t * @param {string} type \t\t- Type of little planet basic class\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n  PANOLENS.LittlePlanet = function (type, source, size, ratio) {\n    type = type || 'image'\n\n    type === 'image' && PANOLENS.ImagePanorama.call(this, source, size)\n\n    this.size = size || 10000\n    this.ratio = ratio || 0.5\n    this.EPS = 0.000001\n    this.frameId\n\n    this.geometry = this.createGeometry()\n    this.material = this.createMaterial(this.size)\n\n    this.dragging = false\n    this.userMouse = new THREE.Vector2()\n\n    this.quatA = new THREE.Quaternion()\n    this.quatB = new THREE.Quaternion()\n    this.quatCur = new THREE.Quaternion()\n    this.quatSlerp = new THREE.Quaternion()\n\n    this.vectorX = new THREE.Vector3(1, 0, 0)\n    this.vectorY = new THREE.Vector3(0, 1, 0)\n\n    this.addEventListener('window-resize', this.onWindowResize)\n  }\n\n  PANOLENS.LittlePlanet.prototype = Object.create(PANOLENS.ImagePanorama.prototype)\n\n  PANOLENS.LittlePlanet.prototype.constructor = PANOLENS.LittlePlanet\n\n  PANOLENS.LittlePlanet.prototype.createGeometry = function () {\n    return new THREE.PlaneGeometry(this.size, this.size * this.ratio)\n  }\n\n  PANOLENS.LittlePlanet.prototype.createMaterial = function (size) {\n    var uniforms = PANOLENS.StereographicShader.uniforms\n    uniforms.zoom.value = size\n\n    return new THREE.ShaderMaterial({\n\n      uniforms: uniforms,\n      vertexShader: PANOLENS.StereographicShader.vertexShader,\n      fragmentShader: PANOLENS.StereographicShader.fragmentShader\n\n    })\n  }\n\n  PANOLENS.LittlePlanet.prototype.registerMouseEvents = function () {\n    this.container.addEventListener('mousedown', this.onMouseDown.bind(this), false)\n    this.container.addEventListener('mousemove', this.onMouseMove.bind(this), false)\n    this.container.addEventListener('mouseup', this.onMouseUp.bind(this), false)\n    this.container.addEventListener('touchstart', this.onMouseDown.bind(this), false)\n    this.container.addEventListener('touchmove', this.onMouseMove.bind(this), false)\n    this.container.addEventListener('touchend', this.onMouseUp.bind(this), false)\n    this.container.addEventListener('mousewheel', this.onMouseWheel.bind(this), false)\n    this.container.addEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false)\n    this.container.addEventListener('contextmenu', this.onContextMenu.bind(this), false)\n  }\n\n  PANOLENS.LittlePlanet.prototype.unregisterMouseEvents = function () {\n    this.container.removeEventListener('mousedown', this.onMouseDown.bind(this), false)\n    this.container.removeEventListener('mousemove', this.onMouseMove.bind(this), false)\n    this.container.removeEventListener('mouseup', this.onMouseUp.bind(this), false)\n    this.container.removeEventListener('touchstart', this.onMouseDown.bind(this), false)\n    this.container.removeEventListener('touchmove', this.onMouseMove.bind(this), false)\n    this.container.removeEventListener('touchend', this.onMouseUp.bind(this), false)\n    this.container.removeEventListener('mousewheel', this.onMouseWheel.bind(this), false)\n    this.container.removeEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false)\n    this.container.removeEventListener('contextmenu', this.onContextMenu.bind(this), false)\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseDown = function (event) {\n    var x = (event.clientX >= 0) ? event.clientX : event.touches[ 0 ].clientX\n    var y = (event.clientY >= 0) ? event.clientY : event.touches[ 0 ].clientY\n\n    var inputCount = (event.touches && event.touches.length) || 1\n\n    switch (inputCount) {\n      case 1:\n\n        this.dragging = true\n        this.userMouse.set(x, y)\n\n        break\n\n      case 2:\n\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n        this.userMouse.pinchDistance = distance\n\n        break\n\n      default:\n\n        break\n    }\n\n    this.onUpdateCallback()\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseMove = function (event) {\n    var x = (event.clientX >= 0) ? event.clientX : event.touches[ 0 ].clientX\n    var y = (event.clientY >= 0) ? event.clientY : event.touches[ 0 ].clientY\n\n    var inputCount = (event.touches && event.touches.length) || 1\n\n    switch (inputCount) {\n      case 1:\n\n        var angleX = THREE.Math.degToRad(x - this.userMouse.x) * 0.4\n        var angleY = THREE.Math.degToRad(y - this.userMouse.y) * 0.4\n\n        if (this.dragging) {\n          this.quatA.setFromAxisAngle(this.vectorY, angleX)\n          this.quatB.setFromAxisAngle(this.vectorX, angleY)\n          this.quatCur.multiply(this.quatA).multiply(this.quatB)\n          this.userMouse.set(x, y)\n        }\n\n        break\n\n      case 2:\n\n        var uniforms = this.material.uniforms\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n\n        this.addZoomDelta(this.userMouse.pinchDistance - distance)\n\n        break\n\n      default:\n\n        break\n    }\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseUp = function (event) {\n    this.dragging = false\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseWheel = function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    var delta = 0\n\n    if (event.wheelDelta !== undefined) { // WebKit / Opera / Explorer 9\n      delta = event.wheelDelta\n    } else if (event.detail !== undefined) { // Firefox\n      delta = -event.detail\n    }\n\n    this.addZoomDelta(delta)\n    this.onUpdateCallback()\n  }\n\n  PANOLENS.LittlePlanet.prototype.addZoomDelta = function (delta) {\n    var uniforms = this.material.uniforms\n    var lowerBound = this.size * 0.1\n    var upperBound = this.size * 10\n\n    uniforms.zoom.value += delta\n\n    if (uniforms.zoom.value <= lowerBound) {\n      uniforms.zoom.value = lowerBound\n    } else if (uniforms.zoom.value >= upperBound) {\n      uniforms.zoom.value = upperBound\n    }\n  }\n\n  PANOLENS.LittlePlanet.prototype.onUpdateCallback = function () {\n    this.frameId = window.requestAnimationFrame(this.onUpdateCallback.bind(this))\n\n    this.quatSlerp.slerp(this.quatCur, 0.1)\n    this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp)\n\n    if (!this.dragging && 1.0 - this.quatSlerp.clone().dot(this.quatCur) < this.EPS) {\n      window.cancelAnimationFrame(this.frameId)\n    }\n  }\n\n  PANOLENS.LittlePlanet.prototype.reset = function () {\n    this.quatCur.set(0, 0, 0, 1)\n    this.quatSlerp.set(0, 0, 0, 1)\n    this.onUpdateCallback()\n  }\n\n  PANOLENS.LittlePlanet.prototype.onLoad = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight\n\n    this.registerMouseEvents()\n    this.onUpdateCallback()\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'disableControl' })\n  }\n\n  PANOLENS.LittlePlanet.prototype.onLeave = function () {\n    this.unregisterMouseEvents()\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'enableControl', data: PANOLENS.Controls.ORBIT })\n\n    window.cancelAnimationFrame(this.frameId)\n\n    PANOLENS.Panorama.prototype.onLeave.call(this)\n  }\n\n  PANOLENS.LittlePlanet.prototype.onWindowResize = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight\n  }\n\n  PANOLENS.LittlePlanet.prototype.onContextMenu = function () {\n    this.dragging = false\n  }\n})(); (function () {\n  /**\n\t * Image Little Planet\n\t * @constructor\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n  PANOLENS.ImageLittlePlanet = function (source, size, ratio) {\n    PANOLENS.LittlePlanet.call(this, 'image', source, size, ratio)\n  }\n\n  PANOLENS.ImageLittlePlanet.prototype = Object.create(PANOLENS.LittlePlanet.prototype)\n\n  PANOLENS.ImageLittlePlanet.prototype.constructor = PANOLENS.ImageLittlePlanet\n\n  PANOLENS.ImageLittlePlanet.prototype.onLoad = function (texture) {\n    this.updateTexture(texture)\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, texture)\n    PANOLENS.LittlePlanet.prototype.onLoad.call(this)\n  }\n\n  PANOLENS.ImageLittlePlanet.prototype.updateTexture = function (texture) {\n    texture.minFilter = texture.magFilter = THREE.LinearFilter\n\n    this.material.uniforms[ 'tDiffuse' ].value = texture\n  }\n})(); (function () {\n  /**\n\t * Reticle 3D Sprite\n\t * @constructor\n\t * @param {THREE.Color} [color=0xfffff] - Color of the reticle sprite\n\t * @param {boolean} [autoSelect=true] - Auto selection\n\t * @param {string} [idleImageUrl=PANOLENS.DataImage.ReticleIdle] - Image asset url\n\t * @param {string} [dwellImageUrl=PANOLENS.DataImage.ReticleDwell] - Image asset url\n\t * @param {number} [dwellTime=1500] - Duration for dwelling sequence to complete\n\t * @param {number} [dwellSpriteAmount=45] - Number of dwelling sprite sequence\n\t */\n  PANOLENS.Reticle = function (color, autoSelect, idleImageUrl, dwellImageUrl, dwellTime, dwellSpriteAmount) {\n    color = color || 0xffffff\n\n    this.autoSelect = autoSelect != undefined ? autoSelect : true\n\n    this.dwellTime = dwellTime || 1500\n    this.dwellSpriteAmount = dwellSpriteAmount || 45\n    this.dwellInterval = this.dwellTime / this.dwellSpriteAmount\n\n    this.IDLE = 0\n    this.DWELLING = 1\n    this.status\n\n    this.scaleIdle = new THREE.Vector3(0.2, 0.2, 1)\n    this.scaleDwell = new THREE.Vector3(1, 0.8, 1)\n\n    this.textureLoaded = false\n    this.idleImageUrl = idleImageUrl || PANOLENS.DataImage.ReticleIdle\n    this.dwellImageUrl = dwellImageUrl || PANOLENS.DataImage.ReticleDwell\n    this.idleTexture = new THREE.Texture()\n    this.dwellTexture = new THREE.Texture()\n\n    THREE.Sprite.call(this, new THREE.SpriteMaterial({ color: color, depthTest: false }))\n\n    this.currentTile = 0\n    this.startTime = 0\n\n    this.visible = false\n    this.renderOrder = 10\n    this.timerId\n\n    // initial update\n    this.updateStatus(this.IDLE)\n  }\n\n  PANOLENS.Reticle.prototype = Object.create(THREE.Sprite.prototype)\n\n  PANOLENS.Reticle.prototype.constructor = PANOLENS.Reticle\n\n  /**\n\t * Make reticle visible\n\t */\n  PANOLENS.Reticle.prototype.show = function () {\n    this.visible = true\n  }\n\n  /**\n\t * Make reticle invisible\n\t */\n  PANOLENS.Reticle.prototype.hide = function () {\n    this.visible = false\n  }\n\n  /**\n\t * Load reticle textures\n\t */\n  PANOLENS.Reticle.prototype.loadTextures = function () {\n    this.idleTexture = PANOLENS.Utils.TextureLoader.load(this.idleImageUrl)\n    this.dwellTexture = PANOLENS.Utils.TextureLoader.load(this.dwellImageUrl)\n\n    this.material.map = this.idleTexture\n    this.setupDwellSprite(this.dwellTexture)\n    this.textureLoaded = true\n  }\n\n  /**\n\t * Start reticle timer selection\n\t * @param  {function} completeCallback - Callback after dwell completes\n\t */\n  PANOLENS.Reticle.prototype.select = function (completeCallback) {\n    if (performance.now() - this.startTime >= this.dwellTime) {\n      this.completeDwelling()\n      completeCallback()\n    } else if (this.autoSelect) {\n      this.updateDwelling(performance.now())\n      this.timerId = window.requestAnimationFrame(this.select.bind(this, completeCallback))\n    }\n  }\n\n  /**\n\t * Clear and reset reticle timer\n\t */\n  PANOLENS.Reticle.prototype.clearTimer = function () {\n    window.cancelAnimationFrame(this.timerId)\n    this.timerId = null\n  }\n\n  /**\n\t * Setup dwell sprite animation\n\t */\n  PANOLENS.Reticle.prototype.setupDwellSprite = function (texture) {\n    texture.wrapS = THREE.RepeatWrapping\n    texture.repeat.set(1 / this.dwellSpriteAmount, 1)\n  }\n\n  /**\n\t * Update reticle status\n\t * @param {number} status - Reticle status\n\t */\n  PANOLENS.Reticle.prototype.updateStatus = function (status) {\n    this.status = status\n\n    if (status === this.IDLE) {\n      this.scale.copy(this.scaleIdle)\n      this.material.map = this.idleTexture\n    } else if (status === this.DWELLING) {\n      this.scale.copy(this.scaleDwell)\n      this.material.map = this.dwellTexture\n    }\n\n    this.currentTile = 0\n    this.material.map.offset.x = 0\n  }\n\n  /**\n\t * Start dwelling sequence\n\t */\n  PANOLENS.Reticle.prototype.startDwelling = function (completeCallback) {\n    if (!this.autoSelect) {\n      return\n    }\n\n    this.startTime = performance.now()\n    this.updateStatus(this.DWELLING)\n    this.select(completeCallback)\n  }\n\n  /**\n\t * Update dwelling sequence\n\t * @param  {number} time - Timestamp for elasped time\n\t */\n  PANOLENS.Reticle.prototype.updateDwelling = function (time) {\n    var elasped = time - this.startTime\n\n    if (this.currentTile <= this.dwellSpriteAmount) {\n      this.currentTile = Math.floor(elasped / this.dwellTime * this.dwellSpriteAmount)\n      this.material.map.offset.x = this.currentTile / this.dwellSpriteAmount\n    } else {\n      this.updateStatus(this.IDLE)\n    }\n  }\n\n  /**\n\t * Cancel dwelling\n\t */\n  PANOLENS.Reticle.prototype.cancelDwelling = function () {\n    this.clearTimer()\n    this.updateStatus(this.IDLE)\n  }\n\n  /**\n\t * Complete dwelling\n\t */\n  PANOLENS.Reticle.prototype.completeDwelling = function () {\n    this.clearTimer()\n    this.updateStatus(this.IDLE)\n  }\n})(); (function () {\n  /**\n\t * Creates a tile with bent capability\n\t * @constructor\n\t * @param {number}  [width=10]                      \t\t\t\t- Width along the X axis\n\t * @param {number}  [height=5]                      \t\t\t\t- Height along the Y axis\n\t * @param {number}  [widthSegments=20]              \t\t\t\t- Width segments\n\t * @param {number}  [heightSegments=20]             \t\t\t\t- Height segments\n\t * @param {THREE.Vector3} [forceDirection=THREE.Vector3( 0, 0, 1 )] - Force direction\n\t * @param {THREE.Vector3} [forceAxis=THREE.Vector3( 0, 1, 0 )] \t\t- Along this axis\n\t * @param {number} [forceAngle=Math.PI/12] \t\t\t\t\t\t\t- Angle to bend in radians\n\t */\n  PANOLENS.Tile = function (width, height, widthSegments, heightSegments, forceDirection, forceAxis, forceAngle) {\n    var scope = this\n\n    this.parameters = {\n      width: width,\n      height: height,\n      widthSegments: widthSegments,\n      heightSegments: heightSegments,\n      forceDirection: forceDirection,\n      forceAxis: forceAxis,\n      forceAngle: forceAngle\n    }\n\n    width = width || 10\n    height = height || 5\n    widthSegments = widthSegments || 1\n    heightSegments = heightSegments || 1\n    forceDirection = forceDirection || new THREE.Vector3(0, 0, 1)\n    forceAxis = forceAxis || new THREE.Vector3(0, 1, 0)\n    forceAngle = forceAngle !== undefined ? forceAngle : 0\n\n    THREE.Mesh.call(this,\n      new THREE.PlaneGeometry(width, height, widthSegments, heightSegments),\n      new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true })\n    )\n\n    this.bendModifier = new THREE.BendModifier()\n\n    this.entity = undefined\n\n    this.animationDuration = 500\n    this.animationFadeOut = undefined\n    this.animationFadeIn = undefined\n    this.animationTranslation = undefined\n    this.tweens = {}\n\n    if (forceAngle !== 0) {\n      this.bend(forceDirection, forceAxis, forceAngle)\n    }\n\n    this.originalGeometry = this.geometry.clone()\n  }\n\n  PANOLENS.Tile.prototype = Object.create(THREE.Mesh.prototype)\n\n  PANOLENS.Tile.prototype.constructor = PANOLENS.Tile\n\n  PANOLENS.Tile.prototype.clone = function () {\n    var parameters = this.parameters, tile\n\n    tile = new PANOLENS.Tile(\n      parameters.width,\n      parameters.height,\n      parameters.widthSegments,\n      parameters.heightSegments,\n      parameters.forceDirection,\n      parameters.forceAxis,\n      parameters.forceAngle\n    )\n\n    tile.setEntity(this.entity)\n    tile.material = this.material.clone()\n\n    return tile\n  }\n\n  /**\n\t * Bend panel with direction, axis, and angle\n\t * @param  {THREE.Vector3} direction - Force direction\n\t * @param  {THREE.Vector3} axis - Along this axis\n\t * @param  {number} angle - Angle to bend in radians\n\t */\n  PANOLENS.Tile.prototype.bend = function (direction, axis, angle) {\n    this.bendModifier.set(direction, axis, angle).modify(this.geometry)\n  }\n\n  /**\n\t * Restore geometry back to initial state\n\t */\n  PANOLENS.Tile.prototype.unbend = function () {\n    var geometry = this.geometry\n\n    this.geometry = this.originalGeometry\n    this.originalGeometry = this.geometry.clone()\n\n    geometry.dispose()\n    geometry = null\n  }\n\n  /**\n\t * Create a tween object for animation\n\t * based on - {@link https://github.com/tweenjs/tween.js}\n\t * @param  {string} name       - Name of the tween animation\n\t * @param  {object} object     - Object to be tweened\n\t * @param  {object} toState    - Final state of the object's properties\n\t * @param  {number} duration   - Tweening duration\n\t * @param  {TWEEN.Easing} easing     - Easing function\n\t * @param  {number} delay      - Animation delay time\n\t * @param  {Function} onStart    - On start function\n\t * @param  {Function} onUpdate   - On update function\n\t * @param  {Function} onComplete - On complete function\n\t * @return {TWEEN.Tween}         - Tween object\n\t */\n  PANOLENS.Tile.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this\n    \ttoState = toState || {}\n    \tduration = duration || this.animationDuration\n    \teasing = easing || TWEEN.Easing.Exponential.Out\n    \tdelay = delay !== undefined ? delay : 0\n    \tonStart = onStart || null\n    \tonUpdate = onUpdate || null\n    \tonComplete = onComplete || null\n\n    \tif (!this.tweens[name]) {\n    \t\tthis.tweens[name] = new TWEEN.Tween(object)\n    \t\t\t.to(toState, duration)\n\t        \t.easing(easing)\n\t        \t.delay(delay)\n\t        \t.onStart(onStart)\n\t        \t.onUpdate(onUpdate)\n\t        \t.onComplete(onComplete)\n    \t}\n\n    \treturn this.tweens[name]\n  }\n\n  /**\n     * Short-hand for displaying a single ripple effect\n     * by duplicating itself and fadeout\n     * @param  {number} scale    - The duplicated self fadeout scale\n     * @param  {number} duration - Effect duration\n     * @param  {TWEEN.Easing} easing   - Easing function\n     */\n  PANOLENS.Tile.prototype.ripple = function (scale, duration, easing) {\n    \tscale = scale || 2\n    \tduration = duration || 200\n    \teasing = easing || TWEEN.Easing.Cubic.Out\n\n    \tvar scope = this, ripple = this.clone()\n\n    new TWEEN.Tween(ripple.scale)\n      .to({x: scale, y: scale}, duration)\n      .easing(easing)\n      .start()\n\n    new TWEEN.Tween(ripple.material)\n      .to({opacity: 0}, duration)\n      .easing(easing)\n      .onComplete(function () {\n        scope.remove(ripple)\n        ripple.geometry.dispose()\n        ripple.material.dispose()\n      })\n      .start()\n\n    this.add(ripple)\n  }\n\n  /**\n\t * Set entity if multiple objects are considered as one entity\n\t * @param {object} entity - Entity represents whole group structure\n\t */\n  PANOLENS.Tile.prototype.setEntity = function (entity) {\n    this.entity = entity\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n     * Group consists of tile array\n     * @constructor\n     * @param {array}  tileArray         - Tile array of PANOLENS.Tile\n     * @param {number} verticalGap       - Vertical gap between each tile\n     * @param {number} depthGap          - Depth gap between each tile\n     * @param {number} animationDuration - Animation duration\n     * @param {number} offset            - Offset index\n     */\n  PANOLENS.TileGroup = function (tileArray, verticalGap, depthGap, animationDuration, offset) {\n    var scope = this, textureLoader\n\n    THREE.Object3D.call(this)\n\n    this.tileArray = tileArray || []\n    this.offset = offset !== undefined ? offset : 0\n    this.v_gap = verticalGap !== undefined ? verticalGap : 6\n    this.d_gap = depthGap !== undefined ? depthGap : 2\n    this.animationDuration = animationDuration !== undefined ? animationDuration : 200\n    this.animationEasing = TWEEN.Easing.Exponential.Out\n    this.visibleDelta = 2\n\n    this.tileArray.map(function (tile, index) {\n      if (tile.image) {\n        PANOLENS.Utils.TextureLoader.load(tile.image, scope.setTexture.bind(tile))\n      }\n\n      tile.position.set(0, index * -scope.v_gap, index * -scope.d_gap)\n      tile.originalPosition = tile.position.clone()\n      tile.setEntity(scope)\n      scope.add(tile)\n    })\n\n    this.updateVisbility()\n  }\n\n  PANOLENS.TileGroup.prototype = Object.create(THREE.Object3D.prototype)\n\n  PANOLENS.TileGroup.prototype.constructor = PANOLENS.TileGroup\n\n  /**\n     * Update corresponding tile textures\n     * @param  {array} imageArray - Image array with index to index image update\n     */\n  PANOLENS.TileGroup.prototype.updateTexture = function (imageArray) {\n    var scope = this\n\n    imageArray = imageArray || []\n    this.children.map(function (child, index) {\n      if (child instanceof PANOLENS.Tile && imageArray[index]) {\n        PANOLENS.Utils.TextureLoader.load(imageArray[index], scope.setTexture.bind(child))\n\t    \t\tif (child.outline) {\n\t    \t\t\tchild.outline.material.visible = true\n\t    \t\t}\n      }\n    })\n  }\n\n  /**\n     * Update all tile textures and hide the remaining ones\n     * @param  {array} imageArray - Image array with index to index image update\n     */\n  PANOLENS.TileGroup.prototype.updateAllTexture = function (imageArray) {\n    this.updateTexture(imageArray)\n\n    if (imageArray.length < this.children.length) {\n      for (var i = imageArray.length; i < this.children.length; i++) {\n        if (this.children[i] instanceof PANOLENS.Tile) {\n          this.children[i].material.visible = false\n          if (this.children[i].outline) {\n            this.children[i].outline.material.visible = false\n          }\n        }\n      }\n    }\n  }\n\n  /**\n     * Set individual texture\n     * @param {THREE.Texture} texture - Texture to be updated\n     */\n  PANOLENS.TileGroup.prototype.setTexture = function (texture) {\n    texture.minFilter = THREE.LinearFilter\n    texture.magFilter = THREE.LinearFilter\n    this.material.visible = true\n    this.material.map = texture\n    this.material.needsUpdate = true\n  }\n\n  /**\n     * Update visibility\n     */\n  PANOLENS.TileGroup.prototype.updateVisbility = function () {\n    \tthis.children[this.offset].visible = true\n    \tnew TWEEN.Tween(this.children[this.offset].material)\n      .to({ opacity: 1 }, this.animationDuration)\n      .easing(this.animationEasing)\n      .start()\n\n    \tif (this.children[this.offset].outline) {\n    \t\tthis.children[this.offset].outline.visible = true\n    \t}\n\n    \t// Backward\n    \tfor (var i = this.offset - 1; i >= 0; i--) {\n    \t\tif (this.tileArray.indexOf(this.children[i]) === -1) { continue }\n\n    \t\tif (this.offset - i <= this.visibleDelta) {\n    \t\t\tthis.children[i].visible = true\n    \t\t\tnew TWEEN.Tween(this.children[i].material)\n    \t\t\t.to({ opacity: 1 / (this.offset - i) * 0.5 }, this.animationDuration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n    \t\t} else {\n    \t\t\tthis.children[i].visible = false\n    \t\t}\n\n    \t\tthis.children[i].outline && (this.children[i].outline.visible = false)\n    \t}\n\n    \t// Forward\n    \tfor (var i = this.offset + 1; i < this.children.length; i++) {\n    \t\tif (this.tileArray.indexOf(this.children[i]) === -1) { continue }\n\n    \t\tif (i - this.offset <= this.visibleDelta) {\n    \t\t\tthis.children[i].visible = true\n    \t\t\tnew TWEEN.Tween(this.children[i].material)\n    \t\t\t.to({ opacity: 1 / (i - this.offset) * 0.5 }, this.animationDuration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n    \t\t} else {\n    \t\t\tthis.children[i].visible = false\n    \t\t}\n\n    \t\tthis.children[i].outline && (this.children[i].outline.visible = false)\n    \t}\n  }\n\n  /**\n     * Scroll up\n     * @param  {number} duration - Scroll up duration\n     */\n  PANOLENS.TileGroup.prototype.scrollUp = function (duration) {\n    \tvar tiles = this.tileArray, offset\n\n    \tduration = duration !== undefined ? duration : this.animationDuration\n\n    \toffset = this.offset + 1\n\n    \tif (this.offset < tiles.length - 1 && tiles[ this.offset + 1 ].material.visible) {\n    \t\tfor (var i = tiles.length - 1; i >= 0; i--) {\n    \t\t\tnew TWEEN.Tween(tiles[i].position)\n    \t\t\t.to({ y: (i - offset) * -this.v_gap,\n    \t\t\t\t  z: Math.abs(i - offset) * -this.d_gap }, duration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n\t    \t}\n\n\t    \tthis.offset++\n\t    \tthis.updateVisbility()\n\t    \tthis.dispatchEvent({ type: 'scroll', direction: 'up' })\n    \t}\n  }\n\n  /**\n     * Scroll down\n     * @param  {number} duration - Scroll up duration\n     */\n  PANOLENS.TileGroup.prototype.scrollDown = function (duration) {\n    \tvar tiles = this.tileArray, offset\n\n    \tduration = duration !== undefined ? duration : this.animationDuration\n\n    \toffset = this.offset - 1\n\n    \tif (this.offset > 0 && tiles[ this.offset - 1 ].material.visible) {\n    \t\tfor (var i = 0; i < tiles.length; i++) {\n\t    \t\tnew TWEEN.Tween(tiles[i].position)\n    \t\t\t.to({ y: (i - offset) * -this.v_gap,\n    \t\t\t\t  z: Math.abs(i - offset) * -this.d_gap }, duration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n\t    \t}\n\n\t    \tthis.offset--\n\t    \tthis.updateVisbility()\n\t    \tthis.dispatchEvent({ type: 'scroll', direction: 'down' })\n    \t}\n  }\n\n  PANOLENS.TileGroup.prototype.reset = function () {\n    \tthis.tileArray.map(function (child, index) {\n    \t\tchild.position.copy(child.originalPosition)\n    \t})\n\n    \tthis.offset = 0\n    \tthis.updateVisbility()\n  }\n\n  /**\n     * Get current index\n     * @return {number} Index of the group. Range from 0 to this.tileArray.length\n     */\n  PANOLENS.TileGroup.prototype.getIndex = function () {\n    \treturn this.offset\n  }\n\n  /**\n     * Get visible tile counts\n     * @return {number} Number of visible tiles\n     */\n  PANOLENS.TileGroup.prototype.getTileCount = function () {\n    \tvar count = 0\n\n    \tthis.tileArray.map(function (tile) {\n    \t\tif (tile.material.visible) {\n    \t\t\tcount++\n    \t\t}\n    \t})\n\n    \treturn count\n  }\n})(); (function () {\n  'use strict'\n\n  var sharedFont, sharedTexture\n  var pendingQueue = []\n\n  /**\n\t * Sprite text based on {@link https://github.com/Jam3/three-bmfont-text}\n\t * @constructor\n\t * @param {string} text     - Text to be displayed\n\t * @param {number} maxWidth\t- Max width\n\t * @param {number} color    - Color in hexadecimal\n\t * @param {number} opacity  - Text opacity\n\t * @param {object} options  - Options to create text geometry\n\t */\n  PANOLENS.SpriteText = function (text, maxWidth, color, opacity, options) {\n    THREE.Object3D.call(this)\n\n    this.text = text || ''\n    this.maxWidth = maxWidth || 2000\n    this.color = color || 0xffffff\n    this.opacity = opacity !== undefined ? opacity : 1\n    this.options = options || {}\n\n    this.animationDuration = 500\n    this.animationFadeOut = undefined\n    this.animationFadeIn = undefined\n    this.tweens = {}\n\n    this.addText(text)\n  }\n\n  PANOLENS.SpriteText.prototype = Object.create(THREE.Object3D.prototype)\n\n  PANOLENS.SpriteText.prototype.constructor = PANOLENS.SpriteText\n\n  // Reference function will be overwritten by Bmfont.js\n  PANOLENS.SpriteText.prototype.generateTextGeometry = function () {}\n  PANOLENS.SpriteText.prototype.generateSDFShader = function () {}\n\n  /**\n\t * Set BMFont\n\t * @param {Function} callback - Callback after font is loaded\n\t * @param {object}   font     - The font to be loaded\n\t * @param {THREE.Texture}   texture  - Font texture\n\t */\n  PANOLENS.SpriteText.prototype.setBMFont = function (callback, font, texture) {\n    texture.needsUpdate = true\n\t  \ttexture.minFilter = THREE.LinearMipMapLinearFilter\n    texture.magFilter = THREE.LinearFilter\n    texture.generateMipmaps = true\n    texture.anisotropy = 8\n\n    sharedFont = font\n    sharedTexture = texture\n\n    for (var i = pendingQueue.length - 1; i >= 0; i--) {\n      pendingQueue[ i ].target.addText(pendingQueue[ i ].text)\n    }\n\n    while (pendingQueue.length > 0) {\n      pendingQueue.pop()\n    }\n\n    callback && callback()\n  }\n\n  /**\n\t * Add text mesh\n\t * @param {string} text - Text to be displayed\n\t */\n  PANOLENS.SpriteText.prototype.addText = function (text) {\n    if (!sharedFont || !sharedTexture) {\n      pendingQueue.push({ target: this, text: text })\n      return\n    }\n\n    var textAnchor = new THREE.Object3D()\n\n    this.options.text = text\n    this.options.font = sharedFont\n    this.options.width = this.maxWidth\n\n    var geometry = this.generateTextGeometry(this.options)\n    geometry.computeBoundingBox()\n    geometry.computeBoundingSphere()\n\n    var material = new THREE.RawShaderMaterial(this.generateSDFShader({\n\t\t    map: sharedTexture,\n\t\t    side: THREE.DoubleSide,\n\t\t    transparent: true,\n\t\t    color: this.color,\n\t\t    opacity: this.opacity\n    }))\n\n    var layout = geometry.layout\n    var textMesh = new THREE.Mesh(geometry, material)\n\n    textMesh.entity = this\n    textMesh.position.x = -layout.width / 2\n    textMesh.position.y = layout.height * 1.035\n\n    textAnchor.scale.x = textAnchor.scale.y = -0.05\n    textAnchor.add(textMesh)\n\n    this.mesh = textMesh\n    this.add(textAnchor)\n  }\n\n  /**\n\t * Update text geometry\n\t * @param  {object} options - Geometry options based on\n\t *  https://github.com/Jam3/three-bmfont-text#geometry--createtextopt\n\t */\n  PANOLENS.SpriteText.prototype.update = function (options) {\n    var mesh\n\n    options = options || {}\n\n    mesh = this.mesh\n\n    mesh.geometry.update(options)\n    mesh.position.x = -mesh.geometry.layout.width / 2\n    mesh.position.y = mesh.geometry.layout.height * 1.035\n  }\n\n  /**\n\t * Create a tween object for animation\n\t * based on - {@link https://github.com/tweenjs/tween.js}\n\t * @param  {string} name       - Name of the tween animation\n\t * @param  {object} object     - Object to be tweened\n\t * @param  {object} toState    - Final state of the object's properties\n\t * @param  {number} duration   - Tweening duration\n\t * @param  {TWEEN.Easing} easing     - Easing function\n\t * @param  {number} delay      - Animation delay time\n\t * @param  {Function} onStart    - On start function\n\t * @param  {Function} onUpdate   - On update function\n\t * @param  {Function} onComplete - On complete function\n\t * @return {TWEEN.Tween}         - Tween object\n\t */\n  PANOLENS.SpriteText.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this\n    toState = toState || {}\n    duration = duration || this.animationDuration\n    easing = easing || TWEEN.Easing.Exponential.Out\n    delay = delay !== undefined ? delay : 0\n    onStart = onStart || null\n    onUpdate = onUpdate || null\n    onComplete = onComplete || null\n\n    if (!this.tweens[name]) {\n      this.tweens[name] = new TWEEN.Tween(object)\n        .to(toState, duration)\n\t        \t.easing(easing)\n\t        \t.delay(delay)\n\t        \t.onStart(onStart)\n\t        \t.onUpdate(onUpdate)\n\t        \t.onComplete(onComplete)\n    }\n\n    return this.tweens[name]\n  }\n\n  /**\n\t * Get geometry layout\n\t * @return {object} Text geometry layout\n\t */\n  PANOLENS.SpriteText.prototype.getLayout = function () {\n    return this.mesh && this.mesh.geometry && this.mesh.geometry.layout || {}\n  }\n\n  /**\n\t * Set entity if multiple objects are considered as one entity\n\t * @param {object} entity - Entity represents whole group structure\n\t */\n  PANOLENS.SpriteText.prototype.setEntity = function (entity) {\n    this.entity = entity\n  }\n})(); (function () {\n  /**\n\t * Widget for controls\n\t * @constructor\n\t * @param {HTMLElement} container - A domElement where default control widget will be attached to\n\t */\n  PANOLENS.Widget = function (container) {\n    THREE.EventDispatcher.call(this)\n\n    this.DEFAULT_TRANSITION = 'all 0.27s ease'\n    this.TOUCH_ENABLED = PANOLENS.Utils.checkTouchSupported()\n    this.PREVENT_EVENT_HANDLER = function (event) {\n      event.preventDefault()\n      event.stopPropagation()\n    }\n\n    this.container = container\n\n    this.barElement\n    this.fullscreenElement\n    this.videoElement\n    this.settingElement\n\n    this.mainMenu\n\n    this.activeMainItem\n    this.activeSubMenu\n    this.mask\n  }\n\n  PANOLENS.Widget.prototype = Object.create(THREE.EventDispatcher.prototype)\n\n  PANOLENS.Widget.prototype.constructor = PANOLENS.Widget\n\n  /**\n\t * Add control bar\n\t */\n  PANOLENS.Widget.prototype.addControlBar = function () {\n    if (!this.container) {\n      console.warn('Widget container not set')\n      return\n    }\n\n    var scope = this, bar, styleTranslate, styleOpacity, gradientStyle\n\n    gradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))'\n\n    bar = document.createElement('div')\n    bar.style.width = '100%'\n    bar.style.height = '44px'\n    bar.style.float = 'left'\n    bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)'\n    bar.style.background = '-webkit-' + gradientStyle\n    bar.style.background = '-moz-' + gradientStyle\n    bar.style.background = '-o-' + gradientStyle\n    bar.style.background = '-ms-' + gradientStyle\n    bar.style.background = gradientStyle\n    bar.style.transition = this.DEFAULT_TRANSITION\n    bar.style.pointerEvents = 'none'\n    bar.isHidden = false\n    bar.toggle = function () {\n      bar.isHidden = !bar.isHidden\n      styleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)'\n      styleOpacity = bar.isHidden ? 0 : 1\n      bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate\n      bar.style.opacity = styleOpacity\n    }\n\n    // Menu\n    var menu = this.createDefaultMenu()\n    this.mainMenu = this.createMainMenu(menu)\n    bar.appendChild(this.mainMenu)\n\n    // Mask\n    var mask = this.createMask()\n    this.mask = mask\n    this.container.appendChild(mask)\n\n    // Dispose\n    bar.dispose = function () {\n      if (scope.fullscreenElement) {\n        bar.removeChild(scope.fullscreenElement)\n        scope.fullscreenElement.dispose()\n        scope.fullscreenElement = null\n      }\n\n      if (scope.settingElement) {\n        bar.removeChild(scope.settingElement)\n        scope.settingElement.dispose()\n        scope.settingElement = null\n      }\n\n      if (scope.videoElement) {\n        bar.removeChild(scope.videoElement)\n        scope.videoElement.dispose()\n        scope.videoElement = null\n      }\n    }\n\n    this.container.appendChild(bar)\n\n    // Mask events\n    this.mask.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true)\n    this.mask.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true)\n    this.mask.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true)\n    this.mask.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', function (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      scope.mask.hide()\n      scope.settingElement.deactivate()\n    }, false)\n\n    // Event listener\n    this.addEventListener('control-bar-toggle', bar.toggle)\n\n    this.barElement = bar\n  }\n\n  /**\n\t * Create default menu\n\t */\n  PANOLENS.Widget.prototype.createDefaultMenu = function () {\n    var scope = this, handler\n\n    handler = function (method, data) {\n      return function () {\n        scope.dispatchEvent({\n\n          type: 'panolens-viewer-handler',\n          method: method,\n          data: data\n\n        })\n      }\n    }\n\n    return [\n\n      {\n        title: 'Control',\n        subMenu: [\n          {\n            title: this.TOUCH_ENABLED ? 'Touch' : 'Mouse',\n            handler: handler('enableControl', PANOLENS.Controls.ORBIT)\n          },\n          {\n            title: 'Sensor',\n            handler: handler('enableControl', PANOLENS.Controls.DEVICEORIENTATION)\n          }\n        ]\n      },\n\n      {\n        title: 'Mode',\n        subMenu: [\n          {\n            title: 'Normal',\n            handler: handler('disableEffect')\n          },\n          {\n            title: 'Cardboard',\n            handler: handler('enableEffect', PANOLENS.Modes.CARDBOARD)\n          },\n          {\n            title: 'Stereoscopic',\n            handler: handler('enableEffect', PANOLENS.Modes.STEREO)\n          }\n        ]\n      }\n\n    ]\n  }\n\n  /**\n\t * Add buttons on top of control bar\n\t * @param {string} name - The control button name to be created\n\t */\n  PANOLENS.Widget.prototype.addControlButton = function (name) {\n    var element\n\n    switch (name) {\n      case 'fullscreen':\n\n        element = this.createFullscreenButton()\n        this.fullscreenElement = element\n\n        break\n\n      case 'setting':\n\n        element = this.createSettingButton()\n        this.settingElement = element\n\n        break\n\n      case 'video':\n\n        element = this.createVideoControl()\n        this.videoElement = element\n\n        break\n\n      default:\n\n        return\n    }\n\n    if (!element) {\n      return\n    }\n\n    this.barElement.appendChild(element)\n  }\n\n  PANOLENS.Widget.prototype.createMask = function () {\n    var element = document.createElement('div')\n    element.style.position = 'absolute'\n    element.style.top = 0\n    element.style.left = 0\n    element.style.width = '100%'\n    element.style.height = '100%'\n    element.style.background = 'transparent'\n    element.style.display = 'none'\n\n    element.show = function () {\n      this.style.display = 'block'\n    }\n\n    element.hide = function () {\n      this.style.display = 'none'\n    }\n\n    return element\n  }\n\n  /**\n\t * Create Setting button to toggle menu\n\t */\n  PANOLENS.Widget.prototype.createSettingButton = function () {\n    var scope = this, item\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      scope.mainMenu.toggle()\n\n      if (this.activated) {\n        this.deactivate()\n      } else {\n        this.activate()\n      }\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.Setting + '\")',\n        webkitTransition: this.DEFAULT_TRANSITION,\n        transition: this.DEFAULT_TRANSITION\n\n      },\n\n      onTap: onTap\n\n    })\n\n    item.activate = function () {\n      this.style.transform = 'rotate3d(0,0,1,90deg)'\n      this.activated = true\n      scope.mask.show()\n    }\n\n    item.deactivate = function () {\n      this.style.transform = 'rotate3d(0,0,0,0)'\n      this.activated = false\n      scope.mask.hide()\n\n      if (scope.mainMenu && scope.mainMenu.visible) {\n        scope.mainMenu.hide()\n      }\n\n      if (scope.activeSubMenu && scope.activeSubMenu.visible) {\n        scope.activeSubMenu.hide()\n      }\n\n      if (scope.mainMenu && scope.mainMenu._width) {\n        scope.mainMenu.changeSize(scope.mainMenu._width)\n        scope.mainMenu.unslideAll()\n      }\n    }\n\n    item.activated = false\n\n    return item\n  }\n\n  /**\n\t * Create Fullscreen button\n\t * @return {HTMLSpanElement} - The dom element icon for fullscreen\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n  PANOLENS.Widget.prototype.createFullscreenButton = function () {\n    var scope = this, item, isFullscreen = false, tapSkipped = true, stylesheetId\n\n    stylesheetId = 'panolens-style-addon'\n\n    // Don't create button if no support\n    if (!document.fullscreenEnabled &&\n\t\t\t !document.webkitFullscreenEnabled &&\n\t\t\t !document.mozFullScreenEnabled &&\n\t\t\t !document.msFullscreenEnabled) {\n      return\n    }\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      tapSkipped = false\n\n      if (!isFullscreen) {\n\t\t\t    scope.container.requestFullscreen && scope.container.requestFullscreen()\n\t\t\t    scope.container.msRequestFullscreen && scope.container.msRequestFullscreen()\n\t\t\t    scope.container.mozRequestFullScreen && scope.container.mozRequestFullScreen()\n\t\t\t    scope.container.webkitRequestFullscreen && scope.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)\n        isFullscreen = true\n      } else {\n\t\t\t    document.exitFullscreen && document.exitFullscreen()\n\t\t\t    document.msExitFullscreen && document.msExitFullscreen()\n\t\t\t    document.mozCancelFullScreen && document.mozCancelFullScreen()\n\t\t\t    document.webkitExitFullscreen && document.webkitExitFullscreen()\n        isFullscreen = false\n      }\n\n      this.style.backgroundImage = (isFullscreen)\n        ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")'\n        : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n    }\n\n    function onFullScreenChange (e) {\n      if (tapSkipped) {\n        isFullscreen = !isFullscreen\n\n        item.style.backgroundImage = (isFullscreen)\n          ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")'\n          : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n      }\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'onWindowResize' function call on PANOLENS.Viewer\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onWindowResize', data: false })\n\n      tapSkipped = true\n    }\n\n    document.addEventListener('fullscreenchange', onFullScreenChange, false)\n    document.addEventListener('webkitfullscreenchange', onFullScreenChange, false)\n    document.addEventListener('mozfullscreenchange', onFullScreenChange, false)\n    document.addEventListener('MSFullscreenChange', onFullScreenChange, false)\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n\n      },\n\n      onTap: onTap\n\n    })\n\n    // Add fullscreen stlye if not exists\n    if (!document.querySelector(stylesheetId)) {\n      var sheet = document.createElement('style')\n      sheet.id = stylesheetId\n      sheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }'\n      document.body.appendChild(sheet)\n    }\n\n    return item\n  }\n\n  /**\n\t * Create video control container\n\t * @return {HTMLSpanElement} - The dom element icon for video control\n\t */\n  PANOLENS.Widget.prototype.createVideoControl = function () {\n    var item\n\n    item = document.createElement('span')\n    item.style.display = 'none'\n    item.show = function () {\n      item.style.display = ''\n    }\n\n    item.hide = function () {\n      item.style.display = 'none'\n      item.controlButton.paused = true\n      item.controlButton.update()\n    }\n\n    item.controlButton = this.createVideoControlButton()\n    item.seekBar = this.createVideoControlSeekbar()\n\n    item.appendChild(item.controlButton)\n    item.appendChild(item.seekBar)\n\n    item.dispose = function () {\n      item.removeChild(item.controlButton)\n      item.removeChild(item.seekBar)\n\n      item.controlButton.dispose()\n      item.controlButton = null\n\n      item.seekBar.dispose()\n      item.seekBar = null\n    }\n\n    this.addEventListener('video-control-show', item.show)\n    this.addEventListener('video-control-hide', item.hide)\n\n    return item\n  }\n\n  /**\n\t * Create video control button\n\t * @return {HTMLSpanElement} - The dom element icon for video control\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n  PANOLENS.Widget.prototype.createVideoControlButton = function () {\n    var scope = this, item\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'toggleVideoPlay' function call on PANOLENS.Viewer\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused })\n\n      this.paused = !this.paused\n\n      item.update()\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.VideoPlay + '\")'\n\n      },\n\n      onTap: onTap\n\n    })\n\n    item.paused = true\n\n    item.update = function (paused) {\n      this.paused = paused !== undefined ? paused : this.paused\n\n      this.style.backgroundImage = 'url(\"' + (this.paused\n        ? PANOLENS.DataImage.VideoPlay\n        : PANOLENS.DataImage.VideoPause) + '\")'\n    }\n\n    return item\n  }\n\n  /**\n\t * Create video seekbar\n\t * @return {HTMLSpanElement} - The dom element icon for video seekbar\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n  PANOLENS.Widget.prototype.createVideoControlSeekbar = function () {\n    var scope = this, item, progressElement, progressElementControl,\n      isDragging = false, mouseX, percentageNow, percentageNext\n\n    progressElement = document.createElement('div')\n    progressElement.style.width = '0%'\n    progressElement.style.height = '100%'\n    progressElement.style.backgroundColor = '#fff'\n\n    progressElementControl = document.createElement('div')\n    progressElementControl.style.float = 'right'\n    progressElementControl.style.width = '14px'\n    progressElementControl.style.height = '14px'\n    progressElementControl.style.transform = 'translate(7px, -5px)'\n    progressElementControl.style.borderRadius = '50%'\n    progressElementControl.style.backgroundColor = '#ddd'\n\n    progressElementControl.addEventListener('mousedown', onMouseDown, false)\n    progressElementControl.addEventListener('touchstart', onMouseDown, false)\n\n    function onMouseDown (event) {\n      event.stopPropagation()\n\n      isDragging = true\n\n      mouseX = event.clientX || (event.changedTouches && event.changedTouches[0].clientX)\n\n      percentageNow = parseInt(progressElement.style.width) / 100\n\n      addControlListeners()\n    }\n\n    function onVideoControlDrag (event) {\n      var clientX\n\n      if (isDragging) {\n        clientX = event.clientX || (event.changedTouches && event.changedTouches[0].clientX)\n\n        percentageNext = (clientX - mouseX) / item.clientWidth\n\n        percentageNext = percentageNow + percentageNext\n\n        percentageNext = percentageNext > 1 ? 1 : ((percentageNext < 0) ? 0 : percentageNext)\n\n        item.setProgress(percentageNext)\n\n        /**\n\t\t\t\t * Viewer handler event\n\t\t\t\t * @type {object}\n\t\t\t\t * @property {string} method - 'setVideoCurrentTime' function call on PANOLENS.Viewer\n\t\t\t\t * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t\t\t\t */\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext })\n      }\n    }\n\n    function onVideoControlStop (event) {\n      event.stopPropagation()\n\n      isDragging = false\n\n      removeControlListeners()\n    }\n\n    function addControlListeners () {\n      scope.container.addEventListener('mousemove', onVideoControlDrag, false)\n      scope.container.addEventListener('mouseup', onVideoControlStop, false)\n      scope.container.addEventListener('touchmove', onVideoControlDrag, false)\n      scope.container.addEventListener('touchend', onVideoControlStop, false)\n    }\n\n    function removeControlListeners () {\n      scope.container.removeEventListener('mousemove', onVideoControlDrag, false)\n      scope.container.removeEventListener('mouseup', onVideoControlStop, false)\n      scope.container.removeEventListener('touchmove', onVideoControlDrag, false)\n      scope.container.removeEventListener('touchend', onVideoControlStop, false)\n    }\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      var percentage\n\n      if (event.target === progressElementControl) { return }\n\n      percentage = (event.changedTouches && event.changedTouches.length > 0)\n        ? (event.changedTouches[0].pageX - event.target.getBoundingClientRect().left) / this.clientWidth\n        : event.offsetX / this.clientWidth\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'setVideoCurrentTime' function call on PANOLENS.Viewer\n\t\t\t * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage })\n\n      item.setProgress(event.offsetX / this.clientWidth)\n    }\n\n    function onDispose () {\n      removeControlListeners()\n      progressElement = null\n      progressElementControl = null\n    }\n\n    progressElement.appendChild(progressElementControl)\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        width: '30%',\n        height: '4px',\n        marginTop: '20px',\n        backgroundColor: 'rgba(188,188,188,0.8)'\n\n      },\n\n      onTap: onTap,\n      onDispose: onDispose\n\n    })\n\n    item.appendChild(progressElement)\n\n    item.setProgress = function (percentage) {\n      progressElement.style.width = percentage * 100 + '%'\n    }\n\n    this.addEventListener('video-update', function (event) {\n      item.setProgress(event.percentage)\n    })\n\n    return item\n  }\n\n  /**\n\t * Create menu item\n\t * @param  {string} title - Title to display\n\t * @return {HTMLDomElement} - An anchor tag element\n\t */\n  PANOLENS.Widget.prototype.createMenuItem = function (title) {\n    var scope = this, item = document.createElement('a')\n    item.textContent = title\n    item.style.display = 'block'\n    item.style.padding = '10px'\n    item.style.textDecoration = 'none'\n    item.style.cursor = 'pointer'\n    item.style.pointerEvents = 'auto'\n    item.style.transition = this.DEFAULT_TRANSITION\n\n    item.slide = function (right) {\n      this.style.transform = 'translateX(' + (right ? '' : '-') + '100%)'\n    }\n\n    item.unslide = function () {\n      this.style.transform = 'translateX(0)'\n    }\n\n    item.setIcon = function (url) {\n      if (this.icon) {\n        this.icon.style.backgroundImage = 'url(' + url + ')'\n      }\n    }\n\n    item.setSelectionTitle = function (title) {\n      if (this.selection) {\n        this.selection.textContent = title\n      }\n    }\n\n    item.addSelection = function (name) {\n      var selection = document.createElement('span')\n      selection.style.fontSize = '13px'\n      selection.style.fontWeight = '300'\n      selection.style.float = 'right'\n\n      this.selection = selection\n      this.setSelectionTitle(name)\n      this.appendChild(selection)\n\n      return this\n    }\n\n    item.addIcon = function (url, left, flip) {\n      url = url || PANOLENS.DataImage.ChevronRight\n      left = left || false\n      flip = flip || false\n\n      var element = document.createElement('span')\n      element.style.float = left ? 'left' : 'right'\n      element.style.width = '17px'\n      element.style.height = '17px'\n      element.style[ 'margin' + (left ? 'Right' : 'Left') ] = '12px'\n      element.style.backgroundSize = 'cover'\n\n      if (flip) {\n        element.style.transform = 'rotateZ(180deg)'\n      }\n\n      this.icon = element\n      this.setIcon(url)\n      this.appendChild(element)\n\n      return this\n    }\n\n    item.addSubMenu = function (title, items) {\n      this.subMenu = scope.createSubMenu(title, items)\n\n      return this\n    }\n\n    item.addEventListener('mouseenter', function () {\n      this.style.backgroundColor = '#e0e0e0'\n    }, false)\n\n    item.addEventListener('mouseleave', function () {\n      this.style.backgroundColor = '#fafafa'\n    }, false)\n\n    return item\n  }\n\n  /**\n\t * Create menu item header\n\t * @param  {string} title - Title to display\n\t * @return {HTMLDomElement} - An anchor tag element\n\t */\n  PANOLENS.Widget.prototype.createMenuItemHeader = function (title) {\n    var header = this.createMenuItem(title)\n\n    header.style.borderBottom = '1px solid #333'\n    header.style.paddingBottom = '15px'\n\n    return header\n  }\n\n  /**\n\t * Create main menu\n\t * @param  {array} menus - Menu array list\n\t * @return {HTMLDomElement} - A span element\n\t */\n  PANOLENS.Widget.prototype.createMainMenu = function (menus) {\n    var scope = this, menu = this.createMenu(), subMenu\n\n    menu._width = 200\n    menu.changeSize(menu._width)\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      var mainMenu = scope.mainMenu, subMenu = this.subMenu\n\n      function onNextTick () {\n        mainMenu.changeSize(subMenu.clientWidth)\n        subMenu.show()\n        subMenu.unslideAll()\n      }\n\n      mainMenu.hide()\n      mainMenu.slideAll()\n      mainMenu.parentElement.appendChild(subMenu)\n\n      scope.activeMainItem = this\n      scope.activeSubMenu = subMenu\n\n      window.requestAnimationFrame(onNextTick)\n    }\n\n    for (var i = 0; i < menus.length; i++) {\n      var item = menu.addItem(menus[ i ].title)\n\n      item.style.paddingLeft = '20px'\n\n      item.addIcon()\n        .addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false)\n\n      if (menus[ i ].subMenu && menus[ i ].subMenu.length > 0) {\n        var title = menus[ i ].subMenu[ 0 ].title\n\n        item.addSelection(title)\n          .addSubMenu(menus[ i ].title, menus[ i ].subMenu)\n      }\n    }\n\n    return menu\n  }\n\n  /**\n\t * Create sub menu\n\t * @param {string} title - Sub menu title\n\t * @param {array} items - Item array list\n\t * @return {HTMLDomElement} - A span element\n\t */\n  PANOLENS.Widget.prototype.createSubMenu = function (title, items) {\n    var scope = this, menu, subMenu = this.createMenu()\n\n    subMenu.items = items\n    subMenu.activeItem\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      menu = scope.mainMenu\n      menu.changeSize(menu._width)\n      menu.unslideAll()\n      menu.show()\n      subMenu.slideAll(true)\n      subMenu.hide()\n\n      if (this.type !== 'header') {\n        subMenu.setActiveItem(this)\n        scope.activeMainItem.setSelectionTitle(this.textContent)\n\n        this.handler && this.handler()\n      }\n    }\n\n    subMenu.addHeader(title).addIcon(undefined, true, true).addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false)\n\n    for (var i = 0; i < items.length; i++) {\n      var item = subMenu.addItem(items[ i ].title)\n\n      item.style.fontWeight = 300\n      item.handler = items[ i ].handler\n      item.addIcon(' ', true)\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false)\n\n      if (!subMenu.activeItem) {\n        subMenu.setActiveItem(item)\n      }\n    }\n\n    subMenu.slideAll(true)\n\n    return subMenu\n  }\n\n  /**\n\t * Create general menu\n\t * @return {HTMLDomElement} - A span element\n\t */\n  PANOLENS.Widget.prototype.createMenu = function () {\n    var scope = this, menu = document.createElement('span'), style\n\n    style = menu.style\n\n    style.padding = '5px 0'\n    style.position = 'fixed'\n    style.bottom = '100%'\n    style.right = '14px'\n    style.backgroundColor = '#fafafa'\n    style.fontFamily = 'Helvetica Neue'\n    style.fontSize = '14px'\n    style.visibility = 'hidden'\n    style.opacity = 0\n    style.boxShadow = '0 0 12pt rgba(0,0,0,0.25)'\n  \t\tstyle.borderRadius = '2px'\n    style.overflow = 'hidden'\n    style.willChange = 'width, height, opacity'\n    style.pointerEvents = 'auto'\n    style.transition = this.DEFAULT_TRANSITION\n\n    menu.visible = false\n\n    menu.changeSize = function (width, height) {\n      if (width) {\n        this.style.width = width + 'px'\n      }\n\n      if (height) {\n        this.style.height = height + 'px'\n      }\n    }\n\n    menu.show = function () {\n      this.style.opacity = 1\n      this.style.visibility = 'visible'\n      this.visible = true\n    }\n\n    menu.hide = function () {\n      this.style.opacity = 0\n      this.style.visibility = 'hidden'\n      this.visible = false\n    }\n\n    menu.toggle = function () {\n      if (this.visible) {\n        this.hide()\n      } else {\n        this.show()\n      }\n    }\n\n    menu.slideAll = function (right) {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[ i ].slide) {\n          menu.children[ i ].slide(right)\n        }\n      }\n    }\n\n    menu.unslideAll = function () {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[ i ].unslide) {\n          menu.children[ i ].unslide()\n        }\n      }\n    }\n\n    menu.addHeader = function (title) {\n      var header = scope.createMenuItemHeader(title)\n      header.type = 'header'\n\n      this.appendChild(header)\n\n      return header\n    }\n\n    menu.addItem = function (title) {\n      var item = scope.createMenuItem(title)\n      item.type = 'item'\n\n      this.appendChild(item)\n\n      return item\n    }\n\n    menu.setActiveItem = function (item) {\n      if (this.activeItem) {\n        this.activeItem.setIcon(' ')\n      }\n\n      item.setIcon(PANOLENS.DataImage.Check)\n\n      this.activeItem = item\n    }\n\n    menu.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true)\n    menu.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true)\n    menu.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true)\n\n    return menu\n  }\n\n  /**\n\t * Create custom item element\n\t * @return {HTMLSpanElement} - The dom element icon\n\t */\n  PANOLENS.Widget.prototype.createCustomItem = function (options) {\n    options = options || {}\n\n    var scope = this,\n      item = options.element || document.createElement('span')\n\n    item.style.cursor = 'pointer'\n    item.style.float = 'right'\n    item.style.width = '44px'\n    item.style.height = '100%'\n    item.style.backgroundSize = '60%'\n    item.style.backgroundRepeat = 'no-repeat'\n    item.style.backgroundPosition = 'center'\n    item.style.webkitUserSelect =\n\t\titem.style.MozUserSelect =\n\t\titem.style.userSelect = 'none'\n    item.style.position = 'relative'\n    item.style.pointerEvents = 'auto'\n\n    // White glow on icon\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function () {\n      item.style.filter =\n\t\t\titem.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))'\n    })\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function () {\n      item.style.filter =\n\t\t\titem.style.webkitFilter = ''\n    })\n\n    item = this.mergeStyleOptions(item, options.style)\n\n    if (options.onTap) {\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false)\n    }\n\n    item.dispose = function () {\n      item.removeEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false)\n\n      options.onDispose && options.onDispose()\n    }\n\n    return item\n  }\n\n  /**\n\t * Merge item css style\n\t * @param  {HTMLDOMElement} element - The element to be merged with style\n\t * @param  {object} options - The style options\n\t * @return {HTMLDOMElement} - The same element with merged styles\n\t */\n  PANOLENS.Widget.prototype.mergeStyleOptions = function (element, options) {\n    options = options || {}\n\n    for (var property in options) {\n      if (options.hasOwnProperty(property)) {\n        element.style[ property ] = options[ property ]\n      }\n    }\n\n    return element\n  }\n\n  /**\n\t * Dispose widgets by detaching dom elements from container\n\t */\n  PANOLENS.Widget.prototype.dispose = function () {\n    if (this.barElement) {\n      this.container.removeChild(this.barElement)\n      this.barElement.dispose()\n      this.barElement = null\n    }\n  }\n})(); (function () {\n  /**\n\t * Information spot attached to panorama\n\t * @constructor\n\t * @param {number} [scale=300] - Infospot scale\n\t * @param {imageSrc} [imageSrc=PANOLENS.DataImage.Info] - Image overlay info\n\t * @param {boolean} [animated=true] - Enable default hover animation\n\t */\n  PANOLENS.Infospot = function (scale, imageSrc, animated) {\n    var scope = this, ratio, startScale, endScale, duration\n\n    scale = scale || 300\n    imageSrc = imageSrc || PANOLENS.DataImage.Info\n    duration = 500\n\n    THREE.Sprite.call(this)\n\n    this.type = 'infospot'\n\n    this.animated = animated !== undefined ? animated : true\n    this.isHovering = false\n    this.visible = false\n\n    this.element\n    this.toPanorama\n    this.cursorStyle\n\n    this.mode = PANOLENS.Modes.UNKNOWN\n\n    this.scale.set(scale, scale, 1)\n    this.rotation.y = Math.PI\n    this.scaleFactor = 1.3\n\n    this.container\n\n    // Event Handler\n    this.HANDLER_FOCUS\n\n    PANOLENS.Utils.TextureLoader.load(imageSrc, postLoad)\n\n    function postLoad (texture) {\n      texture.wrapS = THREE.RepeatWrapping\n      texture.repeat.x = -1\n\n      texture.image.width = texture.image.naturalWidth || 64\n      texture.image.height = texture.image.naturalHeight || 64\n\n      ratio = texture.image.width / texture.image.height\n      scope.scale.set(ratio * scale, scale, 1)\n\n      startScale = scope.scale.clone()\n\n      scope.scaleUpAnimation = new TWEEN.Tween(scope.scale)\n        .to({ x: startScale.x * scope.scaleFactor, y: startScale.y * scope.scaleFactor }, duration)\n        .easing(TWEEN.Easing.Elastic.Out)\n\n      scope.scaleDownAnimation = new TWEEN.Tween(scope.scale)\n        .to({ x: startScale.x, y: startScale.y }, duration)\n        .easing(TWEEN.Easing.Elastic.Out)\n\n      scope.material.side = THREE.DoubleSide\n      scope.material.map = texture\n      scope.material.depthTest = false\n      scope.material.needsUpdate = true\n    }\n\n    function show () {\n      this.visible = true\n    }\n\n    function hide () {\n      this.visible = false\n    }\n\n    // Add show and hide animations\n    this.showAnimation = new TWEEN.Tween(this.material)\n      .to({ opacity: 1 }, duration)\n      .onStart(show.bind(this))\n      .easing(TWEEN.Easing.Quartic.Out)\n\n    this.hideAnimation = new TWEEN.Tween(this.material)\n      .to({ opacity: 0 }, duration)\n      .onComplete(hide.bind(this))\n      .easing(TWEEN.Easing.Quartic.Out)\n\n    // Attach event listeners\n    this.addEventListener('click', this.onClick)\n    this.addEventListener('hover', this.onHover)\n    this.addEventListener('hoverenter', this.onHoverStart)\n    this.addEventListener('hoverleave', this.onHoverEnd)\n    this.addEventListener('panolens-dual-eye-effect', this.onDualEyeEffect)\n    this.addEventListener('panolens-container', this.setContainer.bind(this))\n    this.addEventListener('dismiss', this.onDismiss)\n    this.addEventListener('panolens-infospot-focus', this.setFocusMethod)\n  }\n\n  PANOLENS.Infospot.prototype = Object.create(THREE.Sprite.prototype)\n\n  /**\n\t * Set infospot container\n\t * @param {HTMLElement|object} data - Data with container information\n\t */\n  PANOLENS.Infospot.prototype.setContainer = function (data) {\n    var container\n\n    if (data instanceof HTMLElement) {\n      container = data\n    } else if (data && data.container) {\n      container = data.container\n    }\n\n    // Append element if exists\n    if (container && this.element) {\n      container.appendChild(this.element)\n    }\n\n    this.container = container\n  }\n\n  /**\n\t * Get container\n\t * @return {HTMLElement} - The container of this infospot\n\t */\n  PANOLENS.Infospot.prototype.getContainer = function () {\n    return this.container\n  }\n\n  /**\n\t * This will be called by a click event\n\t * Translate and lock the hovering element if any\n\t * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t */\n  PANOLENS.Infospot.prototype.onClick = function (event) {\n    if (this.element && this.getContainer()) {\n      this.onHoverStart(event)\n\n      // Lock element\n      this.lockHoverElement()\n    }\n  }\n\n  /**\n\t * Dismiss current element if any\n\t * @param  {object} event - Dismiss event\n\t */\n  PANOLENS.Infospot.prototype.onDismiss = function (event) {\n    if (this.element) {\n      this.unlockHoverElement()\n      this.onHoverEnd()\n    }\n  }\n\n  /**\n\t * This will be called by a mouse hover event\n\t * Translate the hovering element if any\n\t * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t */\n  PANOLENS.Infospot.prototype.onHover = function (event) {\n\n  }\n\n  /**\n\t * This will be called on a mouse hover start\n\t * Sets cursor style to 'pointer', display the element and scale up the infospot\n\t */\n  PANOLENS.Infospot.prototype.onHoverStart = function (event) {\n    if (!this.getContainer()) { return }\n\n    var cursorStyle = this.cursorStyle || (this.mode === PANOLENS.Modes.NORMAL ? 'pointer' : 'default')\n\n    this.isHovering = true\n    this.container.style.cursor = cursorStyle\n\n    if (this.animated) {\n      this.scaleDownAnimation && this.scaleDownAnimation.stop()\n      this.scaleUpAnimation && this.scaleUpAnimation.start()\n    }\n\n    if (this.element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0) {\n      if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n        this.element.style.display = 'none'\n        this.element.left && (this.element.left.style.display = 'block')\n        this.element.right && (this.element.right.style.display = 'block')\n\n        // Store element width for reference\n        this.element._width = this.element.left.clientWidth\n        this.element._height = this.element.left.clientHeight\n      } else {\n        this.element.style.display = 'block'\n        this.element.left && (this.element.left.style.display = 'none')\n        this.element.right && (this.element.right.style.display = 'none')\n\n        // Store element width for reference\n        this.element._width = this.element.clientWidth\n        this.element._height = this.element.clientHeight\n      }\n    }\n  }\n\n  /**\n\t * This will be called on a mouse hover end\n\t * Sets cursor style to 'default', hide the element and scale down the infospot\n\t */\n  PANOLENS.Infospot.prototype.onHoverEnd = function () {\n    if (!this.getContainer()) { return }\n\n    this.isHovering = false\n    this.container.style.cursor = 'default'\n\n    if (this.animated) {\n      this.scaleUpAnimation && this.scaleUpAnimation.stop()\n      this.scaleDownAnimation && this.scaleDownAnimation.start()\n    }\n\n    if (this.element && !this.element.locked) {\n      this.element.style.display = 'none'\n      this.element.left && (this.element.left.style.display = 'none')\n      this.element.right && (this.element.right.style.display = 'none')\n\n      this.unlockHoverElement()\n    }\n  }\n\n  /**\n\t * On dual eye effect handler\n\t * Creates duplicate left and right element\n\t * @param  {object} event - panolens-dual-eye-effect event\n\t */\n  PANOLENS.Infospot.prototype.onDualEyeEffect = function (event) {\n    if (!this.getContainer()) { return }\n\n    var element, halfWidth, halfHeight\n\n    this.mode = event.mode\n\n    element = this.element\n\n    halfWidth = this.container.clientWidth / 2\n    halfHeight = this.container.clientHeight / 2\n\n    if (!element) {\n      return\n    }\n\n    if (!element.left || !element.right) {\n      element.left = element.cloneNode(true)\n      element.right = element.cloneNode(true)\n    }\n\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      element.left.style.display = element.style.display\n      element.right.style.display = element.style.display\n      element.style.display = 'none'\n    } else {\n      element.style.display = element.left.style.display\n      element.left.style.display = 'none'\n      element.right.style.display = 'none'\n    }\n\n    // Update elements translation\n    this.translateElement(halfWidth, halfHeight)\n\n    this.container.appendChild(element.left)\n    this.container.appendChild(element.right)\n  }\n\n  /**\n\t * Translate the hovering element by css transform\n\t * @param  {number} x - X position on the window screen\n\t * @param  {number} y - Y position on the window screen\n\t */\n  PANOLENS.Infospot.prototype.translateElement = function (x, y) {\n    if (!this.element._width || !this.element._height || !this.getContainer()) {\n      return\n    }\n\n    var left, top, element, width, height, delta, container\n\n    container = this.container\n    element = this.element\n    width = element._width / 2\n    height = element._height / 2\n    delta = element.verticalDelta !== undefined ? element.verticalDelta : 40\n\n    left = x - width\n    top = y - height - delta\n\n    if ((this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) &&\n\t\t\t\telement.left && element.right &&\n\t\t\t\t!(x === container.clientWidth / 2 && y === container.clientHeight / 2)) {\n      left = container.clientWidth / 4 - width + (x - container.clientWidth / 2)\n      top = container.clientHeight / 2 - height - delta + (y - container.clientHeight / 2)\n\n      this.setElementStyle('transform', element.left, 'translate(' + left + 'px, ' + top + 'px)')\n\n      left += container.clientWidth / 2\n\n      this.setElementStyle('transform', element.right, 'translate(' + left + 'px, ' + top + 'px)')\n    } else {\n      this.setElementStyle('transform', element, 'translate(' + left + 'px, ' + top + 'px)')\n    }\n  }\n\n  /**\n\t * Set vendor specific css\n\t * @param {string} type - CSS style name\n\t * @param {HTMLElement} element - The element to be modified\n\t * @param {string} value - Style value\n\t */\n  PANOLENS.Infospot.prototype.setElementStyle = function (type, element, value) {\n    var style = element.style\n\n    if (type === 'transform') {\n      style.webkitTransform = style.msTransform = style.transform = value\n    }\n  }\n\n  /**\n\t * Set hovering text content\n\t * @param {string} text - Text to be displayed\n\t */\n  PANOLENS.Infospot.prototype.setText = function (text) {\n    if (this.element) {\n      this.element.textContent = text\n    }\n  }\n\n  /**\n\t * Set cursor css style on hover\n\t */\n  PANOLENS.Infospot.prototype.setCursorHoverStyle = function (style) {\n    this.cursorStyle = style\n  }\n\n  /**\n\t * Add hovering text element\n\t * @param {string} text - Text to be displayed\n\t * @param {number} [delta=40] - Vertical delta to the infospot\n\t */\n  PANOLENS.Infospot.prototype.addHoverText = function (text, delta) {\n    if (!this.element) {\n      this.element = document.createElement('div')\n      this.element.style.display = 'none'\n      this.element.style.color = '#fff'\n      this.element.style.top = 0\n      this.element.style.maxWidth = '50%'\n      this.element.style.maxHeight = '50%'\n      this.element.style.textShadow = '0 0 3px #000000'\n      this.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif'\n      this.element.style.position = 'absolute'\n      this.element.classList.add('panolens-infospot')\n      this.element.verticalDelta = delta !== undefined ? delta : 40\n    }\n\n    this.setText(text)\n  }\n\n  /**\n\t * Add hovering element by cloning an element\n\t * @param {HTMLDOMElement} el - Element to be cloned and displayed\n\t * @param {number} [delta=40] - Vertical delta to the infospot\n\t */\n  PANOLENS.Infospot.prototype.addHoverElement = function (el, delta) {\n    if (!this.element) {\n      this.element = el.cloneNode(true)\n      this.element.style.display = 'none'\n      this.element.style.top = 0\n      this.element.style.position = 'absolute'\n      this.element.classList.add('panolens-infospot')\n      this.element.verticalDelta = delta !== undefined ? delta : 40\n    }\n  }\n\n  /**\n\t * Remove hovering element\n\t */\n  PANOLENS.Infospot.prototype.removeHoverElement = function () {\n    if (this.element) {\n      if (this.element.left) {\n        this.container.removeChild(this.element.left)\n        this.element.left = null\n      }\n\n      if (this.element.right) {\n        this.container.removeChild(this.element.right)\n        this.element.right = null\n      }\n\n      this.container.removeChild(this.element)\n      this.element = null\n    }\n  }\n\n  /**\n\t * Lock hovering element\n\t */\n  PANOLENS.Infospot.prototype.lockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = true\n    }\n  }\n\n  /**\n\t * Unlock hovering element\n\t */\n  PANOLENS.Infospot.prototype.unlockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = false\n    }\n  }\n\n  /**\n\t * Show infospot\n\t * @param  {number} [delay=0] - Delay time to show\n\t */\n  PANOLENS.Infospot.prototype.show = function (delay) {\n    delay = delay || 0\n\n    if (this.animated) {\n      this.hideAnimation && this.hideAnimation.stop()\n      this.showAnimation && this.showAnimation.delay(delay).start()\n    }\n  }\n\n  /**\n\t * Hide infospot\n\t * @param  {number} [delay=0] - Delay time to hide\n\t */\n  PANOLENS.Infospot.prototype.hide = function (delay) {\n    delay = delay || 0\n\n    if (this.animated) {\n      this.showAnimation && this.showAnimation.stop()\n      this.hideAnimation && this.hideAnimation.delay(delay).start()\n    }\n  }\n\n  /**\n\t * Set focus event handler\n\t */\n  PANOLENS.Infospot.prototype.setFocusMethod = function (event) {\n    if (event) {\n      this.HANDLER_FOCUS = event.method\n    }\n  }\n\n  /**\n\t * Focus camera center to this infospot\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n  PANOLENS.Infospot.prototype.focus = function (duration, easing) {\n    if (this.HANDLER_FOCUS) {\n      this.HANDLER_FOCUS(this.position, duration, easing)\n      this.onDismiss()\n    }\n  }\n\n  /**\n\t * Dispose infospot\n\t */\n  PANOLENS.Infospot.prototype.dispose = function () {\n    this.removeHoverElement()\n    this.material.dispose()\n\n    if (this.parent) {\n      this.parent.remove(this)\n    }\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Viewer contains pre-defined scene, camera and renderer\n\t * @constructor\n\t * @param {object} [options] - Use custom or default config options\n\t * @param {HTMLElement} [options.container] - A HTMLElement to host the canvas\n\t * @param {THREE.Scene} [options.scene=THREE.Scene] - A THREE.Scene which contains panorama and 3D objects\n\t * @param {THREE.Camera} [options.camera=THREE.PerspectiveCamera] - A THREE.Camera to view the scene\n\t * @param {THREE.WebGLRenderer} [options.renderer=THREE.WebGLRenderer] - A THREE.WebGLRenderer to render canvas\n\t * @param {boolean} [options.controlBar=true] - Show/hide control bar on the bottom of the container\n\t * @param {array}   [options.controlButtons=[]] - Button names to mount on controlBar if controlBar exists, Defaults to ['fullscreen', 'setting', 'video']\n\t * @param {boolean} [options.autoHideControlBar=false] - Auto hide control bar when click on non-active area\n\t * @param {boolean} [options.autoHideInfospot=true] - Auto hide infospots when click on non-active area\n\t * @param {boolean} [options.horizontalView=false] - Allow only horizontal camera control\n\t * @param {number}  [options.clickTolerance=10] - Distance tolerance to tigger click / tap event\n\t * @param {number}  [options.cameraFov=60] - Camera field of view value\n\t * @param {boolean} [options.reverseDragging=false] - Reverse dragging direction\n\t * @param {boolean} [options.enableReticle=false] - Enable reticle for mouseless interaction other than VR mode\n\t * @param {number}  [options.dwellTime=1500] - Dwell time for reticle selection\n\t * @param {boolean} [options.autoReticleSelect=true] - Auto select a clickable target after dwellTime\n\t * @param {boolean} [options.viewIndicator=false] - Adds an angle view indicator in upper left corner\n\t * @param {number}  [options.indicatorSize=30] - Size of View Indicator\n\t * @param {string}  [options.output='none'] - Whether and where to output raycast position. Could be 'console' or 'overlay'\n\t */\n  PANOLENS.Viewer = function (options) {\n    THREE.EventDispatcher.call(this)\n\n    if (!THREE) {\n      console.error('Three.JS not found')\n\n      return\n    }\n\n    var container\n\n    options = options || {}\n    options.controlBar = options.controlBar !== undefined ? options.controlBar : true\n    options.controlButtons = options.controlButtons || [ 'fullscreen', 'setting', 'video' ]\n    options.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false\n    options.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true\n    options.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false\n    options.clickTolerance = options.clickTolerance || 10\n    options.cameraFov = options.cameraFov || 60\n    options.reverseDragging = options.reverseDragging || false\n    options.enableReticle = options.enableReticle || false\n    options.dwellTime = options.dwellTime || 1500\n    options.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true\n    options.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false\n    options.indicatorSize = options.indicatorSize || 30\n    options.output = options.output ? options.output : 'none'\n\n    this.options = options\n\n    // Container\n    if (options.container) {\n      container = options.container\n      container._width = container.clientWidth\n      container._height = container.clientHeight\n    } else {\n      container = document.createElement('div')\n      container.classList.add('panolens-container')\n      container.style.width = '100%'\n      container.style.height = '100%'\n      container._width = window.innerWidth\n      container._height = window.innerHeight\n      document.body.appendChild(container)\n    }\n\n    this.container = container\n\n    this.camera = options.camera || new THREE.PerspectiveCamera(this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 10000)\n    this.scene = options.scene || new THREE.Scene()\n    this.renderer = options.renderer || new THREE.WebGLRenderer({ alpha: true, antialias: false })\n\n    this.viewIndicatorSize = options.indicatorSize\n\n    this.reticle = {}\n    this.tempEnableReticle = this.options.enableReticle\n\n    this.mode = PANOLENS.Modes.NORMAL\n\n    this.OrbitControls\n    this.DeviceOrientationControls\n\n    this.CardboardEffect\n    this.StereoEffect\n\n    this.controls\n    this.effect\n    this.panorama\n    this.widget\n\n    this.hoverObject\n    this.infospot\n    this.pressEntityObject\n    this.pressObject\n\n    this.raycaster = new THREE.Raycaster()\n    this.raycasterPoint = new THREE.Vector2()\n    this.userMouse = new THREE.Vector2()\n    this.updateCallbacks = []\n    this.requestAnimationId\n\n    this.cameraFrustum = new THREE.Frustum()\n    this.cameraViewProjectionMatrix = new THREE.Matrix4()\n\n    this.outputDivElement\n\n    // Handler references\n    this.HANDLER_MOUSE_DOWN = this.onMouseDown.bind(this)\n    this.HANDLER_MOUSE_UP = this.onMouseUp.bind(this)\n    this.HANDLER_MOUSE_MOVE = this.onMouseMove.bind(this)\n    this.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind(this)\n    this.HANDLER_KEY_DOWN = this.onKeyDown.bind(this)\n    this.HANDLER_KEY_UP = this.onKeyUp.bind(this)\n    this.HANDLER_TAP = this.onTap.bind(this, {\n      clientX: this.container.clientWidth / 2,\n      clientY: this.container.clientHeight / 2\n    })\n\n    // Flag for infospot output\n    this.OUTPUT_INFOSPOT = false\n\n    // Animations\n    this.tweenLeftAnimation = new TWEEN.Tween()\n    this.tweenUpAnimation = new TWEEN.Tween()\n\n    // Renderer\n    this.renderer.setPixelRatio(window.devicePixelRatio)\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight)\n    this.renderer.setClearColor(0x000000, 1)\n    this.renderer.sortObjects = false\n\n    // Append Renderer Element to container\n    this.renderer.domElement.classList.add('panolens-canvas')\n    this.renderer.domElement.style.display = 'block'\n    this.container.style.backgroundColor = '#000'\n    this.container.appendChild(this.renderer.domElement)\n\n    // Camera Controls\n    this.OrbitControls = new THREE.OrbitControls(this.camera, this.container)\n    this.OrbitControls.name = 'orbit'\n    this.OrbitControls.minDistance = 1\n    this.OrbitControls.noPan = true\n    this.DeviceOrientationControls = new THREE.DeviceOrientationControls(this.camera, this.container)\n    this.DeviceOrientationControls.name = 'device-orientation'\n    this.DeviceOrientationControls.enabled = false\n    this.camera.position.z = 1\n\n    // Register change event if passiveRenering\n    if (this.options.passiveRendering) {\n      console.warn('passiveRendering is now deprecated')\n    }\n\n    // Controls\n    this.controls = [ this.OrbitControls, this.DeviceOrientationControls ]\n    this.control = this.OrbitControls\n\n    // Cardboard effect\n    this.CardboardEffect = new THREE.CardboardEffect(this.renderer)\n    this.CardboardEffect.setSize(this.container.clientWidth, this.container.clientHeight)\n\n    // Stereo effect\n    this.StereoEffect = new THREE.StereoEffect(this.renderer)\n    this.StereoEffect.setSize(this.container.clientWidth, this.container.clientHeight)\n\n    this.effect = this.CardboardEffect\n\n    // Add default hidden reticle\n    this.addReticle()\n\n    // Lock horizontal view\n    if (this.options.horizontalView) {\n      this.OrbitControls.minPolarAngle = Math.PI / 2\n      this.OrbitControls.maxPolarAngle = Math.PI / 2\n    }\n\n    // Add Control UI\n    if (this.options.controlBar !== false) {\n      this.addDefaultControlBar(this.options.controlButtons)\n    }\n\n    // Add View Indicator\n    if (this.options.viewIndicator) {\n      this.addViewIndicator()\n    }\n\n    // Reverse dragging direction\n    if (this.options.reverseDragging) {\n      this.reverseDraggingDirection()\n    }\n\n    // Register event if reticle is enabled, otherwise defaults to mouse\n    if (this.options.enableReticle) {\n      this.enableReticleControl()\n    } else {\n      this.registerMouseAndTouchEvents()\n    }\n\n    if (this.options.output === 'overlay') {\n      this.addOutputElement()\n    }\n\n    // Register dom event listeners\n    this.registerEventListeners()\n\n    // Animate\n    this.animate.call(this)\n  }\n\n  PANOLENS.Viewer.prototype = Object.create(THREE.EventDispatcher.prototype)\n\n  PANOLENS.Viewer.prototype.constructor = PANOLENS.Viewer\n\n  /**\n\t * Add an object to the scene\n\t * Automatically hookup with panolens-viewer-handler listener\n\t * to communicate with viewer method\n\t * @param {THREE.Object3D} object - The object to be added\n\t */\n  PANOLENS.Viewer.prototype.add = function (object) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[ i ])\n      }\n\n      return this\n    }\n\n    this.scene.add(object)\n\n    // All object added to scene has 'panolens-viewer-handler' event to handle viewer communication\n    if (object.addEventListener) {\n      object.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this))\n    }\n\n    // All object added to scene being passed with container\n    if (object instanceof PANOLENS.Panorama && object.dispatchEvent) {\n      object.dispatchEvent({ type: 'panolens-container', container: this.container })\n    }\n\n    // Hookup default panorama event listeners\n    if (object.type === 'panorama') {\n      this.addPanoramaEventListener(object)\n\n      if (!this.panorama) {\n        this.setPanorama(object)\n      }\n    }\n  }\n\n  /**\n\t * Remove an object from the scene\n\t * @param  {THREE.Object3D} object - Object to be removed\n\t */\n  PANOLENS.Viewer.prototype.remove = function (object) {\n    if (object.removeEventListener) {\n      object.removeEventListener('panolens-viewer-handler', this.eventHandler.bind(this))\n    }\n\n    this.scene.remove(object)\n  }\n\n  /**\n\t * Add default control bar\n\t * @param {array} array - The control buttons array\n\t */\n  PANOLENS.Viewer.prototype.addDefaultControlBar = function (array) {\n    var scope = this\n\n    if (this.widget) {\n      console.warn('Default control bar exists')\n      return\n    }\n\n    this.widget = new PANOLENS.Widget(this.container)\n    this.widget.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this))\n    this.widget.addControlBar()\n    array.forEach(function (buttonName) {\n      scope.widget.addControlButton(buttonName)\n    })\n  }\n\n  /**\n\t * Set a panorama to be the current one\n\t * @param {PANOLENS.Panorama} pano - Panorama to be set\n\t */\n  PANOLENS.Viewer.prototype.setPanorama = function (pano) {\n    var scope = this, leavingPanorama = this.panorama\n\n    if (pano.type === 'panorama' && leavingPanorama !== pano) {\n      // Clear exisiting infospot\n      this.hideInfospot()\n\n      var afterEnterComplete = function () {\n        leavingPanorama && leavingPanorama.onLeave()\n        pano.removeEventListener('enter-fade-start', afterEnterComplete)\n      }\n\n      pano.addEventListener('enter-fade-start', afterEnterComplete);\n\n      // Assign and enter panorama\n      (this.panorama = pano).onEnter()\n    }\n  }\n\n  /**\n\t * Event handler to execute commands from child objects\n\t * @param {object} event - The dispatched event with method as function name and data as an argument\n\t */\n  PANOLENS.Viewer.prototype.eventHandler = function (event) {\n    if (event.method && this[ event.method ]) {\n      this[ event.method ](event.data)\n    }\n  }\n\n  /**\n\t * Dispatch event to all descendants\n\t * @param  {object} event - Event to be passed along\n\t */\n  PANOLENS.Viewer.prototype.dispatchEventToChildren = function (event) {\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent(event)\n      }\n    })\n  }\n\n  /**\n\t * Set widget content\n\t * @param  {integer} controlIndex - Control index\n\t * @param  {PANOLENS.Modes} mode - Modes for effects\n\t */\n  PANOLENS.Viewer.prototype.activateWidgetItem = function (controlIndex, mode) {\n    var mainMenu = this.widget.mainMenu\n    var ControlMenuItem = mainMenu.children[ 0 ]\n    var ModeMenuItem = mainMenu.children[ 1 ]\n\n    var item\n\n    if (controlIndex !== undefined) {\n      switch (controlIndex) {\n        case 0:\n\n          item = ControlMenuItem.subMenu.children[ 1 ]\n\n          break\n\n        case 1:\n\n          item = ControlMenuItem.subMenu.children[ 2 ]\n\n          break\n\n        default:\n\n          item = ControlMenuItem.subMenu.children[ 1 ]\n\n          break\n      }\n\n      ControlMenuItem.subMenu.setActiveItem(item)\n      ControlMenuItem.setSelectionTitle(item.textContent)\n    }\n\n    if (mode !== undefined) {\n      switch (mode) {\n        case PANOLENS.Modes.CARDBOARD:\n\n          item = ModeMenuItem.subMenu.children[ 2 ]\n\n          break\n\n        case PANOLENS.Modes.STEREO:\n\n          item = ModeMenuItem.subMenu.children[ 3 ]\n\n          break\n\n        default:\n\n          item = ModeMenuItem.subMenu.children[ 1 ]\n\n          break\n      }\n\n      ModeMenuItem.subMenu.setActiveItem(item)\n      ModeMenuItem.setSelectionTitle(item.textContent)\n    }\n  }\n\n  /**\n\t * Enable rendering effect\n\t * @param  {PANOLENS.Modes} mode - Modes for effects\n\t */\n  PANOLENS.Viewer.prototype.enableEffect = function (mode) {\n    if (this.mode === mode) { return }\n    if (mode === PANOLENS.Modes.NORMAL) { this.disableEffect(); return } else { this.mode = mode }\n\n    var fov = this.camera.fov\n\n    switch (mode) {\n      case PANOLENS.Modes.CARDBOARD:\n\n        this.effect = this.CardboardEffect\n        this.enableReticleControl()\n\n        break\n\n      case PANOLENS.Modes.STEREO:\n\n        this.effect = this.StereoEffect\n        this.enableReticleControl()\n\n        break\n\n      default:\n\n        this.effect = null\n        this.disableReticleControl()\n\n        break\n    }\n\n    this.activateWidgetItem(undefined, this.mode)\n\n    /**\n\t\t * Dual eye effect event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#panolens-dual-eye-effect\n\t\t * @event PANOLENS.Infospot#panolens-dual-eye-effect\n\t\t * @property {PANOLENS.Modes} mode - Current display mode\n\t\t */\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode })\n\n    // Force effect stereo camera to update by refreshing fov\n    this.camera.fov = fov + 10e-3\n    this.effect.setSize(this.container.clientWidth, this.container.clientHeight)\n    this.render()\n    this.camera.fov = fov\n  }\n\n  /**\n\t * Disable additional rendering effect\n\t */\n  PANOLENS.Viewer.prototype.disableEffect = function () {\n    if (this.mode === PANOLENS.Modes.NORMAL) { return }\n\n    this.mode = PANOLENS.Modes.NORMAL\n    this.disableReticleControl()\n\n    this.activateWidgetItem(undefined, this.mode)\n\n    /**\n\t\t * Dual eye effect event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#panolens-dual-eye-effect\n\t\t * @event PANOLENS.Infospot#panolens-dual-eye-effect\n\t\t * @property {PANOLENS.Modes} mode - Current display mode\n\t\t */\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode })\n\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight)\n    this.render()\n  }\n\n  /**\n\t * Enable reticle control\n\t */\n  PANOLENS.Viewer.prototype.enableReticleControl = function () {\n    if (this.reticle.visible) { return }\n    if (!this.reticle.textureLoaded) { this.reticle.loadTextures() }\n\n    this.tempEnableReticle = true\n\n    // Register reticle event and unregister mouse event\n    this.unregisterMouseAndTouchEvents()\n    this.reticle.show()\n    this.registerReticleEvent()\n    this.updateReticleEvent()\n  }\n\n  /**\n\t * Disable reticle control\n\t */\n  PANOLENS.Viewer.prototype.disableReticleControl = function () {\n    this.tempEnableReticle = false\n\n    // Register mouse event and unregister reticle event\n    if (!this.options.enableReticle) {\n      this.reticle.hide()\n      this.unregisterReticleEvent()\n      this.registerMouseAndTouchEvents()\n    } else {\n      this.updateReticleEvent()\n    }\n  }\n\n  /**\n\t * Toggle video play or stop\n\t * @fires PANOLENS.Viewer#video-toggle\n\t */\n  PANOLENS.Viewer.prototype.toggleVideoPlay = function (pause) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      /**\n\t\t\t * Toggle video event\n\t\t\t * @type {object}\n\t\t\t * @event PANOLENS.Viewer#video-toggle\n\t\t\t */\n      this.panorama.dispatchEvent({ type: 'video-toggle', pause: pause })\n    }\n  }\n\n  /**\n\t * Set currentTime in a video\n\t * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t * @fires PANOLENS.Viewer#video-time\n\t */\n  PANOLENS.Viewer.prototype.setVideoCurrentTime = function (percentage) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      /**\n\t\t\t * Setting video time event\n\t\t\t * @type {object}\n\t\t\t * @event PANOLENS.Viewer#video-time\n\t\t\t * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t\t\t */\n      this.panorama.dispatchEvent({ type: 'video-time', percentage: percentage })\n    }\n  }\n\n  /**\n\t * This will be called when video updates if an widget is present\n\t * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t * @fires PANOLENS.Viewer#video-update\n\t */\n  PANOLENS.Viewer.prototype.onVideoUpdate = function (percentage) {\n    /**\n\t\t * Video update event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-update\n\t\t * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'video-update', percentage: percentage })\n  }\n\n  /**\n\t * Add update callback to be called every animation frame\n\t */\n  PANOLENS.Viewer.prototype.addUpdateCallback = function (fn) {\n    if (fn) {\n      this.updateCallbacks.push(fn)\n    }\n  }\n\n  /**\n\t * Remove update callback\n\t * @param  {Function} fn - The function to be removed\n\t */\n  PANOLENS.Viewer.prototype.removeUpdateCallback = function (fn) {\n    var index = this.updateCallbacks.indexOf(fn)\n\n    if (fn && index >= 0) {\n      this.updateCallbacks.splice(index, 1)\n    }\n  }\n\n  /**\n\t * Show video widget\n\t */\n  PANOLENS.Viewer.prototype.showVideoWidget = function () {\n    /**\n\t\t * Show video widget event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-control-show\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-show' })\n  }\n\n  /**\n\t * Hide video widget\n\t */\n  PANOLENS.Viewer.prototype.hideVideoWidget = function () {\n    /**\n\t\t * Hide video widget\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-control-hide\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-hide' })\n  }\n\n  PANOLENS.Viewer.prototype.updateVideoPlayButton = function (paused) {\n    if (this.widget &&\n\t\t\t this.widget.videoElement &&\n\t\t\t this.widget.videoElement.controlButton) {\n      this.widget.videoElement.controlButton.update(paused)\n    }\n  }\n\n  /**\n\t * Add default panorama event listeners\n\t * @param {PANOLENS.Panorama} pano - The panorama to be added with event listener\n\t */\n  PANOLENS.Viewer.prototype.addPanoramaEventListener = function (pano) {\n    var scope = this\n\n    // Set camera control on every panorama\n    pano.addEventListener('enter-fade-start', this.setCameraControl.bind(this))\n\n    // Show and hide widget event only when it's PANOLENS.VideoPanorama\n    if (pano instanceof PANOLENS.VideoPanorama) {\n      pano.addEventListener('enter-fade-start', this.showVideoWidget.bind(this))\n      pano.addEventListener('leave', function () {\n        if (!(this.panorama instanceof PANOLENS.VideoPanorama)) {\n          this.hideVideoWidget.call(this)\n        }\n      }.bind(this))\n    }\n  }\n\n  /**\n\t * Set camera control\n\t */\n  PANOLENS.Viewer.prototype.setCameraControl = function () {\n    this.OrbitControls.target.copy(this.panorama.position)\n  }\n\n  /**\n\t * Get current camera control\n\t * @return {object} - Current navigation control. THREE.OrbitControls or THREE.DeviceOrientationControls\n\t */\n  PANOLENS.Viewer.prototype.getControl = function () {\n    return this.control\n  },\n\n  /**\n\t * Get scene\n\t * @return {THREE.Scene} - Current scene which the viewer is built on\n\t */\n  PANOLENS.Viewer.prototype.getScene = function () {\n    return this.scene\n  }\n\n  /**\n\t * Get camera\n\t * @return {THREE.Camera} - The scene camera\n\t */\n  PANOLENS.Viewer.prototype.getCamera = function () {\n    return this.camera\n  },\n\n  /**\n\t * Get renderer\n\t * @return {THREE.WebGLRenderer} - The renderer using webgl\n\t */\n  PANOLENS.Viewer.prototype.getRenderer = function () {\n    return this.renderer\n  }\n\n  /**\n\t * Get container\n\t * @return {HTMLDOMElement} - The container holds rendererd canvas\n\t */\n  PANOLENS.Viewer.prototype.getContainer = function () {\n    return this.container\n  }\n\n  /**\n\t * Get control name\n\t * @return {string} - Control name. 'orbit' or 'device-orientation'\n\t */\n  PANOLENS.Viewer.prototype.getControlName = function () {\n    return this.control.name\n  }\n\n  /**\n\t * Get next navigation control name\n\t * @return {string} - Next control name\n\t */\n  PANOLENS.Viewer.prototype.getNextControlName = function () {\n    return this.controls[ this.getNextControlIndex() ].name\n  }\n\n  /**\n\t * Get next navigation control index\n\t * @return {number} - Next control index\n\t */\n  PANOLENS.Viewer.prototype.getNextControlIndex = function () {\n    var controls, control, nextIndex\n\n    controls = this.controls\n    control = this.control\n    nextIndex = controls.indexOf(control) + 1\n\n    return (nextIndex >= controls.length) ? 0 : nextIndex\n  }\n\n  /**\n\t * Set field of view of camera\n\t */\n  PANOLENS.Viewer.prototype.setCameraFov = function (fov) {\n    this.camera.fov = fov\n    this.camera.updateProjectionMatrix()\n  }\n\n  /**\n\t * Enable control by index\n\t * @param  {PANOLENS.Controls} index - Index of camera control\n\t */\n  PANOLENS.Viewer.prototype.enableControl = function (index) {\n    index = (index >= 0 && index < this.controls.length) ? index : 0\n\n    this.control.enabled = false\n\n    this.control = this.controls[ index ]\n\n    this.control.enabled = true\n\n    switch (index) {\n      case PANOLENS.Controls.ORBIT:\n\n        this.camera.position.copy(this.panorama.position)\n        this.camera.position.z += 1\n\n        break\n\n      case PANOLENS.Controls.DEVICEORIENTATION:\n\n        this.camera.position.copy(this.panorama.position)\n\n        break\n\n      default:\n\n        break\n    }\n\n    this.control.update()\n\n    this.activateWidgetItem(index, undefined)\n  }\n\n  /**\n\t * Disable current control\n\t */\n  PANOLENS.Viewer.prototype.disableControl = function () {\n    this.control.enabled = false\n  }\n\n  /**\n\t * Toggle next control\n\t */\n  PANOLENS.Viewer.prototype.toggleNextControl = function () {\n    this.enableControl(this.getNextControlIndex())\n  }\n\n  /**\n\t * Screen Space Projection\n\t */\n  PANOLENS.Viewer.prototype.getScreenVector = function (worldVector) {\n    var vector = worldVector.clone()\n    var widthHalf = (this.container.clientWidth) / 2\n    var heightHalf = this.container.clientHeight / 2\n\n    vector.project(this.camera)\n\n    vector.x = (vector.x * widthHalf) + widthHalf\n    vector.y = -(vector.y * heightHalf) + heightHalf\n    vector.z = 0\n\n    return vector\n  }\n\n  /**\n\t * Check Sprite in Viewport\n\t */\n  PANOLENS.Viewer.prototype.checkSpriteInViewport = function (sprite) {\n    this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld)\n    this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse)\n    this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix)\n\n    return sprite.visible && this.cameraFrustum.intersectsSprite(sprite)\n  }\n\n  /**\n\t * Reverse dragging direction\n\t */\n  PANOLENS.Viewer.prototype.reverseDraggingDirection = function () {\n    this.OrbitControls.rotateSpeed *= -1\n    this.OrbitControls.momentumScalingFactor *= -1\n  }\n\n  /**\n\t * Add reticle\n\t */\n  PANOLENS.Viewer.prototype.addReticle = function () {\n    this.reticle = new PANOLENS.Reticle(0xffffff,\n      this.options.autoReticleSelect,\n      PANOLENS.DataImage.ReticleIdle,\n      PANOLENS.DataImage.ReticleDwell,\n      this.options.dwellTime,\n      45)\n    this.reticle.position.z = -10\n    this.camera.add(this.reticle)\n    this.scene.add(this.camera)\n  }\n\n  /**\n\t * Tween control looking center\n\t * @param {THREE.Vector3} vector - Vector to be looked at the center\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n  PANOLENS.Viewer.prototype.tweenControlCenter = function (vector, duration, easing) {\n    if (this.control !== this.OrbitControls) {\n      return\n    }\n\n    // Pass in arguments as array\n    if (vector instanceof Array) {\n      duration = vector[ 1 ]\n      easing = vector[ 2 ]\n      vector = vector[ 0 ]\n    }\n\n    duration = duration !== undefined ? duration : 1000\n    easing = easing || TWEEN.Easing.Exponential.Out\n\n    var scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv\n\n    scope = this\n\n    chv = this.camera.getWorldDirection()\n    cvv = chv.clone()\n\n    vptc = this.panorama.getWorldPosition().sub(this.camera.getWorldPosition())\n\n    hv = vector.clone()\n    // Scale effect\n    hv.x *= -1\n    hv.add(vptc).normalize()\n    vv = hv.clone()\n\n    chv.y = 0\n    hv.y = 0\n\n    ha = Math.atan2(hv.z, hv.x) - Math.atan2(chv.z, chv.x)\n    ha = ha > Math.PI ? ha - 2 * Math.PI : ha\n    ha = ha < -Math.PI ? ha + 2 * Math.PI : ha\n    va = Math.abs(cvv.angleTo(chv) + (cvv.y * vv.y <= 0 ? vv.angleTo(hv) : -vv.angleTo(hv)))\n    va *= vv.y < cvv.y ? 1 : -1\n\n    ov = { left: 0, up: 0 }\n    nv = { left: 0, up: 0 }\n\n    this.tweenLeftAnimation.stop()\n    this.tweenUpAnimation.stop()\n\n    this.tweenLeftAnimation = new TWEEN.Tween(ov)\n      .to({ left: ha }, duration)\n      .easing(easing)\n      .onUpdate(function () {\n        scope.control.rotateLeft(this.left - nv.left)\n        nv.left = this.left\n      })\n      .start()\n\n    this.tweenUpAnimation = new TWEEN.Tween(ov)\n      .to({ up: va }, duration)\n      .easing(easing)\n      .onUpdate(function () {\n        scope.control.rotateUp(this.up - nv.up)\n        nv.up = this.up\n      })\n      .start()\n  }\n\n  /**\n\t * Tween control looking center by object\n\t * @param {THREE.Object3D} object - Object to be looked at the center\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n  PANOLENS.Viewer.prototype.tweenControlCenterByObject = function (object, duration, easing) {\n    var isUnderScalePlaceHolder = false\n\n    object.traverseAncestors(function (ancestor) {\n      if (ancestor.scalePlaceHolder) {\n        isUnderScalePlaceHolder = true\n      }\n    })\n\n    if (isUnderScalePlaceHolder) {\n      var invertXVector = new THREE.Vector3(-1, 1, 1)\n\n      this.tweenControlCenter(object.getWorldPosition().multiply(invertXVector), duration, easing)\n    } else {\n      this.tweenControlCenter(object.getWorldPosition(), duration, easing)\n    }\n  }\n\n  /**\n\t * This is called when window size is changed\n\t * @fires PANOLENS.Viewer#window-resize\n\t * @param {number} [windowWidth] - Specify if custom element has changed width\n\t * @param {number} [windowHeight] - Specify if custom element has changed height\n\t */\n  PANOLENS.Viewer.prototype.onWindowResize = function (windowWidth, windowHeight) {\n    var width, height, expand\n\n    expand = this.container.classList.contains('panolens-container') || this.container.isFullscreen\n\n    if (windowWidth !== undefined && windowHeight !== undefined) {\n      width = windowWidth\n      height = windowHeight\n      this.container._width = windowWidth\n      this.container._height = windowHeight\n    } else {\n      width = expand ? Math.max(document.documentElement.clientWidth, window.innerWidth || 0) : this.container.clientWidth\n      height = expand ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : this.container.clientHeight\n      this.container._width = width\n      this.container._height = height\n    }\n\n    this.camera.aspect = width / height\n    this.camera.updateProjectionMatrix()\n\n    this.renderer.setSize(width, height)\n\n    // Update reticle\n    if (this.options.enableReticle || this.tempEnableReticle) {\n      this.updateReticleEvent()\n    }\n\n    /**\n\t\t * Window resizing event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#window-resize\n\t\t * @property {number} width  - Width of the window\n\t\t * @property {number} height - Height of the window\n\t\t */\n    this.dispatchEvent({ type: 'window-resize', width: width, height: height })\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent({ type: 'window-resize', width: width, height: height })\n      }\n    })\n  }\n\n  PANOLENS.Viewer.prototype.addOutputElement = function () {\n    var element = document.createElement('div')\n    element.style.position = 'absolute'\n    element.style.right = '10px'\n    element.style.top = '10px'\n    element.style.color = '#fff'\n    this.container.appendChild(element)\n    this.outputDivElement = element\n  }\n\n  /**\n\t * Output infospot attach position in developer console by holding down Ctrl button\n\t */\n  PANOLENS.Viewer.prototype.outputInfospotPosition = function () {\n    var intersects, point, panoramaWorldPosition, outputPosition\n\n    intersects = this.raycaster.intersectObject(this.panorama, true)\n\n    if (intersects.length > 0) {\n      point = intersects[0].point\n      panoramaWorldPosition = this.panorama.getWorldPosition()\n\n      // Panorama is scaled -1 on X axis\n      outputPosition = new THREE.Vector3(\n        -(point.x - panoramaWorldPosition.x).toFixed(2),\n        (point.y - panoramaWorldPosition.y).toFixed(2),\n        (point.z - panoramaWorldPosition.z).toFixed(2)\n      )\n\n      switch (this.options.output) {\n        case 'console':\n          console.info(outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z)\n          break\n\n        case 'overlay':\n          this.outputDivElement.textContent = outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z\n          break\n\n        default:\n          break\n      }\n    }\n  }\n\n  PANOLENS.Viewer.prototype.onMouseDown = function (event) {\n    event.preventDefault()\n\n    this.userMouse.x = (event.clientX >= 0) ? event.clientX : event.touches[0].clientX\n    this.userMouse.y = (event.clientY >= 0) ? event.clientY : event.touches[0].clientY\n    this.userMouse.type = 'mousedown'\n    this.onTap(event)\n  }\n\n  PANOLENS.Viewer.prototype.onMouseMove = function (event) {\n    event.preventDefault()\n    this.userMouse.type = 'mousemove'\n    this.onTap(event)\n  }\n\n  PANOLENS.Viewer.prototype.onMouseUp = function (event) {\n    var onTarget = false, type\n\n    this.userMouse.type = 'mouseup'\n\n    type = (this.userMouse.x >= event.clientX - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.x <= event.clientX + this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y >= event.clientY - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y <= event.clientY + this.options.clickTolerance) ||\n\t\t\t\t(event.changedTouches &&\n\t\t\t\tthis.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance)\n      ? 'click' : undefined\n\n    // Event should happen on canvas\n    if (event && event.target && !event.target.classList.contains('panolens-canvas')) { return }\n\n    event.preventDefault()\n\n    if (event.changedTouches && event.changedTouches.length === 1) {\n      onTarget = this.onTap({ clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY }, type)\n    } else {\n      onTarget = this.onTap(event, type)\n    }\n\n    this.userMouse.type = 'none'\n\n    if (onTarget) {\n      return\n    }\n\n    if (type === 'click') {\n      this.options.autoHideInfospot && this.panorama && this.panorama.toggleInfospotVisibility()\n      this.options.autoHideControlBar && this.toggleControlBar()\n    }\n  }\n\n  PANOLENS.Viewer.prototype.onTap = function (event, type) {\n    var intersects, intersect_entity, intersect\n\n    this.raycasterPoint.x = ((event.clientX - this.container.offsetLeft) / this.container.clientWidth) * 2 - 1\n    this.raycasterPoint.y = -((event.clientY - this.container.offsetTop) / this.container.clientHeight) * 2 + 1\n\n    this.raycaster.setFromCamera(this.raycasterPoint, this.camera)\n\n    // Return if no panorama\n    if (!this.panorama) {\n      return\n    }\n\n    // output infospot information\n    if (event.type !== 'mousedown' && PANOLENS.Utils.checkTouchSupported() || this.OUTPUT_INFOSPOT) {\n      this.outputInfospotPosition()\n    }\n\n    intersects = this.raycaster.intersectObjects(this.panorama.children, true)\n\n    intersect_entity = this.getConvertedIntersect(intersects)\n\n    intersect = (intersects.length > 0) ? intersects[0].object : intersect\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event })\n      }\n\n      this.pressEntityObject = undefined\n    }\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect && this.pressObject === intersect && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event })\n      }\n\n      this.pressObject = undefined\n    }\n\n    if (type === 'click') {\n      this.panorama.dispatchEvent({ type: 'click', intersects: intersects, mouseEvent: event })\n\n      if (intersect_entity && intersect_entity.dispatchEvent) {\n        intersect_entity.dispatchEvent({ type: 'click-entity', mouseEvent: event })\n      }\n\n      if (intersect && intersect.dispatchEvent) {\n        intersect.dispatchEvent({ type: 'click', mouseEvent: event })\n      }\n    } else {\n      this.panorama.dispatchEvent({ type: 'hover', intersects: intersects, mouseEvent: event })\n\n      if ((this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity) ||\n\t\t\t\t(this.hoverObject && intersects.length === 0)) {\n        if (this.hoverObject.dispatchEvent) {\n          this.hoverObject.dispatchEvent({ type: 'hoverleave', mouseEvent: event })\n\n          // Cancel dwelling\n          this.reticle.cancelDwelling()\n        }\n\n        this.hoverObject = undefined\n      }\n\n      if (intersect_entity && intersects.length > 0) {\n        if (this.hoverObject !== intersect_entity) {\n          this.hoverObject = intersect_entity\n\n          if (this.hoverObject.dispatchEvent) {\n            this.hoverObject.dispatchEvent({ type: 'hoverenter', mouseEvent: event })\n\n            // Start reticle timer\n            if (this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle) {\n              this.reticle.startDwelling(this.onTap.bind(this, event, 'click'))\n            }\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity) {\n          this.pressEntityObject = intersect_entity\n\n          if (this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressstart-entity', mouseEvent: event })\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressObject != intersect) {\n          this.pressObject = intersect\n\n          if (this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressstart', mouseEvent: event })\n          }\n        }\n\n        if (this.userMouse.type === 'mousemove' || this.options.enableReticle) {\n          if (intersect && intersect.dispatchEvent) {\n            intersect.dispatchEvent({ type: 'hover', mouseEvent: event })\n          }\n\n          if (this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressmove-entity', mouseEvent: event })\n          }\n\n          if (this.pressObject && this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressmove', mouseEvent: event })\n          }\n        }\n      }\n\n      if (!intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event })\n\n        this.pressEntityObject = undefined\n      }\n\n      if (!intersect && this.pressObject && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event })\n\n        this.pressObject = undefined\n      }\n    }\n\n    // Infospot handler\n    if (intersect && intersect instanceof PANOLENS.Infospot) {\n      this.infospot = intersect\n\n      if (type === 'click') {\n        return true\n      }\n    } else if (this.infospot) {\n      this.hideInfospot()\n    }\n  }\n\n  PANOLENS.Viewer.prototype.getConvertedIntersect = function (intersects) {\n    var intersect\n\n    for (var i = 0; i < intersects.length; i++) {\n      if (intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough) {\n        if (intersects[i].object.entity && intersects[i].object.entity.passThrough) {\n          continue\n        } else if (intersects[i].object.entity && !intersects[i].object.entity.passThrough) {\n          intersect = intersects[i].object.entity\n          break\n        } else {\n          intersect = intersects[i].object\n          break\n        }\n      }\n    }\n\n    return intersect\n  }\n\n  PANOLENS.Viewer.prototype.hideInfospot = function (intersects) {\n    if (this.infospot) {\n      this.infospot.onHoverEnd()\n\n      this.infospot = undefined\n    }\n  }\n\n  /**\n\t * Toggle control bar\n\t * @fires [PANOLENS.Viewer#control-bar-toggle]\n\t */\n  PANOLENS.Viewer.prototype.toggleControlBar = function () {\n    /**\n\t\t * Toggle control bar event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#control-bar-toggle\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'control-bar-toggle' })\n  }\n\n  PANOLENS.Viewer.prototype.onKeyDown = function (event) {\n    if (this.options.output && this.options.output !== 'none' && event.key === 'Control') {\n      this.OUTPUT_INFOSPOT = true\n    }\n  }\n\n  PANOLENS.Viewer.prototype.onKeyUp = function (event) {\n    this.OUTPUT_INFOSPOT = false\n  }\n\n  /**\n\t * Update control and callbacks\n\t */\n  PANOLENS.Viewer.prototype.update = function () {\n    TWEEN.update()\n\n    this.updateCallbacks.forEach(function (callback) { callback() })\n\n    this.control.update()\n\n    this.scene.traverse(function (child) {\n      if (child instanceof PANOLENS.Infospot &&\n\t\t\t\tchild.element &&\n\t\t\t\t(this.hoverObject === child ||\n\t\t\t\t\tchild.element.style.display !== 'none' ||\n\t\t\t\t\t(child.element.left && child.element.left.style.display !== 'none') ||\n\t\t\t\t\t(child.element.right && child.element.right.style.display !== 'none'))) {\n        if (this.checkSpriteInViewport(child)) {\n          var vector = this.getScreenVector(child.getWorldPosition())\n          child.translateElement(vector.x, vector.y)\n        } else {\n          child.onDismiss()\n        }\n      }\n    }.bind(this))\n  }\n\n  /**\n\t * Rendering function to be called on every animation frame\n\t */\n  PANOLENS.Viewer.prototype.render = function () {\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      this.effect.render(this.scene, this.camera)\n    } else {\n      this.renderer.render(this.scene, this.camera)\n    }\n  }\n\n  PANOLENS.Viewer.prototype.animate = function () {\n    this.requestAnimationId = window.requestAnimationFrame(this.animate.bind(this))\n\n    this.onChange()\n  }\n\n  PANOLENS.Viewer.prototype.onChange = function () {\n    this.update()\n    this.render()\n  }\n\n  /**\n\t * Register mouse and touch event on container\n\t */\n  PANOLENS.Viewer.prototype.registerMouseAndTouchEvents = function () {\n    this.container.addEventListener('mousedown', \tthis.HANDLER_MOUSE_DOWN, false)\n    this.container.addEventListener('mousemove', \tthis.HANDLER_MOUSE_MOVE, false)\n    this.container.addEventListener('mouseup', \tthis.HANDLER_MOUSE_UP, false)\n    this.container.addEventListener('touchstart', \tthis.HANDLER_MOUSE_DOWN, false)\n    this.container.addEventListener('touchend', \tthis.HANDLER_MOUSE_UP, false)\n  }\n\n  /**\n\t * Unregister mouse and touch event on container\n\t */\n  PANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents = function () {\n    this.container.removeEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false)\n    this.container.removeEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false)\n    this.container.removeEventListener('mouseup', this.HANDLER_MOUSE_UP, false)\n    this.container.removeEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false)\n    this.container.removeEventListener('touchend', this.HANDLER_MOUSE_UP, false)\n  }\n\n  /**\n\t * Register reticle event\n\t */\n  PANOLENS.Viewer.prototype.registerReticleEvent = function () {\n    this.addUpdateCallback(this.HANDLER_TAP)\n  }\n\n  /**\n\t * Unregister reticle event\n\t */\n  PANOLENS.Viewer.prototype.unregisterReticleEvent = function () {\n    this.removeUpdateCallback(this.HANDLER_TAP)\n  }\n\n  /**\n\t * Update reticle event\n\t */\n  PANOLENS.Viewer.prototype.updateReticleEvent = function () {\n    var centerX, centerY\n\n    centerX = this.container.clientWidth / 2 + this.container.offsetLeft\n    centerY = this.container.clientHeight / 2\n\n    this.removeUpdateCallback(this.HANDLER_TAP)\n    this.HANDLER_TAP = this.onTap.bind(this, { clientX: centerX, clientY: centerY })\n    this.addUpdateCallback(this.HANDLER_TAP)\n  }\n\n  /**\n\t * Register container and window listeners\n\t */\n  PANOLENS.Viewer.prototype.registerEventListeners = function () {\n    // Resize Event\n    window.addEventListener('resize', this.HANDLER_WINDOW_RESIZE, true)\n\n    // Keyboard Event\n    window.addEventListener('keydown', this.HANDLER_KEY_DOWN, true)\n    window.addEventListener('keyup', this.HANDLER_KEY_UP, true)\n  }\n\n  /**\n\t * Unregister container and window listeners\n\t */\n  PANOLENS.Viewer.prototype.unregisterEventListeners = function () {\n    // Resize Event\n    window.removeEventListener('resize', this.HANDLER_WINDOW_RESIZE, true)\n\n    // Keyboard Event\n    window.removeEventListener('keydown', this.HANDLER_KEY_DOWN, true)\n    window.removeEventListener('keyup', this.HANDLER_KEY_UP, true)\n  }\n\n  /**\n\t * Dispose all scene objects and clear cache\n\t */\n  PANOLENS.Viewer.prototype.dispose = function () {\n    // Unregister dom event listeners\n    this.unregisterEventListeners()\n\n    // recursive disposal on 3d objects\n    function recursiveDispose (object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i])\n        object.remove(object.children[i])\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose()\n      }\n\n      object.geometry && object.geometry.dispose()\n      object.material && object.material.dispose()\n    }\n\n    recursiveDispose(this.scene)\n\n    // dispose widget\n    if (this.widget) {\n      this.widget.dispose()\n      this.widget = null\n    }\n\n    // clear cache\n    if (THREE.Cache && THREE.Cache.enabled) {\n      THREE.Cache.clear()\n    }\n  }\n\n  /**\n\t * Destory viewer by disposing and stopping requestAnimationFrame\n\t */\n  PANOLENS.Viewer.prototype.destory = function () {\n    this.dispose()\n    this.render()\n    window.cancelAnimationFrame(this.requestAnimationId)\n  }\n\n  /**\n\t * On panorama dispose\n\t */\n  PANOLENS.Viewer.prototype.onPanoramaDispose = function (panorama) {\n    if (panorama instanceof PANOLENS.VideoPanorama) {\n      this.hideVideoWidget()\n    }\n\n    if (panorama === this.panorama) {\n      this.panorama = null\n    }\n  }\n\n  /**\n\t * Load ajax call\n\t * @param {string} url - URL to be requested\n\t * @param {function} [callback] - Callback after request completes\n\t */\n  PANOLENS.Viewer.prototype.loadAsyncRequest = function (url, callback) {\n    var request = new XMLHttpRequest()\n    request.onloadend = function (event) {\n      callback && callback(event)\n    }\n    request.open('GET', url, true)\n    request.send(null)\n  }\n\n  /**\n\t * View indicator in upper left\n\t * */\n  PANOLENS.Viewer.prototype.addViewIndicator = function () {\n    var scope = this\n\n    function loadViewIndicator (asyncEvent) {\n      if (asyncEvent.loaded === 0) return\n\n      var viewIndicatorDiv = asyncEvent.target.responseXML.documentElement\n      viewIndicatorDiv.style.width = scope.viewIndicatorSize + 'px'\n      viewIndicatorDiv.style.height = scope.viewIndicatorSize + 'px'\n      viewIndicatorDiv.style.position = 'absolute'\n      viewIndicatorDiv.style.top = '10px'\n      viewIndicatorDiv.style.left = '10px'\n      viewIndicatorDiv.style.opacity = '0.5'\n      viewIndicatorDiv.style.cursor = 'pointer'\n      viewIndicatorDiv.id = 'panolens-view-indicator-container'\n\n      scope.container.appendChild(viewIndicatorDiv)\n\n      var indicator = viewIndicatorDiv.querySelector('#indicator')\n      var setIndicatorD = function () {\n        scope.radius = scope.viewIndicatorSize * 0.225\n        scope.currentPanoAngle = scope.camera.rotation.y - THREE.Math.degToRad(90)\n        scope.fovAngle = THREE.Math.degToRad(scope.camera.fov)\n        scope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2\n        scope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2\n        scope.leftX = scope.radius * Math.cos(scope.leftAngle)\n        scope.leftY = scope.radius * Math.sin(scope.leftAngle)\n        scope.rightX = scope.radius * Math.cos(scope.rightAngle)\n        scope.rightY = scope.radius * Math.sin(scope.rightAngle)\n        scope.indicatorD = 'M ' + scope.leftX + ' ' + scope.leftY + ' A ' + scope.radius + ' ' + scope.radius + ' 0 0 1 ' + scope.rightX + ' ' + scope.rightY\n\n        if (scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius) {\n          indicator.setAttribute('d', scope.indicatorD)\n        }\n      }\n\n      scope.addUpdateCallback(setIndicatorD)\n\n      var indicatorOnMouseEnter = function () {\n        this.style.opacity = '1'\n      }\n\n      var indicatorOnMouseLeave = function () {\n        this.style.opacity = '0.5'\n      }\n\n      viewIndicatorDiv.addEventListener('mouseenter', indicatorOnMouseEnter)\n      viewIndicatorDiv.addEventListener('mouseleave', indicatorOnMouseLeave)\n    }\n\n    this.loadAsyncRequest(PANOLENS.DataImage.ViewIndicator, loadViewIndicator)\n  }\n\n  /**\n\t * Append custom control item to existing control bar\n\t * @param {object} [option={}] - Style object to overwirte default element style. It takes 'style', 'onTap' and 'group' properties.\n\t */\n  PANOLENS.Viewer.prototype.appendControlItem = function (option) {\n    var item = this.widget.createCustomItem(option)\n\n    if (option.group === 'video') {\n      this.widget.videoElement.appendChild(item)\n    } else {\n      this.widget.barElement.appendChild(item)\n    }\n\n    return item\n  }\n})()\n;(function e (t, n, r) { function s (o, u) { if (!n[o]) { if (!t[o]) { var a = typeof require === 'function' && require; if (!u && a) return a(o, !0); if (i) return i(o, !0); var f = new Error(\"Cannot find module '\" + o + \"'\"); throw f.code = 'MODULE_NOT_FOUND', f } var l = n[o] = {exports: {}}; t[o][0].call(l.exports, function (e) { var n = t[o][1][e]; return s(n || e) }, l, l.exports, e, t, n, r) } return n[o].exports } var i = typeof require === 'function' && require; for (var o = 0; o < r.length; o++)s(r[o]); return s })({1: [function (require, module, exports) {\n  var createLayout = require('layout-bmfont-text')\n  var inherits = require('inherits')\n  var createIndices = require('quad-indices')\n  var buffer = require('three-buffer-vertex-data')\n  var assign = require('object-assign')\n\n  var vertices = require('./lib/vertices')\n  var utils = require('./lib/utils')\n\n  var Base = THREE.BufferGeometry\n\n  module.exports = function createTextGeometry (opt) {\n\t  return new TextGeometry(opt)\n  }\n\n  function TextGeometry (opt) {\n\t  Base.call(this)\n\n\t  if (typeof opt === 'string') {\n\t    opt = { text: opt }\n\t  }\n\n\t  // use these as default values for any subsequent\n\t  // calls to update()\n\t  this._opt = assign({}, opt)\n\n\t  // also do an initial setup...\n\t  if (opt) this.update(opt)\n  }\n\n  inherits(TextGeometry, Base)\n\n  TextGeometry.prototype.update = function (opt) {\n\t  if (typeof opt === 'string') {\n\t    opt = { text: opt }\n\t  }\n\n\t  // use constructor defaults\n\t  opt = assign({}, this._opt, opt)\n\n\t  if (!opt.font) {\n\t    throw new TypeError('must specify a { font } in options')\n\t  }\n\n\t  this.layout = createLayout(opt)\n\n\t  // get vec2 texcoords\n\t  var flipY = opt.flipY !== false\n\n\t  // the desired BMFont data\n\t  var font = opt.font\n\n\t  // determine texture size from font file\n\t  var texWidth = font.common.scaleW\n\t  var texHeight = font.common.scaleH\n\n\t  // get visible glyphs\n\t  var glyphs = this.layout.glyphs.filter(function (glyph) {\n\t    var bitmap = glyph.data\n\t    return bitmap.width * bitmap.height > 0\n\t  })\n\n\t  // provide visible glyphs for convenience\n\t  this.visibleGlyphs = glyphs\n\n\t  // get common vertex data\n\t  var positions = vertices.positions(glyphs)\n\t  var uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY)\n\t  var indices = createIndices({\n\t    clockwise: true,\n\t    type: 'uint16',\n\t    count: glyphs.length\n\t  })\n\n\t  // update vertex data\n\t  buffer.index(this, indices, 1, 'uint16')\n\t  buffer.attr(this, 'position', positions, 2)\n\t  buffer.attr(this, 'uv', uvs, 2)\n\n\t  // update multipage data\n\t  if (!opt.multipage && 'page' in this.attributes) {\n\t    // disable multipage rendering\n\t    this.removeAttribute('page')\n\t  } else if (opt.multipage) {\n\t    var pages = vertices.pages(glyphs)\n\t    // enable multipage rendering\n\t    buffer.attr(this, 'page', pages, 1)\n\t  }\n  }\n\n  TextGeometry.prototype.computeBoundingSphere = function () {\n\t  if (this.boundingSphere === null) {\n\t    this.boundingSphere = new THREE.Sphere()\n\t  }\n\n\t  var positions = this.attributes.position.array\n\t  var itemSize = this.attributes.position.itemSize\n\t  if (!positions || !itemSize || positions.length < 2) {\n\t    this.boundingSphere.radius = 0\n\t    this.boundingSphere.center.set(0, 0, 0)\n\t    return\n\t  }\n\t  utils.computeSphere(positions, this.boundingSphere)\n\t  if (isNaN(this.boundingSphere.radius)) {\n\t    console.error('THREE.BufferGeometry.computeBoundingSphere(): ' +\n\t      'Computed radius is NaN. The ' +\n\t      '\"position\" attribute is likely to have NaN values.')\n\t  }\n  }\n\n  TextGeometry.prototype.computeBoundingBox = function () {\n\t  if (this.boundingBox === null) {\n\t    this.boundingBox = new THREE.Box3()\n\t  }\n\n\t  var bbox = this.boundingBox\n\t  var positions = this.attributes.position.array\n\t  var itemSize = this.attributes.position.itemSize\n\t  if (!positions || !itemSize || positions.length < 2) {\n\t    bbox.makeEmpty()\n\t    return\n\t  }\n\t  utils.computeBox(positions, bbox)\n  }\n}, {'./lib/utils': 2, './lib/vertices': 3, 'inherits': 4, 'layout-bmfont-text': 5, 'object-assign': 26, 'quad-indices': 27, 'three-buffer-vertex-data': 31}],\n2: [function (require, module, exports) {\n  var itemSize = 2\n  var box = { min: [0, 0], max: [0, 0] }\n\n  function bounds (positions) {\n\t  var count = positions.length / itemSize\n\t  box.min[0] = positions[0]\n\t  box.min[1] = positions[1]\n\t  box.max[0] = positions[0]\n\t  box.max[1] = positions[1]\n\n\t  for (var i = 0; i < count; i++) {\n\t    var x = positions[i * itemSize + 0]\n\t    var y = positions[i * itemSize + 1]\n\t    box.min[0] = Math.min(x, box.min[0])\n\t    box.min[1] = Math.min(y, box.min[1])\n\t    box.max[0] = Math.max(x, box.max[0])\n\t    box.max[1] = Math.max(y, box.max[1])\n\t  }\n  }\n\n  module.exports.computeBox = function (positions, output) {\n\t  bounds(positions)\n\t  output.min.set(box.min[0], box.min[1], 0)\n\t  output.max.set(box.max[0], box.max[1], 0)\n  }\n\n  module.exports.computeSphere = function (positions, output) {\n\t  bounds(positions)\n\t  var minX = box.min[0]\n\t  var minY = box.min[1]\n\t  var maxX = box.max[0]\n\t  var maxY = box.max[1]\n\t  var width = maxX - minX\n\t  var height = maxY - minY\n\t  var length = Math.sqrt(width * width + height * height)\n\t  output.center.set(minX + width / 2, minY + height / 2, 0)\n\t  output.radius = length / 2\n  }\n}, {}],\n3: [function (require, module, exports) {\n  module.exports.pages = function pages (glyphs) {\n\t  var pages = new Float32Array(glyphs.length * 4 * 1)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var id = glyph.data.page || 0\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t  })\n\t  return pages\n  }\n\n  module.exports.uvs = function uvs (glyphs, texWidth, texHeight, flipY) {\n\t  var uvs = new Float32Array(glyphs.length * 4 * 2)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var bitmap = glyph.data\n\t    var bw = (bitmap.x + bitmap.width)\n\t    var bh = (bitmap.y + bitmap.height)\n\n\t    // top left position\n\t    var u0 = bitmap.x / texWidth\n\t    var v1 = bitmap.y / texHeight\n\t    var u1 = bw / texWidth\n\t    var v0 = bh / texHeight\n\n\t    if (flipY) {\n\t      v1 = (texHeight - bitmap.y) / texHeight\n\t      v0 = (texHeight - bh) / texHeight\n\t    }\n\n\t    // BL\n\t    uvs[i++] = u0\n\t    uvs[i++] = v1\n\t    // TL\n\t    uvs[i++] = u0\n\t    uvs[i++] = v0\n\t    // TR\n\t    uvs[i++] = u1\n\t    uvs[i++] = v0\n\t    // BR\n\t    uvs[i++] = u1\n\t    uvs[i++] = v1\n\t  })\n\t  return uvs\n  }\n\n  module.exports.positions = function positions (glyphs) {\n\t  var positions = new Float32Array(glyphs.length * 4 * 2)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var bitmap = glyph.data\n\n\t    // bottom left position\n\t    var x = glyph.position[0] + bitmap.xoffset\n\t    var y = glyph.position[1] + bitmap.yoffset\n\n\t    // quad size\n\t    var w = bitmap.width\n\t    var h = bitmap.height\n\n\t    // BL\n\t    positions[i++] = x\n\t    positions[i++] = y\n\t    // TL\n\t    positions[i++] = x\n\t    positions[i++] = y + h\n\t    // TR\n\t    positions[i++] = x + w\n\t    positions[i++] = y + h\n\t    // BR\n\t    positions[i++] = x + w\n\t    positions[i++] = y\n\t  })\n\t  return positions\n  }\n}, {}],\n4: [function (require, module, exports) {\n  if (typeof Object.create === 'function') {\n\t  // implementation from standard node.js 'util' module\n\t  module.exports = function inherits (ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    ctor.prototype = Object.create(superCtor.prototype, {\n\t      constructor: {\n\t        value: ctor,\n\t        enumerable: false,\n\t        writable: true,\n\t        configurable: true\n\t      }\n\t    })\n\t  }\n  } else {\n\t  // old school shim for old browsers\n\t  module.exports = function inherits (ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    var TempCtor = function () {}\n\t    TempCtor.prototype = superCtor.prototype\n\t    ctor.prototype = new TempCtor()\n\t    ctor.prototype.constructor = ctor\n\t  }\n  }\n}, {}],\n5: [function (require, module, exports) {\n  var wordWrap = require('word-wrapper')\n  var xtend = require('xtend')\n  var findChar = require('indexof-property')('id')\n  var number = require('as-number')\n\n  var X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z']\n  var M_WIDTHS = ['m', 'w']\n  var CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n\n  var TAB_ID = '\\t'.charCodeAt(0)\n  var SPACE_ID = ' '.charCodeAt(0)\n  var ALIGN_LEFT = 0,\n\t    ALIGN_CENTER = 1,\n\t    ALIGN_RIGHT = 2\n\n  module.exports = function createLayout (opt) {\n\t  return new TextLayout(opt)\n  }\n\n  function TextLayout (opt) {\n\t  this.glyphs = []\n\t  this._measure = this.computeMetrics.bind(this)\n\t  this.update(opt)\n  }\n\n  TextLayout.prototype.update = function (opt) {\n\t  opt = xtend({\n\t    measure: this._measure\n\t  }, opt)\n\t  this._opt = opt\n\t  this._opt.tabSize = number(this._opt.tabSize, 4)\n\n\t  if (!opt.font) { throw new Error('must provide a valid bitmap font') }\n\n\t  var glyphs = this.glyphs\n\t  var text = opt.text || ''\n\t  var font = opt.font\n\t  this._setupSpaceGlyphs(font)\n\n\t  var lines = wordWrap.lines(text, opt)\n\t  var minWidth = opt.width || 0\n\n\t  // clear glyphs\n\t  glyphs.length = 0\n\n\t  // get max line width\n\t  var maxLineWidth = lines.reduce(function (prev, line) {\n\t    return Math.max(prev, line.width, minWidth)\n\t  }, 0)\n\n\t  // the pen position\n\t  var x = 0\n\t  var y = 0\n\t  var lineHeight = number(opt.lineHeight, font.common.lineHeight)\n\t  var baseline = font.common.base\n\t  var descender = lineHeight - baseline\n\t  var letterSpacing = opt.letterSpacing || 0\n\t  var height = lineHeight * lines.length - descender\n\t  var align = getAlignType(this._opt.align)\n\n\t  // draw text along baseline\n\t  y -= height\n\n\t  // the metrics for this text layout\n\t  this._width = maxLineWidth\n\t  this._height = height\n\t  this._descender = lineHeight - baseline\n\t  this._baseline = baseline\n\t  this._xHeight = getXHeight(font)\n\t  this._capHeight = getCapHeight(font)\n\t  this._lineHeight = lineHeight\n\t  this._ascender = lineHeight - descender - this._xHeight\n\n\t  // layout each glyph\n\t  var self = this\n\t  lines.forEach(function (line, lineIndex) {\n\t    var start = line.start\n\t    var end = line.end\n\t    var lineWidth = line.width\n\t    var lastGlyph\n\n\t    // for each glyph in that line...\n\t    for (var i = start; i < end; i++) {\n\t      var id = text.charCodeAt(i)\n\t      var glyph = self.getGlyph(font, id)\n\t      if (glyph) {\n\t        if (lastGlyph) { x += getKerning(font, lastGlyph.id, glyph.id) }\n\n\t        var tx = x\n\t        if (align === ALIGN_CENTER) { tx += (maxLineWidth - lineWidth) / 2 } else if (align === ALIGN_RIGHT) { tx += (maxLineWidth - lineWidth) }\n\n\t        glyphs.push({\n\t          position: [tx, y],\n\t          data: glyph,\n\t          index: i,\n\t          line: lineIndex\n\t        })\n\n\t        // move pen forward\n\t        x += glyph.xadvance + letterSpacing\n\t        lastGlyph = glyph\n\t      }\n\t    }\n\n\t    // next line down\n\t    y += lineHeight\n\t    x = 0\n\t  })\n\t  this._linesTotal = lines.length\n  }\n\n  TextLayout.prototype._setupSpaceGlyphs = function (font) {\n\t  // These are fallbacks, when the font doesn't include\n\t  // ' ' or '\\t' glyphs\n\t  this._fallbackSpaceGlyph = null\n\t  this._fallbackTabGlyph = null\n\n\t  if (!font.chars || font.chars.length === 0) { return }\n\n\t  // try to get space glyph\n\t  // then fall back to the 'm' or 'w' glyphs\n\t  // then fall back to the first glyph available\n\t  var space = getGlyphById(font, SPACE_ID) ||\n\t          getMGlyph(font) ||\n\t          font.chars[0]\n\n\t  // and create a fallback for tab\n\t  var tabWidth = this._opt.tabSize * space.xadvance\n\t  this._fallbackSpaceGlyph = space\n\t  this._fallbackTabGlyph = xtend(space, {\n\t    x: 0,\n      y: 0,\n      xadvance: tabWidth,\n      id: TAB_ID,\n\t    xoffset: 0,\n      yoffset: 0,\n      width: 0,\n      height: 0\n\t  })\n  }\n\n  TextLayout.prototype.getGlyph = function (font, id) {\n\t  var glyph = getGlyphById(font, id)\n\t  if (glyph) { return glyph } else if (id === TAB_ID) { return this._fallbackTabGlyph } else if (id === SPACE_ID) { return this._fallbackSpaceGlyph }\n\t  return null\n  }\n\n  TextLayout.prototype.computeMetrics = function (text, start, end, width) {\n\t  var letterSpacing = this._opt.letterSpacing || 0\n\t  var font = this._opt.font\n\t  var curPen = 0\n\t  var curWidth = 0\n\t  var count = 0\n\t  var glyph\n\t  var lastGlyph\n\n\t  if (!font.chars || font.chars.length === 0) {\n\t    return {\n\t      start: start,\n\t      end: start,\n\t      width: 0\n\t    }\n\t  }\n\n\t  end = Math.min(text.length, end)\n\t  for (var i = start; i < end; i++) {\n\t    var id = text.charCodeAt(i)\n\t    var glyph = this.getGlyph(font, id)\n\n\t    if (glyph) {\n\t      // move pen forward\n\t      var xoff = glyph.xoffset\n\t      var kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0\n\t      curPen += kern\n\n\t      var nextPen = curPen + glyph.xadvance + letterSpacing\n\t      var nextWidth = curPen + glyph.width\n\n\t      // we've hit our limit; we can't move onto the next glyph\n\t      if (nextWidth >= width || nextPen >= width) { break }\n\n\t      // otherwise continue along our line\n\t      curPen = nextPen\n\t      curWidth = nextWidth\n\t      lastGlyph = glyph\n\t    }\n\t    count++\n\t  }\n\n\t  // make sure rightmost edge lines up with rendered glyphs\n\t  if (lastGlyph) { curWidth += lastGlyph.xoffset }\n\n\t  return {\n\t    start: start,\n\t    end: start + count,\n\t    width: curWidth\n\t  }\n  }\n\n  // getters for the private vars\n  ;['width', 'height',\n\t  'descender', 'ascender',\n\t  'xHeight', 'baseline',\n\t  'capHeight',\n\t  'lineHeight' ].forEach(addGetter)\n\n  function addGetter (name) {\n\t  Object.defineProperty(TextLayout.prototype, name, {\n\t    get: wrapper(name),\n\t    configurable: true\n\t  })\n  }\n\n  // create lookups for private vars\n  function wrapper (name) {\n\t  return (new Function([\n\t    'return function ' + name + '() {',\n\t    '  return this._' + name,\n\t    '}'\n\t  ].join('\\n')))()\n  }\n\n  function getGlyphById (font, id) {\n\t  if (!font.chars || font.chars.length === 0) { return null }\n\n\t  var glyphIdx = findChar(font.chars, id)\n\t  if (glyphIdx >= 0) { return font.chars[glyphIdx] }\n\t  return null\n  }\n\n  function getXHeight (font) {\n\t  for (var i = 0; i < X_HEIGHTS.length; i++) {\n\t    var id = X_HEIGHTS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) { return font.chars[idx].height }\n\t  }\n\t  return 0\n  }\n\n  function getMGlyph (font) {\n\t  for (var i = 0; i < M_WIDTHS.length; i++) {\n\t    var id = M_WIDTHS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) { return font.chars[idx] }\n\t  }\n\t  return 0\n  }\n\n  function getCapHeight (font) {\n\t  for (var i = 0; i < CAP_HEIGHTS.length; i++) {\n\t    var id = CAP_HEIGHTS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) { return font.chars[idx].height }\n\t  }\n\t  return 0\n  }\n\n  function getKerning (font, left, right) {\n\t  if (!font.kernings || font.kernings.length === 0) { return 0 }\n\n\t  var table = font.kernings\n\t  for (var i = 0; i < table.length; i++) {\n\t    var kern = table[i]\n\t    if (kern.first === left && kern.second === right) { return kern.amount }\n\t  }\n\t  return 0\n  }\n\n  function getAlignType (align) {\n\t  if (align === 'center') { return ALIGN_CENTER } else if (align === 'right') { return ALIGN_RIGHT }\n\t  return ALIGN_LEFT\n  }\n}, {'as-number': 6, 'indexof-property': 7, 'word-wrapper': 8, 'xtend': 9}],\n6: [function (require, module, exports) {\n  module.exports = function numtype (num, def) {\n\t  return typeof num === 'number'\n\t    ? num\n\t    : (typeof def === 'number' ? def : 0)\n  }\n}, {}],\n7: [function (require, module, exports) {\n  module.exports = function compile (property) {\n\t  if (!property || typeof property !== 'string') { throw new Error('must specify property for indexof search') }\n\n\t  return new Function('array', 'value', 'start', [\n\t    'start = start || 0',\n\t    'for (var i=start; i<array.length; i++)',\n\t    '  if (array[i][\"' + property + '\"] === value)',\n\t    '      return i',\n\t    'return -1'\n\t  ].join('\\n'))\n  }\n}, {}],\n8: [function (require, module, exports) {\n  var newline = /\\n/\n  var newlineChar = '\\n'\n  var whitespace = /\\s/\n\n  module.exports = function (text, opt) {\n\t    var lines = module.exports.lines(text, opt)\n\t    return lines.map(function (line) {\n\t        return text.substring(line.start, line.end)\n\t    }).join('\\n')\n  }\n\n  module.exports.lines = function wordwrap (text, opt) {\n\t    opt = opt || {}\n\n\t    // zero width results in nothing visible\n\t    if (opt.width === 0 && opt.mode !== 'nowrap') { return [] }\n\n\t    text = text || ''\n\t    var width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE\n\t    var start = Math.max(0, opt.start || 0)\n\t    var end = typeof opt.end === 'number' ? opt.end : text.length\n\t    var mode = opt.mode\n\n\t    var measure = opt.measure || monospace\n\t    if (mode === 'pre') { return pre(measure, text, start, end, width) } else { return greedy(measure, text, start, end, width, mode) }\n  }\n\n  function idxOf (text, chr, start, end) {\n\t    var idx = text.indexOf(chr, start)\n\t    if (idx === -1 || idx > end) { return end }\n\t    return idx\n  }\n\n  function isWhitespace (chr) {\n\t    return whitespace.test(chr)\n  }\n\n  function pre (measure, text, start, end, width) {\n\t    var lines = []\n\t    var lineStart = start\n\t    for (var i = start; i < end && i < text.length; i++) {\n\t        var chr = text.charAt(i)\n\t        var isNewline = newline.test(chr)\n\n\t        // If we've reached a newline, then step down a line\n\t        // Or if we've reached the EOF\n\t        if (isNewline || i === end - 1) {\n\t            var lineEnd = isNewline ? i : i + 1\n\t            var measured = measure(text, lineStart, lineEnd, width)\n\t            lines.push(measured)\n\n\t            lineStart = i + 1\n\t        }\n\t    }\n\t    return lines\n  }\n\n  function greedy (measure, text, start, end, width, mode) {\n\t    // A greedy word wrapper based on LibGDX algorithm\n\t    // https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/BitmapFontCache.java\n\t    var lines = []\n\n\t    var testWidth = width\n\t    // if 'nowrap' is specified, we only wrap on newline chars\n\t    if (mode === 'nowrap') { testWidth = Number.MAX_VALUE }\n\n\t    while (start < end && start < text.length) {\n\t        // get next newline position\n\t        var newLine = idxOf(text, newlineChar, start, end)\n\n\t        // eat whitespace at start of line\n\t        while (start < newLine) {\n\t            if (!isWhitespace(text.charAt(start))) { break }\n\t            start++\n\t        }\n\n\t        // determine visible # of glyphs for the available width\n\t        var measured = measure(text, start, newLine, testWidth)\n\n\t        var lineEnd = start + (measured.end - measured.start)\n\t        var nextStart = lineEnd + newlineChar.length\n\n\t        // if we had to cut the line before the next newline...\n\t        if (lineEnd < newLine) {\n\t            // find char to break on\n\t            while (lineEnd > start) {\n\t                if (isWhitespace(text.charAt(lineEnd))) { break }\n\t                lineEnd--\n\t            }\n\t            if (lineEnd === start) {\n\t                if (nextStart > start + newlineChar.length) nextStart--\n\t                lineEnd = nextStart // If no characters to break, show all.\n\t            } else {\n\t                nextStart = lineEnd\n\t                // eat whitespace at end of line\n\t                while (lineEnd > start) {\n\t                    if (!isWhitespace(text.charAt(lineEnd - newlineChar.length))) { break }\n\t                    lineEnd--\n\t                }\n\t            }\n\t        }\n\t        if (lineEnd >= start) {\n\t            var result = measure(text, start, lineEnd, testWidth)\n\t            lines.push(result)\n\t        }\n\t        start = nextStart\n\t    }\n\t    return lines\n  }\n\n  // determines the visible number of glyphs within a given width\n  function monospace (text, start, end, width) {\n\t    var glyphs = Math.min(width, end - start)\n\t    return {\n\t        start: start,\n\t        end: start + glyphs\n\t    }\n  }\n}, {}],\n9: [function (require, module, exports) {\n  module.exports = extend\n\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n\n  function extend () {\n\t    var target = {}\n\n\t    for (var i = 0; i < arguments.length; i++) {\n\t        var source = arguments[i]\n\n\t        for (var key in source) {\n\t            if (hasOwnProperty.call(source, key)) {\n\t                target[key] = source[key]\n\t            }\n\t        }\n\t    }\n\n\t    return target\n  }\n}, {}],\n10: [function (require, module, exports) {\n  (function (Buffer) {\n    var xhr = require('xhr')\n    var noop = function () {}\n    var parseASCII = require('parse-bmfont-ascii')\n    var parseXML = require('parse-bmfont-xml')\n    var readBinary = require('parse-bmfont-binary')\n    var isBinaryFormat = require('./lib/is-binary')\n    var xtend = require('xtend')\n\n    var xml2 = (function hasXML2 () {\n\t  return window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()\n    })()\n\n    module.exports = function (opt, cb) {\n\t  cb = typeof cb === 'function' ? cb : noop\n\n\t  if (typeof opt === 'string') { opt = { uri: opt } } else if (!opt) { opt = {} }\n\n\t  var expectBinary = opt.binary\n\t  if (expectBinary) { opt = getBinaryOpts(opt) }\n\n\t  xhr(opt, function (err, res, body) {\n\t    if (err) { return cb(err) }\n\t    if (!/^2/.test(res.statusCode)) { return cb(new Error('http status code: ' + res.statusCode)) }\n\t    if (!body) { return cb(new Error('no body result')) }\n\n\t    var binary = false\n\n\t    // if the response type is an array buffer,\n\t    // we need to convert it into a regular Buffer object\n\t    if (isArrayBuffer(body)) {\n\t      var array = new Uint8Array(body)\n\t      body = new Buffer(array, 'binary')\n\t    }\n\n\t    // now check the string/Buffer response\n\t    // and see if it has a binary BMF header\n\t    if (isBinaryFormat(body)) {\n\t      binary = true\n\t      // if we have a string, turn it into a Buffer\n\t      if (typeof body === 'string') { body = new Buffer(body, 'binary') }\n\t    }\n\n\t    // we are not parsing a binary format, just ASCII/XML/etc\n\t    if (!binary) {\n\t      // might still be a buffer if responseType is 'arraybuffer'\n\t      if (Buffer.isBuffer(body)) { body = body.toString(opt.encoding) }\n\t      body = body.trim()\n\t    }\n\n\t    var result\n\t    try {\n\t      var type = res.headers['content-type']\n\t      if (binary) { result = readBinary(body) } else if (/json/.test(type) || body.charAt(0) === '{') { result = JSON.parse(body) } else if (/xml/.test(type) || body.charAt(0) === '<') { result = parseXML(body) } else { result = parseASCII(body) }\n\t    } catch (e) {\n\t      cb(new Error('error parsing font ' + e.message))\n\t      cb = noop\n\t    }\n\t    cb(null, result)\n\t  })\n    }\n\n    function isArrayBuffer (arr) {\n\t  var str = Object.prototype.toString\n\t  return str.call(arr) === '[object ArrayBuffer]'\n    }\n\n    function getBinaryOpts (opt) {\n\t  // IE10+ and other modern browsers support array buffers\n\t  if (xml2) { return xtend(opt, { responseType: 'arraybuffer' }) }\n\n\t  if (typeof window.XMLHttpRequest === 'undefined') { throw new Error('your browser does not support XHR loading') }\n\n\t  // IE9 and XML1 browsers could still use an override\n\t  var req = new window.XMLHttpRequest()\n\t  req.overrideMimeType('text/plain; charset=x-user-defined')\n\t  return xtend({\n\t    xhr: req\n\t  }, opt)\n    }\n  }).call(this, require('buffer').Buffer)\n}, {'./lib/is-binary': 11, 'buffer': 37, 'parse-bmfont-ascii': 13, 'parse-bmfont-binary': 14, 'parse-bmfont-xml': 15, 'xhr': 18, 'xtend': 25}],\n11: [function (require, module, exports) {\n  (function (Buffer) {\n    var equal = require('buffer-equal')\n    var HEADER = new Buffer([66, 77, 70, 3])\n\n    module.exports = function (buf) {\n\t  if (typeof buf === 'string') { return buf.substring(0, 3) === 'BMF' }\n\t  return buf.length > 4 && equal(buf.slice(0, 4), HEADER)\n    }\n  }).call(this, require('buffer').Buffer)\n}, {'buffer': 37, 'buffer-equal': 12}],\n12: [function (require, module, exports) {\n  var Buffer = require('buffer').Buffer // for use with browserify\n\n  module.exports = function (a, b) {\n\t    if (!Buffer.isBuffer(a)) return undefined\n\t    if (!Buffer.isBuffer(b)) return undefined\n\t    if (typeof a.equals === 'function') return a.equals(b)\n\t    if (a.length !== b.length) return false\n\n\t    for (var i = 0; i < a.length; i++) {\n\t        if (a[i] !== b[i]) return false\n\t    }\n\n\t    return true\n  }\n}, {'buffer': 37}],\n13: [function (require, module, exports) {\n  module.exports = function parseBMFontAscii (data) {\n\t  if (!data) { throw new Error('no data provided') }\n\t  data = data.toString().trim()\n\n\t  var output = {\n\t    pages: [],\n\t    chars: [],\n\t    kernings: []\n\t  }\n\n\t  var lines = data.split(/\\r\\n?|\\n/g)\n\n\t  if (lines.length === 0) { throw new Error('no data in BMFont file') }\n\n\t  for (var i = 0; i < lines.length; i++) {\n\t    var lineData = splitLine(lines[i], i)\n\t    if (!lineData) // skip empty lines\n\t      { continue }\n\n\t    if (lineData.key === 'page') {\n\t      if (typeof lineData.data.id !== 'number') { throw new Error('malformed file at line ' + i + ' -- needs page id=N') }\n\t      if (typeof lineData.data.file !== 'string') { throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"') }\n\t      output.pages[lineData.data.id] = lineData.data.file\n\t    } else if (lineData.key === 'chars' || lineData.key === 'kernings') {\n\t      // ... do nothing for these two ...\n\t    } else if (lineData.key === 'char') {\n\t      output.chars.push(lineData.data)\n\t    } else if (lineData.key === 'kerning') {\n\t      output.kernings.push(lineData.data)\n\t    } else {\n\t      output[lineData.key] = lineData.data\n\t    }\n\t  }\n\n\t  return output\n  }\n\n  function splitLine (line, idx) {\n\t  line = line.replace(/\\t+/g, ' ').trim()\n\t  if (!line) { return null }\n\n\t  var space = line.indexOf(' ')\n\t  if (space === -1) { throw new Error('no named row at line ' + idx) }\n\n\t  var key = line.substring(0, space)\n\n\t  line = line.substring(space + 1)\n\t  // clear \"letter\" field as it is non-standard and\n\t  // requires additional complexity to parse \" / = symbols\n\t  line = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '')\n\t  line = line.split('=')\n\t  line = line.map(function (str) {\n\t    return str.trim().match((/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g))\n\t  })\n\n\t  var data = []\n\t  for (var i = 0; i < line.length; i++) {\n\t    var dt = line[i]\n\t    if (i === 0) {\n\t      data.push({\n\t        key: dt[0],\n\t        data: ''\n\t      })\n\t    } else if (i === line.length - 1) {\n\t      data[data.length - 1].data = parseData(dt[0])\n\t    } else {\n\t      data[data.length - 1].data = parseData(dt[0])\n\t      data.push({\n\t        key: dt[1],\n\t        data: ''\n\t      })\n\t    }\n\t  }\n\n\t  var out = {\n\t    key: key,\n\t    data: {}\n\t  }\n\n\t  data.forEach(function (v) {\n\t    out.data[v.key] = v.data\n\t  })\n\n\t  return out\n  }\n\n  function parseData (data) {\n\t  if (!data || data.length === 0) { return '' }\n\n\t  if (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0) { return data.substring(1, data.length - 1) }\n\t  if (data.indexOf(',') !== -1) { return parseIntList(data) }\n\t  return parseInt(data, 10)\n  }\n\n  function parseIntList (data) {\n\t  return data.split(',').map(function (val) {\n\t    return parseInt(val, 10)\n\t  })\n  }\n}, {}],\n14: [function (require, module, exports) {\n  var HEADER = [66, 77, 70]\n\n  module.exports = function readBMFontBinary (buf) {\n\t  if (buf.length < 6) { throw new Error('invalid buffer length for BMFont') }\n\n\t  var header = HEADER.every(function (byte, i) {\n\t    return buf.readUInt8(i) === byte\n\t  })\n\n\t  if (!header) { throw new Error('BMFont missing BMF byte header') }\n\n\t  var i = 3\n\t  var vers = buf.readUInt8(i++)\n\t  if (vers > 3) { throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)') }\n\n\t  var target = { kernings: [], chars: [] }\n\t  for (var b = 0; b < 5; b++) { i += readBlock(target, buf, i) }\n\t  return target\n  }\n\n  function readBlock (target, buf, i) {\n\t  if (i > buf.length - 1) { return 0 }\n\n\t  var blockID = buf.readUInt8(i++)\n\t  var blockSize = buf.readInt32LE(i)\n\t  i += 4\n\n\t  switch (blockID) {\n\t    case 1:\n\t      target.info = readInfo(buf, i)\n\t      break\n\t    case 2:\n\t      target.common = readCommon(buf, i)\n\t      break\n\t    case 3:\n\t      target.pages = readPages(buf, i, blockSize)\n\t      break\n\t    case 4:\n\t      target.chars = readChars(buf, i, blockSize)\n\t      break\n\t    case 5:\n\t      target.kernings = readKernings(buf, i, blockSize)\n\t      break\n\t  }\n\t  return 5 + blockSize\n  }\n\n  function readInfo (buf, i) {\n\t  var info = {}\n\t  info.size = buf.readInt16LE(i)\n\n\t  var bitField = buf.readUInt8(i + 2)\n\t  info.smooth = (bitField >> 7) & 1\n\t  info.unicode = (bitField >> 6) & 1\n\t  info.italic = (bitField >> 5) & 1\n\t  info.bold = (bitField >> 4) & 1\n\n\t  // fixedHeight is only mentioned in binary spec\n\t  if ((bitField >> 3) & 1) { info.fixedHeight = 1 }\n\n\t  info.charset = buf.readUInt8(i + 3) || ''\n\t  info.stretchH = buf.readUInt16LE(i + 4)\n\t  info.aa = buf.readUInt8(i + 6)\n\t  info.padding = [\n\t    buf.readInt8(i + 7),\n\t    buf.readInt8(i + 8),\n\t    buf.readInt8(i + 9),\n\t    buf.readInt8(i + 10)\n\t  ]\n\t  info.spacing = [\n\t    buf.readInt8(i + 11),\n\t    buf.readInt8(i + 12)\n\t  ]\n\t  info.outline = buf.readUInt8(i + 13)\n\t  info.face = readStringNT(buf, i + 14)\n\t  return info\n  }\n\n  function readCommon (buf, i) {\n\t  var common = {}\n\t  common.lineHeight = buf.readUInt16LE(i)\n\t  common.base = buf.readUInt16LE(i + 2)\n\t  common.scaleW = buf.readUInt16LE(i + 4)\n\t  common.scaleH = buf.readUInt16LE(i + 6)\n\t  common.pages = buf.readUInt16LE(i + 8)\n\t  var bitField = buf.readUInt8(i + 10)\n\t  common.packed = 0\n\t  common.alphaChnl = buf.readUInt8(i + 11)\n\t  common.redChnl = buf.readUInt8(i + 12)\n\t  common.greenChnl = buf.readUInt8(i + 13)\n\t  common.blueChnl = buf.readUInt8(i + 14)\n\t  return common\n  }\n\n  function readPages (buf, i, size) {\n\t  var pages = []\n\t  var text = readNameNT(buf, i)\n\t  var len = text.length + 1\n\t  var count = size / len\n\t  for (var c = 0; c < count; c++) {\n\t    pages[c] = buf.slice(i, i + text.length).toString('utf8')\n\t    i += len\n\t  }\n\t  return pages\n  }\n\n  function readChars (buf, i, blockSize) {\n\t  var chars = []\n\n\t  var count = blockSize / 20\n\t  for (var c = 0; c < count; c++) {\n\t    var char = {}\n\t    var off = c * 20\n\t    char.id = buf.readUInt32LE(i + 0 + off)\n\t    char.x = buf.readUInt16LE(i + 4 + off)\n\t    char.y = buf.readUInt16LE(i + 6 + off)\n\t    char.width = buf.readUInt16LE(i + 8 + off)\n\t    char.height = buf.readUInt16LE(i + 10 + off)\n\t    char.xoffset = buf.readInt16LE(i + 12 + off)\n\t    char.yoffset = buf.readInt16LE(i + 14 + off)\n\t    char.xadvance = buf.readInt16LE(i + 16 + off)\n\t    char.page = buf.readUInt8(i + 18 + off)\n\t    char.chnl = buf.readUInt8(i + 19 + off)\n\t    chars[c] = char\n\t  }\n\t  return chars\n  }\n\n  function readKernings (buf, i, blockSize) {\n\t  var kernings = []\n\t  var count = blockSize / 10\n\t  for (var c = 0; c < count; c++) {\n\t    var kern = {}\n\t    var off = c * 10\n\t    kern.first = buf.readUInt32LE(i + 0 + off)\n\t    kern.second = buf.readUInt32LE(i + 4 + off)\n\t    kern.amount = buf.readInt16LE(i + 8 + off)\n\t    kernings[c] = kern\n\t  }\n\t  return kernings\n  }\n\n  function readNameNT (buf, offset) {\n\t  var pos = offset\n\t  for (; pos < buf.length; pos++) {\n\t    if (buf[pos] === 0x00) { break }\n\t  }\n\t  return buf.slice(offset, pos)\n  }\n\n  function readStringNT (buf, offset) {\n\t  return readNameNT(buf, offset).toString('utf8')\n  }\n}, {}],\n15: [function (require, module, exports) {\n  var parseAttributes = require('./parse-attribs')\n  var parseFromString = require('xml-parse-from-string')\n\n  // In some cases element.attribute.nodeName can return\n  // all lowercase values.. so we need to map them to the correct\n  // case\n  var NAME_MAP = {\n\t  scaleh: 'scaleH',\n\t  scalew: 'scaleW',\n\t  stretchh: 'stretchH',\n\t  lineheight: 'lineHeight',\n\t  alphachnl: 'alphaChnl',\n\t  redchnl: 'redChnl',\n\t  greenchnl: 'greenChnl',\n\t  bluechnl: 'blueChnl'\n  }\n\n  module.exports = function parse (data) {\n\t  data = data.toString()\n\n\t  var xmlRoot = parseFromString(data)\n\t  var output = {\n\t    pages: [],\n\t    chars: [],\n\t    kernings: []\n\t  }\n\n\t  // get config settings\n\t  ;['info', 'common'].forEach(function (key) {\n\t    var element = xmlRoot.getElementsByTagName(key)[0]\n\t    if (element) { output[key] = parseAttributes(getAttribs(element)) }\n\t  })\n\n\t  // get page info\n\t  var pageRoot = xmlRoot.getElementsByTagName('pages')[0]\n\t  if (!pageRoot) { throw new Error('malformed file -- no <pages> element') }\n\t  var pages = pageRoot.getElementsByTagName('page')\n\t  for (var i = 0; i < pages.length; i++) {\n\t    var p = pages[i]\n\t    var id = parseInt(p.getAttribute('id'), 10)\n\t    var file = p.getAttribute('file')\n\t    if (isNaN(id)) { throw new Error('malformed file -- page \"id\" attribute is NaN') }\n\t    if (!file) { throw new Error('malformed file -- needs page \"file\" attribute') }\n\t    output.pages[parseInt(id, 10)] = file\n\t  }\n\n\t  // get kernings / chars\n\t  ['chars', 'kernings'].forEach(function (key) {\n\t    var element = xmlRoot.getElementsByTagName(key)[0]\n\t    if (!element) { return }\n\t    var childTag = key.substring(0, key.length - 1)\n\t    var children = element.getElementsByTagName(childTag)\n\t    for (var i = 0; i < children.length; i++) {\n\t      var child = children[i]\n\t      output[key].push(parseAttributes(getAttribs(child)))\n\t    }\n\t  })\n\t  return output\n  }\n\n  function getAttribs (element) {\n\t  var attribs = getAttribList(element)\n\t  return attribs.reduce(function (dict, attrib) {\n\t    var key = mapName(attrib.nodeName)\n\t    dict[key] = attrib.nodeValue\n\t    return dict\n\t  }, {})\n  }\n\n  function getAttribList (element) {\n\t  // IE8+ and modern browsers\n\t  var attribs = []\n\t  for (var i = 0; i < element.attributes.length; i++) { attribs.push(element.attributes[i]) }\n\t  return attribs\n  }\n\n  function mapName (nodeName) {\n\t  return NAME_MAP[nodeName.toLowerCase()] || nodeName\n  }\n}, {'./parse-attribs': 16, 'xml-parse-from-string': 17}],\n16: [function (require, module, exports) {\n  // Some versions of GlyphDesigner have a typo\n  // that causes some bugs with parsing.\n  // Need to confirm with recent version of the software\n  // to see whether this is still an issue or not.\n  var GLYPH_DESIGNER_ERROR = 'chasrset'\n\n  module.exports = function parseAttributes (obj) {\n\t  if (GLYPH_DESIGNER_ERROR in obj) {\n\t    obj['charset'] = obj[GLYPH_DESIGNER_ERROR]\n\t    delete obj[GLYPH_DESIGNER_ERROR]\n\t  }\n\n\t  for (var k in obj) {\n\t    if (k === 'face' || k === 'charset') { continue } else if (k === 'padding' || k === 'spacing') { obj[k] = parseIntList(obj[k]) } else { obj[k] = parseInt(obj[k], 10) }\n\t  }\n\t  return obj\n  }\n\n  function parseIntList (data) {\n\t  return data.split(',').map(function (val) {\n\t    return parseInt(val, 10)\n\t  })\n  }\n}, {}],\n17: [function (require, module, exports) {\n  module.exports = (function xmlparser () {\n\t  // common browsers\n\t  if (typeof window.DOMParser !== 'undefined') {\n\t    return function (str) {\n\t      var parser = new window.DOMParser()\n\t      return parser.parseFromString(str, 'application/xml')\n\t    }\n\t  }\n\n\t  // IE8 fallback\n\t  if (typeof window.ActiveXObject !== 'undefined' &&\n\t      new window.ActiveXObject('Microsoft.XMLDOM')) {\n\t    return function (str) {\n\t      var xmlDoc = new window.ActiveXObject('Microsoft.XMLDOM')\n\t      xmlDoc.async = 'false'\n\t      xmlDoc.loadXML(str)\n\t      return xmlDoc\n\t    }\n\t  }\n\n\t  // last resort fallback\n\t  return function (str) {\n\t    var div = document.createElement('div')\n\t    div.innerHTML = str\n\t    return div\n\t  }\n  })()\n}, {}],\n18: [function (require, module, exports) {\n  'use strict'\n  var window = require('global/window')\n  var once = require('once')\n  var isFunction = require('is-function')\n  var parseHeaders = require('parse-headers')\n  var xtend = require('xtend')\n\n  module.exports = createXHR\n  createXHR.XMLHttpRequest = window.XMLHttpRequest || noop\n  createXHR.XDomainRequest = 'withCredentials' in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\n  forEachArray(['get', 'put', 'post', 'patch', 'head', 'delete'], function (method) {\n\t    createXHR[method === 'delete' ? 'del' : method] = function (uri, options, callback) {\n\t        options = initParams(uri, options, callback)\n\t        options.method = method.toUpperCase()\n\t        return _createXHR(options)\n\t    }\n  })\n\n  function forEachArray (array, iterator) {\n\t    for (var i = 0; i < array.length; i++) {\n\t        iterator(array[i])\n\t    }\n  }\n\n  function isEmpty (obj) {\n\t    for (var i in obj) {\n\t        if (obj.hasOwnProperty(i)) return false\n\t    }\n\t    return true\n  }\n\n  function initParams (uri, options, callback) {\n\t    var params = uri\n\n\t    if (isFunction(options)) {\n\t        callback = options\n\t        if (typeof uri === 'string') {\n\t            params = {uri: uri}\n\t        }\n\t    } else {\n\t        params = xtend(options, {uri: uri})\n\t    }\n\n\t    params.callback = callback\n\t    return params\n  }\n\n  function createXHR (uri, options, callback) {\n\t    options = initParams(uri, options, callback)\n\t    return _createXHR(options)\n  }\n\n  function _createXHR (options) {\n\t    var callback = options.callback\n\t    if (typeof callback === 'undefined') {\n\t        throw new Error('callback argument missing')\n\t    }\n\t    callback = once(callback)\n\n\t    function readystatechange () {\n\t        if (xhr.readyState === 4) {\n\t            loadFunc()\n\t        }\n\t    }\n\n\t    function getBody () {\n\t        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n\t        var body = undefined\n\n\t        if (xhr.response) {\n\t            body = xhr.response\n\t        } else if (xhr.responseType === 'text' || !xhr.responseType) {\n\t            body = xhr.responseText || xhr.responseXML\n\t        }\n\n\t        if (isJson) {\n\t            try {\n\t                body = JSON.parse(body)\n\t            } catch (e) {}\n\t        }\n\n\t        return body\n\t    }\n\n\t    var failureResponse = {\n\t                body: undefined,\n\t                headers: {},\n\t                statusCode: 0,\n\t                method: method,\n\t                url: uri,\n\t                rawRequest: xhr\n\t            }\n\n\t    function errorFunc (evt) {\n\t        clearTimeout(timeoutTimer)\n\t        if (!(evt instanceof Error)) {\n\t            evt = new Error('' + (evt || 'Unknown XMLHttpRequest Error'))\n\t        }\n\t        evt.statusCode = 0\n\t        callback(evt, failureResponse)\n\t    }\n\n\t    // will load the data & process the response in a special response object\n\t    function loadFunc () {\n\t        if (aborted) return\n\t        var status\n\t        clearTimeout(timeoutTimer)\n\t        if (options.useXDR && xhr.status === undefined) {\n\t            // IE8 CORS GET successful response doesn't have a status field, but body is fine\n\t            status = 200\n\t        } else {\n\t            status = (xhr.status === 1223 ? 204 : xhr.status)\n\t        }\n\t        var response = failureResponse\n\t        var err = null\n\n\t        if (status !== 0) {\n\t            response = {\n\t                body: getBody(),\n\t                statusCode: status,\n\t                method: method,\n\t                headers: {},\n\t                url: uri,\n\t                rawRequest: xhr\n\t            }\n\t            if (xhr.getAllResponseHeaders) { // remember xhr can in fact be XDR for CORS in IE\n\t                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n\t            }\n\t        } else {\n\t            err = new Error('Internal XMLHttpRequest Error')\n\t        }\n\t        callback(err, response, response.body)\n\t    }\n\n\t    var xhr = options.xhr || null\n\n\t    if (!xhr) {\n\t        if (options.cors || options.useXDR) {\n\t            xhr = new createXHR.XDomainRequest()\n\t        } else {\n\t            xhr = new createXHR.XMLHttpRequest()\n\t        }\n\t    }\n\n\t    var key\n\t    var aborted\n\t    var uri = xhr.url = options.uri || options.url\n\t    var method = xhr.method = options.method || 'GET'\n\t    var body = options.body || options.data || null\n\t    var headers = xhr.headers = options.headers || {}\n\t    var sync = !!options.sync\n\t    var isJson = false\n\t    var timeoutTimer\n\n\t    if ('json' in options) {\n\t        isJson = true\n\t        headers['accept'] || headers['Accept'] || (headers['Accept'] = 'application/json') // Don't override existing accept header declared by user\n\t        if (method !== 'GET' && method !== 'HEAD') {\n\t            headers['content-type'] || headers['Content-Type'] || (headers['Content-Type'] = 'application/json') // Don't override existing accept header declared by user\n\t            body = JSON.stringify(options.json)\n\t        }\n\t    }\n\n\t    xhr.onreadystatechange = readystatechange\n\t    xhr.onload = loadFunc\n\t    xhr.onerror = errorFunc\n\t    // IE9 must have onprogress be set to a unique function.\n\t    xhr.onprogress = function () {\n\t        // IE must die\n\t    }\n\t    xhr.ontimeout = errorFunc\n\t    xhr.open(method, uri, !sync, options.username, options.password)\n\t    // has to be after open\n\t    if (!sync) {\n\t        xhr.withCredentials = !!options.withCredentials\n\t    }\n\t    // Cannot set timeout with sync request\n\t    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n\t    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n\t    if (!sync && options.timeout > 0) {\n\t        timeoutTimer = setTimeout(function () {\n\t            aborted = true// IE9 may still call readystatechange\n\t            xhr.abort('timeout')\n\t            var e = new Error('XMLHttpRequest timeout')\n\t            e.code = 'ETIMEDOUT'\n\t            errorFunc(e)\n\t        }, options.timeout)\n\t    }\n\n\t    if (xhr.setRequestHeader) {\n\t        for (key in headers) {\n\t            if (headers.hasOwnProperty(key)) {\n\t                xhr.setRequestHeader(key, headers[key])\n\t            }\n\t        }\n\t    } else if (options.headers && !isEmpty(options.headers)) {\n\t        throw new Error('Headers cannot be set on an XDomainRequest object')\n\t    }\n\n\t    if ('responseType' in options) {\n\t        xhr.responseType = options.responseType\n\t    }\n\n\t    if ('beforeSend' in options &&\n\t        typeof options.beforeSend === 'function'\n\t    ) {\n\t        options.beforeSend(xhr)\n\t    }\n\n\t    xhr.send(body)\n\n\t    return xhr\n  }\n\n  function noop () {}\n}, {'global/window': 19, 'is-function': 20, 'once': 21, 'parse-headers': 24, 'xtend': 25}],\n19: [function (require, module, exports) {\n  (function (global) {\n    if (typeof window !== 'undefined') {\n\t    module.exports = window\n    } else if (typeof global !== 'undefined') {\n\t    module.exports = global\n    } else if (typeof self !== 'undefined') {\n\t    module.exports = self\n    } else {\n\t    module.exports = {}\n    }\n  }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {})\n}, {}],\n20: [function (require, module, exports) {\n  module.exports = isFunction\n\n  var toString = Object.prototype.toString\n\n  function isFunction (fn) {\n\t  var string = toString.call(fn)\n\t  return string === '[object Function]' ||\n\t    (typeof fn === 'function' && string !== '[object RegExp]') ||\n\t    (typeof window !== 'undefined' &&\n\t     // IE8 and below\n\t     (fn === window.setTimeout ||\n\t      fn === window.alert ||\n\t      fn === window.confirm ||\n\t      fn === window.prompt))\n  }\n}, {}],\n21: [function (require, module, exports) {\n  module.exports = once\n\n  once.proto = once(function () {\n\t  Object.defineProperty(Function.prototype, 'once', {\n\t    value: function () {\n\t      return once(this)\n\t    },\n\t    configurable: true\n\t  })\n  })\n\n  function once (fn) {\n\t  var called = false\n\t  return function () {\n\t    if (called) return\n\t    called = true\n\t    return fn.apply(this, arguments)\n\t  }\n  }\n}, {}],\n22: [function (require, module, exports) {\n  var isFunction = require('is-function')\n\n  module.exports = forEach\n\n  var toString = Object.prototype.toString\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n\n  function forEach (list, iterator, context) {\n\t    if (!isFunction(iterator)) {\n\t        throw new TypeError('iterator must be a function')\n\t    }\n\n\t    if (arguments.length < 3) {\n\t        context = this\n\t    }\n\n\t    if (toString.call(list) === '[object Array]') { forEachArray(list, iterator, context) } else if (typeof list === 'string') { forEachString(list, iterator, context) } else { forEachObject(list, iterator, context) }\n  }\n\n  function forEachArray (array, iterator, context) {\n\t    for (var i = 0, len = array.length; i < len; i++) {\n\t        if (hasOwnProperty.call(array, i)) {\n\t            iterator.call(context, array[i], i, array)\n\t        }\n\t    }\n  }\n\n  function forEachString (string, iterator, context) {\n\t    for (var i = 0, len = string.length; i < len; i++) {\n\t        // no such thing as a sparse string.\n\t        iterator.call(context, string.charAt(i), i, string)\n\t    }\n  }\n\n  function forEachObject (object, iterator, context) {\n\t    for (var k in object) {\n\t        if (hasOwnProperty.call(object, k)) {\n\t            iterator.call(context, object[k], k, object)\n\t        }\n\t    }\n  }\n}, {'is-function': 20}],\n23: [function (require, module, exports) {\n  exports = module.exports = trim\n\n  function trim (str) {\n\t  return str.replace(/^\\s*|\\s*$/g, '')\n  }\n\n  exports.left = function (str) {\n\t  return str.replace(/^\\s*/, '')\n  }\n\n  exports.right = function (str) {\n\t  return str.replace(/\\s*$/, '')\n  }\n}, {}],\n24: [function (require, module, exports) {\n  var trim = require('trim'),\n\t   forEach = require('for-each'),\n\t   isArray = function (arg) {\n\t      return Object.prototype.toString.call(arg) === '[object Array]'\n\t    }\n\n  module.exports = function (headers) {\n\t  if (!headers) { return {} }\n\n\t  var result = {}\n\n\t  forEach(\n\t      trim(headers).split('\\n')\n\t    , function (row) {\n\t        var index = row.indexOf(':'),\n\t           key = trim(row.slice(0, index)).toLowerCase(),\n\t           value = trim(row.slice(index + 1))\n\n\t        if (typeof (result[key]) === 'undefined') {\n\t          result[key] = value\n\t        } else if (isArray(result[key])) {\n\t          result[key].push(value)\n\t        } else {\n\t          result[key] = [ result[key], value ]\n\t        }\n\t      }\n\t  )\n\n\t  return result\n  }\n}, {'for-each': 22, 'trim': 23}],\n25: [function (require, module, exports) {\n  arguments[4][9][0].apply(exports, arguments)\n}, {'dup': 9}],\n26: [function (require, module, exports) {\n  /* eslint-disable no-unused-vars */\n  'use strict'\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n  var propIsEnumerable = Object.prototype.propertyIsEnumerable\n\n  function toObject (val) {\n\t  if (val === null || val === undefined) {\n\t    throw new TypeError('Object.assign cannot be called with null or undefined')\n\t  }\n\n\t  return Object(val)\n  }\n\n  module.exports = Object.assign || function (target, source) {\n\t  var from\n\t  var to = toObject(target)\n\t  var symbols\n\n\t  for (var s = 1; s < arguments.length; s++) {\n\t    from = Object(arguments[s])\n\n\t    for (var key in from) {\n\t      if (hasOwnProperty.call(from, key)) {\n\t        to[key] = from[key]\n\t      }\n\t    }\n\n\t    if (Object.getOwnPropertySymbols) {\n\t      symbols = Object.getOwnPropertySymbols(from)\n\t      for (var i = 0; i < symbols.length; i++) {\n\t        if (propIsEnumerable.call(from, symbols[i])) {\n\t          to[symbols[i]] = from[symbols[i]]\n\t        }\n\t      }\n\t    }\n\t  }\n\n\t  return to\n  }\n}, {}],\n27: [function (require, module, exports) {\n  var dtype = require('dtype')\n  var anArray = require('an-array')\n  var isBuffer = require('is-buffer')\n\n  var CW = [0, 2, 3]\n  var CCW = [2, 1, 3]\n\n  module.exports = function createQuadElements (array, opt) {\n\t    // if user didn't specify an output array\n\t    if (!array || !(anArray(array) || isBuffer(array))) {\n\t        opt = array || {}\n\t        array = null\n\t    }\n\n\t    if (typeof opt === 'number') // backwards-compatible\n\t        { opt = { count: opt } } else { opt = opt || {} }\n\n\t    var type = typeof opt.type === 'string' ? opt.type : 'uint16'\n\t    var count = typeof opt.count === 'number' ? opt.count : 1\n\t    var start = (opt.start || 0)\n\n\t    var dir = opt.clockwise !== false ? CW : CCW,\n\t        a = dir[0],\n\t        b = dir[1],\n\t        c = dir[2]\n\n\t    var numIndices = count * 6\n\n\t    var indices = array || new (dtype(type))(numIndices)\n\t    for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n\t        var x = i + start\n\t        indices[x + 0] = j + 0\n\t        indices[x + 1] = j + 1\n\t        indices[x + 2] = j + 2\n\t        indices[x + 3] = j + a\n\t        indices[x + 4] = j + b\n\t        indices[x + 5] = j + c\n\t    }\n\t    return indices\n  }\n}, {'an-array': 28, 'dtype': 29, 'is-buffer': 30}],\n28: [function (require, module, exports) {\n  var str = Object.prototype.toString\n\n  module.exports = anArray\n\n  function anArray (arr) {\n\t  return (\n\t       arr.BYTES_PER_ELEMENT &&\n\t    str.call(arr.buffer) === '[object ArrayBuffer]' ||\n\t    Array.isArray(arr)\n\t  )\n  }\n}, {}],\n29: [function (require, module, exports) {\n  module.exports = function (dtype) {\n\t  switch (dtype) {\n\t    case 'int8':\n\t      return Int8Array\n\t    case 'int16':\n\t      return Int16Array\n\t    case 'int32':\n\t      return Int32Array\n\t    case 'uint8':\n\t      return Uint8Array\n\t    case 'uint16':\n\t      return Uint16Array\n\t    case 'uint32':\n\t      return Uint32Array\n\t    case 'float32':\n\t      return Float32Array\n\t    case 'float64':\n\t      return Float64Array\n\t    case 'array':\n\t      return Array\n\t    case 'uint8_clamped':\n\t      return Uint8ClampedArray\n\t  }\n  }\n}, {}],\n30: [function (require, module, exports) {\n  /**\n\t * Determine if an object is Buffer\n\t *\n\t * Author:   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * License:  MIT\n\t *\n\t * `npm install is-buffer`\n\t */\n\n  module.exports = function (obj) {\n\t  return !!(obj != null &&\n\t    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)\n\t      (obj.constructor &&\n\t      typeof obj.constructor.isBuffer === 'function' &&\n\t      obj.constructor.isBuffer(obj))\n\t    ))\n  }\n}, {}],\n31: [function (require, module, exports) {\n  var flatten = require('flatten-vertex-data')\n\n  module.exports.attr = setAttribute\n  module.exports.index = setIndex\n\n  function setIndex (geometry, data, itemSize, dtype) {\n\t  if (typeof itemSize !== 'number') itemSize = 1\n\t  if (typeof dtype !== 'number') dtype = 'uint16'\n\n\t  var isR69 = !geometry.index && typeof geometry.setIndex !== 'function'\n\t  var attrib = isR69 ? geometry.getAttribute('index') : geometry.index\n\t  var newAttrib = updateAttribute(attrib, data, itemSize, dtype)\n\t  if (newAttrib) {\n\t    if (isR69) geometry.addAttribute('index', newAttrib)\n\t    else geometry.index = newAttrib\n\t  }\n  }\n\n  function setAttribute (geometry, key, data, itemSize, dtype) {\n\t  if (typeof itemSize !== 'number') itemSize = 3\n\t  if (typeof dtype !== 'number') dtype = 'float32'\n\t  if (Array.isArray(data) &&\n\t    Array.isArray(data[0]) &&\n\t    data[0].length !== itemSize) {\n\t    throw new Error('Nested vertex array has unexpected size; expected ' +\n\t      itemSize + ' but found ' + data[0].length)\n\t  }\n\n\t  var attrib = geometry.getAttribute(key)\n\t  var newAttrib = updateAttribute(attrib, data, itemSize, dtype)\n\t  if (newAttrib) {\n\t    geometry.addAttribute(key, newAttrib)\n\t  }\n  }\n\n  function updateAttribute (attrib, data, itemSize, dtype) {\n\t  data = data || []\n\t  if (!attrib || rebuildAttribute(attrib, data, itemSize)) {\n\t    // create a new array with desired type\n\t    data = flatten(data, dtype)\n\t    attrib = new THREE.BufferAttribute(data, itemSize)\n\t    attrib.needsUpdate = true\n\t    return attrib\n\t  } else {\n\t    // copy data into the existing array\n\t    flatten(data, attrib.array)\n\t    attrib.needsUpdate = true\n\t    return null\n\t  }\n  }\n\n  // Test whether the attribute needs to be re-created,\n  // returns false if we can re-use it as-is.\n  function rebuildAttribute (attrib, data, itemSize) {\n\t  if (attrib.itemSize !== itemSize) return true\n\t  if (!attrib.array) return true\n\t  var attribLength = attrib.array.length\n\t  if (Array.isArray(data) && Array.isArray(data[0])) {\n\t    // [ [ x, y, z ] ]\n\t    return attribLength !== data.length * itemSize\n\t  } else {\n\t    // [ x, y, z ]\n\t    return attribLength !== data.length\n\t  }\n  }\n}, {'flatten-vertex-data': 32}],\n32: [function (require, module, exports) {\n  /* eslint new-cap:0 */\n  var dtype = require('dtype')\n  module.exports = flattenVertexData\n  function flattenVertexData (data, output, offset) {\n\t  if (!data) throw new TypeError('must specify data as first parameter')\n\t  offset = +(offset || 0) | 0\n\n\t  if (Array.isArray(data) && Array.isArray(data[0])) {\n\t    var dim = data[0].length\n\t    var length = data.length * dim\n\n\t    // no output specified, create a new typed array\n\t    if (!output || typeof output === 'string') {\n\t      output = new (dtype(output || 'float32'))(length + offset)\n\t    }\n\n\t    var dstLength = output.length - offset\n\t    if (length !== dstLength) {\n\t      throw new Error('source length ' + length + ' (' + dim + 'x' + data.length + ')' +\n\t        ' does not match destination length ' + dstLength)\n\t    }\n\n\t    for (var i = 0, k = offset; i < data.length; i++) {\n\t      for (var j = 0; j < dim; j++) {\n\t        output[k++] = data[i][j]\n\t      }\n\t    }\n\t  } else {\n\t    if (!output || typeof output === 'string') {\n\t      // no output, create a new one\n\t      var Ctor = dtype(output || 'float32')\n\t      if (offset === 0) {\n\t        output = new Ctor(data)\n\t      } else {\n\t        output = new Ctor(data.length + offset)\n\t        output.set(data, offset)\n\t      }\n\t    } else {\n\t      // store output in existing array\n\t      output.set(data, offset)\n\t    }\n\t  }\n\n\t  return output\n  }\n}, {'dtype': 33}],\n33: [function (require, module, exports) {\n  arguments[4][29][0].apply(exports, arguments)\n}, {'dup': 29}],\n34: [function (require, module, exports) {\n  var assign = require('object-assign')\n\n  module.exports = function createSDFShader (opt) {\n\t  opt = opt || {}\n\t  var opacity = typeof opt.opacity === 'number' ? opt.opacity : 1\n\t  var alphaTest = typeof opt.alphaTest === 'number' ? opt.alphaTest : 0.0001\n\t  var precision = opt.precision || 'highp'\n\t  var color = opt.color\n\t  var map = opt.map\n\n\t  // remove to satisfy r73\n\t  delete opt.map\n\t  delete opt.color\n\t  delete opt.precision\n\t  delete opt.opacity\n\n\t  return assign({\n\t    uniforms: {\n\t      opacity: { type: 'f', value: opacity },\n\t      map: { type: 't', value: map || new THREE.Texture() },\n\t      color: { type: 'c', value: new THREE.Color(color) }\n\t    },\n\t    vertexShader: [\n\t      'attribute vec2 uv;',\n\t      'attribute vec4 position;',\n\t      'uniform mat4 projectionMatrix;',\n\t      'uniform mat4 modelViewMatrix;',\n\t      'varying vec2 vUv;',\n\t      'void main() {',\n\t      'vUv = uv;',\n\t      'gl_Position = projectionMatrix * modelViewMatrix * position;',\n\t      '}'\n\t    ].join('\\n'),\n\t    fragmentShader: [\n\t      '#ifdef GL_OES_standard_derivatives',\n\t      '#extension GL_OES_standard_derivatives : enable',\n\t      '#endif',\n\t      'precision ' + precision + ' float;',\n\t      'uniform float opacity;',\n\t      'uniform vec3 color;',\n\t      'uniform sampler2D map;',\n\t      'varying vec2 vUv;',\n\n\t      'float aastep(float value) {',\n\t      '  #ifdef GL_OES_standard_derivatives',\n\t      '    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;',\n\t      '  #else',\n\t      '    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));',\n\t      '  #endif',\n\t      '  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);',\n\t      '}',\n\n\t      'void main() {',\n\t      '  vec4 texColor = texture2D(map, vUv);',\n\t      '  float alpha = aastep(texColor.a);',\n\t      '  gl_FragColor = vec4(color, opacity * alpha);',\n\t      alphaTest === 0\n\t        ? ''\n\t        : '  if (gl_FragColor.a < ' + alphaTest + ') discard;',\n\t      '}'\n\t    ].join('\\n')\n\t  }, opt)\n  }\n}, {'object-assign': 26}],\n35: [function (require, module, exports) {\n  var loadFont = require('load-bmfont')\n  // global.THREE = require('three')\n\n  // A utility to load a font, then a texture\n  module.exports = function (opt, cb) {\n\t  loadFont(opt.font, function (err, font) {\n\t    if (err) throw err\n      PANOLENS.Utils.TextureLoader.load(opt.image, function (tex) {\n\t      cb(font, tex)\n\t    })\n\t  })\n  }\n}, {'load-bmfont': 10}],\n36: [function (require, module, exports) {\n  var createText = require('../')\n  var SDFShader = require('../shaders/sdf')\n\n  if (PANOLENS && PANOLENS.Utils && PANOLENS.SpriteText) {\n    PANOLENS.Utils.loadBMFont = function (fontObject, callback) {\n      require('./load')(fontObject, PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype, callback))\n    }\n    PANOLENS.SpriteText.prototype.generateTextGeometry = createText\n    PANOLENS.SpriteText.prototype.generateSDFShader = SDFShader\n  }\n}, {'../': 1, '../shaders/sdf': 34, './load': 35}],\n37: [function (require, module, exports) {\n  (function (global) {\n    /*!\n\t * The buffer module from node.js, for the browser.\n\t *\n\t * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * @license  MIT\n\t */\n    /* eslint-disable no-proto */\n\n    'use strict'\n\n    var base64 = require('base64-js')\n    var ieee754 = require('ieee754')\n    var isArray = require('isarray')\n\n    exports.Buffer = Buffer\n    exports.SlowBuffer = SlowBuffer\n    exports.INSPECT_MAX_BYTES = 50\n    Buffer.poolSize = 8192 // not used by this implementation\n\n    var rootParent = {}\n\n    /**\n\t * If `Buffer.TYPED_ARRAY_SUPPORT`:\n\t *   === true    Use Uint8Array implementation (fastest)\n\t *   === false   Use Object implementation (most compatible, even IE6)\n\t *\n\t * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n\t * Opera 11.6+, iOS 4.2+.\n\t *\n\t * Due to various browser bugs, sometimes the Object implementation will be used even\n\t * when the browser supports typed arrays.\n\t *\n\t * Note:\n\t *\n\t *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n\t *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n\t *\n\t *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n\t *\n\t *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n\t *     incorrect length in some situations.\n\n\t * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n\t * get the Object implementation, which is slower but behaves correctly.\n\t */\n    Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n\t  ? global.TYPED_ARRAY_SUPPORT\n\t  : typedArraySupport()\n\n    function typedArraySupport () {\n\t  try {\n\t    var arr = new Uint8Array(1)\n\t    arr.foo = function () { return 42 }\n\t    return arr.foo() === 42 && // typed array instances can be augmented\n\t        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n\t        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n\t  } catch (e) {\n\t    return false\n\t  }\n    }\n\n    function kMaxLength () {\n\t  return Buffer.TYPED_ARRAY_SUPPORT\n\t    ? 0x7fffffff\n\t    : 0x3fffffff\n    }\n\n    /**\n\t * Class: Buffer\n\t * =============\n\t *\n\t * The Buffer constructor returns instances of `Uint8Array` that are augmented\n\t * with function properties for all the node `Buffer` API functions. We use\n\t * `Uint8Array` so that square bracket notation works as expected -- it returns\n\t * a single octet.\n\t *\n\t * By augmenting the instances, we can avoid modifying the `Uint8Array`\n\t * prototype.\n\t */\n    function Buffer (arg) {\n\t  if (!(this instanceof Buffer)) {\n\t    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n\t    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n\t    return new Buffer(arg)\n\t  }\n\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this.length = 0\n\t    this.parent = undefined\n\t  }\n\n\t  // Common case.\n\t  if (typeof arg === 'number') {\n\t    return fromNumber(this, arg)\n\t  }\n\n\t  // Slightly less common case.\n\t  if (typeof arg === 'string') {\n\t    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n\t  }\n\n\t  // Unusual.\n\t  return fromObject(this, arg)\n    }\n\n    function fromNumber (that, length) {\n\t  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    for (var i = 0; i < length; i++) {\n\t      that[i] = 0\n\t    }\n\t  }\n\t  return that\n    }\n\n    function fromString (that, string, encoding) {\n\t  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n\t  // Assumption: byteLength() return value is always < kMaxLength.\n\t  var length = byteLength(string, encoding) | 0\n\t  that = allocate(that, length)\n\n\t  that.write(string, encoding)\n\t  return that\n    }\n\n    function fromObject (that, object) {\n\t  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n\t  if (isArray(object)) return fromArray(that, object)\n\n\t  if (object == null) {\n\t    throw new TypeError('must start with number, buffer, array or string')\n\t  }\n\n\t  if (typeof ArrayBuffer !== 'undefined') {\n\t    if (object.buffer instanceof ArrayBuffer) {\n\t      return fromTypedArray(that, object)\n\t    }\n\t    if (object instanceof ArrayBuffer) {\n\t      return fromArrayBuffer(that, object)\n\t    }\n\t  }\n\n\t  if (object.length) return fromArrayLike(that, object)\n\n\t  return fromJsonObject(that, object)\n    }\n\n    function fromBuffer (that, buffer) {\n\t  var length = checked(buffer.length) | 0\n\t  that = allocate(that, length)\n\t  buffer.copy(that, 0, 0, length)\n\t  return that\n    }\n\n    function fromArray (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    // Duplicate of fromArray() to keep fromArray() monomorphic.\n    function fromTypedArray (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  // Truncating the elements is probably not what people expect from typed\n\t  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n\t  // of the old Buffer constructor.\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    function fromArrayBuffer (that, array) {\n\t  // array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(array)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that = fromTypedArray(that, new Uint8Array(array))\n\t  }\n\t  return that\n    }\n\n    function fromArrayLike (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    // Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n    // Returns a zero-length buffer for inputs that don't conform to the spec.\n    function fromJsonObject (that, object) {\n\t  var array\n\t  var length = 0\n\n\t  if (object.type === 'Buffer' && isArray(object.data)) {\n\t    array = object.data\n\t    length = checked(array.length) | 0\n\t  }\n\t  that = allocate(that, length)\n\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t  Buffer.prototype.__proto__ = Uint8Array.prototype\n\t  Buffer.__proto__ = Uint8Array\n    } else {\n\t  // pre-set for values that may exist in the future\n\t  Buffer.prototype.length = undefined\n\t  Buffer.prototype.parent = undefined\n    }\n\n    function allocate (that, length) {\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(length)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that.length = length\n\t  }\n\n\t  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n\t  if (fromPool) that.parent = rootParent\n\n\t  return that\n    }\n\n    function checked (length) {\n\t  // Note: cannot use `length < kMaxLength` here because that fails when\n\t  // length is NaN (which is otherwise coerced to zero.)\n\t  if (length >= kMaxLength()) {\n\t    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n\t                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n\t  }\n\t  return length | 0\n    }\n\n    function SlowBuffer (subject, encoding) {\n\t  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n\t  var buf = new Buffer(subject, encoding)\n\t  delete buf.parent\n\t  return buf\n    }\n\n    Buffer.isBuffer = function isBuffer (b) {\n\t  return !!(b != null && b._isBuffer)\n    }\n\n    Buffer.compare = function compare (a, b) {\n\t  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n\t    throw new TypeError('Arguments must be Buffers')\n\t  }\n\n\t  if (a === b) return 0\n\n\t  var x = a.length\n\t  var y = b.length\n\n\t  var i = 0\n\t  var len = Math.min(x, y)\n\t  while (i < len) {\n\t    if (a[i] !== b[i]) break\n\n\t    ++i\n\t  }\n\n\t  if (i !== len) {\n\t    x = a[i]\n\t    y = b[i]\n\t  }\n\n\t  if (x < y) return -1\n\t  if (y < x) return 1\n\t  return 0\n    }\n\n    Buffer.isEncoding = function isEncoding (encoding) {\n\t  switch (String(encoding).toLowerCase()) {\n\t    case 'hex':\n\t    case 'utf8':\n\t    case 'utf-8':\n\t    case 'ascii':\n\t    case 'binary':\n\t    case 'base64':\n\t    case 'raw':\n\t    case 'ucs2':\n\t    case 'ucs-2':\n\t    case 'utf16le':\n\t    case 'utf-16le':\n\t      return true\n\t    default:\n\t      return false\n\t  }\n    }\n\n    Buffer.concat = function concat (list, length) {\n\t  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n\t  if (list.length === 0) {\n\t    return new Buffer(0)\n\t  }\n\n\t  var i\n\t  if (length === undefined) {\n\t    length = 0\n\t    for (i = 0; i < list.length; i++) {\n\t      length += list[i].length\n\t    }\n\t  }\n\n\t  var buf = new Buffer(length)\n\t  var pos = 0\n\t  for (i = 0; i < list.length; i++) {\n\t    var item = list[i]\n\t    item.copy(buf, pos)\n\t    pos += item.length\n\t  }\n\t  return buf\n    }\n\n    function byteLength (string, encoding) {\n\t  if (typeof string !== 'string') string = '' + string\n\n\t  var len = string.length\n\t  if (len === 0) return 0\n\n\t  // Use a for loop to avoid recursion\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'ascii':\n\t      case 'binary':\n\t      // Deprecated\n\t      case 'raw':\n\t      case 'raws':\n\t        return len\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8ToBytes(string).length\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return len * 2\n\t      case 'hex':\n\t        return len >>> 1\n\t      case 'base64':\n\t        return base64ToBytes(string).length\n\t      default:\n\t        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n    }\n    Buffer.byteLength = byteLength\n\n    function slowToString (encoding, start, end) {\n\t  var loweredCase = false\n\n\t  start = start | 0\n\t  end = end === undefined || end === Infinity ? this.length : end | 0\n\n\t  if (!encoding) encoding = 'utf8'\n\t  if (start < 0) start = 0\n\t  if (end > this.length) end = this.length\n\t  if (end <= start) return ''\n\n\t  while (true) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexSlice(this, start, end)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Slice(this, start, end)\n\n\t      case 'ascii':\n\t        return asciiSlice(this, start, end)\n\n\t      case 'binary':\n\t        return binarySlice(this, start, end)\n\n\t      case 'base64':\n\t        return base64Slice(this, start, end)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return utf16leSlice(this, start, end)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = (encoding + '').toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n    }\n\n    // Even though this property is private, it shouldn't be removed because it is\n    // used by `is-buffer` to detect buffer instances in Safari 5-7.\n    Buffer.prototype._isBuffer = true\n\n    Buffer.prototype.toString = function toString () {\n\t  var length = this.length | 0\n\t  if (length === 0) return ''\n\t  if (arguments.length === 0) return utf8Slice(this, 0, length)\n\t  return slowToString.apply(this, arguments)\n    }\n\n    Buffer.prototype.equals = function equals (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return true\n\t  return Buffer.compare(this, b) === 0\n    }\n\n    Buffer.prototype.inspect = function inspect () {\n\t  var str = ''\n\t  var max = exports.INSPECT_MAX_BYTES\n\t  if (this.length > 0) {\n\t    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n\t    if (this.length > max) str += ' ... '\n\t  }\n\t  return '<Buffer ' + str + '>'\n    }\n\n    Buffer.prototype.compare = function compare (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return 0\n\t  return Buffer.compare(this, b)\n    }\n\n    Buffer.prototype.indexOf = function indexOf (val, byteOffset) {\n\t  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n\t  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n\t  byteOffset >>= 0\n\n\t  if (this.length === 0) return -1\n\t  if (byteOffset >= this.length) return -1\n\n\t  // Negative offsets start from the end of the buffer\n\t  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n\t  if (typeof val === 'string') {\n\t    if (val.length === 0) return -1 // special case: looking for empty string always fails\n\t    return String.prototype.indexOf.call(this, val, byteOffset)\n\t  }\n\t  if (Buffer.isBuffer(val)) {\n\t    return arrayIndexOf(this, val, byteOffset)\n\t  }\n\t  if (typeof val === 'number') {\n\t    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n\t      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n\t    }\n\t    return arrayIndexOf(this, [ val ], byteOffset)\n\t  }\n\n\t  function arrayIndexOf (arr, val, byteOffset) {\n\t    var foundIndex = -1\n\t    for (var i = 0; byteOffset + i < arr.length; i++) {\n\t      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n\t        if (foundIndex === -1) foundIndex = i\n\t        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n\t      } else {\n\t        foundIndex = -1\n\t      }\n\t    }\n\t    return -1\n\t  }\n\n\t  throw new TypeError('val must be string, number or Buffer')\n    }\n\n    function hexWrite (buf, string, offset, length) {\n\t  offset = Number(offset) || 0\n\t  var remaining = buf.length - offset\n\t  if (!length) {\n\t    length = remaining\n\t  } else {\n\t    length = Number(length)\n\t    if (length > remaining) {\n\t      length = remaining\n\t    }\n\t  }\n\n\t  // must be an even number of digits\n\t  var strLen = string.length\n\t  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n\t  if (length > strLen / 2) {\n\t    length = strLen / 2\n\t  }\n\t  for (var i = 0; i < length; i++) {\n\t    var parsed = parseInt(string.substr(i * 2, 2), 16)\n\t    if (isNaN(parsed)) throw new Error('Invalid hex string')\n\t    buf[offset + i] = parsed\n\t  }\n\t  return i\n    }\n\n    function utf8Write (buf, string, offset, length) {\n\t  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n    }\n\n    function asciiWrite (buf, string, offset, length) {\n\t  return blitBuffer(asciiToBytes(string), buf, offset, length)\n    }\n\n    function binaryWrite (buf, string, offset, length) {\n\t  return asciiWrite(buf, string, offset, length)\n    }\n\n    function base64Write (buf, string, offset, length) {\n\t  return blitBuffer(base64ToBytes(string), buf, offset, length)\n    }\n\n    function ucs2Write (buf, string, offset, length) {\n\t  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n    }\n\n    Buffer.prototype.write = function write (string, offset, length, encoding) {\n\t  // Buffer#write(string)\n\t  if (offset === undefined) {\n\t    encoding = 'utf8'\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, encoding)\n\t  } else if (length === undefined && typeof offset === 'string') {\n\t    encoding = offset\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, offset[, length][, encoding])\n\t  } else if (isFinite(offset)) {\n\t    offset = offset | 0\n\t    if (isFinite(length)) {\n\t      length = length | 0\n\t      if (encoding === undefined) encoding = 'utf8'\n\t    } else {\n\t      encoding = length\n\t      length = undefined\n\t    }\n\t  // legacy write(string, encoding, offset, length) - remove in v0.13\n\t  } else {\n\t    var swap = encoding\n\t    encoding = offset\n\t    offset = length | 0\n\t    length = swap\n\t  }\n\n\t  var remaining = this.length - offset\n\t  if (length === undefined || length > remaining) length = remaining\n\n\t  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n\t    throw new RangeError('attempt to write outside buffer bounds')\n\t  }\n\n\t  if (!encoding) encoding = 'utf8'\n\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexWrite(this, string, offset, length)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Write(this, string, offset, length)\n\n\t      case 'ascii':\n\t        return asciiWrite(this, string, offset, length)\n\n\t      case 'binary':\n\t        return binaryWrite(this, string, offset, length)\n\n\t      case 'base64':\n\t        // Warning: maxLength not taken into account in base64Write\n\t        return base64Write(this, string, offset, length)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return ucs2Write(this, string, offset, length)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n    }\n\n    Buffer.prototype.toJSON = function toJSON () {\n\t  return {\n\t    type: 'Buffer',\n\t    data: Array.prototype.slice.call(this._arr || this, 0)\n\t  }\n    }\n\n    function base64Slice (buf, start, end) {\n\t  if (start === 0 && end === buf.length) {\n\t    return base64.fromByteArray(buf)\n\t  } else {\n\t    return base64.fromByteArray(buf.slice(start, end))\n\t  }\n    }\n\n    function utf8Slice (buf, start, end) {\n\t  end = Math.min(buf.length, end)\n\t  var res = []\n\n\t  var i = start\n\t  while (i < end) {\n\t    var firstByte = buf[i]\n\t    var codePoint = null\n\t    var bytesPerSequence = (firstByte > 0xEF) ? 4\n\t      : (firstByte > 0xDF) ? 3\n\t      : (firstByte > 0xBF) ? 2\n\t      : 1\n\n\t    if (i + bytesPerSequence <= end) {\n\t      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n\t      switch (bytesPerSequence) {\n\t        case 1:\n\t          if (firstByte < 0x80) {\n\t            codePoint = firstByte\n\t          }\n\t          break\n\t        case 2:\n\t          secondByte = buf[i + 1]\n\t          if ((secondByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n\t            if (tempCodePoint > 0x7F) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 3:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n\t            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 4:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          fourthByte = buf[i + 3]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n\t            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t      }\n\t    }\n\n\t    if (codePoint === null) {\n\t      // we did not generate a valid codePoint so insert a\n\t      // replacement char (U+FFFD) and advance only 1 byte\n\t      codePoint = 0xFFFD\n\t      bytesPerSequence = 1\n\t    } else if (codePoint > 0xFFFF) {\n\t      // encode to utf16 (surrogate pair dance)\n\t      codePoint -= 0x10000\n\t      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n\t      codePoint = 0xDC00 | codePoint & 0x3FF\n\t    }\n\n\t    res.push(codePoint)\n\t    i += bytesPerSequence\n\t  }\n\n\t  return decodeCodePointsArray(res)\n    }\n\n    // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n    // the lowest limit is Chrome, with 0x10000 args.\n    // We go 1 magnitude less, for safety\n    var MAX_ARGUMENTS_LENGTH = 0x1000\n\n    function decodeCodePointsArray (codePoints) {\n\t  var len = codePoints.length\n\t  if (len <= MAX_ARGUMENTS_LENGTH) {\n\t    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n\t  }\n\n\t  // Decode in chunks to avoid \"call stack size exceeded\".\n\t  var res = ''\n\t  var i = 0\n\t  while (i < len) {\n\t    res += String.fromCharCode.apply(\n\t      String,\n\t      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n\t    )\n\t  }\n\t  return res\n    }\n\n    function asciiSlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\n\t  for (var i = start; i < end; i++) {\n\t    ret += String.fromCharCode(buf[i] & 0x7F)\n\t  }\n\t  return ret\n    }\n\n    function binarySlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\n\t  for (var i = start; i < end; i++) {\n\t    ret += String.fromCharCode(buf[i])\n\t  }\n\t  return ret\n    }\n\n    function hexSlice (buf, start, end) {\n\t  var len = buf.length\n\n\t  if (!start || start < 0) start = 0\n\t  if (!end || end < 0 || end > len) end = len\n\n\t  var out = ''\n\t  for (var i = start; i < end; i++) {\n\t    out += toHex(buf[i])\n\t  }\n\t  return out\n    }\n\n    function utf16leSlice (buf, start, end) {\n\t  var bytes = buf.slice(start, end)\n\t  var res = ''\n\t  for (var i = 0; i < bytes.length; i += 2) {\n\t    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n\t  }\n\t  return res\n    }\n\n    Buffer.prototype.slice = function slice (start, end) {\n\t  var len = this.length\n\t  start = ~~start\n\t  end = end === undefined ? len : ~~end\n\n\t  if (start < 0) {\n\t    start += len\n\t    if (start < 0) start = 0\n\t  } else if (start > len) {\n\t    start = len\n\t  }\n\n\t  if (end < 0) {\n\t    end += len\n\t    if (end < 0) end = 0\n\t  } else if (end > len) {\n\t    end = len\n\t  }\n\n\t  if (end < start) end = start\n\n\t  var newBuf\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    newBuf = this.subarray(start, end)\n\t    newBuf.__proto__ = Buffer.prototype\n\t  } else {\n\t    var sliceLen = end - start\n\t    newBuf = new Buffer(sliceLen, undefined)\n\t    for (var i = 0; i < sliceLen; i++) {\n\t      newBuf[i] = this[i + start]\n\t    }\n\t  }\n\n\t  if (newBuf.length) newBuf.parent = this.parent || this\n\n\t  return newBuf\n    }\n\n    /*\n\t * Need to make sure that buffer isn't trying to write out of bounds.\n\t */\n    function checkOffset (offset, ext, length) {\n\t  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n\t  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n    }\n\n    Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\n\t  return val\n    }\n\n    Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) {\n\t    checkOffset(offset, byteLength, this.length)\n\t  }\n\n\t  var val = this[offset + --byteLength]\n\t  var mul = 1\n\t  while (byteLength > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --byteLength] * mul\n\t  }\n\n\t  return val\n    }\n\n    Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  return this[offset]\n    }\n\n    Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return this[offset] | (this[offset + 1] << 8)\n    }\n\n    Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return (this[offset] << 8) | this[offset + 1]\n    }\n\n    Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return ((this[offset]) |\n\t      (this[offset + 1] << 8) |\n\t      (this[offset + 2] << 16)) +\n\t      (this[offset + 3] * 0x1000000)\n    }\n\n    Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset] * 0x1000000) +\n\t    ((this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    this[offset + 3])\n    }\n\n    Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\t  mul *= 0x80\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n\t  return val\n    }\n\n    Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var i = byteLength\n\t  var mul = 1\n\t  var val = this[offset + --i]\n\t  while (i > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --i] * mul\n\t  }\n\t  mul *= 0x80\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n\t  return val\n    }\n\n    Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  if (!(this[offset] & 0x80)) return (this[offset])\n\t  return ((0xff - this[offset] + 1) * -1)\n    }\n\n    Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset] | (this[offset + 1] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n    }\n\n    Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset + 1] | (this[offset] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n    }\n\n    Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset]) |\n\t    (this[offset + 1] << 8) |\n\t    (this[offset + 2] << 16) |\n\t    (this[offset + 3] << 24)\n    }\n\n    Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset] << 24) |\n\t    (this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    (this[offset + 3])\n    }\n\n    Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, true, 23, 4)\n    }\n\n    Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, false, 23, 4)\n    }\n\n    Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, true, 52, 8)\n    }\n\n    Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, false, 52, 8)\n    }\n\n    function checkInt (buf, value, offset, ext, max, min) {\n\t  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n\t  if (value > max || value < min) throw new RangeError('value is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('index out of range')\n    }\n\n    Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n\t  var mul = 1\n\t  var i = 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n    }\n\n    function objectWriteUInt16 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n\t    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n\t      (littleEndian ? i : 1 - i) * 8\n\t  }\n    }\n\n    Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n    }\n\n    Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n    }\n\n    function objectWriteUInt32 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n\t    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n\t  }\n    }\n\n    Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset + 3] = (value >>> 24)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\n\t  var i = 0\n\t  var mul = 1\n\t  var sub = value < 0 ? 1 : 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  var sub = value < 0 ? 1 : 0\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  if (value < 0) value = 0xff + value + 1\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n    }\n\n    Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n    }\n\n    Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n    }\n\n    Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 3] = (value >>> 24)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n    }\n\n    function checkIEEE754 (buf, value, offset, ext, max, min) {\n\t  if (value > max || value < min) throw new RangeError('value is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('index out of range')\n\t  if (offset < 0) throw new RangeError('index out of range')\n    }\n\n    function writeFloat (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, true, noAssert)\n    }\n\n    Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, false, noAssert)\n    }\n\n    function writeDouble (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n\t  return offset + 8\n    }\n\n    Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, true, noAssert)\n    }\n\n    Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, false, noAssert)\n    }\n\n    // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n    Buffer.prototype.copy = function copy (target, targetStart, start, end) {\n\t  if (!start) start = 0\n\t  if (!end && end !== 0) end = this.length\n\t  if (targetStart >= target.length) targetStart = target.length\n\t  if (!targetStart) targetStart = 0\n\t  if (end > 0 && end < start) end = start\n\n\t  // Copy 0 bytes; we're done\n\t  if (end === start) return 0\n\t  if (target.length === 0 || this.length === 0) return 0\n\n\t  // Fatal error conditions\n\t  if (targetStart < 0) {\n\t    throw new RangeError('targetStart out of bounds')\n\t  }\n\t  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n\t  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n\t  // Are we oob?\n\t  if (end > this.length) end = this.length\n\t  if (target.length - targetStart < end - start) {\n\t    end = target.length - targetStart + start\n\t  }\n\n\t  var len = end - start\n\t  var i\n\n\t  if (this === target && start < targetStart && targetStart < end) {\n\t    // descending copy from end\n\t    for (i = len - 1; i >= 0; i--) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // ascending copy from start\n\t    for (i = 0; i < len; i++) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else {\n\t    Uint8Array.prototype.set.call(\n\t      target,\n\t      this.subarray(start, start + len),\n\t      targetStart\n\t    )\n\t  }\n\n\t  return len\n    }\n\n    // fill(value, start=0, end=buffer.length)\n    Buffer.prototype.fill = function fill (value, start, end) {\n\t  if (!value) value = 0\n\t  if (!start) start = 0\n\t  if (!end) end = this.length\n\n\t  if (end < start) throw new RangeError('end < start')\n\n\t  // Fill 0 bytes; we're done\n\t  if (end === start) return\n\t  if (this.length === 0) return\n\n\t  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n\t  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n\t  var i\n\t  if (typeof value === 'number') {\n\t    for (i = start; i < end; i++) {\n\t      this[i] = value\n\t    }\n\t  } else {\n\t    var bytes = utf8ToBytes(value.toString())\n\t    var len = bytes.length\n\t    for (i = start; i < end; i++) {\n\t      this[i] = bytes[i % len]\n\t    }\n\t  }\n\n\t  return this\n    }\n\n    // HELPER FUNCTIONS\n    // ================\n\n    var INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\n    function base64clean (str) {\n\t  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n\t  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n\t  // Node converts strings with length < 2 to ''\n\t  if (str.length < 2) return ''\n\t  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\t  while (str.length % 4 !== 0) {\n\t    str = str + '='\n\t  }\n\t  return str\n    }\n\n    function stringtrim (str) {\n\t  if (str.trim) return str.trim()\n\t  return str.replace(/^\\s+|\\s+$/g, '')\n    }\n\n    function toHex (n) {\n\t  if (n < 16) return '0' + n.toString(16)\n\t  return n.toString(16)\n    }\n\n    function utf8ToBytes (string, units) {\n\t  units = units || Infinity\n\t  var codePoint\n\t  var length = string.length\n\t  var leadSurrogate = null\n\t  var bytes = []\n\n\t  for (var i = 0; i < length; i++) {\n\t    codePoint = string.charCodeAt(i)\n\n\t    // is surrogate component\n\t    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n\t      // last char was a lead\n\t      if (!leadSurrogate) {\n\t        // no lead yet\n\t        if (codePoint > 0xDBFF) {\n\t          // unexpected trail\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        } else if (i + 1 === length) {\n\t          // unpaired lead\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        }\n\n\t        // valid lead\n\t        leadSurrogate = codePoint\n\n\t        continue\n\t      }\n\n\t      // 2 leads in a row\n\t      if (codePoint < 0xDC00) {\n\t        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t        leadSurrogate = codePoint\n\t        continue\n\t      }\n\n\t      // valid surrogate pair\n\t      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n\t    } else if (leadSurrogate) {\n\t      // valid bmp char, but last char was a lead\n\t      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t    }\n\n\t    leadSurrogate = null\n\n\t    // encode utf8\n\t    if (codePoint < 0x80) {\n\t      if ((units -= 1) < 0) break\n\t      bytes.push(codePoint)\n\t    } else if (codePoint < 0x800) {\n\t      if ((units -= 2) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x6 | 0xC0,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x10000) {\n\t      if ((units -= 3) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0xC | 0xE0,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x110000) {\n\t      if ((units -= 4) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x12 | 0xF0,\n\t        codePoint >> 0xC & 0x3F | 0x80,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else {\n\t      throw new Error('Invalid code point')\n\t    }\n\t  }\n\n\t  return bytes\n    }\n\n    function asciiToBytes (str) {\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; i++) {\n\t    // Node's code seems to be doing this and not & 0x7F..\n\t    byteArray.push(str.charCodeAt(i) & 0xFF)\n\t  }\n\t  return byteArray\n    }\n\n    function utf16leToBytes (str, units) {\n\t  var c, hi, lo\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; i++) {\n\t    if ((units -= 2) < 0) break\n\n\t    c = str.charCodeAt(i)\n\t    hi = c >> 8\n\t    lo = c % 256\n\t    byteArray.push(lo)\n\t    byteArray.push(hi)\n\t  }\n\n\t  return byteArray\n    }\n\n    function base64ToBytes (str) {\n\t  return base64.toByteArray(base64clean(str))\n    }\n\n    function blitBuffer (src, dst, offset, length) {\n\t  for (var i = 0; i < length; i++) {\n\t    if ((i + offset >= dst.length) || (i >= src.length)) break\n\t    dst[i + offset] = src[i]\n\t  }\n\t  return i\n    }\n  }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {})\n}, {'base64-js': 38, 'ieee754': 39, 'isarray': 40}],\n38: [function (require, module, exports) {\n  (function (exports) {\n\t  'use strict'\n\n\t  var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n\n\t  var Arr = (typeof Uint8Array !== 'undefined')\n\t    ? Uint8Array\n\t    : Array\n\n\t  var PLUS = '+'.charCodeAt(0)\n\t  var SLASH = '/'.charCodeAt(0)\n\t  var NUMBER = '0'.charCodeAt(0)\n\t  var LOWER = 'a'.charCodeAt(0)\n\t  var UPPER = 'A'.charCodeAt(0)\n\t  var PLUS_URL_SAFE = '-'.charCodeAt(0)\n\t  var SLASH_URL_SAFE = '_'.charCodeAt(0)\n\n\t  function decode (elt) {\n\t    var code = elt.charCodeAt(0)\n\t    if (code === PLUS || code === PLUS_URL_SAFE) return 62 // '+'\n\t    if (code === SLASH || code === SLASH_URL_SAFE) return 63 // '/'\n\t    if (code < NUMBER) return -1 // no match\n\t    if (code < NUMBER + 10) return code - NUMBER + 26 + 26\n\t    if (code < UPPER + 26) return code - UPPER\n\t    if (code < LOWER + 26) return code - LOWER + 26\n\t  }\n\n\t  function b64ToByteArray (b64) {\n\t    var i, j, l, tmp, placeHolders, arr\n\n\t    if (b64.length % 4 > 0) {\n\t      throw new Error('Invalid string. Length must be a multiple of 4')\n\t    }\n\n\t    // the number of equal signs (place holders)\n\t    // if there are two placeholders, than the two characters before it\n\t    // represent one byte\n\t    // if there is only one, then the three characters before it represent 2 bytes\n\t    // this is just a cheap hack to not do indexOf twice\n\t    var len = b64.length\n\t    placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0\n\n\t    // base64 is 4/3 + up to two characters of the original data\n\t    arr = new Arr(b64.length * 3 / 4 - placeHolders)\n\n\t    // if there are placeholders, only get up to the last complete 4 chars\n\t    l = placeHolders > 0 ? b64.length - 4 : b64.length\n\n\t    var L = 0\n\n\t    function push (v) {\n\t      arr[L++] = v\n\t    }\n\n\t    for (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t      tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\n\t      push((tmp & 0xFF0000) >> 16)\n\t      push((tmp & 0xFF00) >> 8)\n\t      push(tmp & 0xFF)\n\t    }\n\n\t    if (placeHolders === 2) {\n\t      tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\n\t      push(tmp & 0xFF)\n\t    } else if (placeHolders === 1) {\n\t      tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\n\t      push((tmp >> 8) & 0xFF)\n\t      push(tmp & 0xFF)\n\t    }\n\n\t    return arr\n\t  }\n\n\t  function uint8ToBase64 (uint8) {\n\t    var i\n\t    var extraBytes = uint8.length % 3 // if we have 1 byte left, pad 2 bytes\n\t    var output = ''\n\t    var temp, length\n\n\t    function encode (num) {\n\t      return lookup.charAt(num)\n\t    }\n\n\t    function tripletToBase64 (num) {\n\t      return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)\n\t    }\n\n\t    // go through the array every three bytes, we'll deal with trailing stuff later\n\t    for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t      temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n\t      output += tripletToBase64(temp)\n\t    }\n\n\t    // pad the end with zeros, but make sure to not forget the extra bytes\n\t    switch (extraBytes) {\n\t      case 1:\n\t        temp = uint8[uint8.length - 1]\n\t        output += encode(temp >> 2)\n\t        output += encode((temp << 4) & 0x3F)\n\t        output += '=='\n\t        break\n\t      case 2:\n\t        temp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])\n\t        output += encode(temp >> 10)\n\t        output += encode((temp >> 4) & 0x3F)\n\t        output += encode((temp << 2) & 0x3F)\n\t        output += '='\n\t        break\n\t      default:\n\t        break\n\t    }\n\n\t    return output\n\t  }\n\n\t  exports.toByteArray = b64ToByteArray\n\t  exports.fromByteArray = uint8ToBase64\n  }(typeof exports === 'undefined' ? (this.base64js = {}) : exports))\n}, {}],\n39: [function (require, module, exports) {\n  exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n\t  var e, m\n\t  var eLen = nBytes * 8 - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var nBits = -7\n\t  var i = isLE ? (nBytes - 1) : 0\n\t  var d = isLE ? -1 : 1\n\t  var s = buffer[offset + i]\n\n\t  i += d\n\n\t  e = s & ((1 << (-nBits)) - 1)\n\t  s >>= (-nBits)\n\t  nBits += eLen\n\t  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t  m = e & ((1 << (-nBits)) - 1)\n\t  e >>= (-nBits)\n\t  nBits += mLen\n\t  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t  if (e === 0) {\n\t    e = 1 - eBias\n\t  } else if (e === eMax) {\n\t    return m ? NaN : ((s ? -1 : 1) * Infinity)\n\t  } else {\n\t    m = m + Math.pow(2, mLen)\n\t    e = e - eBias\n\t  }\n\t  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n  }\n\n  exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n\t  var e, m, c\n\t  var eLen = nBytes * 8 - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n\t  var i = isLE ? 0 : (nBytes - 1)\n\t  var d = isLE ? 1 : -1\n\t  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n\t  value = Math.abs(value)\n\n\t  if (isNaN(value) || value === Infinity) {\n\t    m = isNaN(value) ? 1 : 0\n\t    e = eMax\n\t  } else {\n\t    e = Math.floor(Math.log(value) / Math.LN2)\n\t    if (value * (c = Math.pow(2, -e)) < 1) {\n\t      e--\n\t      c *= 2\n\t    }\n\t    if (e + eBias >= 1) {\n\t      value += rt / c\n\t    } else {\n\t      value += rt * Math.pow(2, 1 - eBias)\n\t    }\n\t    if (value * c >= 2) {\n\t      e++\n\t      c /= 2\n\t    }\n\n\t    if (e + eBias >= eMax) {\n\t      m = 0\n\t      e = eMax\n\t    } else if (e + eBias >= 1) {\n\t      m = (value * c - 1) * Math.pow(2, mLen)\n\t      e = e + eBias\n\t    } else {\n\t      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n\t      e = 0\n\t    }\n\t  }\n\n\t  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n\t  e = (e << mLen) | m\n\t  eLen += mLen\n\t  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n\t  buffer[offset + i - d] |= s * 128\n  }\n}, {}],\n40: [function (require, module, exports) {\n  var toString = {}.toString\n\n  module.exports = Array.isArray || function (arr) {\n\t  return toString.call(arr) == '[object Array]'\n  }\n}, {}]}, {}, [36])\n\nexport default PANOLENS\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/panolens.js","import Vue from 'vue'\nimport Router from 'vue-router'\n\nimport { pages } from '../pages'\n\nVue.use(Router)\n\nconst routes = pages.map(page => {\n  const name = page.name\n  return {\n    path: '/' + name.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase(),\n    name,\n    component: page\n  }\n})\n\nconsole.log(routes)\n\nroutes.push({\n  path: '*',\n  redirect: '/demo-pano'\n})\n\nexport default new Router({ routes })\n\n\n\n// WEBPACK FOOTER //\n// ./demos/router/index.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-223dbf78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-223dbf78\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/App.vue\n// module id = 63\n// module chunks = 1","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\nnew Vue({ // eslint-disable-line no-new\n  el: '#app',\n  router,\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./demos/index.js","import DemoPano from './demo-pano'\nimport DemoCubePano from './demo-cube-pano'\nimport DemoVideoPano from './demo-video-pano'\nimport DemoTour from './demo-tour'\n\nconst pages = [\n  DemoPano,\n  DemoCubePano,\n  DemoVideoPano,\n  DemoTour\n]\n\nexport { pages }\n\n\n\n// WEBPACK FOOTER //\n// ./demos/pages/index.js","<template>\n  <div class=\"demos\">\n    <div class=\"demos-content\">\n      <ul class=\"demos-menu\">\n        <li class=\"demos-menu-title\">demos</li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-pano\">basic panorama</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-cube-pano\">Cube Faces</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-video-pano\">Video Pano</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-tour\">VR Tour</router-link>\n        </li>\n      </ul>\n\n      <div class=\"demos-pages\">\n        <router-view></router-view>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'App'\n}\n\n</script>\n\n<style>\n* {\n    margin: 0;\n    border: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nul,\nol,\nli {\n    list-style: none;\n}\n\na {\n    color: #657180;\n    text-decoration: none;\n}\n\nhtml,\nbody,\n.demos {\n    width: 100%;\n    height: 100%;\n    color: #657180;\n}\n\nbody {\n    background: #eee;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", SimSun, sans-serif;\n    background: #fff;\n}\n\n.demos-header {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    background: #f3f6fb;\n    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\n    border-bottom: solid 1px #dfe2e7;\n    padding: 15px 15px 15px 30px;\n    line-height: 20px;\n}\n\n.demos-header .title {\n    font-weight: bold;\n    font-size: 18px;\n    display: inline-block;\n}\n\n.demos-header .github {\n    color: #39f;\n    display: inline-block;\n    font-size: 12px;\n    float: right;\n}\n\n.demos-content {\n    width: 100%;\n    height: 100%;\n    padding-top: 52px;\n    overflow: hidden;\n}\n\n.demos-menu {\n    float: left;\n    width: 230px;\n    height: 100%;\n    border-right: solid 1px #dfe2e7;\n    padding: 10px 30px;\n}\n\n.demos-menu .demos-menu-item {\n    display: block;\n    width: 100%;\n    height: 30px;\n    line-height: 30px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.demos-menu .demos-menu-item>a {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.demos-menu .demos-menu-title {\n    display: block;\n    width: 100%;\n    padding: 6px 0;\n    margin-top: 10px;\n    font-size: 14px;\n    font-weight: bold;\n}\n\n.demos-menu .demos-menu-item:hover>a {\n    color: #39f;\n}\n\n.demos-pages {\n    height: 100%;\n    overflow: hidden;\n}\n\n.demo-loading {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n}\n\n.demo-loading::before {\n    content: '';\n    border-radius: 100%;\n    margin: 2px;\n    border: 3px solid #20a0ff;\n    border-bottom-color: transparent;\n    height: 36px;\n    width: 36px;\n    display: inline-block;\n    animation: loading-rotate .75s 0s linear infinite;\n    vertical-align: middle;\n}\n\n.demo-loading::after {\n    content: '';\n    display: inline-block;\n    height: 100%;\n    width: 0;\n    vertical-align: middle;\n}\n\n@keyframes loading-rotate {\n    0% {\n        transform: rotate(0) scale(1);\n    }\n    50% {\n        transform: rotate(180deg) scale(.6);\n    }\n    100% {\n        transform: rotate(360deg) scale(1);\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?2f702ebd","<template>\n  <div class=\"demo-block\">\n    <div class=\"demo-block-preview\">\n      <slot name=\"preview\"></slot>\n    </div>\n    <div class=\"demo-block-code\">\n      <div class=\"demo-block-code-box\">\n        <h3>Vue Component & Webpack</h3>\n        <div class=\"demo-block-code-box-content\">\n          <pre>\n               <code\n                ref=\"vueCode\"\n                class=\"html\">{{ vueCode | code }}</code>\n          </pre>\n        </div>\n      </div>\n      <div class=\"demo-block-code-box\">\n        <h3>HTML & JS</h3>\n        <div class=\"demo-block-code-box-content\">\n          <pre>\n            <code\n              ref=\"htmlCode\"\n              class=\"html\">{{ htmlCode | code }}\n            </code>\n          </pre>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport 'highlight.js/styles/github.css'\nimport hljs from 'highlight.js'\n\n/* eslint-disable no-useless-escape */\nconst codeHandler = (code) => {\n  const scripts = `\n  <script src=\"vue.js\"><\\/script> \n  <script src=\"vue-vr.min.js\"><\\/script>`\n  return code.replace(/#scripts#/ig, scripts)\n}\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'App',\n  props: {\n    vueCode: {\n      type: String,\n      default: ''\n    },\n    htmlCode: {\n      type: String,\n      default: '// TODO'\n    }\n  },\n  mounted () {\n    hljs.highlightBlock(this.$refs.vueCode)\n    hljs.highlightBlock(this.$refs.htmlCode)\n  },\n  data () {\n    return {}\n  },\n  filters: {\n    code (val) {\n      return codeHandler(val)\n    }\n  },\n  components: {\n\n  }\n}\n</script>\n<style>\n    .demo-block {\n        width: 100%;\n        height: 100%;\n        background-color: #fff;\n        border-radius: 3px;\n    }\n\n    .demo-block .demo-block-preview {\n        width: 70%;\n        height: 100%;\n        float: left;\n        position: relative;\n    }\n\n    .demo-block .demo-block-code {\n        width: 30%;\n        height: 100%;\n        background: #f9fafc;\n        border-left: solid 1px #dfe2e7;\n        font-size: 13px;\n        float: left;\n    }\n\n    .demo-block .demo-block-code pre code {\n        font: normal 10pt Consolas, Monaco, monospace;\n    }\n\n    .demo-block .demo-block-code .demo-block-code-box {\n        width: 100%;\n        height: 50%;\n        position: relative;\n        overflow: hidden;\n    }\n\n    .demo-block .demo-block-code-box::after {\n        content: '';\n        display: block;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        width: 90%;\n        height: 1px;\n        background: -webkit-linear-gradient(left, #dfe2e7 80%, rgba(223,226,231,0) 100%);\n    }\n\n    .demo-block .demo-block-code-box h3 {\n        width: 100%;\n        padding: 10px 20px;\n        font-size: 16px;\n        font-weight: bold;\n        position: absolute;\n    }\n\n    .demo-block .demo-block-code-box-content {\n        position: absolute;\n        top: 40px;\n        bottom: 10px;\n        left: 20px;\n        right: 20px;\n        overflow: auto;\n    }\n\n    .demo-block .hljs {\n        background: transparent;\n    }\n\n    .demo-block .demo-block-code code {\n        position: absolute;\n        top: 0;\n        left: 0;\n    }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// demo-block.vue?050a101a","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Pano\n        @on-load=\"onLoad\"\n        type='cube'\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\n\nimport DemoBlock from '../components/demo-block'\nimport Pano from '../../src/Pano.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        type='cube'\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\n</template>\n<script>\n    import { Pano } from 'vuejs-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n <\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='cube'\n            source=\"assets/faces/pano_%s.jpg\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoCubePano',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true\n    }\n  },\n  methods: {\n    onLoad () {\n      this.loading = false\n    }\n  },\n  components: {\n    Pano,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-cube-pano.vue?fdd2d788","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Pano\n        @on-load=\"onLoad\"\n        source=\"assets/equirectangular.jpg\"></Pano>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block'\nimport Pano from '../../src/Pano.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        src=\"assets/equirectangular.jpg\">\n    </Pano>\n</template>\n\n<script>\n    import { Pano } from 'vue-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='cube'\n            source=\"assets/equirectangular.jpg\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoPano',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true\n    }\n  },\n  methods: {\n    onLoad () {\n      this.loading = false\n    }\n  },\n  components: {\n    Pano,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-pano.vue?396641d1","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Tour\n        @on-load-start=\"onLoadStart\"\n        @on-load=\"onLoad\"\n        :scenes='scenes'>\n      </Tour>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block'\nimport Tour from '../../src/Tour.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Tour\n        @on-load=\"onLoad\"\n        :scenes='scenes'>\n\n    </Tour>\n    <div\n      class=\"demo-loading\"\n      v-show=\"loading\"></div>\n      \n</template>\n\n<script>\n    import { Tour } from 'vue-vr'\n\n    export default {\n        components: {\n            Tour\n        },\n        data(){\n          return {\n            scenes: [{\n              key: 'M4wOy2s',\n              panorama: {\n                source: 'assets/equirectangular.jpg',\n                type: 'image'\n              },\n              x: 0,\n              y: 0,\n              z: 0,\n              rx: 0,\n              rz: 0,\n              ry: 90,\n              connections: [\n                'eIm7la',\n                'eId9l0',\n                'fK2dL7l'\n              ]\n            },\n            {\n              key: 'eIm7la',\n              panorama: {\n                source: 'assets/faces/pano_%s.jpg',\n                type: 'cube'\n              },\n              x: 100,\n              y: 0,\n              z: 200,\n              rx: 0,\n              rz: 0,\n              ry: 0,\n              connections: [\n                'M4wOy2s'\n              ]\n            },\n            {\n              key: 'eId9l0',\n              panorama: {\n                source: 'assets/faces/pano_%s.jpg',\n                type: 'cube'\n              },\n              x: 150,\n              y: 0,\n              z: -300,\n              rx: 0,\n              rz: 0,\n              ry: 0,\n              connections: [\n                'M4wOy2s'\n              ]\n            },\n            {\n              key: 'fK2dL7l',\n              panorama: {\n                source: 'assets/faces/pano_%s.jpg',\n                type: 'cube'\n              },\n              x: -150,\n              y: 0,\n              z: -300,\n              rx: 0,\n              rz: 0,\n              ry: 0,\n              connections: [\n                'M4wOy2s'\n              ]\n            }]\n          }\n        }\n    }\n<\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Tour\n          @on-load=\"onLoad\"\n          :scenes='scenes'>\n      </Tour>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoTour',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true,\n      scenes: [{\n        key: 'M4wOy2s',\n        panorama: {\n          source: 'assets/equirectangular.jpg',\n          type: 'image'\n        },\n        x: 0,\n        y: 0,\n        z: 0,\n        rx: 0,\n        rz: 0,\n        ry: 90,\n        connections: [\n          'eIm7la',\n          'eId9l0',\n          'fK2dL7l'\n        ]\n      },\n      {\n        key: 'eIm7la',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: 100,\n        y: 0,\n        z: 200,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: [\n          'M4wOy2s'\n        ]\n      },\n      {\n        key: 'eId9l0',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: 150,\n        y: 0,\n        z: -300,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: [\n          'M4wOy2s'\n        ]\n      },\n      {\n        key: 'fK2dL7l',\n        panorama: {\n          source: 'assets/faces/pano_%s.jpg',\n          type: 'cube'\n        },\n        x: -150,\n        y: 0,\n        z: -300,\n        rx: 0,\n        rz: 0,\n        ry: 0,\n        connections: [\n          'M4wOy2s'\n        ]\n      }\n      ]\n    }\n  },\n  methods: {\n    onLoad () {\n      console.log('onLoad')\n      this.loading = false\n    },\n    onLoadStart () {\n      console.log('onLoadStart')\n      this.loading = true\n    }\n  },\n  components: {\n    Tour,\n    DemoBlock\n  },\n  mounted () {\n    this.initialScene = this.scenes[0].key\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-tour.vue?6564f667","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Pano\n        @on-load=\"onLoad\"\n        type='video'\n        source=\"assets/ClashofClans.mp4\"></Pano>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block'\nimport Pano from '../../src/Pano.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        type='video'\n        source=\"assets/ClashofClans.mp4\">\n    </Pano>\n</template>\n\n<script>\n    import { Pano } from 'vue-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n<\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='video'\n            source=\"assets/ClashofClans.mp4\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoVideoPano',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true\n    }\n  },\n  methods: {\n    onLoad () {\n      this.loading = false\n    }\n  },\n  components: {\n    Pano,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-video-pano.vue?17bba2d2","<template>\n  <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\n  </div>\n</template>\n\n<script>\nimport PanoLens from './lib/panolens'\n\nexport default {\n  name: 'Pano',\n  props: {\n    source: {\n      type: String,\n      default: ''\n    },\n    type: {\n      type: String,\n      default: 'image'\n    },\n    width: {\n      type: Number,\n      default: 100\n    },\n    height: {\n      type: Number,\n      default: 100\n    }\n  },\n  data () {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      viewer: null,\n      panorama: null\n    }\n  },\n  created () {\n    window.addEventListener('resize', this.onResize, false)\n  },\n  mounted () {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      }\n    }\n\n    this.viewer = new PanoLens.Viewer({\n      container: this.$el,\n      cameraFov: 100\n    })\n\n    this.loadPano()\n  },\n  watch: {\n    source () {\n      if (!this.viewer) return\n      if (!this.panorama) return\n      this.loadPano()\n    }\n  },\n  methods: {\n    onResize () {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight\n          }\n        })\n      }\n    },\n    loadPano () {\n      console.log('this.source = ' + this.source)\n      if (!this.source) return\n\n      switch (this.type) {\n        case 'cube':\n          var l = this.source.replace('%s', 'l')\n          var f = this.source.replace('%s', 'f')\n          var r = this.source.replace('%s', 'r')\n          var b = this.source.replace('%s', 'b')\n          var u = this.source.replace('%s', 'u')\n          var d = this.source.replace('%s', 'd')\n          this.panorama = new PanoLens.CubePanorama([r, l, u, d, f, b])\n          break\n        case 'video':\n          this.panorama = new PanoLens.VideoPanorama(this.source, { autoplay: true })\n          console.log('this is video')\n          break\n        default:\n          this.panorama = new PanoLens.ImagePanorama(this.source)\n          break\n      }\n\n      this.viewer.add(this.panorama)\n\n      const that = this\n      this.panorama.addEventListener('load', () => {\n        that.$emit('on-load')\n      })\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Pano.vue?0bdf4952","<template>\n  <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\n  </div>\n</template>\n\n<style scoped>\n  div{\n    cursor: pointer;\n  }\n</style>\n\n<script>\nimport PanoLens from './lib/panolens'\nimport * as THREE from 'three'\nexport default {\n  name: 'Tour',\n  props: {\n    scenes: {\n      type: Array,\n      default: () => { return [] }\n    },\n    sceneIndex: {\n      type: Number,\n      default: 0\n    },\n    width: {\n      type: Number,\n      default: undefined\n    },\n    height: {\n      type: Number,\n      default: undefined\n    }\n  },\n  data () {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      scene_index: -1,\n      viewer: null,\n      panorama: null,\n      hotspots: [],\n      arrowGroup: null\n    }\n  },\n  created () {\n    window.addEventListener('resize', this.onResize, false)\n  },\n  mounted () {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      }\n    }\n\n    this.viewer = new PanoLens.Viewer({\n      container: this.$el,\n      cameraFov: 100\n    })\n    if (this.scene_index === -1) {\n      this.loadScene(this.sceneIndex)\n    }\n  },\n  // watch: {\n  //   scenes () {\n  //     if (!this.viewer) return\n  //     if (!this.scenes || this.scenes.length === 0) return\n  //     this.loadScene()\n  //   }\n  // },\n  methods: {\n    onResize () {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight\n          }\n        })\n      }\n    },\n    getSceneIndexByKey (key) {\n      for (let i = 0; i < this.scenes.length; i++) {\n        if (this.scenes[i].key === key) {\n          return i\n        }\n      }\n      return -1\n    },\n    loadScene (index) {\n      this.$emit('on-load-start')\n      console.log('this.scenes = ' + this.scenes)\n      if (!this.scenes || this.scenes.length === 0) return\n\n      if (this.scene_index === index) return\n\n      this.scene_index = index\n\n      var scene = this.scenes[index]\n\n      var pano = scene.panorama\n      var source = pano.source\n\n      switch (pano.type) {\n        case 'cube':\n          var l = source.replace('%s', 'l')\n          var f = source.replace('%s', 'f')\n          var r = source.replace('%s', 'r')\n          var b = source.replace('%s', 'b')\n          var u = source.replace('%s', 'u')\n          var d = source.replace('%s', 'd')\n          this.panorama = new PanoLens.CubePanorama([r, l, u, d, f, b])\n          break\n        case 'video':\n          this.panorama = new PanoLens.VideoPanorama(source, { autoplay: true })\n          console.log('this is video')\n          break\n        default:\n          this.panorama = new PanoLens.ImagePanorama(source)\n          break\n      }\n\n      this.viewer.camera.near = 0.001\n      this.viewer.camera.position.set(scene.x, scene.y, scene.z)\n\n      this.viewer.camera.translateZ(1)\n\n      this.viewer.add(this.panorama)\n\n      this.viewer.panorama.rotation.set(0, Math.PI, 0)\n      this.panorama.parent.rotation.set(0, Math.PI, 0)\n      this.viewer.panorama.position.set(scene.x, scene.y, scene.z)\n\n      this.viewer.control.target = this.viewer.panorama.position\n\n      console.log(this.viewer)\n      console.log('panorama = ', this.panorama)\n\n      // remove arrows if exist\n      if (this.arrowGroup) {\n        this.viewer.remove(this.arrowGroup)\n      }\n\n      // remove hotspots if exist\n      if (this.hotspots) {\n        this.hotspots.forEach((hotspot) => {\n          this.viewer.remove(hotspot)\n        })\n      }\n\n      // add hotspots\n\n      this.arrowGroup = new THREE.Object3D()\n\n      scene.connections.forEach(key => {\n        console.log('connections key = ', key)\n        var index = this.getSceneIndexByKey(key)\n        console.log('connections index = ', index)\n        if (index === -1) return\n\n        var hotspot = addHotspot(scene, this.scenes[index])\n        this.viewer.add(hotspot)\n\n        this.hotspots.push(hotspot)\n\n        var arrow = addArrow(scene, this.scenes[index])\n\n        arrow.addEventListener('mouseover', () => {\n          console.log('hoverred')\n        })\n\n        this.arrowGroup.add(arrow)\n      })\n\n      var that = this\n\n      var raycaster = new THREE.Raycaster()\n\n      var INTERSECTED = null\n\n      this.viewer.container.addEventListener('click', (event) => {\n        if (Date.now() - timeStamp < rate) return\n\n        if (INTERSECTED) {\n          console.log(INTERSECTED.targetScene)\n          // var index = that.getSceneIndexByKey(INTERSECTED.targetScene.key)\n\n          alert('TODO: move to next scene ' + INTERSECTED.targetScene.key)\n\n          // todo move to scene\n          // that.panorama.dispose()\n\n          // this.$emit('on-load-start')\n\n          // setTimeout(that.loadScene(index), 10)\n          // timeStamp = Date.now()\n          // INTERSECTED = null\n        }\n      })\n\n      this.viewer.container.addEventListener('mousemove', (event) => {\n        // console.log(e)\n\n        var mouse = new THREE.Vector2()\n        var camera = that.viewer.camera\n        mouse.x = ((event.clientX - that.$el.parentElement.offsetLeft) / that.viewer.container.offsetWidth) * 2 - 1\n        mouse.y = -((event.clientY - that.$el.parentElement.offsetTop) / that.viewer.container.offsetHeight) * 2 + 1\n\n        raycaster.setFromCamera(mouse, camera)\n\n        var\tintersects = raycaster.intersectObjects(that.viewer.scene.children, true)\n\n        var intersectedObject = null\n\n        if (intersects.length >= 0) {\n          intersects.forEach((intersect, index) => {\n            if (intersect.object.type === 'hotspot' || intersect.object.type === 'arrow') {\n              intersectedObject = intersect.object\n            }\n          })\n        }\n\n        if (intersectedObject) {\n          if (INTERSECTED) {\n            if (INTERSECTED.material.color) {\n              INTERSECTED.material.color.setHex(INTERSECTED.currentHex)\n            }\n\n            INTERSECTED.scale.set(1, 1, 1)\n          }\n          // store reference to closest object as current intersection object\n          INTERSECTED = intersects[0].object\n          // store color of closest object (for later restoration)\n          if (INTERSECTED.material.color) {\n            INTERSECTED.currentHex = INTERSECTED.material.color.getHex()\n          }\n          // set a new color for closest object\n          if (INTERSECTED.material.color) {\n            INTERSECTED.material.color.setHex(0xffff00)\n          }\n          INTERSECTED.scale.set(1.2, 1.2, 1.2)\n        } else {\n          // restore previous intersection object (if it exists) to its original color\n          if (INTERSECTED) {\n            if (INTERSECTED.material.color) {\n              INTERSECTED.material.color.setHex(INTERSECTED.currentHex)\n            }\n            INTERSECTED.scale.set(1, 1, 1)\n          }\n          // remove previous intersection object reference\n          //     by setting current intersection object to \"nothing\"\n          INTERSECTED = null\n        }\n      })\n\n      this.viewer.addUpdateCallback(function () {\n        // if (objects.length > 0) {\n        //   this.position.copy(objects[0].origin)\n        // } else {\n\n        // }\n\n        this.position.copy(that.viewer.control.target)\n        // this.rotation.y = that.viewer.camera.rotation.y\n        this.rotation.z = that.viewer.camera.rotation.z\n        // this.rotation.x = that.viewer.camera.rotation.x\n        this.translateZ(0)\n        this.translateX(0)\n        this.translateY(-1)\n        this.translateZ(0)\n\n        // this.scale.set(that.viewer.zoom)\n      }.bind(this.arrowGroup))\n\n      this.viewer.add(this.arrowGroup)\n      // If you want a visible bounding box\n\n      // this.viewer.add(helper)\n\n      this.panorama.addEventListener('load', () => {\n        that.$emit('on-load')\n      })\n    }\n  }\n}\n\nvar rate = 1000\nvar timeStamp = Date.now() - rate\n\nfunction addHotspot (scene, targetScene) {\n  var pos = {\n    x: targetScene.x,\n    y: targetScene.y,\n    z: targetScene.z\n  }\n\n  var geometry = new THREE.RingGeometry(8, 13, 100, 100)\n  var material = new THREE.MeshPhongMaterial({\n    color: 1668818,\n    emissive: 0xffffff,\n    transparent: true,\n    opacity: 1,\n    side: THREE.DoubleSide,\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  })\n\n  var geometryBorder = new THREE.CircleGeometry(9, 32, 32)\n  var materialBorder = new THREE.MeshPhongMaterial()\n  materialBorder.copy(material)\n\n  materialBorder.opacity = 0.5\n\n  var circle = new THREE.Mesh(geometryBorder)\n\n  var hotspot = new THREE.Mesh(geometry)\n\n  var merged = new THREE.Geometry()\n\n  circle.updateMatrix()\n  merged.merge(circle.geometry, circle.matrix, 0)\n  hotspot.updateMatrix()\n\n  merged.merge(hotspot.geometry, hotspot.matrix, 1)\n\n  var group = new THREE.Mesh(merged, new THREE.MeshFaceMaterial([material, materialBorder]))\n\n  group.rotation.set(toRadian(90), 0, 0)\n  group.position.set(pos.x, pos.y - 100, pos.z)\n\n  group.type = 'hotspot'\n\n  group.targetScene = targetScene\n\n  return group\n}\n\nfunction addArrow (scene, targetScene) {\n  var arrowGeometry = makeArrowGeometry()\n  var arrowMaterial = new THREE.MeshBasicMaterial({\n    transparent: true,\n    opacity: 0.8,\n    color: 1668818,\n    emissive: 0xffffff,\n    side: THREE.DoubleSide,\n    polygonOffset: !0,\n    polygonOffsetFactor: -4,\n    polygonOffsetUnits: -4\n  })\n\n  var arrow = new THREE.Mesh(arrowGeometry, arrowMaterial)\n\n  var x1 = targetScene.x\n  var z1 = targetScene.z\n  var x2 = scene.x\n  var z2 = scene.z\n\n  var ath = toDegree(Math.atan2((z1 - z2), (x1 - x2)))\n\n  arrow.rotation.set(toRadian(90), 0, toRadian(ath))\n\n  var arrowPos = sphereToWorld(ath, 0)\n\n  arrow.position.set(arrowPos.x, arrowPos.y, arrowPos.z)\n  arrow.type = 'arrow'\n  arrow.targetScene = targetScene\n  return arrow\n}\n\nfunction makeArrowGeometry () {\n  var t = 1 / 10.0\n  var i = 2 * t / 3\n  var n = t * Math.cos(60 * THREE.Math.DEG2RAD)\n  var r = t * Math.sin(60 * THREE.Math.DEG2RAD)\n  var o = new THREE.Shape()\n  o.moveTo(i, 0)\n  o.lineTo(i - n, r)\n  o.lineTo(-n, r)\n  o.lineTo(0, 0)\n  o.lineTo(-n, -r)\n  o.lineTo(i - n, -r)\n  o.lineTo(i, 0)\n  return new THREE.ShapeGeometry(o)\n}\n\nfunction sphereToWorld (ath, atv) {\n  var d = 1 / 2.0\n  ath += 90\n  var mY = -d * Math.sin(toRadian(atv))\n  var r = -d * Math.cos(toRadian(atv))\n  var mX = r * Math.sin(toRadian(-ath))\n  var mZ = r * Math.cos(toRadian(-ath))\n\n  return new THREE.Vector3(mX, mY, mZ)\n}\nfunction toRadian (a) {\n  return a * Math.PI / 180.0\n}\n\nfunction toDegree (a) {\n  return a * 180.0 / Math.PI\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Tour.vue?1fa2b9b2"],"sourceRoot":""}