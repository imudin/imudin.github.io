{"version":3,"sources":["webpack:///assets/js/app.7c136bec1a338e7c3d6c.js","webpack:///./demos/components/demo-block.vue?916f","webpack:///./demos/App.vue?0551","webpack:///./demos/pages/demo-cube-pano.vue","webpack:///./demos/pages/demo-pano.vue","webpack:///./demos/pages/demo-video-pano.vue","webpack:///./demos/components/demo-block.vue?6e72","webpack:///./demos/App.vue?8c56","webpack:///./demos/pages/demo-cube-pano.vue?d0a6","webpack:///./demos/pages/demo-pano.vue?c299","webpack:///./demos/pages/demo-video-pano.vue?e6e9","webpack:///./src/Pano.vue?e317","webpack:///./demos/components/demo-block.vue?9e40","webpack:///./demos/App.vue?0543","webpack:///./demos/components/demo-block.vue","webpack:///./src/Pano.vue","webpack:///./demos/router/index.js","webpack:///./demos/App.vue","webpack:///./demos/index.js","webpack:///./demos/pages/index.js","webpack:///App.vue","webpack:///demo-block.vue","webpack:///demo-cube-pano.vue","webpack:///demo-pano.vue","webpack:///demo-video-pano.vue","webpack:///Pano.vue","webpack:///./src/lib/panolens.js","webpack:///./src/util.js"],"names":["webpackJsonp","126","module","exports","__webpack_require__","push","i","127","128","309","Component","310","311","312","render","_vm","this","_h","$createElement","_c","_self","staticClass","_t","_v","ref","_s","_f","vueCode","htmlCode","staticRenderFns","313","attrs","to","314","vue-code","code","html-code","slot","type","source","on","on-load","onLoad","directives","name","rawName","value","expression","315","316","src","317","staticStyle","width","height","margin","border","padding","319","content","locals","320","36","37","61","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__pages__","use","routes","map","page","path","component","console","log","redirect","62","63","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_1__App_vue__","__WEBPACK_IMPORTED_MODULE_1__App_vue___default","n","__WEBPACK_IMPORTED_MODULE_2__router__","el","router","h","a","64","d","pages","__WEBPACK_IMPORTED_MODULE_0__demo_pano__","__WEBPACK_IMPORTED_MODULE_0__demo_pano___default","__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__","__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default","__WEBPACK_IMPORTED_MODULE_2__demo_video_pano__","__WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default","65","66","__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__","__WEBPACK_IMPORTED_MODULE_1_highlight_js__","__WEBPACK_IMPORTED_MODULE_1_highlight_js___default","codeHandler","replace","props","String","default","mounted","highlightBlock","$refs","data","filters","val","components","67","__WEBPACK_IMPORTED_MODULE_0__components_demo_block__","__WEBPACK_IMPORTED_MODULE_0__components_demo_block___default","__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__","__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default","loading","methods","Pano","DemoBlock","68","69","70","__WEBPACK_IMPORTED_MODULE_1__lib_panolens__","Number","size","viewer","panorama","created","window","addEventListener","onResize","undefined","$el","offsetWidth","offsetHeight","Viewer","container","loadPano","watch","_this","$nextTick","l","f","r","b","u","CubePanorama","ImagePanorama","y","Math","PI","add","$emit","71","process","global","require","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default","__WEBPACK_IMPORTED_MODULE_8_three__","PANOLENS","REVISION","enableInlineVideo","e","t","start","stop","requestAnimationFrame","cancelAnimationFrame","stopImmediatePropagation","get","set","dispatchEvent","Event","resolve","then","Audio","crossOrigin","currentSrc","m","Date","now","currentTime","k","T","o","driver","video","duration","s","readyState","HAVE_FUTURE_DATA","hasAudio","playbackRate","loop","networkState","NETWORK_IDLE","buffered","length","load","ended","pause","c","g","webkitDisplayingFullscreen","E","paused","play","updater","HAVE_ENOUGH_DATA","v","w","p","bind","muted","autoplay","indexOf","everywhere","iPad","ipad","test","navigator","userAgent","classList","removeEventListener","platform","warn","document","head","style","matchMedia","matches","TWEEN","_tweens","getAll","removeAll","tween","remove","splice","update","time","preserve","hrtime","performance","getTime","Tween","object","_repeatDelayTime","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","Easing","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","_onStopCallback","properties","property","Array","concat","call","stopChainedTweens","end","numChainedTweens","delay","amount","repeat","times","repeatDelay","yoyo","easing","interpolation","chain","arguments","onStart","callback","onUpdate","onComplete","onStop","elapsed","charAt","parseFloat","isFinite","tmp","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","cos","sin","Exponential","pow","Circular","sqrt","Elastic","Back","Bounce","floor","fn","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","v0","v1","t2","root","define","domElement","getAutoRotationAngle","scope","autoRotateSpeed","getZoomScale","zoomSpeed","onMouseDown","event","momentumOn","momentumLeft","momentumUp","enabled","preventDefault","button","mouseButtons","ORBIT","noRotate","state","STATE","ROTATE","rotateStart","clientX","clientY","ZOOM","noZoom","DOLLY","dollyStart","PAN","noPan","panStart","NONE","onMouseMove","onMouseUp","startEvent","element","body","rotateEnd","rotateDelta","subVectors","rotateLeft","x","clientWidth","rotateSpeed","rotateUp","clientHeight","copy","eventPrevious","dollyEnd","dollyDelta","dollyIn","dollyOut","panEnd","panDelta","pan","endEvent","onMouseWheel","stopPropagation","delta","wheelDelta","detail","fov","maxFov","updateProjectionMatrix","minFov","changeEvent","onKeyUp","keyCode","keys","UP","keyUp","BOTTOM","keyBottom","LEFT","keyLeft","RIGHT","keyRight","onKeyDown","noKeys","momentumKeydownFactor","touchstart","touches","TOUCH_ROTATE","pageX","pageY","TOUCH_DOLLY","dx","dy","TOUCH_PAN","touchmove","scale","touchend","frameId","target","center","minDistance","maxDistance","Infinity","minZoom","maxZoom","keyPanSpeed","autoRotate","minPolarAngle","maxPolarAngle","momentumDampingFactor","momentumScalingFactor","minAzimuthAngle","maxAzimuthAngle","MIDDLE","theta","phi","panOffset","offset","phiDelta","thetaDelta","lastPosition","lastQuaternion","target0","clone","position0","position","zoom0","zoom","quat","setFromUnitVectors","up","quatInverse","inverse","setLastQuaternion","quaternion","getLastPosition","angle","panLeft","distance","te","matrix","elements","multiplyScalar","panUp","deltaX","deltaY","sub","targetDistance","tan","right","left","top","bottom","momentum","abs","dollyScale","max","min","ignoreUpdate","applyQuaternion","atan2","z","radius","lookAt","distanceToSquared","dot","reset","getPolarAngle","getAzimuthalAngle","prototype","constructor","camera","rotY","rotX","tempX","tempY","rotation","reorder","deviceOrientation","screenOrientation","alpha","alphaOffsetAngle","onDeviceOrientationChangeEvent","onScreenOrientationChangeEvent","orientation","onTouchStartEvent","onTouchMoveEvent","degToRad","updateAlphaOffsetAngle","setCameraQuaternion","beta","gamma","orient","vectorFingerY","zee","euler","q0","q1","fingerQY","fingerQX","setFromAxisAngle","multiply","setFromEuler","connect","disconnect","dispose","direction","axis","_sign","_cosh","exp","_sinhInverse","modify","geometry","thirdAxis","crossVectors","P","transpose","InverseP","getInverse","newVertices","oldVertices","anglesBetweenOldandNewVertices","meshGeometryBoundingBoxMaxx","meshGeometryBoundingBoxMinx","meshGeometryBoundingBoxMaxy","meshGeometryBoundingBoxMiny","vertices","applyMatrix4","meshWidthold","meshDepth","ParamB","oldMiddlex","oldMiddley","meshWidth","NewParamB","rightEdgePos","bendCenter","x0","y0","normalize","Q","addVectors","middle","O","acos","computeFaceNormals","verticesNeedUpdate","normalsNeedUpdate","fvNames","fl","faces","face","vertexNormals","vl","rotateMatrix","applyMatrix3","renderer","_camera","_scene","_stereo","aspect","_params","minFilter","magFilter","format","_renderTarget","scissorTest","texture","generateMipmaps","distortion","removeAttribute","toNonIndexed","positions","attributes","array","uvs","uv","count","positions2","Float32Array","uvs2","vector","scalar","material","mesh","setSize","pixelRatio","getPixelRatio","scene","updateMatrixWorld","parent","scissor","viewport","cameraL","cameraR","setEyeSeparation","eyeSep","getSize","autoClear","clear","setScissorTest","setScissor","setViewport","GSVPANO","PanoLoader","parameters","_zoom","_panoId","_parameters","_panoClient","google","maps","StreetViewService","_count","_total","_canvas","_ctx","_wc","_hc","copyright","levelsW","levelsH","widths","heights","gl","canvas","createElement","getContext","error","maxW","maxH","maxTexSize","getParameter","MAX_TEXTURE_SIZE","setProgress","loaded","total","onProgress","throwError","message","onError","adaptTextureToZoom","ceil","ptr","composeFromTile","px","py","drawImage","progress","round","panoId","onPanoramaLoad","loadFromId","id","composePanorama","url","self","useWebGL","loadTexture","img","Image","panoid","getPanoramaById","result","status","StreetViewStatus","OK","onPanoramaData","location","pano","onNoPanoramaData","setZoom","DataImageSource","DataImage","Info","Arrow","FullscreenEnter","FullscreenLeave","VideoPlay","VideoPause","WhiteTile","ReticleIdle","Setting","ChevronRight","Check","ViewIndicator","ReticleDwell","Controls","DEVICEORIENTATION","Modes","UNKNOWN","NORMAL","CARDBOARD","STEREO","checkTouchSupported","msMaxTouchPoints","ImageLoader","onImageLoaded","urlCreator","revokeObjectURL","image","cached","request","arrayBufferView","blob","reference","iconName","hasOwnProperty","setTimeout","URL","webkitURL","createElementNS","XMLHttpRequest","open","responseType","onprogress","lengthComputable","onloadend","Uint8Array","response","Blob","createObjectURL","send","TextureLoader","needsUpdate","CubeTextureLoader","urls","all","loadings","index","images","StereographicShader","uniforms","tDiffuse","resolution","transform","vertexShader","join","fragmentShader","Panorama","ImageQualityLow","ImageQualityFair","ImageQualityMedium","ImageQualityHigh","ImageQualitySuperHigh","animationDuration","defaultInfospotSize","linkedSpots","isInfospotVisible","linkingImageURL","linkingImageScale","side","visible","infospotAnimation","fadeIn","setContainer","onClick","setupTransitions","invertedObject","Infospot","method","scalePlaceHolder","intersects","traverse","HTMLElement","children","forEach","child","getZoomLevel","innerWidth","updateTexture","toggleInfospotVisibility","isVisible","show","hide","setLinkingImage","link","imageScale","imageSrc","spot","toPanorama","fadeInAnimation","fadeOutAnimation","enterTransition","leaveTransition","opacity","fadeOut","onEnter","onLeave","recursiveDispose","transparent","HTMLImageElement","GoogleStreetviewPanorama","gsvLoader","loadRequested","setupGoogleMapAPI","loadGSVLoader","script","onreadystatechange","setGSVLoader","onload","getElementsByTagName","appendChild","getGSVLoader","edgeLength","shader","JSON","parse","BasicPanorama","tile","VideoPanorama","options","playsinline","videoElement","videoRenderObject","videoProgress","isIOS","isMobile","pauseVideo","resumeVideoProgress","toggleVideo","setVideoCurrentTime","setAttribute","onloadeddata","setVideoTexture","querySelectorAll","ontimeupdate","resetVideo","videoTexture","isVideoPaused","percentage","playVideo","isVideoMuted","muteVideo","unmuteVideo","getVideoElement","EmptyPanorama","color","LittlePlanet","ratio","EPS","createGeometry","createMaterial","dragging","userMouse","quatA","quatB","quatCur","quatSlerp","vectorX","vectorY","onWindowResize","registerMouseEvents","onContextMenu","unregisterMouseEvents","pinchDistance","onUpdateCallback","angleX","angleY","addZoomDelta","lowerBound","upperBound","slerp","makeRotationFromQuaternion","ImageLittlePlanet","Reticle","autoSelect","idleImageUrl","dwellImageUrl","dwellTime","dwellSpriteAmount","dwellInterval","IDLE","DWELLING","scaleIdle","scaleDwell","textureLoaded","idleTexture","dwellTexture","depthTest","currentTile","startTime","renderOrder","timerId","updateStatus","loadTextures","setupDwellSprite","select","completeCallback","completeDwelling","updateDwelling","clearTimer","wrapS","startDwelling","elasped","cancelDwelling","Tile","widthSegments","heightSegments","forceDirection","forceAxis","forceAngle","bendModifier","entity","animationFadeOut","animationFadeIn","animationTranslation","tweens","bend","originalGeometry","setEntity","unbend","toState","ripple","TileGroup","tileArray","verticalGap","depthGap","v_gap","d_gap","animationEasing","visibleDelta","setTexture","originalPosition","updateVisbility","imageArray","outline","updateAllTexture","scrollUp","tiles","scrollDown","getIndex","getTileCount","sharedFont","sharedTexture","pendingQueue","SpriteText","text","maxWidth","addText","generateTextGeometry","generateSDFShader","setBMFont","font","anisotropy","pop","textAnchor","computeBoundingBox","computeBoundingSphere","layout","textMesh","getLayout","Widget","DEFAULT_TRANSITION","TOUCH_ENABLED","PREVENT_EVENT_HANDLER","barElement","fullscreenElement","settingElement","mainMenu","activeMainItem","activeSubMenu","mask","addControlBar","bar","styleTranslate","styleOpacity","gradientStyle","float","webkitTransform","msTransform","background","transition","pointerEvents","isHidden","toggle","menu","createDefaultMenu","createMainMenu","createMask","removeChild","deactivate","handler","title","subMenu","addControlButton","createFullscreenButton","createSettingButton","createVideoControl","display","onTap","activated","activate","item","createCustomItem","backgroundImage","webkitTransition","_width","changeSize","unslideAll","tapSkipped","isFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","onFullScreenChange","stylesheetId","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","querySelector","sheet","innerHTML","controlButton","createVideoControlButton","seekBar","createVideoControlSeekbar","isDragging","mouseX","changedTouches","percentageNow","parseInt","progressElement","addControlListeners","onVideoControlDrag","percentageNext","onVideoControlStop","removeControlListeners","progressElementControl","getBoundingClientRect","offsetX","onDispose","backgroundColor","borderRadius","marginTop","createMenuItem","textContent","textDecoration","cursor","slide","unslide","setIcon","icon","setSelectionTitle","selection","addSelection","fontSize","fontWeight","addIcon","flip","backgroundSize","addSubMenu","items","createSubMenu","createMenuItemHeader","header","borderBottom","paddingBottom","menus","onNextTick","slideAll","parentElement","createMenu","addItem","paddingLeft","setActiveItem","activeItem","addHeader","fontFamily","visibility","boxShadow","overflow","willChange","backgroundRepeat","backgroundPosition","webkitUserSelect","MozUserSelect","userSelect","filter","webkitFilter","mergeStyleOptions","animated","postLoad","naturalWidth","naturalHeight","startScale","scaleUpAnimation","scaleFactor","scaleDownAnimation","isHovering","cursorStyle","mode","HANDLER_FOCUS","showAnimation","hideAnimation","onHover","onHoverStart","onHoverEnd","onDualEyeEffect","onDismiss","setFocusMethod","getContainer","lockHoverElement","unlockHoverElement","mouseEvent","_height","locked","halfWidth","halfHeight","cloneNode","translateElement","verticalDelta","setElementStyle","setText","setCursorHoverStyle","addHoverText","maxHeight","textShadow","addHoverElement","removeHoverElement","focus","controlBar","controlButtons","autoHideControlBar","autoHideInfospot","horizontalView","clickTolerance","cameraFov","reverseDragging","enableReticle","autoReticleSelect","viewIndicator","indicatorSize","output","innerHeight","antialias","viewIndicatorSize","reticle","tempEnableReticle","OrbitControls","DeviceOrientationControls","CardboardEffect","StereoEffect","controls","effect","widget","hoverObject","infospot","pressEntityObject","pressObject","raycaster","raycasterPoint","updateCallbacks","requestAnimationId","cameraFrustum","cameraViewProjectionMatrix","outputDivElement","HANDLER_MOUSE_DOWN","HANDLER_MOUSE_UP","HANDLER_MOUSE_MOVE","HANDLER_WINDOW_RESIZE","HANDLER_KEY_DOWN","HANDLER_KEY_UP","HANDLER_TAP","OUTPUT_INFOSPOT","tweenLeftAnimation","tweenUpAnimation","setPixelRatio","devicePixelRatio","setClearColor","sortObjects","passiveRendering","control","addReticle","addDefaultControlBar","addViewIndicator","reverseDraggingDirection","enableReticleControl","registerMouseAndTouchEvents","addOutputElement","registerEventListeners","animate","eventHandler","addPanoramaEventListener","setPanorama","buttonName","leavingPanorama","hideInfospot","afterEnterComplete","dispatchEventToChildren","activateWidgetItem","controlIndex","ControlMenuItem","ModeMenuItem","enableEffect","disableEffect","disableReticleControl","unregisterMouseAndTouchEvents","registerReticleEvent","updateReticleEvent","unregisterReticleEvent","toggleVideoPlay","onVideoUpdate","addUpdateCallback","removeUpdateCallback","showVideoWidget","hideVideoWidget","updateVideoPlayButton","setCameraControl","getControl","getScene","getCamera","getRenderer","getControlName","getNextControlName","getNextControlIndex","nextIndex","setCameraFov","enableControl","disableControl","toggleNextControl","getScreenVector","worldVector","widthHalf","heightHalf","project","checkSpriteInViewport","sprite","matrixWorldInverse","matrixWorld","multiplyMatrices","projectionMatrix","setFromMatrix","intersectsSprite","tweenControlCenter","ha","va","chv","cvv","hv","vv","vptc","ov","nv","getWorldDirection","getWorldPosition","angleTo","tweenControlCenterByObject","isUnderScalePlaceHolder","traverseAncestors","ancestor","invertXVector","windowWidth","windowHeight","expand","contains","documentElement","outputInfospotPosition","point","panoramaWorldPosition","outputPosition","intersectObject","toFixed","info","onTarget","toggleControlBar","intersect_entity","intersect","offsetLeft","offsetTop","setFromCamera","intersectObjects","getConvertedIntersect","passThrough","key","onChange","centerX","centerY","unregisterEventListeners","destory","onPanoramaDispose","loadAsyncRequest","loadViewIndicator","asyncEvent","viewIndicatorDiv","responseXML","indicator","setIndicatorD","currentPanoAngle","fovAngle","leftAngle","rightAngle","leftX","leftY","rightX","rightY","indicatorD","indicatorOnMouseEnter","indicatorOnMouseLeave","appendControlItem","option","group","Error","1","TextGeometry","opt","Base","_opt","assign","createLayout","inherits","createIndices","buffer","utils","TypeError","flipY","texWidth","common","scaleW","texHeight","scaleH","glyphs","glyph","bitmap","visibleGlyphs","indices","clockwise","attr","multipage","boundingSphere","itemSize","computeSphere","isNaN","boundingBox","bbox","makeEmpty","computeBox","./lib/utils","./lib/vertices","layout-bmfont-text","object-assign","quad-indices","three-buffer-vertex-data","2","bounds","box","minX","minY","maxX","maxY","3","bw","bh","u0","u1","xoffset","yoffset","4","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor","5","TextLayout","_measure","computeMetrics","addGetter","wrapper","Function","getGlyphById","chars","glyphIdx","findChar","getXHeight","X_HEIGHTS","charCodeAt","idx","getMGlyph","M_WIDTHS","getCapHeight","CAP_HEIGHTS","getKerning","kernings","table","kern","first","second","getAlignType","align","ALIGN_CENTER","ALIGN_RIGHT","ALIGN_LEFT","wordWrap","xtend","number","TAB_ID","SPACE_ID","measure","tabSize","_setupSpaceGlyphs","lines","minWidth","maxLineWidth","reduce","prev","line","lineHeight","baseline","base","descender","letterSpacing","_descender","_baseline","_xHeight","_capHeight","_lineHeight","_ascender","lineIndex","lastGlyph","lineWidth","getGlyph","tx","xadvance","_linesTotal","_fallbackSpaceGlyph","_fallbackTabGlyph","space","tabWidth","curPen","curWidth","nextPen","nextWidth","as-number","indexof-property","word-wrapper","6","num","def","7","8","idxOf","chr","isWhitespace","whitespace","pre","lineStart","isNewline","newline","lineEnd","measured","greedy","testWidth","MAX_VALUE","newLine","newlineChar","nextStart","monospace","substring","9","extend","10","Buffer","isArrayBuffer","arr","toString","getBinaryOpts","xml2","req","overrideMimeType","xhr","noop","parseASCII","parseXML","readBinary","isBinaryFormat","cb","uri","binary","err","res","statusCode","isBuffer","encoding","trim","headers","./lib/is-binary","parse-bmfont-ascii","parse-bmfont-binary","parse-bmfont-xml","11","equal","HEADER","buf","slice","buffer-equal","12","equals","13","splitLine","split","str","match","dt","parseData","out","parseIntList","lineData","file","14","readBlock","blockID","readUInt8","blockSize","readInt32LE","readInfo","readCommon","readPages","readChars","readKernings","readInt16LE","bitField","smooth","unicode","italic","bold","fixedHeight","charset","stretchH","readUInt16LE","aa","readInt8","spacing","readStringNT","packed","alphaChnl","redChnl","greenChnl","blueChnl","readNameNT","len","char","off","readUInt32LE","chnl","pos","every","byte","15","getAttribs","getAttribList","dict","attrib","mapName","nodeName","nodeValue","attribs","NAME_MAP","toLowerCase","parseAttributes","parseFromString","scaleh","scalew","stretchh","lineheight","alphachnl","redchnl","greenchnl","bluechnl","xmlRoot","pageRoot","getAttribute","childTag","./parse-attribs","xml-parse-from-string","16","obj","17","DOMParser","ActiveXObject","xmlDoc","async","loadXML","div","18","isEmpty","initParams","params","isFunction","createXHR","_createXHR","readystatechange","loadFunc","getBody","responseText","isJson","errorFunc","evt","clearTimeout","timeoutTimer","failureResponse","aborted","useXDR","rawRequest","getAllResponseHeaders","parseHeaders","once","cors","XDomainRequest","sync","json","onerror","ontimeout","username","password","withCredentials","timeout","abort","setRequestHeader","beforeSend","iterator","toUpperCase","global/window","is-function","parse-headers","19","20","string","alert","confirm","prompt","21","called","apply","proto","22","list","context","forEachArray","forEachString","forEachObject","23","24","isArray","arg","row","for-each","25","dup","26","toObject","propIsEnumerable","propertyIsEnumerable","from","symbols","27","dtype","anArray","CW","CCW","dir","numIndices","j","an-array","is-buffer","28","BYTES_PER_ELEMENT","29","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Float64Array","Uint8ClampedArray","30","_isBuffer","31","setIndex","isR69","newAttrib","updateAttribute","addAttribute","rebuildAttribute","flatten","attribLength","flatten-vertex-data","32","flattenVertexData","dim","dstLength","Ctor","33","34","alphaTest","precision","35","loadFont","tex","load-bmfont","createText","SDFShader","loadBMFont","fontObject","../","../shaders/sdf","./load","kMaxLength","TYPED_ARRAY_SUPPORT","fromNumber","fromString","fromObject","that","allocate","checked","byteLength","write","fromBuffer","fromArray","ArrayBuffer","fromTypedArray","fromArrayBuffer","fromArrayLike","fromJsonObject","__proto__","poolSize","rootParent","RangeError","SlowBuffer","subject","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","binarySlice","base64Slice","utf16leSlice","hexWrite","remaining","strLen","parsed","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","binaryWrite","base64Write","ucs2Write","utf16leToBytes","base64","fromByteArray","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","stringtrim","INVALID_BASE64_RE","units","leadSurrogate","byteArray","hi","lo","toByteArray","dst","INSPECT_MAX_BYTES","foo","subarray","compare","isEncoding","inspect","byteOffset","arrayIndexOf","foundIndex","swap","toJSON","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt16BE","readUInt32BE","readIntLE","readIntBE","readInt16BE","readInt32BE","readFloatLE","read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","fill","base64-js","isarray","38","decode","elt","PLUS","PLUS_URL_SAFE","SLASH","SLASH_URL_SAFE","NUMBER","UPPER","LOWER","b64ToByteArray","b64","L","placeHolders","Arr","uint8ToBase64","uint8","encode","lookup","temp","extraBytes","base64js","39","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","40","72","__WEBPACK_IMPORTED_MODULE_0_three__"],"mappings":"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","file":"assets/js/app.7c136bec1a338e7c3d6c.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 126:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(57)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:70%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:30%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .hljs{background:transparent}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 127:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(57)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.demos,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.demos-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.demos-header .title{font-weight:700;font-size:18px;display:inline-block}.demos-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.demos-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.demos-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.demos-menu .demos-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.demos-menu .demos-menu-item>a{display:block;width:100%;height:100%}.demos-menu .demos-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.demos-menu .demos-menu-item:hover>a{color:#39f}.demos-pages{height:100%;overflow:hidden}.demo-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.demo-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;animation:loading-rotate .75s 0s linear infinite}.demo-loading:after,.demo-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.demo-loading:after{height:100%;width:0}@keyframes loading-rotate{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(.6)}to{transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 128:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 309:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(67),\n  /* template */\n  __webpack_require__(314),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 310:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(68),\n  /* template */\n  __webpack_require__(315),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 311:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(69),\n  /* template */\n  __webpack_require__(316),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 312:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n                \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)))]), _vm._v(\"\\n                \")])])])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 313:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demos\"\n  }, [_c('div', {\n    staticClass: \"demos-content\"\n  }, [_c('ul', {\n    staticClass: \"demos-menu\"\n  }, [_c('li', {\n    staticClass: \"demos-menu-title\"\n  }, [_vm._v(\"demos\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-pano\"\n    }\n  }, [_vm._v(\"basic panorama\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-cube-pano\"\n    }\n  }, [_vm._v(\"Cube Faces\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demos-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 314:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"cube\",\n      \"source\": \"assets/faces/pano_%s.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 315:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"source\": \"assets/equirectangular.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 316:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"src\": \"./../assets/equirectangular.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 317:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 319:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(126);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(60)(\"56304fc1\", content, true);\n\n/***/ }),\n\n/***/ 320:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(127);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(60)(\"48e2ad6a\", content, true);\n\n/***/ }),\n\n/***/ 36:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(319)\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(66),\n  /* template */\n  __webpack_require__(312),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 37:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(70),\n  /* template */\n  __webpack_require__(317),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 61:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(318);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages__ = __webpack_require__(64);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\nvar routes = __WEBPACK_IMPORTED_MODULE_2__pages__[\"a\" /* pages */].map(function (page) {\n\n    var name = page.name;\n\n    return {\n        path: '/' + name,\n        name: name,\n        component: page\n    };\n});\n\nconsole.log(routes);\n\nroutes.push({\n    path: '*',\n    redirect: '/demo-pano'\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({ routes: routes }));\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(320)\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(65),\n  /* template */\n  __webpack_require__(313),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 63:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue__ = __webpack_require__(62);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(61);\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App_vue___default.a);\n  }\n});\n\n/***/ }),\n\n/***/ 64:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return pages; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_pano__ = __webpack_require__(310);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__demo_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__ = __webpack_require__(309);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_video_pano__ = __webpack_require__(311);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__demo_video_pano__);\n\n\n\n\nvar pages = [__WEBPACK_IMPORTED_MODULE_0__demo_pano___default.a, __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default.a, __WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default.a];\n\n\n\n/***/ }),\n\n/***/ 65:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app'\n});\n\n/***/ }),\n\n/***/ 66:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__ = __webpack_require__(128);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js__ = __webpack_require__(130);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_highlight_js__);\n\n\n\n\n\nvar codeHandler = function codeHandler(code) {\n    var scripts = '<script src=\"vue.js\"></script>\\n \\xA0 \\xA0<script src=\"vue-vr.min.js\"></script>';\n\n    return code.replace(/#scripts#/ig, scripts);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app',\n    props: {\n        vueCode: String,\n        htmlCode: {\n            type: String,\n            default: '// TODO'\n        }\n    },\n    mounted: function mounted() {\n        __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.vueCode);\n        __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.htmlCode);\n    },\n    data: function data() {\n        return {};\n    },\n\n    filters: {\n        code: function code(val) {\n            return codeHandler(val);\n        }\n    },\n    components: {}\n});\n\n/***/ }),\n\n/***/ 67:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        type=\\'cube\\'\\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\\n</template>\\n<script>\\n    import { Pano } from \\'vuejs-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'cube\\'\\n            source=\"assets/faces/pano_%s.jpg\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-cube-pano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 68:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        src=\"assets/equirectangular.jpg\">\\n    </Pano>\\n</template>\\n\\n<script>\\n    import { Pano } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'cube\\'\\n            source=\"assets/equirectangular.jpg\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-pano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 69:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        src=\"./../assets/equirectangular.jpg\">\\n    </Pano>\\n</template>\\n\\n<script>\\n    import { Pano } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'cube\\'\\n            source=\"./../assets/equirectangular.jpg\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-video-pano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__util__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_panolens__ = __webpack_require__(71);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  props: {\n    source: {\n      type: String\n    },\n    type: {\n      type: String\n    },\n    width: {\n      type: Number\n    },\n    height: {\n      type: Number\n    }\n  },\n  data: function data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      viewer: null,\n      panorama: null\n    };\n  },\n  created: function created() {\n    window.addEventListener(\"resize\", this.onResize, false);\n  },\n  mounted: function mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new __WEBPACK_IMPORTED_MODULE_1__lib_panolens__[\"a\" /* default */].Viewer({\n      container: this.$el\n    });\n\n    console.log(this.source);\n    this.loadPano();\n  },\n\n  watch: {\n    source: function source() {\n      if (!this.viewer) return;\n      if (!this.panorama) return;\n      this.loadPano();\n    }\n  },\n  methods: {\n    onResize: function onResize() {\n      var _this = this;\n\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(function () {\n          _this.size = {\n            width: _this.$el.offsetWidth,\n            height: _this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    loadPano: function loadPano() {\n      if (!this.source) return;\n\n      switch (this.type) {\n        case 'cube':\n          var l = this.source.replace('%s', 'l');\n          var f = this.source.replace('%s', 'f');\n          var r = this.source.replace('%s', 'r');\n          var b = this.source.replace('%s', 'b');\n          var u = this.source.replace('%s', 'u');\n          var d = this.source.replace('%s', 'd');\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_1__lib_panolens__[\"a\" /* default */].CubePanorama([r, l, u, d, f, b]);\n          break;\n        default:\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_1__lib_panolens__[\"a\" /* default */].ImagePanorama(this.source);\n          break;\n      }\n\n      this.panorama.y = Math.PI / 2.;\n\n      this.viewer.add(this.panorama);\n      this.$emit(\"on-load\");\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 71:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process, module, global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__ = __webpack_require__(74);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__ = __webpack_require__(73);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_three__ = __webpack_require__(59);\nvar require;var require;\n\n\n\n\n\n\n\n\n\nvar PANOLENS = { REVISION: '9' };\n;\nvar enableInlineVideo = function () {\n\t\"use strict\";\n\n\tfunction e(e, i, n, r) {\n\t\tfunction t(n) {\n\t\t\td = i(t, r), e(n - (a || n)), a = n;\n\t\t}var d, a;return { start: function start() {\n\t\t\t\td || t(0);\n\t\t\t}, stop: function stop() {\n\t\t\t\tn(d), d = null, a = 0;\n\t\t\t} };\n\t}function i(i) {\n\t\treturn e(i, requestAnimationFrame, cancelAnimationFrame);\n\t}function n(e, i, n) {\n\t\tfunction r(r) {\n\t\t\tn && !n(e, i) || r.stopImmediatePropagation();\n\t\t}return e.addEventListener(i, r), r;\n\t}function r(e, i, n, r) {\n\t\tfunction t() {\n\t\t\treturn n[i];\n\t\t}function d(e) {\n\t\t\tn[i] = e;\n\t\t}r && d(e[i]), __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default()(e, i, { get: t, set: d });\n\t}function t(e, i, n) {\n\t\tn.addEventListener(i, function () {\n\t\t\treturn e.dispatchEvent(new Event(i));\n\t\t});\n\t}function d(e, i) {\n\t\t__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default.a.resolve().then(function () {\n\t\t\te.dispatchEvent(new Event(i));\n\t\t});\n\t}function a(e) {\n\t\tvar i = new Audio();return t(e, \"play\", i), t(e, \"playing\", i), t(e, \"pause\", i), i.crossOrigin = e.crossOrigin, i.src = e.src || e.currentSrc || \"data:\", i;\n\t}function u(e, i, n) {\n\t\t(m || 0) + 200 < Date.now() && (e[h] = !0, m = Date.now()), n || (e.currentTime = i), k[++T % 3] = 100 * i | 0;\n\t}function o(e) {\n\t\treturn e.driver.currentTime >= e.video.duration;\n\t}function s(e) {\n\t\tvar i = this;i.video.readyState >= i.video.HAVE_FUTURE_DATA ? (i.hasAudio || (i.driver.currentTime = i.video.currentTime + e * i.video.playbackRate / 1e3, i.video.loop && o(i) && (i.driver.currentTime = 0)), u(i.video, i.driver.currentTime)) : i.video.networkState === i.video.NETWORK_IDLE && 0 === i.video.buffered.length && i.video.load(), i.video.ended && (delete i.video[h], i.video.pause(!0));\n\t}function c() {\n\t\tvar e = this,\n\t\t    i = e[g];if (e.webkitDisplayingFullscreen) return void e[E]();\"data:\" !== i.driver.src && i.driver.src !== e.src && (u(e, 0, !0), i.driver.src = e.src), e.paused && (i.paused = !1, 0 === e.buffered.length && e.load(), i.driver.play(), i.updater.start(), i.hasAudio || (d(e, \"play\"), i.video.readyState >= i.video.HAVE_ENOUGH_DATA && d(e, \"playing\")));\n\t}function v(e) {\n\t\tvar i = this,\n\t\t    n = i[g];n.driver.pause(), n.updater.stop(), i.webkitDisplayingFullscreen && i[w](), n.paused && !e || (n.paused = !0, n.hasAudio || d(i, \"pause\"), i.ended && !i.webkitDisplayingFullscreen && (i[h] = !0, d(i, \"ended\")));\n\t}function p(e, n) {\n\t\tvar r = {};e[g] = r, r.paused = !0, r.hasAudio = n, r.video = e, r.updater = i(s.bind(r)), n ? r.driver = a(e) : (e.addEventListener(\"canplay\", function () {\n\t\t\te.paused || d(e, \"playing\");\n\t\t}), r.driver = { src: e.src || e.currentSrc || \"data:\", muted: !0, paused: !0, pause: function pause() {\n\t\t\t\tr.driver.paused = !0;\n\t\t\t}, play: function play() {\n\t\t\t\tr.driver.paused = !1, o(r) && u(e, 0);\n\t\t\t}, get ended() {\n\t\t\t\treturn o(r);\n\t\t\t} }), e.addEventListener(\"emptied\", function () {\n\t\t\tvar i = !r.driver.src || \"data:\" === r.driver.src;r.driver.src && r.driver.src !== e.src && (u(e, 0, !0), r.driver.src = e.src, i || !n && e.autoplay ? r.driver.play() : r.updater.stop());\n\t\t}, !1), e.addEventListener(\"webkitbeginfullscreen\", function () {\n\t\t\te.paused ? n && 0 === r.driver.buffered.length && r.driver.load() : (e.pause(), e[E]());\n\t\t}), n && (e.addEventListener(\"webkitendfullscreen\", function () {\n\t\t\tr.driver.currentTime = e.currentTime;\n\t\t}), e.addEventListener(\"seeking\", function () {\n\t\t\tk.indexOf(100 * e.currentTime | 0) < 0 && (r.driver.currentTime = e.currentTime);\n\t\t}));\n\t}function l(e) {\n\t\tvar i = e[h];return delete e[h], !e.webkitDisplayingFullscreen && !i;\n\t}function f(e) {\n\t\tvar i = e[g];e[E] = e.play, e[w] = e.pause, e.play = c, e.pause = v, r(e, \"paused\", i.driver), r(e, \"muted\", i.driver, !0), r(e, \"playbackRate\", i.driver, !0), r(e, \"ended\", i.driver), r(e, \"loop\", i.driver, !0), n(e, \"seeking\", function (e) {\n\t\t\treturn !e.webkitDisplayingFullscreen;\n\t\t}), n(e, \"seeked\", function (e) {\n\t\t\treturn !e.webkitDisplayingFullscreen;\n\t\t}), n(e, \"timeupdate\", l), n(e, \"ended\", l);\n\t}function y(e, i) {\n\t\tif (void 0 === i && (i = {}), !e[g]) {\n\t\t\tif (!i.everywhere) {\n\t\t\t\tif (!b) return;if (!(i.iPad || i.ipad ? /iPhone|iPod|iPad/ : /iPhone|iPod/).test(navigator.userAgent)) return;\n\t\t\t}e.pause();var n = e.autoplay;e.autoplay = !1, p(e, !e.muted), f(e), e.classList.add(\"IIV\"), e.muted && n && (e.play(), e.addEventListener(\"playing\", function i() {\n\t\t\t\te.autoplay = !0, e.removeEventListener(\"playing\", i);\n\t\t\t})), /iPhone|iPod|iPad/.test(navigator.platform) || console.warn(\"iphone-inline-video is not guaranteed to work in emulated environments\");\n\t\t}\n\t}var m,\n\t    b = \"object\" == (typeof document === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default()(document)) && \"object-fit\" in document.head.style && !matchMedia(\"(-webkit-video-playable-inline)\").matches,\n\t    g = \"bfred-it:iphone-inline-video\",\n\t    h = \"bfred-it:iphone-inline-video:event\",\n\t    E = \"bfred-it:iphone-inline-video:nativeplay\",\n\t    w = \"bfred-it:iphone-inline-video:nativepause\",\n\t    k = [],\n\t    T = 0;return y;\n}();\n;\n\nvar TWEEN = TWEEN || function () {\n\n\tvar _tweens = [];\n\n\treturn {\n\n\t\tgetAll: function getAll() {\n\n\t\t\treturn _tweens;\n\t\t},\n\n\t\tremoveAll: function removeAll() {\n\n\t\t\t_tweens = [];\n\t\t},\n\n\t\tadd: function add(tween) {\n\n\t\t\t_tweens.push(tween);\n\t\t},\n\n\t\tremove: function remove(tween) {\n\n\t\t\tvar i = _tweens.indexOf(tween);\n\n\t\t\tif (i !== -1) {\n\t\t\t\t_tweens.splice(i, 1);\n\t\t\t}\n\t\t},\n\n\t\tupdate: function update(time, preserve) {\n\n\t\t\tif (_tweens.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar i = 0;\n\n\t\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t\twhile (i < _tweens.length) {\n\n\t\t\t\tif (_tweens[i].update(time) || preserve) {\n\t\t\t\t\ti++;\n\t\t\t\t} else {\n\t\t\t\t\t_tweens.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t};\n}();\n\nif (typeof window === 'undefined' && typeof process !== 'undefined') {\n\tTWEEN.now = function () {\n\t\tvar time = process.hrtime();\n\n\t\treturn time[0] * 1000 + time[1] / 1000000;\n\t};\n} else if (typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined) {\n\t\tTWEEN.now = window.performance.now.bind(window.performance);\n\t} else if (Date.now !== undefined) {\n\t\t\tTWEEN.now = Date.now;\n\t\t} else {\n\t\t\t\tTWEEN.now = function () {\n\t\t\t\t\treturn new Date().getTime();\n\t\t\t\t};\n\t\t\t}\n\nTWEEN.Tween = function (object) {\n\n\tvar _object = object;\n\tvar _valuesStart = {};\n\tvar _valuesEnd = {};\n\tvar _valuesStartRepeat = {};\n\tvar _duration = 1000;\n\tvar _repeat = 0;\n\tvar _repeatDelayTime;\n\tvar _yoyo = false;\n\tvar _isPlaying = false;\n\tvar _reversed = false;\n\tvar _delayTime = 0;\n\tvar _startTime = null;\n\tvar _easingFunction = TWEEN.Easing.Linear.None;\n\tvar _interpolationFunction = TWEEN.Interpolation.Linear;\n\tvar _chainedTweens = [];\n\tvar _onStartCallback = null;\n\tvar _onStartCallbackFired = false;\n\tvar _onUpdateCallback = null;\n\tvar _onCompleteCallback = null;\n\tvar _onStopCallback = null;\n\n\tthis.to = function (properties, duration) {\n\n\t\t_valuesEnd = properties;\n\n\t\tif (duration !== undefined) {\n\t\t\t_duration = duration;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.start = function (time) {\n\n\t\tTWEEN.add(this);\n\n\t\t_isPlaying = true;\n\n\t\t_onStartCallbackFired = false;\n\n\t\t_startTime = time !== undefined ? time : TWEEN.now();\n\t\t_startTime += _delayTime;\n\n\t\tfor (var property in _valuesEnd) {\n\t\t\tif (_valuesEnd[property] instanceof Array) {\n\n\t\t\t\tif (_valuesEnd[property].length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t_valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n\t\t\t}\n\n\t\t\tif (_object[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t_valuesStart[property] = _object[property];\n\n\t\t\tif (_valuesStart[property] instanceof Array === false) {\n\t\t\t\t_valuesStart[property] *= 1.0;\n\t\t\t}\n\n\t\t\t_valuesStartRepeat[property] = _valuesStart[property] || 0;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.stop = function () {\n\n\t\tif (!_isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tTWEEN.remove(this);\n\t\t_isPlaying = false;\n\n\t\tif (_onStopCallback !== null) {\n\t\t\t_onStopCallback.call(_object, _object);\n\t\t}\n\n\t\tthis.stopChainedTweens();\n\t\treturn this;\n\t};\n\n\tthis.end = function () {\n\n\t\tthis.update(_startTime + _duration);\n\t\treturn this;\n\t};\n\n\tthis.stopChainedTweens = function () {\n\n\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t_chainedTweens[i].stop();\n\t\t}\n\t};\n\n\tthis.delay = function (amount) {\n\n\t\t_delayTime = amount;\n\t\treturn this;\n\t};\n\n\tthis.repeat = function (times) {\n\n\t\t_repeat = times;\n\t\treturn this;\n\t};\n\n\tthis.repeatDelay = function (amount) {\n\n\t\t_repeatDelayTime = amount;\n\t\treturn this;\n\t};\n\n\tthis.yoyo = function (yoyo) {\n\n\t\t_yoyo = yoyo;\n\t\treturn this;\n\t};\n\n\tthis.easing = function (easing) {\n\n\t\t_easingFunction = easing;\n\t\treturn this;\n\t};\n\n\tthis.interpolation = function (interpolation) {\n\n\t\t_interpolationFunction = interpolation;\n\t\treturn this;\n\t};\n\n\tthis.chain = function () {\n\n\t\t_chainedTweens = arguments;\n\t\treturn this;\n\t};\n\n\tthis.onStart = function (callback) {\n\n\t\t_onStartCallback = callback;\n\t\treturn this;\n\t};\n\n\tthis.onUpdate = function (callback) {\n\n\t\t_onUpdateCallback = callback;\n\t\treturn this;\n\t};\n\n\tthis.onComplete = function (callback) {\n\n\t\t_onCompleteCallback = callback;\n\t\treturn this;\n\t};\n\n\tthis.onStop = function (callback) {\n\n\t\t_onStopCallback = callback;\n\t\treturn this;\n\t};\n\n\tthis.update = function (time) {\n\n\t\tvar property;\n\t\tvar elapsed;\n\t\tvar value;\n\n\t\tif (time < _startTime) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (_onStartCallbackFired === false) {\n\n\t\t\tif (_onStartCallback !== null) {\n\t\t\t\t_onStartCallback.call(_object, _object);\n\t\t\t}\n\n\t\t\t_onStartCallbackFired = true;\n\t\t}\n\n\t\telapsed = (time - _startTime) / _duration;\n\t\telapsed = elapsed > 1 ? 1 : elapsed;\n\n\t\tvalue = _easingFunction(elapsed);\n\n\t\tfor (property in _valuesEnd) {\n\t\t\tif (_valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar start = _valuesStart[property] || 0;\n\t\t\tvar end = _valuesEnd[property];\n\n\t\t\tif (end instanceof Array) {\n\n\t\t\t\t_object[property] = _interpolationFunction(end, value);\n\t\t\t} else {\n\t\t\t\tif (typeof end === 'string') {\n\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\tend = start + parseFloat(end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = parseFloat(end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof end === 'number') {\n\t\t\t\t\t_object[property] = start + (end - start) * value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (_onUpdateCallback !== null) {\n\t\t\t_onUpdateCallback.call(_object, value);\n\t\t}\n\n\t\tif (elapsed === 1) {\n\n\t\t\tif (_repeat > 0) {\n\n\t\t\t\tif (isFinite(_repeat)) {\n\t\t\t\t\t_repeat--;\n\t\t\t\t}\n\n\t\t\t\tfor (property in _valuesStartRepeat) {\n\n\t\t\t\t\tif (typeof _valuesEnd[property] === 'string') {\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_yoyo) {\n\t\t\t\t\t\tvar tmp = _valuesStartRepeat[property];\n\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesEnd[property];\n\t\t\t\t\t\t_valuesEnd[property] = tmp;\n\t\t\t\t\t}\n\n\t\t\t\t\t_valuesStart[property] = _valuesStartRepeat[property];\n\t\t\t\t}\n\n\t\t\t\tif (_yoyo) {\n\t\t\t\t\t_reversed = !_reversed;\n\t\t\t\t}\n\n\t\t\t\tif (_repeatDelayTime !== undefined) {\n\t\t\t\t\t_startTime = time + _repeatDelayTime;\n\t\t\t\t} else {\n\t\t\t\t\t_startTime = time + _delayTime;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t} else {\n\n\t\t\t\tif (_onCompleteCallback !== null) {\n\n\t\t\t\t\t_onCompleteCallback.call(_object, _object);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t_chainedTweens[i].start(_startTime + _duration);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n};\n\nTWEEN.Easing = {\n\n\tLinear: {\n\n\t\tNone: function None(k) {\n\n\t\t\treturn k;\n\t\t}\n\n\t},\n\n\tQuadratic: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k * k;\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn k * (2 - k);\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\n\t\t\treturn -0.5 * (--k * (k - 2) - 1);\n\t\t}\n\n\t},\n\n\tCubic: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k * k * k;\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn --k * k * k + 1;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\t\t}\n\n\t},\n\n\tQuartic: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k * k * k * k;\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn 1 - --k * k * k * k;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn -0.5 * ((k -= 2) * k * k * k - 2);\n\t\t}\n\n\t},\n\n\tQuintic: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k * k * k * k * k;\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn --k * k * k * k * k + 1;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\t\t}\n\n\t},\n\n\tSinusoidal: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn Math.sin(k * Math.PI / 2);\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\t\t}\n\n\t},\n\n\tExponential: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n\t\t}\n\n\t},\n\n\tCircular: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn Math.sqrt(1 - --k * k);\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn -0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\t\t}\n\n\t},\n\n\tElastic: {\n\n\t\tIn: function In(k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t}\n\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\t\t}\n\n\t},\n\n\tBack: {\n\n\t\tIn: function In(k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn k * k * ((s + 1) * k - s);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\t\t}\n\n\t},\n\n\tBounce: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\tif (k < 1 / 2.75) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < 2 / 2.75) {\n\t\t\t\treturn 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n\t\t\t} else if (k < 2.5 / 2.75) {\n\t\t\t\treturn 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n\t\t\t}\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\t\t}\n\n\t}\n\n};\n\nTWEEN.Interpolation = {\n\n\tLinear: function Linear(v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\t},\n\n\tBezier: function Bezier(v, k) {\n\n\t\tvar b = 0;\n\t\tvar n = v.length - 1;\n\t\tvar pw = Math.pow;\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\tfor (var i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\t},\n\n\tCatmullRom: function CatmullRom(v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t}\n\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\t\t} else {\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\t\t}\n\t},\n\n\tUtils: {\n\n\t\tLinear: function Linear(p0, p1, t) {\n\n\t\t\treturn (p1 - p0) * t + p0;\n\t\t},\n\n\t\tBernstein: function Bernstein(n, i) {\n\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\t\t},\n\n\t\tFactorial: function () {\n\n\t\t\tvar a = [1];\n\n\t\t\treturn function (n) {\n\n\t\t\t\tvar s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\t\t\t};\n\t\t}(),\n\n\t\tCatmullRom: function CatmullRom(p0, p1, p2, p3, t) {\n\n\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t * t2;\n\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\t\t}\n\n\t}\n\n};\n\n(function (root) {\n\n\tif (typeof define === 'function' && __webpack_require__(322)) {\n\t\tdefine([], function () {\n\t\t\treturn TWEEN;\n\t\t});\n\t} else if (typeof module !== 'undefined' && (typeof exports === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default()(exports)) === 'object') {\n\t\tmodule.exports = TWEEN;\n\t} else if (root !== undefined) {\n\t\troot.TWEEN = TWEEN;\n\t}\n})(this);\n;\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"] = function (object, domElement) {\n\n\tthis.object = object;\n\tthis.domElement = domElement !== undefined ? domElement : document;\n\tthis.frameId;\n\n\tthis.enabled = true;\n\n\tthis.target = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n\tthis.center = this.target;\n\n\tthis.noZoom = false;\n\tthis.zoomSpeed = 1.0;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\tthis.noRotate = false;\n\tthis.rotateSpeed = -0.15;\n\n\tthis.noPan = true;\n\tthis.keyPanSpeed = 7.0;\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0;\n\tthis.minPolarAngle = 0;\n\tthis.maxPolarAngle = Math.PI;\n\tthis.momentumDampingFactor = 0.90;\n\tthis.momentumScalingFactor = -0.005;\n\tthis.momentumKeydownFactor = 20;\n\n\tthis.minFov = 30;\n\tthis.maxFov = 120;\n\n\tthis.minAzimuthAngle = -Infinity;\n\tthis.maxAzimuthAngle = Infinity;\n\tthis.noKeys = false;\n\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\tthis.mouseButtons = { ORBIT: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].LEFT, ZOOM: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].MIDDLE, PAN: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].RIGHT };\n\n\tvar scope = this;\n\n\tvar EPS = 10e-8;\n\tvar MEPS = 10e-5;\n\n\tvar rotateStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar rotateEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar rotateDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n\tvar panStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar panEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar panDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar panOffset = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n\tvar offset = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n\tvar dollyStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar dollyEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar dollyDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n\tvar theta;\n\tvar phi;\n\tvar phiDelta = 0;\n\tvar thetaDelta = 0;\n\tvar scale = 1;\n\tvar pan = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n\tvar lastPosition = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\tvar lastQuaternion = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n\tvar momentumLeft = 0,\n\t    momentumUp = 0;\n\tvar eventCurrent, eventPrevious;\n\tvar momentumOn = false;\n\n\tvar keyUp, keyBottom, keyLeft, keyRight;\n\n\tvar STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n\tvar state = STATE.NONE;\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\tvar quat = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]().setFromUnitVectors(object.up, new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0));\n\tvar quatInverse = quat.clone().inverse();\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tthis.setLastQuaternion = function (quaternion) {\n\t\tlastQuaternion.copy(quaternion);\n\t\tscope.object.quaternion.copy(quaternion);\n\t};\n\n\tthis.getLastPosition = function () {\n\t\treturn lastPosition;\n\t};\n\n\tthis.rotateLeft = function (angle) {\n\n\t\tif (angle === undefined) {\n\n\t\t\tangle = getAutoRotationAngle();\n\t\t}\n\n\t\tthetaDelta -= angle;\n\t};\n\n\tthis.rotateUp = function (angle) {\n\n\t\tif (angle === undefined) {\n\n\t\t\tangle = getAutoRotationAngle();\n\t\t}\n\n\t\tphiDelta -= angle;\n\t};\n\n\tthis.panLeft = function (distance) {\n\n\t\tvar te = this.object.matrix.elements;\n\n\t\tpanOffset.set(te[0], te[1], te[2]);\n\t\tpanOffset.multiplyScalar(-distance);\n\n\t\tpan.add(panOffset);\n\t};\n\n\tthis.panUp = function (distance) {\n\n\t\tvar te = this.object.matrix.elements;\n\n\t\tpanOffset.set(te[4], te[5], te[6]);\n\t\tpanOffset.multiplyScalar(distance);\n\n\t\tpan.add(panOffset);\n\t};\n\n\tthis.pan = function (deltaX, deltaY) {\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n\t\t\tvar position = scope.object.position;\n\t\t\tvar offset = position.clone().sub(scope.target);\n\t\t\tvar targetDistance = offset.length();\n\n\t\t\ttargetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n\t\t\tscope.panLeft(2 * deltaX * targetDistance / element.clientHeight);\n\t\t\tscope.panUp(2 * deltaY * targetDistance / element.clientHeight);\n\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n\t\t\tscope.panLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth);\n\t\t\tscope.panUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight);\n\t\t} else {\n\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n\t\t}\n\t};\n\n\tthis.momentum = function () {\n\n\t\tif (!momentumOn) return;\n\n\t\tif (Math.abs(momentumLeft) < MEPS && Math.abs(momentumUp) < MEPS) {\n\n\t\t\tmomentumOn = false;\n\t\t\treturn;\n\t\t}\n\n\t\tmomentumUp *= this.momentumDampingFactor;\n\t\tmomentumLeft *= this.momentumDampingFactor;\n\n\t\tthetaDelta -= this.momentumScalingFactor * momentumLeft;\n\t\tphiDelta -= this.momentumScalingFactor * momentumUp;\n\t};\n\n\tthis.dollyIn = function (dollyScale) {\n\n\t\tif (dollyScale === undefined) {\n\n\t\t\tdollyScale = getZoomScale();\n\t\t}\n\n\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n\n\t\t\tscale /= dollyScale;\n\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n\n\t\t\tscope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale));\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent(changeEvent);\n\t\t} else {\n\n\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t}\n\t};\n\n\tthis.dollyOut = function (dollyScale) {\n\n\t\tif (dollyScale === undefined) {\n\n\t\t\tdollyScale = getZoomScale();\n\t\t}\n\n\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n\n\t\t\tscale *= dollyScale;\n\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n\n\t\t\tscope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale));\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent(changeEvent);\n\t\t} else {\n\n\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t}\n\t};\n\n\tthis.update = function (ignoreUpdate) {\n\n\t\tvar position = this.object.position;\n\n\t\toffset.copy(position).sub(this.target);\n\n\t\toffset.applyQuaternion(quat);\n\n\t\ttheta = Math.atan2(offset.x, offset.z);\n\n\t\tphi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y);\n\n\t\tif (this.autoRotate && state === STATE.NONE) {\n\n\t\t\tthis.rotateLeft(getAutoRotationAngle());\n\t\t}\n\n\t\tthis.momentum();\n\n\t\ttheta += thetaDelta;\n\t\tphi += phiDelta;\n\n\t\ttheta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta));\n\n\t\tphi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi));\n\n\t\tphi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\n\n\t\tvar radius = offset.length() * scale;\n\n\t\tradius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\n\n\t\tthis.target.add(pan);\n\n\t\toffset.x = radius * Math.sin(phi) * Math.sin(theta);\n\t\toffset.y = radius * Math.cos(phi);\n\t\toffset.z = radius * Math.sin(phi) * Math.cos(theta);\n\n\t\toffset.applyQuaternion(quatInverse);\n\n\t\tposition.copy(this.target).add(offset);\n\n\t\tthis.object.lookAt(this.target);\n\n\t\tthetaDelta = 0;\n\t\tphiDelta = 0;\n\t\tscale = 1;\n\t\tpan.set(0, 0, 0);\n\n\t\tif (lastPosition.distanceToSquared(this.object.position) > EPS || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n\n\t\t\tignoreUpdate !== true && this.dispatchEvent(changeEvent);\n\n\t\t\tlastPosition.copy(this.object.position);\n\t\t\tlastQuaternion.copy(this.object.quaternion);\n\t\t}\n\t};\n\n\tthis.reset = function () {\n\n\t\tstate = STATE.NONE;\n\n\t\tthis.target.copy(this.target0);\n\t\tthis.object.position.copy(this.position0);\n\t\tthis.object.zoom = this.zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\t\tthis.dispatchEvent(changeEvent);\n\n\t\tthis.update();\n\t};\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn phi;\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn theta;\n\t};\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow(0.95, scope.zoomSpeed);\n\t}\n\n\tfunction onMouseDown(event) {\n\n\t\tmomentumOn = false;\n\n\t\tmomentumLeft = momentumUp = 0;\n\n\t\tif (scope.enabled === false) return;\n\t\tevent.preventDefault();\n\n\t\tif (event.button === scope.mouseButtons.ORBIT) {\n\t\t\tif (scope.noRotate === true) return;\n\n\t\t\tstate = STATE.ROTATE;\n\n\t\t\trotateStart.set(event.clientX, event.clientY);\n\t\t} else if (event.button === scope.mouseButtons.ZOOM) {\n\t\t\tif (scope.noZoom === true) return;\n\n\t\t\tstate = STATE.DOLLY;\n\n\t\t\tdollyStart.set(event.clientX, event.clientY);\n\t\t} else if (event.button === scope.mouseButtons.PAN) {\n\t\t\tif (scope.noPan === true) return;\n\n\t\t\tstate = STATE.PAN;\n\n\t\t\tpanStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tif (state !== STATE.NONE) {\n\t\t\tdocument.addEventListener('mousemove', onMouseMove, false);\n\t\t\tdocument.addEventListener('mouseup', onMouseUp, false);\n\t\t\tscope.dispatchEvent(startEvent);\n\t\t}\n\n\t\tscope.update();\n\t}\n\n\tfunction onMouseMove(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tevent.preventDefault();\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\tif (state === STATE.ROTATE) {\n\n\t\t\tif (scope.noRotate === true) return;\n\n\t\t\trotateEnd.set(event.clientX, event.clientY);\n\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\t\tscope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\t\tscope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\t\trotateStart.copy(rotateEnd);\n\n\t\t\tif (eventPrevious) {\n\t\t\t\tmomentumLeft = event.clientX - eventPrevious.clientX;\n\t\t\t\tmomentumUp = event.clientY - eventPrevious.clientY;\n\t\t\t}\n\n\t\t\teventPrevious = event;\n\t\t} else if (state === STATE.DOLLY) {\n\n\t\t\tif (scope.noZoom === true) return;\n\n\t\t\tdollyEnd.set(event.clientX, event.clientY);\n\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\t\tif (dollyDelta.y > 0) {\n\n\t\t\t\tscope.dollyIn();\n\t\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\t\tscope.dollyOut();\n\t\t\t}\n\n\t\t\tdollyStart.copy(dollyEnd);\n\t\t} else if (state === STATE.PAN) {\n\n\t\t\tif (scope.noPan === true) return;\n\n\t\t\tpanEnd.set(event.clientX, event.clientY);\n\t\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\t\tscope.pan(panDelta.x, panDelta.y);\n\n\t\t\tpanStart.copy(panEnd);\n\t\t}\n\n\t\tif (state !== STATE.NONE) scope.update();\n\t}\n\n\tfunction onMouseUp() {\n\n\t\tmomentumOn = true;\n\n\t\teventPrevious = undefined;\n\n\t\tif (scope.enabled === false) return;\n\n\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\t\tscope.dispatchEvent(endEvent);\n\t\tstate = STATE.NONE;\n\t}\n\n\tfunction onMouseWheel(event) {\n\n\t\tif (scope.enabled === false || scope.noZoom === true || state !== STATE.NONE) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar delta = 0;\n\n\t\tif (event.wheelDelta !== undefined) {\n\n\t\t\tdelta = event.wheelDelta;\n\t\t} else if (event.detail !== undefined) {\n\n\t\t\tdelta = -event.detail;\n\t\t}\n\n\t\tif (delta > 0) {\n\t\t\tscope.object.fov = scope.object.fov < scope.maxFov ? scope.object.fov + 1 : scope.maxFov;\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t} else if (delta < 0) {\n\t\t\tscope.object.fov = scope.object.fov > scope.minFov ? scope.object.fov - 1 : scope.minFov;\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t}\n\n\t\tscope.update();\n\t\tscope.dispatchEvent(changeEvent);\n\t\tscope.dispatchEvent(startEvent);\n\t\tscope.dispatchEvent(endEvent);\n\t}\n\n\tfunction onKeyUp(event) {\n\n\t\tswitch (event.keyCode) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tkeyUp = false;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tkeyBottom = false;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tkeyLeft = false;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tkeyRight = false;\n\t\t\t\tbreak;\n\n\t\t}\n\t}\n\n\tfunction onKeyDown(event) {\n\n\t\tif (scope.enabled === false || scope.noKeys === true || scope.noRotate === true) return;\n\n\t\tswitch (event.keyCode) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tkeyUp = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tkeyBottom = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tkeyLeft = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tkeyRight = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif (keyUp || keyBottom || keyLeft || keyRight) {\n\n\t\t\tmomentumOn = true;\n\n\t\t\tif (keyUp) momentumUp = -scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t\tif (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t\tif (keyLeft) momentumLeft = -scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t\tif (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t}\n\t}\n\n\tfunction touchstart(event) {\n\n\t\tmomentumOn = false;\n\n\t\tmomentumLeft = momentumUp = 0;\n\n\t\tif (scope.enabled === false) return;\n\n\t\tswitch (event.touches.length) {\n\n\t\t\tcase 1:\n\n\t\t\t\tif (scope.noRotate === true) return;\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\trotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tif (scope.noZoom === true) return;\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\n\t\t\t\tif (scope.noPan === true) return;\n\n\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\tpanStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif (state !== STATE.NONE) scope.dispatchEvent(startEvent);\n\t}\n\n\tfunction touchmove(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\tswitch (event.touches.length) {\n\n\t\t\tcase 1:\n\n\t\t\t\tif (scope.noRotate === true) return;\n\t\t\t\tif (state !== STATE.TOUCH_ROTATE) return;\n\n\t\t\t\trotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\t\t\tscope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\t\t\tscope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\t\t\trotateStart.copy(rotateEnd);\n\n\t\t\t\tif (eventPrevious) {\n\t\t\t\t\tmomentumLeft = event.touches[0].pageX - eventPrevious.pageX;\n\t\t\t\t\tmomentumUp = event.touches[0].pageY - eventPrevious.pageY;\n\t\t\t\t}\n\n\t\t\t\teventPrevious = {\n\t\t\t\t\tpageX: event.touches[0].pageX,\n\t\t\t\t\tpageY: event.touches[0].pageY\n\t\t\t\t};\n\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tif (scope.noZoom === true) return;\n\t\t\t\tif (state !== STATE.TOUCH_DOLLY) return;\n\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tif (event.scale < 1) {\n\n\t\t\t\t\tscope.object.fov = scope.object.fov < scope.maxFov ? scope.object.fov + 1 : scope.maxFov;\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t} else if (event.scale > 1) {\n\n\t\t\t\t\tscope.object.fov = scope.object.fov > scope.minFov ? scope.object.fov - 1 : scope.minFov;\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t}\n\n\t\t\t\tscope.update();\n\t\t\t\tscope.dispatchEvent(changeEvent);\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\n\t\t\t\tif (scope.noPan === true) return;\n\t\t\t\tif (state !== STATE.TOUCH_PAN) return;\n\n\t\t\t\tpanEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\t\t\tscope.pan(panDelta.x, panDelta.y);\n\n\t\t\t\tpanStart.copy(panEnd);\n\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\t}\n\n\tfunction touchend() {\n\n\t\tmomentumOn = true;\n\n\t\teventPrevious = undefined;\n\n\t\tif (scope.enabled === false) return;\n\n\t\tscope.dispatchEvent(endEvent);\n\t\tstate = STATE.NONE;\n\t}\n\n\tthis.domElement.addEventListener('mousedown', onMouseDown, false);\n\tthis.domElement.addEventListener('mousewheel', onMouseWheel, false);\n\tthis.domElement.addEventListener('DOMMouseScroll', onMouseWheel, false);\n\n\tthis.domElement.addEventListener('touchstart', touchstart, false);\n\tthis.domElement.addEventListener('touchend', touchend, false);\n\tthis.domElement.addEventListener('touchmove', touchmove, false);\n\n\twindow.addEventListener('keyup', onKeyUp, false);\n\twindow.addEventListener('keydown', onKeyDown, false);\n\n\tthis.update();\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"].prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"].prototype.constructor = __WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"];;\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"] = function (camera, domElement) {\n\n\tvar scope = this;\n\tvar changeEvent = { type: 'change' };\n\n\tvar rotY = 0;\n\tvar rotX = 0;\n\tvar tempX = 0;\n\tvar tempY = 0;\n\n\tthis.camera = camera;\n\tthis.camera.rotation.reorder(\"YXZ\");\n\tthis.domElement = domElement !== undefined ? domElement : document;\n\n\tthis.enabled = true;\n\n\tthis.deviceOrientation = {};\n\tthis.screenOrientation = 0;\n\n\tthis.alpha = 0;\n\tthis.alphaOffsetAngle = 0;\n\n\tvar onDeviceOrientationChangeEvent = function onDeviceOrientationChangeEvent(event) {\n\n\t\tscope.deviceOrientation = event;\n\t};\n\n\tvar onScreenOrientationChangeEvent = function onScreenOrientationChangeEvent() {\n\n\t\tscope.screenOrientation = window.orientation || 0;\n\t};\n\n\tvar onTouchStartEvent = function onTouchStartEvent(event) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\ttempX = event.touches[0].pageX;\n\t\ttempY = event.touches[0].pageY;\n\t};\n\n\tvar onTouchMoveEvent = function onTouchMoveEvent(event) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\trotY += __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad((event.touches[0].pageX - tempX) / 4);\n\t\trotX += __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad((tempY - event.touches[0].pageY) / 4);\n\n\t\tscope.updateAlphaOffsetAngle(rotY);\n\n\t\ttempX = event.touches[0].pageX;\n\t\ttempY = event.touches[0].pageY;\n\t};\n\n\tvar setCameraQuaternion = function setCameraQuaternion(quaternion, alpha, beta, gamma, orient) {\n\n\t\tvar zee = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 0, 1);\n\n\t\tvar euler = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Euler\"]();\n\n\t\tvar q0 = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n\t\tvar q1 = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"](-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5));\n\n\t\tvar vectorFingerY;\n\t\tvar fingerQY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\t\tvar fingerQX = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n\t\tif (scope.screenOrientation == 0) {\n\n\t\t\tvectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n\t\t\tfingerQY.setFromAxisAngle(vectorFingerY, -rotX);\n\t\t} else if (scope.screenOrientation == 180) {\n\n\t\t\tvectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n\t\t\tfingerQY.setFromAxisAngle(vectorFingerY, rotX);\n\t\t} else if (scope.screenOrientation == 90) {\n\n\t\t\tvectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n\t\t\tfingerQY.setFromAxisAngle(vectorFingerY, rotX);\n\t\t} else if (scope.screenOrientation == -90) {\n\n\t\t\tvectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n\t\t\tfingerQY.setFromAxisAngle(vectorFingerY, -rotX);\n\t\t}\n\n\t\tq1.multiply(fingerQY);\n\t\tq1.multiply(fingerQX);\n\n\t\teuler.set(beta, alpha, -gamma, 'YXZ');\n\n\t\tquaternion.setFromEuler(euler);\n\n\t\tquaternion.multiply(q1);\n\n\t\tquaternion.multiply(q0.setFromAxisAngle(zee, -orient));\n\t};\n\n\tthis.connect = function () {\n\n\t\tonScreenOrientationChangeEvent();\n\n\t\twindow.addEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n\t\twindow.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n\t\twindow.addEventListener('deviceorientation', this.update.bind(this), false);\n\n\t\tscope.domElement.addEventListener(\"touchstart\", onTouchStartEvent, false);\n\t\tscope.domElement.addEventListener(\"touchmove\", onTouchMoveEvent, false);\n\n\t\tscope.enabled = true;\n\t};\n\n\tthis.disconnect = function () {\n\n\t\twindow.removeEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n\t\twindow.removeEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n\t\twindow.removeEventListener('deviceorientation', this.update.bind(this), false);\n\n\t\tscope.domElement.removeEventListener(\"touchstart\", onTouchStartEvent, false);\n\t\tscope.domElement.removeEventListener(\"touchmove\", onTouchMoveEvent, false);\n\n\t\tscope.enabled = false;\n\t};\n\n\tthis.update = function (ignoreUpdate) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tvar alpha = scope.deviceOrientation.alpha ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.alpha) + this.alphaOffsetAngle : 0;\n\t\tvar beta = scope.deviceOrientation.beta ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.beta) : 0;\n\t\tvar gamma = scope.deviceOrientation.gamma ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.gamma) : 0;\n\t\tvar orient = scope.screenOrientation ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.screenOrientation) : 0;\n\n\t\tsetCameraQuaternion(scope.camera.quaternion, alpha, beta, gamma, orient);\n\t\tthis.alpha = alpha;\n\n\t\tignoreUpdate !== true && this.dispatchEvent(changeEvent);\n\t};\n\n\tthis.updateAlphaOffsetAngle = function (angle) {\n\n\t\tthis.alphaOffsetAngle = angle;\n\t\tthis.update();\n\t};\n\n\tthis.dispose = function () {\n\n\t\tthis.disconnect();\n\t};\n\n\tthis.connect();\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"].prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"].prototype.constructor = __WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"];;\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"] = function () {};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"].prototype = {\n\n\tconstructor: __WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"],\n\n\tset: function set(direction, axis, angle) {\n\t\tthis.direction = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();this.direction.copy(direction);\n\t\tthis.axis = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();this.axis.copy(axis);\n\t\tthis.angle = angle;\n\t\treturn this;\n\t},\n\n\t_sign: function _sign(a) {\n\t\treturn 0 > a ? -1 : 0 < a ? 1 : 0;\n\t},\n\n\t_cosh: function _cosh(x) {\n\t\treturn (Math.exp(x) + Math.exp(-x)) / 2;\n\t},\n\n\t_sinhInverse: function _sinhInverse(x) {\n\t\treturn Math.log(Math.abs(x) + Math.sqrt(x * x + 1));\n\t},\n\n\tmodify: function modify(geometry) {\n\n\t\tvar thirdAxis = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();thirdAxis.crossVectors(this.direction, this.axis);\n\n\t\tvar P = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]();\n\t\tP.set(thirdAxis.x, thirdAxis.y, thirdAxis.z, 0, this.direction.x, this.direction.y, this.direction.z, 0, this.axis.x, this.axis.y, this.axis.z, 0, 0, 0, 0, 1).transpose();\n\n\t\tvar InverseP = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]().getInverse(P);\n\t\tvar newVertices = [];var oldVertices = [];var anglesBetweenOldandNewVertices = [];\n\n\t\tvar meshGeometryBoundingBoxMaxx = 0;var meshGeometryBoundingBoxMinx = 0;\n\t\tvar meshGeometryBoundingBoxMaxy = 0;var meshGeometryBoundingBoxMiny = 0;\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\tnewVertices[i] = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();newVertices[i].copy(geometry.vertices[i]).applyMatrix4(InverseP);\n\t\t\tif (newVertices[i].x > meshGeometryBoundingBoxMaxx) {\n\t\t\t\tmeshGeometryBoundingBoxMaxx = newVertices[i].x;\n\t\t\t}\n\t\t\tif (newVertices[i].x < meshGeometryBoundingBoxMinx) {\n\t\t\t\tmeshGeometryBoundingBoxMinx = newVertices[i].x;\n\t\t\t}\n\t\t\tif (newVertices[i].y > meshGeometryBoundingBoxMaxy) {\n\t\t\t\tmeshGeometryBoundingBoxMaxy = newVertices[i].y;\n\t\t\t}\n\t\t\tif (newVertices[i].y < meshGeometryBoundingBoxMiny) {\n\t\t\t\tmeshGeometryBoundingBoxMiny = newVertices[i].y;\n\t\t\t}\n\t\t}\n\n\t\tvar meshWidthold = meshGeometryBoundingBoxMaxx - meshGeometryBoundingBoxMinx;\n\t\tvar meshDepth = meshGeometryBoundingBoxMaxy - meshGeometryBoundingBoxMiny;\n\t\tvar ParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidthold;\n\t\tvar oldMiddlex = (meshGeometryBoundingBoxMaxx + meshGeometryBoundingBoxMinx) / 2;\n\t\tvar oldMiddley = (meshGeometryBoundingBoxMaxy + meshGeometryBoundingBoxMiny) / 2;\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\toldVertices[i] = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();oldVertices[i].copy(newVertices[i]);\n\t\t\tnewVertices[i].x = this._sign(newVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((newVertices[i].x - oldMiddlex) * ParamB);\n\t\t}\n\n\t\tvar meshWidth = 2 / ParamB * this._sinhInverse(meshWidthold / 2 * ParamB);\n\n\t\tvar NewParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidth;\n\n\t\tvar rightEdgePos = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](meshWidth / 2, -meshDepth / 2, 0);\n\t\trightEdgePos.y = 1 / NewParamB * this._cosh(NewParamB * rightEdgePos.x) - 1 / NewParamB - meshDepth / 2;\n\n\t\tvar bendCenter = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, rightEdgePos.y + rightEdgePos.x / Math.tan(this.angle), 0);\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\tvar x0 = this._sign(oldVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((oldVertices[i].x - oldMiddlex) * ParamB);\n\t\t\tvar y0 = 1 / NewParamB * this._cosh(NewParamB * x0) - 1 / NewParamB;\n\n\t\t\tvar k = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](bendCenter.x - x0, bendCenter.y - (y0 - meshDepth / 2), bendCenter.z).normalize();\n\n\t\t\tvar Q = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\t\t\tQ.addVectors(new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](x0, y0 - meshDepth / 2, oldVertices[i].z), k.multiplyScalar(oldVertices[i].y + meshDepth / 2));\n\t\t\tnewVertices[i].x = Q.x;newVertices[i].y = Q.y;\n\t\t}\n\n\t\tvar middle = oldMiddlex * meshWidth / meshWidthold;\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\tvar O = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](oldMiddlex, oldMiddley, oldVertices[i].z);\n\t\t\tvar p = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();p.subVectors(oldVertices[i], O);\n\t\t\tvar q = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();q.subVectors(newVertices[i], O);\n\n\t\t\tanglesBetweenOldandNewVertices[i] = Math.acos(1 / this._cosh(ParamB * newVertices[i].x)) * this._sign(newVertices[i].x);\n\n\t\t\tnewVertices[i].x = newVertices[i].x + middle;\n\t\t\tgeometry.vertices[i].copy(newVertices[i].applyMatrix4(P));\n\t\t}\n\n\t\tgeometry.computeFaceNormals();\n\t\tgeometry.verticesNeedUpdate = true;\n\t\tgeometry.normalsNeedUpdate = true;\n\n\t\tvar fvNames = ['a', 'b', 'c', 'd'];\n\n\t\tfor (var f = 0, fl = geometry.faces.length; f < fl; f++) {\n\n\t\t\tvar face = geometry.faces[f];\n\t\t\tif (face.vertexNormals === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (var v = 0, vl = face.vertexNormals.length; v < vl; v++) {\n\n\t\t\t\tvar angle = anglesBetweenOldandNewVertices[face[fvNames[v]]];\n\t\t\t\tvar x = this.axis.x,\n\t\t\t\t    y = this.axis.y,\n\t\t\t\t    z = this.axis.z;\n\n\t\t\t\tvar rotateMatrix = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix3\"]();\n\t\t\t\trotateMatrix.set(Math.cos(angle) + (1 - Math.cos(angle)) * x * x, (1 - Math.cos(angle)) * x * y - Math.sin(angle) * z, (1 - Math.cos(angle)) * x * z + Math.sin(angle) * y, (1 - Math.cos(angle)) * y * x + Math.sin(angle) * z, Math.cos(angle) + (1 - Math.cos(angle)) * y * y, (1 - Math.cos(angle)) * y * z - Math.sin(angle) * x, (1 - Math.cos(angle)) * z * x - Math.sin(angle) * y, (1 - Math.cos(angle)) * z * y + Math.sin(angle) * x, Math.cos(angle) + (1 - Math.cos(angle)) * z * z);\n\n\t\t\t\tface.vertexNormals[v].applyMatrix3(rotateMatrix);\n\t\t\t}\n\t\t}\n\n\n\t\treturn this;\n\t}\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"CardboardEffect\"] = function (renderer) {\n\n\tvar _camera = new __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"](-1, 1, 1, -1, 0, 1);\n\n\tvar _scene = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Scene\"]();\n\n\tvar _stereo = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoCamera\"]();\n\t_stereo.aspect = 0.5;\n\n\tvar _params = { minFilter: __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"], magFilter: __WEBPACK_IMPORTED_MODULE_8_three__[\"NearestFilter\"], format: __WEBPACK_IMPORTED_MODULE_8_three__[\"RGBAFormat\"] };\n\n\tvar _renderTarget = new __WEBPACK_IMPORTED_MODULE_8_three__[\"WebGLRenderTarget\"](512, 512, _params);\n\t_renderTarget.scissorTest = true;\n\t_renderTarget.texture.generateMipmaps = false;\n\n\tvar distortion = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"](0.441, 0.156);\n\n\tvar geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneBufferGeometry\"](1, 1, 10, 20).removeAttribute('normal').toNonIndexed();\n\n\tvar positions = geometry.attributes.position.array;\n\tvar uvs = geometry.attributes.uv.array;\n\n\tgeometry.attributes.position.count *= 2;\n\tgeometry.attributes.uv.count *= 2;\n\n\tvar positions2 = new Float32Array(positions.length * 2);\n\tpositions2.set(positions);\n\tpositions2.set(positions, positions.length);\n\n\tvar uvs2 = new Float32Array(uvs.length * 2);\n\tuvs2.set(uvs);\n\tuvs2.set(uvs, uvs.length);\n\n\tvar vector = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar length = positions.length / 3;\n\n\tfor (var i = 0, l = positions2.length / 3; i < l; i++) {\n\n\t\tvector.x = positions2[i * 3 + 0];\n\t\tvector.y = positions2[i * 3 + 1];\n\n\t\tvar dot = vector.dot(vector);\n\t\tvar scalar = 1.5 + (distortion.x + distortion.y * dot) * dot;\n\n\t\tvar offset = i < length ? 0 : 1;\n\n\t\tpositions2[i * 3 + 0] = vector.x / scalar * 1.5 - 0.5 + offset;\n\t\tpositions2[i * 3 + 1] = vector.y / scalar * 3.0;\n\n\t\tuvs2[i * 2] = (uvs2[i * 2] + offset) * 0.5;\n\t}\n\n\tgeometry.attributes.position.array = positions2;\n\tgeometry.attributes.uv.array = uvs2;\n\n\tvar material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ map: _renderTarget.texture });\n\tvar mesh = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"](geometry, material);\n\t_scene.add(mesh);\n\n\tthis.setSize = function (width, height) {\n\n\t\trenderer.setSize(width, height);\n\n\t\tvar pixelRatio = renderer.getPixelRatio();\n\n\t\t_renderTarget.setSize(width * pixelRatio, height * pixelRatio);\n\t};\n\n\tthis.render = function (scene, camera) {\n\n\t\tscene.updateMatrixWorld();\n\n\t\tif (camera.parent === null) camera.updateMatrixWorld();\n\n\t\t_stereo.update(camera);\n\n\t\tvar width = _renderTarget.width / 2;\n\t\tvar height = _renderTarget.height;\n\n\t\t_renderTarget.scissor.set(0, 0, width, height);\n\t\t_renderTarget.viewport.set(0, 0, width, height);\n\t\trenderer.render(scene, _stereo.cameraL, _renderTarget);\n\n\t\t_renderTarget.scissor.set(width, 0, width, height);\n\t\t_renderTarget.viewport.set(width, 0, width, height);\n\t\trenderer.render(scene, _stereo.cameraR, _renderTarget);\n\n\t\trenderer.render(_scene, _camera);\n\t};\n};;\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"StereoEffect\"] = function (renderer) {\n\n\tvar _stereo = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoCamera\"]();\n\t_stereo.aspect = 0.5;\n\n\tthis.setEyeSeparation = function (eyeSep) {\n\n\t\t_stereo.eyeSep = eyeSep;\n\t};\n\n\tthis.setSize = function (width, height) {\n\n\t\trenderer.setSize(width, height);\n\t};\n\n\tthis.render = function (scene, camera) {\n\n\t\tscene.updateMatrixWorld();\n\n\t\tif (camera.parent === null) camera.updateMatrixWorld();\n\n\t\t_stereo.update(camera);\n\n\t\tvar size = renderer.getSize();\n\n\t\tif (renderer.autoClear) renderer.clear();\n\t\trenderer.setScissorTest(true);\n\n\t\trenderer.setScissor(0, 0, size.width / 2, size.height);\n\t\trenderer.setViewport(0, 0, size.width / 2, size.height);\n\t\trenderer.render(scene, _stereo.cameraL);\n\n\t\trenderer.setScissor(size.width / 2, 0, size.width / 2, size.height);\n\t\trenderer.setViewport(size.width / 2, 0, size.width / 2, size.height);\n\t\trenderer.render(scene, _stereo.cameraR);\n\n\t\trenderer.setScissorTest(false);\n\t};\n};\n;var GSVPANO = GSVPANO || {};\nGSVPANO.PanoLoader = function (parameters) {\n\n\t'use strict';\n\n\tvar _parameters = parameters || {},\n\t    _location,\n\t    _zoom,\n\t    _panoId,\n\t    _panoClient = new google.maps.StreetViewService(),\n\t    _count = 0,\n\t    _total = 0,\n\t    _canvas = [],\n\t    _ctx = [],\n\t    _wc = 0,\n\t    _hc = 0,\n\t    result = null,\n\t    rotation = 0,\n\t    copyright = '',\n\t    onSizeChange = null,\n\t    onPanoramaLoad = null;\n\n\tvar levelsW = [1, 2, 4, 7, 13, 26],\n\t    levelsH = [1, 1, 2, 4, 7, 13];\n\n\tvar widths = [416, 832, 1664, 3328, 6656, 13312],\n\t    heights = [416, 416, 832, 1664, 3328, 6656];\n\n\tvar gl = null;\n\ttry {\n\t\tvar canvas = document.createElement('canvas');\n\t\tgl = canvas.getContext('experimental-webgl');\n\t\tif (gl == null) {\n\t\t\tgl = canvas.getContext('webgl');\n\t\t}\n\t} catch (error) {}\n\n\tvar maxW = 1024,\n\t    maxH = 1024;\n\n\tif (gl) {\n\t\tvar maxTexSize = Math.max(gl.getParameter(gl.MAX_TEXTURE_SIZE), 6656);\n\n\t\tmaxW = maxH = maxTexSize;\n\t}\n\n\tthis.setProgress = function (loaded, total) {\n\n\t\tif (this.onProgress) {\n\t\t\tthis.onProgress({ loaded: loaded, total: total });\n\t\t}\n\t};\n\n\tthis.throwError = function (message) {\n\n\t\tif (this.onError) {\n\t\t\tthis.onError(message);\n\t\t} else {\n\t\t\tconsole.error(message);\n\t\t}\n\t};\n\n\tthis.adaptTextureToZoom = function () {\n\n\t\tvar w = levelsW[_zoom] * 416,\n\t\t    h = levelsH[_zoom] * 416;\n\n\t\tw = widths[_zoom];\n\t\th = heights[_zoom];\n\n\t\t_wc = Math.ceil(w / maxW);\n\t\t_hc = Math.ceil(h / maxH);\n\n\t\t_canvas = [];_ctx = [];\n\n\t\tvar ptr = 0;\n\t\tfor (var y = 0; y < _hc; y++) {\n\t\t\tfor (var x = 0; x < _wc; x++) {\n\t\t\t\tvar c = document.createElement('canvas');\n\t\t\t\tif (x < _wc - 1) c.width = maxW;else c.width = w - maxW * x;\n\t\t\t\tif (y < _hc - 1) c.height = maxH;else c.height = h - maxH * y;\n\t\t\t\t_canvas.push(c);\n\t\t\t\t_ctx.push(c.getContext('2d'));\n\t\t\t\tptr++;\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.composeFromTile = function (x, y, texture) {\n\n\t\tx *= 512;\n\t\ty *= 512;\n\t\tvar px = Math.floor(x / maxW),\n\t\t    py = Math.floor(y / maxH);\n\n\t\tx -= px * maxW;\n\t\ty -= py * maxH;\n\n\t\t_ctx[py * _wc + px].drawImage(texture, 0, 0, texture.width, texture.height, x, y, 512, 512);\n\t\tthis.progress();\n\t};\n\n\tthis.progress = function () {\n\n\t\t_count++;\n\n\t\tvar p = Math.round(_count * 100 / _total);\n\t\tthis.setProgress(_count, _total);\n\n\t\tif (_count === _total) {\n\t\t\tthis.canvas = _canvas;\n\t\t\tthis.panoId = _panoId;\n\t\t\tthis.zoom = _zoom;\n\t\t\tif (this.onPanoramaLoad) {\n\t\t\t\tthis.onPanoramaLoad(_canvas[0]);\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.loadFromId = function (id) {\n\n\t\t_panoId = id;\n\t\tthis.composePanorama();\n\t};\n\n\tthis.composePanorama = function () {\n\n\t\tthis.setProgress(0, 1);\n\n\t\tvar w = levelsW[_zoom],\n\t\t    h = levelsH[_zoom],\n\t\t    self = this,\n\t\t    url,\n\t\t    x,\n\t\t    y;\n\n\t\t_count = 0;\n\t\t_total = w * h;\n\n\t\tvar self = this;\n\t\tfor (var y = 0; y < h; y++) {\n\t\t\tfor (var x = 0; x < w; x++) {\n\t\t\t\tvar url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + _zoom + '&x=' + x + '&y=' + y + '&panoid=' + _panoId + '&nbt&fover=2';\n\t\t\t\t(function (x, y) {\n\t\t\t\t\tif (_parameters.useWebGL) {\n\t\t\t\t\t\tvar texture = __WEBPACK_IMPORTED_MODULE_8_three__[\"ImageUtils\"].loadTexture(url, null, function () {\n\t\t\t\t\t\t\tself.composeFromTile(x, y, texture);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar img = new Image();\n\t\t\t\t\t\timg.addEventListener('load', function () {\n\t\t\t\t\t\t\tself.composeFromTile(x, y, this);\n\t\t\t\t\t\t});\n\t\t\t\t\t\timg.crossOrigin = '';\n\t\t\t\t\t\timg.src = url;\n\t\t\t\t\t}\n\t\t\t\t})(x, y);\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.load = function (panoid) {\n\n\t\tthis.loadPano(panoid);\n\t};\n\n\tthis.loadPano = function (id) {\n\n\t\tvar self = this;\n\t\t_panoClient.getPanoramaById(id, function (result, status) {\n\t\t\tif (status === google.maps.StreetViewStatus.OK) {\n\t\t\t\tself.result = result;\n\t\t\t\tif (self.onPanoramaData) self.onPanoramaData(result);\n\n\t\t\t\tcopyright = result.copyright;\n\t\t\t\tself.copyright = result.copyright;\n\t\t\t\t_panoId = result.location.pano;\n\t\t\t\tself.location = location;\n\t\t\t\tself.composePanorama();\n\t\t\t} else {\n\t\t\t\tif (self.onNoPanoramaData) self.onNoPanoramaData(status);\n\t\t\t\tself.throwError('Could not retrieve panorama for the following reason: ' + status);\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.setZoom = function (z) {\n\t\t_zoom = z;\n\t\tthis.adaptTextureToZoom();\n\t};\n\n\tthis.setZoom(_parameters.zoom || 1);\n};;(function () {\n\n\t'use strict';\n\n\tPANOLENS.DataImageSource = 'https://pchen66.github.io/Panolens/asset/icon/';\n\n\tPANOLENS.DataImage = {\n\t\tInfo: PANOLENS.DataImageSource + 'information.png',\n\t\tArrow: PANOLENS.DataImageSource + 'arrow-up.png',\n\t\tFullscreenEnter: PANOLENS.DataImageSource + 'fullscreen.png',\n\t\tFullscreenLeave: PANOLENS.DataImageSource + 'fullscreen-exit.png',\n\t\tVideoPlay: PANOLENS.DataImageSource + 'video-play.png',\n\t\tVideoPause: PANOLENS.DataImageSource + 'pause.png',\n\t\tWhiteTile: PANOLENS.DataImageSource + 'tiles.png',\n\t\tReticleIdle: PANOLENS.DataImageSource + 'reticle-idle.png',\n\t\tSetting: PANOLENS.DataImageSource + 'setting.png',\n\t\tChevronRight: PANOLENS.DataImageSource + 'chevron-right.png',\n\t\tCheck: PANOLENS.DataImageSource + 'check.png',\n\t\tViewIndicator: PANOLENS.DataImageSource + 'view-indicator.svg',\n\t\tReticleDwell: PANOLENS.DataImageSource + 'reticle-animation.png'\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Controls = {\n\n\t\tORBIT: 0,\n\n\t\tDEVICEORIENTATION: 1\n\n\t};\n\n\tPANOLENS.Modes = {\n\t\tUNKNOWN: 0,\n\n\t\tNORMAL: 1,\n\n\t\tCARDBOARD: 2,\n\n\t\tSTEREO: 3\n\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Utils = {};\n\n\tPANOLENS.Utils.checkTouchSupported = function () {\n\n\t\treturn window ? 'ontouchstart' in window || window.navigator.msMaxTouchPoints : false;\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Utils.ImageLoader = {};\n\n\tPANOLENS.Utils.ImageLoader.load = function (url, onLoad, onProgress, onError) {\n\n\t\tvar cached, request, arrayBufferView, blob, urlCreator, image, reference;\n\n\t\tfor (var iconName in PANOLENS.DataImage) {\n\n\t\t\tif (PANOLENS.DataImage.hasOwnProperty(iconName) && url === PANOLENS.DataImage[iconName]) {\n\n\t\t\t\treference = iconName;\n\t\t\t}\n\t\t}\n\n\t\tcached = __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].get(reference ? reference : url);\n\n\t\tif (cached !== undefined) {\n\n\t\t\tif (onLoad) {\n\n\t\t\t\tsetTimeout(function () {\n\n\t\t\t\t\tif (onProgress) {\n\n\t\t\t\t\t\tonProgress({ loaded: 1, total: 1 });\n\t\t\t\t\t}\n\n\t\t\t\t\tonLoad(cached);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t\treturn cached;\n\t\t}\n\n\t\turlCreator = window.URL || window.webkitURL;\n\t\timage = document.createElementNS('http://www.w3.org/1999/xhtml', 'img');\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].add(reference ? reference : url, image);\n\n\t\tfunction onImageLoaded() {\n\n\t\t\turlCreator.revokeObjectURL(image.src);\n\t\t\tonLoad && onLoad(image);\n\t\t}\n\n\t\tif (url.indexOf('data:') === 0) {\n\n\t\t\timage.addEventListener('load', onImageLoaded, false);\n\t\t\timage.src = url;\n\t\t\treturn image;\n\t\t}\n\n\t\timage.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : '';\n\n\t\trequest = new XMLHttpRequest();\n\t\trequest.open('GET', url, true);\n\t\trequest.responseType = 'arraybuffer';\n\t\trequest.onprogress = function (event) {\n\n\t\t\tif (event.lengthComputable) {\n\n\t\t\t\tonProgress && onProgress({ loaded: event.loaded, total: event.total });\n\t\t\t}\n\t\t};\n\t\trequest.onloadend = function (event) {\n\n\t\t\tarrayBufferView = new Uint8Array(this.response);\n\t\t\tblob = new Blob([arrayBufferView]);\n\n\t\t\timage.addEventListener('load', onImageLoaded, false);\n\t\t\timage.src = urlCreator.createObjectURL(blob);\n\t\t};\n\n\t\trequest.send(null);\n\t};\n\n\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].enabled = true;\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Utils.TextureLoader = {};\n\n\tPANOLENS.Utils.TextureLoader.load = function (url, onLoad, onProgress, onError) {\n\n\t\tvar texture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\n\t\tPANOLENS.Utils.ImageLoader.load(url, function (image) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tonLoad && onLoad(texture);\n\t\t}, onProgress, onError);\n\n\t\treturn texture;\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Utils.CubeTextureLoader = {};\n\n\tPANOLENS.Utils.CubeTextureLoader.load = function (urls, onLoad, onProgress, onError) {\n\n\t\tvar texture, loaded, progress, all, loadings;\n\n\t\ttexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"CubeTexture\"]([]);\n\n\t\tloaded = 0;\n\t\tprogress = {};\n\t\tall = {};\n\n\t\turls.map(function (url, index) {\n\n\t\t\tPANOLENS.Utils.ImageLoader.load(url, function (image) {\n\n\t\t\t\ttexture.images[index] = image;\n\n\t\t\t\tloaded++;\n\n\t\t\t\tif (loaded === 6) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tonLoad && onLoad(texture);\n\t\t\t\t}\n\t\t\t}, function (event) {\n\n\t\t\t\tprogress[index] = { loaded: event.loaded, total: event.total };\n\n\t\t\t\tall.loaded = 0;\n\t\t\t\tall.total = 0;\n\t\t\t\tloadings = 0;\n\n\t\t\t\tfor (var i in progress) {\n\n\t\t\t\t\tloadings++;\n\t\t\t\t\tall.loaded += progress[i].loaded;\n\t\t\t\t\tall.total += progress[i].total;\n\t\t\t\t}\n\n\t\t\t\tif (loadings < 6) {\n\n\t\t\t\t\tall.total = all.total / loadings * 6;\n\t\t\t\t}\n\n\t\t\t\tonProgress && onProgress(all);\n\t\t\t}, onError);\n\t\t});\n\n\t\treturn texture;\n\t};\n})();;\n\nPANOLENS.StereographicShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]() },\n\t\t\"resolution\": { value: 1.0 },\n\t\t\"transform\": { value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]() },\n\t\t\"zoom\": { value: 1.0 }\n\n\t},\n\n\tvertexShader: [\"varying vec2 vUv;\", \"void main() {\", \"vUv = uv;\", \"gl_Position = vec4( position, 1.0 );\", \"}\"].join(\"\\n\"),\n\n\tfragmentShader: [\"uniform sampler2D tDiffuse;\", \"uniform float resolution;\", \"uniform mat4 transform;\", \"uniform float zoom;\", \"varying vec2 vUv;\", \"const float PI = 3.141592653589793;\", \"void main(){\", \"vec2 position = -1.0 +  2.0 * vUv;\", \"position *= vec2( zoom * resolution, zoom * 0.5 );\", \"float x2y2 = position.x * position.x + position.y * position.y;\", \"vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );\", \"sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );\", \"vec2 sampleUV = vec2(\", \"(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,\", \"(asin(sphere_pnt.z) / PI + 0.5)\", \");\", \"gl_FragColor = texture2D( tDiffuse, sampleUV );\", \"}\"].join(\"\\n\")\n\n};;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Panorama = function (geometry, material) {\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].call(this);\n\n\t\tthis.type = 'panorama';\n\n\t\tthis.ImageQualityLow = 1;\n\t\tthis.ImageQualityFair = 2;\n\t\tthis.ImageQualityMedium = 3;\n\t\tthis.ImageQualityHigh = 4;\n\t\tthis.ImageQualitySuperHigh = 5;\n\n\t\tthis.animationDuration = 1000;\n\n\t\tthis.defaultInfospotSize = 350;\n\n\t\tthis.container = undefined;\n\n\t\tthis.loaded = false;\n\n\t\tthis.linkedSpots = [];\n\n\t\tthis.isInfospotVisible = false;\n\n\t\tthis.linkingImageURL = undefined;\n\t\tthis.linkingImageScale = undefined;\n\n\t\tthis.geometry = geometry;\n\n\t\tthis.material = material;\n\t\tthis.material.side = __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"];\n\t\tthis.material.visible = false;\n\n\t\tthis.scale.x *= -1;\n\n\t\tthis.infospotAnimation = new TWEEN.Tween(this).to({}, this.animationDuration / 2);\n\n\t\tthis.addEventListener('load', this.fadeIn.bind(this));\n\t\tthis.addEventListener('panolens-container', this.setContainer.bind(this));\n\t\tthis.addEventListener('click', this.onClick.bind(this));\n\n\t\tthis.setupTransitions();\n\t};\n\n\tPANOLENS.Panorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].prototype);\n\n\tPANOLENS.Panorama.prototype.constructor = PANOLENS.Panorama;\n\n\tPANOLENS.Panorama.prototype.add = function (object) {\n\n\t\tvar scope, invertedObject;\n\n\t\tscope = this;\n\n\t\tif (arguments.length > 1) {\n\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\n\t\t\t\tthis.add(arguments[i]);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\n\t\tif (object instanceof PANOLENS.Infospot) {\n\n\t\t\tinvertedObject = object;\n\n\t\t\tif (object.dispatchEvent) {\n\n\t\t\t\tthis.container && object.dispatchEvent({ type: 'panolens-container', container: this.container });\n\n\t\t\t\tobject.dispatchEvent({ type: 'panolens-infospot-focus', method: function method(vector, duration, easing) {\n\t\t\t\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'tweenControlCenter', data: [vector, duration, easing] });\n\t\t\t\t\t} });\n\t\t\t}\n\t\t} else {\n\t\t\tinvertedObject = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"]();\n\t\t\tinvertedObject.scale.x = -1;\n\t\t\tinvertedObject.scalePlaceHolder = true;\n\t\t\tinvertedObject.add(object);\n\t\t}\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype.add.call(this, invertedObject);\n\t};\n\n\tPANOLENS.Panorama.prototype.load = function () {\n\n\t\tthis.onLoad();\n\t};\n\n\tPANOLENS.Panorama.prototype.onClick = function (event) {\n\n\t\tif (event.intersects && event.intersects.length === 0) {\n\n\t\t\tthis.traverse(function (object) {\n\t\t\t\tobject.dispatchEvent({ type: 'dismiss' });\n\t\t\t});\n\t\t}\n\t};\n\n\tPANOLENS.Panorama.prototype.setContainer = function (data) {\n\n\t\tvar container;\n\n\t\tif (data instanceof HTMLElement) {\n\n\t\t\tcontainer = data;\n\t\t} else if (data && data.container) {\n\n\t\t\tcontainer = data.container;\n\t\t}\n\n\t\tif (container) {\n\n\t\t\tthis.children.forEach(function (child) {\n\n\t\t\t\tif (child instanceof PANOLENS.Infospot && child.dispatchEvent) {\n\t\t\t\t\tchild.dispatchEvent({ type: 'panolens-container', container: container });\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.container = container;\n\t\t}\n\t};\n\n\tPANOLENS.Panorama.prototype.onLoad = function () {\n\n\t\tthis.loaded = true;\n\n\t\tthis.dispatchEvent({ type: 'load' });\n\t};\n\n\tPANOLENS.Panorama.prototype.onProgress = function (progress) {\n\t\tthis.dispatchEvent({ type: 'progress', progress: progress });\n\t};\n\n\tPANOLENS.Panorama.prototype.onError = function () {\n\t\tthis.dispatchEvent({ type: 'error' });\n\t};\n\n\tPANOLENS.Panorama.prototype.getZoomLevel = function () {\n\n\t\tvar zoomLevel;\n\n\t\tif (window.innerWidth <= 800) {\n\n\t\t\tzoomLevel = this.ImageQualityFair;\n\t\t} else if (window.innerWidth > 800 && window.innerWidth <= 1280) {\n\n\t\t\tzoomLevel = this.ImageQualityMedium;\n\t\t} else if (window.innerWidth > 1280 && window.innerWidth <= 1920) {\n\n\t\t\tzoomLevel = this.ImageQualityHigh;\n\t\t} else if (window.innerWidth > 1920) {\n\n\t\t\tzoomLevel = this.ImageQualitySuperHigh;\n\t\t} else {\n\n\t\t\tzoomLevel = this.ImageQualityLow;\n\t\t}\n\n\t\treturn zoomLevel;\n\t};\n\n\tPANOLENS.Panorama.prototype.updateTexture = function (texture) {\n\n\t\tthis.material.map = texture;\n\n\t\tthis.material.needsUpdate = true;\n\t};\n\n\tPANOLENS.Panorama.prototype.toggleInfospotVisibility = function (isVisible, delay) {\n\n\t\tdelay = delay !== undefined ? delay : 0;\n\n\t\tvar scope, visible;\n\n\t\tscope = this;\n\t\tvisible = isVisible !== undefined ? isVisible : this.isInfospotVisible ? false : true;\n\n\t\tthis.traverse(function (object) {\n\n\t\t\tif (object instanceof PANOLENS.Infospot) {\n\n\t\t\t\tvisible ? object.show(delay) : object.hide(delay);\n\t\t\t}\n\t\t});\n\n\t\tthis.isInfospotVisible = visible;\n\n\t\tthis.infospotAnimation.onComplete(function () {\n\t\t\tscope.dispatchEvent({ type: 'infospot-animation-complete', visible: visible });\n\t\t}).delay(delay).start();\n\t};\n\n\tPANOLENS.Panorama.prototype.setLinkingImage = function (url, scale) {\n\n\t\tthis.linkingImageURL = url;\n\t\tthis.linkingImageScale = scale;\n\t};\n\n\tPANOLENS.Panorama.prototype.link = function (pano, position, imageScale, imageSrc) {\n\n\t\tvar scope = this,\n\t\t    spot,\n\t\t    scale,\n\t\t    img;\n\n\t\tthis.visible = true;\n\n\t\tif (!position) {\n\n\t\t\tconsole.warn('Please specify infospot position for linking');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (imageScale !== undefined) {\n\n\t\t\tscale = imageScale;\n\t\t} else if (pano.linkingImageScale !== undefined) {\n\n\t\t\tscale = pano.linkingImageScale;\n\t\t} else {\n\n\t\t\tscale = 300;\n\t\t}\n\n\t\tif (imageSrc) {\n\n\t\t\timg = imageSrc;\n\t\t} else if (pano.linkingImageURL) {\n\n\t\t\timg = pano.linkingImageURL;\n\t\t} else {\n\n\t\t\timg = PANOLENS.DataImage.Arrow;\n\t\t}\n\n\t\tspot = new PANOLENS.Infospot(scale, img);\n\t\tspot.position.copy(position);\n\t\tspot.toPanorama = pano;\n\t\tspot.addEventListener('click', function () {\n\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setPanorama', data: pano });\n\t\t});\n\n\t\tthis.linkedSpots.push(spot);\n\n\t\tthis.add(spot);\n\n\t\tthis.visible = false;\n\t};\n\n\tPANOLENS.Panorama.prototype.reset = function () {\n\n\t\tthis.children.length = 0;\n\t};\n\n\tPANOLENS.Panorama.prototype.setupTransitions = function () {\n\n\t\tthis.fadeInAnimation = new TWEEN.Tween(this.material).easing(TWEEN.Easing.Quartic.Out).onStart(function () {\n\n\t\t\tthis.visible = true;\n\t\t\tthis.material.visible = true;\n\n\t\t\tthis.dispatchEvent({ type: 'enter-fade-start' });\n\t\t}.bind(this));\n\n\t\tthis.fadeOutAnimation = new TWEEN.Tween(this.material).easing(TWEEN.Easing.Quartic.Out).onComplete(function () {\n\n\t\t\tthis.visible = false;\n\t\t\tthis.material.visible = true;\n\n\t\t\tthis.dispatchEvent({ type: 'leave-complete' });\n\t\t}.bind(this));\n\n\t\tthis.enterTransition = new TWEEN.Tween(this).easing(TWEEN.Easing.Quartic.Out).onComplete(function () {\n\t\t\tthis.dispatchEvent({ type: 'enter-animation-complete' });\n\t\t}.bind(this)).start();\n\n\t\tthis.leaveTransition = new TWEEN.Tween(this).easing(TWEEN.Easing.Quartic.Out);\n\t};\n\n\tPANOLENS.Panorama.prototype.fadeIn = function (duration) {\n\n\t\tduration = duration >= 0 ? duration : this.animationDuration;\n\n\t\tthis.fadeOutAnimation.stop();\n\t\tthis.fadeInAnimation.to({ opacity: 1 }, duration).onComplete(function () {\n\n\t\t\tthis.toggleInfospotVisibility(true, duration / 2);\n\n\t\t\tthis.dispatchEvent({ type: 'enter-fade-complete' });\n\t\t}.bind(this)).start();\n\t};\n\n\tPANOLENS.Panorama.prototype.fadeOut = function (duration) {\n\n\t\tduration = duration >= 0 ? duration : this.animationDuration;\n\n\t\tthis.fadeInAnimation.stop();\n\t\tthis.fadeOutAnimation.to({ opacity: 0 }, duration).start();\n\t};\n\n\tPANOLENS.Panorama.prototype.onEnter = function () {\n\n\t\tvar duration = this.animationDuration;\n\n\t\tthis.leaveTransition.stop();\n\t\tthis.enterTransition.to({}, duration).onStart(function () {\n\t\t\tthis.dispatchEvent({ type: 'enter-animation-start' });\n\n\t\t\tif (this.loaded) {\n\n\t\t\t\tthis.fadeIn(duration);\n\t\t\t} else {\n\n\t\t\t\tthis.load();\n\t\t\t}\n\t\t}.bind(this)).start();\n\n\t\tthis.dispatchEvent({ type: 'enter' });\n\t};\n\n\tPANOLENS.Panorama.prototype.onLeave = function () {\n\n\t\tvar duration = this.animationDuration;\n\n\t\tthis.enterTransition.stop();\n\t\tthis.leaveTransition.to({}, duration).onStart(function () {\n\t\t\tthis.dispatchEvent({ type: 'leave-animation-start' });\n\n\t\t\tthis.fadeOut(duration);\n\t\t\tthis.toggleInfospotVisibility(false);\n\t\t}.bind(this)).start();\n\n\t\tthis.dispatchEvent({ type: 'leave' });\n\t};\n\n\tPANOLENS.Panorama.prototype.dispose = function () {\n\t\tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this });\n\n\t\tfunction recursiveDispose(object) {\n\n\t\t\tfor (var i = object.children.length - 1; i >= 0; i--) {\n\n\t\t\t\trecursiveDispose(object.children[i]);\n\t\t\t\tobject.remove(object.children[i]);\n\t\t\t}\n\n\t\t\tif (object instanceof PANOLENS.Infospot) {\n\n\t\t\t\tobject.dispose();\n\t\t\t}\n\n\t\t\tobject.geometry && object.geometry.dispose();\n\t\t\tobject.material && object.material.dispose();\n\t\t}\n\n\t\trecursiveDispose(this);\n\n\t\tif (this.parent) {\n\n\t\t\tthis.parent.remove(this);\n\t\t}\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.ImagePanorama = function (image, radius) {\n\n\t\tradius = radius || 5000;\n\n\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"SphereGeometry\"](radius, 60, 40),\n\t\t    material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ opacity: 0, transparent: true });\n\n\t\tPANOLENS.Panorama.call(this, geometry, material);\n\n\t\tthis.src = image;\n\t};\n\n\tPANOLENS.ImagePanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n\tPANOLENS.ImagePanorama.prototype.constructor = PANOLENS.ImagePanorama;\n\n\tPANOLENS.ImagePanorama.prototype.load = function (src) {\n\n\t\tsrc = src || this.src;\n\n\t\tif (!src) {\n\n\t\t\tconsole.warn('Image source undefined');\n\n\t\t\treturn;\n\t\t} else if (typeof src === 'string') {\n\n\t\t\tPANOLENS.Utils.TextureLoader.load(src, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this));\n\t\t} else if (src instanceof HTMLImageElement) {\n\n\t\t\tthis.onLoad(new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"](src));\n\t\t}\n\t};\n\n\tPANOLENS.ImagePanorama.prototype.onLoad = function (texture) {\n\n\t\ttexture.minFilter = texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\n\t\ttexture.needsUpdate = true;\n\n\t\tthis.updateTexture(texture);\n\n\t\twindow.requestAnimationFrame(function () {\n\n\t\t\twindow.requestAnimationFrame(function () {\n\n\t\t\t\tPANOLENS.Panorama.prototype.onLoad.call(this);\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t};\n\n\tPANOLENS.ImagePanorama.prototype.reset = function () {\n\n\t\tPANOLENS.Panorama.prototype.reset.call(this);\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.GoogleStreetviewPanorama = function (panoId, radius) {\n\n\t\tPANOLENS.ImagePanorama.call(this, undefined, radius);\n\n\t\tthis.panoId = panoId;\n\n\t\tthis.gsvLoader = undefined;\n\n\t\tthis.loadRequested = false;\n\n\t\tthis.setupGoogleMapAPI();\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.ImagePanorama.prototype);\n\n\tPANOLENS.GoogleStreetviewPanorama.constructor = PANOLENS.GoogleStreetviewPanorama;\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.load = function (panoId) {\n\n\t\tthis.loadRequested = true;\n\n\t\tpanoId = panoId || this.panoId || {};\n\n\t\tif (panoId && this.gsvLoader) {\n\n\t\t\tthis.loadGSVLoader(panoId);\n\t\t} else {\n\n\t\t\tthis.gsvLoader = {};\n\t\t}\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI = function () {\n\n\t\tvar script = document.createElement('script');\n\t\tscript.src = 'https://maps.googleapis.com/maps/api/js';\n\t\tscript.onreadystatechange = this.setGSVLoader.bind(this);\n\t\tscript.onload = this.setGSVLoader.bind(this);\n\n\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader = function () {\n\n\t\tthis.gsvLoader = new GSVPANO.PanoLoader();\n\n\t\tif (this.gsvLoader === {} || this.loadRequested) {\n\n\t\t\tthis.load();\n\t\t}\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader = function () {\n\n\t\treturn this.gsvLoader;\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader = function (panoId) {\n\n\t\tthis.loadRequested = false;\n\n\t\tthis.gsvLoader.onProgress = this.onProgress.bind(this);\n\n\t\tthis.gsvLoader.onPanoramaLoad = this.onLoad.bind(this);\n\n\t\tthis.gsvLoader.setZoom(this.getZoomLevel());\n\n\t\tthis.gsvLoader.load(panoId);\n\n\t\tthis.gsvLoader.loaded = true;\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.onLoad = function (canvas) {\n\n\t\tif (!this.gsvLoader) {\n\t\t\treturn;\n\t\t}\n\n\t\tPANOLENS.ImagePanorama.prototype.onLoad.call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"](canvas));\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.reset = function () {\n\n\t\tthis.gsvLoader = undefined;\n\n\t\tPANOLENS.ImagePanorama.prototype.reset.call(this);\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.CubePanorama = function (images, edgeLength) {\n\n\t\tvar shader, geometry, material;\n\n\t\tthis.images = images || [];\n\n\t\tedgeLength = edgeLength || 10000;\n\t\tshader = JSON.parse(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderLib\"]['cube']));\n\n\t\tgeometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BoxGeometry\"](edgeLength, edgeLength, edgeLength);\n\t\tmaterial = new __WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderMaterial\"]({\n\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tuniforms: shader.uniforms,\n\t\t\tside: __WEBPACK_IMPORTED_MODULE_8_three__[\"BackSide\"]\n\n\t\t});\n\n\t\tPANOLENS.Panorama.call(this, geometry, material);\n\t};\n\n\tPANOLENS.CubePanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n\tPANOLENS.CubePanorama.prototype.constructor = PANOLENS.CubePanorama;\n\n\tPANOLENS.CubePanorama.prototype.load = function () {\n\n\t\tPANOLENS.Utils.CubeTextureLoader.load(this.images, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this));\n\t};\n\n\tPANOLENS.CubePanorama.prototype.onLoad = function (texture) {\n\n\t\tthis.material.uniforms['tCube'].value = texture;\n\n\t\tPANOLENS.Panorama.prototype.onLoad.call(this);\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.BasicPanorama = function (edgeLength) {\n\n\t\tvar tile = PANOLENS.DataImage.WhiteTile;\n\n\t\tPANOLENS.CubePanorama.call(this, [tile, tile, tile, tile, tile, tile], edgeLength);\n\t};\n\n\tPANOLENS.BasicPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.CubePanorama.prototype);\n\n\tPANOLENS.BasicPanorama.prototype.constructor = PANOLENS.BasicPanorama;\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.VideoPanorama = function (src, options, radius) {\n\n\t\tradius = radius || 5000;\n\n\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"SphereGeometry\"](radius, 60, 40),\n\t\t    material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ opacity: 0, transparent: true });\n\n\t\tPANOLENS.Panorama.call(this, geometry, material);\n\n\t\tthis.src = src;\n\t\tthis.options = options || {};\n\t\tthis.options.playsinline = this.options.playsinline !== false ? true : false;\n\n\t\tthis.videoElement = undefined;\n\t\tthis.videoRenderObject = undefined;\n\t\tthis.videoProgress = 0;\n\n\t\tthis.isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);\n\t\tthis.isMobile = this.isIOS || /Android|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent);\n\n\t\tthis.addEventListener('leave', this.pauseVideo.bind(this));\n\t\tthis.addEventListener('enter-fade-start', this.resumeVideoProgress.bind(this));\n\t\tthis.addEventListener('video-toggle', this.toggleVideo.bind(this));\n\t\tthis.addEventListener('video-time', this.setVideoCurrentTime.bind(this));\n\t};\n\n\tPANOLENS.VideoPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n\tPANOLENS.VideoPanorama.constructor = PANOLENS.VideoPanorama;\n\n\tPANOLENS.VideoPanorama.prototype.load = function (src, options) {\n\n\t\tvar scope = this;\n\n\t\tsrc = src || this.src || '';\n\t\toptions = options || this.options || {};\n\n\t\tthis.videoElement = options.videoElement || document.createElement('video');\n\n\t\tthis.videoElement.muted = options.muted || false;\n\t\tthis.videoElement.loop = options.loop !== undefined ? options.loop : true;\n\t\tthis.videoElement.autoplay = options.autoplay !== undefined ? options.autoplay : false;\n\t\tthis.videoElement.crossOrigin = options.crossOrigin !== undefined ? options.crossOrigin : \"anonymous\";\n\n\t\tif (options.playsinline) {\n\t\t\tthis.videoElement.setAttribute(\"playsinline\", \"\");\n\t\t\tthis.videoElement.setAttribute(\"webkit-playsinline\", \"\");\n\t\t}\n\n\t\tvar onloadeddata = function onloadeddata() {\n\n\t\t\tscope.onProgress({ loaded: 1, total: 1 });\n\t\t\tscope.setVideoTexture(scope.videoElement);\n\n\t\t\tif (scope.videoElement.autoplay) {\n\t\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n\t\t\t}\n\n\t\t\tif (scope.isMobile) {\n\n\t\t\t\tif (scope.videoElement.autoplay && scope.videoElement.muted) {\n\t\t\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n\t\t\t\t} else {\n\t\t\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tscope.onLoad();\n\t\t};\n\n\t\tif (this.videoElement.readyState > 2) {\n\n\t\t\tonloadeddata();\n\t\t} else {\n\n\t\t\tif (!this.videoElement.querySelectorAll('source').length || !this.videoElement.src) {\n\n\t\t\t\tthis.videoElement.src = src;\n\t\t\t}\n\n\t\t\tthis.videoElement.load();\n\t\t}\n\n\t\tthis.videoElement.onloadeddata = onloadeddata;\n\n\t\tthis.videoElement.ontimeupdate = function (event) {\n\n\t\t\tscope.videoProgress = this.duration >= 0 ? this.currentTime / this.duration : 0;\n\n\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: scope.videoProgress });\n\t\t};\n\n\t\tthis.videoElement.addEventListener('ended', function () {\n\n\t\t\tif (!scope.options.loop) {\n\n\t\t\t\tscope.resetVideo();\n\t\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n\t\t\t}\n\t\t}, false);\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.setVideoTexture = function (video) {\n\n\t\tvar videoTexture, videoRenderObject, scene;\n\n\t\tif (!video) return;\n\n\t\tvideoTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"VideoTexture\"](video);\n\t\tvideoTexture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\t\tvideoTexture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\t\tvideoTexture.format = __WEBPACK_IMPORTED_MODULE_8_three__[\"RGBFormat\"];\n\n\t\tvideoRenderObject = {\n\n\t\t\tvideo: video,\n\t\t\tvideoTexture: videoTexture\n\n\t\t};\n\n\t\tif (this.isIOS) {\n\n\t\t\tenableInlineVideo(video);\n\t\t}\n\n\t\tthis.updateTexture(videoTexture);\n\n\t\tthis.videoRenderObject = videoRenderObject;\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.reset = function () {\n\n\t\tthis.videoElement = undefined;\n\n\t\tPANOLENS.Panorama.prototype.reset.call(this);\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.isVideoPaused = function () {\n\n\t\treturn this.videoRenderObject.video.paused;\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.toggleVideo = function () {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video) {\n\n\t\t\tif (this.isVideoPaused()) {\n\n\t\t\t\tthis.videoRenderObject.video.play();\n\t\t\t} else {\n\n\t\t\t\tthis.videoRenderObject.video.pause();\n\t\t\t}\n\t\t}\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.setVideoCurrentTime = function (event) {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video && !__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default()(event.percentage) && event.percentage !== 1) {\n\n\t\t\tthis.videoRenderObject.video.currentTime = this.videoRenderObject.video.duration * event.percentage;\n\n\t\t\tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: event.percentage });\n\t\t}\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.playVideo = function () {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video && this.isVideoPaused()) {\n\n\t\t\tthis.videoRenderObject.video.play();\n\t\t}\n\n\t\tthis.dispatchEvent({ type: 'play' });\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.pauseVideo = function () {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoPaused()) {\n\n\t\t\tthis.videoRenderObject.video.pause();\n\t\t}\n\n\t\tthis.dispatchEvent({ type: 'pause' });\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.resumeVideoProgress = function () {\n\n\t\tif (this.videoElement.autoplay && !this.isMobile) {\n\n\t\t\tthis.playVideo();\n\n\t\t\tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n\t\t} else {\n\n\t\t\tthis.pauseVideo();\n\n\t\t\tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n\t\t}\n\n\t\tthis.setVideoCurrentTime({ percentage: this.videoProgress });\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.resetVideo = function () {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video) {\n\n\t\t\tthis.setVideoCurrentTime({ percentage: 0 });\n\t\t}\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.isVideoMuted = function () {\n\n\t\treturn this.videoRenderObject.video.muted;\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.muteVideo = function () {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoMuted()) {\n\n\t\t\tthis.videoRenderObject.video.muted = true;\n\t\t}\n\n\t\tthis.dispatchEvent({ type: 'volumechange' });\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.unmuteVideo = function () {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video && this.isVideoMuted()) {\n\n\t\t\tthis.videoRenderObject.video.muted = false;\n\t\t}\n\n\t\tthis.dispatchEvent({ type: 'volumechange' });\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.getVideoElement = function () {\n\n\t\treturn this.videoRenderObject.video;\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.dispose = function () {\n\n\t\tthis.resetVideo();\n\t\tthis.pauseVideo();\n\n\t\tthis.removeEventListener('leave', this.pauseVideo.bind(this));\n\t\tthis.removeEventListener('enter-fade-start', this.resumeVideoProgress.bind(this));\n\t\tthis.removeEventListener('video-toggle', this.toggleVideo.bind(this));\n\t\tthis.removeEventListener('video-time', this.setVideoCurrentTime.bind(this));\n\n\t\tPANOLENS.Panorama.prototype.dispose.call(this);\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.EmptyPanorama = function (radius) {\n\n\t\tradius = radius || 5000;\n\n\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Geometry\"](),\n\t\t    material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({\n\t\t\tcolor: 0x000000, opacity: 1, transparent: true\n\t\t});\n\n\t\tPANOLENS.Panorama.call(this, geometry, material);\n\t};\n\n\tPANOLENS.EmptyPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n\tPANOLENS.EmptyPanorama.prototype.constructor = PANOLENS.EmptyPanorama;\n})();;(function () {\n\tPANOLENS.LittlePlanet = function (type, source, size, ratio) {\n\n\t\ttype = type || 'image';\n\n\t\ttype === 'image' && PANOLENS.ImagePanorama.call(this, source, size);\n\n\t\tthis.size = size || 10000;\n\t\tthis.ratio = ratio || 0.5;\n\t\tthis.EPS = 0.000001;\n\t\tthis.frameId;\n\n\t\tthis.geometry = this.createGeometry();\n\t\tthis.material = this.createMaterial(this.size);\n\n\t\tthis.dragging = false;\n\t\tthis.userMouse = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n\t\tthis.quatA = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\t\tthis.quatB = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\t\tthis.quatCur = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\t\tthis.quatSlerp = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n\t\tthis.vectorX = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n\t\tthis.vectorY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n\n\t\tthis.addEventListener('window-resize', this.onWindowResize);\n\t};\n\n\tPANOLENS.LittlePlanet.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.ImagePanorama.prototype);\n\n\tPANOLENS.LittlePlanet.prototype.constructor = PANOLENS.LittlePlanet;\n\n\tPANOLENS.LittlePlanet.prototype.createGeometry = function () {\n\n\t\treturn new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneGeometry\"](this.size, this.size * this.ratio);\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.createMaterial = function (size) {\n\n\t\tvar uniforms = PANOLENS.StereographicShader.uniforms;\n\t\tuniforms.zoom.value = size;\n\n\t\treturn new __WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderMaterial\"]({\n\n\t\t\tuniforms: uniforms,\n\t\t\tvertexShader: PANOLENS.StereographicShader.vertexShader,\n\t\t\tfragmentShader: PANOLENS.StereographicShader.fragmentShader\n\n\t\t});\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.registerMouseEvents = function () {\n\n\t\tthis.container.addEventListener('mousedown', this.onMouseDown.bind(this), false);\n\t\tthis.container.addEventListener('mousemove', this.onMouseMove.bind(this), false);\n\t\tthis.container.addEventListener('mouseup', this.onMouseUp.bind(this), false);\n\t\tthis.container.addEventListener('touchstart', this.onMouseDown.bind(this), false);\n\t\tthis.container.addEventListener('touchmove', this.onMouseMove.bind(this), false);\n\t\tthis.container.addEventListener('touchend', this.onMouseUp.bind(this), false);\n\t\tthis.container.addEventListener('mousewheel', this.onMouseWheel.bind(this), false);\n\t\tthis.container.addEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false);\n\t\tthis.container.addEventListener('contextmenu', this.onContextMenu.bind(this), false);\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.unregisterMouseEvents = function () {\n\n\t\tthis.container.removeEventListener('mousedown', this.onMouseDown.bind(this), false);\n\t\tthis.container.removeEventListener('mousemove', this.onMouseMove.bind(this), false);\n\t\tthis.container.removeEventListener('mouseup', this.onMouseUp.bind(this), false);\n\t\tthis.container.removeEventListener('touchstart', this.onMouseDown.bind(this), false);\n\t\tthis.container.removeEventListener('touchmove', this.onMouseMove.bind(this), false);\n\t\tthis.container.removeEventListener('touchend', this.onMouseUp.bind(this), false);\n\t\tthis.container.removeEventListener('mousewheel', this.onMouseWheel.bind(this), false);\n\t\tthis.container.removeEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false);\n\t\tthis.container.removeEventListener('contextmenu', this.onContextMenu.bind(this), false);\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseDown = function (event) {\n\n\t\tvar x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n\t\tvar y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\n\t\tvar inputCount = event.touches && event.touches.length || 1;\n\n\t\tswitch (inputCount) {\n\n\t\t\tcase 1:\n\n\t\t\t\tthis.dragging = true;\n\t\t\t\tthis.userMouse.set(x, y);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\tthis.userMouse.pinchDistance = distance;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tthis.onUpdateCallback();\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseMove = function (event) {\n\n\t\tvar x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n\t\tvar y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\n\t\tvar inputCount = event.touches && event.touches.length || 1;\n\n\t\tswitch (inputCount) {\n\n\t\t\tcase 1:\n\n\t\t\t\tvar angleX = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(x - this.userMouse.x) * 0.4;\n\t\t\t\tvar angleY = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(y - this.userMouse.y) * 0.4;\n\n\t\t\t\tif (this.dragging) {\n\t\t\t\t\tthis.quatA.setFromAxisAngle(this.vectorY, angleX);\n\t\t\t\t\tthis.quatB.setFromAxisAngle(this.vectorX, angleY);\n\t\t\t\t\tthis.quatCur.multiply(this.quatA).multiply(this.quatB);\n\t\t\t\t\tthis.userMouse.set(x, y);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tvar uniforms = this.material.uniforms;\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tthis.addZoomDelta(this.userMouse.pinchDistance - distance);\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tbreak;\n\n\t\t}\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseUp = function (event) {\n\n\t\tthis.dragging = false;\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseWheel = function (event) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar delta = 0;\n\n\t\tif (event.wheelDelta !== undefined) {\n\n\t\t\tdelta = event.wheelDelta;\n\t\t} else if (event.detail !== undefined) {\n\n\t\t\tdelta = -event.detail;\n\t\t}\n\n\t\tthis.addZoomDelta(delta);\n\t\tthis.onUpdateCallback();\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.addZoomDelta = function (delta) {\n\n\t\tvar uniforms = this.material.uniforms;\n\t\tvar lowerBound = this.size * 0.1;\n\t\tvar upperBound = this.size * 10;\n\n\t\tuniforms.zoom.value += delta;\n\n\t\tif (uniforms.zoom.value <= lowerBound) {\n\n\t\t\tuniforms.zoom.value = lowerBound;\n\t\t} else if (uniforms.zoom.value >= upperBound) {\n\n\t\t\tuniforms.zoom.value = upperBound;\n\t\t}\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onUpdateCallback = function () {\n\n\t\tthis.frameId = window.requestAnimationFrame(this.onUpdateCallback.bind(this));\n\n\t\tthis.quatSlerp.slerp(this.quatCur, 0.1);\n\t\tthis.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp);\n\n\t\tif (!this.dragging && 1.0 - this.quatSlerp.clone().dot(this.quatCur) < this.EPS) {\n\n\t\t\twindow.cancelAnimationFrame(this.frameId);\n\t\t}\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.reset = function () {\n\n\t\tthis.quatCur.set(0, 0, 0, 1);\n\t\tthis.quatSlerp.set(0, 0, 0, 1);\n\t\tthis.onUpdateCallback();\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onLoad = function () {\n\n\t\tthis.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\n\t\tthis.registerMouseEvents();\n\t\tthis.onUpdateCallback();\n\n\t\tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'disableControl' });\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onLeave = function () {\n\n\t\tthis.unregisterMouseEvents();\n\n\t\tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'enableControl', data: PANOLENS.Controls.ORBIT });\n\n\t\twindow.cancelAnimationFrame(this.frameId);\n\n\t\tPANOLENS.Panorama.prototype.onLeave.call(this);\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onWindowResize = function () {\n\n\t\tthis.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onContextMenu = function () {\n\n\t\tthis.dragging = false;\n\t};\n})();;(function () {\n\tPANOLENS.ImageLittlePlanet = function (source, size, ratio) {\n\n\t\tPANOLENS.LittlePlanet.call(this, 'image', source, size, ratio);\n\t};\n\n\tPANOLENS.ImageLittlePlanet.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.LittlePlanet.prototype);\n\n\tPANOLENS.ImageLittlePlanet.prototype.constructor = PANOLENS.ImageLittlePlanet;\n\n\tPANOLENS.ImageLittlePlanet.prototype.onLoad = function (texture) {\n\n\t\tthis.updateTexture(texture);\n\n\t\tPANOLENS.ImagePanorama.prototype.onLoad.call(this, texture);\n\t\tPANOLENS.LittlePlanet.prototype.onLoad.call(this);\n\t};\n\n\tPANOLENS.ImageLittlePlanet.prototype.updateTexture = function (texture) {\n\n\t\ttexture.minFilter = texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\n\t\tthis.material.uniforms[\"tDiffuse\"].value = texture;\n\t};\n})();;(function () {\n\tPANOLENS.Reticle = function (color, autoSelect, idleImageUrl, dwellImageUrl, dwellTime, dwellSpriteAmount) {\n\n\t\tcolor = color || 0xffffff;\n\n\t\tthis.autoSelect = autoSelect != undefined ? autoSelect : true;\n\n\t\tthis.dwellTime = dwellTime || 1500;\n\t\tthis.dwellSpriteAmount = dwellSpriteAmount || 45;\n\t\tthis.dwellInterval = this.dwellTime / this.dwellSpriteAmount;\n\n\t\tthis.IDLE = 0;\n\t\tthis.DWELLING = 1;\n\t\tthis.status;\n\n\t\tthis.scaleIdle = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0.2, 0.2, 1);\n\t\tthis.scaleDwell = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0.8, 1);\n\n\t\tthis.textureLoaded = false;\n\t\tthis.idleImageUrl = idleImageUrl || PANOLENS.DataImage.ReticleIdle;\n\t\tthis.dwellImageUrl = dwellImageUrl || PANOLENS.DataImage.ReticleDwell;\n\t\tthis.idleTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\t\tthis.dwellTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"SpriteMaterial\"]({ color: color, depthTest: false }));\n\n\t\tthis.currentTile = 0;\n\t\tthis.startTime = 0;\n\n\t\tthis.visible = false;\n\t\tthis.renderOrder = 10;\n\t\tthis.timerId;\n\n\t\tthis.updateStatus(this.IDLE);\n\t};\n\n\tPANOLENS.Reticle.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].prototype);\n\n\tPANOLENS.Reticle.prototype.constructor = PANOLENS.Reticle;\n\n\tPANOLENS.Reticle.prototype.show = function () {\n\n\t\tthis.visible = true;\n\t};\n\n\tPANOLENS.Reticle.prototype.hide = function () {\n\n\t\tthis.visible = false;\n\t};\n\n\tPANOLENS.Reticle.prototype.loadTextures = function () {\n\n\t\tthis.idleTexture = PANOLENS.Utils.TextureLoader.load(this.idleImageUrl);\n\t\tthis.dwellTexture = PANOLENS.Utils.TextureLoader.load(this.dwellImageUrl);\n\n\t\tthis.material.map = this.idleTexture;\n\t\tthis.setupDwellSprite(this.dwellTexture);\n\t\tthis.textureLoaded = true;\n\t};\n\n\tPANOLENS.Reticle.prototype.select = function (completeCallback) {\n\n\t\tif (performance.now() - this.startTime >= this.dwellTime) {\n\n\t\t\tthis.completeDwelling();\n\t\t\tcompleteCallback();\n\t\t} else if (this.autoSelect) {\n\n\t\t\tthis.updateDwelling(performance.now());\n\t\t\tthis.timerId = window.requestAnimationFrame(this.select.bind(this, completeCallback));\n\t\t}\n\t};\n\n\tPANOLENS.Reticle.prototype.clearTimer = function () {\n\n\t\twindow.cancelAnimationFrame(this.timerId);\n\t\tthis.timerId = null;\n\t};\n\n\tPANOLENS.Reticle.prototype.setupDwellSprite = function (texture) {\n\n\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_8_three__[\"RepeatWrapping\"];\n\t\ttexture.repeat.set(1 / this.dwellSpriteAmount, 1);\n\t};\n\n\tPANOLENS.Reticle.prototype.updateStatus = function (status) {\n\n\t\tthis.status = status;\n\n\t\tif (status === this.IDLE) {\n\t\t\tthis.scale.copy(this.scaleIdle);\n\t\t\tthis.material.map = this.idleTexture;\n\t\t} else if (status === this.DWELLING) {\n\t\t\tthis.scale.copy(this.scaleDwell);\n\t\t\tthis.material.map = this.dwellTexture;\n\t\t}\n\n\t\tthis.currentTile = 0;\n\t\tthis.material.map.offset.x = 0;\n\t};\n\n\tPANOLENS.Reticle.prototype.startDwelling = function (completeCallback) {\n\n\t\tif (!this.autoSelect) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.startTime = performance.now();\n\t\tthis.updateStatus(this.DWELLING);\n\t\tthis.select(completeCallback);\n\t};\n\n\tPANOLENS.Reticle.prototype.updateDwelling = function (time) {\n\n\t\tvar elasped = time - this.startTime;\n\n\t\tif (this.currentTile <= this.dwellSpriteAmount) {\n\t\t\tthis.currentTile = Math.floor(elasped / this.dwellTime * this.dwellSpriteAmount);\n\t\t\tthis.material.map.offset.x = this.currentTile / this.dwellSpriteAmount;\n\t\t} else {\n\t\t\tthis.updateStatus(this.IDLE);\n\t\t}\n\t};\n\n\tPANOLENS.Reticle.prototype.cancelDwelling = function () {\n\t\tthis.clearTimer();\n\t\tthis.updateStatus(this.IDLE);\n\t};\n\n\tPANOLENS.Reticle.prototype.completeDwelling = function () {\n\t\tthis.clearTimer();\n\t\tthis.updateStatus(this.IDLE);\n\t};\n})();;(function () {\n\tPANOLENS.Tile = function (width, height, widthSegments, heightSegments, forceDirection, forceAxis, forceAngle) {\n\n\t\tvar scope = this;\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tforceDirection: forceDirection,\n\t\t\tforceAxis: forceAxis,\n\t\t\tforceAngle: forceAngle\n\t\t};\n\n\t\twidth = width || 10;\n\t\theight = height || 5;\n\t\twidthSegments = widthSegments || 1;\n\t\theightSegments = heightSegments || 1;\n\t\tforceDirection = forceDirection || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 0, 1);\n\t\tforceAxis = forceAxis || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n\t\tforceAngle = forceAngle !== undefined ? forceAngle : 0;\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneGeometry\"](width, height, widthSegments, heightSegments), new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ color: 0xffffff, transparent: true }));\n\n\t\tthis.bendModifier = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"]();\n\n\t\tthis.entity = undefined;\n\n\t\tthis.animationDuration = 500;\n\t\tthis.animationFadeOut = undefined;\n\t\tthis.animationFadeIn = undefined;\n\t\tthis.animationTranslation = undefined;\n\t\tthis.tweens = {};\n\n\t\tif (forceAngle !== 0) {\n\n\t\t\tthis.bend(forceDirection, forceAxis, forceAngle);\n\t\t}\n\n\t\tthis.originalGeometry = this.geometry.clone();\n\t};\n\n\tPANOLENS.Tile.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].prototype);\n\n\tPANOLENS.Tile.prototype.constructor = PANOLENS.Tile;\n\n\tPANOLENS.Tile.prototype.clone = function () {\n\n\t\tvar parameters = this.parameters,\n\t\t    tile;\n\n\t\ttile = new PANOLENS.Tile(parameters.width, parameters.height, parameters.widthSegments, parameters.heightSegments, parameters.forceDirection, parameters.forceAxis, parameters.forceAngle);\n\n\t\ttile.setEntity(this.entity);\n\t\ttile.material = this.material.clone();\n\n\t\treturn tile;\n\t};\n\n\tPANOLENS.Tile.prototype.bend = function (direction, axis, angle) {\n\n\t\tthis.bendModifier.set(direction, axis, angle).modify(this.geometry);\n\t};\n\n\tPANOLENS.Tile.prototype.unbend = function () {\n\n\t\tvar geometry = this.geometry;\n\n\t\tthis.geometry = this.originalGeometry;\n\t\tthis.originalGeometry = this.geometry.clone();\n\n\t\tgeometry.dispose();\n\t\tgeometry = null;\n\t};\n\n\tPANOLENS.Tile.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n\n\t\tobject = object || this;\n\t\ttoState = toState || {};\n\t\tduration = duration || this.animationDuration;\n\t\teasing = easing || TWEEN.Easing.Exponential.Out;\n\t\tdelay = delay !== undefined ? delay : 0;\n\t\tonStart = onStart ? onStart : null;\n\t\tonUpdate = onUpdate ? onUpdate : null;\n\t\tonComplete = onComplete ? onComplete : null;\n\n\t\tif (!this.tweens[name]) {\n\t\t\tthis.tweens[name] = new TWEEN.Tween(object).to(toState, duration).easing(easing).delay(delay).onStart(onStart).onUpdate(onUpdate).onComplete(onComplete);\n\t\t}\n\n\t\treturn this.tweens[name];\n\t};\n\n\tPANOLENS.Tile.prototype.ripple = function (scale, duration, easing) {\n\n\t\tscale = scale || 2;\n\t\tduration = duration || 200;\n\t\teasing = easing || TWEEN.Easing.Cubic.Out;\n\n\t\tvar scope = this,\n\t\t    ripple = this.clone();\n\n\t\tnew TWEEN.Tween(ripple.scale).to({ x: scale, y: scale }, duration).easing(easing).start();\n\n\t\tnew TWEEN.Tween(ripple.material).to({ opacity: 0 }, duration).easing(easing).onComplete(function () {\n\t\t\tscope.remove(ripple);\n\t\t\tripple.geometry.dispose();\n\t\t\tripple.material.dispose();\n\t\t}).start();\n\n\t\tthis.add(ripple);\n\t};\n\n\tPANOLENS.Tile.prototype.setEntity = function (entity) {\n\n\t\tthis.entity = entity;\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.TileGroup = function (tileArray, verticalGap, depthGap, animationDuration, offset) {\n\n\t\tvar scope = this,\n\t\t    textureLoader;\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].call(this);\n\n\t\tthis.tileArray = tileArray || [];\n\t\tthis.offset = offset !== undefined ? offset : 0;\n\t\tthis.v_gap = verticalGap !== undefined ? verticalGap : 6;\n\t\tthis.d_gap = depthGap !== undefined ? depthGap : 2;\n\t\tthis.animationDuration = animationDuration !== undefined ? animationDuration : 200;\n\t\tthis.animationEasing = TWEEN.Easing.Exponential.Out;\n\t\tthis.visibleDelta = 2;\n\n\t\tthis.tileArray.map(function (tile, index) {\n\n\t\t\tif (tile.image) {\n\n\t\t\t\tPANOLENS.Utils.TextureLoader.load(tile.image, scope.setTexture.bind(tile));\n\t\t\t}\n\n\t\t\ttile.position.set(0, index * -scope.v_gap, index * -scope.d_gap);\n\t\t\ttile.originalPosition = tile.position.clone();\n\t\t\ttile.setEntity(scope);\n\t\t\tscope.add(tile);\n\t\t});\n\n\t\tthis.updateVisbility();\n\t};\n\n\tPANOLENS.TileGroup.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype);\n\n\tPANOLENS.TileGroup.prototype.constructor = PANOLENS.TileGroup;\n\n\tPANOLENS.TileGroup.prototype.updateTexture = function (imageArray) {\n\n\t\tvar scope = this;\n\n\t\timageArray = imageArray || [];\n\t\tthis.children.map(function (child, index) {\n\t\t\tif (child instanceof PANOLENS.Tile && imageArray[index]) {\n\t\t\t\tPANOLENS.Utils.TextureLoader.load(imageArray[index], scope.setTexture.bind(child));\n\t\t\t\tif (child.outline) {\n\t\t\t\t\tchild.outline.material.visible = true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tPANOLENS.TileGroup.prototype.updateAllTexture = function (imageArray) {\n\n\t\tthis.updateTexture(imageArray);\n\n\t\tif (imageArray.length < this.children.length) {\n\t\t\tfor (var i = imageArray.length; i < this.children.length; i++) {\n\t\t\t\tif (this.children[i] instanceof PANOLENS.Tile) {\n\t\t\t\t\tthis.children[i].material.visible = false;\n\t\t\t\t\tif (this.children[i].outline) {\n\t\t\t\t\t\tthis.children[i].outline.material.visible = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tPANOLENS.TileGroup.prototype.setTexture = function (texture) {\n\n\t\ttexture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\t\ttexture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\t\tthis.material.visible = true;\n\t\tthis.material.map = texture;\n\t\tthis.material.needsUpdate = true;\n\t};\n\n\tPANOLENS.TileGroup.prototype.updateVisbility = function () {\n\n\t\tthis.children[this.offset].visible = true;\n\t\tnew TWEEN.Tween(this.children[this.offset].material).to({ opacity: 1 }, this.animationDuration).easing(this.animationEasing).start();\n\n\t\tif (this.children[this.offset].outline) {\n\n\t\t\tthis.children[this.offset].outline.visible = true;\n\t\t}\n\n\t\tfor (var i = this.offset - 1; i >= 0; i--) {\n\n\t\t\tif (this.tileArray.indexOf(this.children[i]) === -1) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (this.offset - i <= this.visibleDelta) {\n\n\t\t\t\tthis.children[i].visible = true;\n\t\t\t\tnew TWEEN.Tween(this.children[i].material).to({ opacity: 1 / (this.offset - i) * 0.5 }, this.animationDuration).easing(this.animationEasing).start();\n\t\t\t} else {\n\n\t\t\t\tthis.children[i].visible = false;\n\t\t\t}\n\n\t\t\tthis.children[i].outline && (this.children[i].outline.visible = false);\n\t\t}\n\n\t\tfor (var i = this.offset + 1; i < this.children.length; i++) {\n\n\t\t\tif (this.tileArray.indexOf(this.children[i]) === -1) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (i - this.offset <= this.visibleDelta) {\n\n\t\t\t\tthis.children[i].visible = true;\n\t\t\t\tnew TWEEN.Tween(this.children[i].material).to({ opacity: 1 / (i - this.offset) * 0.5 }, this.animationDuration).easing(this.animationEasing).start();\n\t\t\t} else {\n\n\t\t\t\tthis.children[i].visible = false;\n\t\t\t}\n\n\t\t\tthis.children[i].outline && (this.children[i].outline.visible = false);\n\t\t}\n\t};\n\n\tPANOLENS.TileGroup.prototype.scrollUp = function (duration) {\n\n\t\tvar tiles = this.tileArray,\n\t\t    offset;\n\n\t\tduration = duration !== undefined ? duration : this.animationDuration;\n\n\t\toffset = this.offset + 1;\n\n\t\tif (this.offset < tiles.length - 1 && tiles[this.offset + 1].material.visible) {\n\n\t\t\tfor (var i = tiles.length - 1; i >= 0; i--) {\n\n\t\t\t\tnew TWEEN.Tween(tiles[i].position).to({ y: (i - offset) * -this.v_gap,\n\t\t\t\t\tz: Math.abs(i - offset) * -this.d_gap }, duration).easing(this.animationEasing).start();\n\t\t\t}\n\n\t\t\tthis.offset++;\n\t\t\tthis.updateVisbility();\n\t\t\tthis.dispatchEvent({ type: 'scroll', direction: 'up' });\n\t\t}\n\t};\n\n\tPANOLENS.TileGroup.prototype.scrollDown = function (duration) {\n\n\t\tvar tiles = this.tileArray,\n\t\t    offset;\n\n\t\tduration = duration !== undefined ? duration : this.animationDuration;\n\n\t\toffset = this.offset - 1;\n\n\t\tif (this.offset > 0 && tiles[this.offset - 1].material.visible) {\n\n\t\t\tfor (var i = 0; i < tiles.length; i++) {\n\n\t\t\t\tnew TWEEN.Tween(tiles[i].position).to({ y: (i - offset) * -this.v_gap,\n\t\t\t\t\tz: Math.abs(i - offset) * -this.d_gap }, duration).easing(this.animationEasing).start();\n\t\t\t}\n\n\t\t\tthis.offset--;\n\t\t\tthis.updateVisbility();\n\t\t\tthis.dispatchEvent({ type: 'scroll', direction: 'down' });\n\t\t}\n\t};\n\n\tPANOLENS.TileGroup.prototype.reset = function () {\n\n\t\tthis.tileArray.map(function (child, index) {\n\n\t\t\tchild.position.copy(child.originalPosition);\n\t\t});\n\n\t\tthis.offset = 0;\n\t\tthis.updateVisbility();\n\t};\n\n\tPANOLENS.TileGroup.prototype.getIndex = function () {\n\n\t\treturn this.offset;\n\t};\n\n\tPANOLENS.TileGroup.prototype.getTileCount = function () {\n\n\t\tvar count = 0;\n\n\t\tthis.tileArray.map(function (tile) {\n\n\t\t\tif (tile.material.visible) {\n\n\t\t\t\tcount++;\n\t\t\t}\n\t\t});\n\n\t\treturn count;\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tvar sharedFont, sharedTexture;\n\tvar pendingQueue = [];\n\n\tPANOLENS.SpriteText = function (text, maxWidth, color, opacity, options) {\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].call(this);\n\n\t\tthis.text = text || '';\n\t\tthis.maxWidth = maxWidth || 2000;\n\t\tthis.color = color || 0xffffff;\n\t\tthis.opacity = opacity !== undefined ? opacity : 1;\n\t\tthis.options = options || {};\n\n\t\tthis.animationDuration = 500;\n\t\tthis.animationFadeOut = undefined;\n\t\tthis.animationFadeIn = undefined;\n\t\tthis.tweens = {};\n\n\t\tthis.addText(text);\n\t};\n\n\tPANOLENS.SpriteText.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype);\n\n\tPANOLENS.SpriteText.prototype.constructor = PANOLENS.SpriteText;\n\n\tPANOLENS.SpriteText.prototype.generateTextGeometry = function () {};\n\tPANOLENS.SpriteText.prototype.generateSDFShader = function () {};\n\n\tPANOLENS.SpriteText.prototype.setBMFont = function (callback, font, texture) {\n\n\t\ttexture.needsUpdate = true;\n\t\ttexture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearMipMapLinearFilter\"];\n\t\ttexture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\t\ttexture.generateMipmaps = true;\n\t\ttexture.anisotropy = 8;\n\n\t\tsharedFont = font;\n\t\tsharedTexture = texture;\n\n\t\tfor (var i = pendingQueue.length - 1; i >= 0; i--) {\n\t\t\tpendingQueue[i].target.addText(pendingQueue[i].text);\n\t\t}\n\n\t\twhile (pendingQueue.length > 0) {\n\t\t\tpendingQueue.pop();\n\t\t}\n\n\t\tcallback && callback();\n\t};\n\n\tPANOLENS.SpriteText.prototype.addText = function (text) {\n\n\t\tif (!sharedFont || !sharedTexture) {\n\t\t\tpendingQueue.push({ target: this, text: text });\n\t\t\treturn;\n\t\t}\n\n\t\tvar textAnchor = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"]();\n\n\t\tthis.options.text = text;\n\t\tthis.options.font = sharedFont;\n\t\tthis.options.width = this.maxWidth;\n\n\t\tvar geometry = this.generateTextGeometry(this.options);\n\t\tgeometry.computeBoundingBox();\n\t\tgeometry.computeBoundingSphere();\n\n\t\tvar material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"RawShaderMaterial\"](this.generateSDFShader({\n\t\t\tmap: sharedTexture,\n\t\t\tside: __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"],\n\t\t\ttransparent: true,\n\t\t\tcolor: this.color,\n\t\t\topacity: this.opacity\n\t\t}));\n\n\t\tvar layout = geometry.layout;\n\t\tvar textMesh = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"](geometry, material);\n\n\t\ttextMesh.entity = this;\n\t\ttextMesh.position.x = -layout.width / 2;\n\t\ttextMesh.position.y = layout.height * 1.035;\n\n\t\ttextAnchor.scale.x = textAnchor.scale.y = -0.05;\n\t\ttextAnchor.add(textMesh);\n\n\t\tthis.mesh = textMesh;\n\t\tthis.add(textAnchor);\n\t};\n\n\tPANOLENS.SpriteText.prototype.update = function (options) {\n\n\t\tvar mesh;\n\n\t\toptions = options || {};\n\n\t\tmesh = this.mesh;\n\n\t\tmesh.geometry.update(options);\n\t\tmesh.position.x = -mesh.geometry.layout.width / 2;\n\t\tmesh.position.y = mesh.geometry.layout.height * 1.035;\n\t};\n\n\tPANOLENS.SpriteText.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n\n\t\tobject = object || this;\n\t\ttoState = toState || {};\n\t\tduration = duration || this.animationDuration;\n\t\teasing = easing || TWEEN.Easing.Exponential.Out;\n\t\tdelay = delay !== undefined ? delay : 0;\n\t\tonStart = onStart ? onStart : null;\n\t\tonUpdate = onUpdate ? onUpdate : null;\n\t\tonComplete = onComplete ? onComplete : null;\n\n\t\tif (!this.tweens[name]) {\n\t\t\tthis.tweens[name] = new TWEEN.Tween(object).to(toState, duration).easing(easing).delay(delay).onStart(onStart).onUpdate(onUpdate).onComplete(onComplete);\n\t\t}\n\n\t\treturn this.tweens[name];\n\t};\n\n\tPANOLENS.SpriteText.prototype.getLayout = function () {\n\n\t\treturn this.mesh && this.mesh.geometry && this.mesh.geometry.layout || {};\n\t};\n\n\tPANOLENS.SpriteText.prototype.setEntity = function (entity) {\n\n\t\tthis.entity = entity;\n\t};\n})();;(function () {\n\tPANOLENS.Widget = function (container) {\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].call(this);\n\n\t\tthis.DEFAULT_TRANSITION = 'all 0.27s ease';\n\t\tthis.TOUCH_ENABLED = PANOLENS.Utils.checkTouchSupported();\n\t\tthis.PREVENT_EVENT_HANDLER = function (event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t};\n\n\t\tthis.container = container;\n\n\t\tthis.barElement;\n\t\tthis.fullscreenElement;\n\t\tthis.videoElement;\n\t\tthis.settingElement;\n\n\t\tthis.mainMenu;\n\n\t\tthis.activeMainItem;\n\t\tthis.activeSubMenu;\n\t\tthis.mask;\n\t};\n\n\tPANOLENS.Widget.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n\n\tPANOLENS.Widget.prototype.constructor = PANOLENS.Widget;\n\n\tPANOLENS.Widget.prototype.addControlBar = function () {\n\n\t\tif (!this.container) {\n\n\t\t\tconsole.warn('Widget container not set');\n\t\t\treturn;\n\t\t}\n\n\t\tvar scope = this,\n\t\t    bar,\n\t\t    styleTranslate,\n\t\t    styleOpacity,\n\t\t    gradientStyle;\n\n\t\tgradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))';\n\n\t\tbar = document.createElement('div');\n\t\tbar.style.width = '100%';\n\t\tbar.style.height = '44px';\n\t\tbar.style.float = 'left';\n\t\tbar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)';\n\t\tbar.style.background = '-webkit-' + gradientStyle;\n\t\tbar.style.background = '-moz-' + gradientStyle;\n\t\tbar.style.background = '-o-' + gradientStyle;\n\t\tbar.style.background = '-ms-' + gradientStyle;\n\t\tbar.style.background = gradientStyle;\n\t\tbar.style.transition = this.DEFAULT_TRANSITION;\n\t\tbar.style.pointerEvents = 'none';\n\t\tbar.isHidden = false;\n\t\tbar.toggle = function () {\n\t\t\tbar.isHidden = !bar.isHidden;\n\t\t\tstyleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)';\n\t\t\tstyleOpacity = bar.isHidden ? 0 : 1;\n\t\t\tbar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate;\n\t\t\tbar.style.opacity = styleOpacity;\n\t\t};\n\n\t\tvar menu = this.createDefaultMenu();\n\t\tthis.mainMenu = this.createMainMenu(menu);\n\t\tbar.appendChild(this.mainMenu);\n\n\t\tvar mask = this.createMask();\n\t\tthis.mask = mask;\n\t\tthis.container.appendChild(mask);\n\n\t\tbar.dispose = function () {\n\n\t\t\tif (scope.fullscreenElement) {\n\n\t\t\t\tbar.removeChild(scope.fullscreenElement);\n\t\t\t\tscope.fullscreenElement.dispose();\n\t\t\t\tscope.fullscreenElement = null;\n\t\t\t}\n\n\t\t\tif (scope.settingElement) {\n\n\t\t\t\tbar.removeChild(scope.settingElement);\n\t\t\t\tscope.settingElement.dispose();\n\t\t\t\tscope.settingElement = null;\n\t\t\t}\n\n\t\t\tif (scope.videoElement) {\n\n\t\t\t\tbar.removeChild(scope.videoElement);\n\t\t\t\tscope.videoElement.dispose();\n\t\t\t\tscope.videoElement = null;\n\t\t\t}\n\t\t};\n\n\t\tthis.container.appendChild(bar);\n\n\t\tthis.mask.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true);\n\t\tthis.mask.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true);\n\t\tthis.mask.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true);\n\t\tthis.mask.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', function (event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tscope.mask.hide();\n\t\t\tscope.settingElement.deactivate();\n\t\t}, false);\n\n\t\tthis.addEventListener('control-bar-toggle', bar.toggle);\n\n\t\tthis.barElement = bar;\n\t};\n\n\tPANOLENS.Widget.prototype.createDefaultMenu = function () {\n\n\t\tvar scope = this,\n\t\t    handler;\n\n\t\thandler = function handler(method, data) {\n\n\t\t\treturn function () {\n\n\t\t\t\tscope.dispatchEvent({\n\n\t\t\t\t\ttype: 'panolens-viewer-handler',\n\t\t\t\t\tmethod: method,\n\t\t\t\t\tdata: data\n\n\t\t\t\t});\n\t\t\t};\n\t\t};\n\n\t\treturn [{\n\t\t\ttitle: 'Control',\n\t\t\tsubMenu: [{\n\t\t\t\ttitle: this.TOUCH_ENABLED ? 'Touch' : 'Mouse',\n\t\t\t\thandler: handler('enableControl', PANOLENS.Controls.ORBIT)\n\t\t\t}, {\n\t\t\t\ttitle: 'Sensor',\n\t\t\t\thandler: handler('enableControl', PANOLENS.Controls.DEVICEORIENTATION)\n\t\t\t}]\n\t\t}, {\n\t\t\ttitle: 'Mode',\n\t\t\tsubMenu: [{\n\t\t\t\ttitle: 'Normal',\n\t\t\t\thandler: handler('disableEffect')\n\t\t\t}, {\n\t\t\t\ttitle: 'Cardboard',\n\t\t\t\thandler: handler('enableEffect', PANOLENS.Modes.CARDBOARD)\n\t\t\t}, {\n\t\t\t\ttitle: 'Stereoscopic',\n\t\t\t\thandler: handler('enableEffect', PANOLENS.Modes.STEREO)\n\t\t\t}]\n\t\t}];\n\t};\n\n\tPANOLENS.Widget.prototype.addControlButton = function (name) {\n\n\t\tvar element;\n\n\t\tswitch (name) {\n\n\t\t\tcase 'fullscreen':\n\n\t\t\t\telement = this.createFullscreenButton();\n\t\t\t\tthis.fullscreenElement = element;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'setting':\n\n\t\t\t\telement = this.createSettingButton();\n\t\t\t\tthis.settingElement = element;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'video':\n\n\t\t\t\telement = this.createVideoControl();\n\t\t\t\tthis.videoElement = element;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\treturn;\n\n\t\t}\n\n\t\tif (!element) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.barElement.appendChild(element);\n\t};\n\n\tPANOLENS.Widget.prototype.createMask = function () {\n\n\t\tvar element = document.createElement('div');\n\t\telement.style.position = 'absolute';\n\t\telement.style.top = 0;\n\t\telement.style.left = 0;\n\t\telement.style.width = '100%';\n\t\telement.style.height = '100%';\n\t\telement.style.background = 'transparent';\n\t\telement.style.display = 'none';\n\n\t\telement.show = function () {\n\n\t\t\tthis.style.display = 'block';\n\t\t};\n\n\t\telement.hide = function () {\n\n\t\t\tthis.style.display = 'none';\n\t\t};\n\n\t\treturn element;\n\t};\n\n\tPANOLENS.Widget.prototype.createSettingButton = function () {\n\n\t\tvar scope = this,\n\t\t    item;\n\n\t\tfunction onTap(event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tscope.mainMenu.toggle();\n\n\t\t\tif (this.activated) {\n\n\t\t\t\tthis.deactivate();\n\t\t\t} else {\n\n\t\t\t\tthis.activate();\n\t\t\t}\n\t\t}\n\n\t\titem = this.createCustomItem({\n\n\t\t\tstyle: {\n\n\t\t\t\tbackgroundImage: 'url(\"' + PANOLENS.DataImage.Setting + '\")',\n\t\t\t\twebkitTransition: this.DEFAULT_TRANSITION,\n\t\t\t\ttransition: this.DEFAULT_TRANSITION\n\n\t\t\t},\n\n\t\t\tonTap: onTap\n\n\t\t});\n\n\t\titem.activate = function () {\n\n\t\t\tthis.style.transform = 'rotate3d(0,0,1,90deg)';\n\t\t\tthis.activated = true;\n\t\t\tscope.mask.show();\n\t\t};\n\n\t\titem.deactivate = function () {\n\n\t\t\tthis.style.transform = 'rotate3d(0,0,0,0)';\n\t\t\tthis.activated = false;\n\t\t\tscope.mask.hide();\n\n\t\t\tif (scope.mainMenu && scope.mainMenu.visible) {\n\n\t\t\t\tscope.mainMenu.hide();\n\t\t\t}\n\n\t\t\tif (scope.activeSubMenu && scope.activeSubMenu.visible) {\n\n\t\t\t\tscope.activeSubMenu.hide();\n\t\t\t}\n\n\t\t\tif (scope.mainMenu && scope.mainMenu._width) {\n\n\t\t\t\tscope.mainMenu.changeSize(scope.mainMenu._width);\n\t\t\t\tscope.mainMenu.unslideAll();\n\t\t\t}\n\t\t};\n\n\t\titem.activated = false;\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.createFullscreenButton = function () {\n\n\t\tvar scope = this,\n\t\t    item,\n\t\t    isFullscreen = false,\n\t\t    tapSkipped = true,\n\t\t    stylesheetId;\n\n\t\tstylesheetId = 'panolens-style-addon';\n\n\t\tif (!document.fullscreenEnabled && !document.webkitFullscreenEnabled && !document.mozFullScreenEnabled && !document.msFullscreenEnabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction onTap(event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\ttapSkipped = false;\n\n\t\t\tif (!isFullscreen) {\n\t\t\t\tscope.container.requestFullscreen && scope.container.requestFullscreen();\n\t\t\t\tscope.container.msRequestFullscreen && scope.container.msRequestFullscreen();\n\t\t\t\tscope.container.mozRequestFullScreen && scope.container.mozRequestFullScreen();\n\t\t\t\tscope.container.webkitRequestFullscreen && scope.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n\t\t\t\tisFullscreen = true;\n\t\t\t} else {\n\t\t\t\tdocument.exitFullscreen && document.exitFullscreen();\n\t\t\t\tdocument.msExitFullscreen && document.msExitFullscreen();\n\t\t\t\tdocument.mozCancelFullScreen && document.mozCancelFullScreen();\n\t\t\t\tdocument.webkitExitFullscreen && document.webkitExitFullscreen();\n\t\t\t\tisFullscreen = false;\n\t\t\t}\n\n\t\t\tthis.style.backgroundImage = isFullscreen ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n\t\t}\n\n\t\tfunction onFullScreenChange(e) {\n\n\t\t\tif (tapSkipped) {\n\n\t\t\t\tisFullscreen = !isFullscreen;\n\n\t\t\t\titem.style.backgroundImage = isFullscreen ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n\t\t\t}\n\n\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onWindowResize', data: false });\n\n\t\t\ttapSkipped = true;\n\t\t}\n\n\t\tdocument.addEventListener('fullscreenchange', onFullScreenChange, false);\n\t\tdocument.addEventListener('webkitfullscreenchange', onFullScreenChange, false);\n\t\tdocument.addEventListener('mozfullscreenchange', onFullScreenChange, false);\n\t\tdocument.addEventListener('MSFullscreenChange', onFullScreenChange, false);\n\n\t\titem = this.createCustomItem({\n\n\t\t\tstyle: {\n\n\t\t\t\tbackgroundImage: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n\n\t\t\t},\n\n\t\t\tonTap: onTap\n\n\t\t});\n\n\t\tif (!document.querySelector(stylesheetId)) {\n\t\t\tvar sheet = document.createElement('style');\n\t\t\tsheet.id = stylesheetId;\n\t\t\tsheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }';\n\t\t\tdocument.body.appendChild(sheet);\n\t\t}\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.createVideoControl = function () {\n\n\t\tvar item;\n\n\t\titem = document.createElement('span');\n\t\titem.style.display = 'none';\n\t\titem.show = function () {\n\n\t\t\titem.style.display = '';\n\t\t};\n\n\t\titem.hide = function () {\n\n\t\t\titem.style.display = 'none';\n\t\t\titem.controlButton.paused = true;\n\t\t\titem.controlButton.update();\n\t\t};\n\n\t\titem.controlButton = this.createVideoControlButton();\n\t\titem.seekBar = this.createVideoControlSeekbar();\n\n\t\titem.appendChild(item.controlButton);\n\t\titem.appendChild(item.seekBar);\n\n\t\titem.dispose = function () {\n\n\t\t\titem.removeChild(item.controlButton);\n\t\t\titem.removeChild(item.seekBar);\n\n\t\t\titem.controlButton.dispose();\n\t\t\titem.controlButton = null;\n\n\t\t\titem.seekBar.dispose();\n\t\t\titem.seekBar = null;\n\t\t};\n\n\t\tthis.addEventListener('video-control-show', item.show);\n\t\tthis.addEventListener('video-control-hide', item.hide);\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.createVideoControlButton = function () {\n\n\t\tvar scope = this,\n\t\t    item;\n\n\t\tfunction onTap(event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused });\n\n\t\t\tthis.paused = !this.paused;\n\n\t\t\titem.update();\n\t\t};\n\n\t\titem = this.createCustomItem({\n\n\t\t\tstyle: {\n\n\t\t\t\tfloat: 'left',\n\t\t\t\tbackgroundImage: 'url(\"' + PANOLENS.DataImage.VideoPlay + '\")'\n\n\t\t\t},\n\n\t\t\tonTap: onTap\n\n\t\t});\n\n\t\titem.paused = true;\n\n\t\titem.update = function (paused) {\n\n\t\t\tthis.paused = paused !== undefined ? paused : this.paused;\n\n\t\t\tthis.style.backgroundImage = 'url(\"' + (this.paused ? PANOLENS.DataImage.VideoPlay : PANOLENS.DataImage.VideoPause) + '\")';\n\t\t};\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.createVideoControlSeekbar = function () {\n\n\t\tvar scope = this,\n\t\t    item,\n\t\t    progressElement,\n\t\t    progressElementControl,\n\t\t    isDragging = false,\n\t\t    mouseX,\n\t\t    percentageNow,\n\t\t    percentageNext;\n\n\t\tprogressElement = document.createElement('div');\n\t\tprogressElement.style.width = '0%';\n\t\tprogressElement.style.height = '100%';\n\t\tprogressElement.style.backgroundColor = '#fff';\n\n\t\tprogressElementControl = document.createElement('div');\n\t\tprogressElementControl.style.float = 'right';\n\t\tprogressElementControl.style.width = '14px';\n\t\tprogressElementControl.style.height = '14px';\n\t\tprogressElementControl.style.transform = 'translate(7px, -5px)';\n\t\tprogressElementControl.style.borderRadius = '50%';\n\t\tprogressElementControl.style.backgroundColor = '#ddd';\n\n\t\tprogressElementControl.addEventListener('mousedown', onMouseDown, false);\n\t\tprogressElementControl.addEventListener('touchstart', onMouseDown, false);\n\n\t\tfunction onMouseDown(event) {\n\n\t\t\tevent.stopPropagation();\n\n\t\t\tisDragging = true;\n\n\t\t\tmouseX = event.clientX || event.changedTouches && event.changedTouches[0].clientX;\n\n\t\t\tpercentageNow = parseInt(progressElement.style.width) / 100;\n\n\t\t\taddControlListeners();\n\t\t}\n\n\t\tfunction onVideoControlDrag(event) {\n\n\t\t\tvar clientX;\n\n\t\t\tif (isDragging) {\n\n\t\t\t\tclientX = event.clientX || event.changedTouches && event.changedTouches[0].clientX;\n\n\t\t\t\tpercentageNext = (clientX - mouseX) / item.clientWidth;\n\n\t\t\t\tpercentageNext = percentageNow + percentageNext;\n\n\t\t\t\tpercentageNext = percentageNext > 1 ? 1 : percentageNext < 0 ? 0 : percentageNext;\n\n\t\t\t\titem.setProgress(percentageNext);\n\n\t\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext });\n\t\t\t}\n\t\t}\n\n\t\tfunction onVideoControlStop(event) {\n\n\t\t\tevent.stopPropagation();\n\n\t\t\tisDragging = false;\n\n\t\t\tremoveControlListeners();\n\t\t}\n\n\t\tfunction addControlListeners() {\n\n\t\t\tscope.container.addEventListener('mousemove', onVideoControlDrag, false);\n\t\t\tscope.container.addEventListener('mouseup', onVideoControlStop, false);\n\t\t\tscope.container.addEventListener('touchmove', onVideoControlDrag, false);\n\t\t\tscope.container.addEventListener('touchend', onVideoControlStop, false);\n\t\t}\n\n\t\tfunction removeControlListeners() {\n\n\t\t\tscope.container.removeEventListener('mousemove', onVideoControlDrag, false);\n\t\t\tscope.container.removeEventListener('mouseup', onVideoControlStop, false);\n\t\t\tscope.container.removeEventListener('touchmove', onVideoControlDrag, false);\n\t\t\tscope.container.removeEventListener('touchend', onVideoControlStop, false);\n\t\t}\n\n\t\tfunction onTap(event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar percentage;\n\n\t\t\tif (event.target === progressElementControl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tpercentage = event.changedTouches && event.changedTouches.length > 0 ? (event.changedTouches[0].pageX - event.target.getBoundingClientRect().left) / this.clientWidth : event.offsetX / this.clientWidth;\n\n\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage });\n\n\t\t\titem.setProgress(event.offsetX / this.clientWidth);\n\t\t};\n\n\t\tfunction onDispose() {\n\n\t\t\tremoveControlListeners();\n\t\t\tprogressElement = null;\n\t\t\tprogressElementControl = null;\n\t\t}\n\n\t\tprogressElement.appendChild(progressElementControl);\n\n\t\titem = this.createCustomItem({\n\n\t\t\tstyle: {\n\n\t\t\t\tfloat: 'left',\n\t\t\t\twidth: '30%',\n\t\t\t\theight: '4px',\n\t\t\t\tmarginTop: '20px',\n\t\t\t\tbackgroundColor: 'rgba(188,188,188,0.8)'\n\n\t\t\t},\n\n\t\t\tonTap: onTap,\n\t\t\tonDispose: onDispose\n\n\t\t});\n\n\t\titem.appendChild(progressElement);\n\n\t\titem.setProgress = function (percentage) {\n\n\t\t\tprogressElement.style.width = percentage * 100 + '%';\n\t\t};\n\n\t\tthis.addEventListener('video-update', function (event) {\n\n\t\t\titem.setProgress(event.percentage);\n\t\t});\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.createMenuItem = function (title) {\n\n\t\tvar scope = this,\n\t\t    item = document.createElement('a');\n\t\titem.textContent = title;\n\t\titem.style.display = 'block';\n\t\titem.style.padding = '10px';\n\t\titem.style.textDecoration = 'none';\n\t\titem.style.cursor = 'pointer';\n\t\titem.style.pointerEvents = 'auto';\n\t\titem.style.transition = this.DEFAULT_TRANSITION;\n\n\t\titem.slide = function (right) {\n\n\t\t\tthis.style.transform = 'translateX(' + (right ? '' : '-') + '100%)';\n\t\t};\n\n\t\titem.unslide = function () {\n\n\t\t\tthis.style.transform = 'translateX(0)';\n\t\t};\n\n\t\titem.setIcon = function (url) {\n\n\t\t\tif (this.icon) {\n\n\t\t\t\tthis.icon.style.backgroundImage = 'url(' + url + ')';\n\t\t\t}\n\t\t};\n\n\t\titem.setSelectionTitle = function (title) {\n\n\t\t\tif (this.selection) {\n\n\t\t\t\tthis.selection.textContent = title;\n\t\t\t}\n\t\t};\n\n\t\titem.addSelection = function (name) {\n\n\t\t\tvar selection = document.createElement('span');\n\t\t\tselection.style.fontSize = '13px';\n\t\t\tselection.style.fontWeight = '300';\n\t\t\tselection.style.float = 'right';\n\n\t\t\tthis.selection = selection;\n\t\t\tthis.setSelectionTitle(name);\n\t\t\tthis.appendChild(selection);\n\n\t\t\treturn this;\n\t\t};\n\n\t\titem.addIcon = function (url, left, flip) {\n\n\t\t\turl = url || PANOLENS.DataImage.ChevronRight;\n\t\t\tleft = left || false;\n\t\t\tflip = flip || false;\n\n\t\t\tvar element = document.createElement('span');\n\t\t\telement.style.float = left ? 'left' : 'right';\n\t\t\telement.style.width = '17px';\n\t\t\telement.style.height = '17px';\n\t\t\telement.style['margin' + (left ? 'Right' : 'Left')] = '12px';\n\t\t\telement.style.backgroundSize = 'cover';\n\n\t\t\tif (flip) {\n\n\t\t\t\telement.style.transform = 'rotateZ(180deg)';\n\t\t\t}\n\n\t\t\tthis.icon = element;\n\t\t\tthis.setIcon(url);\n\t\t\tthis.appendChild(element);\n\n\t\t\treturn this;\n\t\t};\n\n\t\titem.addSubMenu = function (title, items) {\n\n\t\t\tthis.subMenu = scope.createSubMenu(title, items);\n\n\t\t\treturn this;\n\t\t};\n\n\t\titem.addEventListener('mouseenter', function () {\n\n\t\t\tthis.style.backgroundColor = '#e0e0e0';\n\t\t}, false);\n\n\t\titem.addEventListener('mouseleave', function () {\n\n\t\t\tthis.style.backgroundColor = '#fafafa';\n\t\t}, false);\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.createMenuItemHeader = function (title) {\n\n\t\tvar header = this.createMenuItem(title);\n\n\t\theader.style.borderBottom = '1px solid #333';\n\t\theader.style.paddingBottom = '15px';\n\n\t\treturn header;\n\t};\n\n\tPANOLENS.Widget.prototype.createMainMenu = function (menus) {\n\n\t\tvar scope = this,\n\t\t    menu = this.createMenu(),\n\t\t    subMenu;\n\n\t\tmenu._width = 200;\n\t\tmenu.changeSize(menu._width);\n\n\t\tfunction onTap(event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar mainMenu = scope.mainMenu,\n\t\t\t    subMenu = this.subMenu;\n\n\t\t\tfunction onNextTick() {\n\n\t\t\t\tmainMenu.changeSize(subMenu.clientWidth);\n\t\t\t\tsubMenu.show();\n\t\t\t\tsubMenu.unslideAll();\n\t\t\t}\n\n\t\t\tmainMenu.hide();\n\t\t\tmainMenu.slideAll();\n\t\t\tmainMenu.parentElement.appendChild(subMenu);\n\n\t\t\tscope.activeMainItem = this;\n\t\t\tscope.activeSubMenu = subMenu;\n\n\t\t\twindow.requestAnimationFrame(onNextTick);\n\t\t};\n\n\t\tfor (var i = 0; i < menus.length; i++) {\n\n\t\t\tvar item = menu.addItem(menus[i].title);\n\n\t\t\titem.style.paddingLeft = '20px';\n\n\t\t\titem.addIcon().addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n\t\t\tif (menus[i].subMenu && menus[i].subMenu.length > 0) {\n\n\t\t\t\tvar title = menus[i].subMenu[0].title;\n\n\t\t\t\titem.addSelection(title).addSubMenu(menus[i].title, menus[i].subMenu);\n\t\t\t}\n\t\t}\n\n\t\treturn menu;\n\t};\n\n\tPANOLENS.Widget.prototype.createSubMenu = function (title, items) {\n\n\t\tvar scope = this,\n\t\t    menu,\n\t\t    subMenu = this.createMenu();\n\n\t\tsubMenu.items = items;\n\t\tsubMenu.activeItem;\n\n\t\tfunction onTap(event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tmenu = scope.mainMenu;\n\t\t\tmenu.changeSize(menu._width);\n\t\t\tmenu.unslideAll();\n\t\t\tmenu.show();\n\t\t\tsubMenu.slideAll(true);\n\t\t\tsubMenu.hide();\n\n\t\t\tif (this.type !== 'header') {\n\n\t\t\t\tsubMenu.setActiveItem(this);\n\t\t\t\tscope.activeMainItem.setSelectionTitle(this.textContent);\n\n\t\t\t\tthis.handler && this.handler();\n\t\t\t}\n\t\t}\n\n\t\tsubMenu.addHeader(title).addIcon(undefined, true, true).addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n\t\tfor (var i = 0; i < items.length; i++) {\n\n\t\t\tvar item = subMenu.addItem(items[i].title);\n\n\t\t\titem.style.fontWeight = 300;\n\t\t\titem.handler = items[i].handler;\n\t\t\titem.addIcon(' ', true);\n\t\t\titem.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n\t\t\tif (!subMenu.activeItem) {\n\n\t\t\t\tsubMenu.setActiveItem(item);\n\t\t\t}\n\t\t}\n\n\t\tsubMenu.slideAll(true);\n\n\t\treturn subMenu;\n\t};\n\n\tPANOLENS.Widget.prototype.createMenu = function () {\n\n\t\tvar scope = this,\n\t\t    menu = document.createElement('span'),\n\t\t    style;\n\n\t\tstyle = menu.style;\n\n\t\tstyle.padding = '5px 0';\n\t\tstyle.position = 'fixed';\n\t\tstyle.bottom = '100%';\n\t\tstyle.right = '14px';\n\t\tstyle.backgroundColor = '#fafafa';\n\t\tstyle.fontFamily = 'Helvetica Neue';\n\t\tstyle.fontSize = '14px';\n\t\tstyle.visibility = 'hidden';\n\t\tstyle.opacity = 0;\n\t\tstyle.boxShadow = '0 0 12pt rgba(0,0,0,0.25)';\n\t\tstyle.borderRadius = '2px';\n\t\tstyle.overflow = 'hidden';\n\t\tstyle.willChange = 'width, height, opacity';\n\t\tstyle.pointerEvents = 'auto';\n\t\tstyle.transition = this.DEFAULT_TRANSITION;\n\n\t\tmenu.visible = false;\n\n\t\tmenu.changeSize = function (width, height) {\n\n\t\t\tif (width) {\n\n\t\t\t\tthis.style.width = width + 'px';\n\t\t\t}\n\n\t\t\tif (height) {\n\n\t\t\t\tthis.style.height = height + 'px';\n\t\t\t}\n\t\t};\n\n\t\tmenu.show = function () {\n\n\t\t\tthis.style.opacity = 1;\n\t\t\tthis.style.visibility = 'visible';\n\t\t\tthis.visible = true;\n\t\t};\n\n\t\tmenu.hide = function () {\n\n\t\t\tthis.style.opacity = 0;\n\t\t\tthis.style.visibility = 'hidden';\n\t\t\tthis.visible = false;\n\t\t};\n\n\t\tmenu.toggle = function () {\n\n\t\t\tif (this.visible) {\n\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t};\n\n\t\tmenu.slideAll = function (right) {\n\n\t\t\tfor (var i = 0; i < menu.children.length; i++) {\n\n\t\t\t\tif (menu.children[i].slide) {\n\n\t\t\t\t\tmenu.children[i].slide(right);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tmenu.unslideAll = function () {\n\n\t\t\tfor (var i = 0; i < menu.children.length; i++) {\n\n\t\t\t\tif (menu.children[i].unslide) {\n\n\t\t\t\t\tmenu.children[i].unslide();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tmenu.addHeader = function (title) {\n\n\t\t\tvar header = scope.createMenuItemHeader(title);\n\t\t\theader.type = 'header';\n\n\t\t\tthis.appendChild(header);\n\n\t\t\treturn header;\n\t\t};\n\n\t\tmenu.addItem = function (title) {\n\n\t\t\tvar item = scope.createMenuItem(title);\n\t\t\titem.type = 'item';\n\n\t\t\tthis.appendChild(item);\n\n\t\t\treturn item;\n\t\t};\n\n\t\tmenu.setActiveItem = function (item) {\n\n\t\t\tif (this.activeItem) {\n\n\t\t\t\tthis.activeItem.setIcon(' ');\n\t\t\t}\n\n\t\t\titem.setIcon(PANOLENS.DataImage.Check);\n\n\t\t\tthis.activeItem = item;\n\t\t};\n\n\t\tmenu.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true);\n\t\tmenu.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true);\n\t\tmenu.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true);\n\n\t\treturn menu;\n\t};\n\n\tPANOLENS.Widget.prototype.createCustomItem = function (options) {\n\n\t\toptions = options || {};\n\n\t\tvar scope = this,\n\t\t    item = options.element || document.createElement('span');\n\n\t\titem.style.cursor = 'pointer';\n\t\titem.style.float = 'right';\n\t\titem.style.width = '44px';\n\t\titem.style.height = '100%';\n\t\titem.style.backgroundSize = '60%';\n\t\titem.style.backgroundRepeat = 'no-repeat';\n\t\titem.style.backgroundPosition = 'center';\n\t\titem.style.webkitUserSelect = item.style.MozUserSelect = item.style.userSelect = 'none';\n\t\titem.style.position = 'relative';\n\t\titem.style.pointerEvents = 'auto';\n\n\t\titem.addEventListener(scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function () {\n\t\t\titem.style.filter = item.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))';\n\t\t});\n\t\titem.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function () {\n\t\t\titem.style.filter = item.style.webkitFilter = '';\n\t\t});\n\n\t\titem = this.mergeStyleOptions(item, options.style);\n\n\t\tif (options.onTap) {\n\n\t\t\titem.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false);\n\t\t}\n\n\t\titem.dispose = function () {\n\n\t\t\titem.removeEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false);\n\n\t\t\toptions.onDispose && options.onDispose();\n\t\t};\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.mergeStyleOptions = function (element, options) {\n\n\t\toptions = options || {};\n\n\t\tfor (var property in options) {\n\n\t\t\tif (options.hasOwnProperty(property)) {\n\n\t\t\t\telement.style[property] = options[property];\n\t\t\t}\n\t\t}\n\n\t\treturn element;\n\t};\n\n\tPANOLENS.Widget.prototype.dispose = function () {\n\n\t\tif (this.barElement) {\n\t\t\tthis.container.removeChild(this.barElement);\n\t\t\tthis.barElement.dispose();\n\t\t\tthis.barElement = null;\n\t\t}\n\t};\n})();;(function () {\n\tPANOLENS.Infospot = function (scale, imageSrc, animated) {\n\n\t\tvar scope = this,\n\t\t    ratio,\n\t\t    startScale,\n\t\t    endScale,\n\t\t    duration;\n\n\t\tscale = scale || 300;\n\t\timageSrc = imageSrc || PANOLENS.DataImage.Info;\n\t\tduration = 500;\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].call(this);\n\n\t\tthis.type = 'infospot';\n\n\t\tthis.animated = animated !== undefined ? animated : true;\n\t\tthis.isHovering = false;\n\t\tthis.visible = false;\n\n\t\tthis.element;\n\t\tthis.toPanorama;\n\t\tthis.cursorStyle;\n\n\t\tthis.mode = PANOLENS.Modes.UNKNOWN;\n\n\t\tthis.scale.set(scale, scale, 1);\n\t\tthis.rotation.y = Math.PI;\n\t\tthis.scaleFactor = 1.3;\n\n\t\tthis.container;\n\n\t\tthis.HANDLER_FOCUS;\n\n\t\tPANOLENS.Utils.TextureLoader.load(imageSrc, postLoad);\n\n\t\tfunction postLoad(texture) {\n\n\t\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_8_three__[\"RepeatWrapping\"];\n\t\t\ttexture.repeat.x = -1;\n\n\t\t\ttexture.image.width = texture.image.naturalWidth || 64;\n\t\t\ttexture.image.height = texture.image.naturalHeight || 64;\n\n\t\t\tratio = texture.image.width / texture.image.height;\n\t\t\tscope.scale.set(ratio * scale, scale, 1);\n\n\t\t\tstartScale = scope.scale.clone();\n\n\t\t\tscope.scaleUpAnimation = new TWEEN.Tween(scope.scale).to({ x: startScale.x * scope.scaleFactor, y: startScale.y * scope.scaleFactor }, duration).easing(TWEEN.Easing.Elastic.Out);\n\n\t\t\tscope.scaleDownAnimation = new TWEEN.Tween(scope.scale).to({ x: startScale.x, y: startScale.y }, duration).easing(TWEEN.Easing.Elastic.Out);\n\n\t\t\tscope.material.side = __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"];\n\t\t\tscope.material.map = texture;\n\t\t\tscope.material.depthTest = false;\n\t\t\tscope.material.needsUpdate = true;\n\t\t}\n\n\t\tfunction show() {\n\n\t\t\tthis.visible = true;\n\t\t}\n\n\t\tfunction hide() {\n\n\t\t\tthis.visible = false;\n\t\t}\n\n\t\tthis.showAnimation = new TWEEN.Tween(this.material).to({ opacity: 1 }, duration).onStart(show.bind(this)).easing(TWEEN.Easing.Quartic.Out);\n\n\t\tthis.hideAnimation = new TWEEN.Tween(this.material).to({ opacity: 0 }, duration).onComplete(hide.bind(this)).easing(TWEEN.Easing.Quartic.Out);\n\n\t\tthis.addEventListener('click', this.onClick);\n\t\tthis.addEventListener('hover', this.onHover);\n\t\tthis.addEventListener('hoverenter', this.onHoverStart);\n\t\tthis.addEventListener('hoverleave', this.onHoverEnd);\n\t\tthis.addEventListener('panolens-dual-eye-effect', this.onDualEyeEffect);\n\t\tthis.addEventListener('panolens-container', this.setContainer.bind(this));\n\t\tthis.addEventListener('dismiss', this.onDismiss);\n\t\tthis.addEventListener('panolens-infospot-focus', this.setFocusMethod);\n\t};\n\n\tPANOLENS.Infospot.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].prototype);\n\n\tPANOLENS.Infospot.prototype.setContainer = function (data) {\n\n\t\tvar container;\n\n\t\tif (data instanceof HTMLElement) {\n\n\t\t\tcontainer = data;\n\t\t} else if (data && data.container) {\n\n\t\t\tcontainer = data.container;\n\t\t}\n\n\t\tif (container && this.element) {\n\n\t\t\tcontainer.appendChild(this.element);\n\t\t}\n\n\t\tthis.container = container;\n\t};\n\n\tPANOLENS.Infospot.prototype.getContainer = function () {\n\n\t\treturn this.container;\n\t};\n\n\tPANOLENS.Infospot.prototype.onClick = function (event) {\n\n\t\tif (this.element && this.getContainer()) {\n\n\t\t\tthis.onHoverStart(event);\n\n\t\t\tthis.lockHoverElement();\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.onDismiss = function (event) {\n\n\t\tif (this.element) {\n\n\t\t\tthis.unlockHoverElement();\n\t\t\tthis.onHoverEnd();\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.onHover = function (event) {};\n\n\tPANOLENS.Infospot.prototype.onHoverStart = function (event) {\n\n\t\tif (!this.getContainer()) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar cursorStyle = this.cursorStyle || (this.mode === PANOLENS.Modes.NORMAL ? 'pointer' : 'default');\n\n\t\tthis.isHovering = true;\n\t\tthis.container.style.cursor = cursorStyle;\n\n\t\tif (this.animated) {\n\n\t\t\tthis.scaleDownAnimation && this.scaleDownAnimation.stop();\n\t\t\tthis.scaleUpAnimation && this.scaleUpAnimation.start();\n\t\t}\n\n\t\tif (this.element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0) {\n\n\t\t\tif (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n\n\t\t\t\tthis.element.style.display = 'none';\n\t\t\t\tthis.element.left && (this.element.left.style.display = 'block');\n\t\t\t\tthis.element.right && (this.element.right.style.display = 'block');\n\n\t\t\t\tthis.element._width = this.element.left.clientWidth;\n\t\t\t\tthis.element._height = this.element.left.clientHeight;\n\t\t\t} else {\n\n\t\t\t\tthis.element.style.display = 'block';\n\t\t\t\tthis.element.left && (this.element.left.style.display = 'none');\n\t\t\t\tthis.element.right && (this.element.right.style.display = 'none');\n\n\t\t\t\tthis.element._width = this.element.clientWidth;\n\t\t\t\tthis.element._height = this.element.clientHeight;\n\t\t\t}\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.onHoverEnd = function () {\n\n\t\tif (!this.getContainer()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isHovering = false;\n\t\tthis.container.style.cursor = 'default';\n\n\t\tif (this.animated) {\n\n\t\t\tthis.scaleUpAnimation && this.scaleUpAnimation.stop();\n\t\t\tthis.scaleDownAnimation && this.scaleDownAnimation.start();\n\t\t}\n\n\t\tif (this.element && !this.element.locked) {\n\n\t\t\tthis.element.style.display = 'none';\n\t\t\tthis.element.left && (this.element.left.style.display = 'none');\n\t\t\tthis.element.right && (this.element.right.style.display = 'none');\n\n\t\t\tthis.unlockHoverElement();\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.onDualEyeEffect = function (event) {\n\n\t\tif (!this.getContainer()) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar element, halfWidth, halfHeight;\n\n\t\tthis.mode = event.mode;\n\n\t\telement = this.element;\n\n\t\thalfWidth = this.container.clientWidth / 2;\n\t\thalfHeight = this.container.clientHeight / 2;\n\n\t\tif (!element) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!element.left || !element.right) {\n\n\t\t\telement.left = element.cloneNode(true);\n\t\t\telement.right = element.cloneNode(true);\n\t\t}\n\n\t\tif (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n\n\t\t\telement.left.style.display = element.style.display;\n\t\t\telement.right.style.display = element.style.display;\n\t\t\telement.style.display = 'none';\n\t\t} else {\n\n\t\t\telement.style.display = element.left.style.display;\n\t\t\telement.left.style.display = 'none';\n\t\t\telement.right.style.display = 'none';\n\t\t}\n\n\t\tthis.translateElement(halfWidth, halfHeight);\n\n\t\tthis.container.appendChild(element.left);\n\t\tthis.container.appendChild(element.right);\n\t};\n\n\tPANOLENS.Infospot.prototype.translateElement = function (x, y) {\n\n\t\tif (!this.element._width || !this.element._height || !this.getContainer()) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar left, top, element, width, height, delta, container;\n\n\t\tcontainer = this.container;\n\t\telement = this.element;\n\t\twidth = element._width / 2;\n\t\theight = element._height / 2;\n\t\tdelta = element.verticalDelta !== undefined ? element.verticalDelta : 40;\n\n\t\tleft = x - width;\n\t\ttop = y - height - delta;\n\n\t\tif ((this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) && element.left && element.right && !(x === container.clientWidth / 2 && y === container.clientHeight / 2)) {\n\n\t\t\tleft = container.clientWidth / 4 - width + (x - container.clientWidth / 2);\n\t\t\ttop = container.clientHeight / 2 - height - delta + (y - container.clientHeight / 2);\n\n\t\t\tthis.setElementStyle('transform', element.left, 'translate(' + left + 'px, ' + top + 'px)');\n\n\t\t\tleft += container.clientWidth / 2;\n\n\t\t\tthis.setElementStyle('transform', element.right, 'translate(' + left + 'px, ' + top + 'px)');\n\t\t} else {\n\n\t\t\tthis.setElementStyle('transform', element, 'translate(' + left + 'px, ' + top + 'px)');\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.setElementStyle = function (type, element, value) {\n\n\t\tvar style = element.style;\n\n\t\tif (type === 'transform') {\n\n\t\t\tstyle.webkitTransform = style.msTransform = style.transform = value;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.setText = function (text) {\n\n\t\tif (this.element) {\n\n\t\t\tthis.element.textContent = text;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.setCursorHoverStyle = function (style) {\n\n\t\tthis.cursorStyle = style;\n\t};\n\n\tPANOLENS.Infospot.prototype.addHoverText = function (text, delta) {\n\n\t\tif (!this.element) {\n\n\t\t\tthis.element = document.createElement('div');\n\t\t\tthis.element.style.display = 'none';\n\t\t\tthis.element.style.color = '#fff';\n\t\t\tthis.element.style.top = 0;\n\t\t\tthis.element.style.maxWidth = '50%';\n\t\t\tthis.element.style.maxHeight = '50%';\n\t\t\tthis.element.style.textShadow = '0 0 3px #000000';\n\t\t\tthis.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif';\n\t\t\tthis.element.style.position = 'absolute';\n\t\t\tthis.element.classList.add('panolens-infospot');\n\t\t\tthis.element.verticalDelta = delta !== undefined ? delta : 40;\n\t\t}\n\n\t\tthis.setText(text);\n\t};\n\n\tPANOLENS.Infospot.prototype.addHoverElement = function (el, delta) {\n\n\t\tif (!this.element) {\n\n\t\t\tthis.element = el.cloneNode(true);\n\t\t\tthis.element.style.display = 'none';\n\t\t\tthis.element.style.top = 0;\n\t\t\tthis.element.style.position = 'absolute';\n\t\t\tthis.element.classList.add('panolens-infospot');\n\t\t\tthis.element.verticalDelta = delta !== undefined ? delta : 40;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.removeHoverElement = function () {\n\n\t\tif (this.element) {\n\n\t\t\tif (this.element.left) {\n\n\t\t\t\tthis.container.removeChild(this.element.left);\n\t\t\t\tthis.element.left = null;\n\t\t\t}\n\n\t\t\tif (this.element.right) {\n\n\t\t\t\tthis.container.removeChild(this.element.right);\n\t\t\t\tthis.element.right = null;\n\t\t\t}\n\n\t\t\tthis.container.removeChild(this.element);\n\t\t\tthis.element = null;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.lockHoverElement = function () {\n\n\t\tif (this.element) {\n\n\t\t\tthis.element.locked = true;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.unlockHoverElement = function () {\n\n\t\tif (this.element) {\n\n\t\t\tthis.element.locked = false;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.show = function (delay) {\n\n\t\tdelay = delay || 0;\n\n\t\tif (this.animated) {\n\n\t\t\tthis.hideAnimation && this.hideAnimation.stop();\n\t\t\tthis.showAnimation && this.showAnimation.delay(delay).start();\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.hide = function (delay) {\n\n\t\tdelay = delay || 0;\n\n\t\tif (this.animated) {\n\n\t\t\tthis.showAnimation && this.showAnimation.stop();\n\t\t\tthis.hideAnimation && this.hideAnimation.delay(delay).start();\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.setFocusMethod = function (event) {\n\n\t\tif (event) {\n\n\t\t\tthis.HANDLER_FOCUS = event.method;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.focus = function (duration, easing) {\n\n\t\tif (this.HANDLER_FOCUS) {\n\n\t\t\tthis.HANDLER_FOCUS(this.position, duration, easing);\n\t\t\tthis.onDismiss();\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.dispose = function () {\n\n\t\tthis.removeHoverElement();\n\t\tthis.material.dispose();\n\n\t\tif (this.parent) {\n\n\t\t\tthis.parent.remove(this);\n\t\t}\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Viewer = function (options) {\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].call(this);\n\n\t\tif (!__WEBPACK_IMPORTED_MODULE_8_three__) {\n\n\t\t\tconsole.error('Three.JS not found');\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar container;\n\n\t\toptions = options || {};\n\t\toptions.controlBar = options.controlBar !== undefined ? options.controlBar : true;\n\t\toptions.controlButtons = options.controlButtons || ['fullscreen', 'setting', 'video'];\n\t\toptions.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false;\n\t\toptions.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true;\n\t\toptions.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false;\n\t\toptions.clickTolerance = options.clickTolerance || 10;\n\t\toptions.cameraFov = options.cameraFov || 60;\n\t\toptions.reverseDragging = options.reverseDragging || false;\n\t\toptions.enableReticle = options.enableReticle || false;\n\t\toptions.dwellTime = options.dwellTime || 1500;\n\t\toptions.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true;\n\t\toptions.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false;\n\t\toptions.indicatorSize = options.indicatorSize || 30;\n\t\toptions.output = options.output ? options.output : 'none';\n\n\t\tthis.options = options;\n\n\t\tif (options.container) {\n\n\t\t\tcontainer = options.container;\n\t\t\tcontainer._width = container.clientWidth;\n\t\t\tcontainer._height = container.clientHeight;\n\t\t} else {\n\n\t\t\tcontainer = document.createElement('div');\n\t\t\tcontainer.classList.add('panolens-container');\n\t\t\tcontainer.style.width = '100%';\n\t\t\tcontainer.style.height = '100%';\n\t\t\tcontainer._width = window.innerWidth;\n\t\t\tcontainer._height = window.innerHeight;\n\t\t\tdocument.body.appendChild(container);\n\t\t}\n\n\t\tthis.container = container;\n\n\t\tthis.camera = options.camera || new __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"](this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 10000);\n\t\tthis.scene = options.scene || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Scene\"]();\n\t\tthis.renderer = options.renderer || new __WEBPACK_IMPORTED_MODULE_8_three__[\"WebGLRenderer\"]({ alpha: true, antialias: false });\n\n\t\tthis.viewIndicatorSize = options.indicatorSize;\n\n\t\tthis.reticle = {};\n\t\tthis.tempEnableReticle = this.options.enableReticle;\n\n\t\tthis.mode = PANOLENS.Modes.NORMAL;\n\n\t\tthis.OrbitControls;\n\t\tthis.DeviceOrientationControls;\n\n\t\tthis.CardboardEffect;\n\t\tthis.StereoEffect;\n\n\t\tthis.controls;\n\t\tthis.effect;\n\t\tthis.panorama;\n\t\tthis.widget;\n\n\t\tthis.hoverObject;\n\t\tthis.infospot;\n\t\tthis.pressEntityObject;\n\t\tthis.pressObject;\n\n\t\tthis.raycaster = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Raycaster\"]();\n\t\tthis.raycasterPoint = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\t\tthis.userMouse = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\t\tthis.updateCallbacks = [];\n\t\tthis.requestAnimationId;\n\n\t\tthis.cameraFrustum = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Frustum\"]();\n\t\tthis.cameraViewProjectionMatrix = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]();\n\n\t\tthis.outputDivElement;\n\n\t\tthis.HANDLER_MOUSE_DOWN = this.onMouseDown.bind(this);\n\t\tthis.HANDLER_MOUSE_UP = this.onMouseUp.bind(this);\n\t\tthis.HANDLER_MOUSE_MOVE = this.onMouseMove.bind(this);\n\t\tthis.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind(this);\n\t\tthis.HANDLER_KEY_DOWN = this.onKeyDown.bind(this);\n\t\tthis.HANDLER_KEY_UP = this.onKeyUp.bind(this);\n\t\tthis.HANDLER_TAP = this.onTap.bind(this, {\n\t\t\tclientX: this.container.clientWidth / 2,\n\t\t\tclientY: this.container.clientHeight / 2\n\t\t});\n\n\t\tthis.OUTPUT_INFOSPOT = false;\n\n\t\tthis.tweenLeftAnimation = new TWEEN.Tween();\n\t\tthis.tweenUpAnimation = new TWEEN.Tween();\n\n\t\tthis.renderer.setPixelRatio(window.devicePixelRatio);\n\t\tthis.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n\t\tthis.renderer.setClearColor(0x000000, 1);\n\t\tthis.renderer.sortObjects = false;\n\n\t\tthis.renderer.domElement.classList.add('panolens-canvas');\n\t\tthis.renderer.domElement.style.display = 'block';\n\t\tthis.container.style.backgroundColor = '#000';\n\t\tthis.container.appendChild(this.renderer.domElement);\n\n\t\tthis.OrbitControls = new __WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"](this.camera, this.container);\n\t\tthis.OrbitControls.name = 'orbit';\n\t\tthis.OrbitControls.minDistance = 1;\n\t\tthis.OrbitControls.noPan = true;\n\t\tthis.DeviceOrientationControls = new __WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"](this.camera, this.container);\n\t\tthis.DeviceOrientationControls.name = 'device-orientation';\n\t\tthis.DeviceOrientationControls.enabled = false;\n\t\tthis.camera.position.z = 1;\n\n\t\tif (this.options.passiveRendering) {\n\n\t\t\tconsole.warn('passiveRendering is now deprecated');\n\t\t}\n\n\t\tthis.controls = [this.OrbitControls, this.DeviceOrientationControls];\n\t\tthis.control = this.OrbitControls;\n\n\t\tthis.CardboardEffect = new __WEBPACK_IMPORTED_MODULE_8_three__[\"CardboardEffect\"](this.renderer);\n\t\tthis.CardboardEffect.setSize(this.container.clientWidth, this.container.clientHeight);\n\n\t\tthis.StereoEffect = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoEffect\"](this.renderer);\n\t\tthis.StereoEffect.setSize(this.container.clientWidth, this.container.clientHeight);\n\n\t\tthis.effect = this.CardboardEffect;\n\n\t\tthis.addReticle();\n\n\t\tif (this.options.horizontalView) {\n\t\t\tthis.OrbitControls.minPolarAngle = Math.PI / 2;\n\t\t\tthis.OrbitControls.maxPolarAngle = Math.PI / 2;\n\t\t}\n\n\t\tif (this.options.controlBar !== false) {\n\t\t\tthis.addDefaultControlBar(this.options.controlButtons);\n\t\t}\n\n\t\tif (this.options.viewIndicator) {\n\t\t\tthis.addViewIndicator();\n\t\t}\n\n\t\tif (this.options.reverseDragging) {\n\t\t\tthis.reverseDraggingDirection();\n\t\t}\n\n\t\tif (this.options.enableReticle) {\n\t\t\tthis.enableReticleControl();\n\t\t} else {\n\t\t\tthis.registerMouseAndTouchEvents();\n\t\t}\n\n\t\tif (this.options.output === 'overlay') {\n\t\t\tthis.addOutputElement();\n\t\t}\n\n\t\tthis.registerEventListeners();\n\n\t\tthis.animate.call(this);\n\t};\n\n\tPANOLENS.Viewer.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n\n\tPANOLENS.Viewer.prototype.constructor = PANOLENS.Viewer;\n\n\tPANOLENS.Viewer.prototype.add = function (object) {\n\n\t\tif (arguments.length > 1) {\n\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\n\t\t\t\tthis.add(arguments[i]);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.scene.add(object);\n\n\t\tif (object.addEventListener) {\n\n\t\t\tobject.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n\t\t}\n\n\t\tif (object instanceof PANOLENS.Panorama && object.dispatchEvent) {\n\n\t\t\tobject.dispatchEvent({ type: 'panolens-container', container: this.container });\n\t\t}\n\n\t\tif (object.type === 'panorama') {\n\n\t\t\tthis.addPanoramaEventListener(object);\n\n\t\t\tif (!this.panorama) {\n\n\t\t\t\tthis.setPanorama(object);\n\t\t\t}\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.remove = function (object) {\n\n\t\tif (object.removeEventListener) {\n\n\t\t\tobject.removeEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n\t\t}\n\n\t\tthis.scene.remove(object);\n\t};\n\n\tPANOLENS.Viewer.prototype.addDefaultControlBar = function (array) {\n\n\t\tvar scope = this;\n\n\t\tif (this.widget) {\n\n\t\t\tconsole.warn('Default control bar exists');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.widget = new PANOLENS.Widget(this.container);\n\t\tthis.widget.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n\t\tthis.widget.addControlBar();\n\t\tarray.forEach(function (buttonName) {\n\n\t\t\tscope.widget.addControlButton(buttonName);\n\t\t});\n\t};\n\n\tPANOLENS.Viewer.prototype.setPanorama = function (pano) {\n\n\t\tvar scope = this,\n\t\t    leavingPanorama = this.panorama;\n\n\t\tif (pano.type === 'panorama' && leavingPanorama !== pano) {\n\t\t\tthis.hideInfospot();\n\n\t\t\tvar afterEnterComplete = function afterEnterComplete() {\n\n\t\t\t\tleavingPanorama && leavingPanorama.onLeave();\n\t\t\t\tpano.removeEventListener('enter-fade-start', afterEnterComplete);\n\t\t\t};\n\n\t\t\tpano.addEventListener('enter-fade-start', afterEnterComplete);\n\n\t\t\t(this.panorama = pano).onEnter();\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.eventHandler = function (event) {\n\n\t\tif (event.method && this[event.method]) {\n\n\t\t\tthis[event.method](event.data);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.dispatchEventToChildren = function (event) {\n\n\t\tthis.scene.traverse(function (object) {\n\n\t\t\tif (object.dispatchEvent) {\n\n\t\t\t\tobject.dispatchEvent(event);\n\t\t\t}\n\t\t});\n\t};\n\n\tPANOLENS.Viewer.prototype.activateWidgetItem = function (controlIndex, mode) {\n\n\t\tvar mainMenu = this.widget.mainMenu;\n\t\tvar ControlMenuItem = mainMenu.children[0];\n\t\tvar ModeMenuItem = mainMenu.children[1];\n\n\t\tvar item;\n\n\t\tif (controlIndex !== undefined) {\n\n\t\t\tswitch (controlIndex) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\titem = ControlMenuItem.subMenu.children[1];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\titem = ControlMenuItem.subMenu.children[2];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\titem = ControlMenuItem.subMenu.children[1];\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tControlMenuItem.subMenu.setActiveItem(item);\n\t\t\tControlMenuItem.setSelectionTitle(item.textContent);\n\t\t}\n\n\t\tif (mode !== undefined) {\n\n\t\t\tswitch (mode) {\n\n\t\t\t\tcase PANOLENS.Modes.CARDBOARD:\n\n\t\t\t\t\titem = ModeMenuItem.subMenu.children[2];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PANOLENS.Modes.STEREO:\n\n\t\t\t\t\titem = ModeMenuItem.subMenu.children[3];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\titem = ModeMenuItem.subMenu.children[1];\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tModeMenuItem.subMenu.setActiveItem(item);\n\t\t\tModeMenuItem.setSelectionTitle(item.textContent);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.enableEffect = function (mode) {\n\n\t\tif (this.mode === mode) {\n\t\t\treturn;\n\t\t}\n\t\tif (mode === PANOLENS.Modes.NORMAL) {\n\t\t\tthis.disableEffect();return;\n\t\t} else {\n\t\t\tthis.mode = mode;\n\t\t}\n\n\t\tvar fov = this.camera.fov;\n\n\t\tswitch (mode) {\n\n\t\t\tcase PANOLENS.Modes.CARDBOARD:\n\n\t\t\t\tthis.effect = this.CardboardEffect;\n\t\t\t\tthis.enableReticleControl();\n\n\t\t\t\tbreak;\n\n\t\t\tcase PANOLENS.Modes.STEREO:\n\n\t\t\t\tthis.effect = this.StereoEffect;\n\t\t\t\tthis.enableReticleControl();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tthis.effect = null;\n\t\t\t\tthis.disableReticleControl();\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tthis.activateWidgetItem(undefined, this.mode);\n\n\t\tthis.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode });\n\n\t\tthis.camera.fov = fov + 10e-3;\n\t\tthis.effect.setSize(this.container.clientWidth, this.container.clientHeight);\n\t\tthis.render();\n\t\tthis.camera.fov = fov;\n\t};\n\n\tPANOLENS.Viewer.prototype.disableEffect = function () {\n\n\t\tif (this.mode === PANOLENS.Modes.NORMAL) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.mode = PANOLENS.Modes.NORMAL;\n\t\tthis.disableReticleControl();\n\n\t\tthis.activateWidgetItem(undefined, this.mode);\n\n\t\tthis.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode });\n\n\t\tthis.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n\t\tthis.render();\n\t};\n\n\tPANOLENS.Viewer.prototype.enableReticleControl = function () {\n\n\t\tif (this.reticle.visible) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.reticle.textureLoaded) {\n\t\t\tthis.reticle.loadTextures();\n\t\t}\n\n\t\tthis.tempEnableReticle = true;\n\n\t\tthis.unregisterMouseAndTouchEvents();\n\t\tthis.reticle.show();\n\t\tthis.registerReticleEvent();\n\t\tthis.updateReticleEvent();\n\t};\n\n\tPANOLENS.Viewer.prototype.disableReticleControl = function () {\n\n\t\tthis.tempEnableReticle = false;\n\n\t\tif (!this.options.enableReticle) {\n\n\t\t\tthis.reticle.hide();\n\t\t\tthis.unregisterReticleEvent();\n\t\t\tthis.registerMouseAndTouchEvents();\n\t\t} else {\n\n\t\t\tthis.updateReticleEvent();\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.toggleVideoPlay = function (pause) {\n\n\t\tif (this.panorama instanceof PANOLENS.VideoPanorama) {\n\t\t\tthis.panorama.dispatchEvent({ type: 'video-toggle', pause: pause });\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.setVideoCurrentTime = function (percentage) {\n\n\t\tif (this.panorama instanceof PANOLENS.VideoPanorama) {\n\t\t\tthis.panorama.dispatchEvent({ type: 'video-time', percentage: percentage });\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.onVideoUpdate = function (percentage) {\n\t\tthis.widget && this.widget.dispatchEvent({ type: 'video-update', percentage: percentage });\n\t};\n\n\tPANOLENS.Viewer.prototype.addUpdateCallback = function (fn) {\n\n\t\tif (fn) {\n\n\t\t\tthis.updateCallbacks.push(fn);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.removeUpdateCallback = function (fn) {\n\n\t\tvar index = this.updateCallbacks.indexOf(fn);\n\n\t\tif (fn && index >= 0) {\n\n\t\t\tthis.updateCallbacks.splice(index, 1);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.showVideoWidget = function () {\n\t\tthis.widget && this.widget.dispatchEvent({ type: 'video-control-show' });\n\t};\n\n\tPANOLENS.Viewer.prototype.hideVideoWidget = function () {\n\t\tthis.widget && this.widget.dispatchEvent({ type: 'video-control-hide' });\n\t};\n\n\tPANOLENS.Viewer.prototype.updateVideoPlayButton = function (paused) {\n\n\t\tif (this.widget && this.widget.videoElement && this.widget.videoElement.controlButton) {\n\n\t\t\tthis.widget.videoElement.controlButton.update(paused);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.addPanoramaEventListener = function (pano) {\n\n\t\tvar scope = this;\n\n\t\tpano.addEventListener('enter-fade-start', this.setCameraControl.bind(this));\n\n\t\tif (pano instanceof PANOLENS.VideoPanorama) {\n\n\t\t\tpano.addEventListener('enter-fade-start', this.showVideoWidget.bind(this));\n\t\t\tpano.addEventListener('leave', function () {\n\n\t\t\t\tif (!(this.panorama instanceof PANOLENS.VideoPanorama)) {\n\n\t\t\t\t\tthis.hideVideoWidget.call(this);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.setCameraControl = function () {\n\n\t\tthis.OrbitControls.target.copy(this.panorama.position);\n\t};\n\n\tPANOLENS.Viewer.prototype.getControl = function () {\n\n\t\treturn this.control;\n\t}, PANOLENS.Viewer.prototype.getScene = function () {\n\n\t\treturn this.scene;\n\t};\n\n\tPANOLENS.Viewer.prototype.getCamera = function () {\n\n\t\treturn this.camera;\n\t}, PANOLENS.Viewer.prototype.getRenderer = function () {\n\n\t\treturn this.renderer;\n\t};\n\n\tPANOLENS.Viewer.prototype.getContainer = function () {\n\n\t\treturn this.container;\n\t};\n\n\tPANOLENS.Viewer.prototype.getControlName = function () {\n\n\t\treturn this.control.name;\n\t};\n\n\tPANOLENS.Viewer.prototype.getNextControlName = function () {\n\n\t\treturn this.controls[this.getNextControlIndex()].name;\n\t};\n\n\tPANOLENS.Viewer.prototype.getNextControlIndex = function () {\n\n\t\tvar controls, control, nextIndex;\n\n\t\tcontrols = this.controls;\n\t\tcontrol = this.control;\n\t\tnextIndex = controls.indexOf(control) + 1;\n\n\t\treturn nextIndex >= controls.length ? 0 : nextIndex;\n\t};\n\n\tPANOLENS.Viewer.prototype.setCameraFov = function (fov) {\n\n\t\tthis.camera.fov = fov;\n\t\tthis.camera.updateProjectionMatrix();\n\t};\n\n\tPANOLENS.Viewer.prototype.enableControl = function (index) {\n\n\t\tindex = index >= 0 && index < this.controls.length ? index : 0;\n\n\t\tthis.control.enabled = false;\n\n\t\tthis.control = this.controls[index];\n\n\t\tthis.control.enabled = true;\n\n\t\tswitch (index) {\n\n\t\t\tcase PANOLENS.Controls.ORBIT:\n\n\t\t\t\tthis.camera.position.copy(this.panorama.position);\n\t\t\t\tthis.camera.position.z += 1;\n\n\t\t\t\tbreak;\n\n\t\t\tcase PANOLENS.Controls.DEVICEORIENTATION:\n\n\t\t\t\tthis.camera.position.copy(this.panorama.position);\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.control.update();\n\n\t\tthis.activateWidgetItem(index, undefined);\n\t};\n\n\tPANOLENS.Viewer.prototype.disableControl = function () {\n\n\t\tthis.control.enabled = false;\n\t};\n\n\tPANOLENS.Viewer.prototype.toggleNextControl = function () {\n\n\t\tthis.enableControl(this.getNextControlIndex());\n\t};\n\n\tPANOLENS.Viewer.prototype.getScreenVector = function (worldVector) {\n\n\t\tvar vector = worldVector.clone();\n\t\tvar widthHalf = this.container.clientWidth / 2;\n\t\tvar heightHalf = this.container.clientHeight / 2;\n\n\t\tvector.project(this.camera);\n\n\t\tvector.x = vector.x * widthHalf + widthHalf;\n\t\tvector.y = -(vector.y * heightHalf) + heightHalf;\n\t\tvector.z = 0;\n\n\t\treturn vector;\n\t};\n\n\tPANOLENS.Viewer.prototype.checkSpriteInViewport = function (sprite) {\n\n\t\tthis.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld);\n\t\tthis.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse);\n\t\tthis.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix);\n\n\t\treturn sprite.visible && this.cameraFrustum.intersectsSprite(sprite);\n\t};\n\n\tPANOLENS.Viewer.prototype.reverseDraggingDirection = function () {\n\n\t\tthis.OrbitControls.rotateSpeed *= -1;\n\t\tthis.OrbitControls.momentumScalingFactor *= -1;\n\t};\n\n\tPANOLENS.Viewer.prototype.addReticle = function () {\n\n\t\tthis.reticle = new PANOLENS.Reticle(0xffffff, this.options.autoReticleSelect, PANOLENS.DataImage.ReticleIdle, PANOLENS.DataImage.ReticleDwell, this.options.dwellTime, 45);\n\t\tthis.reticle.position.z = -10;\n\t\tthis.camera.add(this.reticle);\n\t\tthis.scene.add(this.camera);\n\t};\n\n\tPANOLENS.Viewer.prototype.tweenControlCenter = function (vector, duration, easing) {\n\n\t\tif (this.control !== this.OrbitControls) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (vector instanceof Array) {\n\n\t\t\tduration = vector[1];\n\t\t\teasing = vector[2];\n\t\t\tvector = vector[0];\n\t\t}\n\n\t\tduration = duration !== undefined ? duration : 1000;\n\t\teasing = easing || TWEEN.Easing.Exponential.Out;\n\n\t\tvar scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv;\n\n\t\tscope = this;\n\n\t\tchv = this.camera.getWorldDirection();\n\t\tcvv = chv.clone();\n\n\t\tvptc = this.panorama.getWorldPosition().sub(this.camera.getWorldPosition());\n\n\t\thv = vector.clone();\n\n\t\thv.x *= -1;\n\t\thv.add(vptc).normalize();\n\t\tvv = hv.clone();\n\n\t\tchv.y = 0;\n\t\thv.y = 0;\n\n\t\tha = Math.atan2(hv.z, hv.x) - Math.atan2(chv.z, chv.x);\n\t\tha = ha > Math.PI ? ha - 2 * Math.PI : ha;\n\t\tha = ha < -Math.PI ? ha + 2 * Math.PI : ha;\n\t\tva = Math.abs(cvv.angleTo(chv) + (cvv.y * vv.y <= 0 ? vv.angleTo(hv) : -vv.angleTo(hv)));\n\t\tva *= vv.y < cvv.y ? 1 : -1;\n\n\t\tov = { left: 0, up: 0 };\n\t\tnv = { left: 0, up: 0 };\n\n\t\tthis.tweenLeftAnimation.stop();\n\t\tthis.tweenUpAnimation.stop();\n\n\t\tthis.tweenLeftAnimation = new TWEEN.Tween(ov).to({ left: ha }, duration).easing(easing).onUpdate(function () {\n\t\t\tscope.control.rotateLeft(this.left - nv.left);\n\t\t\tnv.left = this.left;\n\t\t}).start();\n\n\t\tthis.tweenUpAnimation = new TWEEN.Tween(ov).to({ up: va }, duration).easing(easing).onUpdate(function () {\n\t\t\tscope.control.rotateUp(this.up - nv.up);\n\t\t\tnv.up = this.up;\n\t\t}).start();\n\t};\n\n\tPANOLENS.Viewer.prototype.tweenControlCenterByObject = function (object, duration, easing) {\n\n\t\tvar isUnderScalePlaceHolder = false;\n\n\t\tobject.traverseAncestors(function (ancestor) {\n\n\t\t\tif (ancestor.scalePlaceHolder) {\n\n\t\t\t\tisUnderScalePlaceHolder = true;\n\t\t\t}\n\t\t});\n\n\t\tif (isUnderScalePlaceHolder) {\n\n\t\t\tvar invertXVector = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](-1, 1, 1);\n\n\t\t\tthis.tweenControlCenter(object.getWorldPosition().multiply(invertXVector), duration, easing);\n\t\t} else {\n\n\t\t\tthis.tweenControlCenter(object.getWorldPosition(), duration, easing);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.onWindowResize = function (windowWidth, windowHeight) {\n\n\t\tvar width, height, expand;\n\n\t\texpand = this.container.classList.contains('panolens-container') || this.container.isFullscreen;\n\n\t\tif (windowWidth !== undefined && windowHeight !== undefined) {\n\n\t\t\twidth = windowWidth;\n\t\t\theight = windowHeight;\n\t\t\tthis.container._width = windowWidth;\n\t\t\tthis.container._height = windowHeight;\n\t\t} else {\n\n\t\t\twidth = expand ? Math.max(document.documentElement.clientWidth, window.innerWidth || 0) : this.container.clientWidth;\n\t\t\theight = expand ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : this.container.clientHeight;\n\t\t\tthis.container._width = width;\n\t\t\tthis.container._height = height;\n\t\t}\n\n\t\tthis.camera.aspect = width / height;\n\t\tthis.camera.updateProjectionMatrix();\n\n\t\tthis.renderer.setSize(width, height);\n\n\t\tif (this.options.enableReticle || this.tempEnableReticle) {\n\n\t\t\tthis.updateReticleEvent();\n\t\t}\n\n\t\tthis.dispatchEvent({ type: 'window-resize', width: width, height: height });\n\t\tthis.scene.traverse(function (object) {\n\n\t\t\tif (object.dispatchEvent) {\n\n\t\t\t\tobject.dispatchEvent({ type: 'window-resize', width: width, height: height });\n\t\t\t}\n\t\t});\n\t};\n\n\tPANOLENS.Viewer.prototype.addOutputElement = function () {\n\n\t\tvar element = document.createElement('div');\n\t\telement.style.position = 'absolute';\n\t\telement.style.right = '10px';\n\t\telement.style.top = '10px';\n\t\telement.style.color = \"#fff\";\n\t\tthis.container.appendChild(element);\n\t\tthis.outputDivElement = element;\n\t};\n\n\tPANOLENS.Viewer.prototype.outputInfospotPosition = function () {\n\n\t\tvar intersects, point, panoramaWorldPosition, outputPosition;\n\n\t\tintersects = this.raycaster.intersectObject(this.panorama, true);\n\n\t\tif (intersects.length > 0) {\n\n\t\t\tpoint = intersects[0].point;\n\t\t\tpanoramaWorldPosition = this.panorama.getWorldPosition();\n\n\t\t\toutputPosition = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](-(point.x - panoramaWorldPosition.x).toFixed(2), (point.y - panoramaWorldPosition.y).toFixed(2), (point.z - panoramaWorldPosition.z).toFixed(2));\n\n\t\t\tswitch (this.options.output) {\n\n\t\t\t\tcase 'console':\n\t\t\t\t\tconsole.info(outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'overlay':\n\t\t\t\t\tthis.outputDivElement.textContent = outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.onMouseDown = function (event) {\n\n\t\tevent.preventDefault();\n\n\t\tthis.userMouse.x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n\t\tthis.userMouse.y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\t\tthis.userMouse.type = 'mousedown';\n\t\tthis.onTap(event);\n\t};\n\n\tPANOLENS.Viewer.prototype.onMouseMove = function (event) {\n\n\t\tevent.preventDefault();\n\t\tthis.userMouse.type = 'mousemove';\n\t\tthis.onTap(event);\n\t};\n\n\tPANOLENS.Viewer.prototype.onMouseUp = function (event) {\n\n\t\tvar onTarget = false,\n\t\t    type;\n\n\t\tthis.userMouse.type = 'mouseup';\n\n\t\ttype = this.userMouse.x >= event.clientX - this.options.clickTolerance && this.userMouse.x <= event.clientX + this.options.clickTolerance && this.userMouse.y >= event.clientY - this.options.clickTolerance && this.userMouse.y <= event.clientY + this.options.clickTolerance || event.changedTouches && this.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance && this.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance && this.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance && this.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance ? 'click' : undefined;\n\n\t\tif (event && event.target && !event.target.classList.contains('panolens-canvas')) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\tif (event.changedTouches && event.changedTouches.length === 1) {\n\n\t\t\tonTarget = this.onTap({ clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY }, type);\n\t\t} else {\n\n\t\t\tonTarget = this.onTap(event, type);\n\t\t}\n\n\t\tthis.userMouse.type = 'none';\n\n\t\tif (onTarget) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (type === 'click') {\n\n\t\t\tthis.options.autoHideInfospot && this.panorama && this.panorama.toggleInfospotVisibility();\n\t\t\tthis.options.autoHideControlBar && this.toggleControlBar();\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.onTap = function (event, type) {\n\n\t\tvar intersects, intersect_entity, intersect;\n\n\t\tthis.raycasterPoint.x = (event.clientX - this.container.offsetLeft) / this.container.clientWidth * 2 - 1;\n\t\tthis.raycasterPoint.y = -((event.clientY - this.container.offsetTop) / this.container.clientHeight) * 2 + 1;\n\n\t\tthis.raycaster.setFromCamera(this.raycasterPoint, this.camera);\n\n\t\tif (!this.panorama) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.type !== 'mousedown' && PANOLENS.Utils.checkTouchSupported() || this.OUTPUT_INFOSPOT) {\n\n\t\t\tthis.outputInfospotPosition();\n\t\t}\n\n\t\tintersects = this.raycaster.intersectObjects(this.panorama.children, true);\n\n\t\tintersect_entity = this.getConvertedIntersect(intersects);\n\n\t\tintersect = intersects.length > 0 ? intersects[0].object : intersect;\n\n\t\tif (this.userMouse.type === 'mouseup') {\n\n\t\t\tif (intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent) {\n\n\t\t\t\tthis.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event });\n\t\t\t}\n\n\t\t\tthis.pressEntityObject = undefined;\n\t\t}\n\n\t\tif (this.userMouse.type === 'mouseup') {\n\n\t\t\tif (intersect && this.pressObject === intersect && this.pressObject.dispatchEvent) {\n\n\t\t\t\tthis.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event });\n\t\t\t}\n\n\t\t\tthis.pressObject = undefined;\n\t\t}\n\n\t\tif (type === 'click') {\n\n\t\t\tthis.panorama.dispatchEvent({ type: 'click', intersects: intersects, mouseEvent: event });\n\n\t\t\tif (intersect_entity && intersect_entity.dispatchEvent) {\n\n\t\t\t\tintersect_entity.dispatchEvent({ type: 'click-entity', mouseEvent: event });\n\t\t\t}\n\n\t\t\tif (intersect && intersect.dispatchEvent) {\n\n\t\t\t\tintersect.dispatchEvent({ type: 'click', mouseEvent: event });\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.panorama.dispatchEvent({ type: 'hover', intersects: intersects, mouseEvent: event });\n\n\t\t\tif (this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity || this.hoverObject && intersects.length === 0) {\n\n\t\t\t\tif (this.hoverObject.dispatchEvent) {\n\n\t\t\t\t\tthis.hoverObject.dispatchEvent({ type: 'hoverleave', mouseEvent: event });\n\n\t\t\t\t\tthis.reticle.cancelDwelling();\n\t\t\t\t}\n\n\t\t\t\tthis.hoverObject = undefined;\n\t\t\t}\n\n\t\t\tif (intersect_entity && intersects.length > 0) {\n\n\t\t\t\tif (this.hoverObject !== intersect_entity) {\n\n\t\t\t\t\tthis.hoverObject = intersect_entity;\n\n\t\t\t\t\tif (this.hoverObject.dispatchEvent) {\n\n\t\t\t\t\t\tthis.hoverObject.dispatchEvent({ type: 'hoverenter', mouseEvent: event });\n\n\t\t\t\t\t\tif (this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle) {\n\t\t\t\t\t\t\tthis.reticle.startDwelling(this.onTap.bind(this, event, 'click'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity) {\n\n\t\t\t\t\tthis.pressEntityObject = intersect_entity;\n\n\t\t\t\t\tif (this.pressEntityObject.dispatchEvent) {\n\n\t\t\t\t\t\tthis.pressEntityObject.dispatchEvent({ type: 'pressstart-entity', mouseEvent: event });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.userMouse.type === 'mousedown' && this.pressObject != intersect) {\n\n\t\t\t\t\tthis.pressObject = intersect;\n\n\t\t\t\t\tif (this.pressObject.dispatchEvent) {\n\n\t\t\t\t\t\tthis.pressObject.dispatchEvent({ type: 'pressstart', mouseEvent: event });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.userMouse.type === 'mousemove' || this.options.enableReticle) {\n\n\t\t\t\t\tif (intersect && intersect.dispatchEvent) {\n\n\t\t\t\t\t\tintersect.dispatchEvent({ type: 'hover', mouseEvent: event });\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n\n\t\t\t\t\t\tthis.pressEntityObject.dispatchEvent({ type: 'pressmove-entity', mouseEvent: event });\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.pressObject && this.pressObject.dispatchEvent) {\n\n\t\t\t\t\t\tthis.pressObject.dispatchEvent({ type: 'pressmove', mouseEvent: event });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n\n\t\t\t\tthis.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event });\n\n\t\t\t\tthis.pressEntityObject = undefined;\n\t\t\t}\n\n\t\t\tif (!intersect && this.pressObject && this.pressObject.dispatchEvent) {\n\n\t\t\t\tthis.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event });\n\n\t\t\t\tthis.pressObject = undefined;\n\t\t\t}\n\t\t}\n\n\t\tif (intersect && intersect instanceof PANOLENS.Infospot) {\n\n\t\t\tthis.infospot = intersect;\n\n\t\t\tif (type === 'click') {\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if (this.infospot) {\n\n\t\t\tthis.hideInfospot();\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.getConvertedIntersect = function (intersects) {\n\n\t\tvar intersect;\n\n\t\tfor (var i = 0; i < intersects.length; i++) {\n\n\t\t\tif (intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough) {\n\n\t\t\t\tif (intersects[i].object.entity && intersects[i].object.entity.passThrough) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if (intersects[i].object.entity && !intersects[i].object.entity.passThrough) {\n\t\t\t\t\tintersect = intersects[i].object.entity;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tintersect = intersects[i].object;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn intersect;\n\t};\n\n\tPANOLENS.Viewer.prototype.hideInfospot = function (intersects) {\n\n\t\tif (this.infospot) {\n\n\t\t\tthis.infospot.onHoverEnd();\n\n\t\t\tthis.infospot = undefined;\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.toggleControlBar = function () {\n\t\tthis.widget && this.widget.dispatchEvent({ type: 'control-bar-toggle' });\n\t};\n\n\tPANOLENS.Viewer.prototype.onKeyDown = function (event) {\n\n\t\tif (this.options.output && this.options.output !== 'none' && event.key === 'Control') {\n\n\t\t\tthis.OUTPUT_INFOSPOT = true;\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.onKeyUp = function (event) {\n\n\t\tthis.OUTPUT_INFOSPOT = false;\n\t};\n\n\tPANOLENS.Viewer.prototype.update = function () {\n\n\t\tTWEEN.update();\n\n\t\tthis.updateCallbacks.forEach(function (callback) {\n\t\t\tcallback();\n\t\t});\n\n\t\tthis.control.update();\n\n\t\tthis.scene.traverse(function (child) {\n\t\t\tif (child instanceof PANOLENS.Infospot && child.element && (this.hoverObject === child || child.element.style.display !== 'none' || child.element.left && child.element.left.style.display !== 'none' || child.element.right && child.element.right.style.display !== 'none')) {\n\t\t\t\tif (this.checkSpriteInViewport(child)) {\n\t\t\t\t\tvar vector = this.getScreenVector(child.getWorldPosition());\n\t\t\t\t\tchild.translateElement(vector.x, vector.y);\n\t\t\t\t} else {\n\t\t\t\t\tchild.onDismiss();\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this));\n\t};\n\n\tPANOLENS.Viewer.prototype.render = function () {\n\n\t\tif (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n\n\t\t\tthis.effect.render(this.scene, this.camera);\n\t\t} else {\n\n\t\t\tthis.renderer.render(this.scene, this.camera);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.animate = function () {\n\n\t\tthis.requestAnimationId = window.requestAnimationFrame(this.animate.bind(this));\n\n\t\tthis.onChange();\n\t};\n\n\tPANOLENS.Viewer.prototype.onChange = function () {\n\n\t\tthis.update();\n\t\tthis.render();\n\t};\n\n\tPANOLENS.Viewer.prototype.registerMouseAndTouchEvents = function () {\n\n\t\tthis.container.addEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false);\n\t\tthis.container.addEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false);\n\t\tthis.container.addEventListener('mouseup', this.HANDLER_MOUSE_UP, false);\n\t\tthis.container.addEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false);\n\t\tthis.container.addEventListener('touchend', this.HANDLER_MOUSE_UP, false);\n\t};\n\n\tPANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents = function () {\n\n\t\tthis.container.removeEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false);\n\t\tthis.container.removeEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false);\n\t\tthis.container.removeEventListener('mouseup', this.HANDLER_MOUSE_UP, false);\n\t\tthis.container.removeEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false);\n\t\tthis.container.removeEventListener('touchend', this.HANDLER_MOUSE_UP, false);\n\t};\n\n\tPANOLENS.Viewer.prototype.registerReticleEvent = function () {\n\n\t\tthis.addUpdateCallback(this.HANDLER_TAP);\n\t};\n\n\tPANOLENS.Viewer.prototype.unregisterReticleEvent = function () {\n\n\t\tthis.removeUpdateCallback(this.HANDLER_TAP);\n\t};\n\n\tPANOLENS.Viewer.prototype.updateReticleEvent = function () {\n\n\t\tvar centerX, centerY;\n\n\t\tcenterX = this.container.clientWidth / 2 + this.container.offsetLeft;\n\t\tcenterY = this.container.clientHeight / 2;\n\n\t\tthis.removeUpdateCallback(this.HANDLER_TAP);\n\t\tthis.HANDLER_TAP = this.onTap.bind(this, { clientX: centerX, clientY: centerY });\n\t\tthis.addUpdateCallback(this.HANDLER_TAP);\n\t};\n\n\tPANOLENS.Viewer.prototype.registerEventListeners = function () {\n\t\twindow.addEventListener('resize', this.HANDLER_WINDOW_RESIZE, true);\n\n\t\twindow.addEventListener('keydown', this.HANDLER_KEY_DOWN, true);\n\t\twindow.addEventListener('keyup', this.HANDLER_KEY_UP, true);\n\t};\n\n\tPANOLENS.Viewer.prototype.unregisterEventListeners = function () {\n\t\twindow.removeEventListener('resize', this.HANDLER_WINDOW_RESIZE, true);\n\n\t\twindow.removeEventListener('keydown', this.HANDLER_KEY_DOWN, true);\n\t\twindow.removeEventListener('keyup', this.HANDLER_KEY_UP, true);\n\t};\n\n\tPANOLENS.Viewer.prototype.dispose = function () {\n\t\tthis.unregisterEventListeners();\n\n\t\tfunction recursiveDispose(object) {\n\n\t\t\tfor (var i = object.children.length - 1; i >= 0; i--) {\n\n\t\t\t\trecursiveDispose(object.children[i]);\n\t\t\t\tobject.remove(object.children[i]);\n\t\t\t}\n\n\t\t\tif (object instanceof PANOLENS.Infospot) {\n\n\t\t\t\tobject.dispose();\n\t\t\t}\n\n\t\t\tobject.geometry && object.geometry.dispose();\n\t\t\tobject.material && object.material.dispose();\n\t\t}\n\n\t\trecursiveDispose(this.scene);\n\n\t\tif (this.widget) {\n\n\t\t\tthis.widget.dispose();\n\t\t\tthis.widget = null;\n\t\t}\n\n\t\tif (__WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"] && __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].enabled) {\n\n\t\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].clear();\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.destory = function () {\n\n\t\tthis.dispose();\n\t\tthis.render();\n\t\twindow.cancelAnimationFrame(this.requestAnimationId);\n\t};\n\n\tPANOLENS.Viewer.prototype.onPanoramaDispose = function (panorama) {\n\n\t\tif (panorama instanceof PANOLENS.VideoPanorama) {\n\n\t\t\tthis.hideVideoWidget();\n\t\t}\n\n\t\tif (panorama === this.panorama) {\n\n\t\t\tthis.panorama = null;\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.loadAsyncRequest = function (url, callback) {\n\n\t\tvar request = new XMLHttpRequest();\n\t\trequest.onloadend = function (event) {\n\t\t\tcallback && callback(event);\n\t\t};\n\t\trequest.open(\"GET\", url, true);\n\t\trequest.send(null);\n\t};\n\n\tPANOLENS.Viewer.prototype.addViewIndicator = function () {\n\n\t\tvar scope = this;\n\n\t\tfunction loadViewIndicator(asyncEvent) {\n\n\t\t\tif (asyncEvent.loaded === 0) return;\n\n\t\t\tvar viewIndicatorDiv = asyncEvent.target.responseXML.documentElement;\n\t\t\tviewIndicatorDiv.style.width = scope.viewIndicatorSize + \"px\";\n\t\t\tviewIndicatorDiv.style.height = scope.viewIndicatorSize + \"px\";\n\t\t\tviewIndicatorDiv.style.position = \"absolute\";\n\t\t\tviewIndicatorDiv.style.top = \"10px\";\n\t\t\tviewIndicatorDiv.style.left = \"10px\";\n\t\t\tviewIndicatorDiv.style.opacity = \"0.5\";\n\t\t\tviewIndicatorDiv.style.cursor = \"pointer\";\n\t\t\tviewIndicatorDiv.id = \"panolens-view-indicator-container\";\n\n\t\t\tscope.container.appendChild(viewIndicatorDiv);\n\n\t\t\tvar indicator = viewIndicatorDiv.querySelector(\"#indicator\");\n\t\t\tvar setIndicatorD = function setIndicatorD() {\n\n\t\t\t\tscope.radius = scope.viewIndicatorSize * 0.225;\n\t\t\t\tscope.currentPanoAngle = scope.camera.rotation.y - __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(90);\n\t\t\t\tscope.fovAngle = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.camera.fov);\n\t\t\t\tscope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2;\n\t\t\t\tscope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2;\n\t\t\t\tscope.leftX = scope.radius * Math.cos(scope.leftAngle);\n\t\t\t\tscope.leftY = scope.radius * Math.sin(scope.leftAngle);\n\t\t\t\tscope.rightX = scope.radius * Math.cos(scope.rightAngle);\n\t\t\t\tscope.rightY = scope.radius * Math.sin(scope.rightAngle);\n\t\t\t\tscope.indicatorD = \"M \" + scope.leftX + \" \" + scope.leftY + \" A \" + scope.radius + \" \" + scope.radius + \" 0 0 1 \" + scope.rightX + \" \" + scope.rightY;\n\n\t\t\t\tif (scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius) {\n\n\t\t\t\t\tindicator.setAttribute(\"d\", scope.indicatorD);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tscope.addUpdateCallback(setIndicatorD);\n\n\t\t\tvar indicatorOnMouseEnter = function indicatorOnMouseEnter() {\n\n\t\t\t\tthis.style.opacity = \"1\";\n\t\t\t};\n\n\t\t\tvar indicatorOnMouseLeave = function indicatorOnMouseLeave() {\n\n\t\t\t\tthis.style.opacity = \"0.5\";\n\t\t\t};\n\n\t\t\tviewIndicatorDiv.addEventListener(\"mouseenter\", indicatorOnMouseEnter);\n\t\t\tviewIndicatorDiv.addEventListener(\"mouseleave\", indicatorOnMouseLeave);\n\t\t}\n\n\t\tthis.loadAsyncRequest(PANOLENS.DataImage.ViewIndicator, loadViewIndicator);\n\t};\n\n\tPANOLENS.Viewer.prototype.appendControlItem = function (option) {\n\n\t\tvar item = this.widget.createCustomItem(option);\n\n\t\tif (option.group === 'video') {\n\n\t\t\tthis.widget.videoElement.appendChild(item);\n\t\t} else {\n\n\t\t\tthis.widget.barElement.appendChild(item);\n\t\t}\n\n\t\treturn item;\n\t};\n})();\n;(function e(t, n, r) {\n\tfunction s(o, u) {\n\t\tif (!n[o]) {\n\t\t\tif (!t[o]) {\n\t\t\t\tvar a = typeof require == \"function\" && require;if (!u && a) return require(o, !0);if (i) return i(o, !0);var f = new Error(\"Cannot find module '\" + o + \"'\");throw f.code = \"MODULE_NOT_FOUND\", f;\n\t\t\t}var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {\n\t\t\t\tvar n = t[o][1][e];return s(n ? n : e);\n\t\t\t}, l, l.exports, e, t, n, r);\n\t\t}return n[o].exports;\n\t}var i = typeof require == \"function\" && require;for (var o = 0; o < r.length; o++) {\n\t\ts(r[o]);\n\t}return s;\n})({ 1: [function (require, module, exports) {\n\t\tvar createLayout = require('layout-bmfont-text');\n\t\tvar inherits = require('inherits');\n\t\tvar createIndices = require('quad-indices');\n\t\tvar buffer = require('three-buffer-vertex-data');\n\t\tvar assign = require('object-assign');\n\n\t\tvar vertices = require('./lib/vertices');\n\t\tvar utils = require('./lib/utils');\n\n\t\tvar Base = __WEBPACK_IMPORTED_MODULE_8_three__[\"BufferGeometry\"];\n\n\t\tmodule.exports = function createTextGeometry(opt) {\n\t\t\treturn new TextGeometry(opt);\n\t\t};\n\n\t\tfunction TextGeometry(opt) {\n\t\t\tBase.call(this);\n\n\t\t\tif (typeof opt === 'string') {\n\t\t\t\topt = { text: opt };\n\t\t\t}\n\n\t\t\tthis._opt = assign({}, opt);\n\n\t\t\tif (opt) this.update(opt);\n\t\t}\n\n\t\tinherits(TextGeometry, Base);\n\n\t\tTextGeometry.prototype.update = function (opt) {\n\t\t\tif (typeof opt === 'string') {\n\t\t\t\topt = { text: opt };\n\t\t\t}\n\n\t\t\topt = assign({}, this._opt, opt);\n\n\t\t\tif (!opt.font) {\n\t\t\t\tthrow new TypeError('must specify a { font } in options');\n\t\t\t}\n\n\t\t\tthis.layout = createLayout(opt);\n\n\t\t\tvar flipY = opt.flipY !== false;\n\n\t\t\tvar font = opt.font;\n\n\t\t\tvar texWidth = font.common.scaleW;\n\t\t\tvar texHeight = font.common.scaleH;\n\n\t\t\tvar glyphs = this.layout.glyphs.filter(function (glyph) {\n\t\t\t\tvar bitmap = glyph.data;\n\t\t\t\treturn bitmap.width * bitmap.height > 0;\n\t\t\t});\n\n\t\t\tthis.visibleGlyphs = glyphs;\n\n\t\t\tvar positions = vertices.positions(glyphs);\n\t\t\tvar uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY);\n\t\t\tvar indices = createIndices({\n\t\t\t\tclockwise: true,\n\t\t\t\ttype: 'uint16',\n\t\t\t\tcount: glyphs.length\n\t\t\t});\n\n\t\t\tbuffer.index(this, indices, 1, 'uint16');\n\t\t\tbuffer.attr(this, 'position', positions, 2);\n\t\t\tbuffer.attr(this, 'uv', uvs, 2);\n\n\t\t\tif (!opt.multipage && 'page' in this.attributes) {\n\t\t\t\tthis.removeAttribute('page');\n\t\t\t} else if (opt.multipage) {\n\t\t\t\tvar pages = vertices.pages(glyphs);\n\n\t\t\t\tbuffer.attr(this, 'page', pages, 1);\n\t\t\t}\n\t\t};\n\n\t\tTextGeometry.prototype.computeBoundingSphere = function () {\n\t\t\tif (this.boundingSphere === null) {\n\t\t\t\tthis.boundingSphere = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Sphere\"]();\n\t\t\t}\n\n\t\t\tvar positions = this.attributes.position.array;\n\t\t\tvar itemSize = this.attributes.position.itemSize;\n\t\t\tif (!positions || !itemSize || positions.length < 2) {\n\t\t\t\tthis.boundingSphere.radius = 0;\n\t\t\t\tthis.boundingSphere.center.set(0, 0, 0);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tutils.computeSphere(positions, this.boundingSphere);\n\t\t\tif (isNaN(this.boundingSphere.radius)) {\n\t\t\t\tconsole.error('THREE.BufferGeometry.computeBoundingSphere(): ' + 'Computed radius is NaN. The ' + '\"position\" attribute is likely to have NaN values.');\n\t\t\t}\n\t\t};\n\n\t\tTextGeometry.prototype.computeBoundingBox = function () {\n\t\t\tif (this.boundingBox === null) {\n\t\t\t\tthis.boundingBox = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Box3\"]();\n\t\t\t}\n\n\t\t\tvar bbox = this.boundingBox;\n\t\t\tvar positions = this.attributes.position.array;\n\t\t\tvar itemSize = this.attributes.position.itemSize;\n\t\t\tif (!positions || !itemSize || positions.length < 2) {\n\t\t\t\tbbox.makeEmpty();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tutils.computeBox(positions, bbox);\n\t\t};\n\t}, { \"./lib/utils\": 2, \"./lib/vertices\": 3, \"inherits\": 4, \"layout-bmfont-text\": 5, \"object-assign\": 26, \"quad-indices\": 27, \"three-buffer-vertex-data\": 31 }], 2: [function (require, module, exports) {\n\t\tvar itemSize = 2;\n\t\tvar box = { min: [0, 0], max: [0, 0] };\n\n\t\tfunction bounds(positions) {\n\t\t\tvar count = positions.length / itemSize;\n\t\t\tbox.min[0] = positions[0];\n\t\t\tbox.min[1] = positions[1];\n\t\t\tbox.max[0] = positions[0];\n\t\t\tbox.max[1] = positions[1];\n\n\t\t\tfor (var i = 0; i < count; i++) {\n\t\t\t\tvar x = positions[i * itemSize + 0];\n\t\t\t\tvar y = positions[i * itemSize + 1];\n\t\t\t\tbox.min[0] = Math.min(x, box.min[0]);\n\t\t\t\tbox.min[1] = Math.min(y, box.min[1]);\n\t\t\t\tbox.max[0] = Math.max(x, box.max[0]);\n\t\t\t\tbox.max[1] = Math.max(y, box.max[1]);\n\t\t\t}\n\t\t}\n\n\t\tmodule.exports.computeBox = function (positions, output) {\n\t\t\tbounds(positions);\n\t\t\toutput.min.set(box.min[0], box.min[1], 0);\n\t\t\toutput.max.set(box.max[0], box.max[1], 0);\n\t\t};\n\n\t\tmodule.exports.computeSphere = function (positions, output) {\n\t\t\tbounds(positions);\n\t\t\tvar minX = box.min[0];\n\t\t\tvar minY = box.min[1];\n\t\t\tvar maxX = box.max[0];\n\t\t\tvar maxY = box.max[1];\n\t\t\tvar width = maxX - minX;\n\t\t\tvar height = maxY - minY;\n\t\t\tvar length = Math.sqrt(width * width + height * height);\n\t\t\toutput.center.set(minX + width / 2, minY + height / 2, 0);\n\t\t\toutput.radius = length / 2;\n\t\t};\n\t}, {}], 3: [function (require, module, exports) {\n\t\tmodule.exports.pages = function pages(glyphs) {\n\t\t\tvar pages = new Float32Array(glyphs.length * 4 * 1);\n\t\t\tvar i = 0;\n\t\t\tglyphs.forEach(function (glyph) {\n\t\t\t\tvar id = glyph.data.page || 0;\n\t\t\t\tpages[i++] = id;\n\t\t\t\tpages[i++] = id;\n\t\t\t\tpages[i++] = id;\n\t\t\t\tpages[i++] = id;\n\t\t\t});\n\t\t\treturn pages;\n\t\t};\n\n\t\tmodule.exports.uvs = function uvs(glyphs, texWidth, texHeight, flipY) {\n\t\t\tvar uvs = new Float32Array(glyphs.length * 4 * 2);\n\t\t\tvar i = 0;\n\t\t\tglyphs.forEach(function (glyph) {\n\t\t\t\tvar bitmap = glyph.data;\n\t\t\t\tvar bw = bitmap.x + bitmap.width;\n\t\t\t\tvar bh = bitmap.y + bitmap.height;\n\n\t\t\t\tvar u0 = bitmap.x / texWidth;\n\t\t\t\tvar v1 = bitmap.y / texHeight;\n\t\t\t\tvar u1 = bw / texWidth;\n\t\t\t\tvar v0 = bh / texHeight;\n\n\t\t\t\tif (flipY) {\n\t\t\t\t\tv1 = (texHeight - bitmap.y) / texHeight;\n\t\t\t\t\tv0 = (texHeight - bh) / texHeight;\n\t\t\t\t}\n\n\t\t\t\tuvs[i++] = u0;\n\t\t\t\tuvs[i++] = v1;\n\n\t\t\t\tuvs[i++] = u0;\n\t\t\t\tuvs[i++] = v0;\n\n\t\t\t\tuvs[i++] = u1;\n\t\t\t\tuvs[i++] = v0;\n\n\t\t\t\tuvs[i++] = u1;\n\t\t\t\tuvs[i++] = v1;\n\t\t\t});\n\t\t\treturn uvs;\n\t\t};\n\n\t\tmodule.exports.positions = function positions(glyphs) {\n\t\t\tvar positions = new Float32Array(glyphs.length * 4 * 2);\n\t\t\tvar i = 0;\n\t\t\tglyphs.forEach(function (glyph) {\n\t\t\t\tvar bitmap = glyph.data;\n\n\t\t\t\tvar x = glyph.position[0] + bitmap.xoffset;\n\t\t\t\tvar y = glyph.position[1] + bitmap.yoffset;\n\n\t\t\t\tvar w = bitmap.width;\n\t\t\t\tvar h = bitmap.height;\n\n\t\t\t\tpositions[i++] = x;\n\t\t\t\tpositions[i++] = y;\n\n\t\t\t\tpositions[i++] = x;\n\t\t\t\tpositions[i++] = y + h;\n\n\t\t\t\tpositions[i++] = x + w;\n\t\t\t\tpositions[i++] = y + h;\n\n\t\t\t\tpositions[i++] = x + w;\n\t\t\t\tpositions[i++] = y;\n\t\t\t});\n\t\t\treturn positions;\n\t\t};\n\t}, {}], 4: [function (require, module, exports) {\n\t\tif (typeof __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default.a === 'function') {\n\t\t\tmodule.exports = function inherits(ctor, superCtor) {\n\t\t\t\tctor.super_ = superCtor;\n\t\t\t\tctor.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(superCtor.prototype, {\n\t\t\t\t\tconstructor: {\n\t\t\t\t\t\tvalue: ctor,\n\t\t\t\t\t\tenumerable: false,\n\t\t\t\t\t\twritable: true,\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t} else {\n\t\t\tmodule.exports = function inherits(ctor, superCtor) {\n\t\t\t\tctor.super_ = superCtor;\n\t\t\t\tvar TempCtor = function TempCtor() {};\n\t\t\t\tTempCtor.prototype = superCtor.prototype;\n\t\t\t\tctor.prototype = new TempCtor();\n\t\t\t\tctor.prototype.constructor = ctor;\n\t\t\t};\n\t\t}\n\t}, {}], 5: [function (require, module, exports) {\n\t\tvar wordWrap = require('word-wrapper');\n\t\tvar xtend = require('xtend');\n\t\tvar findChar = require('indexof-property')('id');\n\t\tvar number = require('as-number');\n\n\t\tvar X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z'];\n\t\tvar M_WIDTHS = ['m', 'w'];\n\t\tvar CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\n\n\t\tvar TAB_ID = '\\t'.charCodeAt(0);\n\t\tvar SPACE_ID = ' '.charCodeAt(0);\n\t\tvar ALIGN_LEFT = 0,\n\t\t    ALIGN_CENTER = 1,\n\t\t    ALIGN_RIGHT = 2;\n\n\t\tmodule.exports = function createLayout(opt) {\n\t\t\treturn new TextLayout(opt);\n\t\t};\n\n\t\tfunction TextLayout(opt) {\n\t\t\tthis.glyphs = [];\n\t\t\tthis._measure = this.computeMetrics.bind(this);\n\t\t\tthis.update(opt);\n\t\t}\n\n\t\tTextLayout.prototype.update = function (opt) {\n\t\t\topt = xtend({\n\t\t\t\tmeasure: this._measure\n\t\t\t}, opt);\n\t\t\tthis._opt = opt;\n\t\t\tthis._opt.tabSize = number(this._opt.tabSize, 4);\n\n\t\t\tif (!opt.font) throw new Error('must provide a valid bitmap font');\n\n\t\t\tvar glyphs = this.glyphs;\n\t\t\tvar text = opt.text || '';\n\t\t\tvar font = opt.font;\n\t\t\tthis._setupSpaceGlyphs(font);\n\n\t\t\tvar lines = wordWrap.lines(text, opt);\n\t\t\tvar minWidth = opt.width || 0;\n\n\t\t\tglyphs.length = 0;\n\n\t\t\tvar maxLineWidth = lines.reduce(function (prev, line) {\n\t\t\t\treturn Math.max(prev, line.width, minWidth);\n\t\t\t}, 0);\n\n\t\t\tvar x = 0;\n\t\t\tvar y = 0;\n\t\t\tvar lineHeight = number(opt.lineHeight, font.common.lineHeight);\n\t\t\tvar baseline = font.common.base;\n\t\t\tvar descender = lineHeight - baseline;\n\t\t\tvar letterSpacing = opt.letterSpacing || 0;\n\t\t\tvar height = lineHeight * lines.length - descender;\n\t\t\tvar align = getAlignType(this._opt.align);\n\n\t\t\ty -= height;\n\n\t\t\tthis._width = maxLineWidth;\n\t\t\tthis._height = height;\n\t\t\tthis._descender = lineHeight - baseline;\n\t\t\tthis._baseline = baseline;\n\t\t\tthis._xHeight = getXHeight(font);\n\t\t\tthis._capHeight = getCapHeight(font);\n\t\t\tthis._lineHeight = lineHeight;\n\t\t\tthis._ascender = lineHeight - descender - this._xHeight;\n\n\t\t\tvar self = this;\n\t\t\tlines.forEach(function (line, lineIndex) {\n\t\t\t\tvar start = line.start;\n\t\t\t\tvar end = line.end;\n\t\t\t\tvar lineWidth = line.width;\n\t\t\t\tvar lastGlyph;\n\n\t\t\t\tfor (var i = start; i < end; i++) {\n\t\t\t\t\tvar id = text.charCodeAt(i);\n\t\t\t\t\tvar glyph = self.getGlyph(font, id);\n\t\t\t\t\tif (glyph) {\n\t\t\t\t\t\tif (lastGlyph) x += getKerning(font, lastGlyph.id, glyph.id);\n\n\t\t\t\t\t\tvar tx = x;\n\t\t\t\t\t\tif (align === ALIGN_CENTER) tx += (maxLineWidth - lineWidth) / 2;else if (align === ALIGN_RIGHT) tx += maxLineWidth - lineWidth;\n\n\t\t\t\t\t\tglyphs.push({\n\t\t\t\t\t\t\tposition: [tx, y],\n\t\t\t\t\t\t\tdata: glyph,\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tline: lineIndex\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tx += glyph.xadvance + letterSpacing;\n\t\t\t\t\t\tlastGlyph = glyph;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ty += lineHeight;\n\t\t\t\tx = 0;\n\t\t\t});\n\t\t\tthis._linesTotal = lines.length;\n\t\t};\n\n\t\tTextLayout.prototype._setupSpaceGlyphs = function (font) {\n\t\t\tthis._fallbackSpaceGlyph = null;\n\t\t\tthis._fallbackTabGlyph = null;\n\n\t\t\tif (!font.chars || font.chars.length === 0) return;\n\n\t\t\tvar space = getGlyphById(font, SPACE_ID) || getMGlyph(font) || font.chars[0];\n\n\t\t\tvar tabWidth = this._opt.tabSize * space.xadvance;\n\t\t\tthis._fallbackSpaceGlyph = space;\n\t\t\tthis._fallbackTabGlyph = xtend(space, {\n\t\t\t\tx: 0, y: 0, xadvance: tabWidth, id: TAB_ID,\n\t\t\t\txoffset: 0, yoffset: 0, width: 0, height: 0\n\t\t\t});\n\t\t};\n\n\t\tTextLayout.prototype.getGlyph = function (font, id) {\n\t\t\tvar glyph = getGlyphById(font, id);\n\t\t\tif (glyph) return glyph;else if (id === TAB_ID) return this._fallbackTabGlyph;else if (id === SPACE_ID) return this._fallbackSpaceGlyph;\n\t\t\treturn null;\n\t\t};\n\n\t\tTextLayout.prototype.computeMetrics = function (text, start, end, width) {\n\t\t\tvar letterSpacing = this._opt.letterSpacing || 0;\n\t\t\tvar font = this._opt.font;\n\t\t\tvar curPen = 0;\n\t\t\tvar curWidth = 0;\n\t\t\tvar count = 0;\n\t\t\tvar glyph;\n\t\t\tvar lastGlyph;\n\n\t\t\tif (!font.chars || font.chars.length === 0) {\n\t\t\t\treturn {\n\t\t\t\t\tstart: start,\n\t\t\t\t\tend: start,\n\t\t\t\t\twidth: 0\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tend = Math.min(text.length, end);\n\t\t\tfor (var i = start; i < end; i++) {\n\t\t\t\tvar id = text.charCodeAt(i);\n\t\t\t\tvar glyph = this.getGlyph(font, id);\n\n\t\t\t\tif (glyph) {\n\t\t\t\t\tvar xoff = glyph.xoffset;\n\t\t\t\t\tvar kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0;\n\t\t\t\t\tcurPen += kern;\n\n\t\t\t\t\tvar nextPen = curPen + glyph.xadvance + letterSpacing;\n\t\t\t\t\tvar nextWidth = curPen + glyph.width;\n\n\t\t\t\t\tif (nextWidth >= width || nextPen >= width) break;\n\n\t\t\t\t\tcurPen = nextPen;\n\t\t\t\t\tcurWidth = nextWidth;\n\t\t\t\t\tlastGlyph = glyph;\n\t\t\t\t}\n\t\t\t\tcount++;\n\t\t\t}\n\n\t\t\tif (lastGlyph) curWidth += lastGlyph.xoffset;\n\n\t\t\treturn {\n\t\t\t\tstart: start,\n\t\t\t\tend: start + count,\n\t\t\t\twidth: curWidth\n\t\t\t};\n\t\t};['width', 'height', 'descender', 'ascender', 'xHeight', 'baseline', 'capHeight', 'lineHeight'].forEach(addGetter);\n\n\t\tfunction addGetter(name) {\n\t\t\t__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default()(TextLayout.prototype, name, {\n\t\t\t\tget: wrapper(name),\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\n\t\tfunction wrapper(name) {\n\t\t\treturn new Function(['return function ' + name + '() {', '  return this._' + name, '}'].join('\\n'))();\n\t\t}\n\n\t\tfunction getGlyphById(font, id) {\n\t\t\tif (!font.chars || font.chars.length === 0) return null;\n\n\t\t\tvar glyphIdx = findChar(font.chars, id);\n\t\t\tif (glyphIdx >= 0) return font.chars[glyphIdx];\n\t\t\treturn null;\n\t\t}\n\n\t\tfunction getXHeight(font) {\n\t\t\tfor (var i = 0; i < X_HEIGHTS.length; i++) {\n\t\t\t\tvar id = X_HEIGHTS[i].charCodeAt(0);\n\t\t\t\tvar idx = findChar(font.chars, id);\n\t\t\t\tif (idx >= 0) return font.chars[idx].height;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\n\t\tfunction getMGlyph(font) {\n\t\t\tfor (var i = 0; i < M_WIDTHS.length; i++) {\n\t\t\t\tvar id = M_WIDTHS[i].charCodeAt(0);\n\t\t\t\tvar idx = findChar(font.chars, id);\n\t\t\t\tif (idx >= 0) return font.chars[idx];\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\n\t\tfunction getCapHeight(font) {\n\t\t\tfor (var i = 0; i < CAP_HEIGHTS.length; i++) {\n\t\t\t\tvar id = CAP_HEIGHTS[i].charCodeAt(0);\n\t\t\t\tvar idx = findChar(font.chars, id);\n\t\t\t\tif (idx >= 0) return font.chars[idx].height;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\n\t\tfunction getKerning(font, left, right) {\n\t\t\tif (!font.kernings || font.kernings.length === 0) return 0;\n\n\t\t\tvar table = font.kernings;\n\t\t\tfor (var i = 0; i < table.length; i++) {\n\t\t\t\tvar kern = table[i];\n\t\t\t\tif (kern.first === left && kern.second === right) return kern.amount;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\n\t\tfunction getAlignType(align) {\n\t\t\tif (align === 'center') return ALIGN_CENTER;else if (align === 'right') return ALIGN_RIGHT;\n\t\t\treturn ALIGN_LEFT;\n\t\t}\n\t}, { \"as-number\": 6, \"indexof-property\": 7, \"word-wrapper\": 8, \"xtend\": 9 }], 6: [function (require, module, exports) {\n\t\tmodule.exports = function numtype(num, def) {\n\t\t\treturn typeof num === 'number' ? num : typeof def === 'number' ? def : 0;\n\t\t};\n\t}, {}], 7: [function (require, module, exports) {\n\t\tmodule.exports = function compile(property) {\n\t\t\tif (!property || typeof property !== 'string') throw new Error('must specify property for indexof search');\n\n\t\t\treturn new Function('array', 'value', 'start', ['start = start || 0', 'for (var i=start; i<array.length; i++)', '  if (array[i][\"' + property + '\"] === value)', '      return i', 'return -1'].join('\\n'));\n\t\t};\n\t}, {}], 8: [function (require, module, exports) {\n\t\tvar newline = /\\n/;\n\t\tvar newlineChar = '\\n';\n\t\tvar whitespace = /\\s/;\n\n\t\tmodule.exports = function (text, opt) {\n\t\t\tvar lines = module.exports.lines(text, opt);\n\t\t\treturn lines.map(function (line) {\n\t\t\t\treturn text.substring(line.start, line.end);\n\t\t\t}).join('\\n');\n\t\t};\n\n\t\tmodule.exports.lines = function wordwrap(text, opt) {\n\t\t\topt = opt || {};\n\n\t\t\tif (opt.width === 0 && opt.mode !== 'nowrap') return [];\n\n\t\t\ttext = text || '';\n\t\t\tvar width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE;\n\t\t\tvar start = Math.max(0, opt.start || 0);\n\t\t\tvar end = typeof opt.end === 'number' ? opt.end : text.length;\n\t\t\tvar mode = opt.mode;\n\n\t\t\tvar measure = opt.measure || monospace;\n\t\t\tif (mode === 'pre') return pre(measure, text, start, end, width);else return greedy(measure, text, start, end, width, mode);\n\t\t};\n\n\t\tfunction idxOf(text, chr, start, end) {\n\t\t\tvar idx = text.indexOf(chr, start);\n\t\t\tif (idx === -1 || idx > end) return end;\n\t\t\treturn idx;\n\t\t}\n\n\t\tfunction isWhitespace(chr) {\n\t\t\treturn whitespace.test(chr);\n\t\t}\n\n\t\tfunction pre(measure, text, start, end, width) {\n\t\t\tvar lines = [];\n\t\t\tvar lineStart = start;\n\t\t\tfor (var i = start; i < end && i < text.length; i++) {\n\t\t\t\tvar chr = text.charAt(i);\n\t\t\t\tvar isNewline = newline.test(chr);\n\n\t\t\t\tif (isNewline || i === end - 1) {\n\t\t\t\t\tvar lineEnd = isNewline ? i : i + 1;\n\t\t\t\t\tvar measured = measure(text, lineStart, lineEnd, width);\n\t\t\t\t\tlines.push(measured);\n\n\t\t\t\t\tlineStart = i + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn lines;\n\t\t}\n\n\t\tfunction greedy(measure, text, start, end, width, mode) {\n\t\t\tvar lines = [];\n\n\t\t\tvar testWidth = width;\n\n\t\t\tif (mode === 'nowrap') testWidth = Number.MAX_VALUE;\n\n\t\t\twhile (start < end && start < text.length) {\n\t\t\t\tvar newLine = idxOf(text, newlineChar, start, end);\n\n\t\t\t\twhile (start < newLine) {\n\t\t\t\t\tif (!isWhitespace(text.charAt(start))) break;\n\t\t\t\t\tstart++;\n\t\t\t\t}\n\n\t\t\t\tvar measured = measure(text, start, newLine, testWidth);\n\n\t\t\t\tvar lineEnd = start + (measured.end - measured.start);\n\t\t\t\tvar nextStart = lineEnd + newlineChar.length;\n\n\t\t\t\tif (lineEnd < newLine) {\n\t\t\t\t\twhile (lineEnd > start) {\n\t\t\t\t\t\tif (isWhitespace(text.charAt(lineEnd))) break;\n\t\t\t\t\t\tlineEnd--;\n\t\t\t\t\t}\n\t\t\t\t\tif (lineEnd === start) {\n\t\t\t\t\t\tif (nextStart > start + newlineChar.length) nextStart--;\n\t\t\t\t\t\tlineEnd = nextStart;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnextStart = lineEnd;\n\n\t\t\t\t\t\twhile (lineEnd > start) {\n\t\t\t\t\t\t\tif (!isWhitespace(text.charAt(lineEnd - newlineChar.length))) break;\n\t\t\t\t\t\t\tlineEnd--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (lineEnd >= start) {\n\t\t\t\t\tvar result = measure(text, start, lineEnd, testWidth);\n\t\t\t\t\tlines.push(result);\n\t\t\t\t}\n\t\t\t\tstart = nextStart;\n\t\t\t}\n\t\t\treturn lines;\n\t\t}\n\n\t\tfunction monospace(text, start, end, width) {\n\t\t\tvar glyphs = Math.min(width, end - start);\n\t\t\treturn {\n\t\t\t\tstart: start,\n\t\t\t\tend: start + glyphs\n\t\t\t};\n\t\t}\n\t}, {}], 9: [function (require, module, exports) {\n\t\tmodule.exports = extend;\n\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n\t\tfunction extend() {\n\t\t\tvar target = {};\n\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\t\tvar source = arguments[i];\n\n\t\t\t\tfor (var key in source) {\n\t\t\t\t\tif (hasOwnProperty.call(source, key)) {\n\t\t\t\t\t\ttarget[key] = source[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn target;\n\t\t}\n\t}, {}], 10: [function (require, module, exports) {\n\t\t(function (Buffer) {\n\t\t\tvar xhr = require('xhr');\n\t\t\tvar noop = function noop() {};\n\t\t\tvar parseASCII = require('parse-bmfont-ascii');\n\t\t\tvar parseXML = require('parse-bmfont-xml');\n\t\t\tvar readBinary = require('parse-bmfont-binary');\n\t\t\tvar isBinaryFormat = require('./lib/is-binary');\n\t\t\tvar xtend = require('xtend');\n\n\t\t\tvar xml2 = function hasXML2() {\n\t\t\t\treturn window.XMLHttpRequest && \"withCredentials\" in new XMLHttpRequest();\n\t\t\t}();\n\n\t\t\tmodule.exports = function (opt, cb) {\n\t\t\t\tcb = typeof cb === 'function' ? cb : noop;\n\n\t\t\t\tif (typeof opt === 'string') opt = { uri: opt };else if (!opt) opt = {};\n\n\t\t\t\tvar expectBinary = opt.binary;\n\t\t\t\tif (expectBinary) opt = getBinaryOpts(opt);\n\n\t\t\t\txhr(opt, function (err, res, body) {\n\t\t\t\t\tif (err) return cb(err);\n\t\t\t\t\tif (!/^2/.test(res.statusCode)) return cb(new Error('http status code: ' + res.statusCode));\n\t\t\t\t\tif (!body) return cb(new Error('no body result'));\n\n\t\t\t\t\tvar binary = false;\n\n\t\t\t\t\tif (isArrayBuffer(body)) {\n\t\t\t\t\t\tvar array = new Uint8Array(body);\n\t\t\t\t\t\tbody = new Buffer(array, 'binary');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isBinaryFormat(body)) {\n\t\t\t\t\t\tbinary = true;\n\n\t\t\t\t\t\tif (typeof body === 'string') body = new Buffer(body, 'binary');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!binary) {\n\t\t\t\t\t\tif (Buffer.isBuffer(body)) body = body.toString(opt.encoding);\n\t\t\t\t\t\tbody = body.trim();\n\t\t\t\t\t}\n\n\t\t\t\t\tvar result;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar type = res.headers['content-type'];\n\t\t\t\t\t\tif (binary) result = readBinary(body);else if (/json/.test(type) || body.charAt(0) === '{') result = JSON.parse(body);else if (/xml/.test(type) || body.charAt(0) === '<') result = parseXML(body);else result = parseASCII(body);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tcb(new Error('error parsing font ' + e.message));\n\t\t\t\t\t\tcb = noop;\n\t\t\t\t\t}\n\t\t\t\t\tcb(null, result);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tfunction isArrayBuffer(arr) {\n\t\t\t\tvar str = Object.prototype.toString;\n\t\t\t\treturn str.call(arr) === '[object ArrayBuffer]';\n\t\t\t}\n\n\t\t\tfunction getBinaryOpts(opt) {\n\t\t\t\tif (xml2) return xtend(opt, { responseType: 'arraybuffer' });\n\n\t\t\t\tif (typeof window.XMLHttpRequest === 'undefined') throw new Error('your browser does not support XHR loading');\n\n\t\t\t\tvar req = new window.XMLHttpRequest();\n\t\t\t\treq.overrideMimeType('text/plain; charset=x-user-defined');\n\t\t\t\treturn xtend({\n\t\t\t\t\txhr: req\n\t\t\t\t}, opt);\n\t\t\t}\n\t\t}).call(this, require(\"buffer\").Buffer);\n\t}, { \"./lib/is-binary\": 11, \"buffer\": 37, \"parse-bmfont-ascii\": 13, \"parse-bmfont-binary\": 14, \"parse-bmfont-xml\": 15, \"xhr\": 18, \"xtend\": 25 }], 11: [function (require, module, exports) {\n\t\t(function (Buffer) {\n\t\t\tvar equal = require('buffer-equal');\n\t\t\tvar HEADER = new Buffer([66, 77, 70, 3]);\n\n\t\t\tmodule.exports = function (buf) {\n\t\t\t\tif (typeof buf === 'string') return buf.substring(0, 3) === 'BMF';\n\t\t\t\treturn buf.length > 4 && equal(buf.slice(0, 4), HEADER);\n\t\t\t};\n\t\t}).call(this, require(\"buffer\").Buffer);\n\t}, { \"buffer\": 37, \"buffer-equal\": 12 }], 12: [function (require, module, exports) {\n\t\tvar Buffer = require('buffer').Buffer;\n\n\t\tmodule.exports = function (a, b) {\n\t\t\tif (!Buffer.isBuffer(a)) return undefined;\n\t\t\tif (!Buffer.isBuffer(b)) return undefined;\n\t\t\tif (typeof a.equals === 'function') return a.equals(b);\n\t\t\tif (a.length !== b.length) return false;\n\n\t\t\tfor (var i = 0; i < a.length; i++) {\n\t\t\t\tif (a[i] !== b[i]) return false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\t}, { \"buffer\": 37 }], 13: [function (require, module, exports) {\n\t\tmodule.exports = function parseBMFontAscii(data) {\n\t\t\tif (!data) throw new Error('no data provided');\n\t\t\tdata = data.toString().trim();\n\n\t\t\tvar output = {\n\t\t\t\tpages: [],\n\t\t\t\tchars: [],\n\t\t\t\tkernings: []\n\t\t\t};\n\n\t\t\tvar lines = data.split(/\\r\\n?|\\n/g);\n\n\t\t\tif (lines.length === 0) throw new Error('no data in BMFont file');\n\n\t\t\tfor (var i = 0; i < lines.length; i++) {\n\t\t\t\tvar lineData = splitLine(lines[i], i);\n\t\t\t\tif (!lineData) continue;\n\n\t\t\t\tif (lineData.key === 'page') {\n\t\t\t\t\tif (typeof lineData.data.id !== 'number') throw new Error('malformed file at line ' + i + ' -- needs page id=N');\n\t\t\t\t\tif (typeof lineData.data.file !== 'string') throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"');\n\t\t\t\t\toutput.pages[lineData.data.id] = lineData.data.file;\n\t\t\t\t} else if (lineData.key === 'chars' || lineData.key === 'kernings') {} else if (lineData.key === 'char') {\n\t\t\t\t\toutput.chars.push(lineData.data);\n\t\t\t\t} else if (lineData.key === 'kerning') {\n\t\t\t\t\toutput.kernings.push(lineData.data);\n\t\t\t\t} else {\n\t\t\t\t\toutput[lineData.key] = lineData.data;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn output;\n\t\t};\n\n\t\tfunction splitLine(line, idx) {\n\t\t\tline = line.replace(/\\t+/g, ' ').trim();\n\t\t\tif (!line) return null;\n\n\t\t\tvar space = line.indexOf(' ');\n\t\t\tif (space === -1) throw new Error(\"no named row at line \" + idx);\n\n\t\t\tvar key = line.substring(0, space);\n\n\t\t\tline = line.substring(space + 1);\n\n\t\t\tline = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '');\n\t\t\tline = line.split(\"=\");\n\t\t\tline = line.map(function (str) {\n\t\t\t\treturn str.trim().match(/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g);\n\t\t\t});\n\n\t\t\tvar data = [];\n\t\t\tfor (var i = 0; i < line.length; i++) {\n\t\t\t\tvar dt = line[i];\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tkey: dt[0],\n\t\t\t\t\t\tdata: \"\"\n\t\t\t\t\t});\n\t\t\t\t} else if (i === line.length - 1) {\n\t\t\t\t\tdata[data.length - 1].data = parseData(dt[0]);\n\t\t\t\t} else {\n\t\t\t\t\tdata[data.length - 1].data = parseData(dt[0]);\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tkey: dt[1],\n\t\t\t\t\t\tdata: \"\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar out = {\n\t\t\t\tkey: key,\n\t\t\t\tdata: {}\n\t\t\t};\n\n\t\t\tdata.forEach(function (v) {\n\t\t\t\tout.data[v.key] = v.data;\n\t\t\t});\n\n\t\t\treturn out;\n\t\t}\n\n\t\tfunction parseData(data) {\n\t\t\tif (!data || data.length === 0) return \"\";\n\n\t\t\tif (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0) return data.substring(1, data.length - 1);\n\t\t\tif (data.indexOf(',') !== -1) return parseIntList(data);\n\t\t\treturn parseInt(data, 10);\n\t\t}\n\n\t\tfunction parseIntList(data) {\n\t\t\treturn data.split(',').map(function (val) {\n\t\t\t\treturn parseInt(val, 10);\n\t\t\t});\n\t\t}\n\t}, {}], 14: [function (require, module, exports) {\n\t\tvar HEADER = [66, 77, 70];\n\n\t\tmodule.exports = function readBMFontBinary(buf) {\n\t\t\tif (buf.length < 6) throw new Error('invalid buffer length for BMFont');\n\n\t\t\tvar header = HEADER.every(function (byte, i) {\n\t\t\t\treturn buf.readUInt8(i) === byte;\n\t\t\t});\n\n\t\t\tif (!header) throw new Error('BMFont missing BMF byte header');\n\n\t\t\tvar i = 3;\n\t\t\tvar vers = buf.readUInt8(i++);\n\t\t\tif (vers > 3) throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)');\n\n\t\t\tvar target = { kernings: [], chars: [] };\n\t\t\tfor (var b = 0; b < 5; b++) {\n\t\t\t\ti += readBlock(target, buf, i);\n\t\t\t}return target;\n\t\t};\n\n\t\tfunction readBlock(target, buf, i) {\n\t\t\tif (i > buf.length - 1) return 0;\n\n\t\t\tvar blockID = buf.readUInt8(i++);\n\t\t\tvar blockSize = buf.readInt32LE(i);\n\t\t\ti += 4;\n\n\t\t\tswitch (blockID) {\n\t\t\t\tcase 1:\n\t\t\t\t\ttarget.info = readInfo(buf, i);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\ttarget.common = readCommon(buf, i);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\ttarget.pages = readPages(buf, i, blockSize);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\ttarget.chars = readChars(buf, i, blockSize);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\ttarget.kernings = readKernings(buf, i, blockSize);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn 5 + blockSize;\n\t\t}\n\n\t\tfunction readInfo(buf, i) {\n\t\t\tvar info = {};\n\t\t\tinfo.size = buf.readInt16LE(i);\n\n\t\t\tvar bitField = buf.readUInt8(i + 2);\n\t\t\tinfo.smooth = bitField >> 7 & 1;\n\t\t\tinfo.unicode = bitField >> 6 & 1;\n\t\t\tinfo.italic = bitField >> 5 & 1;\n\t\t\tinfo.bold = bitField >> 4 & 1;\n\n\t\t\tif (bitField >> 3 & 1) info.fixedHeight = 1;\n\n\t\t\tinfo.charset = buf.readUInt8(i + 3) || '';\n\t\t\tinfo.stretchH = buf.readUInt16LE(i + 4);\n\t\t\tinfo.aa = buf.readUInt8(i + 6);\n\t\t\tinfo.padding = [buf.readInt8(i + 7), buf.readInt8(i + 8), buf.readInt8(i + 9), buf.readInt8(i + 10)];\n\t\t\tinfo.spacing = [buf.readInt8(i + 11), buf.readInt8(i + 12)];\n\t\t\tinfo.outline = buf.readUInt8(i + 13);\n\t\t\tinfo.face = readStringNT(buf, i + 14);\n\t\t\treturn info;\n\t\t}\n\n\t\tfunction readCommon(buf, i) {\n\t\t\tvar common = {};\n\t\t\tcommon.lineHeight = buf.readUInt16LE(i);\n\t\t\tcommon.base = buf.readUInt16LE(i + 2);\n\t\t\tcommon.scaleW = buf.readUInt16LE(i + 4);\n\t\t\tcommon.scaleH = buf.readUInt16LE(i + 6);\n\t\t\tcommon.pages = buf.readUInt16LE(i + 8);\n\t\t\tvar bitField = buf.readUInt8(i + 10);\n\t\t\tcommon.packed = 0;\n\t\t\tcommon.alphaChnl = buf.readUInt8(i + 11);\n\t\t\tcommon.redChnl = buf.readUInt8(i + 12);\n\t\t\tcommon.greenChnl = buf.readUInt8(i + 13);\n\t\t\tcommon.blueChnl = buf.readUInt8(i + 14);\n\t\t\treturn common;\n\t\t}\n\n\t\tfunction readPages(buf, i, size) {\n\t\t\tvar pages = [];\n\t\t\tvar text = readNameNT(buf, i);\n\t\t\tvar len = text.length + 1;\n\t\t\tvar count = size / len;\n\t\t\tfor (var c = 0; c < count; c++) {\n\t\t\t\tpages[c] = buf.slice(i, i + text.length).toString('utf8');\n\t\t\t\ti += len;\n\t\t\t}\n\t\t\treturn pages;\n\t\t}\n\n\t\tfunction readChars(buf, i, blockSize) {\n\t\t\tvar chars = [];\n\n\t\t\tvar count = blockSize / 20;\n\t\t\tfor (var c = 0; c < count; c++) {\n\t\t\t\tvar char = {};\n\t\t\t\tvar off = c * 20;\n\t\t\t\tchar.id = buf.readUInt32LE(i + 0 + off);\n\t\t\t\tchar.x = buf.readUInt16LE(i + 4 + off);\n\t\t\t\tchar.y = buf.readUInt16LE(i + 6 + off);\n\t\t\t\tchar.width = buf.readUInt16LE(i + 8 + off);\n\t\t\t\tchar.height = buf.readUInt16LE(i + 10 + off);\n\t\t\t\tchar.xoffset = buf.readInt16LE(i + 12 + off);\n\t\t\t\tchar.yoffset = buf.readInt16LE(i + 14 + off);\n\t\t\t\tchar.xadvance = buf.readInt16LE(i + 16 + off);\n\t\t\t\tchar.page = buf.readUInt8(i + 18 + off);\n\t\t\t\tchar.chnl = buf.readUInt8(i + 19 + off);\n\t\t\t\tchars[c] = char;\n\t\t\t}\n\t\t\treturn chars;\n\t\t}\n\n\t\tfunction readKernings(buf, i, blockSize) {\n\t\t\tvar kernings = [];\n\t\t\tvar count = blockSize / 10;\n\t\t\tfor (var c = 0; c < count; c++) {\n\t\t\t\tvar kern = {};\n\t\t\t\tvar off = c * 10;\n\t\t\t\tkern.first = buf.readUInt32LE(i + 0 + off);\n\t\t\t\tkern.second = buf.readUInt32LE(i + 4 + off);\n\t\t\t\tkern.amount = buf.readInt16LE(i + 8 + off);\n\t\t\t\tkernings[c] = kern;\n\t\t\t}\n\t\t\treturn kernings;\n\t\t}\n\n\t\tfunction readNameNT(buf, offset) {\n\t\t\tvar pos = offset;\n\t\t\tfor (; pos < buf.length; pos++) {\n\t\t\t\tif (buf[pos] === 0x00) break;\n\t\t\t}\n\t\t\treturn buf.slice(offset, pos);\n\t\t}\n\n\t\tfunction readStringNT(buf, offset) {\n\t\t\treturn readNameNT(buf, offset).toString('utf8');\n\t\t}\n\t}, {}], 15: [function (require, module, exports) {\n\t\tvar parseAttributes = require('./parse-attribs');\n\t\tvar parseFromString = require('xml-parse-from-string');\n\n\t\tvar NAME_MAP = {\n\t\t\tscaleh: 'scaleH',\n\t\t\tscalew: 'scaleW',\n\t\t\tstretchh: 'stretchH',\n\t\t\tlineheight: 'lineHeight',\n\t\t\talphachnl: 'alphaChnl',\n\t\t\tredchnl: 'redChnl',\n\t\t\tgreenchnl: 'greenChnl',\n\t\t\tbluechnl: 'blueChnl'\n\t\t};\n\n\t\tmodule.exports = function parse(data) {\n\t\t\tdata = data.toString();\n\n\t\t\tvar xmlRoot = parseFromString(data);\n\t\t\tvar output = {\n\t\t\t\tpages: [],\n\t\t\t\tchars: [],\n\t\t\t\tkernings: []\n\t\t\t};['info', 'common'].forEach(function (key) {\n\t\t\t\tvar element = xmlRoot.getElementsByTagName(key)[0];\n\t\t\t\tif (element) output[key] = parseAttributes(getAttribs(element));\n\t\t\t});\n\n\t\t\tvar pageRoot = xmlRoot.getElementsByTagName('pages')[0];\n\t\t\tif (!pageRoot) throw new Error('malformed file -- no <pages> element');\n\t\t\tvar pages = pageRoot.getElementsByTagName('page');\n\t\t\tfor (var i = 0; i < pages.length; i++) {\n\t\t\t\tvar p = pages[i];\n\t\t\t\tvar id = parseInt(p.getAttribute('id'), 10);\n\t\t\t\tvar file = p.getAttribute('file');\n\t\t\t\tif (isNaN(id)) throw new Error('malformed file -- page \"id\" attribute is NaN');\n\t\t\t\tif (!file) throw new Error('malformed file -- needs page \"file\" attribute');\n\t\t\t\toutput.pages[parseInt(id, 10)] = file;\n\t\t\t}\n\n\t\t\t;['chars', 'kernings'].forEach(function (key) {\n\t\t\t\tvar element = xmlRoot.getElementsByTagName(key)[0];\n\t\t\t\tif (!element) return;\n\t\t\t\tvar childTag = key.substring(0, key.length - 1);\n\t\t\t\tvar children = element.getElementsByTagName(childTag);\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i];\n\t\t\t\t\toutput[key].push(parseAttributes(getAttribs(child)));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn output;\n\t\t};\n\n\t\tfunction getAttribs(element) {\n\t\t\tvar attribs = getAttribList(element);\n\t\t\treturn attribs.reduce(function (dict, attrib) {\n\t\t\t\tvar key = mapName(attrib.nodeName);\n\t\t\t\tdict[key] = attrib.nodeValue;\n\t\t\t\treturn dict;\n\t\t\t}, {});\n\t\t}\n\n\t\tfunction getAttribList(element) {\n\t\t\tvar attribs = [];\n\t\t\tfor (var i = 0; i < element.attributes.length; i++) {\n\t\t\t\tattribs.push(element.attributes[i]);\n\t\t\t}return attribs;\n\t\t}\n\n\t\tfunction mapName(nodeName) {\n\t\t\treturn NAME_MAP[nodeName.toLowerCase()] || nodeName;\n\t\t}\n\t}, { \"./parse-attribs\": 16, \"xml-parse-from-string\": 17 }], 16: [function (require, module, exports) {\n\t\tvar GLYPH_DESIGNER_ERROR = 'chasrset';\n\n\t\tmodule.exports = function parseAttributes(obj) {\n\t\t\tif (GLYPH_DESIGNER_ERROR in obj) {\n\t\t\t\tobj['charset'] = obj[GLYPH_DESIGNER_ERROR];\n\t\t\t\tdelete obj[GLYPH_DESIGNER_ERROR];\n\t\t\t}\n\n\t\t\tfor (var k in obj) {\n\t\t\t\tif (k === 'face' || k === 'charset') continue;else if (k === 'padding' || k === 'spacing') obj[k] = parseIntList(obj[k]);else obj[k] = parseInt(obj[k], 10);\n\t\t\t}\n\t\t\treturn obj;\n\t\t};\n\n\t\tfunction parseIntList(data) {\n\t\t\treturn data.split(',').map(function (val) {\n\t\t\t\treturn parseInt(val, 10);\n\t\t\t});\n\t\t}\n\t}, {}], 17: [function (require, module, exports) {\n\t\tmodule.exports = function xmlparser() {\n\t\t\tif (typeof window.DOMParser !== 'undefined') {\n\t\t\t\treturn function (str) {\n\t\t\t\t\tvar parser = new window.DOMParser();\n\t\t\t\t\treturn parser.parseFromString(str, 'application/xml');\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (typeof window.ActiveXObject !== 'undefined' && new window.ActiveXObject('Microsoft.XMLDOM')) {\n\t\t\t\treturn function (str) {\n\t\t\t\t\tvar xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\t\t\txmlDoc.async = \"false\";\n\t\t\t\t\txmlDoc.loadXML(str);\n\t\t\t\t\treturn xmlDoc;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn function (str) {\n\t\t\t\tvar div = document.createElement('div');\n\t\t\t\tdiv.innerHTML = str;\n\t\t\t\treturn div;\n\t\t\t};\n\t\t}();\n\t}, {}], 18: [function (require, module, exports) {\n\t\t\"use strict\";\n\n\t\tvar window = require(\"global/window\");\n\t\tvar once = require(\"once\");\n\t\tvar isFunction = require(\"is-function\");\n\t\tvar parseHeaders = require(\"parse-headers\");\n\t\tvar xtend = require(\"xtend\");\n\n\t\tmodule.exports = createXHR;\n\t\tcreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop;\n\t\tcreateXHR.XDomainRequest = \"withCredentials\" in new createXHR.XMLHttpRequest() ? createXHR.XMLHttpRequest : window.XDomainRequest;\n\n\t\tforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function (method) {\n\t\t\tcreateXHR[method === \"delete\" ? \"del\" : method] = function (uri, options, callback) {\n\t\t\t\toptions = initParams(uri, options, callback);\n\t\t\t\toptions.method = method.toUpperCase();\n\t\t\t\treturn _createXHR(options);\n\t\t\t};\n\t\t});\n\n\t\tfunction forEachArray(array, iterator) {\n\t\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\t\titerator(array[i]);\n\t\t\t}\n\t\t}\n\n\t\tfunction isEmpty(obj) {\n\t\t\tfor (var i in obj) {\n\t\t\t\tif (obj.hasOwnProperty(i)) return false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tfunction initParams(uri, options, callback) {\n\t\t\tvar params = uri;\n\n\t\t\tif (isFunction(options)) {\n\t\t\t\tcallback = options;\n\t\t\t\tif (typeof uri === \"string\") {\n\t\t\t\t\tparams = { uri: uri };\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tparams = xtend(options, { uri: uri });\n\t\t\t}\n\n\t\t\tparams.callback = callback;\n\t\t\treturn params;\n\t\t}\n\n\t\tfunction createXHR(uri, options, callback) {\n\t\t\toptions = initParams(uri, options, callback);\n\t\t\treturn _createXHR(options);\n\t\t}\n\n\t\tfunction _createXHR(options) {\n\t\t\tvar callback = options.callback;\n\t\t\tif (typeof callback === \"undefined\") {\n\t\t\t\tthrow new Error(\"callback argument missing\");\n\t\t\t}\n\t\t\tcallback = once(callback);\n\n\t\t\tfunction readystatechange() {\n\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\tloadFunc();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction getBody() {\n\t\t\t\tvar body = undefined;\n\n\t\t\t\tif (xhr.response) {\n\t\t\t\t\tbody = xhr.response;\n\t\t\t\t} else if (xhr.responseType === \"text\" || !xhr.responseType) {\n\t\t\t\t\tbody = xhr.responseText || xhr.responseXML;\n\t\t\t\t}\n\n\t\t\t\tif (isJson) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tbody = JSON.parse(body);\n\t\t\t\t\t} catch (e) {}\n\t\t\t\t}\n\n\t\t\t\treturn body;\n\t\t\t}\n\n\t\t\tvar failureResponse = {\n\t\t\t\tbody: undefined,\n\t\t\t\theaders: {},\n\t\t\t\tstatusCode: 0,\n\t\t\t\tmethod: method,\n\t\t\t\turl: uri,\n\t\t\t\trawRequest: xhr\n\t\t\t};\n\n\t\t\tfunction errorFunc(evt) {\n\t\t\t\tclearTimeout(timeoutTimer);\n\t\t\t\tif (!(evt instanceof Error)) {\n\t\t\t\t\tevt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\"));\n\t\t\t\t}\n\t\t\t\tevt.statusCode = 0;\n\t\t\t\tcallback(evt, failureResponse);\n\t\t\t}\n\n\t\t\tfunction loadFunc() {\n\t\t\t\tif (aborted) return;\n\t\t\t\tvar status;\n\t\t\t\tclearTimeout(timeoutTimer);\n\t\t\t\tif (options.useXDR && xhr.status === undefined) {\n\t\t\t\t\tstatus = 200;\n\t\t\t\t} else {\n\t\t\t\t\tstatus = xhr.status === 1223 ? 204 : xhr.status;\n\t\t\t\t}\n\t\t\t\tvar response = failureResponse;\n\t\t\t\tvar err = null;\n\n\t\t\t\tif (status !== 0) {\n\t\t\t\t\tresponse = {\n\t\t\t\t\t\tbody: getBody(),\n\t\t\t\t\t\tstatusCode: status,\n\t\t\t\t\t\tmethod: method,\n\t\t\t\t\t\theaders: {},\n\t\t\t\t\t\turl: uri,\n\t\t\t\t\t\trawRequest: xhr\n\t\t\t\t\t};\n\t\t\t\t\tif (xhr.getAllResponseHeaders) {\n\t\t\t\t\t\tresponse.headers = parseHeaders(xhr.getAllResponseHeaders());\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\terr = new Error(\"Internal XMLHttpRequest Error\");\n\t\t\t\t}\n\t\t\t\tcallback(err, response, response.body);\n\t\t\t}\n\n\t\t\tvar xhr = options.xhr || null;\n\n\t\t\tif (!xhr) {\n\t\t\t\tif (options.cors || options.useXDR) {\n\t\t\t\t\txhr = new createXHR.XDomainRequest();\n\t\t\t\t} else {\n\t\t\t\t\txhr = new createXHR.XMLHttpRequest();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar key;\n\t\t\tvar aborted;\n\t\t\tvar uri = xhr.url = options.uri || options.url;\n\t\t\tvar method = xhr.method = options.method || \"GET\";\n\t\t\tvar body = options.body || options.data || null;\n\t\t\tvar headers = xhr.headers = options.headers || {};\n\t\t\tvar sync = !!options.sync;\n\t\t\tvar isJson = false;\n\t\t\tvar timeoutTimer;\n\n\t\t\tif (\"json\" in options) {\n\t\t\t\tisJson = true;\n\t\t\t\theaders[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\");\n\t\t\t\tif (method !== \"GET\" && method !== \"HEAD\") {\n\t\t\t\t\theaders[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\");\n\t\t\t\t\tbody = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(options.json);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.onreadystatechange = readystatechange;\n\t\t\txhr.onload = loadFunc;\n\t\t\txhr.onerror = errorFunc;\n\n\t\t\txhr.onprogress = function () {};\n\t\t\txhr.ontimeout = errorFunc;\n\t\t\txhr.open(method, uri, !sync, options.username, options.password);\n\n\t\t\tif (!sync) {\n\t\t\t\txhr.withCredentials = !!options.withCredentials;\n\t\t\t}\n\n\t\t\tif (!sync && options.timeout > 0) {\n\t\t\t\ttimeoutTimer = setTimeout(function () {\n\t\t\t\t\taborted = true;\n\t\t\t\t\txhr.abort(\"timeout\");\n\t\t\t\t\tvar e = new Error(\"XMLHttpRequest timeout\");\n\t\t\t\t\te.code = \"ETIMEDOUT\";\n\t\t\t\t\terrorFunc(e);\n\t\t\t\t}, options.timeout);\n\t\t\t}\n\n\t\t\tif (xhr.setRequestHeader) {\n\t\t\t\tfor (key in headers) {\n\t\t\t\t\tif (headers.hasOwnProperty(key)) {\n\t\t\t\t\t\txhr.setRequestHeader(key, headers[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (options.headers && !isEmpty(options.headers)) {\n\t\t\t\tthrow new Error(\"Headers cannot be set on an XDomainRequest object\");\n\t\t\t}\n\n\t\t\tif (\"responseType\" in options) {\n\t\t\t\txhr.responseType = options.responseType;\n\t\t\t}\n\n\t\t\tif (\"beforeSend\" in options && typeof options.beforeSend === \"function\") {\n\t\t\t\toptions.beforeSend(xhr);\n\t\t\t}\n\n\t\t\txhr.send(body);\n\n\t\t\treturn xhr;\n\t\t}\n\n\t\tfunction noop() {}\n\t}, { \"global/window\": 19, \"is-function\": 20, \"once\": 21, \"parse-headers\": 24, \"xtend\": 25 }], 19: [function (require, module, exports) {\n\t\t(function (global) {\n\t\t\tif (typeof window !== \"undefined\") {\n\t\t\t\tmodule.exports = window;\n\t\t\t} else if (typeof global !== \"undefined\") {\n\t\t\t\tmodule.exports = global;\n\t\t\t} else if (typeof self !== \"undefined\") {\n\t\t\t\tmodule.exports = self;\n\t\t\t} else {\n\t\t\t\tmodule.exports = {};\n\t\t\t}\n\t\t}).call(this, typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n\t}, {}], 20: [function (require, module, exports) {\n\t\tmodule.exports = isFunction;\n\n\t\tvar toString = Object.prototype.toString;\n\n\t\tfunction isFunction(fn) {\n\t\t\tvar string = toString.call(fn);\n\t\t\treturn string === '[object Function]' || typeof fn === 'function' && string !== '[object RegExp]' || typeof window !== 'undefined' && (fn === window.setTimeout || fn === window.alert || fn === window.confirm || fn === window.prompt);\n\t\t};\n\t}, {}], 21: [function (require, module, exports) {\n\t\tmodule.exports = once;\n\n\t\tonce.proto = once(function () {\n\t\t\tObject.defineProperty(Function.prototype, 'once', {\n\t\t\t\tvalue: function value() {\n\t\t\t\t\treturn once(this);\n\t\t\t\t},\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t});\n\n\t\tfunction once(fn) {\n\t\t\tvar called = false;\n\t\t\treturn function () {\n\t\t\t\tif (called) return;\n\t\t\t\tcalled = true;\n\t\t\t\treturn fn.apply(this, arguments);\n\t\t\t};\n\t\t}\n\t}, {}], 22: [function (require, module, exports) {\n\t\tvar isFunction = require('is-function');\n\n\t\tmodule.exports = forEach;\n\n\t\tvar toString = Object.prototype.toString;\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n\t\tfunction forEach(list, iterator, context) {\n\t\t\tif (!isFunction(iterator)) {\n\t\t\t\tthrow new TypeError('iterator must be a function');\n\t\t\t}\n\n\t\t\tif (arguments.length < 3) {\n\t\t\t\tcontext = this;\n\t\t\t}\n\n\t\t\tif (toString.call(list) === '[object Array]') forEachArray(list, iterator, context);else if (typeof list === 'string') forEachString(list, iterator, context);else forEachObject(list, iterator, context);\n\t\t}\n\n\t\tfunction forEachArray(array, iterator, context) {\n\t\t\tfor (var i = 0, len = array.length; i < len; i++) {\n\t\t\t\tif (hasOwnProperty.call(array, i)) {\n\t\t\t\t\titerator.call(context, array[i], i, array);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction forEachString(string, iterator, context) {\n\t\t\tfor (var i = 0, len = string.length; i < len; i++) {\n\t\t\t\titerator.call(context, string.charAt(i), i, string);\n\t\t\t}\n\t\t}\n\n\t\tfunction forEachObject(object, iterator, context) {\n\t\t\tfor (var k in object) {\n\t\t\t\tif (hasOwnProperty.call(object, k)) {\n\t\t\t\t\titerator.call(context, object[k], k, object);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, { \"is-function\": 20 }], 23: [function (require, module, exports) {\n\n\t\texports = module.exports = trim;\n\n\t\tfunction trim(str) {\n\t\t\treturn str.replace(/^\\s*|\\s*$/g, '');\n\t\t}\n\n\t\texports.left = function (str) {\n\t\t\treturn str.replace(/^\\s*/, '');\n\t\t};\n\n\t\texports.right = function (str) {\n\t\t\treturn str.replace(/\\s*$/, '');\n\t\t};\n\t}, {}], 24: [function (require, module, exports) {\n\t\tvar trim = require('trim'),\n\t\t    forEach = require('for-each'),\n\t\t    isArray = function isArray(arg) {\n\t\t\treturn Object.prototype.toString.call(arg) === '[object Array]';\n\t\t};\n\n\t\tmodule.exports = function (headers) {\n\t\t\tif (!headers) return {};\n\n\t\t\tvar result = {};\n\n\t\t\tforEach(trim(headers).split('\\n'), function (row) {\n\t\t\t\tvar index = row.indexOf(':'),\n\t\t\t\t    key = trim(row.slice(0, index)).toLowerCase(),\n\t\t\t\t    value = trim(row.slice(index + 1));\n\n\t\t\t\tif (typeof result[key] === 'undefined') {\n\t\t\t\t\tresult[key] = value;\n\t\t\t\t} else if (isArray(result[key])) {\n\t\t\t\t\tresult[key].push(value);\n\t\t\t\t} else {\n\t\t\t\t\tresult[key] = [result[key], value];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t};\n\t}, { \"for-each\": 22, \"trim\": 23 }], 25: [function (require, module, exports) {\n\t\targuments[4][9][0].apply(exports, arguments);\n\t}, { \"dup\": 9 }], 26: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\t\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n\t\tfunction toObject(val) {\n\t\t\tif (val === null || val === undefined) {\n\t\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t\t}\n\n\t\t\treturn Object(val);\n\t\t}\n\n\t\tmodule.exports = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default.a || function (target, source) {\n\t\t\tvar from;\n\t\t\tvar to = toObject(target);\n\t\t\tvar symbols;\n\n\t\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\t\tfrom = Object(arguments[s]);\n\n\t\t\t\tfor (var key in from) {\n\t\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\t\tto[key] = from[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default.a) {\n\t\t\t\t\tsymbols = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default()(from);\n\t\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn to;\n\t\t};\n\t}, {}], 27: [function (require, module, exports) {\n\t\tvar dtype = require('dtype');\n\t\tvar anArray = require('an-array');\n\t\tvar isBuffer = require('is-buffer');\n\n\t\tvar CW = [0, 2, 3];\n\t\tvar CCW = [2, 1, 3];\n\n\t\tmodule.exports = function createQuadElements(array, opt) {\n\t\t\tif (!array || !(anArray(array) || isBuffer(array))) {\n\t\t\t\topt = array || {};\n\t\t\t\tarray = null;\n\t\t\t}\n\n\t\t\tif (typeof opt === 'number') opt = { count: opt };else opt = opt || {};\n\n\t\t\tvar type = typeof opt.type === 'string' ? opt.type : 'uint16';\n\t\t\tvar count = typeof opt.count === 'number' ? opt.count : 1;\n\t\t\tvar start = opt.start || 0;\n\n\t\t\tvar dir = opt.clockwise !== false ? CW : CCW,\n\t\t\t    a = dir[0],\n\t\t\t    b = dir[1],\n\t\t\t    c = dir[2];\n\n\t\t\tvar numIndices = count * 6;\n\n\t\t\tvar indices = array || new (dtype(type))(numIndices);\n\t\t\tfor (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n\t\t\t\tvar x = i + start;\n\t\t\t\tindices[x + 0] = j + 0;\n\t\t\t\tindices[x + 1] = j + 1;\n\t\t\t\tindices[x + 2] = j + 2;\n\t\t\t\tindices[x + 3] = j + a;\n\t\t\t\tindices[x + 4] = j + b;\n\t\t\t\tindices[x + 5] = j + c;\n\t\t\t}\n\t\t\treturn indices;\n\t\t};\n\t}, { \"an-array\": 28, \"dtype\": 29, \"is-buffer\": 30 }], 28: [function (require, module, exports) {\n\t\tvar str = Object.prototype.toString;\n\n\t\tmodule.exports = anArray;\n\n\t\tfunction anArray(arr) {\n\t\t\treturn arr.BYTES_PER_ELEMENT && str.call(arr.buffer) === '[object ArrayBuffer]' || Array.isArray(arr);\n\t\t}\n\t}, {}], 29: [function (require, module, exports) {\n\t\tmodule.exports = function (dtype) {\n\t\t\tswitch (dtype) {\n\t\t\t\tcase 'int8':\n\t\t\t\t\treturn Int8Array;\n\t\t\t\tcase 'int16':\n\t\t\t\t\treturn Int16Array;\n\t\t\t\tcase 'int32':\n\t\t\t\t\treturn Int32Array;\n\t\t\t\tcase 'uint8':\n\t\t\t\t\treturn Uint8Array;\n\t\t\t\tcase 'uint16':\n\t\t\t\t\treturn Uint16Array;\n\t\t\t\tcase 'uint32':\n\t\t\t\t\treturn Uint32Array;\n\t\t\t\tcase 'float32':\n\t\t\t\t\treturn Float32Array;\n\t\t\t\tcase 'float64':\n\t\t\t\t\treturn Float64Array;\n\t\t\t\tcase 'array':\n\t\t\t\t\treturn Array;\n\t\t\t\tcase 'uint8_clamped':\n\t\t\t\t\treturn Uint8ClampedArray;\n\t\t\t}\n\t\t};\n\t}, {}], 30: [function (require, module, exports) {\n\n\t\tmodule.exports = function (obj) {\n\t\t\treturn !!(obj != null && (obj._isBuffer || obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)));\n\t\t};\n\t}, {}], 31: [function (require, module, exports) {\n\t\tvar flatten = require('flatten-vertex-data');\n\n\t\tmodule.exports.attr = setAttribute;\n\t\tmodule.exports.index = setIndex;\n\n\t\tfunction setIndex(geometry, data, itemSize, dtype) {\n\t\t\tif (typeof itemSize !== 'number') itemSize = 1;\n\t\t\tif (typeof dtype !== 'number') dtype = 'uint16';\n\n\t\t\tvar isR69 = !geometry.index && typeof geometry.setIndex !== 'function';\n\t\t\tvar attrib = isR69 ? geometry.getAttribute('index') : geometry.index;\n\t\t\tvar newAttrib = updateAttribute(attrib, data, itemSize, dtype);\n\t\t\tif (newAttrib) {\n\t\t\t\tif (isR69) geometry.addAttribute('index', newAttrib);else geometry.index = newAttrib;\n\t\t\t}\n\t\t}\n\n\t\tfunction setAttribute(geometry, key, data, itemSize, dtype) {\n\t\t\tif (typeof itemSize !== 'number') itemSize = 3;\n\t\t\tif (typeof dtype !== 'number') dtype = 'float32';\n\t\t\tif (Array.isArray(data) && Array.isArray(data[0]) && data[0].length !== itemSize) {\n\t\t\t\tthrow new Error('Nested vertex array has unexpected size; expected ' + itemSize + ' but found ' + data[0].length);\n\t\t\t}\n\n\t\t\tvar attrib = geometry.getAttribute(key);\n\t\t\tvar newAttrib = updateAttribute(attrib, data, itemSize, dtype);\n\t\t\tif (newAttrib) {\n\t\t\t\tgeometry.addAttribute(key, newAttrib);\n\t\t\t}\n\t\t}\n\n\t\tfunction updateAttribute(attrib, data, itemSize, dtype) {\n\t\t\tdata = data || [];\n\t\t\tif (!attrib || rebuildAttribute(attrib, data, itemSize)) {\n\t\t\t\tdata = flatten(data, dtype);\n\t\t\t\tattrib = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BufferAttribute\"](data, itemSize);\n\t\t\t\tattrib.needsUpdate = true;\n\t\t\t\treturn attrib;\n\t\t\t} else {\n\t\t\t\tflatten(data, attrib.array);\n\t\t\t\tattrib.needsUpdate = true;\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tfunction rebuildAttribute(attrib, data, itemSize) {\n\t\t\tif (attrib.itemSize !== itemSize) return true;\n\t\t\tif (!attrib.array) return true;\n\t\t\tvar attribLength = attrib.array.length;\n\t\t\tif (Array.isArray(data) && Array.isArray(data[0])) {\n\t\t\t\treturn attribLength !== data.length * itemSize;\n\t\t\t} else {\n\t\t\t\treturn attribLength !== data.length;\n\t\t\t}\n\t\t}\n\t}, { \"flatten-vertex-data\": 32 }], 32: [function (require, module, exports) {\n\t\tvar dtype = require('dtype');\n\t\tmodule.exports = flattenVertexData;\n\t\tfunction flattenVertexData(data, output, offset) {\n\t\t\tif (!data) throw new TypeError('must specify data as first parameter');\n\t\t\toffset = +(offset || 0) | 0;\n\n\t\t\tif (Array.isArray(data) && Array.isArray(data[0])) {\n\t\t\t\tvar dim = data[0].length;\n\t\t\t\tvar length = data.length * dim;\n\n\t\t\t\tif (!output || typeof output === 'string') {\n\t\t\t\t\toutput = new (dtype(output || 'float32'))(length + offset);\n\t\t\t\t}\n\n\t\t\t\tvar dstLength = output.length - offset;\n\t\t\t\tif (length !== dstLength) {\n\t\t\t\t\tthrow new Error('source length ' + length + ' (' + dim + 'x' + data.length + ')' + ' does not match destination length ' + dstLength);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, k = offset; i < data.length; i++) {\n\t\t\t\t\tfor (var j = 0; j < dim; j++) {\n\t\t\t\t\t\toutput[k++] = data[i][j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!output || typeof output === 'string') {\n\t\t\t\t\tvar Ctor = dtype(output || 'float32');\n\t\t\t\t\tif (offset === 0) {\n\t\t\t\t\t\toutput = new Ctor(data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput = new Ctor(data.length + offset);\n\t\t\t\t\t\toutput.set(data, offset);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\toutput.set(data, offset);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn output;\n\t\t}\n\t}, { \"dtype\": 33 }], 33: [function (require, module, exports) {\n\t\targuments[4][29][0].apply(exports, arguments);\n\t}, { \"dup\": 29 }], 34: [function (require, module, exports) {\n\t\tvar assign = require('object-assign');\n\n\t\tmodule.exports = function createSDFShader(opt) {\n\t\t\topt = opt || {};\n\t\t\tvar opacity = typeof opt.opacity === 'number' ? opt.opacity : 1;\n\t\t\tvar alphaTest = typeof opt.alphaTest === 'number' ? opt.alphaTest : 0.0001;\n\t\t\tvar precision = opt.precision || 'highp';\n\t\t\tvar color = opt.color;\n\t\t\tvar map = opt.map;\n\n\t\t\tdelete opt.map;\n\t\t\tdelete opt.color;\n\t\t\tdelete opt.precision;\n\t\t\tdelete opt.opacity;\n\n\t\t\treturn assign({\n\t\t\t\tuniforms: {\n\t\t\t\t\topacity: { type: 'f', value: opacity },\n\t\t\t\t\tmap: { type: 't', value: map || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]() },\n\t\t\t\t\tcolor: { type: 'c', value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Color\"](color) }\n\t\t\t\t},\n\t\t\t\tvertexShader: ['attribute vec2 uv;', 'attribute vec4 position;', 'uniform mat4 projectionMatrix;', 'uniform mat4 modelViewMatrix;', 'varying vec2 vUv;', 'void main() {', 'vUv = uv;', 'gl_Position = projectionMatrix * modelViewMatrix * position;', '}'].join('\\n'),\n\t\t\t\tfragmentShader: ['#ifdef GL_OES_standard_derivatives', '#extension GL_OES_standard_derivatives : enable', '#endif', 'precision ' + precision + ' float;', 'uniform float opacity;', 'uniform vec3 color;', 'uniform sampler2D map;', 'varying vec2 vUv;', 'float aastep(float value) {', '  #ifdef GL_OES_standard_derivatives', '    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;', '  #else', '    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));', '  #endif', '  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);', '}', 'void main() {', '  vec4 texColor = texture2D(map, vUv);', '  float alpha = aastep(texColor.a);', '  gl_FragColor = vec4(color, opacity * alpha);', alphaTest === 0 ? '' : '  if (gl_FragColor.a < ' + alphaTest + ') discard;', '}'].join('\\n')\n\t\t\t}, opt);\n\t\t};\n\t}, { \"object-assign\": 26 }], 35: [function (require, module, exports) {\n\t\tvar loadFont = require('load-bmfont');\n\n\t\tmodule.exports = function (opt, cb) {\n\t\t\tloadFont(opt.font, function (err, font) {\n\t\t\t\tif (err) throw err;\n\t\t\t\tPANOLENS.Utils.TextureLoader.load(opt.image, function (tex) {\n\t\t\t\t\tcb(font, tex);\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t}, { \"load-bmfont\": 10 }], 36: [function (require, module, exports) {\n\n\t\tvar createText = require('../');\n\t\tvar SDFShader = require('../shaders/sdf');\n\n\t\tif (PANOLENS && PANOLENS.Utils && PANOLENS.SpriteText) {\n\t\t\tPANOLENS.Utils.loadBMFont = function (fontObject, callback) {\n\t\t\t\trequire('./load')(fontObject, PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype, callback));\n\t\t\t};\n\t\t\tPANOLENS.SpriteText.prototype.generateTextGeometry = createText;\n\t\t\tPANOLENS.SpriteText.prototype.generateSDFShader = SDFShader;\n\t\t}\n\t}, { \"../\": 1, \"../shaders/sdf\": 34, \"./load\": 35 }], 37: [function (require, module, exports) {\n\t\t(function (global) {\n\t\t\t/*!\n    * The buffer module from node.js, for the browser.\n    *\n    * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n    * @license  MIT\n    */\n\t\t\t'use strict';\n\n\t\t\tvar base64 = require('base64-js');\n\t\t\tvar ieee754 = require('ieee754');\n\t\t\tvar isArray = require('isarray');\n\n\t\t\texports.Buffer = Buffer;\n\t\t\texports.SlowBuffer = SlowBuffer;\n\t\t\texports.INSPECT_MAX_BYTES = 50;\n\t\t\tBuffer.poolSize = 8192;\n\n\t\t\tvar rootParent = {};\n\n\t\t\tBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n\n\t\t\tfunction typedArraySupport() {\n\t\t\t\ttry {\n\t\t\t\t\tvar arr = new Uint8Array(1);\n\t\t\t\t\tarr.foo = function () {\n\t\t\t\t\t\treturn 42;\n\t\t\t\t\t};\n\t\t\t\t\treturn arr.foo() === 42 && typeof arr.subarray === 'function' && arr.subarray(1, 1).byteLength === 0;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction kMaxLength() {\n\t\t\t\treturn Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n\t\t\t}\n\n\t\t\tfunction Buffer(arg) {\n\t\t\t\tif (!(this instanceof Buffer)) {\n\t\t\t\t\tif (arguments.length > 1) return new Buffer(arg, arguments[1]);\n\t\t\t\t\treturn new Buffer(arg);\n\t\t\t\t}\n\n\t\t\t\tif (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis.length = 0;\n\t\t\t\t\tthis.parent = undefined;\n\t\t\t\t}\n\n\t\t\t\tif (typeof arg === 'number') {\n\t\t\t\t\treturn fromNumber(this, arg);\n\t\t\t\t}\n\n\t\t\t\tif (typeof arg === 'string') {\n\t\t\t\t\treturn fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8');\n\t\t\t\t}\n\n\t\t\t\treturn fromObject(this, arg);\n\t\t\t}\n\n\t\t\tfunction fromNumber(that, length) {\n\t\t\t\tthat = allocate(that, length < 0 ? 0 : checked(length) | 0);\n\t\t\t\tif (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\t\tthat[i] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromString(that, string, encoding) {\n\t\t\t\tif (typeof encoding !== 'string' || encoding === '') encoding = 'utf8';\n\n\t\t\t\tvar length = byteLength(string, encoding) | 0;\n\t\t\t\tthat = allocate(that, length);\n\n\t\t\t\tthat.write(string, encoding);\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromObject(that, object) {\n\t\t\t\tif (Buffer.isBuffer(object)) return fromBuffer(that, object);\n\n\t\t\t\tif (isArray(object)) return fromArray(that, object);\n\n\t\t\t\tif (object == null) {\n\t\t\t\t\tthrow new TypeError('must start with number, buffer, array or string');\n\t\t\t\t}\n\n\t\t\t\tif (typeof ArrayBuffer !== 'undefined') {\n\t\t\t\t\tif (object.buffer instanceof ArrayBuffer) {\n\t\t\t\t\t\treturn fromTypedArray(that, object);\n\t\t\t\t\t}\n\t\t\t\t\tif (object instanceof ArrayBuffer) {\n\t\t\t\t\t\treturn fromArrayBuffer(that, object);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (object.length) return fromArrayLike(that, object);\n\n\t\t\t\treturn fromJsonObject(that, object);\n\t\t\t}\n\n\t\t\tfunction fromBuffer(that, buffer) {\n\t\t\t\tvar length = checked(buffer.length) | 0;\n\t\t\t\tthat = allocate(that, length);\n\t\t\t\tbuffer.copy(that, 0, 0, length);\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromArray(that, array) {\n\t\t\t\tvar length = checked(array.length) | 0;\n\t\t\t\tthat = allocate(that, length);\n\t\t\t\tfor (var i = 0; i < length; i += 1) {\n\t\t\t\t\tthat[i] = array[i] & 255;\n\t\t\t\t}\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromTypedArray(that, array) {\n\t\t\t\tvar length = checked(array.length) | 0;\n\t\t\t\tthat = allocate(that, length);\n\n\t\t\t\tfor (var i = 0; i < length; i += 1) {\n\t\t\t\t\tthat[i] = array[i] & 255;\n\t\t\t\t}\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromArrayBuffer(that, array) {\n\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthat = new Uint8Array(array);\n\t\t\t\t\tthat.__proto__ = Buffer.prototype;\n\t\t\t\t} else {\n\t\t\t\t\tthat = fromTypedArray(that, new Uint8Array(array));\n\t\t\t\t}\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromArrayLike(that, array) {\n\t\t\t\tvar length = checked(array.length) | 0;\n\t\t\t\tthat = allocate(that, length);\n\t\t\t\tfor (var i = 0; i < length; i += 1) {\n\t\t\t\t\tthat[i] = array[i] & 255;\n\t\t\t\t}\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromJsonObject(that, object) {\n\t\t\t\tvar array;\n\t\t\t\tvar length = 0;\n\n\t\t\t\tif (object.type === 'Buffer' && isArray(object.data)) {\n\t\t\t\t\tarray = object.data;\n\t\t\t\t\tlength = checked(array.length) | 0;\n\t\t\t\t}\n\t\t\t\tthat = allocate(that, length);\n\n\t\t\t\tfor (var i = 0; i < length; i += 1) {\n\t\t\t\t\tthat[i] = array[i] & 255;\n\t\t\t\t}\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\tBuffer.prototype.__proto__ = Uint8Array.prototype;\n\t\t\t\tBuffer.__proto__ = Uint8Array;\n\t\t\t} else {\n\t\t\t\tBuffer.prototype.length = undefined;\n\t\t\t\tBuffer.prototype.parent = undefined;\n\t\t\t}\n\n\t\t\tfunction allocate(that, length) {\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthat = new Uint8Array(length);\n\t\t\t\t\tthat.__proto__ = Buffer.prototype;\n\t\t\t\t} else {\n\t\t\t\t\tthat.length = length;\n\t\t\t\t}\n\n\t\t\t\tvar fromPool = length !== 0 && length <= Buffer.poolSize >>> 1;\n\t\t\t\tif (fromPool) that.parent = rootParent;\n\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction checked(length) {\n\t\t\t\tif (length >= kMaxLength()) {\n\t\t\t\t\tthrow new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n\t\t\t\t}\n\t\t\t\treturn length | 0;\n\t\t\t}\n\n\t\t\tfunction SlowBuffer(subject, encoding) {\n\t\t\t\tif (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding);\n\n\t\t\t\tvar buf = new Buffer(subject, encoding);\n\t\t\t\tdelete buf.parent;\n\t\t\t\treturn buf;\n\t\t\t}\n\n\t\t\tBuffer.isBuffer = function isBuffer(b) {\n\t\t\t\treturn !!(b != null && b._isBuffer);\n\t\t\t};\n\n\t\t\tBuffer.compare = function compare(a, b) {\n\t\t\t\tif (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n\t\t\t\t\tthrow new TypeError('Arguments must be Buffers');\n\t\t\t\t}\n\n\t\t\t\tif (a === b) return 0;\n\n\t\t\t\tvar x = a.length;\n\t\t\t\tvar y = b.length;\n\n\t\t\t\tvar i = 0;\n\t\t\t\tvar len = Math.min(x, y);\n\t\t\t\twhile (i < len) {\n\t\t\t\t\tif (a[i] !== b[i]) break;\n\n\t\t\t\t\t++i;\n\t\t\t\t}\n\n\t\t\t\tif (i !== len) {\n\t\t\t\t\tx = a[i];\n\t\t\t\t\ty = b[i];\n\t\t\t\t}\n\n\t\t\t\tif (x < y) return -1;\n\t\t\t\tif (y < x) return 1;\n\t\t\t\treturn 0;\n\t\t\t};\n\n\t\t\tBuffer.isEncoding = function isEncoding(encoding) {\n\t\t\t\tswitch (String(encoding).toLowerCase()) {\n\t\t\t\t\tcase 'hex':\n\t\t\t\t\tcase 'utf8':\n\t\t\t\t\tcase 'utf-8':\n\t\t\t\t\tcase 'ascii':\n\t\t\t\t\tcase 'binary':\n\t\t\t\t\tcase 'base64':\n\t\t\t\t\tcase 'raw':\n\t\t\t\t\tcase 'ucs2':\n\t\t\t\t\tcase 'ucs-2':\n\t\t\t\t\tcase 'utf16le':\n\t\t\t\t\tcase 'utf-16le':\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tBuffer.concat = function concat(list, length) {\n\t\t\t\tif (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.');\n\n\t\t\t\tif (list.length === 0) {\n\t\t\t\t\treturn new Buffer(0);\n\t\t\t\t}\n\n\t\t\t\tvar i;\n\t\t\t\tif (length === undefined) {\n\t\t\t\t\tlength = 0;\n\t\t\t\t\tfor (i = 0; i < list.length; i++) {\n\t\t\t\t\t\tlength += list[i].length;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar buf = new Buffer(length);\n\t\t\t\tvar pos = 0;\n\t\t\t\tfor (i = 0; i < list.length; i++) {\n\t\t\t\t\tvar item = list[i];\n\t\t\t\t\titem.copy(buf, pos);\n\t\t\t\t\tpos += item.length;\n\t\t\t\t}\n\t\t\t\treturn buf;\n\t\t\t};\n\n\t\t\tfunction byteLength(string, encoding) {\n\t\t\t\tif (typeof string !== 'string') string = '' + string;\n\n\t\t\t\tvar len = string.length;\n\t\t\t\tif (len === 0) return 0;\n\n\t\t\t\tvar loweredCase = false;\n\t\t\t\tfor (;;) {\n\t\t\t\t\tswitch (encoding) {\n\t\t\t\t\t\tcase 'ascii':\n\t\t\t\t\t\tcase 'binary':\n\t\t\t\t\t\tcase 'raw':\n\t\t\t\t\t\tcase 'raws':\n\t\t\t\t\t\t\treturn len;\n\t\t\t\t\t\tcase 'utf8':\n\t\t\t\t\t\tcase 'utf-8':\n\t\t\t\t\t\t\treturn utf8ToBytes(string).length;\n\t\t\t\t\t\tcase 'ucs2':\n\t\t\t\t\t\tcase 'ucs-2':\n\t\t\t\t\t\tcase 'utf16le':\n\t\t\t\t\t\tcase 'utf-16le':\n\t\t\t\t\t\t\treturn len * 2;\n\t\t\t\t\t\tcase 'hex':\n\t\t\t\t\t\t\treturn len >>> 1;\n\t\t\t\t\t\tcase 'base64':\n\t\t\t\t\t\t\treturn base64ToBytes(string).length;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif (loweredCase) return utf8ToBytes(string).length;\n\t\t\t\t\t\t\tencoding = ('' + encoding).toLowerCase();\n\t\t\t\t\t\t\tloweredCase = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tBuffer.byteLength = byteLength;\n\n\t\t\tfunction slowToString(encoding, start, end) {\n\t\t\t\tvar loweredCase = false;\n\n\t\t\t\tstart = start | 0;\n\t\t\t\tend = end === undefined || end === Infinity ? this.length : end | 0;\n\n\t\t\t\tif (!encoding) encoding = 'utf8';\n\t\t\t\tif (start < 0) start = 0;\n\t\t\t\tif (end > this.length) end = this.length;\n\t\t\t\tif (end <= start) return '';\n\n\t\t\t\twhile (true) {\n\t\t\t\t\tswitch (encoding) {\n\t\t\t\t\t\tcase 'hex':\n\t\t\t\t\t\t\treturn hexSlice(this, start, end);\n\n\t\t\t\t\t\tcase 'utf8':\n\t\t\t\t\t\tcase 'utf-8':\n\t\t\t\t\t\t\treturn utf8Slice(this, start, end);\n\n\t\t\t\t\t\tcase 'ascii':\n\t\t\t\t\t\t\treturn asciiSlice(this, start, end);\n\n\t\t\t\t\t\tcase 'binary':\n\t\t\t\t\t\t\treturn binarySlice(this, start, end);\n\n\t\t\t\t\t\tcase 'base64':\n\t\t\t\t\t\t\treturn base64Slice(this, start, end);\n\n\t\t\t\t\t\tcase 'ucs2':\n\t\t\t\t\t\tcase 'ucs-2':\n\t\t\t\t\t\tcase 'utf16le':\n\t\t\t\t\t\tcase 'utf-16le':\n\t\t\t\t\t\t\treturn utf16leSlice(this, start, end);\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n\t\t\t\t\t\t\tencoding = (encoding + '').toLowerCase();\n\t\t\t\t\t\t\tloweredCase = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBuffer.prototype._isBuffer = true;\n\n\t\t\tBuffer.prototype.toString = function toString() {\n\t\t\t\tvar length = this.length | 0;\n\t\t\t\tif (length === 0) return '';\n\t\t\t\tif (arguments.length === 0) return utf8Slice(this, 0, length);\n\t\t\t\treturn slowToString.apply(this, arguments);\n\t\t\t};\n\n\t\t\tBuffer.prototype.equals = function equals(b) {\n\t\t\t\tif (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n\t\t\t\tif (this === b) return true;\n\t\t\t\treturn Buffer.compare(this, b) === 0;\n\t\t\t};\n\n\t\t\tBuffer.prototype.inspect = function inspect() {\n\t\t\t\tvar str = '';\n\t\t\t\tvar max = exports.INSPECT_MAX_BYTES;\n\t\t\t\tif (this.length > 0) {\n\t\t\t\t\tstr = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n\t\t\t\t\tif (this.length > max) str += ' ... ';\n\t\t\t\t}\n\t\t\t\treturn '<Buffer ' + str + '>';\n\t\t\t};\n\n\t\t\tBuffer.prototype.compare = function compare(b) {\n\t\t\t\tif (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n\t\t\t\tif (this === b) return 0;\n\t\t\t\treturn Buffer.compare(this, b);\n\t\t\t};\n\n\t\t\tBuffer.prototype.indexOf = function indexOf(val, byteOffset) {\n\t\t\t\tif (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff;else if (byteOffset < -0x80000000) byteOffset = -0x80000000;\n\t\t\t\tbyteOffset >>= 0;\n\n\t\t\t\tif (this.length === 0) return -1;\n\t\t\t\tif (byteOffset >= this.length) return -1;\n\n\t\t\t\tif (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0);\n\n\t\t\t\tif (typeof val === 'string') {\n\t\t\t\t\tif (val.length === 0) return -1;\n\t\t\t\t\treturn String.prototype.indexOf.call(this, val, byteOffset);\n\t\t\t\t}\n\t\t\t\tif (Buffer.isBuffer(val)) {\n\t\t\t\t\treturn arrayIndexOf(this, val, byteOffset);\n\t\t\t\t}\n\t\t\t\tif (typeof val === 'number') {\n\t\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n\t\t\t\t\t\treturn Uint8Array.prototype.indexOf.call(this, val, byteOffset);\n\t\t\t\t\t}\n\t\t\t\t\treturn arrayIndexOf(this, [val], byteOffset);\n\t\t\t\t}\n\n\t\t\t\tfunction arrayIndexOf(arr, val, byteOffset) {\n\t\t\t\t\tvar foundIndex = -1;\n\t\t\t\t\tfor (var i = 0; byteOffset + i < arr.length; i++) {\n\t\t\t\t\t\tif (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n\t\t\t\t\t\t\tif (foundIndex === -1) foundIndex = i;\n\t\t\t\t\t\t\tif (i - foundIndex + 1 === val.length) return byteOffset + foundIndex;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfoundIndex = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\tthrow new TypeError('val must be string, number or Buffer');\n\t\t\t};\n\n\t\t\tfunction hexWrite(buf, string, offset, length) {\n\t\t\t\toffset = Number(offset) || 0;\n\t\t\t\tvar remaining = buf.length - offset;\n\t\t\t\tif (!length) {\n\t\t\t\t\tlength = remaining;\n\t\t\t\t} else {\n\t\t\t\t\tlength = Number(length);\n\t\t\t\t\tif (length > remaining) {\n\t\t\t\t\t\tlength = remaining;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar strLen = string.length;\n\t\t\t\tif (strLen % 2 !== 0) throw new Error('Invalid hex string');\n\n\t\t\t\tif (length > strLen / 2) {\n\t\t\t\t\tlength = strLen / 2;\n\t\t\t\t}\n\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\tvar parsed = parseInt(string.substr(i * 2, 2), 16);\n\t\t\t\t\tif (isNaN(parsed)) throw new Error('Invalid hex string');\n\t\t\t\t\tbuf[offset + i] = parsed;\n\t\t\t\t}\n\t\t\t\treturn i;\n\t\t\t}\n\n\t\t\tfunction utf8Write(buf, string, offset, length) {\n\t\t\t\treturn blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n\t\t\t}\n\n\t\t\tfunction asciiWrite(buf, string, offset, length) {\n\t\t\t\treturn blitBuffer(asciiToBytes(string), buf, offset, length);\n\t\t\t}\n\n\t\t\tfunction binaryWrite(buf, string, offset, length) {\n\t\t\t\treturn asciiWrite(buf, string, offset, length);\n\t\t\t}\n\n\t\t\tfunction base64Write(buf, string, offset, length) {\n\t\t\t\treturn blitBuffer(base64ToBytes(string), buf, offset, length);\n\t\t\t}\n\n\t\t\tfunction ucs2Write(buf, string, offset, length) {\n\t\t\t\treturn blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n\t\t\t}\n\n\t\t\tBuffer.prototype.write = function write(string, offset, length, encoding) {\n\t\t\t\tif (offset === undefined) {\n\t\t\t\t\tencoding = 'utf8';\n\t\t\t\t\tlength = this.length;\n\t\t\t\t\toffset = 0;\n\t\t\t\t} else if (length === undefined && typeof offset === 'string') {\n\t\t\t\t\tencoding = offset;\n\t\t\t\t\tlength = this.length;\n\t\t\t\t\toffset = 0;\n\t\t\t\t} else if (isFinite(offset)) {\n\t\t\t\t\toffset = offset | 0;\n\t\t\t\t\tif (isFinite(length)) {\n\t\t\t\t\t\tlength = length | 0;\n\t\t\t\t\t\tif (encoding === undefined) encoding = 'utf8';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tencoding = length;\n\t\t\t\t\t\tlength = undefined;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar swap = encoding;\n\t\t\t\t\tencoding = offset;\n\t\t\t\t\toffset = length | 0;\n\t\t\t\t\tlength = swap;\n\t\t\t\t}\n\n\t\t\t\tvar remaining = this.length - offset;\n\t\t\t\tif (length === undefined || length > remaining) length = remaining;\n\n\t\t\t\tif (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n\t\t\t\t\tthrow new RangeError('attempt to write outside buffer bounds');\n\t\t\t\t}\n\n\t\t\t\tif (!encoding) encoding = 'utf8';\n\n\t\t\t\tvar loweredCase = false;\n\t\t\t\tfor (;;) {\n\t\t\t\t\tswitch (encoding) {\n\t\t\t\t\t\tcase 'hex':\n\t\t\t\t\t\t\treturn hexWrite(this, string, offset, length);\n\n\t\t\t\t\t\tcase 'utf8':\n\t\t\t\t\t\tcase 'utf-8':\n\t\t\t\t\t\t\treturn utf8Write(this, string, offset, length);\n\n\t\t\t\t\t\tcase 'ascii':\n\t\t\t\t\t\t\treturn asciiWrite(this, string, offset, length);\n\n\t\t\t\t\t\tcase 'binary':\n\t\t\t\t\t\t\treturn binaryWrite(this, string, offset, length);\n\n\t\t\t\t\t\tcase 'base64':\n\t\t\t\t\t\t\treturn base64Write(this, string, offset, length);\n\n\t\t\t\t\t\tcase 'ucs2':\n\t\t\t\t\t\tcase 'ucs-2':\n\t\t\t\t\t\tcase 'utf16le':\n\t\t\t\t\t\tcase 'utf-16le':\n\t\t\t\t\t\t\treturn ucs2Write(this, string, offset, length);\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n\t\t\t\t\t\t\tencoding = ('' + encoding).toLowerCase();\n\t\t\t\t\t\t\tloweredCase = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tBuffer.prototype.toJSON = function toJSON() {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'Buffer',\n\t\t\t\t\tdata: Array.prototype.slice.call(this._arr || this, 0)\n\t\t\t\t};\n\t\t\t};\n\n\t\t\tfunction base64Slice(buf, start, end) {\n\t\t\t\tif (start === 0 && end === buf.length) {\n\t\t\t\t\treturn base64.fromByteArray(buf);\n\t\t\t\t} else {\n\t\t\t\t\treturn base64.fromByteArray(buf.slice(start, end));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction utf8Slice(buf, start, end) {\n\t\t\t\tend = Math.min(buf.length, end);\n\t\t\t\tvar res = [];\n\n\t\t\t\tvar i = start;\n\t\t\t\twhile (i < end) {\n\t\t\t\t\tvar firstByte = buf[i];\n\t\t\t\t\tvar codePoint = null;\n\t\t\t\t\tvar bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n\t\t\t\t\tif (i + bytesPerSequence <= end) {\n\t\t\t\t\t\tvar secondByte, thirdByte, fourthByte, tempCodePoint;\n\n\t\t\t\t\t\tswitch (bytesPerSequence) {\n\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\tif (firstByte < 0x80) {\n\t\t\t\t\t\t\t\t\tcodePoint = firstByte;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tsecondByte = buf[i + 1];\n\t\t\t\t\t\t\t\tif ((secondByte & 0xC0) === 0x80) {\n\t\t\t\t\t\t\t\t\ttempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n\t\t\t\t\t\t\t\t\tif (tempCodePoint > 0x7F) {\n\t\t\t\t\t\t\t\t\t\tcodePoint = tempCodePoint;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tsecondByte = buf[i + 1];\n\t\t\t\t\t\t\t\tthirdByte = buf[i + 2];\n\t\t\t\t\t\t\t\tif ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n\t\t\t\t\t\t\t\t\ttempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n\t\t\t\t\t\t\t\t\tif (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n\t\t\t\t\t\t\t\t\t\tcodePoint = tempCodePoint;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tsecondByte = buf[i + 1];\n\t\t\t\t\t\t\t\tthirdByte = buf[i + 2];\n\t\t\t\t\t\t\t\tfourthByte = buf[i + 3];\n\t\t\t\t\t\t\t\tif ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n\t\t\t\t\t\t\t\t\ttempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n\t\t\t\t\t\t\t\t\tif (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n\t\t\t\t\t\t\t\t\t\tcodePoint = tempCodePoint;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (codePoint === null) {\n\t\t\t\t\t\tcodePoint = 0xFFFD;\n\t\t\t\t\t\tbytesPerSequence = 1;\n\t\t\t\t\t} else if (codePoint > 0xFFFF) {\n\t\t\t\t\t\tcodePoint -= 0x10000;\n\t\t\t\t\t\tres.push(codePoint >>> 10 & 0x3FF | 0xD800);\n\t\t\t\t\t\tcodePoint = 0xDC00 | codePoint & 0x3FF;\n\t\t\t\t\t}\n\n\t\t\t\t\tres.push(codePoint);\n\t\t\t\t\ti += bytesPerSequence;\n\t\t\t\t}\n\n\t\t\t\treturn decodeCodePointsArray(res);\n\t\t\t}\n\n\t\t\tvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\n\t\t\tfunction decodeCodePointsArray(codePoints) {\n\t\t\t\tvar len = codePoints.length;\n\t\t\t\tif (len <= MAX_ARGUMENTS_LENGTH) {\n\t\t\t\t\treturn String.fromCharCode.apply(String, codePoints);\n\t\t\t\t}\n\n\t\t\t\tvar res = '';\n\t\t\t\tvar i = 0;\n\t\t\t\twhile (i < len) {\n\t\t\t\t\tres += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n\t\t\t\t}\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tfunction asciiSlice(buf, start, end) {\n\t\t\t\tvar ret = '';\n\t\t\t\tend = Math.min(buf.length, end);\n\n\t\t\t\tfor (var i = start; i < end; i++) {\n\t\t\t\t\tret += String.fromCharCode(buf[i] & 0x7F);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\tfunction binarySlice(buf, start, end) {\n\t\t\t\tvar ret = '';\n\t\t\t\tend = Math.min(buf.length, end);\n\n\t\t\t\tfor (var i = start; i < end; i++) {\n\t\t\t\t\tret += String.fromCharCode(buf[i]);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\tfunction hexSlice(buf, start, end) {\n\t\t\t\tvar len = buf.length;\n\n\t\t\t\tif (!start || start < 0) start = 0;\n\t\t\t\tif (!end || end < 0 || end > len) end = len;\n\n\t\t\t\tvar out = '';\n\t\t\t\tfor (var i = start; i < end; i++) {\n\t\t\t\t\tout += toHex(buf[i]);\n\t\t\t\t}\n\t\t\t\treturn out;\n\t\t\t}\n\n\t\t\tfunction utf16leSlice(buf, start, end) {\n\t\t\t\tvar bytes = buf.slice(start, end);\n\t\t\t\tvar res = '';\n\t\t\t\tfor (var i = 0; i < bytes.length; i += 2) {\n\t\t\t\t\tres += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n\t\t\t\t}\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tBuffer.prototype.slice = function slice(start, end) {\n\t\t\t\tvar len = this.length;\n\t\t\t\tstart = ~~start;\n\t\t\t\tend = end === undefined ? len : ~~end;\n\n\t\t\t\tif (start < 0) {\n\t\t\t\t\tstart += len;\n\t\t\t\t\tif (start < 0) start = 0;\n\t\t\t\t} else if (start > len) {\n\t\t\t\t\tstart = len;\n\t\t\t\t}\n\n\t\t\t\tif (end < 0) {\n\t\t\t\t\tend += len;\n\t\t\t\t\tif (end < 0) end = 0;\n\t\t\t\t} else if (end > len) {\n\t\t\t\t\tend = len;\n\t\t\t\t}\n\n\t\t\t\tif (end < start) end = start;\n\n\t\t\t\tvar newBuf;\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tnewBuf = this.subarray(start, end);\n\t\t\t\t\tnewBuf.__proto__ = Buffer.prototype;\n\t\t\t\t} else {\n\t\t\t\t\tvar sliceLen = end - start;\n\t\t\t\t\tnewBuf = new Buffer(sliceLen, undefined);\n\t\t\t\t\tfor (var i = 0; i < sliceLen; i++) {\n\t\t\t\t\t\tnewBuf[i] = this[i + start];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (newBuf.length) newBuf.parent = this.parent || this;\n\n\t\t\t\treturn newBuf;\n\t\t\t};\n\n\t\t\tfunction checkOffset(offset, ext, length) {\n\t\t\t\tif (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n\t\t\t\tif (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n\t\t\t}\n\n\t\t\tBuffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n\t\t\t\toffset = offset | 0;\n\t\t\t\tbyteLength = byteLength | 0;\n\t\t\t\tif (!noAssert) checkOffset(offset, byteLength, this.length);\n\n\t\t\t\tvar val = this[offset];\n\t\t\t\tvar mul = 1;\n\t\t\t\tvar i = 0;\n\t\t\t\twhile (++i < byteLength && (mul *= 0x100)) {\n\t\t\t\t\tval += this[offset + i] * mul;\n\t\t\t\t}\n\n\t\t\t\treturn val;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n\t\t\t\toffset = offset | 0;\n\t\t\t\tbyteLength = byteLength | 0;\n\t\t\t\tif (!noAssert) {\n\t\t\t\t\tcheckOffset(offset, byteLength, this.length);\n\t\t\t\t}\n\n\t\t\t\tvar val = this[offset + --byteLength];\n\t\t\t\tvar mul = 1;\n\t\t\t\twhile (byteLength > 0 && (mul *= 0x100)) {\n\t\t\t\t\tval += this[offset + --byteLength] * mul;\n\t\t\t\t}\n\n\t\t\t\treturn val;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 1, this.length);\n\t\t\t\treturn this[offset];\n\t\t\t};\n\n\t\t\tBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 2, this.length);\n\t\t\t\treturn this[offset] | this[offset + 1] << 8;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 2, this.length);\n\t\t\t\treturn this[offset] << 8 | this[offset + 1];\n\t\t\t};\n\n\t\t\tBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 4, this.length);\n\n\t\t\t\treturn (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 4, this.length);\n\n\t\t\t\treturn this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n\t\t\t};\n\n\t\t\tBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n\t\t\t\toffset = offset | 0;\n\t\t\t\tbyteLength = byteLength | 0;\n\t\t\t\tif (!noAssert) checkOffset(offset, byteLength, this.length);\n\n\t\t\t\tvar val = this[offset];\n\t\t\t\tvar mul = 1;\n\t\t\t\tvar i = 0;\n\t\t\t\twhile (++i < byteLength && (mul *= 0x100)) {\n\t\t\t\t\tval += this[offset + i] * mul;\n\t\t\t\t}\n\t\t\t\tmul *= 0x80;\n\n\t\t\t\tif (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n\t\t\t\treturn val;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n\t\t\t\toffset = offset | 0;\n\t\t\t\tbyteLength = byteLength | 0;\n\t\t\t\tif (!noAssert) checkOffset(offset, byteLength, this.length);\n\n\t\t\t\tvar i = byteLength;\n\t\t\t\tvar mul = 1;\n\t\t\t\tvar val = this[offset + --i];\n\t\t\t\twhile (i > 0 && (mul *= 0x100)) {\n\t\t\t\t\tval += this[offset + --i] * mul;\n\t\t\t\t}\n\t\t\t\tmul *= 0x80;\n\n\t\t\t\tif (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n\t\t\t\treturn val;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 1, this.length);\n\t\t\t\tif (!(this[offset] & 0x80)) return this[offset];\n\t\t\t\treturn (0xff - this[offset] + 1) * -1;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 2, this.length);\n\t\t\t\tvar val = this[offset] | this[offset + 1] << 8;\n\t\t\t\treturn val & 0x8000 ? val | 0xFFFF0000 : val;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 2, this.length);\n\t\t\t\tvar val = this[offset + 1] | this[offset] << 8;\n\t\t\t\treturn val & 0x8000 ? val | 0xFFFF0000 : val;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 4, this.length);\n\n\t\t\t\treturn this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 4, this.length);\n\n\t\t\t\treturn this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n\t\t\t};\n\n\t\t\tBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 4, this.length);\n\t\t\t\treturn ieee754.read(this, offset, true, 23, 4);\n\t\t\t};\n\n\t\t\tBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 4, this.length);\n\t\t\t\treturn ieee754.read(this, offset, false, 23, 4);\n\t\t\t};\n\n\t\t\tBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 8, this.length);\n\t\t\t\treturn ieee754.read(this, offset, true, 52, 8);\n\t\t\t};\n\n\t\t\tBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 8, this.length);\n\t\t\t\treturn ieee754.read(this, offset, false, 52, 8);\n\t\t\t};\n\n\t\t\tfunction checkInt(buf, value, offset, ext, max, min) {\n\t\t\t\tif (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance');\n\t\t\t\tif (value > max || value < min) throw new RangeError('value is out of bounds');\n\t\t\t\tif (offset + ext > buf.length) throw new RangeError('index out of range');\n\t\t\t}\n\n\t\t\tBuffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tbyteLength = byteLength | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0);\n\n\t\t\t\tvar mul = 1;\n\t\t\t\tvar i = 0;\n\t\t\t\tthis[offset] = value & 0xFF;\n\t\t\t\twhile (++i < byteLength && (mul *= 0x100)) {\n\t\t\t\t\tthis[offset + i] = value / mul & 0xFF;\n\t\t\t\t}\n\n\t\t\t\treturn offset + byteLength;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tbyteLength = byteLength | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0);\n\n\t\t\t\tvar i = byteLength - 1;\n\t\t\t\tvar mul = 1;\n\t\t\t\tthis[offset + i] = value & 0xFF;\n\t\t\t\twhile (--i >= 0 && (mul *= 0x100)) {\n\t\t\t\t\tthis[offset + i] = value / mul & 0xFF;\n\t\t\t\t}\n\n\t\t\t\treturn offset + byteLength;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n\t\t\t\tif (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n\t\t\t\tthis[offset] = value & 0xff;\n\t\t\t\treturn offset + 1;\n\t\t\t};\n\n\t\t\tfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n\t\t\t\tif (value < 0) value = 0xffff + value + 1;\n\t\t\t\tfor (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n\t\t\t\t\tbuf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBuffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value & 0xff;\n\t\t\t\t\tthis[offset + 1] = value >>> 8;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt16(this, value, offset, true);\n\t\t\t\t}\n\t\t\t\treturn offset + 2;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value >>> 8;\n\t\t\t\t\tthis[offset + 1] = value & 0xff;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt16(this, value, offset, false);\n\t\t\t\t}\n\t\t\t\treturn offset + 2;\n\t\t\t};\n\n\t\t\tfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n\t\t\t\tif (value < 0) value = 0xffffffff + value + 1;\n\t\t\t\tfor (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n\t\t\t\t\tbuf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBuffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset + 3] = value >>> 24;\n\t\t\t\t\tthis[offset + 2] = value >>> 16;\n\t\t\t\t\tthis[offset + 1] = value >>> 8;\n\t\t\t\t\tthis[offset] = value & 0xff;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt32(this, value, offset, true);\n\t\t\t\t}\n\t\t\t\treturn offset + 4;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value >>> 24;\n\t\t\t\t\tthis[offset + 1] = value >>> 16;\n\t\t\t\t\tthis[offset + 2] = value >>> 8;\n\t\t\t\t\tthis[offset + 3] = value & 0xff;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt32(this, value, offset, false);\n\t\t\t\t}\n\t\t\t\treturn offset + 4;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) {\n\t\t\t\t\tvar limit = Math.pow(2, 8 * byteLength - 1);\n\n\t\t\t\t\tcheckInt(this, value, offset, byteLength, limit - 1, -limit);\n\t\t\t\t}\n\n\t\t\t\tvar i = 0;\n\t\t\t\tvar mul = 1;\n\t\t\t\tvar sub = value < 0 ? 1 : 0;\n\t\t\t\tthis[offset] = value & 0xFF;\n\t\t\t\twhile (++i < byteLength && (mul *= 0x100)) {\n\t\t\t\t\tthis[offset + i] = (value / mul >> 0) - sub & 0xFF;\n\t\t\t\t}\n\n\t\t\t\treturn offset + byteLength;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) {\n\t\t\t\t\tvar limit = Math.pow(2, 8 * byteLength - 1);\n\n\t\t\t\t\tcheckInt(this, value, offset, byteLength, limit - 1, -limit);\n\t\t\t\t}\n\n\t\t\t\tvar i = byteLength - 1;\n\t\t\t\tvar mul = 1;\n\t\t\t\tvar sub = value < 0 ? 1 : 0;\n\t\t\t\tthis[offset + i] = value & 0xFF;\n\t\t\t\twhile (--i >= 0 && (mul *= 0x100)) {\n\t\t\t\t\tthis[offset + i] = (value / mul >> 0) - sub & 0xFF;\n\t\t\t\t}\n\n\t\t\t\treturn offset + byteLength;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n\t\t\t\tif (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n\t\t\t\tif (value < 0) value = 0xff + value + 1;\n\t\t\t\tthis[offset] = value & 0xff;\n\t\t\t\treturn offset + 1;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value & 0xff;\n\t\t\t\t\tthis[offset + 1] = value >>> 8;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt16(this, value, offset, true);\n\t\t\t\t}\n\t\t\t\treturn offset + 2;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value >>> 8;\n\t\t\t\t\tthis[offset + 1] = value & 0xff;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt16(this, value, offset, false);\n\t\t\t\t}\n\t\t\t\treturn offset + 2;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value & 0xff;\n\t\t\t\t\tthis[offset + 1] = value >>> 8;\n\t\t\t\t\tthis[offset + 2] = value >>> 16;\n\t\t\t\t\tthis[offset + 3] = value >>> 24;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt32(this, value, offset, true);\n\t\t\t\t}\n\t\t\t\treturn offset + 4;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\t\t\t\tif (value < 0) value = 0xffffffff + value + 1;\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value >>> 24;\n\t\t\t\t\tthis[offset + 1] = value >>> 16;\n\t\t\t\t\tthis[offset + 2] = value >>> 8;\n\t\t\t\t\tthis[offset + 3] = value & 0xff;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt32(this, value, offset, false);\n\t\t\t\t}\n\t\t\t\treturn offset + 4;\n\t\t\t};\n\n\t\t\tfunction checkIEEE754(buf, value, offset, ext, max, min) {\n\t\t\t\tif (value > max || value < min) throw new RangeError('value is out of bounds');\n\t\t\t\tif (offset + ext > buf.length) throw new RangeError('index out of range');\n\t\t\t\tif (offset < 0) throw new RangeError('index out of range');\n\t\t\t}\n\n\t\t\tfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n\t\t\t\tif (!noAssert) {\n\t\t\t\t\tcheckIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n\t\t\t\t}\n\t\t\t\tieee754.write(buf, value, offset, littleEndian, 23, 4);\n\t\t\t\treturn offset + 4;\n\t\t\t}\n\n\t\t\tBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n\t\t\t\treturn writeFloat(this, value, offset, true, noAssert);\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n\t\t\t\treturn writeFloat(this, value, offset, false, noAssert);\n\t\t\t};\n\n\t\t\tfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n\t\t\t\tif (!noAssert) {\n\t\t\t\t\tcheckIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n\t\t\t\t}\n\t\t\t\tieee754.write(buf, value, offset, littleEndian, 52, 8);\n\t\t\t\treturn offset + 8;\n\t\t\t}\n\n\t\t\tBuffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n\t\t\t\treturn writeDouble(this, value, offset, true, noAssert);\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n\t\t\t\treturn writeDouble(this, value, offset, false, noAssert);\n\t\t\t};\n\n\t\t\tBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n\t\t\t\tif (!start) start = 0;\n\t\t\t\tif (!end && end !== 0) end = this.length;\n\t\t\t\tif (targetStart >= target.length) targetStart = target.length;\n\t\t\t\tif (!targetStart) targetStart = 0;\n\t\t\t\tif (end > 0 && end < start) end = start;\n\n\t\t\t\tif (end === start) return 0;\n\t\t\t\tif (target.length === 0 || this.length === 0) return 0;\n\n\t\t\t\tif (targetStart < 0) {\n\t\t\t\t\tthrow new RangeError('targetStart out of bounds');\n\t\t\t\t}\n\t\t\t\tif (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n\t\t\t\tif (end < 0) throw new RangeError('sourceEnd out of bounds');\n\n\t\t\t\tif (end > this.length) end = this.length;\n\t\t\t\tif (target.length - targetStart < end - start) {\n\t\t\t\t\tend = target.length - targetStart + start;\n\t\t\t\t}\n\n\t\t\t\tvar len = end - start;\n\t\t\t\tvar i;\n\n\t\t\t\tif (this === target && start < targetStart && targetStart < end) {\n\t\t\t\t\tfor (i = len - 1; i >= 0; i--) {\n\t\t\t\t\t\ttarget[i + targetStart] = this[i + start];\n\t\t\t\t\t}\n\t\t\t\t} else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\t\ttarget[i + targetStart] = this[i + start];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tUint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n\t\t\t\t}\n\n\t\t\t\treturn len;\n\t\t\t};\n\n\t\t\tBuffer.prototype.fill = function fill(value, start, end) {\n\t\t\t\tif (!value) value = 0;\n\t\t\t\tif (!start) start = 0;\n\t\t\t\tif (!end) end = this.length;\n\n\t\t\t\tif (end < start) throw new RangeError('end < start');\n\n\t\t\t\tif (end === start) return;\n\t\t\t\tif (this.length === 0) return;\n\n\t\t\t\tif (start < 0 || start >= this.length) throw new RangeError('start out of bounds');\n\t\t\t\tif (end < 0 || end > this.length) throw new RangeError('end out of bounds');\n\n\t\t\t\tvar i;\n\t\t\t\tif (typeof value === 'number') {\n\t\t\t\t\tfor (i = start; i < end; i++) {\n\t\t\t\t\t\tthis[i] = value;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar bytes = utf8ToBytes(value.toString());\n\t\t\t\t\tvar len = bytes.length;\n\t\t\t\t\tfor (i = start; i < end; i++) {\n\t\t\t\t\t\tthis[i] = bytes[i % len];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t\t};\n\n\t\t\tvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\n\t\t\tfunction base64clean(str) {\n\t\t\t\tstr = stringtrim(str).replace(INVALID_BASE64_RE, '');\n\n\t\t\t\tif (str.length < 2) return '';\n\n\t\t\t\twhile (str.length % 4 !== 0) {\n\t\t\t\t\tstr = str + '=';\n\t\t\t\t}\n\t\t\t\treturn str;\n\t\t\t}\n\n\t\t\tfunction stringtrim(str) {\n\t\t\t\tif (str.trim) return str.trim();\n\t\t\t\treturn str.replace(/^\\s+|\\s+$/g, '');\n\t\t\t}\n\n\t\t\tfunction toHex(n) {\n\t\t\t\tif (n < 16) return '0' + n.toString(16);\n\t\t\t\treturn n.toString(16);\n\t\t\t}\n\n\t\t\tfunction utf8ToBytes(string, units) {\n\t\t\t\tunits = units || Infinity;\n\t\t\t\tvar codePoint;\n\t\t\t\tvar length = string.length;\n\t\t\t\tvar leadSurrogate = null;\n\t\t\t\tvar bytes = [];\n\n\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\tcodePoint = string.charCodeAt(i);\n\n\t\t\t\t\tif (codePoint > 0xD7FF && codePoint < 0xE000) {\n\t\t\t\t\t\tif (!leadSurrogate) {\n\t\t\t\t\t\t\tif (codePoint > 0xDBFF) {\n\t\t\t\t\t\t\t\tif ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t} else if (i + 1 === length) {\n\t\t\t\t\t\t\t\tif ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tleadSurrogate = codePoint;\n\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (codePoint < 0xDC00) {\n\t\t\t\t\t\t\tif ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n\t\t\t\t\t\t\tleadSurrogate = codePoint;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcodePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n\t\t\t\t\t} else if (leadSurrogate) {\n\t\t\t\t\t\tif ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n\t\t\t\t\t}\n\n\t\t\t\t\tleadSurrogate = null;\n\n\t\t\t\t\tif (codePoint < 0x80) {\n\t\t\t\t\t\tif ((units -= 1) < 0) break;\n\t\t\t\t\t\tbytes.push(codePoint);\n\t\t\t\t\t} else if (codePoint < 0x800) {\n\t\t\t\t\t\tif ((units -= 2) < 0) break;\n\t\t\t\t\t\tbytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n\t\t\t\t\t} else if (codePoint < 0x10000) {\n\t\t\t\t\t\tif ((units -= 3) < 0) break;\n\t\t\t\t\t\tbytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n\t\t\t\t\t} else if (codePoint < 0x110000) {\n\t\t\t\t\t\tif ((units -= 4) < 0) break;\n\t\t\t\t\t\tbytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('Invalid code point');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn bytes;\n\t\t\t}\n\n\t\t\tfunction asciiToBytes(str) {\n\t\t\t\tvar byteArray = [];\n\t\t\t\tfor (var i = 0; i < str.length; i++) {\n\t\t\t\t\tbyteArray.push(str.charCodeAt(i) & 0xFF);\n\t\t\t\t}\n\t\t\t\treturn byteArray;\n\t\t\t}\n\n\t\t\tfunction utf16leToBytes(str, units) {\n\t\t\t\tvar c, hi, lo;\n\t\t\t\tvar byteArray = [];\n\t\t\t\tfor (var i = 0; i < str.length; i++) {\n\t\t\t\t\tif ((units -= 2) < 0) break;\n\n\t\t\t\t\tc = str.charCodeAt(i);\n\t\t\t\t\thi = c >> 8;\n\t\t\t\t\tlo = c % 256;\n\t\t\t\t\tbyteArray.push(lo);\n\t\t\t\t\tbyteArray.push(hi);\n\t\t\t\t}\n\n\t\t\t\treturn byteArray;\n\t\t\t}\n\n\t\t\tfunction base64ToBytes(str) {\n\t\t\t\treturn base64.toByteArray(base64clean(str));\n\t\t\t}\n\n\t\t\tfunction blitBuffer(src, dst, offset, length) {\n\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\tif (i + offset >= dst.length || i >= src.length) break;\n\t\t\t\t\tdst[i + offset] = src[i];\n\t\t\t\t}\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}).call(this, typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n\t}, { \"base64-js\": 38, \"ieee754\": 39, \"isarray\": 40 }], 38: [function (require, module, exports) {\n\t\t;(function (exports) {\n\t\t\t'use strict';\n\n\t\t\tvar lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n\t\t\tvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\n\n\t\t\tvar PLUS = '+'.charCodeAt(0);\n\t\t\tvar SLASH = '/'.charCodeAt(0);\n\t\t\tvar NUMBER = '0'.charCodeAt(0);\n\t\t\tvar LOWER = 'a'.charCodeAt(0);\n\t\t\tvar UPPER = 'A'.charCodeAt(0);\n\t\t\tvar PLUS_URL_SAFE = '-'.charCodeAt(0);\n\t\t\tvar SLASH_URL_SAFE = '_'.charCodeAt(0);\n\n\t\t\tfunction decode(elt) {\n\t\t\t\tvar code = elt.charCodeAt(0);\n\t\t\t\tif (code === PLUS || code === PLUS_URL_SAFE) return 62;\n\t\t\t\tif (code === SLASH || code === SLASH_URL_SAFE) return 63;\n\t\t\t\tif (code < NUMBER) return -1;\n\t\t\t\tif (code < NUMBER + 10) return code - NUMBER + 26 + 26;\n\t\t\t\tif (code < UPPER + 26) return code - UPPER;\n\t\t\t\tif (code < LOWER + 26) return code - LOWER + 26;\n\t\t\t}\n\n\t\t\tfunction b64ToByteArray(b64) {\n\t\t\t\tvar i, j, l, tmp, placeHolders, arr;\n\n\t\t\t\tif (b64.length % 4 > 0) {\n\t\t\t\t\tthrow new Error('Invalid string. Length must be a multiple of 4');\n\t\t\t\t}\n\n\t\t\t\tvar len = b64.length;\n\t\t\t\tplaceHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0;\n\n\t\t\t\tarr = new Arr(b64.length * 3 / 4 - placeHolders);\n\n\t\t\t\tl = placeHolders > 0 ? b64.length - 4 : b64.length;\n\n\t\t\t\tvar L = 0;\n\n\t\t\t\tfunction push(v) {\n\t\t\t\t\tarr[L++] = v;\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t\t\t\t\ttmp = decode(b64.charAt(i)) << 18 | decode(b64.charAt(i + 1)) << 12 | decode(b64.charAt(i + 2)) << 6 | decode(b64.charAt(i + 3));\n\t\t\t\t\tpush((tmp & 0xFF0000) >> 16);\n\t\t\t\t\tpush((tmp & 0xFF00) >> 8);\n\t\t\t\t\tpush(tmp & 0xFF);\n\t\t\t\t}\n\n\t\t\t\tif (placeHolders === 2) {\n\t\t\t\t\ttmp = decode(b64.charAt(i)) << 2 | decode(b64.charAt(i + 1)) >> 4;\n\t\t\t\t\tpush(tmp & 0xFF);\n\t\t\t\t} else if (placeHolders === 1) {\n\t\t\t\t\ttmp = decode(b64.charAt(i)) << 10 | decode(b64.charAt(i + 1)) << 4 | decode(b64.charAt(i + 2)) >> 2;\n\t\t\t\t\tpush(tmp >> 8 & 0xFF);\n\t\t\t\t\tpush(tmp & 0xFF);\n\t\t\t\t}\n\n\t\t\t\treturn arr;\n\t\t\t}\n\n\t\t\tfunction uint8ToBase64(uint8) {\n\t\t\t\tvar i;\n\t\t\t\tvar extraBytes = uint8.length % 3;\n\t\t\t\tvar output = '';\n\t\t\t\tvar temp, length;\n\n\t\t\t\tfunction encode(num) {\n\t\t\t\t\treturn lookup.charAt(num);\n\t\t\t\t}\n\n\t\t\t\tfunction tripletToBase64(num) {\n\t\t\t\t\treturn encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F);\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t\t\t\t\ttemp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2];\n\t\t\t\t\toutput += tripletToBase64(temp);\n\t\t\t\t}\n\n\t\t\t\tswitch (extraBytes) {\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\ttemp = uint8[uint8.length - 1];\n\t\t\t\t\t\toutput += encode(temp >> 2);\n\t\t\t\t\t\toutput += encode(temp << 4 & 0x3F);\n\t\t\t\t\t\toutput += '==';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\ttemp = (uint8[uint8.length - 2] << 8) + uint8[uint8.length - 1];\n\t\t\t\t\t\toutput += encode(temp >> 10);\n\t\t\t\t\t\toutput += encode(temp >> 4 & 0x3F);\n\t\t\t\t\t\toutput += encode(temp << 2 & 0x3F);\n\t\t\t\t\t\toutput += '=';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn output;\n\t\t\t}\n\n\t\t\texports.toByteArray = b64ToByteArray;\n\t\t\texports.fromByteArray = uint8ToBase64;\n\t\t})(typeof exports === 'undefined' ? this.base64js = {} : exports);\n\t}, {}], 39: [function (require, module, exports) {\n\t\texports.read = function (buffer, offset, isLE, mLen, nBytes) {\n\t\t\tvar e, m;\n\t\t\tvar eLen = nBytes * 8 - mLen - 1;\n\t\t\tvar eMax = (1 << eLen) - 1;\n\t\t\tvar eBias = eMax >> 1;\n\t\t\tvar nBits = -7;\n\t\t\tvar i = isLE ? nBytes - 1 : 0;\n\t\t\tvar d = isLE ? -1 : 1;\n\t\t\tvar s = buffer[offset + i];\n\n\t\t\ti += d;\n\n\t\t\te = s & (1 << -nBits) - 1;\n\t\t\ts >>= -nBits;\n\t\t\tnBits += eLen;\n\t\t\tfor (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t\t\tm = e & (1 << -nBits) - 1;\n\t\t\te >>= -nBits;\n\t\t\tnBits += mLen;\n\t\t\tfor (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t\t\tif (e === 0) {\n\t\t\t\te = 1 - eBias;\n\t\t\t} else if (e === eMax) {\n\t\t\t\treturn m ? NaN : (s ? -1 : 1) * Infinity;\n\t\t\t} else {\n\t\t\t\tm = m + Math.pow(2, mLen);\n\t\t\t\te = e - eBias;\n\t\t\t}\n\t\t\treturn (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n\t\t};\n\n\t\texports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n\t\t\tvar e, m, c;\n\t\t\tvar eLen = nBytes * 8 - mLen - 1;\n\t\t\tvar eMax = (1 << eLen) - 1;\n\t\t\tvar eBias = eMax >> 1;\n\t\t\tvar rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n\t\t\tvar i = isLE ? 0 : nBytes - 1;\n\t\t\tvar d = isLE ? 1 : -1;\n\t\t\tvar s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n\n\t\t\tvalue = Math.abs(value);\n\n\t\t\tif (isNaN(value) || value === Infinity) {\n\t\t\t\tm = isNaN(value) ? 1 : 0;\n\t\t\t\te = eMax;\n\t\t\t} else {\n\t\t\t\te = Math.floor(Math.log(value) / Math.LN2);\n\t\t\t\tif (value * (c = Math.pow(2, -e)) < 1) {\n\t\t\t\t\te--;\n\t\t\t\t\tc *= 2;\n\t\t\t\t}\n\t\t\t\tif (e + eBias >= 1) {\n\t\t\t\t\tvalue += rt / c;\n\t\t\t\t} else {\n\t\t\t\t\tvalue += rt * Math.pow(2, 1 - eBias);\n\t\t\t\t}\n\t\t\t\tif (value * c >= 2) {\n\t\t\t\t\te++;\n\t\t\t\t\tc /= 2;\n\t\t\t\t}\n\n\t\t\t\tif (e + eBias >= eMax) {\n\t\t\t\t\tm = 0;\n\t\t\t\t\te = eMax;\n\t\t\t\t} else if (e + eBias >= 1) {\n\t\t\t\t\tm = (value * c - 1) * Math.pow(2, mLen);\n\t\t\t\t\te = e + eBias;\n\t\t\t\t} else {\n\t\t\t\t\tm = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n\t\t\t\t\te = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n\t\t\te = e << mLen | m;\n\t\t\teLen += mLen;\n\t\t\tfor (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n\t\t\tbuffer[offset + i - d] |= s * 128;\n\t\t};\n\t}, {}], 40: [function (require, module, exports) {\n\t\tvar toString = {}.toString;\n\n\t\tmodule.exports = Array.isArray || function (arr) {\n\t\t\treturn toString.call(arr) == '[object Array]';\n\t\t};\n\t}, {}] }, {}, [36]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PANOLENS);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(58), __webpack_require__(323)(module), __webpack_require__(23)))\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export getSize */\n/* unused harmony export getCenter */\n/* unused harmony export toIndexed */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(59);\n\n\nvar box = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Box3\"]();\n\nfunction getSize(object) {\n\n    box.setFromObject(object);\n\n    return box.getSize();\n}\n\nfunction getCenter(object) {\n\n    box.setFromObject(object);\n\n    return box.getCenter();\n}\n\nfunction lightsDiff(lights, oldLights) {}\n\nfunction toIndexed(bufferGeometry) {\n\n    var raw_positions = bufferGeometry.getAttribute('position').array;\n\n    var raw_uvs;\n    var hasUV = bufferGeometry.getAttribute('uv') !== undefined;\n    if (hasUV) raw_uvs = bufferGeometry.getAttribute('uv').array;\n\n    var raw_normals;\n    var hasNormal = bufferGeometry.getAttribute('normal') !== undefined;\n    if (hasNormal) raw_normals = bufferGeometry.getAttribute('normal').array;\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = [];\n\n    var face, face_normalss, face_uvs, tmp_indices;\n\n    var v0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector3\"]();\n    var v1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector3\"]();\n    var v2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector3\"]();\n\n    var n0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector3\"]();\n    var n1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector3\"]();\n    var n2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector3\"]();\n\n    var uv0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector2\"]();\n    var uv1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector2\"]();\n    var uv2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector2\"]();\n\n    for (var i = 0; i < raw_positions.length; i += 9) {\n\n        v0.x = raw_positions[i];\n        v0.y = raw_positions[i + 1];\n        v0.z = raw_positions[i + 2];\n\n        v1.x = raw_positions[i + 3];\n        v1.y = raw_positions[i + 4];\n        v1.z = raw_positions[i + 5];\n\n        v2.x = raw_positions[i + 6];\n        v2.y = raw_positions[i + 7];\n        v2.z = raw_positions[i + 8];\n\n        face = [v0, v1, v2];\n\n        if (hasNormal) {\n\n            n0.x = raw_normals[i];\n            n0.y = raw_normals[i + 1];\n            n0.z = raw_normals[i + 2];\n\n            n1.x = raw_normals[i + 3];\n            n1.y = raw_normals[i + 4];\n            n1.z = raw_normals[i + 5];\n\n            n2.x = raw_normals[i + 6];\n            n2.y = raw_normals[i + 7];\n            n2.z = raw_normals[i + 8];\n\n            face_normalss = [n0, n1, n2];\n        }\n\n        if (hasUV) {\n\n            uv0.x = raw_uvs[i];\n            uv0.y = raw_uvs[i + 1];\n\n            uv1.x = raw_uvs[i + 2];\n            uv1.y = raw_uvs[i + 3];\n\n            uv2.x = raw_uvs[i + 4];\n            uv2.y = raw_uvs[i + 5];\n\n            face_uvs = [uv0, uv1, uv2];\n        }\n\n        tmp_indices = [];\n\n        face.forEach(function (v, i) {\n\n            var id = exists(v, vertices);\n            if (id == -1) {\n\n                id = vertices.length;\n                vertices.push(v.clone());\n\n                if (hasNormal) normals.push(face_normalss[i].clone());\n                if (hasUV) uvs.push(face_uvs[i].clone());\n            }\n            tmp_indices.push(id);\n        });\n\n        indices.push(tmp_indices[0], tmp_indices[1], tmp_indices[2]);\n    }\n\n    var positionBuffer = new Float32Array(vertices.length * 3);\n    if (hasNormal) var normalBuffer = new Float32Array(vertices.length * 3);\n    if (hasUV) var uvBuffer = new Float32Array(vertices.length * 2);\n\n    var i2 = 0;\n    var i3 = 0;\n    for (i = 0; i < vertices.length; i++) {\n\n        i3 = i * 3;\n\n        positionBuffer[i3] = vertices[i].x;\n        positionBuffer[i3 + 1] = vertices[i].y;\n        positionBuffer[i3 + 2] = vertices[i].z;\n\n        if (hasNormal) {\n\n            normalBuffer[i3] = normals[i].x;\n            normalBuffer[i3 + 1] = normals[i].y;\n            normalBuffer[i3 + 2] = normals[i].z;\n        }\n\n        if (hasUV) {\n\n            i2 = i * 2;\n            uvBuffer[i2] = uvs[i].x;\n            uvBuffer[i2 + 1] = uvs[i].y;\n        }\n    }\n\n    bufferGeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"BufferAttribute\"](positionBuffer, 3));\n    if (hasNormal) bufferGeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"BufferAttribute\"](normalBuffer, 3));\n    if (hasUV) bufferGeometry.addAttribute('uv', new __WEBPACK_IMPORTED_MODULE_0_three__[\"BufferAttribute\"](uvBuffer, 2));\n    bufferGeometry.setIndex(new __WEBPACK_IMPORTED_MODULE_0_three__[\"BufferAttribute\"](new Uint32Array(indices), 1));\n    return bufferGeometry;\n\n    function exists(v, vertices) {\n        for (var i = 0; i < vertices.length; i++) {\n            if (v.equals(vertices[i])) return i;\n        }\n        return -1;\n    }\n}\n\n\n\n/***/ })\n\n},[63]);\n\n\n// WEBPACK FOOTER //\n// assets/js/app.7c136bec1a338e7c3d6c.js","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:70%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:30%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .hljs{background:transparent}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-213df8bf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/components/demo-block.vue\n// module id = 126\n// module chunks = 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.demos,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.demos-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.demos-header .title{font-weight:700;font-size:18px;display:inline-block}.demos-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.demos-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.demos-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.demos-menu .demos-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.demos-menu .demos-menu-item>a{display:block;width:100%;height:100%}.demos-menu .demos-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.demos-menu .demos-menu-item:hover>a{color:#39f}.demos-pages{height:100%;overflow:hidden}.demo-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.demo-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;animation:loading-rotate .75s 0s linear infinite}.demo-loading:after,.demo-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.demo-loading:after{height:100%;width:0}@keyframes loading-rotate{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(.6)}to{transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-223dbf78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/App.vue\n// module id = 127\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-cube-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29108898\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-cube-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-cube-pano.vue\n// module id = 309\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a5bfa54\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-pano.vue\n// module id = 310\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-video-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-32faa3e6\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-video-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-video-pano.vue\n// module id = 311\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n                \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)))]), _vm._v(\"\\n                \")])])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-213df8bf\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/components/demo-block.vue\n// module id = 312\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demos\"\n  }, [_c('div', {\n    staticClass: \"demos-content\"\n  }, [_c('ul', {\n    staticClass: \"demos-menu\"\n  }, [_c('li', {\n    staticClass: \"demos-menu-title\"\n  }, [_vm._v(\"demos\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-pano\"\n    }\n  }, [_vm._v(\"basic panorama\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-cube-pano\"\n    }\n  }, [_vm._v(\"Cube Faces\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demos-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-223dbf78\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/App.vue\n// module id = 313\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"cube\",\n      \"source\": \"assets/faces/pano_%s.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-29108898\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-cube-pano.vue\n// module id = 314\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"source\": \"assets/equirectangular.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a5bfa54\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-pano.vue\n// module id = 315\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"src\": \"./../assets/equirectangular.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-32faa3e6\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-video-pano.vue\n// module id = 316\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-7974fb6b\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Pano.vue\n// module id = 317\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-213df8bf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./demo-block.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"56304fc1\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-213df8bf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/components/demo-block.vue\n// module id = 319\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-223dbf78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./App.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"48e2ad6a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-223dbf78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/App.vue\n// module id = 320\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-213df8bf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./demo-block.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-block.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-213df8bf\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-block.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/components/demo-block.vue\n// module id = 36\n// module chunks = 1","var Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Pano.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7974fb6b\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Pano.vue\n// module id = 37\n// module chunks = 1","import Vue from 'vue'\nimport Router from 'vue-router'\n\nimport { pages } from '../pages'\n\nVue.use( Router )\n\nconst routes = pages.map( page => {\n    \n    const name = page.name;\n\n    return {\n        path: `/${ name }`,\n        name,\n        component: page\n    }\n} )\n\nconsole.log(routes);\n\nroutes.push( {\n    path: '*',\n    redirect: '/demo-pano'\n} )\n\nexport default new Router( { routes } )\n\n\n// WEBPACK FOOTER //\n// ./demos/router/index.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-223dbf78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-223dbf78\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/App.vue\n// module id = 62\n// module chunks = 1","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\nnew Vue({\n  el: '#app',\n  router,\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./demos/index.js","import DemoPano from './demo-pano'\nimport DemoCubePano from './demo-cube-pano'\nimport DemoVideoPano from './demo-video-pano'\n\nconst pages = [\n    DemoPano,\n    DemoCubePano,\n    DemoVideoPano\n]\n\nexport { pages };\n\n\n\n// WEBPACK FOOTER //\n// ./demos/pages/index.js","<template>\n    <div class=\"demos\">\n        <div class=\"demos-content\"> \n            <ul class=\"demos-menu\">\n                <li class=\"demos-menu-title\">demos</li>\n                <li class=\"demos-menu-item\">\n                    <router-link to=\"demo-pano\">basic panorama</router-link>\n                </li>\n                <li class=\"demos-menu-item\">\n                    <router-link to=\"demo-cube-pano\">Cube Faces</router-link>\n                </li>\n            </ul>\n   \n            <div class=\"demos-pages\">\n                <router-view></router-view>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    name: 'app'\n}\n</script>\n<style>\n* {\n    margin: 0;\n    border: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nul, ol, li {\n    list-style: none;\n}\n\na {\n    color: #657180;\n    text-decoration: none;\n}\n\nhtml, body, .demos {\n    width: 100%;\n    height: 100%;\n    color: #657180;\n}\n\nbody {\n    background: #eee;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n                 \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\",\n                 SimSun, sans-serif;\n    background: #fff;\n}\n\n.demos-header {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    background: #f3f6fb;\n    text-shadow: 0 1px 0 rgba(255,255,255,0.5);\n    border-bottom: solid 1px #dfe2e7;\n    padding: 15px 15px 15px 30px;\n    line-height: 20px;\n}\n\n.demos-header .title {\n    font-weight: bold;\n    font-size: 18px;\n    display: inline-block;\n}\n\n.demos-header .github {\n    color: #39f;\n    display: inline-block;\n    font-size: 12px;\n    float: right;\n}\n\n.demos-content {\n    width: 100%;\n    height: 100%;\n    padding-top: 52px;\n    overflow: hidden;\n}\n\n.demos-menu {\n    float: left;\n    width: 230px;\n    height: 100%;\n    border-right: solid 1px #dfe2e7;\n    padding: 10px 30px;\n}\n\n.demos-menu .demos-menu-item {\n    display: block;\n    width: 100%;\n    height: 30px;\n    line-height: 30px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.demos-menu .demos-menu-item > a {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.demos-menu .demos-menu-title {\n    display: block;\n    width: 100%;\n    padding: 6px 0;\n    margin-top: 10px;\n    font-size: 14px;\n    font-weight: bold;\n}\n\n.demos-menu .demos-menu-item:hover > a {\n    color: #39f;\n}\n\n.demos-pages {\n    height: 100%;\n    overflow: hidden;\n}\n\n.demo-loading {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n}\n.demo-loading::before {\n    content: '';\n    border-radius: 100%;\n    margin: 2px;\n    border: 3px solid #20a0ff;\n    border-bottom-color: transparent;\n    height: 36px;\n    width: 36px;\n    display: inline-block;\n    animation: loading-rotate .75s 0s linear infinite;\n    vertical-align: middle;\n}\n\n.demo-loading::after {\n    content: '';\n    display: inline-block;\n    height: 100%;\n    width: 0;\n    vertical-align: middle;\n}\n\n@keyframes loading-rotate{\n    0% {\n        transform: rotate(0) scale(1);\n    }\n    50% {\n        transform: rotate(180deg) scale(.6);\n    }\n    100% {\n        transform: rotate(360deg) scale(1);\n    }\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?8e9729ac","<template>\n    <div class=\"demo-block\">\n        <div class=\"demo-block-preview\">\n            <slot name=\"preview\"></slot>\n        </div>\n        <div class=\"demo-block-code\">\n            <div class=\"demo-block-code-box\">\n                <h3>Vue Component & Webpack</h3>\n                <div class=\"demo-block-code-box-content\">\n                    <pre>\n                        <code ref=\"vueCode\" class=\"html\">{{ vueCode | code }}</code>\n                    </pre>\n                </div>\n            </div>\n            <div class=\"demo-block-code-box\">\n                <h3>HTML & JS</h3>\n                <div class=\"demo-block-code-box-content\">\n                    <pre>\n                        <code ref=\"htmlCode\" class=\"html\">{{ htmlCode | code }}</code>\n                    </pre>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport 'highlight.js/styles/github.css';\nimport hljs from 'highlight.js'\n\nconst codeHandler = code => {\n    const scripts = `<script src=\"vue.js\"><\\/script>\n    <script src=\"vue-vr.min.js\"><\\/script>`;\n\n    return code.replace( /#scripts#/ig, scripts );\n}\n\nexport default {\n    name: 'app',\n    props: {\n        vueCode: String,\n        htmlCode: {\n            type: String,\n            default: '// TODO'\n        }\n    },\n    mounted () {\n        hljs.highlightBlock( this.$refs.vueCode );\n        hljs.highlightBlock( this.$refs.htmlCode );\n    },\n    data () {\n    \treturn {}\n    },\n    filters: {\n        code ( val ) {\n            return codeHandler( val );\n        }\n    },\n    components: {\n\n    }\n}\n</script>\n<style>\n    .demo-block {\n        width: 100%;\n        height: 100%;\n        background-color: #fff;\n        border-radius: 3px;\n    }\n\n    .demo-block .demo-block-preview {\n        width: 70%;\n        height: 100%;\n        float: left;\n        position: relative;\n    }\n\n    .demo-block .demo-block-code {\n        width: 30%;\n        height: 100%;\n        background: #f9fafc;\n        border-left: solid 1px #dfe2e7;\n        font-size: 13px;\n        float: left;\n    }\n\n\n    .demo-block .demo-block-code pre code {\n        font: normal 10pt Consolas, Monaco, monospace;\n    }\n\n\n    .demo-block .demo-block-code .demo-block-code-box {\n        width: 100%;\n        height: 50%;\n        position: relative;\n        overflow: hidden;\n    }\n\n    .demo-block .demo-block-code-box::after {\n        content: '';\n        display: block;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        width: 90%;\n        height: 1px;\n        background: -webkit-linear-gradient(left, #dfe2e7 80%, rgba(223,226,231,0) 100%);\n    }\n\n    .demo-block .demo-block-code-box h3 {\n        width: 100%;\n        padding: 10px 20px;\n        font-size: 16px;\n        font-weight: bold;\n        position: absolute;\n    }\n\n    .demo-block .demo-block-code-box-content {\n        position: absolute;\n        top: 40px;\n        bottom: 10px;\n        left: 20px;\n        right: 20px;\n        overflow: auto;\n    }\n\n    .demo-block .hljs {\n        background: transparent;\n    }\n\n    .demo-block .demo-block-code code {\n        position: absolute;\n        top: 0;\n        left: 0;\n    }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// demo-block.vue?7b216aa6","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <Pano\n                @on-load=\"onLoad\"\n                type='cube'\n                source=\"assets/faces/pano_%s.jpg\"></Pano>\n            <div class=\"demo-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport Pano from '../../src/Pano.vue'\n\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        type='cube'\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\n</template>\n<script>\n    import { Pano } from 'vuejs-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='cube'\n            source=\"assets/faces/pano_%s.jpg\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-cube-pano',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano,\n        DemoBlock\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-cube-pano.vue?0ece2525","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <Pano\n                @on-load=\"onLoad\"\n                source=\"assets/equirectangular.jpg\"></Pano>\n            <div class=\"demo-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport Pano from '../../src/Pano.vue'\n\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        src=\"assets/equirectangular.jpg\">\n    </Pano>\n</template>\n\n<script>\n    import { Pano } from 'vue-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='cube'\n            source=\"assets/equirectangular.jpg\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-pano',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano,\n        DemoBlock\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-pano.vue?6898858d","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <Pano\n                @on-load=\"onLoad\"\n                src=\"./../assets/equirectangular.jpg\"></Pano>\n            <div class=\"demo-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport Pano from '../../src/Pano.vue'\n\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        src=\"./../assets/equirectangular.jpg\">\n    </Pano>\n</template>\n\n<script>\n    import { Pano } from 'vue-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='cube'\n            source=\"./../assets/equirectangular.jpg\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-video-pano',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano,\n        DemoBlock\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-video-pano.vue?58b12380","<template>\n    <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">    \n    </div>\n</template>\n\n<script>\nimport { getSize, getCenter } from \"./util\";\nimport PanoLens from \"./lib/panolens\";\n\nexport default {\n  props: {\n    source: {\n      type: String\n    },\n    type:{\n        type:String\n    },\n    width: {\n      type: Number\n    },\n    height: {\n      type: Number\n    }\n  },\n  data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      viewer: null,\n      panorama:null\n    };\n  },\n  created() {\n    window.addEventListener(\"resize\", this.onResize, false);\n  },\n  mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new PanoLens.Viewer({\n      container: this.$el\n    });\n\n    console.log(this.source);\n    this.loadPano();\n  },\n  watch: {\n    source() {\n      if (!this.viewer) return;\n      if (!this.panorama) return;\n      this.loadPano();\n    }\n  },\n  methods: {\n    onResize() {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    loadPano(){\n        if(!this.source) return;\n\n        switch(this.type){\n            case 'cube':\n                var l = this.source.replace('%s','l');\n                var f = this.source.replace('%s','f');\n                var r = this.source.replace('%s','r');\n                var b = this.source.replace('%s','b');\n                var u = this.source.replace('%s','u');\n                var d = this.source.replace('%s','d');\n                this.panorama = new PanoLens.CubePanorama([r,l,u,d,f,b]);\n                break;\n            default:\n                this.panorama = new PanoLens.ImagePanorama(this.source);\n                break;\n        }\n\n        this.panorama.y = Math.PI/2.;\n        \n        this.viewer.add(this.panorama);\n        this.$emit(\"on-load\");\n    }\n  }\n};\n</script>\n\n\n// WEBPACK FOOTER //\n// Pano.vue?3fe19c3e","import * as THREE from 'three';\n\n/**\n * Panolens.js\n * @author pchen66\n * @namespace PANOLENS\n */\n\nvar PANOLENS = { REVISION: '9' };\n;/*! npm.im/iphone-inline-video 2.2.2 */\nvar enableInlineVideo=function(){\"use strict\";/*! npm.im/intervalometer */\nfunction e(e,i,n,r){function t(n){d=i(t,r),e(n-(a||n)),a=n}var d,a;return{start:function(){d||t(0)},stop:function(){n(d),d=null,a=0}}}function i(i){return e(i,requestAnimationFrame,cancelAnimationFrame)}function n(e,i,n){function r(r){n&&!n(e,i)||r.stopImmediatePropagation()}return e.addEventListener(i,r),r}function r(e,i,n,r){function t(){return n[i]}function d(e){n[i]=e}r&&d(e[i]),Object.defineProperty(e,i,{get:t,set:d})}function t(e,i,n){n.addEventListener(i,function(){return e.dispatchEvent(new Event(i))})}function d(e,i){Promise.resolve().then(function(){e.dispatchEvent(new Event(i))})}function a(e){var i=new Audio;return t(e,\"play\",i),t(e,\"playing\",i),t(e,\"pause\",i),i.crossOrigin=e.crossOrigin,i.src=e.src||e.currentSrc||\"data:\",i}function u(e,i,n){(m||0)+200<Date.now()&&(e[h]=!0,m=Date.now()),n||(e.currentTime=i),k[++T%3]=100*i|0}function o(e){return e.driver.currentTime>=e.video.duration}function s(e){var i=this;i.video.readyState>=i.video.HAVE_FUTURE_DATA?(i.hasAudio||(i.driver.currentTime=i.video.currentTime+e*i.video.playbackRate/1e3,i.video.loop&&o(i)&&(i.driver.currentTime=0)),u(i.video,i.driver.currentTime)):i.video.networkState===i.video.NETWORK_IDLE&&0===i.video.buffered.length&&i.video.load(),i.video.ended&&(delete i.video[h],i.video.pause(!0))}function c(){var e=this,i=e[g];if(e.webkitDisplayingFullscreen)return void e[E]();\"data:\"!==i.driver.src&&i.driver.src!==e.src&&(u(e,0,!0),i.driver.src=e.src),e.paused&&(i.paused=!1,0===e.buffered.length&&e.load(),i.driver.play(),i.updater.start(),i.hasAudio||(d(e,\"play\"),i.video.readyState>=i.video.HAVE_ENOUGH_DATA&&d(e,\"playing\")))}function v(e){var i=this,n=i[g];n.driver.pause(),n.updater.stop(),i.webkitDisplayingFullscreen&&i[w](),n.paused&&!e||(n.paused=!0,n.hasAudio||d(i,\"pause\"),i.ended&&!i.webkitDisplayingFullscreen&&(i[h]=!0,d(i,\"ended\")))}function p(e,n){var r={};e[g]=r,r.paused=!0,r.hasAudio=n,r.video=e,r.updater=i(s.bind(r)),n?r.driver=a(e):(e.addEventListener(\"canplay\",function(){e.paused||d(e,\"playing\")}),r.driver={src:e.src||e.currentSrc||\"data:\",muted:!0,paused:!0,pause:function(){r.driver.paused=!0},play:function(){r.driver.paused=!1,o(r)&&u(e,0)},get ended(){return o(r)}}),e.addEventListener(\"emptied\",function(){var i=!r.driver.src||\"data:\"===r.driver.src;r.driver.src&&r.driver.src!==e.src&&(u(e,0,!0),r.driver.src=e.src,i||!n&&e.autoplay?r.driver.play():r.updater.stop())},!1),e.addEventListener(\"webkitbeginfullscreen\",function(){e.paused?n&&0===r.driver.buffered.length&&r.driver.load():(e.pause(),e[E]())}),n&&(e.addEventListener(\"webkitendfullscreen\",function(){r.driver.currentTime=e.currentTime}),e.addEventListener(\"seeking\",function(){k.indexOf(100*e.currentTime|0)<0&&(r.driver.currentTime=e.currentTime)}))}function l(e){var i=e[h];return delete e[h],!e.webkitDisplayingFullscreen&&!i}function f(e){var i=e[g];e[E]=e.play,e[w]=e.pause,e.play=c,e.pause=v,r(e,\"paused\",i.driver),r(e,\"muted\",i.driver,!0),r(e,\"playbackRate\",i.driver,!0),r(e,\"ended\",i.driver),r(e,\"loop\",i.driver,!0),n(e,\"seeking\",function(e){return!e.webkitDisplayingFullscreen}),n(e,\"seeked\",function(e){return!e.webkitDisplayingFullscreen}),n(e,\"timeupdate\",l),n(e,\"ended\",l)}function y(e,i){if(void 0===i&&(i={}),!e[g]){if(!i.everywhere){if(!b)return;if(!(i.iPad||i.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}e.pause();var n=e.autoplay;e.autoplay=!1,p(e,!e.muted),f(e),e.classList.add(\"IIV\"),e.muted&&n&&(e.play(),e.addEventListener(\"playing\",function i(){e.autoplay=!0,e.removeEventListener(\"playing\",i)})),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn(\"iphone-inline-video is not guaranteed to work in emulated environments\")}}var m,b=\"object\"==typeof document&&\"object-fit\"in document.head.style&&!matchMedia(\"(-webkit-video-playable-inline)\").matches,g=\"bfred-it:iphone-inline-video\",h=\"bfred-it:iphone-inline-video:event\",E=\"bfred-it:iphone-inline-video:nativeplay\",w=\"bfred-it:iphone-inline-video:nativepause\",k=[],T=0;return y}();\n;/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\nvar TWEEN = TWEEN || (function () {\n\n\tvar _tweens = [];\n\n\treturn {\n\n\t\tgetAll: function () {\n\n\t\t\treturn _tweens;\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\t_tweens = [];\n\n\t\t},\n\n\t\tadd: function (tween) {\n\n\t\t\t_tweens.push(tween);\n\n\t\t},\n\n\t\tremove: function (tween) {\n\n\t\t\tvar i = _tweens.indexOf(tween);\n\n\t\t\tif (i !== -1) {\n\t\t\t\t_tweens.splice(i, 1);\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function (time, preserve) {\n\n\t\t\tif (_tweens.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar i = 0;\n\n\t\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t\twhile (i < _tweens.length) {\n\n\t\t\t\tif (_tweens[i].update(time) || preserve) {\n\t\t\t\t\ti++;\n\t\t\t\t} else {\n\t\t\t\t\t_tweens.splice(i, 1);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\t};\n\n})();\n\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {\n\tTWEEN.now = function () {\n\t\tvar time = process.hrtime();\n\n\t\t// Convert [seconds, nanoseconds] to milliseconds.\n\t\treturn time[0] * 1000 + time[1] / 1000000;\n\t};\n}\n// In a browser, use window.performance.now if it is available.\nelse if (typeof (window) !== 'undefined' &&\n         window.performance !== undefined &&\n\t\t window.performance.now !== undefined) {\n\t// This must be bound, because directly assigning this function\n\t// leads to an invocation exception in Chrome.\n\tTWEEN.now = window.performance.now.bind(window.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n\tTWEEN.now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n\tTWEEN.now = function () {\n\t\treturn new Date().getTime();\n\t};\n}\n\n\nTWEEN.Tween = function (object) {\n\n\tvar _object = object;\n\tvar _valuesStart = {};\n\tvar _valuesEnd = {};\n\tvar _valuesStartRepeat = {};\n\tvar _duration = 1000;\n\tvar _repeat = 0;\n\tvar _repeatDelayTime;\n\tvar _yoyo = false;\n\tvar _isPlaying = false;\n\tvar _reversed = false;\n\tvar _delayTime = 0;\n\tvar _startTime = null;\n\tvar _easingFunction = TWEEN.Easing.Linear.None;\n\tvar _interpolationFunction = TWEEN.Interpolation.Linear;\n\tvar _chainedTweens = [];\n\tvar _onStartCallback = null;\n\tvar _onStartCallbackFired = false;\n\tvar _onUpdateCallback = null;\n\tvar _onCompleteCallback = null;\n\tvar _onStopCallback = null;\n\n\tthis.to = function (properties, duration) {\n\n\t\t_valuesEnd = properties;\n\n\t\tif (duration !== undefined) {\n\t\t\t_duration = duration;\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.start = function (time) {\n\n\t\tTWEEN.add(this);\n\n\t\t_isPlaying = true;\n\n\t\t_onStartCallbackFired = false;\n\n\t\t_startTime = time !== undefined ? time : TWEEN.now();\n\t\t_startTime += _delayTime;\n\n\t\tfor (var property in _valuesEnd) {\n\n\t\t\t// Check if an Array was provided as property value\n\t\t\tif (_valuesEnd[property] instanceof Array) {\n\n\t\t\t\tif (_valuesEnd[property].length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Create a local copy of the Array with the start value at the front\n\t\t\t\t_valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n\n\t\t\t}\n\n\t\t\t// If `to()` specifies a property that doesn't exist in the source object,\n\t\t\t// we should not set that property in the object\n\t\t\tif (_object[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Save the starting value.\n\t\t\t_valuesStart[property] = _object[property];\n\n\t\t\tif ((_valuesStart[property] instanceof Array) === false) {\n\t\t\t\t_valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n\t\t\t}\n\n\t\t\t_valuesStartRepeat[property] = _valuesStart[property] || 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.stop = function () {\n\n\t\tif (!_isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tTWEEN.remove(this);\n\t\t_isPlaying = false;\n\n\t\tif (_onStopCallback !== null) {\n\t\t\t_onStopCallback.call(_object, _object);\n\t\t}\n\n\t\tthis.stopChainedTweens();\n\t\treturn this;\n\n\t};\n\n\tthis.end = function () {\n\n\t\tthis.update(_startTime + _duration);\n\t\treturn this;\n\n\t};\n\n\tthis.stopChainedTweens = function () {\n\n\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t_chainedTweens[i].stop();\n\t\t}\n\n\t};\n\n\tthis.delay = function (amount) {\n\n\t\t_delayTime = amount;\n\t\treturn this;\n\n\t};\n\n\tthis.repeat = function (times) {\n\n\t\t_repeat = times;\n\t\treturn this;\n\n\t};\n\n\tthis.repeatDelay = function (amount) {\n\n\t\t_repeatDelayTime = amount;\n\t\treturn this;\n\n\t};\n\n\tthis.yoyo = function (yoyo) {\n\n\t\t_yoyo = yoyo;\n\t\treturn this;\n\n\t};\n\n\n\tthis.easing = function (easing) {\n\n\t\t_easingFunction = easing;\n\t\treturn this;\n\n\t};\n\n\tthis.interpolation = function (interpolation) {\n\n\t\t_interpolationFunction = interpolation;\n\t\treturn this;\n\n\t};\n\n\tthis.chain = function () {\n\n\t\t_chainedTweens = arguments;\n\t\treturn this;\n\n\t};\n\n\tthis.onStart = function (callback) {\n\n\t\t_onStartCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onUpdate = function (callback) {\n\n\t\t_onUpdateCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onComplete = function (callback) {\n\n\t\t_onCompleteCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onStop = function (callback) {\n\n\t\t_onStopCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.update = function (time) {\n\n\t\tvar property;\n\t\tvar elapsed;\n\t\tvar value;\n\n\t\tif (time < _startTime) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (_onStartCallbackFired === false) {\n\n\t\t\tif (_onStartCallback !== null) {\n\t\t\t\t_onStartCallback.call(_object, _object);\n\t\t\t}\n\n\t\t\t_onStartCallbackFired = true;\n\t\t}\n\n\t\telapsed = (time - _startTime) / _duration;\n\t\telapsed = elapsed > 1 ? 1 : elapsed;\n\n\t\tvalue = _easingFunction(elapsed);\n\n\t\tfor (property in _valuesEnd) {\n\n\t\t\t// Don't update properties that do not exist in the source object\n\t\t\tif (_valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar start = _valuesStart[property] || 0;\n\t\t\tvar end = _valuesEnd[property];\n\n\t\t\tif (end instanceof Array) {\n\n\t\t\t\t_object[property] = _interpolationFunction(end, value);\n\n\t\t\t} else {\n\n\t\t\t\t// Parses relative end values with start as base (e.g.: +10, -3)\n\t\t\t\tif (typeof (end) === 'string') {\n\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\tend = start + parseFloat(end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = parseFloat(end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Protect against non numeric properties.\n\t\t\t\tif (typeof (end) === 'number') {\n\t\t\t\t\t_object[property] = start + (end - start) * value;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (_onUpdateCallback !== null) {\n\t\t\t_onUpdateCallback.call(_object, value);\n\t\t}\n\n\t\tif (elapsed === 1) {\n\n\t\t\tif (_repeat > 0) {\n\n\t\t\t\tif (isFinite(_repeat)) {\n\t\t\t\t\t_repeat--;\n\t\t\t\t}\n\n\t\t\t\t// Reassign starting values, restart by making startTime = now\n\t\t\t\tfor (property in _valuesStartRepeat) {\n\n\t\t\t\t\tif (typeof (_valuesEnd[property]) === 'string') {\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_yoyo) {\n\t\t\t\t\t\tvar tmp = _valuesStartRepeat[property];\n\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesEnd[property];\n\t\t\t\t\t\t_valuesEnd[property] = tmp;\n\t\t\t\t\t}\n\n\t\t\t\t\t_valuesStart[property] = _valuesStartRepeat[property];\n\n\t\t\t\t}\n\n\t\t\t\tif (_yoyo) {\n\t\t\t\t\t_reversed = !_reversed;\n\t\t\t\t}\n\n\t\t\t\tif (_repeatDelayTime !== undefined) {\n\t\t\t\t\t_startTime = time + _repeatDelayTime;\n\t\t\t\t} else {\n\t\t\t\t\t_startTime = time + _delayTime;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (_onCompleteCallback !== null) {\n\n\t\t\t\t\t_onCompleteCallback.call(_object, _object);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t// Make the chained tweens start exactly at the time they should,\n\t\t\t\t\t// even if the `update()` method was called way past the duration of the tween\n\t\t\t\t\t_chainedTweens[i].start(_startTime + _duration);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n};\n\n\nTWEEN.Easing = {\n\n\tLinear: {\n\n\t\tNone: function (k) {\n\n\t\t\treturn k;\n\n\t\t}\n\n\t},\n\n\tQuadratic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k * (2 - k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * (--k * (k - 2) - 1);\n\n\t\t}\n\n\t},\n\n\tCubic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tQuartic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn 1 - (--k * k * k * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * ((k -= 2) * k * k * k - 2);\n\n\t\t}\n\n\t},\n\n\tQuintic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tSinusoidal: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sin(k * Math.PI / 2);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\n\t\t}\n\n\t},\n\n\tExponential: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n\n\t\t}\n\n\t},\n\n\tCircular: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sqrt(1 - (--k * k));\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn - 0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\n\t\t}\n\n\t},\n\n\tElastic: {\n\n\t\tIn: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t}\n\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\n\t\t}\n\n\t},\n\n\tBack: {\n\n\t\tIn: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn k * k * ((s + 1) * k - s);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\n\t\t}\n\n\t},\n\n\tBounce: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k < (1 / 2.75)) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < (2 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n\t\t\t} else if (k < (2.5 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n\t\t\t}\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\n\t\t}\n\n\t}\n\n};\n\nTWEEN.Interpolation = {\n\n\tLinear: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\n\t},\n\n\tBezier: function (v, k) {\n\n\t\tvar b = 0;\n\t\tvar n = v.length - 1;\n\t\tvar pw = Math.pow;\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\tfor (var i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\n\t},\n\n\tCatmullRom: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t}\n\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\n\t\t} else {\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\n\t\t}\n\n\t},\n\n\tUtils: {\n\n\t\tLinear: function (p0, p1, t) {\n\n\t\t\treturn (p1 - p0) * t + p0;\n\n\t\t},\n\n\t\tBernstein: function (n, i) {\n\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\n\t\t},\n\n\t\tFactorial: (function () {\n\n\t\t\tvar a = [1];\n\n\t\t\treturn function (n) {\n\n\t\t\t\tvar s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\n\t\t\t};\n\n\t\t})(),\n\n\t\tCatmullRom: function (p0, p1, p2, p3, t) {\n\n\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t * t2;\n\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\n\t\t}\n\n\t}\n\n};\n\n// UMD (Universal Module Definition)\n(function (root) {\n\n\tif (typeof define === 'function' && define.amd) {\n\n\t\t// AMD\n\t\tdefine([], function () {\n\t\t\treturn TWEEN;\n\t\t});\n\n\t} else if (typeof module !== 'undefined' && typeof exports === 'object') {\n\n\t\t// Node.js\n\t\tmodule.exports = TWEEN;\n\n\t} else if (root !== undefined) {\n\n\t\t// Global variable\n\t\troot.TWEEN = TWEEN;\n\n\t}\n\n})(this);\n;/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n/*global THREE, console */\n\n// This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n// the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n// supported.\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\nTHREE.OrbitControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\tthis.frameId;\n\n\t// API\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the control orbits around\n\t// and where it pans with respect to.\n\tthis.target = new THREE.Vector3();\n\n\t// center is old, deprecated; use \"target\" instead\n\tthis.center = this.target;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for\n\t// backwards compatibility\n\tthis.noZoom = false;\n\tthis.zoomSpeed = 1.0;\n\n\t// Limits to how far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// Limits to how far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// Set to true to disable this control\n\tthis.noRotate = false;\n\tthis.rotateSpeed = -0.15;\n\n\t// Set to true to disable this control\n\tthis.noPan = true;\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// Momentum\n  \tthis.momentumDampingFactor = 0.90;\n  \tthis.momentumScalingFactor = -0.005;\n  \tthis.momentumKeydownFactor = 20;\n\n  \t// Fov\n  \tthis.minFov = 30;\n  \tthis.maxFov = 120;\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to disable use of the keys\n\tthis.noKeys = false;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t////////////\n\t// internals\n\n\tvar scope = this;\n\n\tvar EPS = 10e-8;\n\tvar MEPS = 10e-5;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\tvar panOffset = new THREE.Vector3();\n\n\tvar offset = new THREE.Vector3();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tvar theta;\n\tvar phi;\n\tvar phiDelta = 0;\n\tvar thetaDelta = 0;\n\tvar scale = 1;\n\tvar pan = new THREE.Vector3();\n\n\tvar lastPosition = new THREE.Vector3();\n\tvar lastQuaternion = new THREE.Quaternion();\n\n\tvar momentumLeft = 0, momentumUp = 0;\n\tvar eventCurrent, eventPrevious;\n\tvar momentumOn = false;\n\n\tvar keyUp, keyBottom, keyLeft, keyRight;\n\n\tvar STATE = { NONE : -1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n\n\tvar state = STATE.NONE;\n\n\t// for reset\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t// so camera.up is the orbit axis\n\n\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\tvar quatInverse = quat.clone().inverse();\n\n\t// events\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tthis.setLastQuaternion = function ( quaternion ) {\n\t\tlastQuaternion.copy( quaternion );\n\t\tscope.object.quaternion.copy( quaternion );\n\t};\n\n\tthis.getLastPosition = function () {\n\t\treturn lastPosition;\n\t}\n\n\tthis.rotateLeft = function ( angle ) {\n\n\t\tif ( angle === undefined ) {\n\n\t\t\tangle = getAutoRotationAngle();\n\n\t\t}\n\n\t\tthetaDelta -= angle;\n\n\n\t};\n\n\tthis.rotateUp = function ( angle ) {\n\n\t\tif ( angle === undefined ) {\n\n\t\t\tangle = getAutoRotationAngle();\n\n\t\t}\n\n\t\tphiDelta -= angle;\n\n\t};\n\n\t// pass in distance in world space to move left\n\tthis.panLeft = function ( distance ) {\n\n\t\tvar te = this.object.matrix.elements;\n\n\t\t// get X column of matrix\n\t\tpanOffset.set( te[ 0 ], te[ 1 ], te[ 2 ] );\n\t\tpanOffset.multiplyScalar( - distance );\n\n\t\tpan.add( panOffset );\n\n\t};\n\n\t// pass in distance in world space to move up\n\tthis.panUp = function ( distance ) {\n\n\t\tvar te = this.object.matrix.elements;\n\n\t\t// get Y column of matrix\n\t\tpanOffset.set( te[ 4 ], te[ 5 ], te[ 6 ] );\n\t\tpanOffset.multiplyScalar( distance );\n\n\t\tpan.add( panOffset );\n\n\t};\n\n\t// pass in x,y of change desired in pixel space,\n\t// right and down are positive\n\tthis.pan = function ( deltaX, deltaY ) {\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t// perspective\n\t\t\tvar position = scope.object.position;\n\t\t\tvar offset = position.clone().sub( scope.target );\n\t\t\tvar targetDistance = offset.length();\n\n\t\t\t// half of the fov is center to top of screen\n\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\tscope.panLeft( 2 * deltaX * targetDistance / element.clientHeight );\n\t\t\tscope.panUp( 2 * deltaY * targetDistance / element.clientHeight );\n\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t// orthographic\n\t\t\tscope.panLeft( deltaX * (scope.object.right - scope.object.left) / element.clientWidth );\n\t\t\tscope.panUp( deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight );\n\n\t\t} else {\n\n\t\t\t// camera neither orthographic or perspective\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\n\t\t}\n\n\t};\n\n\tthis.momentum = function(){\n\t\t\n\t\tif ( !momentumOn ) return;\n\n\t\tif ( Math.abs( momentumLeft ) < MEPS && Math.abs( momentumUp ) < MEPS ) { \n\n\t\t\tmomentumOn = false; \n\t\t\treturn;\n\t\t}\n\n\t\tmomentumUp   *= this.momentumDampingFactor;\n\t\tmomentumLeft *= this.momentumDampingFactor;\n\n\t\tthetaDelta -= this.momentumScalingFactor * momentumLeft;\n\t\tphiDelta   -= this.momentumScalingFactor * momentumUp;\n\n\t};\n\n\tthis.dollyIn = function ( dollyScale ) {\n\n\t\tif ( dollyScale === undefined ) {\n\n\t\t\tdollyScale = getZoomScale();\n\n\t\t}\n\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\n\t\t}\n\n\t};\n\n\tthis.dollyOut = function ( dollyScale ) {\n\n\t\tif ( dollyScale === undefined ) {\n\n\t\t\tdollyScale = getZoomScale();\n\n\t\t}\n\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\n\t\t}\n\n\t};\n\n\tthis.update = function ( ignoreUpdate ) {\n\n\t\tvar position = this.object.position;\n\n\t\toffset.copy( position ).sub( this.target );\n\n\t\t// rotate offset to \"y-axis-is-up\" space\n\t\toffset.applyQuaternion( quat );\n\n\t\t// angle from z-axis around y-axis\n\n\t\ttheta = Math.atan2( offset.x, offset.z );\n\n\t\t// angle from y-axis\n\n\t\tphi = Math.atan2( Math.sqrt( offset.x * offset.x + offset.z * offset.z ), offset.y );\n\n\t\tif ( this.autoRotate && state === STATE.NONE ) {\n\n\t\t\tthis.rotateLeft( getAutoRotationAngle() );\n\n\t\t}\n\n\t\tthis.momentum();\n\n\t\ttheta += thetaDelta;\n\t\tphi += phiDelta;\n\n\t\t// restrict theta to be between desired limits\n\t\ttheta = Math.max( this.minAzimuthAngle, Math.min( this.maxAzimuthAngle, theta ) );\n\n\t\t// restrict phi to be between desired limits\n\t\tphi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, phi ) );\n\n\t\t// restrict phi to be betwee EPS and PI-EPS\n\t\tphi = Math.max( EPS, Math.min( Math.PI - EPS, phi ) );\n\n\t\tvar radius = offset.length() * scale;\n\n\t\t// restrict radius to be between desired limits\n\t\tradius = Math.max( this.minDistance, Math.min( this.maxDistance, radius ) );\n\n\t\t// move target to panned location\n\t\tthis.target.add( pan );\n\n\t\toffset.x = radius * Math.sin( phi ) * Math.sin( theta );\n\t\toffset.y = radius * Math.cos( phi );\n\t\toffset.z = radius * Math.sin( phi ) * Math.cos( theta );\n\n\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\toffset.applyQuaternion( quatInverse );\n\n\t\tposition.copy( this.target ).add( offset );\n\n\t\tthis.object.lookAt( this.target );\n\n\t\tthetaDelta = 0;\n\t\tphiDelta = 0;\n\t\tscale = 1;\n\t\tpan.set( 0, 0, 0 );\n\n\t\t// update condition is:\n\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\t\tif ( lastPosition.distanceToSquared( this.object.position ) > EPS\n\t\t    || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS ) {\n\n\t\t\tignoreUpdate !== true && this.dispatchEvent( changeEvent );\n\n\t\t\tlastPosition.copy( this.object.position );\n\t\t\tlastQuaternion.copy (this.object.quaternion );\n\n\t\t}\n\n\t};\n\n\n\tthis.reset = function () {\n\n\t\tstate = STATE.NONE;\n\n\t\tthis.target.copy( this.target0 );\n\t\tthis.object.position.copy( this.position0 );\n\t\tthis.object.zoom = this.zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\t\tthis.dispatchEvent( changeEvent );\n\n\t\tthis.update();\n\n\t};\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn theta\n\n\t};\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction onMouseDown( event ) {\n\n\t\tmomentumOn = false;\n\n   \t\tmomentumLeft = momentumUp = 0;\n\n\t\tif ( scope.enabled === false ) return;\n\t\tevent.preventDefault();\n\n\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\n\t\t\tif ( scope.noRotate === true ) return;\n\n\t\t\tstate = STATE.ROTATE;\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\n\t\t\tif ( scope.noZoom === true ) return;\n\n\t\t\tstate = STATE.DOLLY;\n\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\n\t\t\tif ( scope.noPan === true ) return;\n\n\t\t\tstate = STATE.PAN;\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\t\t\tscope.dispatchEvent( startEvent );\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\tif ( state === STATE.ROTATE ) {\n\n\t\t\tif ( scope.noRotate === true ) return;\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\tscope.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\tscope.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tif( eventPrevious ){\n\t\t\t\tmomentumLeft = event.clientX - eventPrevious.clientX;\n\t\t\t\tmomentumUp = event.clientY - eventPrevious.clientY;\n\t\t\t}\n\n\t\t\teventPrevious = event;\n\n\t\t} else if ( state === STATE.DOLLY ) {\n\n\t\t\tif ( scope.noZoom === true ) return;\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tscope.dollyIn();\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tscope.dollyOut();\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t} else if ( state === STATE.PAN ) {\n\n\t\t\tif ( scope.noPan === true ) return;\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\tscope.pan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) scope.update();\n\n\t}\n\n\tfunction onMouseUp( /* event */ ) {\n\n\t\tmomentumOn = true;\n\n\t\teventPrevious = undefined;\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\tscope.dispatchEvent( endEvent );\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.noZoom === true || state !== STATE.NONE ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar delta = 0;\n\n\t\tif ( event.wheelDelta !== undefined ) { // WebKit / Opera / Explorer 9\n\n\t\t\tdelta = event.wheelDelta;\n\n\t\t} else if ( event.detail !== undefined ) { // Firefox\n\n\t\t\tdelta = - event.detail;\n\n\t\t}\n\n\t\tif ( delta > 0 ) {\n\n\t\t\t//scope.dollyOut();\n\t\t\tscope.object.fov = ( scope.object.fov < scope.maxFov ) \n\t\t\t\t? scope.object.fov + 1\n\t\t\t\t: scope.maxFov;\n\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t} else if ( delta < 0 ) {\n\n\t\t\t//scope.dollyIn();\n\t\t\tscope.object.fov = ( scope.object.fov > scope.minFov ) \n\t\t\t\t? scope.object.fov - 1\n\t\t\t\t: scope.minFov;\n\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t}\n\n\t\tscope.update();\n\t\tscope.dispatchEvent( changeEvent );\n\t\tscope.dispatchEvent( startEvent );\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyUp ( event ) {\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tkeyUp = false;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tkeyBottom = false;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tkeyLeft = false;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tkeyRight = false;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.noKeys === true || scope.noRotate === true ) return;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tkeyUp = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tkeyBottom = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tkeyLeft = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tkeyRight = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif (keyUp || keyBottom || keyLeft || keyRight) {\n\n\t\t\tmomentumOn = true;\n\n\t\t\tif (keyUp) momentumUp = - scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t\tif (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t\tif (keyLeft) momentumLeft = - scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t\tif (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor;\n\n\t\t}\n\n\t}\n\n\tfunction touchstart( event ) {\n\n\t\tmomentumOn = false;\n\n\t\tmomentumLeft = momentumUp = 0;\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.noRotate === true ) return;\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly\n\n\t\t\t\tif ( scope.noZoom === true ) return;\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\tif ( scope.noPan === true ) return;\n\n\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) scope.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction touchmove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.noRotate === true ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return;\n\n\t\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\tscope.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\tscope.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\t\tif( eventPrevious ){\n\t\t\t\t\tmomentumLeft = event.touches[ 0 ].pageX - eventPrevious.pageX;\n\t\t\t\t\tmomentumUp = event.touches[ 0 ].pageY - eventPrevious.pageY;\n\t\t\t\t}\n\n\t\t\t\teventPrevious = {\n\t\t\t\t\tpageX: event.touches[ 0 ].pageX,\n\t\t\t\t\tpageY: event.touches[ 0 ].pageY,\n\t\t\t\t};\n\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly\n\n\t\t\t\tif ( scope.noZoom === true ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return;\n\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tif ( event.scale < 1 ) {\n\n\t\t\t\t\tscope.object.fov = ( scope.object.fov < scope.maxFov ) \n\t\t\t\t\t\t? scope.object.fov + 1\n\t\t\t\t\t\t: scope.maxFov;\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t} else if ( event.scale > 1 ) {\n\n\t\t\t\t\tscope.object.fov = ( scope.object.fov > scope.minFov ) \n\t\t\t\t\t\t? scope.object.fov - 1\n\t\t\t\t\t\t: scope.minFov;\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tscope.update();\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\t\t\t\tbreak;\n\n\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\tif ( scope.noPan === true ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return;\n\n\t\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\t\tscope.pan( panDelta.x, panDelta.y );\n\n\t\t\t\tpanStart.copy( panEnd );\n\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction touchend( /* event */ ) {\n\n\t\tmomentumOn = true;\n\n\t\teventPrevious = undefined;\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tscope.dispatchEvent( endEvent );\n\t\tstate = STATE.NONE;\n\n\t}\n\n\t//this.domElement.addEventListener( 'contextmenu', function ( event ) { event.preventDefault(); }, false );\n\tthis.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tthis.domElement.addEventListener( 'mousewheel', onMouseWheel, false );\n\tthis.domElement.addEventListener( 'DOMMouseScroll', onMouseWheel, false ); // firefox\n\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\twindow.addEventListener( 'keyup', onKeyUp, false );\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\tthis.update();\n\n};\n\nTHREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;;/**\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n *\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\n\nTHREE.DeviceOrientationControls = function( camera, domElement ) {\n\n\tvar scope = this;\n\tvar changeEvent = { type: 'change' };\n\n\tvar rotY = 0;\n\tvar rotX = 0;\n\tvar tempX = 0;\n\tvar tempY = 0;\n\n\tthis.camera = camera;\n\tthis.camera.rotation.reorder( \"YXZ\" );\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\tthis.enabled = true;\n\n\tthis.deviceOrientation = {};\n\tthis.screenOrientation = 0;\n\n\tthis.alpha = 0;\n\tthis.alphaOffsetAngle = 0;\n\n\n\tvar onDeviceOrientationChangeEvent = function( event ) {\n\n\t\tscope.deviceOrientation = event;\n\n\t};\n\n\tvar onScreenOrientationChangeEvent = function() {\n\n\t\tscope.screenOrientation = window.orientation || 0;\n\n\t};\n\n\tvar onTouchStartEvent = function (event) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\ttempX = event.touches[ 0 ].pageX;\n\t\ttempY = event.touches[ 0 ].pageY;\n\n\t};\n\n\tvar onTouchMoveEvent = function (event) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\trotY += THREE.Math.degToRad( ( event.touches[ 0 ].pageX - tempX ) / 4 );\n\t\trotX += THREE.Math.degToRad( ( tempY - event.touches[ 0 ].pageY ) / 4 );\n\n\t\tscope.updateAlphaOffsetAngle( rotY );\n\n\t\ttempX = event.touches[ 0 ].pageX;\n\t\ttempY = event.touches[ 0 ].pageY;\n\n\t};\n\n\t// The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n\tvar setCameraQuaternion = function( quaternion, alpha, beta, gamma, orient ) {\n\n\t\tvar zee = new THREE.Vector3( 0, 0, 1 );\n\n\t\tvar euler = new THREE.Euler();\n\n\t\tvar q0 = new THREE.Quaternion();\n\n\t\tvar q1 = new THREE.Quaternion( - Math.sqrt( 0.5 ), 0, 0, Math.sqrt( 0.5 ) ); // - PI/2 around the x-axis\n\n\t\tvar vectorFingerY;\n\t\tvar fingerQY = new THREE.Quaternion();\n\t\tvar fingerQX = new THREE.Quaternion();\n\n\t\tif ( scope.screenOrientation == 0 ) {\n\n\t\t\tvectorFingerY = new THREE.Vector3( 1, 0, 0 );\n\t\t\tfingerQY.setFromAxisAngle( vectorFingerY, -rotX );\n\n\t\t} else if ( scope.screenOrientation == 180 ) {\n\n\t\t\tvectorFingerY = new THREE.Vector3( 1, 0, 0 );\n\t\t\tfingerQY.setFromAxisAngle( vectorFingerY, rotX );\n\n\t\t} else if ( scope.screenOrientation == 90 ) {\n\n\t\t\tvectorFingerY = new THREE.Vector3( 0, 1, 0 );\n\t\t\tfingerQY.setFromAxisAngle( vectorFingerY, rotX );\n\n\t\t} else if ( scope.screenOrientation == - 90) {\n\n\t\t\tvectorFingerY = new THREE.Vector3( 0, 1, 0 );\n\t\t\tfingerQY.setFromAxisAngle( vectorFingerY, -rotX );\n\n\t\t}\n\n\t\tq1.multiply( fingerQY );\n\t\tq1.multiply( fingerQX );\n\n\t\teuler.set( beta, alpha, - gamma, 'YXZ' ); // 'ZXY' for the device, but 'YXZ' for us\n\n\t\tquaternion.setFromEuler( euler ); // orient the device\n\n\t\tquaternion.multiply( q1 ); // camera looks out the back of the device, not the top\n\n\t\tquaternion.multiply( q0.setFromAxisAngle( zee, - orient ) ); // adjust for screen orientation\n\n\t};\n\n\tthis.connect = function() {\n\n\t\tonScreenOrientationChangeEvent(); // run once on load\n\n\t\twindow.addEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n\t\twindow.addEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\t\twindow.addEventListener( 'deviceorientation', this.update.bind( this ), false );\n\n\t\tscope.domElement.addEventListener( \"touchstart\", onTouchStartEvent, false );\n\t\tscope.domElement.addEventListener( \"touchmove\", onTouchMoveEvent, false );\n\n\t\tscope.enabled = true;\n\n\t};\n\n\tthis.disconnect = function() {\n\n\t\twindow.removeEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n\t\twindow.removeEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\t\twindow.removeEventListener( 'deviceorientation', this.update.bind( this ), false );\n\n\t\tscope.domElement.removeEventListener( \"touchstart\", onTouchStartEvent, false );\n\t\tscope.domElement.removeEventListener( \"touchmove\", onTouchMoveEvent, false );\n\n\t\tscope.enabled = false;\n\n\t};\n\n\tthis.update = function( ignoreUpdate ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tvar alpha = scope.deviceOrientation.alpha ? THREE.Math.degToRad( scope.deviceOrientation.alpha ) + this.alphaOffsetAngle : 0; // Z\n\t\tvar beta = scope.deviceOrientation.beta ? THREE.Math.degToRad( scope.deviceOrientation.beta ) : 0; // X'\n\t\tvar gamma = scope.deviceOrientation.gamma ? THREE.Math.degToRad( scope.deviceOrientation.gamma ) : 0; // Y''\n\t\tvar orient = scope.screenOrientation ? THREE.Math.degToRad( scope.screenOrientation ) : 0; // O\n\n\t\tsetCameraQuaternion( scope.camera.quaternion, alpha, beta, gamma, orient );\n\t\tthis.alpha = alpha;\n\n\t\tignoreUpdate !== true && this.dispatchEvent( changeEvent );\n\n\t};\n\n\tthis.updateAlphaOffsetAngle = function( angle ) {\n\n\t\tthis.alphaOffsetAngle = angle;\n\t\tthis.update();\n\n\t};\n\n\tthis.dispose = function() {\n\n\t\tthis.disconnect();\n\n\t};\n\n\tthis.connect();\n\n};\n\nTHREE.DeviceOrientationControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.DeviceOrientationControls.prototype.constructor = THREE.DeviceOrientationControls;; /** The Bend modifier lets you bend the current selection up to 90 degrees about a single axis,\n * producing a uniform bend in an object's geometry.\n * You can control the angle and direction of the bend on any of three axes.\n * The geometry has to have rather large number of polygons!\n * options:\n * \t direction - deformation direction (in local coordinates!). \n * \t axis - deformation axis (in local coordinates!). Vector of direction and axis are perpendicular.\n * \t angle - deformation angle.\n * @author Vildanov Almaz / alvild@gmail.com\n * The algorithm of a bend is based on the chain line cosh: y = 1/b * cosh(b*x) - 1/b. It can be used only in three.js.\n */\n\nTHREE.BendModifier = function () {\n\n};\n\nTHREE.BendModifier.prototype = {\n\n    constructor: THREE.BendModifier,\n\n    set: function ( direction, axis, angle ) {\n        this.direction = new THREE.Vector3(); this.direction.copy( direction );\n\t\tthis.axis = new THREE.Vector3(); this.axis.copy( axis );\n        this.angle = angle;\n        return this\n    },\n\n\t_sign: function (a) {\n        return 0 > a ? -1 : 0 < a ? 1 : 0\n    },\n\n\t_cosh: function( x )  {\n\t\treturn ( Math.exp( x ) + Math.exp( -x ) ) / 2;\n\t},\n\n\t_sinhInverse: function( x )  {\n\t\t\treturn  Math.log( Math.abs( x ) + Math.sqrt( x * x + 1 ) );\n\t},\n\n    modify: function ( geometry ) {\n\n\t\tvar thirdAxis = new THREE.Vector3();  thirdAxis.crossVectors( this.direction, this.axis );\n\n\t\t// P - matrices of the change-of-coordinates\n\t\tvar P = new THREE.Matrix4();\n\t\tP.set ( thirdAxis.x, thirdAxis.y, thirdAxis.z, 0, \n\t\t\tthis.direction.x, this.direction.y, this.direction.z, 0, \n\t\t\tthis.axis.x, this.axis.y, this.axis.z, 0, \n\t\t\t0, 0, 0, 1 ).transpose();\n\n\t\tvar InverseP =  new THREE.Matrix4().getInverse( P );\n\t\tvar newVertices = []; var oldVertices = []; var anglesBetweenOldandNewVertices = [];\n\n\t\tvar meshGeometryBoundingBoxMaxx = 0; var meshGeometryBoundingBoxMinx = 0;\n\t\tvar meshGeometryBoundingBoxMaxy = 0; var meshGeometryBoundingBoxMiny = 0;\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++)  {\n\n\t\t\tnewVertices[i] = new THREE.Vector3(); newVertices[i].copy( geometry.vertices[i] ).applyMatrix4( InverseP );\n\t\t\tif ( newVertices[i].x > meshGeometryBoundingBoxMaxx ) { meshGeometryBoundingBoxMaxx = newVertices[i].x; }\n\t\t\tif ( newVertices[i].x < meshGeometryBoundingBoxMinx ) { meshGeometryBoundingBoxMinx = newVertices[i].x; }\n\t\t\tif ( newVertices[i].y > meshGeometryBoundingBoxMaxy ) { meshGeometryBoundingBoxMaxy = newVertices[i].y; }\n\t\t\tif ( newVertices[i].y < meshGeometryBoundingBoxMiny ) { meshGeometryBoundingBoxMiny = newVertices[i].y; }\n\n\t\t}\n\n\t\tvar meshWidthold =  meshGeometryBoundingBoxMaxx - meshGeometryBoundingBoxMinx;\n\t\tvar meshDepth =  meshGeometryBoundingBoxMaxy - meshGeometryBoundingBoxMiny;\n\t\tvar ParamB = 2 * this._sinhInverse( Math.tan( this.angle ) ) / meshWidthold;\n\t\tvar oldMiddlex = (meshGeometryBoundingBoxMaxx + meshGeometryBoundingBoxMinx) / 2;\n\t\tvar oldMiddley = (meshGeometryBoundingBoxMaxy + meshGeometryBoundingBoxMiny) / 2;\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++ )  {\n\n\t\t\toldVertices[i] = new THREE.Vector3(); oldVertices[i].copy( newVertices[i] );\n\t\t\tnewVertices[i].x = this._sign( newVertices[i].x - oldMiddlex ) * 1 / ParamB * this._sinhInverse( ( newVertices[i].x - oldMiddlex ) * ParamB );\n\n\t\t}\n\n\t\tvar meshWidth = 2 / ParamB * this._sinhInverse( meshWidthold / 2 * ParamB );\n\n\t\tvar NewParamB = 2 * this._sinhInverse( Math.tan( this.angle ) ) / meshWidth;\n\n\t\tvar rightEdgePos = new THREE.Vector3( meshWidth / 2, -meshDepth / 2, 0 );\n\t\trightEdgePos.y = 1 / NewParamB * this._cosh( NewParamB * rightEdgePos.x ) - 1 / NewParamB - meshDepth / 2;\n\n\t\tvar bendCenter = new THREE.Vector3( 0, rightEdgePos.y  + rightEdgePos.x / Math.tan( this.angle ), 0 );\n\n\t\tfor ( var i = 0; i < geometry.vertices.length; i++ )  {\n\n\t\t\tvar x0 = this._sign( oldVertices[i].x - oldMiddlex ) * 1 / ParamB * this._sinhInverse( ( oldVertices[i].x - oldMiddlex ) * ParamB );\n\t\t\tvar y0 = 1 / NewParamB * this._cosh( NewParamB * x0 ) - 1 / NewParamB;\n\n\t\t\tvar k = new THREE.Vector3( bendCenter.x - x0, bendCenter.y - ( y0 - meshDepth / 2 ), bendCenter.z ).normalize();\n\n\t\t\tvar Q = new THREE.Vector3();\n\t\t\tQ.addVectors( new THREE.Vector3( x0, y0 - meshDepth / 2, oldVertices[i].z ), k.multiplyScalar( oldVertices[i].y + meshDepth / 2 ) );\n\t\t\tnewVertices[i].x = Q.x;  newVertices[i].y = Q.y;\n\n\t\t}\t\n\n\t\tvar middle = oldMiddlex * meshWidth / meshWidthold;\n\n\t\tfor ( var i = 0; i < geometry.vertices.length; i++ )  {\n\n\t\t\tvar O = new THREE.Vector3( oldMiddlex, oldMiddley, oldVertices[i].z );\n\t\t\tvar p = new THREE.Vector3(); p.subVectors( oldVertices[i], O );\n\t\t\tvar q = new THREE.Vector3(); q.subVectors( newVertices[i], O );\n\n\t\t\tanglesBetweenOldandNewVertices[i] = Math.acos( 1 / this._cosh( ParamB * newVertices[i].x ) )  * this._sign( newVertices[i].x );\n\n\t\t\tnewVertices[i].x = newVertices[i].x + middle;\n\t\t\tgeometry.vertices[i].copy( newVertices[i].applyMatrix4( P ) );\n\n\t\t}\n\n\t\tgeometry.computeFaceNormals();\n\t\tgeometry.verticesNeedUpdate = true;\n\t\tgeometry.normalsNeedUpdate = true;\n\n\t\t// compute Vertex Normals\n\t\tvar fvNames = [ 'a', 'b', 'c', 'd' ];\n\n\t\tfor ( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = geometry.faces[ f ];\n\t\t\tif ( face.vertexNormals === undefined ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor ( var v = 0, vl = face.vertexNormals.length; v < vl; v ++ ) {\n\n\t\t\t\tvar angle = anglesBetweenOldandNewVertices[ face[ fvNames[ v ] ] ];\n\t\t\t\tvar x = this.axis.x,\n\t\t\t\t\ty = this.axis.y,\n\t\t\t\t\tz = this.axis.z;\n\n\t\t\t\tvar rotateMatrix = new THREE.Matrix3();\n\t\t\t\trotateMatrix.set ( Math.cos(angle) + (1-Math.cos(angle))*x*x, (1-Math.cos(angle))*x*y - Math.sin(angle)*z, (1-Math.cos(angle))*x*z + Math.sin(angle)*y,\n\t\t\t\t\t\t\t\t(1-Math.cos(angle))*y*x + Math.sin(angle)*z, Math.cos(angle) + (1-Math.cos(angle))*y*y, (1-Math.cos(angle))*y*z - Math.sin(angle)*x,\n\t\t\t\t\t\t\t\t(1-Math.cos(angle))*z*x - Math.sin(angle)*y, (1-Math.cos(angle))*z*y + Math.sin(angle)*x, Math.cos(angle) + (1-Math.cos(angle))*z*z );\n\n\t\t\t\tface.vertexNormals[ v ].applyMatrix3( rotateMatrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t// end compute Vertex Normals\t\t\t\n\n\t\treturn this\t\t\t\n    }\t\n};/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CardboardEffect = function ( renderer ) {\n\n\tvar _camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n\tvar _scene = new THREE.Scene();\n\n\tvar _stereo = new THREE.StereoCamera();\n\t_stereo.aspect = 0.5;\n\n\tvar _params = { minFilter: THREE.LinearFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat };\n\n\tvar _renderTarget = new THREE.WebGLRenderTarget( 512, 512, _params );\n\t_renderTarget.scissorTest = true;\n\t_renderTarget.texture.generateMipmaps = false;\n\n\t// Distortion Mesh ported from:\n\t// https://github.com/borismus/webvr-boilerplate/blob/master/src/distortion/barrel-distortion-fragment.js\n\n\tvar distortion = new THREE.Vector2( 0.441, 0.156 );\n\n\tvar geometry = new THREE.PlaneBufferGeometry( 1, 1, 10, 20 ).removeAttribute( 'normal' ).toNonIndexed();\n\n\tvar positions = geometry.attributes.position.array;\n\tvar uvs = geometry.attributes.uv.array;\n\n\t// duplicate\n\tgeometry.attributes.position.count *= 2;\n\tgeometry.attributes.uv.count *= 2;\n\n\tvar positions2 = new Float32Array( positions.length * 2 );\n\tpositions2.set( positions );\n\tpositions2.set( positions, positions.length );\n\n\tvar uvs2 = new Float32Array( uvs.length * 2 );\n\tuvs2.set( uvs );\n\tuvs2.set( uvs, uvs.length );\n\n\tvar vector = new THREE.Vector2();\n\tvar length = positions.length / 3;\n\n\tfor ( var i = 0, l = positions2.length / 3; i < l; i ++ ) {\n\n\t\tvector.x = positions2[ i * 3 + 0 ];\n\t\tvector.y = positions2[ i * 3 + 1 ];\n\n\t\tvar dot = vector.dot( vector );\n\t\tvar scalar = 1.5 + ( distortion.x + distortion.y * dot ) * dot;\n\n\t\tvar offset = i < length ? 0 : 1;\n\n\t\tpositions2[ i * 3 + 0 ] = ( vector.x / scalar ) * 1.5 - 0.5 + offset;\n\t\tpositions2[ i * 3 + 1 ] = ( vector.y / scalar ) * 3.0;\n\n\t\tuvs2[ i * 2 ] = ( uvs2[ i * 2 ] + offset ) * 0.5;\n\n\t}\n\n\tgeometry.attributes.position.array = positions2;\n\tgeometry.attributes.uv.array = uvs2;\n\n\t//\n\n\t// var material = new THREE.MeshBasicMaterial( { wireframe: true } );\n\tvar material = new THREE.MeshBasicMaterial( { map: _renderTarget.texture } );\n\tvar mesh = new THREE.Mesh( geometry, material );\n\t_scene.add( mesh );\n\n\t//\n\n\tthis.setSize = function ( width, height ) {\n\n\t\trenderer.setSize( width, height );\n\n\t\tvar pixelRatio = renderer.getPixelRatio();\n\n\t\t_renderTarget.setSize( width * pixelRatio, height * pixelRatio );\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tscene.updateMatrixWorld();\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t_stereo.update( camera );\n\n\t\tvar width = _renderTarget.width / 2;\n\t\tvar height = _renderTarget.height;\n\n\t\t_renderTarget.scissor.set( 0, 0, width, height );\n\t\t_renderTarget.viewport.set( 0, 0, width, height );\n\t\trenderer.render( scene, _stereo.cameraL, _renderTarget );\n\n\t\t_renderTarget.scissor.set( width, 0, width, height );\n\t\t_renderTarget.viewport.set( width, 0, width, height );\n\t\trenderer.render( scene, _stereo.cameraR, _renderTarget );\n\n\t\trenderer.render( _scene, _camera );\n\n\t};\n\n};;/**\n * @author alteredq / http://alteredqualia.com/\n * @authod mrdoob / http://mrdoob.com/\n * @authod arodic / http://aleksandarrodic.com/\n * @authod fonserbc / http://fonserbc.github.io/\n*/\n\nTHREE.StereoEffect = function ( renderer ) {\n\n\tvar _stereo = new THREE.StereoCamera();\n\t_stereo.aspect = 0.5;\n\n\tthis.setEyeSeparation = function ( eyeSep ) {\n\n\t\t_stereo.eyeSep = eyeSep;\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\trenderer.setSize( width, height );\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tscene.updateMatrixWorld();\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t_stereo.update( camera );\n\n\t\tvar size = renderer.getSize();\n\n\t\tif ( renderer.autoClear ) renderer.clear();\n\t\trenderer.setScissorTest( true );\n\n\t\trenderer.setScissor( 0, 0, size.width / 2, size.height );\n\t\trenderer.setViewport( 0, 0, size.width / 2, size.height );\n\t\trenderer.render( scene, _stereo.cameraL );\n\n\t\trenderer.setScissor( size.width / 2, 0, size.width / 2, size.height );\n\t\trenderer.setViewport( size.width / 2, 0, size.width / 2, size.height );\n\t\trenderer.render( scene, _stereo.cameraR );\n\n\t\trenderer.setScissorTest( false );\n\n\t};\n\n};\n;var GSVPANO = GSVPANO || {};\nGSVPANO.PanoLoader = function (parameters) {\n\n\t'use strict';\n\n\tvar _parameters = parameters || {},\n\t\t_location,\n\t\t_zoom,\n\t\t_panoId,\n\t\t_panoClient = new google.maps.StreetViewService(),\n\t\t_count = 0,\n\t\t_total = 0,\n\t\t_canvas = [],\n\t\t_ctx = [],\n\t\t_wc = 0,\n\t\t_hc = 0,\n\t\tresult = null,\n\t\trotation = 0,\n\t\tcopyright = '',\n\t\tonSizeChange = null,\n\t\tonPanoramaLoad = null;\n\n\tvar levelsW = [ 1, 2, 4, 7, 13, 26 ],\n\t\tlevelsH = [ 1, 1, 2, 4, 7, 13 ];\n\n\tvar widths = [ 416, 832, 1664, 3328, 6656, 13312 ],\n\t\theights = [ 416, 416, 832, 1664, 3328, 6656 ];\n\n\tvar gl = null;\n\ttry{\n\t\tvar canvas = document.createElement( 'canvas' );\n\t    gl = canvas.getContext('experimental-webgl');\n\t    if(gl == null){\n\t        gl = canvas.getContext('webgl');\n\t    }\n\t}\n\tcatch(error){}\n\n\tvar maxW = 1024,\n\t\tmaxH = 1024;\n\n\tif( gl ) {\n\t\tvar maxTexSize = Math.max( gl.getParameter(gl.MAX_TEXTURE_SIZE), 6656 );\n\t\t//alert( 'MAX_TEXTURE_SIZE ' + maxTexSize );\n\t\tmaxW = maxH = maxTexSize;\n\t}\n\t\t\n\tthis.setProgress = function (loaded, total) {\n\t\n\t\tif (this.onProgress) {\n\t\t\tthis.onProgress({loaded: loaded, total: total});\n\t\t}\n\t\t\n\t};\n\n\tthis.throwError = function (message) {\n\t\n\t\tif (this.onError) {\n\t\t\tthis.onError(message);\n\t\t} else {\n\t\t\tconsole.error(message);\n\t\t}\n\t\t\n\t};\n\n\tthis.adaptTextureToZoom = function () {\n\t\n\t\tvar w = levelsW[ _zoom ] * 416,\n\t\t\th = levelsH[ _zoom ] * 416;\n\n\t\tw = widths [ _zoom ];\n\t\th = heights[ _zoom ];\n\n\t\t_wc = Math.ceil( w / maxW );\n\t\t_hc = Math.ceil( h / maxH );\n\n\t\t_canvas = []; _ctx = [];\n\n\t\tvar ptr = 0;\n\t\tfor( var y = 0; y < _hc; y++ ) {\n\t\t\tfor( var x = 0; x < _wc; x++ ) {\n\t\t\t\tvar c = document.createElement('canvas');\n\t\t\t\tif( x < ( _wc - 1 ) ) c.width = maxW; else c.width = w - ( maxW * x );\n\t\t\t\tif( y < ( _hc - 1 ) ) c.height = maxH; else c.height = h - ( maxH * y );\n\t\t\t\t_canvas.push( c );\n\t\t\t\t_ctx.push( c.getContext('2d') );\n\t\t\t\tptr++;\n\t\t\t}\n\t\t}\n\n\t};\n\n\tthis.composeFromTile = function (x, y, texture) {\n\t\n\t\tx *= 512;\n\t\ty *= 512;\n\t\tvar px = Math.floor( x / maxW ), py = Math.floor( y / maxH );\n\n\t\tx -= px * maxW;\n\t\ty -= py * maxH;\n\n\t\t_ctx[ py * _wc + px ].drawImage(texture, 0, 0, texture.width, texture.height, x, y, 512, 512 );\n\t\tthis.progress();\n\t\t\n\t}; \n\n\tthis.progress = function() {\n\n\t\t_count++;\n\t\t\n\t\tvar p = Math.round(_count * 100 / _total);\n\t\tthis.setProgress(_count, _total);\n\t\t\n\t\tif (_count === _total) {\n\t\t\tthis.canvas = _canvas;\n\t\t\tthis.panoId = _panoId;\n\t\t\tthis.zoom = _zoom;\n\t\t\tif (this.onPanoramaLoad) {\n\t\t\t\tthis.onPanoramaLoad(_canvas[0]);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.loadFromId = function( id ) {\n\n\t\t_panoId = id;\n\t\tthis.composePanorama();\n\n\t};\n\n\tthis.composePanorama = function () {\n\t\n\t\tthis.setProgress(0, 1);\n\t\t\n\t\tvar w = levelsW[ _zoom ],\n\t\t\th = levelsH[ _zoom ],\n\t\t\tself = this,\n\t\t\turl,\n\t\t\tx,\n\t\t\ty;\n\t\t\t\n\t\t_count = 0;\n\t\t_total = w * h;\n\n\t\tvar self = this;\n\t\tfor( var y = 0; y < h; y++ ) {\n\t\t\tfor( var x = 0; x < w; x++ ) {\n\t\t\t\tvar url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + _zoom + '&x=' + x + '&y=' + y + '&panoid=' + _panoId + '&nbt&fover=2';\n\t\t\t\t( function( x, y ) { \n\t\t\t\t\tif( _parameters.useWebGL ) {\n\t\t\t\t\t\tvar texture = THREE.ImageUtils.loadTexture( url, null, function() {\n\t\t\t\t\t\t\tself.composeFromTile( x, y, texture );\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar img = new Image();\n\t\t\t\t\t\timg.addEventListener( 'load', function() {\n\t\t\t\t\t\t\tself.composeFromTile( x, y, this );\t\t\t\n\t\t\t\t\t\t} );\n\t\t\t\t\t\timg.crossOrigin = '';\n\t\t\t\t\t\timg.src = url;\n\t\t\t\t\t}\n\t\t\t\t} )( x, y );\n\t\t\t}\n\t\t}\n\t\t\n\t};\n\t\n\tthis.load = function ( panoid ) {\n\t\n\t\tthis.loadPano( panoid );\n\n\t};\n\n\tthis.loadPano = function( id ) {\n\n\t\tvar self = this;\n\t\t_panoClient.getPanoramaById( id, function (result, status) {\n\t\t\tif (status === google.maps.StreetViewStatus.OK) {\n\t\t\t\tself.result = result;\n\t\t\t\tif( self.onPanoramaData ) self.onPanoramaData( result );\n\t\t\t\t//var h = google.maps.geometry.spherical.computeHeading(location, result.location.latLng);\n\t\t\t\t//rotation = (result.tiles.centerHeading - h) * Math.PI / 180.0;\n\t\t\t\tcopyright = result.copyright;\n\t\t\t\tself.copyright = result.copyright;\n\t\t\t\t_panoId = result.location.pano;\n\t\t\t\tself.location = location;\n\t\t\t\tself.composePanorama();\n\t\t\t} else {\n\t\t\t\tif( self.onNoPanoramaData ) self.onNoPanoramaData( status );\n\t\t\t\tself.throwError('Could not retrieve panorama for the following reason: ' + status);\n\t\t\t}\n\t\t});\n\t\t\n\t};\n\t\n\tthis.setZoom = function( z ) {\n\t\t_zoom = z;\n\t\tthis.adaptTextureToZoom();\n\t};\n\n\tthis.setZoom( _parameters.zoom || 1 );\n\n};;(function(){\n\n    'use strict';\n\n    /**\n     * Data Image Source\n     * @type {String}\n     */\n    PANOLENS.DataImageSource = 'https://pchen66.github.io/Panolens/asset/icon/';\n\n    /**\n     * Data Image\n     * @memberOf PANOLENS\n     * @enum {string}\n     */\n    PANOLENS.DataImage = {\n        Info:               PANOLENS.DataImageSource + 'information.png',\n        Arrow:              PANOLENS.DataImageSource + 'arrow-up.png',\n        FullscreenEnter:    PANOLENS.DataImageSource + 'fullscreen.png',\n        FullscreenLeave:    PANOLENS.DataImageSource + 'fullscreen-exit.png',\n        VideoPlay:          PANOLENS.DataImageSource + 'video-play.png',\n        VideoPause:         PANOLENS.DataImageSource + 'pause.png',\n        WhiteTile:          PANOLENS.DataImageSource + 'tiles.png',\n        ReticleIdle:        PANOLENS.DataImageSource + 'reticle-idle.png',\n        Setting:            PANOLENS.DataImageSource + 'setting.png',\n        ChevronRight:       PANOLENS.DataImageSource + 'chevron-right.png',\n        Check:              PANOLENS.DataImageSource + 'check.png',\n        ViewIndicator:      PANOLENS.DataImageSource + 'view-indicator.svg',\n        ReticleDwell:       PANOLENS.DataImageSource + 'reticle-animation.png'\n    };\n\n})();;(function(){\n\n\t'use strict';\n\t\n\t/**\n\t * Control Index Enum\n\t * @memberOf PANOLENS\n\t * @enum {number}\n\t */\n\t\n\tPANOLENS.Controls = {\n\n\t\tORBIT: 0,\n\n\t\tDEVICEORIENTATION: 1\n\n\t};\n\n\t/**\n\t * Effect Mode Enum\n\t * @memberOf PANOLENS\n\t * @enum {number}\n\t */\n\tPANOLENS.Modes = {\n\n\t\t/** Unknown */\n\t\tUNKNOWN: 0,\n\n\t\t/** Normal */\n\t\tNORMAL: 1,\n\n\t\t/** Google Cardboard*/\n\t\tCARDBOARD: 2,\n\n\t\t/** Stereoscopic **/\n\t\tSTEREO: 3\n\n\t};\n\n})();;(function(){\n\t\n\t'use strict';\n\n\t/**\n\t * Utility\n\t * @namespace PANOLENS.Utils\n\t * @memberOf PANOLENS\n\t * @type {object}\n\t */\n\tPANOLENS.Utils = {};\n\n\tPANOLENS.Utils.checkTouchSupported = function () {\n\n\t\treturn window ? 'ontouchstart' in window || window.navigator.msMaxTouchPoints : false;\n\n\t};\n\n})();;(function(){\n\t\n\t'use strict';\n\n\t/**\n\t * Image loader with progress based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/ImageLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n\tPANOLENS.Utils.ImageLoader = {};\n\n\t/**\n\t * Load an image with XMLHttpRequest to provide progress checking\n\t * @param  {string}   url        - An image url\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {HTMLImageElement}    - DOM image element\n\t */\n\n\tPANOLENS.Utils.ImageLoader.load = function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar cached, request, arrayBufferView, blob, urlCreator, image, reference;\n\n\t\t// Reference key\n\t\tfor ( var iconName in PANOLENS.DataImage ) {\n\n\t\t\tif ( PANOLENS.DataImage.hasOwnProperty( iconName ) \n\t\t\t\t&& url === PANOLENS.DataImage[ iconName ] ) {\n\n\t\t\t\treference = iconName;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Cached\n\t\tcached = THREE.Cache.get( reference ? reference : url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tif ( onLoad ) {\n\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onProgress ) {\n\n\t\t\t\t\t\tonProgress( { loaded: 1, total: 1 } );\n\n\t\t\t\t\t} \n\t\t\t\t\t\n\t\t\t\t\tonLoad( cached );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t\treturn cached;\n\n\t\t}\n\t\t\n\t\t// Construct a new XMLHttpRequest\n\t\turlCreator = window.URL || window.webkitURL;\n\t\timage = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\t// Add to cache\n\t\tTHREE.Cache.add( reference ? reference : url, image );\n\n\t\tfunction onImageLoaded () {\n\n\t\t\turlCreator.revokeObjectURL( image.src );\n\t\t\tonLoad && onLoad( image );\n\n\t\t}\n\n\t\tif ( url.indexOf( 'data:' ) === 0 ) {\n\n\t\t\timage.addEventListener( 'load', onImageLoaded, false );\n\t\t\timage.src = url;\n\t\t\treturn image;\n\t\t}\n\n\t\timage.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : '';\n\n\t\trequest = new XMLHttpRequest();\n\t\trequest.open( 'GET', url, true );\n\t\trequest.responseType = 'arraybuffer';\n\t\trequest.onprogress = function ( event ) {\n\n\t\t    if ( event.lengthComputable ) {\n\n\t\t      onProgress && onProgress( { loaded: event.loaded, total: event.total } );\n\n\t\t    }\n\n\t\t};\n\t\trequest.onloadend = function( event ) {\n\n\t\t    arrayBufferView = new Uint8Array( this.response );\n\t\t    blob = new Blob( [ arrayBufferView ] );\n\t\t    \n\t\t    image.addEventListener( 'load', onImageLoaded, false );\n\t\t\timage.src = urlCreator.createObjectURL( blob );\n\n\t\t};\n\n\t\trequest.send(null);\n\n\t};\n\n\t// Enable cache\n\tTHREE.Cache.enabled = true;\n\n})();;(function(){\n\t\n\t'use strict';\n\n\t/**\n\t * Texture loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/TextureLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n\tPANOLENS.Utils.TextureLoader = {};\n\n\t/**\n\t * Load image texture\n\t * @param  {string}   url        - An image url\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {THREE.Texture}   \t - Image texture\n\t */\n\tPANOLENS.Utils.TextureLoader.load = function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new THREE.Texture(); \n\n\t\tPANOLENS.Utils.ImageLoader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tonLoad && onLoad( texture );\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t};\n\n})();;(function(){\n\t\n\t'use strict';\n\n\t/**\n\t * Cube Texture Loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/CubeTextureLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n\tPANOLENS.Utils.CubeTextureLoader = {};\n\n\t/**\n\t * Load 6 images as a cube texture\n\t * @param  {array}   urls        - Array with 6 image urls\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {THREE.CubeTexture}   - Cube texture\n\t */\n\tPANOLENS.Utils.CubeTextureLoader.load = function ( urls, onLoad, onProgress, onError ) {\n\n\t\tvar texture, loaded, progress, all, loadings;\n\n\t\ttexture = new THREE.CubeTexture( [] );\n\n\t\tloaded = 0;\n\t\tprogress = {};\n\t\tall = {};\n\n\t\turls.map( function ( url, index ) {\n\n\t\t\tPANOLENS.Utils.ImageLoader.load( url, function ( image ) {\n\n\t\t\t\ttexture.images[ index ] = image;\n\n\t\t\t\tloaded++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tonLoad && onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, function ( event ) {\n\n\t\t\t\tprogress[ index ] = { loaded: event.loaded, total: event.total };\n\n\t\t\t\tall.loaded = 0;\n\t\t\t\tall.total = 0;\n\t\t\t\tloadings = 0;\n\n\t\t\t\tfor ( var i in progress ) {\n\n\t\t\t\t\tloadings++;\n\t\t\t\t\tall.loaded += progress[ i ].loaded;\n\t\t\t\t\tall.total += progress[ i ].total;\n\n\t\t\t\t}\n\n\t\t\t\tif ( loadings < 6 ) {\n\n\t\t\t\t\tall.total = all.total / loadings * 6;\n\n\t\t\t\t}\n\n\t\t\t\tonProgress && onProgress( all );\n\n\t\t\t}, onError );\n\n\t\t} );\n\n\t\treturn texture;\n\n\t};\n\n})();;/**\n * Stereographic projection shader\n * based on http://notlion.github.io/streetview-stereographic\n * @author pchen66\n */\n\nPANOLENS.StereographicShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\":   { value: new THREE.Texture() },\n\t\t\"resolution\": { value: 1.0 },\n\t\t\"transform\":  { value: new THREE.Matrix4() },\n\t\t\"zoom\": \t  { value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = vec4( position, 1.0 );\",\n\n\t\t\"}\" \n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"uniform float resolution;\",\n\t\t\"uniform mat4 transform;\",\n\t\t\"uniform float zoom;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"const float PI = 3.141592653589793;\",\n\n\t\t\"void main(){\",\n\n\t\t\t\"vec2 position = -1.0 +  2.0 * vUv;\",\n\n\t\t\t\"position *= vec2( zoom * resolution, zoom * 0.5 );\",\n\n\t\t\t\"float x2y2 = position.x * position.x + position.y * position.y;\",\n\t\t\t\"vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );\",\n\n\t\t\t\"sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );\",\n\n\t\t\t\"vec2 sampleUV = vec2(\",\n\t\t\t\t\"(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,\",\n\t\t\t\t\"(asin(sphere_pnt.z) / PI + 0.5)\",\n\t\t\t\");\",\n\n\t\t\t\"gl_FragColor = texture2D( tDiffuse, sampleUV );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};;( function () {\n\n\t'use strict';\n\n\t/**\n\t * Skeleton panorama derived from THREE.Mesh\n\t * @constructor\n\t * @param {THREE.Geometry} geometry - The geometry for this panorama\n\t * @param {THREE.Material} material - The material for this panorama\n\t */\n\tPANOLENS.Panorama = function ( geometry, material ) {\n\n\t\tTHREE.Mesh.call( this );\n\n\t\tthis.type = 'panorama';\n\n\t\tthis.ImageQualityLow = 1;\n\t\tthis.ImageQualityFair = 2;\n\t\tthis.ImageQualityMedium = 3;\n\t\tthis.ImageQualityHigh = 4;\n\t\tthis.ImageQualitySuperHigh = 5;\n\n\t\tthis.animationDuration = 1000;\n\n\t\tthis.defaultInfospotSize = 350;\n\n\t\tthis.container = undefined;\n\n\t\tthis.loaded = false;\n\n\t\tthis.linkedSpots = [];\n\n\t\tthis.isInfospotVisible = false;\n\t\t\n\t\tthis.linkingImageURL = undefined;\n\t\tthis.linkingImageScale = undefined;\n\n\t\tthis.geometry = geometry;\n\n\t\tthis.material = material;\n\t\tthis.material.side = THREE.DoubleSide;\n\t\tthis.material.visible = false;\n\n\t\tthis.scale.x *= -1;\n\n\t\tthis.infospotAnimation = new TWEEN.Tween( this ).to( {}, this.animationDuration / 2 );\n\n\t\tthis.addEventListener( 'load', this.fadeIn.bind( this ) );\n\t\tthis.addEventListener( 'panolens-container', this.setContainer.bind( this ) );\n\t\tthis.addEventListener( 'click', this.onClick.bind( this ) );\n\n\t\tthis.setupTransitions();\n\n\t}\n\n\tPANOLENS.Panorama.prototype = Object.create( THREE.Mesh.prototype );\n\n\tPANOLENS.Panorama.prototype.constructor = PANOLENS.Panorama;\n\n\t/**\n\t * Adding an object\n\t * To counter the scale.x = -1, it will automatically add an \n\t * empty object with inverted scale on x\n\t * @param {THREE.Object3D} object - The object to be added\n\t */\n\tPANOLENS.Panorama.prototype.add = function ( object ) {\n\n\t\tvar scope, invertedObject;\n\n\t\tscope = this;\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// In case of infospots\n\t\tif ( object instanceof PANOLENS.Infospot ) {\n\n\t\t\tinvertedObject = object;\n\n\t\t\tif ( object.dispatchEvent ) {\n\n\t\t\t\tthis.container && object.dispatchEvent( { type: 'panolens-container', container: this.container } );\n\t\t\t\t\n\t\t\t\tobject.dispatchEvent( { type: 'panolens-infospot-focus', method: function ( vector, duration, easing ) {\n\n\t\t\t\t\t/**\n\t\t        \t * Infospot focus handler event\n\t\t        \t * @type {object}\n\t\t        \t * @event PANOLENS.Panorama#panolens-viewer-handler\n\t\t        \t * @property {string} method - Viewer function name\n\t\t        \t * @property {*} data - The argument to be passed into the method\n\t\t        \t */\n\t\t        \tscope.dispatchEvent( { type : 'panolens-viewer-handler', method: 'tweenControlCenter', data: [ vector, duration, easing ] } );\n\n\n\t\t\t\t} } );\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Counter scale.x = -1 effect\n\t\t\tinvertedObject = new THREE.Object3D();\n\t\t\tinvertedObject.scale.x = -1;\n\t\t\tinvertedObject.scalePlaceHolder = true;\n\t\t\tinvertedObject.add( object );\n\n\t\t}\n\n\t\tTHREE.Object3D.prototype.add.call( this, invertedObject );\n\n\t};\n\n\tPANOLENS.Panorama.prototype.load = function () {\n\n\t\tthis.onLoad();\n\t\t\n\t};\n\n\t/**\n\t * Click event handler\n\t * @param  {object} event - Click event\n\t * @fires PANOLENS.Infospot#dismiss\n\t */\n\tPANOLENS.Panorama.prototype.onClick = function ( event ) {\n\n\t\tif ( event.intersects && event.intersects.length === 0 ) {\n\n\t\t\tthis.traverse( function ( object ) {\n\n\t\t\t\t/**\n\t\t\t\t * Dimiss event\n\t\t\t\t * @type {object}\n\t\t\t\t * @event PANOLENS.Infospot#dismiss\n\t\t\t\t */\n\t\t\t\tobject.dispatchEvent( { type: 'dismiss' } );\n\n\t\t\t} );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set container of this panorama \n\t * @param {HTMLElement|object} data - Data with container information\n\t * @fires PANOLENS.Infospot#panolens-container\n\t */\n\tPANOLENS.Panorama.prototype.setContainer = function ( data ) {\n\n\t\tvar container;\n\n\t\tif ( data instanceof HTMLElement ) {\n\n\t\t\tcontainer = data;\n\n\t\t} else if ( data && data.container ) {\n\n\t\t\tcontainer = data.container;\n\n\t\t}\n\n\t\tif ( container ) {\n\n\t\t\tthis.children.forEach( function ( child ) {\n\n\t\t\t\tif ( child instanceof PANOLENS.Infospot && child.dispatchEvent ) {\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Set container event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @event PANOLENS.Infospot#panolens-container\n\t\t\t\t\t * @property {HTMLElement} container - The container of this panorama\n\t\t\t\t\t */\n\t\t\t\t\tchild.dispatchEvent( { type: 'panolens-container', container: container } );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tthis.container = container;\n\n\t\t}\n\t\t\n\n\t};\n\n\t/**\n\t * This will be called when panorama is loaded\n\t * @fires PANOLENS.Panorama#load\n\t */\n\tPANOLENS.Panorama.prototype.onLoad = function () {\n\n\t\tthis.loaded = true;\n\n\t\t/**\n\t\t * Load panorama event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#load\n\t\t */\n\t\tthis.dispatchEvent( { type: 'load' } );\n\n\t};\n\n\t/**\n\t * This will be called when panorama is in progress\n\t * @fires PANOLENS.Panorama#progress\n\t */\n\tPANOLENS.Panorama.prototype.onProgress = function ( progress ) {\n\n\t\t/**\n\t\t * Loading panorama progress event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#progress\n\t \t * @property {object} progress - The progress object containing loaded and total amount\n\t\t */\n\t\tthis.dispatchEvent( { type: 'progress', progress: progress } );\n\n\t};\n\n\t/**\n\t * This will be called when panorama loading has error\n\t * @fires PANOLENS.Panorama#error\n\t */\n\tPANOLENS.Panorama.prototype.onError = function () {\n\n\t\t/**\n\t\t * Loading panorama error event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#error\n\t\t */\n\t\tthis.dispatchEvent( { type: 'error' } );\n\n\t};\n\n\t/**\n\t * Get zoom level based on window width\n\t * @return {number} zoom level indicating image quality\n\t */\n\tPANOLENS.Panorama.prototype.getZoomLevel = function () {\n\n\t\tvar zoomLevel;\n\n\t\tif ( window.innerWidth <= 800 ) {\n\n\t\t\tzoomLevel = this.ImageQualityFair;\n\n\t\t} else if ( window.innerWidth > 800 &&  window.innerWidth <= 1280 ) {\n\n\t\t\tzoomLevel = this.ImageQualityMedium;\n\n\t\t} else if ( window.innerWidth > 1280 && window.innerWidth <= 1920 ) {\n\n\t\t\tzoomLevel = this.ImageQualityHigh;\n\n\t\t} else if ( window.innerWidth > 1920 ) {\n\n\t\t\tzoomLevel = this.ImageQualitySuperHigh;\n\n\t\t} else {\n\n\t\t\tzoomLevel = this.ImageQualityLow;\n\n\t\t}\n\n\t\treturn zoomLevel;\n\n\t};\n\n\t/**\n\t * Update texture of a panorama\n\t * @param {THREE.Texture} texture - Texture to be updated\n\t */\n\tPANOLENS.Panorama.prototype.updateTexture = function ( texture ) {\n\n\t\tthis.material.map = texture;\n\n\t\tthis.material.needsUpdate = true;\n\n\t};\n\n\t/**\n\t * Toggle visibility of infospots in this panorama\n\t * @param  {boolean} isVisible - Visibility of infospots\n\t * @param  {number} delay - Delay in milliseconds to change visibility\n\t * @fires PANOLENS.Panorama#infospot-animation-complete\n\t */\n\tPANOLENS.Panorama.prototype.toggleInfospotVisibility = function ( isVisible, delay ) {\n\n\t\tdelay = ( delay !== undefined ) ? delay : 0;\n\n\t\tvar scope, visible;\n\n\t\tscope = this;\n\t\tvisible = ( isVisible !== undefined ) ? isVisible : ( this.isInfospotVisible ? false : true );\n\n\t\tthis.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof PANOLENS.Infospot ) {\n\n\t\t\t\tvisible ? object.show( delay ) : object.hide( delay );\n\n\t\t\t}\n\n\t\t} );\n\n\t\tthis.isInfospotVisible = visible;\n\n\t\t// Animation complete event\n\t\tthis.infospotAnimation.onComplete( function () {\n\n\t\t\t/**\n\t\t\t * Complete toggling infospot visibility\n\t\t\t * @event PANOLENS.Panorama#infospot-animation-complete\n\t\t\t * @type {object} \n\t\t\t */\n\t\t\tscope.dispatchEvent( { type : 'infospot-animation-complete', visible: visible } );\n\n\t\t} ).delay( delay ).start();\n\n\t};\n\n\t/**\n\t * Set image of this panorama's linking infospot\n\t * @param {string} url   - Url to the image asset\n\t * @param {number} scale - Scale factor of the infospot\n\t */\n\tPANOLENS.Panorama.prototype.setLinkingImage = function ( url, scale ) {\n\n\t\tthis.linkingImageURL = url;\n\t\tthis.linkingImageScale = scale;\n\n\t};\n\n\t/**\n\t * Link one-way panorama\n\t * @param  {PANOLENS.Panorama} pano  - The panorama to be linked to\n\t * @param  {THREE.Vector3} position - The position of infospot which navigates to the pano\n\t * @param  {number} [imageScale=300] - Image scale of linked infospot\n\t * @param  {string} [imageSrc=PANOLENS.DataImage.Arrow] - The image source of linked infospot\n\t */\n\tPANOLENS.Panorama.prototype.link = function ( pano, position, imageScale, imageSrc ) {\n\n\t\tvar scope = this, spot, scale, img;\n\n\t\tthis.visible = true;\n\n\t\tif ( !position ) {\n\n\t\t\tconsole.warn( 'Please specify infospot position for linking' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Infospot scale\n\t\tif ( imageScale !== undefined ) {\n\n\t\t\tscale = imageScale;\n\n\t\t} else if ( pano.linkingImageScale !== undefined ) {\n\n\t\t\tscale = pano.linkingImageScale;\n\n\t\t} else {\n\n\t\t\tscale = 300;\n\n\t\t}\n\n\n\t\t// Infospot image\n\t\tif ( imageSrc ) {\n\n\t\t\timg = imageSrc\n\n\t\t} else if ( pano.linkingImageURL ) {\n\n\t\t\timg = pano.linkingImageURL;\n\n\t\t} else {\n\n\t\t\timg = PANOLENS.DataImage.Arrow;\n\n\t\t}\n\n\t\t// Creates a new infospot\n\t\tspot = new PANOLENS.Infospot( scale, img );\n        spot.position.copy( position );\n        spot.toPanorama = pano;\n        spot.addEventListener( 'click', function () {\n\n        \t/**\n        \t * Viewer handler event\n        \t * @type {object}\n        \t * @event PANOLENS.Panorama#panolens-viewer-handler\n        \t * @property {string} method - Viewer function name\n        \t * @property {*} data - The argument to be passed into the method\n        \t */\n        \tscope.dispatchEvent( { type : 'panolens-viewer-handler', method: 'setPanorama', data: pano } );\n\n        } );\n\n        this.linkedSpots.push( spot );\n\n        this.add( spot );\n\n        this.visible = false;\n\n\t};\n\n\tPANOLENS.Panorama.prototype.reset = function () {\n\n\t\tthis.children.length = 0;\t\n\n\t};\n\n\tPANOLENS.Panorama.prototype.setupTransitions = function () {\n\n\t\tthis.fadeInAnimation = new TWEEN.Tween( this.material )\n\t\t\t.easing( TWEEN.Easing.Quartic.Out )\n\t\t\t.onStart( function () {\n\n\t\t\t\tthis.visible = true;\n\t\t\t\tthis.material.visible = true;\n\n\t\t\t\t/**\n\t\t\t\t * Enter panorama fade in start event\n\t\t\t\t * @event PANOLENS.Panorama#enter-fade-start\n\t\t\t\t * @type {object} \n\t\t\t\t */\n\t\t\t\tthis.dispatchEvent( { type: 'enter-fade-start' } );\n\n\t\t\t}.bind( this ) );\n\n\t\tthis.fadeOutAnimation = new TWEEN.Tween( this.material )\n\t\t\t.easing( TWEEN.Easing.Quartic.Out )\n\t\t\t.onComplete( function () {\n\n\t\t\t\tthis.visible = false;\n\t\t\t\tthis.material.visible = true;\n\n\t\t\t\t/**\n\t\t\t\t * Leave panorama complete event\n\t\t\t\t * @event PANOLENS.Panorama#leave-complete\n\t\t\t\t * @type {object} \n\t\t\t\t */\n\t\t\t\tthis.dispatchEvent( { type: 'leave-complete' } );\n\n\t\t\t}.bind( this ) );\n\n\t\tthis.enterTransition = new TWEEN.Tween( this )\n\t\t\t.easing( TWEEN.Easing.Quartic.Out )\n\t\t\t.onComplete( function () {\n\n\t\t\t\t/**\n\t\t\t\t * Enter panorama and animation complete event\n\t\t\t\t * @event PANOLENS.Panorama#enter-animation-complete\n\t\t\t\t * @type {object} \n\t\t\t\t */\n\t\t\t\tthis.dispatchEvent( { type: 'enter-animation-complete' } );\n\n\t\t\t}.bind ( this ) )\n\t\t\t.start();\n\n\t\tthis.leaveTransition = new TWEEN.Tween( this )\n\t\t\t.easing( TWEEN.Easing.Quartic.Out );\n\n\t};\n\n\t/**\n\t * Start fading in animation\n\t * @fires PANOLENS.Panorama#enter-fade-complete\n\t */\n\tPANOLENS.Panorama.prototype.fadeIn = function ( duration ) {\n\n\t\tduration = duration >= 0 ? duration : this.animationDuration;\n\n\t\tthis.fadeOutAnimation.stop();\n\t\tthis.fadeInAnimation\n\t\t.to( { opacity: 1 }, duration )\n\t\t.onComplete( function () {\n\n\t\t\t\tthis.toggleInfospotVisibility( true, duration / 2 );\n\n\t\t\t\t/**\n\t\t\t\t * Enter panorama fade complete event\n\t\t\t\t * @event PANOLENS.Panorama#enter-fade-complete\n\t\t\t\t * @type {object} \n\t\t\t\t */\n\t\t\t\tthis.dispatchEvent( { type: 'enter-fade-complete' } );\t\t\t\n\n\t\t\t}.bind( this ) )\n\t\t.start();\n\n\t};\n\n\t/**\n\t * Start fading out animation\n\t */\n\tPANOLENS.Panorama.prototype.fadeOut = function ( duration ) {\n\n\t\tduration = duration >= 0 ? duration : this.animationDuration;\n\n\t\tthis.fadeInAnimation.stop();\n\t\tthis.fadeOutAnimation.to( { opacity: 0 }, duration ).start();\n\n\t};\n\n\t/**\n\t * This will be called when entering a panorama \n\t * @fires PANOLENS.Panorama#enter\n\t * @fires PANOLENS.Panorama#enter-animation-start\n\t */\n\tPANOLENS.Panorama.prototype.onEnter = function () {\n\n\t\tvar duration = this.animationDuration;\n\n\t\tthis.leaveTransition.stop();\n\t\tthis.enterTransition\n\t\t\t.to( {}, duration )\n\t\t\t.onStart( function () {\n\n\t\t\t\t/**\n\t\t\t\t * Enter panorama and animation starting event\n\t\t\t\t * @event PANOLENS.Panorama#enter-animation-start\n\t\t\t\t * @type {object} \n\t\t\t\t */\n\t\t\t\tthis.dispatchEvent( { type: 'enter-animation-start' } );\n\t\t\t\t\n\t\t\t\tif ( this.loaded ) {\n\n\t\t\t\t\tthis.fadeIn( duration );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.load();\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}.bind( this ) )\n\t\t\t.start();\n\n\t\t/**\n\t\t * Enter panorama event\n\t\t * @event PANOLENS.Panorama#enter\n\t\t * @type {object} \n\t\t */\n\t\tthis.dispatchEvent( { type: 'enter' } );\n\n\t};\n\n\t/**\n\t * This will be called when leaving a panorama\n\t * @fires PANOLENS.Panorama#leave\n\t */\n\tPANOLENS.Panorama.prototype.onLeave = function () {\n\n\t\tvar duration = this.animationDuration;\n\n\t\tthis.enterTransition.stop();\n\t\tthis.leaveTransition\n\t\t\t.to( {}, duration )\n\t\t\t.onStart( function () {\n\n\t\t\t\t/**\n\t\t\t\t * Leave panorama and animation starting event\n\t\t\t\t * @event PANOLENS.Panorama#leave-animation-start\n\t\t\t\t * @type {object} \n\t\t\t\t */\n\t\t\t\tthis.dispatchEvent( { type: 'leave-animation-start' } );\n\n\t\t\t\tthis.fadeOut( duration );\n\t\t\t\tthis.toggleInfospotVisibility( false );\n\n\t\t\t}.bind( this ) )\n\t\t\t.start();\n\n\t\t/**\n\t\t * Leave panorama event\n\t\t * @event PANOLENS.Panorama#leave\n\t\t * @type {object} \n\t\t */\n\t\tthis.dispatchEvent( { type: 'leave' } );\n\n\t};\n\n\t/**\n\t * Dispose panorama\n\t */\n\tPANOLENS.Panorama.prototype.dispose = function () {\n\n\t\t/**\n    \t * On panorama dispose handler\n    \t * @type {object}\n    \t * @event PANOLENS.Panorama#panolens-viewer-handler\n    \t * @property {string} method - Viewer function name\n    \t * @property {*} data - The argument to be passed into the method\n    \t */\n    \tthis.dispatchEvent( { type : 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this } );\n\n\t\t// recursive disposal on 3d objects\n\t\tfunction recursiveDispose ( object ) {\n\n\t\t\tfor ( var i = object.children.length - 1; i >= 0; i-- ) {\n\n\t\t\t\trecursiveDispose( object.children[i] );\n\t\t\t\tobject.remove( object.children[i] );\n\n\t\t\t}\n\n\t\t\tif ( object instanceof PANOLENS.Infospot ) {\n\n\t\t\t\tobject.dispose();\n\n\t\t\t}\n\t\t\t\n\t\t\tobject.geometry && object.geometry.dispose();\n\t\t\tobject.material && object.material.dispose();\n\t\t}\n\n\t\trecursiveDispose( this );\n\n\t\tif ( this.parent ) {\n\n\t\t\tthis.parent.remove( this );\n\n\t\t}\n\n\t};\n\n} )();;(function(){\n\t\n\t'use strict';\n\t\n\t/**\n\t * Equirectangular based image panorama\n\t * @constructor\n\t * @param {string} image - Image url or HTMLImageElement\n\t * @param {number} [radius=5000] - Radius of panorama\n\t */\n\tPANOLENS.ImagePanorama = function ( image, radius ) {\n\n\t\tradius = radius || 5000;\n\n\t\tvar geometry = new THREE.SphereGeometry( radius, 60, 40 ),\n\t\t\tmaterial = new THREE.MeshBasicMaterial( { opacity: 0, transparent: true } );\n\n\t\tPANOLENS.Panorama.call( this, geometry, material );\n\n\t\tthis.src = image;\n\n\t}\n\n\tPANOLENS.ImagePanorama.prototype = Object.create( PANOLENS.Panorama.prototype );\n\n\tPANOLENS.ImagePanorama.prototype.constructor = PANOLENS.ImagePanorama;\n\n\t/**\n\t * Load image asset\n\t * @param  {*} src - Url or image element\n\t */\n\tPANOLENS.ImagePanorama.prototype.load = function ( src ) {\n\n\t\tsrc = src || this.src;\n\n\t\tif ( !src ) { \n\n\t\t\tconsole.warn( 'Image source undefined' );\n\n\t\t\treturn; \n\n\t\t} else if ( typeof src === 'string' ) {\n\n\t\t\tPANOLENS.Utils.TextureLoader.load( src, this.onLoad.bind( this ), this.onProgress.bind( this ), this.onError.bind( this ) );\n\n\t\t} else if ( src instanceof HTMLImageElement ) {\n\n\t\t\tthis.onLoad( new THREE.Texture( src ) );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * This will be called when image is loaded\n\t * @param  {THREE.Texture} texture - Texture to be updated\n\t */\n\tPANOLENS.ImagePanorama.prototype.onLoad = function ( texture ) {\n\n\t\ttexture.minFilter = texture.magFilter = THREE.LinearFilter;\n\n\t\ttexture.needsUpdate = true;\n\n\t\tthis.updateTexture( texture );\n\n\t\t// Call onLoad after second frame being painted\n\t\twindow.requestAnimationFrame(function(){\n\n\t\t\twindow.requestAnimationFrame(function(){\n\n\t\t\t\tPANOLENS.Panorama.prototype.onLoad.call( this );\n\t\t\t\t\n\n\t\t\t}.bind(this));\n\n\t\t}.bind(this));\n\n\t\t\n\n\t};\n\n\tPANOLENS.ImagePanorama.prototype.reset = function () {\n\n\t\tPANOLENS.Panorama.prototype.reset.call( this );\n\n\t};\n\n})();;(function(){\n\n\t'use strict';\n\t\n\t/**\n\t * Google streetview panorama\n\t * \n\t * [How to get Panorama ID]{@link http://stackoverflow.com/questions/29916149/google-maps-streetview-how-to-get-panorama-id}\n\t * @constructor\n\t * @param {string} panoId - Panorama id from Google Streetview \n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n\tPANOLENS.GoogleStreetviewPanorama = function ( panoId, radius ) {\n\n\t\tPANOLENS.ImagePanorama.call( this, undefined, radius );\n\n\t\tthis.panoId = panoId;\n\n\t\tthis.gsvLoader = undefined;\n\n\t\tthis.loadRequested = false;\n\n\t\tthis.setupGoogleMapAPI();\n\n\t}\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype = Object.create( PANOLENS.ImagePanorama.prototype );\n\n\tPANOLENS.GoogleStreetviewPanorama.constructor = PANOLENS.GoogleStreetviewPanorama;\n\n\t/**\n\t * Load Google Street View by panorama id\n\t * @param {string} panoId - Gogogle Street View panorama id\n\t */\n\tPANOLENS.GoogleStreetviewPanorama.prototype.load = function ( panoId ) {\n\n\t\tthis.loadRequested = true;\n\n\t\tpanoId = ( panoId || this.panoId ) || {};\n\n\t\tif ( panoId && this.gsvLoader ) {\n\n\t\t\tthis.loadGSVLoader( panoId );\n\n\t\t} else {\n\n\t\t\tthis.gsvLoader = {};\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Setup Google Map API\n\t */\n\tPANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI = function () {\n\n\t\tvar script = document.createElement( 'script' );\n\t\tscript.src = 'https://maps.googleapis.com/maps/api/js';\n\t\tscript.onreadystatechange = this.setGSVLoader.bind( this );\n    \tscript.onload = this.setGSVLoader.bind( this );\n\n\t\tdocument.getElementsByTagName('head')[0].appendChild( script );\n\n\t};\n\n\t/**\n\t * Set GSV Loader\n\t */\n\tPANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader = function () {\n\n\t\tthis.gsvLoader = new GSVPANO.PanoLoader();\n\n\t\tif ( this.gsvLoader === {} || this.loadRequested ) {\n\n\t\t\tthis.load();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Get GSV Loader\n\t * @return {object} GSV Loader instance\n\t */\n\tPANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader = function () {\n\n\t\treturn this.gsvLoader;\n\n\t};\n\n\t/**\n\t * Load GSV Loader\n\t * @param  {string} panoId - Gogogle Street View panorama id\n\t */\n\tPANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader = function ( panoId ) {\n\n\t\tthis.loadRequested = false;\n\n\t\tthis.gsvLoader.onProgress = this.onProgress.bind( this );\n\n\t\tthis.gsvLoader.onPanoramaLoad = this.onLoad.bind( this );\n\n\t\tthis.gsvLoader.setZoom( this.getZoomLevel() );\n\n\t\tthis.gsvLoader.load( panoId );\n\n\t\tthis.gsvLoader.loaded = true;\n\t};\n\n\t/**\n\t * This will be called when panorama is loaded\n\t * @param  {HTMLCanvasElement} canvas - Canvas where the tiles have been drawn\n\t */\n\tPANOLENS.GoogleStreetviewPanorama.prototype.onLoad = function ( canvas ) {\n\n\t\tif ( !this.gsvLoader ) { return; }\n\n\t\tPANOLENS.ImagePanorama.prototype.onLoad.call( this, new THREE.Texture( canvas ) );\n\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.reset = function () {\n\n\t\tthis.gsvLoader = undefined;\n\n\t\tPANOLENS.ImagePanorama.prototype.reset.call( this );\n\n\t};\n\n})();;(function(){\n\t\n\t'use strict';\n\t\n\t/**\n\t * Cubemap-based panorama\n\t * @constructor\n\t * @param {array} images - An array of cubetexture containing six images\n\t * @param {number} [edgeLength=10000] - The length of cube's edge\n\t */\n\tPANOLENS.CubePanorama = function ( images, edgeLength ){\n\n\t\tvar shader, geometry, material;\n\n\t\tthis.images = images || [];\n\n\t\tedgeLength = edgeLength || 10000;\n\t\tshader = JSON.parse( JSON.stringify( THREE.ShaderLib[ 'cube' ] ) );\n\n\t\tgeometry = new THREE.BoxGeometry( edgeLength, edgeLength, edgeLength );\n\t\tmaterial = new THREE.ShaderMaterial( {\n\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tuniforms: shader.uniforms,\n\t\t\tside: THREE.BackSide\n\n\t\t} );\n\n\t\tPANOLENS.Panorama.call( this, geometry, material );\n\n\t}\n\n\tPANOLENS.CubePanorama.prototype = Object.create( PANOLENS.Panorama.prototype );\n\n\tPANOLENS.CubePanorama.prototype.constructor = PANOLENS.CubePanorama;\n\n\t/**\n\t * Load 6 images and bind listeners\n\t */\n\tPANOLENS.CubePanorama.prototype.load = function () {\n\n\t\tPANOLENS.Utils.CubeTextureLoader.load( \t\n\n\t\t\tthis.images, \n\n\t\t\tthis.onLoad.bind( this ), \n\t\t\tthis.onProgress.bind( this ), \n\t\t\tthis.onError.bind( this ) \n\n\t\t);\n\n\t};\n\n\t/**\n\t * This will be called when 6 textures are ready\n\t * @param  {THREE.CubeTexture} texture - Cube texture\n\t */\n\tPANOLENS.CubePanorama.prototype.onLoad = function ( texture ) {\n\t\t\n\t\tthis.material.uniforms[ 'tCube' ].value = texture;\n\n\t\tPANOLENS.Panorama.prototype.onLoad.call( this );\n\n\t};\n\n})();;(function(){\n\n\t'use strict';\n\n\t/**\n\t * Basic panorama with 6 faces tile images\n\t * @constructor\n\t * @param {number} [edgeLength=10000] - The length of cube's edge\n\t */\n\tPANOLENS.BasicPanorama = function ( edgeLength ) {\n\t\t\n\t\tvar tile = PANOLENS.DataImage.WhiteTile;\n\n\t\tPANOLENS.CubePanorama.call( this, [ tile, tile, tile, tile, tile, tile ], edgeLength );\n\n\t}\n\n\tPANOLENS.BasicPanorama.prototype = Object.create( PANOLENS.CubePanorama.prototype );\n\n\tPANOLENS.BasicPanorama.prototype.constructor = PANOLENS.BasicPanorama;\n\n})();;(function(){\n\n\t'use strict';\n\n\t/**\n\t * Video Panorama\n\t * @constructor\n\t * @param {string} src - Equirectangular video url\n\t * @param {object} [options] - Option for video settings\n\t * @param {HTMLElement} [options.videoElement] - HTML5 video element contains the video\n\t * @param {boolean} [options.loop=true] - Specify if the video should loop in the end\n\t * @param {boolean} [options.muted=false] - Mute the video or not\n\t * @param {boolean} [options.autoplay=false] - Specify if the video should auto play\n\t * @param {boolean} [options.playsinline=true] - Specify if video should play inline for iOS. If you want it to auto play inline, set both autoplay and muted options to true\n\t * @param {string} [options.crossOrigin=\"anonymous\"] - Sets the cross-origin attribute for the video, which allows for cross-origin videos in some browsers (Firefox, Chrome). Set to either \"anonymous\" or \"use-credentials\".\n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n\tPANOLENS.VideoPanorama = function ( src, options, radius ) {\n\n\t\tradius = radius || 5000;\n\n\t\tvar geometry = new THREE.SphereGeometry( radius, 60, 40 ),\n\t\t\tmaterial = new THREE.MeshBasicMaterial( { opacity: 0, transparent: true } );\n\n\t\tPANOLENS.Panorama.call( this, geometry, material );\n\n\t\tthis.src = src;\n\t\tthis.options = options || {};\n\t\tthis.options.playsinline = this.options.playsinline !== false ? true : false;\n\n\t\tthis.videoElement = undefined;\n\t\tthis.videoRenderObject = undefined;\n\t\tthis.videoProgress = 0;\n\n\t\tthis.isIOS = /iPhone|iPad|iPod/i.test( navigator.userAgent );\n\t\tthis.isMobile = this.isIOS || /Android|BlackBerry|Opera Mini|IEMobile/i.test( navigator.userAgent );\n\n\t\tthis.addEventListener( 'leave', this.pauseVideo.bind( this ) );\n\t\tthis.addEventListener( 'enter-fade-start', this.resumeVideoProgress.bind( this ) );\n\t\tthis.addEventListener( 'video-toggle', this.toggleVideo.bind( this ) );\n\t\tthis.addEventListener( 'video-time', this.setVideoCurrentTime.bind( this ) );\n\n\t};\n\n\tPANOLENS.VideoPanorama.prototype = Object.create( PANOLENS.Panorama.prototype );\n\n\tPANOLENS.VideoPanorama.constructor = PANOLENS.VideoPanorama;\n\n\t/**\n\t * Load video panorama\n\t * @param  {string} src     - The video url\n\t * @param  {object} options - Option object containing videoElement\n\t * @fires  PANOLENS.Panorama#panolens-viewer-handler\n\t */\n\tPANOLENS.VideoPanorama.prototype.load = function ( src, options ) {\n\n\t\tvar scope = this;\n\n\t\tsrc = ( src || this.src ) || '';\n\t\toptions = ( options || this.options ) || {};\n\n\t\tthis.videoElement = options.videoElement || document.createElement( 'video' );\n\n\t\tthis.videoElement.muted = options.muted || false;\n\t\tthis.videoElement.loop = ( options.loop !== undefined ) ? options.loop : true;\n\t\tthis.videoElement.autoplay = ( options.autoplay !== undefined ) ? options.autoplay : false;\n\t\tthis.videoElement.crossOrigin = ( options.crossOrigin !== undefined ) ? options.crossOrigin : \"anonymous\";\n\t\t\n\t\t// iphone inline player\n\t\tif (options.playsinline) {\n\t\t\tthis.videoElement.setAttribute( \"playsinline\", \"\" );\n\t\t\tthis.videoElement.setAttribute( \"webkit-playsinline\", \"\" );\n\t\t} \n\n\t\tvar onloadeddata = function(){\n\n\t\t\tscope.onProgress( { loaded: 1, total: 1 } );\n\t\t\tscope.setVideoTexture( scope.videoElement );\n\n\t\t\tif ( scope.videoElement.autoplay ) {\n\n\t\t\t\t/**\n\t\t\t\t * Viewer handler event\n\t\t\t\t * @type {object}\n\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t */\n\t\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false } );\n\n\t\t\t}\n\n\t\t\t// For mobile silent autoplay\n\t\t\tif ( scope.isMobile ) {\n\n\t\t\t\tif ( scope.videoElement.autoplay && scope.videoElement.muted ) {\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Viewer handler event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t\t */\n\t\t\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false } );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Viewer handler event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t\t */\n\t\t\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true } );\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\n\t\t\tscope.onLoad();\n\t\t};\n\n\t\t/**\n\t\t * Ready state of the audio/video element\n\t\t * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready\n\t\t * 1 = HAVE_METADATA - metadata for the audio/video is ready\n\t\t * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond\n\t\t * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available\n\t\t * 4 = HAVE_ENOUGH_DATA - enough data available to start playing\n\t\t */\n\t\tif ( this.videoElement.readyState > 2 ) {\n\n\t\t\tonloadeddata();\n\n\t\t} else {\n\n\t\t\tif ( !this.videoElement.querySelectorAll('source').length || !this.videoElement.src ) {\n\n\t\t\t\tthis.videoElement.src =  src;\n\n\t\t\t}\n\n\t\t\tthis.videoElement.load();\n\t\t}\n\n\t\tthis.videoElement.onloadeddata = onloadeddata;\n\t\t\n\n\t\tthis.videoElement.ontimeupdate = function ( event ) {\n\n\t\t\tscope.videoProgress = this.duration >= 0 ? this.currentTime / this.duration : 0;\n\n\t\t\t/**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'onVideoUpdate'\n\t\t\t * @property {number} data - The percentage of video progress. Range from 0.0 to 1.0\n\t\t\t */\n\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: scope.videoProgress } );\n\n\t\t};\n\n\t\tthis.videoElement.addEventListener( 'ended', function () {\n\t\t\t\n\t\t\tif ( !scope.options.loop ) {\n\n\t\t\t\tscope.resetVideo();\n\t\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true } );\n\n\t\t\t}\n\n\t\t}, false ); \n\n\t};\n\n\t/**\n\t * Set video texture\n\t * @param {HTMLVideoElement} video  - The html5 video element\n\t * @fires PANOLENS.Panorama#panolens-viewer-handler\n\t */\n\tPANOLENS.VideoPanorama.prototype.setVideoTexture = function ( video ) {\n\n\t\tvar videoTexture, videoRenderObject, scene;\n\n\t\tif ( !video ) return;\n\n\t\tvideoTexture = new THREE.VideoTexture( video );\n\t\tvideoTexture.minFilter = THREE.LinearFilter;\n\t\tvideoTexture.magFilter = THREE.LinearFilter;\n\t\tvideoTexture.format = THREE.RGBFormat;\n\n\t\tvideoRenderObject = {\n\n\t\t\tvideo : video,\n\t\t\tvideoTexture: videoTexture\n\n\t\t};\n\n\t\tif ( this.isIOS ){\n\n\t\t\tenableInlineVideo( video );\n\n\t\t}\n\n\t\tthis.updateTexture( videoTexture );\n\n\t\tthis.videoRenderObject = videoRenderObject;\n\t\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.reset = function () {\n\n\t\tthis.videoElement = undefined;\t\n\n\t\tPANOLENS.Panorama.prototype.reset.call( this );\n\n\t};\n\n\t/**\n\t * Check if video is paused\n\t * @return {boolean} - is video paused or not\n\t */\n\tPANOLENS.VideoPanorama.prototype.isVideoPaused = function () {\n\n\t\treturn this.videoRenderObject.video.paused;\n\n\t};\n\n\t/**\n\t * Toggle video to play or pause\n\t */\n\tPANOLENS.VideoPanorama.prototype.toggleVideo = function () {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video ) {\n\n\t\t\tif ( this.isVideoPaused() ) {\n\n\t\t\t\tthis.videoRenderObject.video.play();\n\n\n\t\t\t} else {\n\n\t\t\t\tthis.videoRenderObject.video.pause();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set video currentTime\n\t * @param {object} event - Event contains percentage. Range from 0.0 to 1.0\n\t */\n\tPANOLENS.VideoPanorama.prototype.setVideoCurrentTime = function ( event ) {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video && !Number.isNaN(event.percentage) && event.percentage !== 1 ) {\n\n\t\t\tthis.videoRenderObject.video.currentTime = this.videoRenderObject.video.duration * event.percentage;\n\n\t\t\tthis.dispatchEvent( { type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: event.percentage } );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Play video\n\t */\n\tPANOLENS.VideoPanorama.prototype.playVideo = function () {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video && this.isVideoPaused() ) {\n\n\t\t\tthis.videoRenderObject.video.play();\n\n\t\t}\n\n\t\t/**\n\t\t * Play event\n\t\t * @type {object}\n\t\t * @event 'play'\n\t\t * */\n\t\tthis.dispatchEvent( { type: 'play' } );\n\n\t};\n\n\t/**\n\t * Pause video\n\t */\n\tPANOLENS.VideoPanorama.prototype.pauseVideo = function () {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video && !this.isVideoPaused() ) {\n\n\t\t\tthis.videoRenderObject.video.pause();\n\n\t\t}\n\n\t\t/**\n\t\t * Pause event\n\t\t * @type {object}\n\t\t * @event 'pause'\n\t\t * */\n\t\tthis.dispatchEvent( { type: 'pause' } );\n\n\t};\n\n\t/**\n\t * Resume video\n\t */\n\tPANOLENS.VideoPanorama.prototype.resumeVideoProgress = function () {\n\n\t\tif ( this.videoElement.autoplay && !this.isMobile ) {\n\n\t\t\tthis.playVideo();\n\n\t\t\t/**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t */\n\t\t\tthis.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false } );\n\n\t\t} else {\n\n\t\t\tthis.pauseVideo();\n\n\t\t\t/**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t */\n\t\t\tthis.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true } );\n\n\t\t}\n\n\t\tthis.setVideoCurrentTime( { percentage: this.videoProgress } );\n\n\t};\n\n\t/**\n\t * Reset video at stating point\n\t */\n\tPANOLENS.VideoPanorama.prototype.resetVideo = function () {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video ) {\n\n\t\t\tthis.setVideoCurrentTime( { percentage: 0 } );\n\n\t\t}\n\n\t};\n\n\t/**\n\t* Check if video is muted\n\t* @return {boolean} - is video muted or not\n\t*/\n\tPANOLENS.VideoPanorama.prototype.isVideoMuted = function () {\n\n\t\treturn this.videoRenderObject.video.muted;\n\n\t};\n\n\t/**\n\t * Mute video\n\t */\n\tPANOLENS.VideoPanorama.prototype.muteVideo = function () {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video && !this.isVideoMuted() ) {\n\n\t\t\tthis.videoRenderObject.video.muted = true;\n\n\t\t}\n\n\t\tthis.dispatchEvent( { type: 'volumechange' } );\n\n\t};\n\n\t/**\n\t * Unmute video\n\t */\n\tPANOLENS.VideoPanorama.prototype.unmuteVideo = function () {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video && this.isVideoMuted() ) {\n\n\t\t\tthis.videoRenderObject.video.muted = false;\n\n\t\t}\n\n\t\tthis.dispatchEvent( { type: 'volumechange' } );\n\n\t};\n\n\t/**\n\t * Returns the video element\n\t */\n\tPANOLENS.VideoPanorama.prototype.getVideoElement = function () {\n\n\t\treturn this.videoRenderObject.video;\n\n\t};\n\n\t/**\n\t * Dispose video panorama\n\t */\n\tPANOLENS.VideoPanorama.prototype.dispose = function () {\n\n\t\tthis.resetVideo();\n\t\tthis.pauseVideo();\n\t\t\n\t\tthis.removeEventListener( 'leave', this.pauseVideo.bind( this ) );\n\t\tthis.removeEventListener( 'enter-fade-start', this.resumeVideoProgress.bind( this ) );\n\t\tthis.removeEventListener( 'video-toggle', this.toggleVideo.bind( this ) );\n\t\tthis.removeEventListener( 'video-time', this.setVideoCurrentTime.bind( this ) );\n\n\t\tPANOLENS.Panorama.prototype.dispose.call( this );\n\n\t};\n\n})();;(function(){\n\n\t'use strict';\n\n\t/**\n\t * Empty panorama\n\t * @constructor\n\t * @param {number} [radius=5000] - Radius of panorama\n\t */\n\tPANOLENS.EmptyPanorama = function ( radius ) {\n\n\t\tradius = radius || 5000;\n\n\t\tvar geometry = new THREE.Geometry(),\n\t\t\tmaterial = new THREE.MeshBasicMaterial( { \n\t\t\t\tcolor: 0x000000, opacity: 1, transparent: true \n\t\t\t} );\n\n\t\tPANOLENS.Panorama.call( this, geometry, material );\n\n\t}\n\n\tPANOLENS.EmptyPanorama.prototype = Object.create( PANOLENS.Panorama.prototype );\n\n\tPANOLENS.EmptyPanorama.prototype.constructor = PANOLENS.EmptyPanorama;\n\n})();;( function () {\n\n\t/**\n\t * Little Planet\n\t * @constructor\n\t * @param {string} type \t\t- Type of little planet basic class\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n\tPANOLENS.LittlePlanet = function ( type, source, size, ratio ) {\n\n\t\ttype = type || 'image';\n\n\t\ttype === 'image' && PANOLENS.ImagePanorama.call( this, source, size );\n\n\t\tthis.size = size || 10000;\n\t\tthis.ratio = ratio || 0.5;\n\t\tthis.EPS = 0.000001;\n\t\tthis.frameId;\n\n\t\tthis.geometry = this.createGeometry();\n\t\tthis.material = this.createMaterial( this.size );\n\n\t\tthis.dragging = false;\n\t\tthis.userMouse = new THREE.Vector2();\n\n\t\tthis.quatA = new THREE.Quaternion();\n\t\tthis.quatB = new THREE.Quaternion();\n\t\tthis.quatCur = new THREE.Quaternion();\n\t\tthis.quatSlerp = new THREE.Quaternion();\n\n\t\tthis.vectorX = new THREE.Vector3( 1, 0, 0 );\n\t\tthis.vectorY = new THREE.Vector3( 0, 1, 0 );\n\n\t\tthis.addEventListener( 'window-resize', this.onWindowResize );\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype = Object.create( PANOLENS.ImagePanorama.prototype );\n\n\tPANOLENS.LittlePlanet.prototype.constructor = PANOLENS.LittlePlanet;\n\n\tPANOLENS.LittlePlanet.prototype.createGeometry = function () {\n\n\t\treturn new THREE.PlaneGeometry( this.size, this.size * this.ratio );\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.createMaterial = function ( size ) {\n\n\t\tvar uniforms = PANOLENS.StereographicShader.uniforms;\n\t\tuniforms.zoom.value = size;\n\n\t\treturn new THREE.ShaderMaterial( {\n\n\t\t\tuniforms: uniforms,\n\t\t\tvertexShader: PANOLENS.StereographicShader.vertexShader,\n\t\t\tfragmentShader: PANOLENS.StereographicShader.fragmentShader\n\n\t\t} );\n\t\t\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.registerMouseEvents = function () {\n\n\t\tthis.container.addEventListener( 'mousedown', this.onMouseDown.bind( this ), false );\n\t\tthis.container.addEventListener( 'mousemove', this.onMouseMove.bind( this ), false );\n\t\tthis.container.addEventListener( 'mouseup', this.onMouseUp.bind( this ), false );\n\t\tthis.container.addEventListener( 'touchstart', this.onMouseDown.bind( this ), false );\n\t\tthis.container.addEventListener( 'touchmove', this.onMouseMove.bind( this ), false );\n\t\tthis.container.addEventListener( 'touchend', this.onMouseUp.bind( this ), false );\n\t\tthis.container.addEventListener( 'mousewheel', this.onMouseWheel.bind( this ), false );\n\t\tthis.container.addEventListener( 'DOMMouseScroll', this.onMouseWheel.bind( this ), false );\n\t\tthis.container.addEventListener( 'contextmenu', this.onContextMenu.bind( this ), false );\n\t\t\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.unregisterMouseEvents = function () {\n\n\t\tthis.container.removeEventListener( 'mousedown', this.onMouseDown.bind( this ), false );\n\t\tthis.container.removeEventListener( 'mousemove', this.onMouseMove.bind( this ), false );\n\t\tthis.container.removeEventListener( 'mouseup', this.onMouseUp.bind( this ), false );\n\t\tthis.container.removeEventListener( 'touchstart', this.onMouseDown.bind( this ), false );\n\t\tthis.container.removeEventListener( 'touchmove', this.onMouseMove.bind( this ), false );\n\t\tthis.container.removeEventListener( 'touchend', this.onMouseUp.bind( this ), false );\n\t\tthis.container.removeEventListener( 'mousewheel', this.onMouseWheel.bind( this ), false );\n\t\tthis.container.removeEventListener( 'DOMMouseScroll', this.onMouseWheel.bind( this ), false );\n\t\tthis.container.removeEventListener( 'contextmenu', this.onContextMenu.bind( this ), false );\n\t\t\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseDown = function ( event ) {\n\n\t\tvar x = ( event.clientX >= 0 ) ? event.clientX : event.touches[ 0 ].clientX;\n\t\tvar y = ( event.clientY >= 0 ) ? event.clientY : event.touches[ 0 ].clientY;\n\n\t\tvar inputCount = ( event.touches && event.touches.length ) || 1 ;\n\n\t\tswitch ( inputCount ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tthis.dragging = true;\n\t\t\t\tthis.userMouse.set( x, y );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\tthis.userMouse.pinchDistance = distance;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tthis.onUpdateCallback();\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseMove = function ( event ) {\n\n\t\tvar x = ( event.clientX >= 0 ) ? event.clientX : event.touches[ 0 ].clientX;\n\t\tvar y = ( event.clientY >= 0 ) ? event.clientY : event.touches[ 0 ].clientY;\n\n\t\tvar inputCount = ( event.touches && event.touches.length ) || 1 ;\n\n\t\tswitch ( inputCount ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tvar angleX = THREE.Math.degToRad( x - this.userMouse.x ) * 0.4;\n\t\t\t\tvar angleY = THREE.Math.degToRad( y - this.userMouse.y ) * 0.4;\n\n\t\t\t\tif ( this.dragging ) {\n\t\t\t\t\tthis.quatA.setFromAxisAngle( this.vectorY, angleX );\n\t\t\t\t\tthis.quatB.setFromAxisAngle( this.vectorX, angleY );\n\t\t\t\t\tthis.quatCur.multiply( this.quatA ).multiply( this.quatB );\n\t\t\t\t\tthis.userMouse.set( x, y );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tvar uniforms = this.material.uniforms;\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tthis.addZoomDelta( this.userMouse.pinchDistance - distance );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseUp = function ( event ) {\n\n\t\tthis.dragging = false;\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseWheel = function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar delta = 0;\n\n\t\tif ( event.wheelDelta !== undefined ) { // WebKit / Opera / Explorer 9\n\n\t\t\tdelta = event.wheelDelta;\n\n\t\t} else if ( event.detail !== undefined ) { // Firefox\n\n\t\t\tdelta = - event.detail;\n\n\t\t}\n\n\t\tthis.addZoomDelta( delta );\n\t\tthis.onUpdateCallback();\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.addZoomDelta = function ( delta ) {\n\n\t\tvar uniforms = this.material.uniforms;\n\t\tvar lowerBound = this.size * 0.1;\n\t\tvar upperBound = this.size * 10;\n\n\t\tuniforms.zoom.value += delta;\n\n\t\tif ( uniforms.zoom.value <= lowerBound ) {\n\n\t\t\tuniforms.zoom.value = lowerBound;\n\n\t\t} else if ( uniforms.zoom.value >= upperBound ) {\n\n\t\t\tuniforms.zoom.value = upperBound;\n\n\t\t}\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onUpdateCallback = function () {\n\n\t\tthis.frameId = window.requestAnimationFrame( this.onUpdateCallback.bind( this ) );\n\t\t\n\t\tthis.quatSlerp.slerp( this.quatCur, 0.1 );\n\t\tthis.material.uniforms.transform.value.makeRotationFromQuaternion( this.quatSlerp );\n\t\t\n\t\tif ( !this.dragging && 1.0 - this.quatSlerp.clone().dot( this.quatCur ) < this.EPS ) {\n\t\t\t\n\t\t\twindow.cancelAnimationFrame( this.frameId );\n\n\t\t}\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.reset = function () {\n\n\t\tthis.quatCur.set( 0, 0, 0, 1 );\n\t\tthis.quatSlerp.set( 0, 0, 0, 1 );\n\t\tthis.onUpdateCallback();\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onLoad = function () {\n\n\t\tthis.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\n\t\tthis.registerMouseEvents();\n\t\tthis.onUpdateCallback();\n\t\t\n\t\tthis.dispatchEvent( { type: 'panolens-viewer-handler', method: 'disableControl' } );\n\t\t\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onLeave = function () {\n\n\t\tthis.unregisterMouseEvents();\n\n\t\tthis.dispatchEvent( { type: 'panolens-viewer-handler', method: 'enableControl', data: PANOLENS.Controls.ORBIT } );\n\n\t\twindow.cancelAnimationFrame( this.frameId );\n\n\t\tPANOLENS.Panorama.prototype.onLeave.call( this );\n\t\t\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onWindowResize = function () {\n\n\t\tthis.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onContextMenu = function () {\n\n\t\tthis.dragging = false;\n\n\t};\n\n})();;( function () {\n\n\t/**\n\t * Image Little Planet\n\t * @constructor\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n\tPANOLENS.ImageLittlePlanet = function ( source, size, ratio ) {\n\n\t\tPANOLENS.LittlePlanet.call( this, 'image', source, size, ratio );\n\n\t};\n\n\tPANOLENS.ImageLittlePlanet.prototype = Object.create( PANOLENS.LittlePlanet.prototype );\n\t\n\tPANOLENS.ImageLittlePlanet.prototype.constructor = PANOLENS.ImageLittlePlanet;\n\n\tPANOLENS.ImageLittlePlanet.prototype.onLoad = function ( texture ) {\n\n\t\tthis.updateTexture( texture );\n\n\t\tPANOLENS.ImagePanorama.prototype.onLoad.call( this, texture );\n\t\tPANOLENS.LittlePlanet.prototype.onLoad.call( this );\n\n\t};\n\n\tPANOLENS.ImageLittlePlanet.prototype.updateTexture = function ( texture ) {\n\n\t\ttexture.minFilter = texture.magFilter = THREE.LinearFilter;\n\t\t\n\t\tthis.material.uniforms[ \"tDiffuse\" ].value = texture;\n\n\t};\n\n} )();;(function(){\n\t\n\t/**\n\t * Reticle 3D Sprite\n\t * @constructor\n\t * @param {THREE.Color} [color=0xfffff] - Color of the reticle sprite\n\t * @param {boolean} [autoSelect=true] - Auto selection\n\t * @param {string} [idleImageUrl=PANOLENS.DataImage.ReticleIdle] - Image asset url\n\t * @param {string} [dwellImageUrl=PANOLENS.DataImage.ReticleDwell] - Image asset url\n\t * @param {number} [dwellTime=1500] - Duration for dwelling sequence to complete\n\t * @param {number} [dwellSpriteAmount=45] - Number of dwelling sprite sequence\n\t */\n\tPANOLENS.Reticle = function ( color, autoSelect, idleImageUrl, dwellImageUrl, dwellTime, dwellSpriteAmount ) {\n\n\t\tcolor = color || 0xffffff;\n\n\t\tthis.autoSelect = autoSelect != undefined ? autoSelect : true;\n\n\t\tthis.dwellTime = dwellTime || 1500;\n\t\tthis.dwellSpriteAmount = dwellSpriteAmount || 45;\n\t\tthis.dwellInterval = this.dwellTime / this.dwellSpriteAmount;\n\n\t\tthis.IDLE = 0;\n\t\tthis.DWELLING = 1;\n\t\tthis.status;\n\n\t\tthis.scaleIdle = new THREE.Vector3( 0.2, 0.2, 1 );\n\t\tthis.scaleDwell = new THREE.Vector3( 1, 0.8, 1 );\n\n\t\tthis.textureLoaded = false;\n\t\tthis.idleImageUrl = idleImageUrl || PANOLENS.DataImage.ReticleIdle;\n\t\tthis.dwellImageUrl = dwellImageUrl || PANOLENS.DataImage.ReticleDwell;\n\t\tthis.idleTexture = new THREE.Texture();\n\t\tthis.dwellTexture = new THREE.Texture();\n\n\t\tTHREE.Sprite.call( this, new THREE.SpriteMaterial( { color: color, depthTest: false } ) );\n\n\t\tthis.currentTile = 0;\n\t\tthis.startTime = 0;\n\n\t\tthis.visible = false;\n\t\tthis.renderOrder = 10;\n\t\tthis.timerId;\n\n\t\t// initial update\n\t\tthis.updateStatus( this.IDLE );\n\n\t};\n\n\tPANOLENS.Reticle.prototype = Object.create( THREE.Sprite.prototype );\n\n\tPANOLENS.Reticle.prototype.constructor = PANOLENS.Reticle;\n\n\t/**\n\t * Make reticle visible\n\t */\n\tPANOLENS.Reticle.prototype.show = function () {\n\n\t\tthis.visible = true;\n\n\t};\n\n\t/**\n\t * Make reticle invisible\n\t */\n\tPANOLENS.Reticle.prototype.hide = function () {\n\n\t\tthis.visible = false;\n\n\t};\n\n\t/**\n\t * Load reticle textures\n\t */\n\tPANOLENS.Reticle.prototype.loadTextures = function () {\n\n\t\tthis.idleTexture = PANOLENS.Utils.TextureLoader.load( this.idleImageUrl );\n\t\tthis.dwellTexture = PANOLENS.Utils.TextureLoader.load( this.dwellImageUrl );\n\n\t\tthis.material.map = this.idleTexture;\n\t\tthis.setupDwellSprite( this.dwellTexture );\n\t\tthis.textureLoaded = true;\n\n\t};\n\n\t/**\n\t * Start reticle timer selection\n\t * @param  {function} completeCallback - Callback after dwell completes\n\t */\n\tPANOLENS.Reticle.prototype.select = function ( completeCallback ) {\n\n\t\tif ( performance.now() - this.startTime >= this.dwellTime ) {\n\n\t\t\tthis.completeDwelling();\n\t\t\tcompleteCallback();\n\n\t\t} else if ( this.autoSelect ){\n\n\t\t\tthis.updateDwelling( performance.now() );\n\t\t\tthis.timerId = window.requestAnimationFrame( this.select.bind( this, completeCallback ) );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Clear and reset reticle timer\n\t */\n\tPANOLENS.Reticle.prototype.clearTimer = function () {\n\n\t\twindow.cancelAnimationFrame( this.timerId );\n\t\tthis.timerId = null;\n\n\t};\n\n\t/**\n\t * Setup dwell sprite animation\n\t */\n\tPANOLENS.Reticle.prototype.setupDwellSprite = function ( texture ) {\n\n\t\ttexture.wrapS = THREE.RepeatWrapping;\n\t\ttexture.repeat.set( 1 / this.dwellSpriteAmount, 1 );\n\n\t}\n\n\t/**\n\t * Update reticle status\n\t * @param {number} status - Reticle status\n\t */\n\tPANOLENS.Reticle.prototype.updateStatus = function ( status ) {\n\n\t\tthis.status = status;\n\n\t\tif ( status === this.IDLE ) {\n\t\t\tthis.scale.copy( this.scaleIdle );\n\t\t\tthis.material.map = this.idleTexture;\n\t\t} else if ( status === this.DWELLING ) {\n\t\t\tthis.scale.copy( this.scaleDwell );\n\t\t\tthis.material.map = this.dwellTexture;\n\t\t}\n\n\t\tthis.currentTile = 0;\n\t\tthis.material.map.offset.x = 0;\n\n\t};\n\n\t/**\n\t * Start dwelling sequence\n\t */\n\tPANOLENS.Reticle.prototype.startDwelling = function ( completeCallback ) {\n\n\t\tif ( !this.autoSelect ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.startTime = performance.now();\n\t\tthis.updateStatus( this.DWELLING );\n\t\tthis.select( completeCallback );\n\n\t};\n\n\t/**\n\t * Update dwelling sequence\n\t * @param  {number} time - Timestamp for elasped time\n\t */\n\tPANOLENS.Reticle.prototype.updateDwelling = function ( time ) {\n\n\t\tvar elasped = time - this.startTime;\n\n\t\tif ( this.currentTile <= this.dwellSpriteAmount ) {\n\t\t\tthis.currentTile = Math.floor( elasped / this.dwellTime * this.dwellSpriteAmount );\n\t\t\tthis.material.map.offset.x = this.currentTile / this.dwellSpriteAmount;\n\t\t} else {\n\t\t\tthis.updateStatus( this.IDLE );\n\t\t}\n\n\t};\n\n\t/**\n\t * Cancel dwelling\n\t */\n\tPANOLENS.Reticle.prototype.cancelDwelling = function () {\n\t\tthis.clearTimer();\n\t\tthis.updateStatus( this.IDLE );\n\n\t};\n\n\t/**\n\t * Complete dwelling\n\t */\n\tPANOLENS.Reticle.prototype.completeDwelling = function () {\n\t\tthis.clearTimer();\t\n\t\tthis.updateStatus( this.IDLE );\n\t};\n\n})();;( function () {\n\t\n\t/**\n\t * Creates a tile with bent capability\n\t * @constructor\n\t * @param {number}  [width=10]                      \t\t\t\t- Width along the X axis\n\t * @param {number}  [height=5]                      \t\t\t\t- Height along the Y axis\n\t * @param {number}  [widthSegments=20]              \t\t\t\t- Width segments\n\t * @param {number}  [heightSegments=20]             \t\t\t\t- Height segments\n\t * @param {THREE.Vector3} [forceDirection=THREE.Vector3( 0, 0, 1 )] - Force direction\n\t * @param {THREE.Vector3} [forceAxis=THREE.Vector3( 0, 1, 0 )] \t\t- Along this axis\n\t * @param {number} [forceAngle=Math.PI/12] \t\t\t\t\t\t\t- Angle to bend in radians\n\t */\n\tPANOLENS.Tile = function ( width, height, widthSegments, heightSegments, forceDirection, forceAxis, forceAngle ) {\n\n\t\tvar scope = this;\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tforceDirection: forceDirection,\n\t\t\tforceAxis: forceAxis,\n\t\t\tforceAngle: forceAngle\n\t\t};\n\n\t\twidth = width || 10;\n\t\theight = height || 5;\n\t\twidthSegments = widthSegments || 1;\n\t\theightSegments = heightSegments || 1;\n\t\tforceDirection = forceDirection || new THREE.Vector3( 0, 0, 1 );\n\t\tforceAxis = forceAxis || new THREE.Vector3( 0, 1, 0 );\n\t\tforceAngle = forceAngle !== undefined ? forceAngle : 0;\n\n\t\tTHREE.Mesh.call( this, \n\t\t\tnew THREE.PlaneGeometry( width, height, widthSegments, heightSegments ),\n\t\t\tnew THREE.MeshBasicMaterial( { color: 0xffffff, transparent: true } )\n\t\t);\n\n\t\tthis.bendModifier = new THREE.BendModifier();\n\n\t\tthis.entity = undefined;\n\n\t\tthis.animationDuration = 500;\n\t\tthis.animationFadeOut = undefined;\n\t\tthis.animationFadeIn = undefined;\n\t\tthis.animationTranslation = undefined;\n\t\tthis.tweens = {};\n\n\t\tif ( forceAngle !== 0 ) {\n\n\t\t\tthis.bend( forceDirection, forceAxis, forceAngle );\n\n\t\t}\n\t\t\n\t\tthis.originalGeometry = this.geometry.clone();\n\t}\n\n\tPANOLENS.Tile.prototype = Object.create( THREE.Mesh.prototype );\n\n\tPANOLENS.Tile.prototype.constructor = PANOLENS.Tile;\n\n\tPANOLENS.Tile.prototype.clone = function (){\n\n\t\tvar parameters = this.parameters, tile;\n\n\t\ttile = new PANOLENS.Tile(\n\t\t\tparameters.width,\n\t\t\tparameters.height,\n\t\t\tparameters.widthSegments,\n\t\t\tparameters.heightSegments,\n\t\t\tparameters.forceDirection,\n\t\t\tparameters.forceAxis,\n\t\t\tparameters.forceAngle\n\t\t);\n\n\t\ttile.setEntity( this.entity );\n\t\ttile.material = this.material.clone();\n\n\t\treturn tile;\n\n\t};\n\n\t/**\n\t * Bend panel with direction, axis, and angle\n\t * @param  {THREE.Vector3} direction - Force direction\n\t * @param  {THREE.Vector3} axis - Along this axis\n\t * @param  {number} angle - Angle to bend in radians\n\t */\n\tPANOLENS.Tile.prototype.bend = function ( direction, axis, angle ) {\n\n\t\tthis.bendModifier.set( direction, axis, angle ).modify( this.geometry );\n\n\t};\n\n\t/**\n\t * Restore geometry back to initial state \n\t */\n\tPANOLENS.Tile.prototype.unbend = function () {\n\n\t\tvar geometry = this.geometry;\n\n\t\tthis.geometry = this.originalGeometry;\n\t\tthis.originalGeometry = this.geometry.clone();\n\n\t\tgeometry.dispose();\n\t\tgeometry = null;\n\n\t};\n\n\t/**\n\t * Create a tween object for animation\n\t * based on - {@link https://github.com/tweenjs/tween.js}\n\t * @param  {string} name       - Name of the tween animation\n\t * @param  {object} object     - Object to be tweened\n\t * @param  {object} toState    - Final state of the object's properties\n\t * @param  {number} duration   - Tweening duration\n\t * @param  {TWEEN.Easing} easing     - Easing function\n\t * @param  {number} delay      - Animation delay time\n\t * @param  {Function} onStart    - On start function\n\t * @param  {Function} onUpdate   - On update function\n\t * @param  {Function} onComplete - On complete function\n\t * @return {TWEEN.Tween}         - Tween object\n\t */\n\tPANOLENS.Tile.prototype.tween = function ( name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete ) {\n\n\t\tobject = object || this;\n    \ttoState = toState || {};\n    \tduration = duration || this.animationDuration;\n    \teasing = easing || TWEEN.Easing.Exponential.Out;\n    \tdelay = delay !== undefined ? delay : 0;\n    \tonStart = onStart ? onStart : null;\n    \tonUpdate = onUpdate ? onUpdate : null;\n    \tonComplete = onComplete ? onComplete : null;\n\n    \tif ( !this.tweens[name] ) {\n    \t\tthis.tweens[name] = new TWEEN.Tween( object )\n    \t\t\t.to( toState, duration )\n\t        \t.easing( easing )\n\t        \t.delay( delay )\n\t        \t.onStart( onStart )\n\t        \t.onUpdate( onUpdate )\n\t        \t.onComplete( onComplete );\n    \t}\n\n    \treturn this.tweens[name];\n\n    };\n\n    /**\n     * Short-hand for displaying a single ripple effect\n     * by duplicating itself and fadeout\n     * @param  {number} scale    - The duplicated self fadeout scale\n     * @param  {number} duration - Effect duration\n     * @param  {TWEEN.Easing} easing   - Easing function\n     */\n    PANOLENS.Tile.prototype.ripple = function ( scale, duration, easing ) {\n\n    \tscale = scale || 2;\n    \tduration = duration || 200;\n    \teasing = easing || TWEEN.Easing.Cubic.Out;\n\n    \tvar scope = this, ripple = this.clone();\n\n        new TWEEN.Tween( ripple.scale )\n        .to({x: scale, y: scale}, duration )\n        .easing( easing )\n        .start();\n\n        new TWEEN.Tween( ripple.material )\n        .to({opacity: 0}, duration )\n        .easing( easing )\n        .onComplete(function(){\n            scope.remove( ripple );\n            ripple.geometry.dispose();\n            ripple.material.dispose();\n        })\n        .start();\n\n        this.add( ripple );\n\n    };\n\n    /**\n\t * Set entity if multiple objects are considered as one entity\n\t * @param {object} entity - Entity represents whole group structure\n\t */\n\tPANOLENS.Tile.prototype.setEntity = function ( entity ) {\n\n\t\tthis.entity = entity;\n\n\t};\n\n} )();;(function(){\n\t\n\t'use strict';\n\n    /**\n     * Group consists of tile array\n     * @constructor\n     * @param {array}  tileArray         - Tile array of PANOLENS.Tile \n     * @param {number} verticalGap       - Vertical gap between each tile\n     * @param {number} depthGap          - Depth gap between each tile\n     * @param {number} animationDuration - Animation duration\n     * @param {number} offset            - Offset index\n     */\n\tPANOLENS.TileGroup = function ( tileArray, verticalGap, depthGap, animationDuration, offset ) {\n\n\t\tvar scope = this, textureLoader;\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tthis.tileArray = tileArray || [];\n\t\tthis.offset = offset !== undefined ? offset : 0;\n\t\tthis.v_gap = verticalGap !== undefined ? verticalGap : 6;\n\t\tthis.d_gap = depthGap !== undefined ? depthGap : 2;\n\t\tthis.animationDuration = animationDuration !== undefined ? animationDuration : 200;\n\t\tthis.animationEasing = TWEEN.Easing.Exponential.Out;\n\t\tthis.visibleDelta = 2;\n\n\t\tthis.tileArray.map( function ( tile, index ) {\n\n\t\t\tif ( tile.image ) {\n\n\t\t\t\tPANOLENS.Utils.TextureLoader.load( tile.image, scope.setTexture.bind( tile ) );\n\n\t\t\t}\n\n\t\t\ttile.position.set( 0, index * -scope.v_gap, index * -scope.d_gap );\n\t\t\ttile.originalPosition = tile.position.clone();\n\t\t\ttile.setEntity( scope );\n\t\t\tscope.add( tile );\n\n\t\t} );\n\n\t\tthis.updateVisbility();\n\n\t}\n\n\tPANOLENS.TileGroup.prototype = Object.create( THREE.Object3D.prototype );\n\n\tPANOLENS.TileGroup.prototype.constructor = PANOLENS.TileGroup;\n\n    /**\n     * Update corresponding tile textures\n     * @param  {array} imageArray - Image array with index to index image update\n     */\n\tPANOLENS.TileGroup.prototype.updateTexture = function ( imageArray ) {\n\n\t\tvar scope = this;\n\n\t\timageArray = imageArray || [];\n\t\tthis.children.map( function ( child, index ) {\n\t\t\tif ( child instanceof PANOLENS.Tile && imageArray[index] ) {\n\t\t\t\tPANOLENS.Utils.TextureLoader.load( imageArray[index], scope.setTexture.bind( child ) );\n\t    \t\tif ( child.outline ) {\n\t    \t\t\tchild.outline.material.visible = true;\n\t    \t\t}\n\t\t\t}\n\t\t} );\n\n\t};\n\n    /**\n     * Update all tile textures and hide the remaining ones\n     * @param  {array} imageArray - Image array with index to index image update\n     */\n\tPANOLENS.TileGroup.prototype.updateAllTexture = function ( imageArray ) {\n\n\t\tthis.updateTexture( imageArray );\n\n\t\tif ( imageArray.length < this.children.length ) {\n\t\t\tfor ( var i = imageArray.length; i < this.children.length; i++ ) {\n\t\t\t\tif ( this.children[i] instanceof PANOLENS.Tile ) {\n\t\t\t\t\tthis.children[i].material.visible = false;\n\t\t\t\t\tif ( this.children[i].outline ) {\n\t\t\t\t\t\tthis.children[i].outline.material.visible = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n    /**\n     * Set individual texture\n     * @param {THREE.Texture} texture - Texture to be updated\n     */\n\tPANOLENS.TileGroup.prototype.setTexture = function ( texture ) {\n\n        texture.minFilter = THREE.LinearFilter;\n        texture.magFilter = THREE.LinearFilter;\n        this.material.visible = true;\n        this.material.map = texture;\n        this.material.needsUpdate = true;\n\n    };\n\n    /**\n     * Update visibility\n     */\n    PANOLENS.TileGroup.prototype.updateVisbility = function () {\n\n    \tthis.children[this.offset].visible = true;\n    \tnew TWEEN.Tween( this.children[this.offset].material )\n\t\t.to( { opacity: 1 }, this.animationDuration )\n\t\t.easing( this.animationEasing )\n\t\t.start();\n    \t\n    \tif ( this.children[this.offset].outline ) {\n\n    \t\tthis.children[this.offset].outline.visible = true;\n\n    \t}\n\n    \t// Backward\n    \tfor ( var i = this.offset - 1; i >= 0 ; i-- ) {\n\n    \t\tif ( this.tileArray.indexOf(this.children[i]) === -1 ) { continue; }\n\n    \t\tif ( this.offset - i <= this.visibleDelta ) {\n\n    \t\t\tthis.children[i].visible = true;\n    \t\t\tnew TWEEN.Tween( this.children[i].material )\n    \t\t\t.to( { opacity: 1 / ( this.offset - i ) * 0.5 }, this.animationDuration )\n    \t\t\t.easing( this.animationEasing )\n    \t\t\t.start();\n\n    \t\t} else {\n\n    \t\t\tthis.children[i].visible = false;\n\n    \t\t}\n\n    \t\tthis.children[i].outline && (this.children[i].outline.visible = false);\n\n    \t}\n\n    \t// Forward\n    \tfor ( var i = this.offset + 1; i < this.children.length ; i++ ) {\n\n    \t\tif ( this.tileArray.indexOf(this.children[i]) === -1 ) { continue; }\n\n    \t\tif ( i - this.offset <= this.visibleDelta ) {\n\n    \t\t\tthis.children[i].visible = true;\n    \t\t\tnew TWEEN.Tween( this.children[i].material )\n    \t\t\t.to( { opacity: 1 / ( i - this.offset ) * 0.5 }, this.animationDuration )\n    \t\t\t.easing( this.animationEasing )\n    \t\t\t.start();\n\n    \t\t} else {\n\n    \t\t\tthis.children[i].visible = false;\n\n    \t\t}\n\n    \t\tthis.children[i].outline && (this.children[i].outline.visible = false);\n\n    \t}\n\n    };\n\n    /**\n     * Scroll up\n     * @param  {number} duration - Scroll up duration\n     */\n    PANOLENS.TileGroup.prototype.scrollUp = function ( duration ) {\n\n    \tvar tiles = this.tileArray, offset;\n\n    \tduration = duration !== undefined ? duration : this.animationDuration;\n\n    \toffset = this.offset + 1;\n\n    \tif ( this.offset < tiles.length - 1 && tiles[ this.offset + 1 ].material.visible ) {\n\n    \t\tfor ( var i = tiles.length - 1; i >= 0; i-- ) {\n\t    \t\t\n    \t\t\tnew TWEEN.Tween( tiles[i].position )\n    \t\t\t.to({ y: ( i - offset ) * -this.v_gap,\n    \t\t\t\t  z: Math.abs( i - offset ) * -this.d_gap }, duration )\n    \t\t\t.easing( this.animationEasing )\n    \t\t\t.start();\n\t    \t\t\n\t    \t}\n\n\t    \tthis.offset ++;\n\t    \tthis.updateVisbility();\n\t    \tthis.dispatchEvent( { type: 'scroll', direction: 'up' } );\n\n    \t}\n\n    };\n\n    /**\n     * Scroll down \n     * @param  {number} duration - Scroll up duration\n     */\n    PANOLENS.TileGroup.prototype.scrollDown = function ( duration ) {\n\n    \tvar tiles = this.tileArray, offset;\n\n    \tduration = duration !== undefined ? duration : this.animationDuration;\n\n    \toffset = this.offset - 1;\n\n    \tif ( this.offset > 0 && tiles[ this.offset - 1 ].material.visible ) {\n\n    \t\tfor ( var i = 0; i < tiles.length; i++ ) {\n\n\t    \t\tnew TWEEN.Tween( tiles[i].position )\n    \t\t\t.to({ y: ( i - offset ) * -this.v_gap,\n    \t\t\t\t  z: Math.abs( i - offset ) * -this.d_gap }, duration )\n    \t\t\t.easing( this.animationEasing )\n    \t\t\t.start();\n\t    \t\t\n\t    \t}\n\n\t    \tthis.offset --;\n\t    \tthis.updateVisbility();\n\t    \tthis.dispatchEvent( { type: 'scroll', direction: 'down' } );\n\n    \t}\n\n    };\n\n    PANOLENS.TileGroup.prototype.reset = function () {\n\n    \tthis.tileArray.map( function ( child, index ) {\n\n    \t\tchild.position.copy( child.originalPosition );\n\n    \t} );\n\n    \tthis.offset = 0;\n    \tthis.updateVisbility();\n\n    };\n\n    /**\n     * Get current index\n     * @return {number} Index of the group. Range from 0 to this.tileArray.length\n     */\n    PANOLENS.TileGroup.prototype.getIndex = function () {\n\n    \treturn this.offset;\n\n    };\n\n    /**\n     * Get visible tile counts\n     * @return {number} Number of visible tiles\n     */\n    PANOLENS.TileGroup.prototype.getTileCount = function () {\n\n    \tvar count = 0;\n\n    \tthis.tileArray.map( function ( tile ) {\n\n    \t\tif ( tile.material.visible ) {\n\n    \t\t\tcount ++;\n\n    \t\t}\n\n    \t} );\n\n    \treturn count;\n\n    };\n\n})();;(function(){\n\t\n\t'use strict';\n\n\tvar sharedFont, sharedTexture;\n\tvar pendingQueue = [];\n\n\t/**\n\t * Sprite text based on {@link https://github.com/Jam3/three-bmfont-text}\n\t * @constructor\n\t * @param {string} text     - Text to be displayed\n\t * @param {number} maxWidth\t- Max width\n\t * @param {number} color    - Color in hexadecimal\n\t * @param {number} opacity  - Text opacity\n\t * @param {object} options  - Options to create text geometry\n\t */\n\tPANOLENS.SpriteText = function ( text, maxWidth, color, opacity, options ) {\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tthis.text = text || '';\n\t\tthis.maxWidth = maxWidth || 2000;\n\t\tthis.color = color || 0xffffff;\n\t\tthis.opacity = opacity !== undefined ? opacity : 1;\n\t\tthis.options = options || {};\n\n\t\tthis.animationDuration = 500;\n\t\tthis.animationFadeOut = undefined;\n\t\tthis.animationFadeIn = undefined;\n\t\tthis.tweens = {};\n\n\t\tthis.addText( text );\n\n\t}\n\n\tPANOLENS.SpriteText.prototype = Object.create( THREE.Object3D.prototype );\n\n\tPANOLENS.SpriteText.prototype.constructor = PANOLENS.SpriteText;\n\n\t// Reference function will be overwritten by Bmfont.js\n\tPANOLENS.SpriteText.prototype.generateTextGeometry = function () {};\n\tPANOLENS.SpriteText.prototype.generateSDFShader = function () {};\n\n\t/**\n\t * Set BMFont\n\t * @param {Function} callback - Callback after font is loaded\n\t * @param {object}   font     - The font to be loaded\n\t * @param {THREE.Texture}   texture  - Font texture\n\t */\n\tPANOLENS.SpriteText.prototype.setBMFont = function ( callback, font, texture ) {\n\n\t\ttexture.needsUpdate = true;\n\t  \ttexture.minFilter = THREE.LinearMipMapLinearFilter;\n\t\ttexture.magFilter = THREE.LinearFilter;\n\t\ttexture.generateMipmaps = true;\n\t\ttexture.anisotropy = 8;\n\n\t\tsharedFont = font;\n\t\tsharedTexture = texture;\n\n\t\tfor ( var i = pendingQueue.length - 1; i >= 0; i-- ) {\n\t\t\tpendingQueue[ i ].target.addText( pendingQueue[ i ].text );\n\t\t}\n\n\t\twhile ( pendingQueue.length > 0 ) {\n\t\t\tpendingQueue.pop();\n\t\t}\n\n\t\tcallback && callback();\n\n\t};\n\n\t/**\n\t * Add text mesh\n\t * @param {string} text - Text to be displayed\n\t */\n\tPANOLENS.SpriteText.prototype.addText = function ( text ) {\n\n\t\tif ( !sharedFont || !sharedTexture ) {\n\t\t\tpendingQueue.push( { target: this, text: text } );\n\t\t\treturn;\n\t\t}\n\n\t\tvar textAnchor = new THREE.Object3D();\n\n\t\tthis.options.text = text;\n\t\tthis.options.font = sharedFont;\n\t\tthis.options.width = this.maxWidth;\n\n\t\tvar geometry = this.generateTextGeometry( this.options );\n\t\tgeometry.computeBoundingBox();\n\t\tgeometry.computeBoundingSphere();\n\n\t\tvar material = new THREE.RawShaderMaterial(this.generateSDFShader({\n\t\t    map: sharedTexture,\n\t\t    side: THREE.DoubleSide,\n\t\t    transparent: true,\n\t\t    color: this.color,\n\t\t    opacity: this.opacity\n\t\t}));\n\n\t\tvar layout = geometry.layout;\n\t\tvar textMesh = new THREE.Mesh( geometry, material );\n\n\t\ttextMesh.entity = this;\n\t\ttextMesh.position.x = -layout.width / 2;\n\t\ttextMesh.position.y = layout.height * 1.035;\n\n\t\ttextAnchor.scale.x = textAnchor.scale.y = -0.05;\n\t\ttextAnchor.add( textMesh );\n\n\t\tthis.mesh = textMesh;\n\t\tthis.add( textAnchor );\n\n\t};\n\n\t/**\n\t * Update text geometry\n\t * @param  {object} options - Geometry options based on\n\t *  https://github.com/Jam3/three-bmfont-text#geometry--createtextopt\n\t */\n\tPANOLENS.SpriteText.prototype.update = function ( options ) {\n\n\t\tvar mesh;\n\n\t\toptions = options || {};\n\n\t\tmesh = this.mesh;\n\n\t\tmesh.geometry.update( options );\n\t\tmesh.position.x = -mesh.geometry.layout.width / 2;\n\t\tmesh.position.y = mesh.geometry.layout.height * 1.035;\n\n\t};\n\n\t/**\n\t * Create a tween object for animation\n\t * based on - {@link https://github.com/tweenjs/tween.js}\n\t * @param  {string} name       - Name of the tween animation\n\t * @param  {object} object     - Object to be tweened\n\t * @param  {object} toState    - Final state of the object's properties\n\t * @param  {number} duration   - Tweening duration\n\t * @param  {TWEEN.Easing} easing     - Easing function\n\t * @param  {number} delay      - Animation delay time\n\t * @param  {Function} onStart    - On start function\n\t * @param  {Function} onUpdate   - On update function\n\t * @param  {Function} onComplete - On complete function\n\t * @return {TWEEN.Tween}         - Tween object\n\t */\n\tPANOLENS.SpriteText.prototype.tween = function ( name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete ) {\n\n\t\tobject = object || this;\n\t\ttoState = toState || {};\n\t\tduration = duration || this.animationDuration;\n\t\teasing = easing || TWEEN.Easing.Exponential.Out;\n\t\tdelay = delay !== undefined ? delay : 0;\n\t\tonStart = onStart ? onStart : null;\n\t\tonUpdate = onUpdate ? onUpdate : null;\n\t\tonComplete = onComplete ? onComplete : null;\n\n\t\tif ( !this.tweens[name] ) {\n\t\t\tthis.tweens[name] = new TWEEN.Tween( object )\n\t\t\t\t.to( toState, duration )\n\t        \t.easing( easing )\n\t        \t.delay( delay )\n\t        \t.onStart( onStart )\n\t        \t.onUpdate( onUpdate )\n\t        \t.onComplete( onComplete );\n\t\t}\n\n\t\treturn this.tweens[name];\n\n\t};\n\n\t/**\n\t * Get geometry layout\n\t * @return {object} Text geometry layout \n\t */\n\tPANOLENS.SpriteText.prototype.getLayout = function () {\n\n\t\treturn this.mesh && this.mesh.geometry && this.mesh.geometry.layout || {};\n\n\t};\n\n\t/**\n\t * Set entity if multiple objects are considered as one entity\n\t * @param {object} entity - Entity represents whole group structure\n\t */\n\tPANOLENS.SpriteText.prototype.setEntity = function ( entity ) {\n\n\t\tthis.entity = entity;\n\n\t};\n\n})();;(function () {\n\t\n\t/**\n\t * Widget for controls\n\t * @constructor\n\t * @param {HTMLElement} container - A domElement where default control widget will be attached to\n\t */\n\tPANOLENS.Widget = function ( container ) {\n\n\t\tTHREE.EventDispatcher.call( this );\n\n\t\tthis.DEFAULT_TRANSITION  = 'all 0.27s ease';\n\t\tthis.TOUCH_ENABLED = PANOLENS.Utils.checkTouchSupported();\n\t\tthis.PREVENT_EVENT_HANDLER = function ( event ) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t};\n\n\t\tthis.container = container;\n\n\t\tthis.barElement;\n\t\tthis.fullscreenElement;\n\t\tthis.videoElement;\n\t\tthis.settingElement;\n\n\t\tthis.mainMenu;\n\n\t\tthis.activeMainItem;\n\t\tthis.activeSubMenu;\n\t\tthis.mask;\n\n\t}\n\n\tPANOLENS.Widget.prototype = Object.create( THREE.EventDispatcher.prototype );\n\n\tPANOLENS.Widget.prototype.constructor = PANOLENS.Widget;\n\n\t/**\n\t * Add control bar\n\t */\n\tPANOLENS.Widget.prototype.addControlBar = function () {\n\n\t\tif ( !this.container ) {\n\n\t\t\tconsole.warn( 'Widget container not set' ); \n\t\t\treturn; \n\t\t}\n\n\t\tvar scope = this, bar, styleTranslate, styleOpacity, gradientStyle;\n\n\t\tgradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))';\n\n\t\tbar = document.createElement( 'div' );\n\t\tbar.style.width = '100%';\n\t\tbar.style.height = '44px';\n\t\tbar.style.float = 'left';\n\t\tbar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)';\n\t\tbar.style.background = '-webkit-' + gradientStyle;\n\t\tbar.style.background = '-moz-' + gradientStyle;\n\t\tbar.style.background = '-o-' + gradientStyle;\n\t\tbar.style.background = '-ms-' + gradientStyle;\n\t\tbar.style.background = gradientStyle;\n\t\tbar.style.transition = this.DEFAULT_TRANSITION;\n\t\tbar.style.pointerEvents = 'none';\n\t\tbar.isHidden = false;\n\t\tbar.toggle = function () {\n\t\t\tbar.isHidden = !bar.isHidden;\n\t\t\tstyleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)';\n\t\t\tstyleOpacity = bar.isHidden ? 0 : 1;\n\t\t\tbar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate;\n\t\t\tbar.style.opacity = styleOpacity;\n\t\t};\n\n\t\t// Menu\n\t\tvar menu = this.createDefaultMenu();\n\t\tthis.mainMenu = this.createMainMenu( menu );\n\t\tbar.appendChild( this.mainMenu );\n\n\t\t// Mask\n\t\tvar mask = this.createMask();\n\t\tthis.mask = mask;\n\t\tthis.container.appendChild( mask );\n\n\t\t// Dispose\n\t\tbar.dispose = function () {\n\n\t\t\tif ( scope.fullscreenElement ) {\n\n\t\t\t\tbar.removeChild( scope.fullscreenElement );\n\t\t\t\tscope.fullscreenElement.dispose();\n\t\t\t\tscope.fullscreenElement = null;\n\n\t\t\t}\n\n\t\t\tif ( scope.settingElement ) {\n\n\t\t\t\tbar.removeChild( scope.settingElement );\n\t\t\t\tscope.settingElement.dispose();\n\t\t\t\tscope.settingElement = null;\n\n\t\t\t}\n\n\t\t\tif ( scope.videoElement ) {\n\n\t\t\t\tbar.removeChild( scope.videoElement );\n\t\t\t\tscope.videoElement.dispose();\n\t\t\t\tscope.videoElement = null;\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.container.appendChild( bar );\n\n\t\t// Mask events\n\t\tthis.mask.addEventListener( 'mousemove', this.PREVENT_EVENT_HANDLER, true );\n\t\tthis.mask.addEventListener( 'mouseup', this.PREVENT_EVENT_HANDLER, true );\n\t\tthis.mask.addEventListener( 'mousedown', this.PREVENT_EVENT_HANDLER, true );\n\t\tthis.mask.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', function ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tscope.mask.hide();\n\t\t\tscope.settingElement.deactivate();\n\n\t\t}, false );\n\n\t\t// Event listener\n\t\tthis.addEventListener( 'control-bar-toggle', bar.toggle );\n\n\t\tthis.barElement = bar;\n\n\t};\n\n\t/**\n\t * Create default menu\n\t */\n\tPANOLENS.Widget.prototype.createDefaultMenu = function () {\n\n\t\tvar scope = this, handler;\n\n\t\thandler = function ( method, data ) {\n\n\t\t\treturn function () {\n\n\t\t\t\tscope.dispatchEvent( { \n\n\t\t\t\t\ttype: 'panolens-viewer-handler', \n\t\t\t\t\tmethod: method, \n\t\t\t\t\tdata: data \n\n\t\t\t\t} ); \n\n\t\t\t}\n\n\t\t};\n\n\t\treturn [\n\n\t\t\t{ \n\t\t\t\ttitle: 'Control', \n\t\t\t\tsubMenu: [ \n\t\t\t\t\t{ \n\t\t\t\t\t\ttitle: this.TOUCH_ENABLED ? 'Touch' : 'Mouse', \n\t\t\t\t\t\thandler: handler( 'enableControl', PANOLENS.Controls.ORBIT )\n\t\t\t\t\t},\n\t\t\t\t\t{ \n\t\t\t\t\t\ttitle: 'Sensor', \n\t\t\t\t\t\thandler: handler( 'enableControl', PANOLENS.Controls.DEVICEORIENTATION ) \n\t\t\t\t\t} \n\t\t\t\t]\n\t\t\t},\n\n\t\t\t{ \n\t\t\t\ttitle: 'Mode', \n\t\t\t\tsubMenu: [ \n\t\t\t\t\t{ \n\t\t\t\t\t\ttitle: 'Normal',\n\t\t\t\t\t\thandler: handler( 'disableEffect' )\n\t\t\t\t\t}, \n\t\t\t\t\t{ \n\t\t\t\t\t\ttitle: 'Cardboard',\n\t\t\t\t\t\thandler: handler( 'enableEffect', PANOLENS.Modes.CARDBOARD )\n\t\t\t\t\t},\n\t\t\t\t\t{ \n\t\t\t\t\t\ttitle: 'Stereoscopic',\n\t\t\t\t\t\thandler: handler( 'enableEffect', PANOLENS.Modes.STEREO )\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\n\t\t];\n\n\t};\n\n\t/**\n\t * Add buttons on top of control bar\n\t * @param {string} name - The control button name to be created\n\t */\n\tPANOLENS.Widget.prototype.addControlButton = function ( name ) {\n\n\t\tvar element;\n\n\t\tswitch( name ) {\n\n\t\t\tcase 'fullscreen':\n\n\t\t\t\telement = this.createFullscreenButton();\n\t\t\t\tthis.fullscreenElement = element; \n\n\t\t\t\tbreak;\n\n\t\t\tcase 'setting':\n\n\t\t\t\telement = this.createSettingButton();\n\t\t\t\tthis.settingElement = element;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'video':\n\n\t\t\t\telement = this.createVideoControl();\n\t\t\t\tthis.videoElement = element;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\treturn;\n\n\t\t}\n\n\t\tif ( !element ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.barElement.appendChild( element );\n\n\t};\n\n\tPANOLENS.Widget.prototype.createMask = function () {\n\n\t\tvar element = document.createElement( 'div' );\n\t\telement.style.position = 'absolute';\n\t\telement.style.top = 0;\n\t\telement.style.left = 0;\n\t\telement.style.width = '100%';\n\t\telement.style.height = '100%';\n\t\telement.style.background = 'transparent';\n\t\telement.style.display = 'none';\n\n\t\telement.show = function () {\n\n\t\t\tthis.style.display = 'block';\n\n\t\t};\n\n\t\telement.hide = function () {\n\n\t\t\tthis.style.display = 'none';\n\n\t\t};\n\n\t\treturn element;\n\n\t};\n\n\t/**\n\t * Create Setting button to toggle menu\n\t */\n\tPANOLENS.Widget.prototype.createSettingButton = function () {\n\n\t\tvar scope = this, item;\n\n\t\tfunction onTap ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tscope.mainMenu.toggle();\n\n\t\t\tif ( this.activated ) {\n\t\n\t\t\t\tthis.deactivate();\n\n\t\t\t} else {\n\n\t\t\t\tthis.activate();\n\n\t\t\t}\n\n\t\t}\n\n\t\titem = this.createCustomItem( { \n\n\t\t\tstyle : { \n\n\t\t\t\tbackgroundImage : 'url(\"' + PANOLENS.DataImage.Setting + '\")',\n\t\t\t\twebkitTransition : this.DEFAULT_TRANSITION,\n\t\t\t\ttransition : this.DEFAULT_TRANSITION\n\n\t\t\t},\n\n\t\t\tonTap: onTap\n\n\t\t} );\n\n\t\titem.activate = function () {\n\n\t\t\tthis.style.transform = 'rotate3d(0,0,1,90deg)';\n\t\t\tthis.activated = true;\n\t\t\tscope.mask.show();\n\n\t\t};\n\n\t\titem.deactivate = function () {\n\n\t\t\tthis.style.transform = 'rotate3d(0,0,0,0)';\n\t\t\tthis.activated = false;\n\t\t\tscope.mask.hide();\n\n\t\t\tif ( scope.mainMenu && scope.mainMenu.visible ) {\n\n\t\t\t\tscope.mainMenu.hide();\n\t\t\t\t\n\t\t\t}\n\n\t\t\tif ( scope.activeSubMenu && scope.activeSubMenu.visible ) {\n\n\t\t\t\tscope.activeSubMenu.hide();\n\n\t\t\t}\n\n\t\t\tif ( scope.mainMenu && scope.mainMenu._width ) {\n\n\t\t\t\tscope.mainMenu.changeSize( scope.mainMenu._width );\n\t\t\t\tscope.mainMenu.unslideAll();\n\n\t\t\t}\n\t\t\t\n\t\t};\n\n\t\titem.activated = false;\n\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Create Fullscreen button\n\t * @return {HTMLSpanElement} - The dom element icon for fullscreen\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n\tPANOLENS.Widget.prototype.createFullscreenButton = function () {\n\n\t\tvar scope = this, item, isFullscreen = false, tapSkipped = true, stylesheetId;\n\n\t\tstylesheetId = 'panolens-style-addon';\n\n\t\t// Don't create button if no support\n\t\tif ( !document.fullscreenEnabled       && \n\t\t\t !document.webkitFullscreenEnabled &&\n\t\t\t !document.mozFullScreenEnabled    &&\n\t\t\t !document.msFullscreenEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction onTap ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\ttapSkipped = false;\n\n\t\t\tif ( !isFullscreen ) {\n\t\t\t    scope.container.requestFullscreen && scope.container.requestFullscreen();\n\t\t\t    scope.container.msRequestFullscreen && scope.container.msRequestFullscreen();\n\t\t\t    scope.container.mozRequestFullScreen && scope.container.mozRequestFullScreen();\n\t\t\t    scope.container.webkitRequestFullscreen && scope.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n\t\t\t\tisFullscreen = true;\n\t\t\t} else {\n\t\t\t    document.exitFullscreen && document.exitFullscreen();\n\t\t\t    document.msExitFullscreen && document.msExitFullscreen();\n\t\t\t    document.mozCancelFullScreen && document.mozCancelFullScreen();\n\t\t\t    document.webkitExitFullscreen && document.webkitExitFullscreen();\n\t\t\t\tisFullscreen = false;\n\t\t\t}\n\n\t\t\tthis.style.backgroundImage = ( isFullscreen ) \n\t\t\t\t? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' \n\t\t\t\t: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n\n\t\t}\n\n\t\tfunction onFullScreenChange (e) {\n\n\t\t\tif ( tapSkipped ) {\n\n\t\t\t\tisFullscreen = !isFullscreen; \n\n\t\t\t\titem.style.backgroundImage = ( isFullscreen ) \n\t\t\t\t? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' \n\t\t\t\t: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'onWindowResize' function call on PANOLENS.Viewer\n\t\t\t */\n\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'onWindowResize', data: false } );\n\n\t\t\ttapSkipped = true;\n\n\t\t}\n\n\t\tdocument.addEventListener( 'fullscreenchange', onFullScreenChange, false );\n\t\tdocument.addEventListener( 'webkitfullscreenchange', onFullScreenChange, false );\n\t\tdocument.addEventListener( 'mozfullscreenchange', onFullScreenChange, false );\n\t\tdocument.addEventListener( 'MSFullscreenChange', onFullScreenChange, false );\n\n\t\titem = this.createCustomItem( { \n\n\t\t\tstyle : { \n\n\t\t\t\tbackgroundImage : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")' \n\n\t\t\t},\n\n\t\t\tonTap : onTap\n\n\t\t} );\n\n\t\t// Add fullscreen stlye if not exists\n\t\tif ( !document.querySelector( stylesheetId ) ) {\n\t\t\tvar sheet = document.createElement( 'style' );\n\t\t\tsheet.id = stylesheetId;\n\t\t\tsheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }';\n\t\t\tdocument.body.appendChild( sheet );\n\t\t}\n\t\t\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Create video control container\n\t * @return {HTMLSpanElement} - The dom element icon for video control\n\t */\n\tPANOLENS.Widget.prototype.createVideoControl = function () {\n\n\t\tvar item;\n\n\t\titem = document.createElement( 'span' );\n\t\titem.style.display = 'none';\n\t\titem.show = function () { \n\n\t\t\titem.style.display = '';\n\n\t\t};\n\n\t\titem.hide = function () { \n\n\t\t\titem.style.display = 'none';\n\t\t\titem.controlButton.paused = true;\n\t\t\titem.controlButton.update();\n\n\t\t};\n\n\t\titem.controlButton = this.createVideoControlButton();\n\t\titem.seekBar = this.createVideoControlSeekbar();\n\t\t\n\t\titem.appendChild( item.controlButton );\n\t\titem.appendChild( item.seekBar );\n\n\t\titem.dispose = function () {\n\n\t\t\titem.removeChild( item.controlButton );\n\t\t\titem.removeChild( item.seekBar );\n\n\t\t\titem.controlButton.dispose();\n\t\t\titem.controlButton = null;\n\n\t\t\titem.seekBar.dispose();\n\t\t\titem.seekBar = null;\n\n\t\t};\n\n\t\tthis.addEventListener( 'video-control-show', item.show );\n\t\tthis.addEventListener( 'video-control-hide', item.hide );\n\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Create video control button\n\t * @return {HTMLSpanElement} - The dom element icon for video control\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n\tPANOLENS.Widget.prototype.createVideoControlButton = function () {\n\n\t\tvar scope = this, item;\n\n\t\tfunction onTap ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\t/**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'toggleVideoPlay' function call on PANOLENS.Viewer\n\t\t\t */\n\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused } );\n\n\t\t\tthis.paused = !this.paused;\n\n\t\t\titem.update();\n\n\t\t};\n\n\t\titem = this.createCustomItem( { \n\n\t\t\tstyle : { \n\n\t\t\t\tfloat : 'left',\n\t\t\t\tbackgroundImage : 'url(\"' + PANOLENS.DataImage.VideoPlay + '\")'\n\n\t\t\t},\n\n\t\t\tonTap : onTap\n\n\t\t} );\n\n\t\titem.paused = true;\n\n\t\titem.update = function ( paused ) {\n\n\t\t\tthis.paused = paused !== undefined ? paused : this.paused;\n\n\t\t\tthis.style.backgroundImage = 'url(\"' + ( this.paused \n\t\t\t\t? PANOLENS.DataImage.VideoPlay \n\t\t\t\t: PANOLENS.DataImage.VideoPause ) + '\")';\n\n\t\t};\n\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Create video seekbar\n\t * @return {HTMLSpanElement} - The dom element icon for video seekbar\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n\tPANOLENS.Widget.prototype.createVideoControlSeekbar = function () {\n\n\t\tvar scope = this, item, progressElement, progressElementControl,\n\t\t\tisDragging = false, mouseX, percentageNow, percentageNext;\n\n\t\tprogressElement = document.createElement( 'div' );\n\t\tprogressElement.style.width = '0%';\n\t\tprogressElement.style.height = '100%';\n\t\tprogressElement.style.backgroundColor = '#fff';\n\n\t\tprogressElementControl = document.createElement( 'div' );\n\t\tprogressElementControl.style.float = 'right';\n\t\tprogressElementControl.style.width = '14px';\n\t\tprogressElementControl.style.height = '14px';\n\t\tprogressElementControl.style.transform = 'translate(7px, -5px)';\n\t\tprogressElementControl.style.borderRadius = '50%';\n\t\tprogressElementControl.style.backgroundColor = '#ddd';\n\n\t\tprogressElementControl.addEventListener( 'mousedown', onMouseDown, false );\n\t\tprogressElementControl.addEventListener( 'touchstart', onMouseDown, false );\n\n\t\tfunction onMouseDown ( event ) {\n\n\t\t\tevent.stopPropagation();\n\t\t\t\n\t\t\tisDragging = true;\n\t\t\t\n\t\t\tmouseX = event.clientX || ( event.changedTouches && event.changedTouches[0].clientX );\n\n\t\t\tpercentageNow = parseInt( progressElement.style.width ) / 100;\n\n\t\t\taddControlListeners();\n\t\t}\n\n\t\tfunction onVideoControlDrag ( event ) {\n\n\t\t\tvar clientX;\n\n\t\t\tif( isDragging ){\n\n\t\t\t\tclientX = event.clientX || ( event.changedTouches && event.changedTouches[0].clientX );\n\t\t\t\t\n\t\t\t\tpercentageNext = ( clientX - mouseX ) / item.clientWidth;\n\n\t\t\t\tpercentageNext = percentageNow + percentageNext;\n\n\t\t\t\tpercentageNext = percentageNext > 1 ? 1 : ( ( percentageNext < 0 ) ? 0 : percentageNext );\n\n\t\t\t\titem.setProgress ( percentageNext );\n\n\t\t\t\t/**\n\t\t\t\t * Viewer handler event\n\t\t\t\t * @type {object}\n\t\t\t\t * @property {string} method - 'setVideoCurrentTime' function call on PANOLENS.Viewer\n\t\t\t\t * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t\t\t\t */\n\t\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext } );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onVideoControlStop ( event ) {\n\n\t\t\tevent.stopPropagation();\n\n\t\t\tisDragging = false;\n\n\t\t\tremoveControlListeners();\n\n\t\t}\n\n\t\tfunction addControlListeners () {\n\n\t\t\tscope.container.addEventListener( 'mousemove', onVideoControlDrag, false );\n\t\t\tscope.container.addEventListener( 'mouseup', onVideoControlStop, false );\n\t\t\tscope.container.addEventListener( 'touchmove', onVideoControlDrag, false );\n\t\t\tscope.container.addEventListener( 'touchend', onVideoControlStop, false );\n\n\n\t\t}\n\n\t\tfunction removeControlListeners () {\n\n\t\t\tscope.container.removeEventListener( 'mousemove', onVideoControlDrag, false );\n\t\t\tscope.container.removeEventListener( 'mouseup', onVideoControlStop, false );\n\t\t\tscope.container.removeEventListener( 'touchmove', onVideoControlDrag, false );\n\t\t\tscope.container.removeEventListener( 'touchend', onVideoControlStop, false );\n\n\t\t}\n\n\t\tfunction onTap ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar percentage;\n\n\t\t\tif ( event.target === progressElementControl ) { return; }\n\n\t\t\tpercentage = ( event.changedTouches && event.changedTouches.length > 0 )\n\t\t\t\t? ( event.changedTouches[0].pageX - event.target.getBoundingClientRect().left ) / this.clientWidth\n\t\t\t\t: event.offsetX / this.clientWidth;\n\n\t\t\t/**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'setVideoCurrentTime' function call on PANOLENS.Viewer\n\t\t\t * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t\t\t */\n\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage } );\n\n\t\t\titem.setProgress( event.offsetX / this.clientWidth );\n\n\t\t};\n\n\t\tfunction onDispose () {\n\n\t\t\tremoveControlListeners();\n\t\t\tprogressElement = null;\n\t\t\tprogressElementControl = null;\n\n\t\t}\n\n\t\tprogressElement.appendChild( progressElementControl );\n\n\t\titem = this.createCustomItem( {\n\n\t\t\tstyle : { \n\n\t\t\t\tfloat : 'left',\n\t\t\t\twidth : '30%',\n\t\t\t\theight : '4px',\n\t\t\t\tmarginTop : '20px',\n\t\t\t\tbackgroundColor : 'rgba(188,188,188,0.8)'\n\n\t\t\t},\n\n\t\t\tonTap : onTap,\n\t\t\tonDispose: onDispose\n\n\t\t} );\n\n\t\titem.appendChild( progressElement );\n\n\t\titem.setProgress = function( percentage ) {\n\n\t\t\tprogressElement.style.width = percentage * 100 + '%';\n\n\t\t};\t\t\n\n\t\tthis.addEventListener( 'video-update', function ( event ) { \n\n\t\t\titem.setProgress( event.percentage ); \n\n\t\t} );\n\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Create menu item\n\t * @param  {string} title - Title to display\n\t * @return {HTMLDomElement} - An anchor tag element\n\t */\n\tPANOLENS.Widget.prototype.createMenuItem = function ( title ) {\n\n\t\tvar scope = this, item = document.createElement( 'a' );\n\t\titem.textContent = title;\n\t\titem.style.display = 'block';\n\t\titem.style.padding = '10px';\n\t\titem.style.textDecoration = 'none';\n\t\titem.style.cursor = 'pointer';\n\t\titem.style.pointerEvents = 'auto';\n\t\titem.style.transition = this.DEFAULT_TRANSITION;\n\n\t\titem.slide = function ( right ) {\n\n\t\t\tthis.style.transform = 'translateX(' + ( right ? '' : '-' ) + '100%)';\n\n\t\t};\n\n\t\titem.unslide = function () {\n\n\t\t\tthis.style.transform = 'translateX(0)';\n\n\t\t};\n\n\t\titem.setIcon = function ( url ) {\n\n\t\t\tif ( this.icon ) {\n\n\t\t\t\tthis.icon.style.backgroundImage = 'url(' + url + ')';\n\n\t\t\t}\n\n\t\t};\n\n\t\titem.setSelectionTitle = function ( title ) {\n\n\t\t\tif ( this.selection ) {\n\n\t\t\t\tthis.selection.textContent = title;\n\n\t\t\t}\n\n\t\t};\n\n\t\titem.addSelection = function ( name ) {\n\t\t\t\n\t\t\tvar selection = document.createElement( 'span' );\n\t\t\tselection.style.fontSize = '13px';\n\t\t\tselection.style.fontWeight = '300';\n\t\t\tselection.style.float = 'right';\n\n\t\t\tthis.selection = selection;\n\t\t\tthis.setSelectionTitle( name );\n\t\t\tthis.appendChild( selection );\n\t\t\t\n\t\t\treturn this;\n\n\t\t};\n\n\t\titem.addIcon = function ( url, left, flip ) {\n\n\t\t\turl = url || PANOLENS.DataImage.ChevronRight;\n\t\t\tleft = left || false;\n\t\t\tflip = flip || false;\n\t\t\t\n\t\t\tvar element = document.createElement( 'span' );\n\t\t\telement.style.float = left ? 'left' : 'right';\n\t\t\telement.style.width = '17px';\n\t\t\telement.style.height = '17px';\n\t\t\telement.style[ 'margin' + ( left ? 'Right' : 'Left' ) ] = '12px';\n\t\t\telement.style.backgroundSize = 'cover';\n\n\t\t\tif ( flip ) {\n\n\t\t\t\telement.style.transform = 'rotateZ(180deg)';\n\n\t\t\t}\n\n\t\t\tthis.icon = element;\n\t\t\tthis.setIcon( url );\n\t\t\tthis.appendChild( element );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\titem.addSubMenu = function ( title, items ) {\n\n\t\t\tthis.subMenu = scope.createSubMenu( title, items );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\titem.addEventListener( 'mouseenter', function () {\n\t\t\t\n\t\t\tthis.style.backgroundColor = '#e0e0e0';\n\n\t\t}, false );\n\n\t\titem.addEventListener( 'mouseleave', function () {\n\t\t\t\n\t\t\tthis.style.backgroundColor = '#fafafa';\n\n\t\t}, false );\n\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Create menu item header\n\t * @param  {string} title - Title to display\n\t * @return {HTMLDomElement} - An anchor tag element\n\t */\n\tPANOLENS.Widget.prototype.createMenuItemHeader = function ( title ) {\n\n\t\tvar header = this.createMenuItem( title );\n\n\t\theader.style.borderBottom = '1px solid #333';\n\t\theader.style.paddingBottom = '15px';\n\n\t\treturn header;\n\n\t};\n\n\t/**\n\t * Create main menu\n\t * @param  {array} menus - Menu array list\n\t * @return {HTMLDomElement} - A span element\n\t */\n\tPANOLENS.Widget.prototype.createMainMenu = function ( menus ) {\n\t\t\n\t\tvar scope = this, menu = this.createMenu(), subMenu;\n\n\t\tmenu._width = 200;\n\t\tmenu.changeSize( menu._width );\n\n\t\tfunction onTap ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar mainMenu = scope.mainMenu, subMenu = this.subMenu;\n\n\t\t\tfunction onNextTick () {\n\n\t\t\t\tmainMenu.changeSize( subMenu.clientWidth );\n\t\t\t\tsubMenu.show();\n\t\t\t\tsubMenu.unslideAll();\n\n\t\t\t}\n\n\t\t\tmainMenu.hide();\n\t\t\tmainMenu.slideAll();\n\t\t\tmainMenu.parentElement.appendChild( subMenu );\n\n\t\t\tscope.activeMainItem = this;\n\t\t\tscope.activeSubMenu = subMenu;\n\n\t\t\twindow.requestAnimationFrame( onNextTick );\n\n\t\t};\n\n\t\tfor ( var i = 0; i < menus.length; i++ ) {\n\n\t\t\tvar item = menu.addItem( menus[ i ].title );\n\n\t\t\titem.style.paddingLeft = '20px';\n\n\t\t\titem.addIcon()\n\t\t\t\t.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false );\n\n\t\t\tif ( menus[ i ].subMenu && menus[ i ].subMenu.length > 0 ) {\n\n\t\t\t\tvar title = menus[ i ].subMenu[ 0 ].title;\n\n\t\t\t\titem.addSelection( title )\n\t\t\t\t\t.addSubMenu( menus[ i ].title, menus[ i ].subMenu );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn menu;\n\n\t};\n\n\t/**\n\t * Create sub menu\n\t * @param {string} title - Sub menu title\n\t * @param {array} items - Item array list\n\t * @return {HTMLDomElement} - A span element\n\t */\n\tPANOLENS.Widget.prototype.createSubMenu = function ( title, items ) {\n\n\t\tvar scope = this, menu, subMenu = this.createMenu();\n\n\t\tsubMenu.items = items;\n\t\tsubMenu.activeItem;\n\n\t\tfunction onTap ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tmenu = scope.mainMenu;\n\t\t\tmenu.changeSize( menu._width );\n\t\t\tmenu.unslideAll();\n\t\t\tmenu.show();\n\t\t\tsubMenu.slideAll( true );\n\t\t\tsubMenu.hide();\n\n\t\t\tif ( this.type !== 'header' ) {\n\n\t\t\t\tsubMenu.setActiveItem( this );\n\t\t\t\tscope.activeMainItem.setSelectionTitle( this.textContent );\n\n\t\t\t\tthis.handler && this.handler();\n\n\t\t\t}\n\n\t\t}\n\n\t\tsubMenu.addHeader( title ).addIcon( undefined, true, true ).addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false );\n\n\t\tfor ( var i = 0; i < items.length; i++ ) {\n\n\t\t\tvar item = subMenu.addItem( items[ i ].title );\n\n\t\t\titem.style.fontWeight = 300;\n\t\t\titem.handler = items[ i ].handler;\n\t\t\titem.addIcon( ' ', true );\n\t\t\titem.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false );\n\n\t\t\tif ( !subMenu.activeItem ) {\n\n\t\t\t\tsubMenu.setActiveItem( item );\n\n\t\t\t}\n\n\t\t}\n\n\t\tsubMenu.slideAll( true );\n\n\t\treturn subMenu;\n\t\t\n\t};\n\n\t/**\n\t * Create general menu\n\t * @return {HTMLDomElement} - A span element\n\t */\n\tPANOLENS.Widget.prototype.createMenu = function () {\n\n\t\tvar scope = this, menu = document.createElement( 'span' ), style;\n\n\t\tstyle = menu.style;\n\n\t\tstyle.padding = '5px 0';\n\t\tstyle.position = 'fixed';\n\t\tstyle.bottom = '100%';\n\t\tstyle.right = '14px';\n\t\tstyle.backgroundColor = '#fafafa';\n\t\tstyle.fontFamily = 'Helvetica Neue';\n\t\tstyle.fontSize = '14px';\n\t\tstyle.visibility = 'hidden';\n\t\tstyle.opacity = 0;\n\t\tstyle.boxShadow = '0 0 12pt rgba(0,0,0,0.25)';\n  \t\tstyle.borderRadius = '2px';\n\t\tstyle.overflow = 'hidden';\n\t\tstyle.willChange = 'width, height, opacity';\n\t\tstyle.pointerEvents = 'auto';\n\t\tstyle.transition = this.DEFAULT_TRANSITION;\n\n\t\tmenu.visible = false;\n\n\t\tmenu.changeSize = function ( width, height ) {\n\n\t\t\tif ( width ) {\n\n\t\t\t\tthis.style.width = width + 'px';\n\n\t\t\t}\n\n\t\t\tif ( height ) {\n\n\t\t\t\tthis.style.height = height + 'px';\n\n\t\t\t}\n\n\t\t};\n\n\t\tmenu.show = function () {\n\n\t\t\tthis.style.opacity = 1;\n\t\t\tthis.style.visibility = 'visible';\n\t\t\tthis.visible = true;\n\n\t\t};\n\n\t\tmenu.hide = function () {\n\n\t\t\tthis.style.opacity = 0;\n\t\t\tthis.style.visibility = 'hidden';\n\t\t\tthis.visible = false;\n\n\t\t};\n\n\t\tmenu.toggle = function () {\n\n\t\t\tif ( this.visible ) {\n\n\t\t\t\tthis.hide();\n\n\t\t\t} else {\n\n\t\t\t\tthis.show();\n\n\t\t\t}\n\n\t\t};\n\n\t\tmenu.slideAll = function ( right ) {\n\n\t\t\tfor ( var i = 0; i < menu.children.length; i++ ){\n\n\t\t\t\tif ( menu.children[ i ].slide ) {\n\n\t\t\t\t\tmenu.children[ i ].slide( right );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tmenu.unslideAll = function () {\n\n\t\t\tfor ( var i = 0; i < menu.children.length; i++ ){\n\n\t\t\t\tif ( menu.children[ i ].unslide ) {\n\n\t\t\t\t\tmenu.children[ i ].unslide();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tmenu.addHeader = function ( title ) {\n\n\t\t\tvar header = scope.createMenuItemHeader( title );\n\t\t\theader.type = 'header';\n\n\t\t\tthis.appendChild( header );\n\n\t\t\treturn header;\n\n\t\t};\n\n\t\tmenu.addItem = function ( title ) {\n\n\t\t\tvar item = scope.createMenuItem( title );\n\t\t\titem.type = 'item';\n\n\t\t\tthis.appendChild( item );\n\n\t\t\treturn item;\n\n\t\t};\n\n\t\tmenu.setActiveItem = function ( item ) {\n\n\t\t\tif ( this.activeItem ) {\n\n\t\t\t\tthis.activeItem.setIcon( ' ' );\n\n\t\t\t}\n\n\t\t\titem.setIcon( PANOLENS.DataImage.Check );\n\n\t\t\tthis.activeItem = item;\n\n\t\t};\n\n\t\tmenu.addEventListener( 'mousemove', this.PREVENT_EVENT_HANDLER, true );\n\t\tmenu.addEventListener( 'mouseup', this.PREVENT_EVENT_HANDLER, true );\n\t\tmenu.addEventListener( 'mousedown', this.PREVENT_EVENT_HANDLER, true );\n\n\t\treturn menu;\n\n\t};\n\n\t/**\n\t * Create custom item element\n\t * @return {HTMLSpanElement} - The dom element icon\n\t */\n\tPANOLENS.Widget.prototype.createCustomItem = function ( options ) {\n\n\t\toptions = options || {};\n\n\t\tvar scope = this,\n\t\t\titem = options.element || document.createElement( 'span' );\n\n\t\titem.style.cursor = 'pointer';\n\t\titem.style.float = 'right';\n\t\titem.style.width = '44px';\n\t\titem.style.height = '100%';\n\t\titem.style.backgroundSize = '60%';\n\t\titem.style.backgroundRepeat = 'no-repeat';\n\t\titem.style.backgroundPosition = 'center';\n\t\titem.style.webkitUserSelect = \n\t\titem.style.MozUserSelect = \n\t\titem.style.userSelect = 'none';\n\t\titem.style.position = 'relative';\n\t\titem.style.pointerEvents = 'auto';\n\n\t\t// White glow on icon\n\t\titem.addEventListener( scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function() {\n\t\t\titem.style.filter = \n\t\t\titem.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))';\n\t\t});\n\t\titem.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function() {\n\t\t\titem.style.filter = \n\t\t\titem.style.webkitFilter = '';\n\t\t});\n\n\t\titem = this.mergeStyleOptions( item, options.style );\n\n\t\tif ( options.onTap ) {\n\n\t\t\titem.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false );\n\n\t\t}\n\n\t\titem.dispose = function () {\n\n\t\t\titem.removeEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false );\n\n\t\t\toptions.onDispose && options.onDispose();\n\n\t\t};\n\t\t\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Merge item css style\n\t * @param  {HTMLDOMElement} element - The element to be merged with style\n\t * @param  {object} options - The style options\n\t * @return {HTMLDOMElement} - The same element with merged styles\n\t */\n\tPANOLENS.Widget.prototype.mergeStyleOptions = function ( element, options ) {\n\n\t\toptions = options || {};\n\n\t\tfor ( var property in options ){\n\n\t\t\tif ( options.hasOwnProperty( property ) ) {\n\n\t\t\t\telement.style[ property ] = options[ property ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn element;\n\n\t};\n\n\t/**\n\t * Dispose widgets by detaching dom elements from container\n\t */\n\tPANOLENS.Widget.prototype.dispose = function () {\n\n\t\tif ( this.barElement ) {\n\t\t\tthis.container.removeChild( this.barElement );\n\t\t\tthis.barElement.dispose();\n\t\t\tthis.barElement = null;\n\n\t\t}\n\n\t};\n\n})();;( function () {\n\n\t/**\n\t * Information spot attached to panorama\n\t * @constructor\n\t * @param {number} [scale=300] - Infospot scale\n\t * @param {imageSrc} [imageSrc=PANOLENS.DataImage.Info] - Image overlay info\n\t * @param {boolean} [animated=true] - Enable default hover animation\n\t */\n\tPANOLENS.Infospot = function ( scale, imageSrc, animated ) {\n\t\t\n\t\tvar scope = this, ratio, startScale, endScale, duration;\n\n\t\tscale = scale || 300;\n\t\timageSrc = imageSrc || PANOLENS.DataImage.Info;\n\t\tduration = 500;\n\n\t\tTHREE.Sprite.call( this );\n\n\t\tthis.type = 'infospot';\n\n\t\tthis.animated = animated !== undefined ? animated : true;\n\t\tthis.isHovering = false;\n\t\tthis.visible = false;\n\n\t\tthis.element;\n\t\tthis.toPanorama;\n\t\tthis.cursorStyle;\n\n\t\tthis.mode = PANOLENS.Modes.UNKNOWN;\n\n\t\tthis.scale.set( scale, scale, 1 );\n\t\tthis.rotation.y = Math.PI;\n\t\tthis.scaleFactor = 1.3;\n\n\t\tthis.container;\n\n\t\t// Event Handler\n\t\tthis.HANDLER_FOCUS;\n\n\t\tPANOLENS.Utils.TextureLoader.load( imageSrc, postLoad );\t\t\n\n\t\tfunction postLoad ( texture ) {\n\n\t\t\ttexture.wrapS = THREE.RepeatWrapping;\n\t\t\ttexture.repeat.x = - 1;\n\n\t\t\ttexture.image.width = texture.image.naturalWidth || 64;\n\t\t\ttexture.image.height = texture.image.naturalHeight || 64;\n\n\t\t\tratio = texture.image.width / texture.image.height;\n\t\t\tscope.scale.set( ratio * scale, scale, 1 );\n\n\t\t\tstartScale = scope.scale.clone();\n\n\t\t\tscope.scaleUpAnimation = new TWEEN.Tween( scope.scale )\n\t\t\t\t.to( { x: startScale.x * scope.scaleFactor, y: startScale.y * scope.scaleFactor }, duration )\n\t\t\t\t.easing( TWEEN.Easing.Elastic.Out );\n\n\t\t\tscope.scaleDownAnimation = new TWEEN.Tween( scope.scale )\n\t\t\t\t.to( { x: startScale.x, y: startScale.y }, duration )\n\t\t\t\t.easing( TWEEN.Easing.Elastic.Out );\n\n\t\t\tscope.material.side = THREE.DoubleSide;\n\t\t\tscope.material.map = texture;\n\t\t\tscope.material.depthTest = false;\n\t\t\tscope.material.needsUpdate = true;\n\n\t\t}\n\n\t\tfunction show () {\n\n\t\t\tthis.visible = true;\n\n\t\t}\n\n\t\tfunction hide () {\n\n\t\t\tthis.visible = false;\n\n\t\t}\n\n\t\t// Add show and hide animations\n\t\tthis.showAnimation = new TWEEN.Tween( this.material )\n\t\t\t.to( { opacity: 1 }, duration )\n\t\t\t.onStart( show.bind( this ) )\n\t\t\t.easing( TWEEN.Easing.Quartic.Out );\n\n\t\tthis.hideAnimation = new TWEEN.Tween( this.material )\n\t\t\t.to( { opacity: 0 }, duration )\n\t\t\t.onComplete( hide.bind( this ) )\n\t\t\t.easing( TWEEN.Easing.Quartic.Out );\n\n\t\t// Attach event listeners\n\t\tthis.addEventListener( 'click', this.onClick );\n\t\tthis.addEventListener( 'hover', this.onHover );\n\t\tthis.addEventListener( 'hoverenter', this.onHoverStart );\n\t\tthis.addEventListener( 'hoverleave', this.onHoverEnd );\n\t\tthis.addEventListener( 'panolens-dual-eye-effect', this.onDualEyeEffect );\n\t\tthis.addEventListener( 'panolens-container', this.setContainer.bind( this ) );\n\t\tthis.addEventListener( 'dismiss', this.onDismiss );\n\t\tthis.addEventListener( 'panolens-infospot-focus', this.setFocusMethod );\n\n\t};\n\n\tPANOLENS.Infospot.prototype = Object.create( THREE.Sprite.prototype );\n\n\t/**\n\t * Set infospot container\n\t * @param {HTMLElement|object} data - Data with container information\n\t */\n\tPANOLENS.Infospot.prototype.setContainer = function ( data ) {\n\n\t\tvar container;\n\n\t\tif ( data instanceof HTMLElement ) {\n\n\t\t\tcontainer = data;\n\n\t\t} else if ( data && data.container ) {\n\n\t\t\tcontainer = data.container;\n\n\t\t}\n\n\t\t// Append element if exists\n\t\tif ( container && this.element ) {\n\n\t\t\tcontainer.appendChild( this.element );\n\n\t\t}\n\n\t\tthis.container = container;\n\n\t};\n\n\t/**\n\t * Get container\n\t * @return {HTMLElement} - The container of this infospot\n\t */\n\tPANOLENS.Infospot.prototype.getContainer = function () {\n\n\t\treturn this.container;\n\n\t};\n\n\t/**\n\t * This will be called by a click event\n\t * Translate and lock the hovering element if any\n\t * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t */\n\tPANOLENS.Infospot.prototype.onClick = function ( event ) {\n\n\t\tif ( this.element && this.getContainer() ) {\n\n\t\t\tthis.onHoverStart( event );\n\n\t\t\t// Lock element\n\t\t\tthis.lockHoverElement();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Dismiss current element if any\n\t * @param  {object} event - Dismiss event\n\t */\n\tPANOLENS.Infospot.prototype.onDismiss = function ( event ) {\n\n\t\tif ( this.element ) {\n\n\t\t\tthis.unlockHoverElement();\n\t\t\tthis.onHoverEnd();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * This will be called by a mouse hover event\n\t * Translate the hovering element if any\n\t * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t */\n\tPANOLENS.Infospot.prototype.onHover = function ( event ) {\n\n\t};\n\n\t/**\n\t * This will be called on a mouse hover start\n\t * Sets cursor style to 'pointer', display the element and scale up the infospot\n\t */\n\tPANOLENS.Infospot.prototype.onHoverStart = function ( event ) {\n\n\t\tif ( !this.getContainer() ) { return; }\n\n\t\tvar cursorStyle = this.cursorStyle || ( this.mode === PANOLENS.Modes.NORMAL ? 'pointer' : 'default' );\n\n\t\tthis.isHovering = true;\n\t\tthis.container.style.cursor = cursorStyle;\n\t\t\n\t\tif ( this.animated ) {\n\n\t\t\tthis.scaleDownAnimation && this.scaleDownAnimation.stop();\n\t\t\tthis.scaleUpAnimation && this.scaleUpAnimation.start();\n\n\t\t}\n\t\t\n\t\tif ( this.element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0 ) {\n\n\t\t\tif ( this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO ) {\n\n\t\t\t\tthis.element.style.display = 'none';\n\t\t\t\tthis.element.left && ( this.element.left.style.display = 'block' );\n\t\t\t\tthis.element.right && ( this.element.right.style.display = 'block' );\n\n\t\t\t\t// Store element width for reference\n\t\t\t\tthis.element._width = this.element.left.clientWidth;\n\t\t\t\tthis.element._height = this.element.left.clientHeight;\n\n\t\t\t} else {\n\n\t\t\t\tthis.element.style.display = 'block';\n\t\t\t\tthis.element.left && ( this.element.left.style.display = 'none' );\n\t\t\t\tthis.element.right && ( this.element.right.style.display = 'none' );\n\n\t\t\t\t// Store element width for reference\n\t\t\t\tthis.element._width = this.element.clientWidth;\n\t\t\t\tthis.element._height = this.element.clientHeight;\n\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t};\n\n\t/**\n\t * This will be called on a mouse hover end\n\t * Sets cursor style to 'default', hide the element and scale down the infospot\n\t */\n\tPANOLENS.Infospot.prototype.onHoverEnd = function () {\n\n\t\tif ( !this.getContainer() ) { return; }\n\n\t\tthis.isHovering = false;\n\t\tthis.container.style.cursor = 'default';\n\n\t\tif ( this.animated ) {\n\n\t\t\tthis.scaleUpAnimation && this.scaleUpAnimation.stop();\n\t\t\tthis.scaleDownAnimation && this.scaleDownAnimation.start();\n\n\t\t}\n\n\t\tif ( this.element && !this.element.locked ) {\n\n\t\t\tthis.element.style.display = 'none';\n\t\t\tthis.element.left && ( this.element.left.style.display = 'none' );\n\t\t\tthis.element.right && ( this.element.right.style.display = 'none' );\n\n\t\t\tthis.unlockHoverElement();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * On dual eye effect handler\n\t * Creates duplicate left and right element\n\t * @param  {object} event - panolens-dual-eye-effect event\n\t */\n\tPANOLENS.Infospot.prototype.onDualEyeEffect = function ( event ) {\n\t\t\n\t\tif ( !this.getContainer() ) { return; }\n\n\t\tvar element, halfWidth, halfHeight;\n\n\t\tthis.mode = event.mode;\n\n\t\telement = this.element;\n\n\t\thalfWidth = this.container.clientWidth / 2;\n\t\thalfHeight = this.container.clientHeight / 2;\n\n\t\tif ( !element ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( !element.left || !element.right ) {\n\n\t\t\telement.left = element.cloneNode( true );\n\t\t\telement.right = element.cloneNode( true );\n\n\t\t}\n\n\t\tif ( this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO ) {\n\n\t\t\telement.left.style.display = element.style.display;\n\t\t\telement.right.style.display = element.style.display;\n\t\t\telement.style.display = 'none';\n\n\t\t} else {\n\n\t\t\telement.style.display = element.left.style.display;\n\t\t\telement.left.style.display = 'none';\n\t\t\telement.right.style.display = 'none';\n\n\t\t}\n\n\t\t// Update elements translation\n\t\tthis.translateElement( halfWidth, halfHeight );\n\n\t\tthis.container.appendChild( element.left );\n\t\tthis.container.appendChild( element.right );\n\n\t};\n\n\t/**\n\t * Translate the hovering element by css transform\n\t * @param  {number} x - X position on the window screen\n\t * @param  {number} y - Y position on the window screen\n\t */\n\tPANOLENS.Infospot.prototype.translateElement = function ( x, y ) {\n\n\t\tif ( !this.element._width || !this.element._height || !this.getContainer() ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar left, top, element, width, height, delta, container;\n\n\t\tcontainer = this.container;\n\t\telement = this.element;\n\t\twidth = element._width / 2;\n\t\theight = element._height / 2;\n\t\tdelta = element.verticalDelta !== undefined ? element.verticalDelta : 40;\n\n\t\tleft = x - width;\n\t\ttop = y - height - delta;\n\n\t\tif ( ( this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO ) \n\t\t\t\t&& element.left && element.right\n\t\t\t\t&& !( x === container.clientWidth / 2 && y === container.clientHeight / 2 ) ) {\n\n\t\t\tleft = container.clientWidth / 4 - width + ( x - container.clientWidth / 2 );\n\t\t\ttop = container.clientHeight / 2 - height - delta + ( y - container.clientHeight / 2 );\n\n\t\t\tthis.setElementStyle( 'transform', element.left, 'translate(' + left + 'px, ' + top + 'px)' );\n\n\t\t\tleft += container.clientWidth / 2;\n\n\t\t\tthis.setElementStyle( 'transform', element.right, 'translate(' + left + 'px, ' + top + 'px)' );\n\n\t\t} else {\n\n\t\t\tthis.setElementStyle( 'transform', element, 'translate(' + left + 'px, ' + top + 'px)' );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set vendor specific css\n\t * @param {string} type - CSS style name\n\t * @param {HTMLElement} element - The element to be modified\n\t * @param {string} value - Style value\n\t */\n\tPANOLENS.Infospot.prototype.setElementStyle = function ( type, element, value ) {\n\n\t\tvar style = element.style;\n\n\t\tif ( type === 'transform' ) {\n\n\t\t\tstyle.webkitTransform = style.msTransform = style.transform = value;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set hovering text content\n\t * @param {string} text - Text to be displayed\n\t */\n\tPANOLENS.Infospot.prototype.setText = function ( text ) {\n\n\t\tif ( this.element ) {\n\n\t\t\tthis.element.textContent = text;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set cursor css style on hover\n\t */\n\tPANOLENS.Infospot.prototype.setCursorHoverStyle = function ( style ) {\n\n\t\tthis.cursorStyle = style;\n\n\t};\n\n\t/**\n\t * Add hovering text element\n\t * @param {string} text - Text to be displayed\n\t * @param {number} [delta=40] - Vertical delta to the infospot\n\t */\n\tPANOLENS.Infospot.prototype.addHoverText = function ( text, delta ) {\n\n\t\tif ( !this.element ) {\n\n\t\t\tthis.element = document.createElement( 'div' );\n\t\t\tthis.element.style.display = 'none';\n\t\t\tthis.element.style.color = '#fff';\n\t\t\tthis.element.style.top = 0;\n\t\t\tthis.element.style.maxWidth = '50%';\n\t\t\tthis.element.style.maxHeight = '50%';\n\t\t\tthis.element.style.textShadow = '0 0 3px #000000';\n\t\t\tthis.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif';\n\t\t\tthis.element.style.position = 'absolute';\n\t\t\tthis.element.classList.add( 'panolens-infospot' );\n\t\t\tthis.element.verticalDelta = delta !== undefined ? delta : 40;\n\n\t\t}\n\n\t\tthis.setText( text );\n\n\t};\n\n\t/**\n\t * Add hovering element by cloning an element\n\t * @param {HTMLDOMElement} el - Element to be cloned and displayed\n\t * @param {number} [delta=40] - Vertical delta to the infospot\n\t */\n\tPANOLENS.Infospot.prototype.addHoverElement = function ( el, delta ) {\n\n\t\tif ( !this.element ) { \n\n\t\t\tthis.element = el.cloneNode( true );\n\t\t\tthis.element.style.display = 'none';\n\t\t\tthis.element.style.top = 0;\n\t\t\tthis.element.style.position = 'absolute';\n\t\t\tthis.element.classList.add( 'panolens-infospot' );\n\t\t\tthis.element.verticalDelta = delta !== undefined ? delta : 40;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Remove hovering element\n\t */\n\tPANOLENS.Infospot.prototype.removeHoverElement = function () {\n\n\t\tif ( this.element ) { \n\n\t\t\tif ( this.element.left ) {\n\n\t\t\t\tthis.container.removeChild( this.element.left );\n\t\t\t\tthis.element.left = null;\n\n\t\t\t}\n\n\t\t\tif ( this.element.right ) {\n\n\t\t\t\tthis.container.removeChild( this.element.right );\n\t\t\t\tthis.element.right = null;\n\n\t\t\t}\n\n\t\t\tthis.container.removeChild( this.element );\n\t\t\tthis.element = null;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Lock hovering element\n\t */\n\tPANOLENS.Infospot.prototype.lockHoverElement = function () {\n\n\t\tif ( this.element ) { \n\n\t\t\tthis.element.locked = true;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Unlock hovering element\n\t */\n\tPANOLENS.Infospot.prototype.unlockHoverElement = function () {\n\n\t\tif ( this.element ) { \n\n\t\t\tthis.element.locked = false;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Show infospot\n\t * @param  {number} [delay=0] - Delay time to show\n\t */\n\tPANOLENS.Infospot.prototype.show = function ( delay ) {\n\n\t\tdelay = delay || 0;\n\n\t\tif ( this.animated ) {\n\n\t\t\tthis.hideAnimation && this.hideAnimation.stop();\n\t\t\tthis.showAnimation && this.showAnimation.delay( delay ).start();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Hide infospot\n\t * @param  {number} [delay=0] - Delay time to hide\n\t */\n\tPANOLENS.Infospot.prototype.hide = function ( delay ) {\n\n\t\tdelay = delay || 0;\n\n\t\tif ( this.animated ) {\n\n\t\t\tthis.showAnimation && this.showAnimation.stop();\n\t\t\tthis.hideAnimation && this.hideAnimation.delay( delay ).start();\n\n\t\t}\n\t\t\n\t\t\n\t};\n\n\t/**\n\t * Set focus event handler\n\t */\n\tPANOLENS.Infospot.prototype.setFocusMethod = function ( event ) {\n\n\t\tif ( event ) {\n\n\t\t\tthis.HANDLER_FOCUS = event.method;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Focus camera center to this infospot\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n\tPANOLENS.Infospot.prototype.focus = function ( duration, easing ) {\n\n\t\tif ( this.HANDLER_FOCUS ) {\n\n\t\t\tthis.HANDLER_FOCUS( this.position, duration, easing );\n\t\t\tthis.onDismiss();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Dispose infospot\n\t */\n\tPANOLENS.Infospot.prototype.dispose = function () {\n\n\t\tthis.removeHoverElement();\n\t\tthis.material.dispose();\n\n\t\tif ( this.parent ) {\n\n\t\t\tthis.parent.remove( this );\n\n\t\t}\n\n\t};\n\n} )();;( function () {\n\n\t'use strict';\n\n\t/**\n\t * Viewer contains pre-defined scene, camera and renderer\n\t * @constructor\n\t * @param {object} [options] - Use custom or default config options\n\t * @param {HTMLElement} [options.container] - A HTMLElement to host the canvas\n\t * @param {THREE.Scene} [options.scene=THREE.Scene] - A THREE.Scene which contains panorama and 3D objects\n\t * @param {THREE.Camera} [options.camera=THREE.PerspectiveCamera] - A THREE.Camera to view the scene\n\t * @param {THREE.WebGLRenderer} [options.renderer=THREE.WebGLRenderer] - A THREE.WebGLRenderer to render canvas\n\t * @param {boolean} [options.controlBar=true] - Show/hide control bar on the bottom of the container\n\t * @param {array}   [options.controlButtons=[]] - Button names to mount on controlBar if controlBar exists, Defaults to ['fullscreen', 'setting', 'video']\n\t * @param {boolean} [options.autoHideControlBar=false] - Auto hide control bar when click on non-active area\n\t * @param {boolean} [options.autoHideInfospot=true] - Auto hide infospots when click on non-active area\n\t * @param {boolean} [options.horizontalView=false] - Allow only horizontal camera control\n\t * @param {number}  [options.clickTolerance=10] - Distance tolerance to tigger click / tap event\n\t * @param {number}  [options.cameraFov=60] - Camera field of view value\n\t * @param {boolean} [options.reverseDragging=false] - Reverse dragging direction\n\t * @param {boolean} [options.enableReticle=false] - Enable reticle for mouseless interaction other than VR mode\n\t * @param {number}  [options.dwellTime=1500] - Dwell time for reticle selection\n\t * @param {boolean} [options.autoReticleSelect=true] - Auto select a clickable target after dwellTime\n\t * @param {boolean} [options.viewIndicator=false] - Adds an angle view indicator in upper left corner\n\t * @param {number}  [options.indicatorSize=30] - Size of View Indicator\n\t * @param {string}  [options.output='none'] - Whether and where to output raycast position. Could be 'console' or 'overlay'\n\t */\n\tPANOLENS.Viewer = function ( options ) {\n\n\t\tTHREE.EventDispatcher.call( this );\n\n\t\tif ( !THREE ) {\n\n\t\t\tconsole.error('Three.JS not found');\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar container;\n\n\t\toptions = options || {};\n\t\toptions.controlBar = options.controlBar !== undefined ? options.controlBar : true;\n\t\toptions.controlButtons = options.controlButtons || [ 'fullscreen', 'setting', 'video' ];\n\t\toptions.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false;\n\t\toptions.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true;\n\t\toptions.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false;\n\t\toptions.clickTolerance = options.clickTolerance || 10;\n\t\toptions.cameraFov = options.cameraFov || 60;\n\t\toptions.reverseDragging = options.reverseDragging || false;\n\t\toptions.enableReticle = options.enableReticle || false;\n\t\toptions.dwellTime = options.dwellTime || 1500;\n\t\toptions.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true;\n\t\toptions.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false;\n\t\toptions.indicatorSize = options.indicatorSize || 30;\n\t\toptions.output = options.output ? options.output : 'none';\n\n\t\tthis.options = options;\n\n\t\t// Container\n\t\tif ( options.container ) {\n\n\t\t\tcontainer = options.container;\n\t\t\tcontainer._width = container.clientWidth;\n\t\t\tcontainer._height = container.clientHeight;\n\n\t\t} else {\n\n\t\t\tcontainer = document.createElement( 'div' );\n\t\t\tcontainer.classList.add( 'panolens-container' );\n\t\t\tcontainer.style.width = '100%';\n\t\t\tcontainer.style.height = '100%';\n\t\t\tcontainer._width = window.innerWidth;\n\t\t\tcontainer._height = window.innerHeight;\n\t\t\tdocument.body.appendChild( container );\n\n\t\t}\n\n\t\tthis.container = container;\n\n\t\tthis.camera = options.camera || new THREE.PerspectiveCamera( this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 10000 );\n\t\tthis.scene = options.scene || new THREE.Scene();\n\t\tthis.renderer = options.renderer || new THREE.WebGLRenderer( { alpha: true, antialias: false } );\n\n\t\tthis.viewIndicatorSize = options.indicatorSize;\n\n\t\tthis.reticle = {};\n\t\tthis.tempEnableReticle = this.options.enableReticle;\n\n\t\tthis.mode = PANOLENS.Modes.NORMAL;\n\n\t\tthis.OrbitControls;\n\t\tthis.DeviceOrientationControls;\n\n\t\tthis.CardboardEffect;\n\t\tthis.StereoEffect;\n\n\t\tthis.controls;\n\t\tthis.effect;\n\t\tthis.panorama;\n\t\tthis.widget;\n\n\t\tthis.hoverObject;\n\t\tthis.infospot;\n\t\tthis.pressEntityObject;\n\t\tthis.pressObject;\n\n\t\tthis.raycaster = new THREE.Raycaster();\n\t\tthis.raycasterPoint = new THREE.Vector2();\n\t\tthis.userMouse = new THREE.Vector2();\n\t\tthis.updateCallbacks = [];\n\t\tthis.requestAnimationId;\n\n\t\tthis.cameraFrustum = new THREE.Frustum();\n\t\tthis.cameraViewProjectionMatrix = new THREE.Matrix4();\n\n\t\tthis.outputDivElement;\n\n\t\t// Handler references\n\t\tthis.HANDLER_MOUSE_DOWN = this.onMouseDown.bind( this );\n\t\tthis.HANDLER_MOUSE_UP = this.onMouseUp.bind( this );\n\t\tthis.HANDLER_MOUSE_MOVE = this.onMouseMove.bind( this );\n\t\tthis.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind( this );\n\t\tthis.HANDLER_KEY_DOWN = this.onKeyDown.bind( this );\n\t\tthis.HANDLER_KEY_UP = this.onKeyUp.bind( this );\n\t\tthis.HANDLER_TAP = this.onTap.bind( this, {\n\t\t\tclientX: this.container.clientWidth / 2,\n\t\t\tclientY: this.container.clientHeight / 2\n\t\t} );\n\n\t\t// Flag for infospot output\n\t\tthis.OUTPUT_INFOSPOT = false;\n\n\t\t// Animations\n\t\tthis.tweenLeftAnimation = new TWEEN.Tween();\n\t\tthis.tweenUpAnimation = new TWEEN.Tween();\n\n\t\t// Renderer\n\t\tthis.renderer.setPixelRatio( window.devicePixelRatio );\n\t\tthis.renderer.setSize( this.container.clientWidth, this.container.clientHeight );\n\t\tthis.renderer.setClearColor( 0x000000, 1 );\n\t\tthis.renderer.sortObjects = false;\n\n\t\t// Append Renderer Element to container\n\t\tthis.renderer.domElement.classList.add( 'panolens-canvas' );\n\t\tthis.renderer.domElement.style.display = 'block';\n\t\tthis.container.style.backgroundColor = '#000';\n\t\tthis.container.appendChild( this.renderer.domElement );\n\n\t\t// Camera Controls\n\t\tthis.OrbitControls = new THREE.OrbitControls( this.camera, this.container );\n\t\tthis.OrbitControls.name = 'orbit';\n\t\tthis.OrbitControls.minDistance = 1;\n\t\tthis.OrbitControls.noPan = true;\n\t\tthis.DeviceOrientationControls = new THREE.DeviceOrientationControls( this.camera, this.container );\n\t\tthis.DeviceOrientationControls.name = 'device-orientation';\n\t\tthis.DeviceOrientationControls.enabled = false;\n\t\tthis.camera.position.z = 1;\n\n\t\t// Register change event if passiveRenering\n\t\tif ( this.options.passiveRendering ) {\n\n\t\t\tconsole.warn( 'passiveRendering is now deprecated' );\n\n\t\t}\n\n\t\t// Controls\n\t\tthis.controls = [ this.OrbitControls, this.DeviceOrientationControls ];\n\t\tthis.control = this.OrbitControls;\n\n\t\t// Cardboard effect\n\t\tthis.CardboardEffect = new THREE.CardboardEffect( this.renderer );\n\t\tthis.CardboardEffect.setSize( this.container.clientWidth, this.container.clientHeight );\n\n\t\t// Stereo effect\n\t\tthis.StereoEffect = new THREE.StereoEffect( this.renderer );\n\t\tthis.StereoEffect.setSize( this.container.clientWidth, this.container.clientHeight );\n\n\t\tthis.effect = this.CardboardEffect;\n\n\t\t// Add default hidden reticle\n\t\tthis.addReticle();\n\n\t\t// Lock horizontal view\n\t\tif ( this.options.horizontalView ) {\n\t\t\tthis.OrbitControls.minPolarAngle = Math.PI / 2;\n\t\t\tthis.OrbitControls.maxPolarAngle = Math.PI / 2;\n\t\t}\n\n\t\t// Add Control UI\n\t\tif ( this.options.controlBar !== false ) {\n\t\t\tthis.addDefaultControlBar( this.options.controlButtons );\n\t\t}\n\n\t\t// Add View Indicator\n\t\tif ( this.options.viewIndicator ) {\n\t\t\tthis.addViewIndicator();\n\t\t}\n\n\t\t// Reverse dragging direction\n\t\tif ( this.options.reverseDragging ) {\n\t\t\tthis.reverseDraggingDirection();\n\t\t}\n\n\t\t// Register event if reticle is enabled, otherwise defaults to mouse\n\t\tif ( this.options.enableReticle ) {\n\t\t\tthis.enableReticleControl();\n\t\t} else {\n\t\t\tthis.registerMouseAndTouchEvents();\n\t\t}\n\n\t\tif ( this.options.output === 'overlay' ) {\n\t\t\tthis.addOutputElement();\n\t\t}\n\n\t\t// Register dom event listeners\n\t\tthis.registerEventListeners();\n\n\t\t// Animate\n\t\tthis.animate.call( this );\n\n\t};\n\n\tPANOLENS.Viewer.prototype = Object.create( THREE.EventDispatcher.prototype );\n\n\tPANOLENS.Viewer.prototype.constructor = PANOLENS.Viewer;\n\n\t/**\n\t * Add an object to the scene\n\t * Automatically hookup with panolens-viewer-handler listener\n\t * to communicate with viewer method\n\t * @param {THREE.Object3D} object - The object to be added\n\t */\n\tPANOLENS.Viewer.prototype.add = function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.scene.add( object );\n\n\t\t// All object added to scene has 'panolens-viewer-handler' event to handle viewer communication\n\t\tif ( object.addEventListener ) {\n\n\t\t\tobject.addEventListener( 'panolens-viewer-handler', this.eventHandler.bind( this ) );\n\n\t\t}\n\n\t\t// All object added to scene being passed with container\n\t\tif ( object instanceof PANOLENS.Panorama && object.dispatchEvent ) {\n\n\t\t\tobject.dispatchEvent( { type: 'panolens-container', container: this.container } );\n\n\t\t}\n\n\t\t// Hookup default panorama event listeners\n\t\tif ( object.type === 'panorama' ) {\n\n\t\t\tthis.addPanoramaEventListener( object );\n\n\t\t\tif ( !this.panorama ) {\n\n\t\t\t\tthis.setPanorama( object );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Remove an object from the scene\n\t * @param  {THREE.Object3D} object - Object to be removed\n\t */\n\tPANOLENS.Viewer.prototype.remove = function ( object ) {\n\n\t\tif ( object.removeEventListener ) {\n\n\t\t\tobject.removeEventListener( 'panolens-viewer-handler', this.eventHandler.bind( this ) );\n\n\t\t}\n\n\t\tthis.scene.remove( object );\n\n\t};\n\n\t/**\n\t * Add default control bar\n\t * @param {array} array - The control buttons array\n\t */\n\tPANOLENS.Viewer.prototype.addDefaultControlBar = function ( array ) {\n\n\t\tvar scope = this;\n\n\t\tif ( this.widget ) {\n\n\t\t\tconsole.warn( 'Default control bar exists' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.widget = new PANOLENS.Widget( this.container );\n\t\tthis.widget.addEventListener( 'panolens-viewer-handler', this.eventHandler.bind( this ) );\n\t\tthis.widget.addControlBar();\n\t\tarray.forEach( function( buttonName ){\n\n\t\t\tscope.widget.addControlButton( buttonName );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Set a panorama to be the current one\n\t * @param {PANOLENS.Panorama} pano - Panorama to be set\n\t */\n\tPANOLENS.Viewer.prototype.setPanorama = function ( pano ) {\n\n\t\tvar scope = this, leavingPanorama = this.panorama;\n\n\t\tif ( pano.type === 'panorama' && leavingPanorama !== pano ) {\n\n\t\t\t// Clear exisiting infospot\n\t\t\tthis.hideInfospot();\n\n\t\t\tvar afterEnterComplete = function () {\n\n\t\t\t\tleavingPanorama && leavingPanorama.onLeave();\n\t\t\t\tpano.removeEventListener( 'enter-fade-start', afterEnterComplete );\n\n\t\t\t};\n\n\t\t\tpano.addEventListener( 'enter-fade-start', afterEnterComplete );\n\n\t\t\t// Assign and enter panorama\n\t\t\t(this.panorama = pano).onEnter();\n\t\t\t\n\t\t}\n\n\t};\n\n\t/**\n\t * Event handler to execute commands from child objects\n\t * @param {object} event - The dispatched event with method as function name and data as an argument\n\t */\n\tPANOLENS.Viewer.prototype.eventHandler = function ( event ) {\n\n\t\tif ( event.method && this[ event.method ] ) {\n\n\t\t\tthis[ event.method ]( event.data );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Dispatch event to all descendants\n\t * @param  {object} event - Event to be passed along\n\t */\n\tPANOLENS.Viewer.prototype.dispatchEventToChildren = function ( event ) {\n\n\t\tthis.scene.traverse( function ( object ) {\n\n\t\t\tif ( object.dispatchEvent ) {\n\n\t\t\t\tobject.dispatchEvent( event );\n\n\t\t\t}\n\n\t\t});\n\n\t};\n\n\t/**\n\t * Set widget content\n\t * @param  {integer} controlIndex - Control index\n\t * @param  {PANOLENS.Modes} mode - Modes for effects\n\t */\n\tPANOLENS.Viewer.prototype.activateWidgetItem = function ( controlIndex, mode ) {\n\n\t\tvar mainMenu = this.widget.mainMenu;\n\t\tvar ControlMenuItem = mainMenu.children[ 0 ];\n\t\tvar ModeMenuItem = mainMenu.children[ 1 ];\n\n\t\tvar item;\n\n\t\tif ( controlIndex !== undefined ) {\n\n\t\t\tswitch ( controlIndex ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\titem = ControlMenuItem.subMenu.children[ 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\titem = ControlMenuItem.subMenu.children[ 2 ];\n\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tdefault:\n\n\t\t\t\t\titem = ControlMenuItem.subMenu.children[ 1 ];\n\n\t\t\t\t\tbreak;\t\n\n\t\t\t}\n\n\t\t\tControlMenuItem.subMenu.setActiveItem( item )\n\t\t\tControlMenuItem.setSelectionTitle( item.textContent );\n\n\t\t}\n\n\t\tif ( mode !== undefined ) {\n\n\t\t\tswitch( mode ) {\n\n\t\t\t\tcase PANOLENS.Modes.CARDBOARD:\n\n\t\t\t\t\titem = ModeMenuItem.subMenu.children[ 2 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PANOLENS.Modes.STEREO:\n\n\t\t\t\t\titem = ModeMenuItem.subMenu.children[ 3 ];\n\t\t\t\t\t\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\titem = ModeMenuItem.subMenu.children[ 1 ];\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tModeMenuItem.subMenu.setActiveItem( item )\n\t\t\tModeMenuItem.setSelectionTitle( item.textContent );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Enable rendering effect\n\t * @param  {PANOLENS.Modes} mode - Modes for effects\n\t */\n\tPANOLENS.Viewer.prototype.enableEffect = function ( mode ) {\n\n\t\tif ( this.mode === mode ) { return; }\n\t\tif ( mode === PANOLENS.Modes.NORMAL ) { this.disableEffect(); return; }\n\t\telse { this.mode = mode; }\n\n\t\tvar fov = this.camera.fov;\n\n\t\tswitch( mode ) {\n\n\t\t\tcase PANOLENS.Modes.CARDBOARD:\n\n\t\t\t\tthis.effect = this.CardboardEffect;\n\t\t\t\tthis.enableReticleControl();\n\n\t\t\t\tbreak;\n\n\t\t\tcase PANOLENS.Modes.STEREO:\n\n\t\t\t\tthis.effect = this.StereoEffect;\n\t\t\t\tthis.enableReticleControl();\n\t\t\t\t\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tthis.effect = null;\n\t\t\t\tthis.disableReticleControl();\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tthis.activateWidgetItem( undefined, this.mode );\n\n\t\t/**\n\t\t * Dual eye effect event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#panolens-dual-eye-effect\n\t\t * @event PANOLENS.Infospot#panolens-dual-eye-effect\n\t\t * @property {PANOLENS.Modes} mode - Current display mode\n\t\t */\n\t\tthis.dispatchEventToChildren( { type: 'panolens-dual-eye-effect', mode: this.mode } );\n\n\t\t// Force effect stereo camera to update by refreshing fov\n\t\tthis.camera.fov = fov + 10e-3;\n\t\tthis.effect.setSize( this.container.clientWidth, this.container.clientHeight );\n\t\tthis.render();\n\t\tthis.camera.fov = fov;\n\n\t};\n\n\t/**\n\t * Disable additional rendering effect\n\t */\n\tPANOLENS.Viewer.prototype.disableEffect = function () {\n\n\t\tif ( this.mode === PANOLENS.Modes.NORMAL ) { return; }\n\n\t\tthis.mode = PANOLENS.Modes.NORMAL;\n\t\tthis.disableReticleControl();\n\n\t\tthis.activateWidgetItem( undefined, this.mode );\n\n\t\t/**\n\t\t * Dual eye effect event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#panolens-dual-eye-effect\n\t\t * @event PANOLENS.Infospot#panolens-dual-eye-effect\n\t\t * @property {PANOLENS.Modes} mode - Current display mode\n\t\t */\n\t\tthis.dispatchEventToChildren( { type: 'panolens-dual-eye-effect', mode: this.mode } );\n\n\t\tthis.renderer.setSize( this.container.clientWidth, this.container.clientHeight );\n\t\tthis.render();\n\t};\n\n\t/**\n\t * Enable reticle control\n\t */\n\tPANOLENS.Viewer.prototype.enableReticleControl = function () {\n\n\t\tif ( this.reticle.visible ) { return; }\n\t\tif ( !this.reticle.textureLoaded ) { this.reticle.loadTextures(); }\n\n\t\tthis.tempEnableReticle = true;\n\n\t\t// Register reticle event and unregister mouse event\n\t\tthis.unregisterMouseAndTouchEvents();\n\t\tthis.reticle.show();\n\t\tthis.registerReticleEvent();\n\t\tthis.updateReticleEvent();\n\n\t};\n\n\t/**\n\t * Disable reticle control\n\t */\n\tPANOLENS.Viewer.prototype.disableReticleControl = function () {\n\n\t\tthis.tempEnableReticle = false;\n\n\t\t// Register mouse event and unregister reticle event\n\t\tif ( !this.options.enableReticle ) {\n\n\t\t\tthis.reticle.hide();\n\t\t\tthis.unregisterReticleEvent();\n\t\t\tthis.registerMouseAndTouchEvents();\n\n\t\t} else {\n\n\t\t\tthis.updateReticleEvent();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Toggle video play or stop\n\t * @fires PANOLENS.Viewer#video-toggle\n\t */\n\tPANOLENS.Viewer.prototype.toggleVideoPlay = function ( pause ) {\n\n\t\tif ( this.panorama instanceof PANOLENS.VideoPanorama ) {\n\n\t\t\t/**\n\t\t\t * Toggle video event\n\t\t\t * @type {object}\n\t\t\t * @event PANOLENS.Viewer#video-toggle\n\t\t\t */\n\t\t\tthis.panorama.dispatchEvent( { type: 'video-toggle', pause: pause } );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set currentTime in a video\n\t * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t * @fires PANOLENS.Viewer#video-time\n\t */\n\tPANOLENS.Viewer.prototype.setVideoCurrentTime = function ( percentage ) {\n\n\t\tif ( this.panorama instanceof PANOLENS.VideoPanorama ) {\n\n\t\t\t/**\n\t\t\t * Setting video time event\n\t\t\t * @type {object}\n\t\t\t * @event PANOLENS.Viewer#video-time\n\t\t\t * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t\t\t */\n\t\t\tthis.panorama.dispatchEvent( { type: 'video-time', percentage: percentage } );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * This will be called when video updates if an widget is present\n\t * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t * @fires PANOLENS.Viewer#video-update\n\t */\n\tPANOLENS.Viewer.prototype.onVideoUpdate = function ( percentage ) {\n\n\t\t/**\n\t\t * Video update event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-update\n\t\t * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t\t */\n\t\tthis.widget && this.widget.dispatchEvent( { type: 'video-update', percentage: percentage } );\n\n\t};\n\n\t/**\n\t * Add update callback to be called every animation frame\n\t */\n\tPANOLENS.Viewer.prototype.addUpdateCallback = function ( fn ) {\n\n\t\tif ( fn ) {\n\n\t\t\tthis.updateCallbacks.push( fn );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Remove update callback\n\t * @param  {Function} fn - The function to be removed\n\t */\n\tPANOLENS.Viewer.prototype.removeUpdateCallback = function ( fn ) {\n\n\t\tvar index = this.updateCallbacks.indexOf( fn );\n\n\t\tif ( fn && index >= 0 ) {\n\n\t\t\tthis.updateCallbacks.splice( index, 1 );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Show video widget\n\t */\n\tPANOLENS.Viewer.prototype.showVideoWidget = function () {\n\n\t\t/**\n\t\t * Show video widget event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-control-show\n\t\t */\n\t\tthis.widget && this.widget.dispatchEvent( { type: 'video-control-show' } );\n\n\t};\n\n\t/**\n\t * Hide video widget\n\t */\n\tPANOLENS.Viewer.prototype.hideVideoWidget = function () {\n\n\t\t/**\n\t\t * Hide video widget\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-control-hide\n\t\t */\n\t\tthis.widget && this.widget.dispatchEvent( { type: 'video-control-hide' } );\n\n\t};\n\n\tPANOLENS.Viewer.prototype.updateVideoPlayButton = function ( paused ) {\n\n\t\tif ( this.widget && \n\t\t\t this.widget.videoElement && \n\t\t\t this.widget.videoElement.controlButton ) {\n\n\t\t\tthis.widget.videoElement.controlButton.update( paused );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Add default panorama event listeners\n\t * @param {PANOLENS.Panorama} pano - The panorama to be added with event listener\n\t */\n\tPANOLENS.Viewer.prototype.addPanoramaEventListener = function ( pano ) {\n\n\t\tvar scope = this;\n\n\t\t// Set camera control on every panorama\n\t\tpano.addEventListener( 'enter-fade-start', this.setCameraControl.bind( this ) );\n\n\t\t// Show and hide widget event only when it's PANOLENS.VideoPanorama\n\t\tif ( pano instanceof PANOLENS.VideoPanorama ) {\n\n\t\t\tpano.addEventListener( 'enter-fade-start', this.showVideoWidget.bind( this ) );\n\t\t\tpano.addEventListener( 'leave', function () {\n\n\t\t\t\tif ( !(this.panorama instanceof PANOLENS.VideoPanorama) ) {\n\n\t\t\t\t\tthis.hideVideoWidget.call( this );\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}.bind( this ) );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set camera control\n\t */\n\tPANOLENS.Viewer.prototype.setCameraControl = function () {\n\n\t\tthis.OrbitControls.target.copy( this.panorama.position );\n\n\t};\n\n\t/**\n\t * Get current camera control\n\t * @return {object} - Current navigation control. THREE.OrbitControls or THREE.DeviceOrientationControls\n\t */\n\tPANOLENS.Viewer.prototype.getControl = function () {\n\n\t\treturn this.control;\n\n\t},\n\n\t/**\n\t * Get scene\n\t * @return {THREE.Scene} - Current scene which the viewer is built on\n\t */\n\tPANOLENS.Viewer.prototype.getScene = function () {\n\n\t\treturn this.scene;\n\n\t};\n\n\t/**\n\t * Get camera\n\t * @return {THREE.Camera} - The scene camera\n\t */\n\tPANOLENS.Viewer.prototype.getCamera = function () {\n\n\t\treturn this.camera;\n\n\t},\n\n\t/**\n\t * Get renderer\n\t * @return {THREE.WebGLRenderer} - The renderer using webgl\n\t */\n\tPANOLENS.Viewer.prototype.getRenderer = function () {\n\n\t\treturn this.renderer;\n\n\t};\n\n\t/**\n\t * Get container\n\t * @return {HTMLDOMElement} - The container holds rendererd canvas\n\t */\n\tPANOLENS.Viewer.prototype.getContainer = function () {\n\n\t\treturn this.container;\n\n\t};\n\n\t/**\n\t * Get control name\n\t * @return {string} - Control name. 'orbit' or 'device-orientation'\n\t */\n\tPANOLENS.Viewer.prototype.getControlName = function () {\n\n\t\treturn this.control.name;\n\n\t};\n\n\t/**\n\t * Get next navigation control name\n\t * @return {string} - Next control name\n\t */\n\tPANOLENS.Viewer.prototype.getNextControlName = function () {\n\n\t\treturn this.controls[ this.getNextControlIndex() ].name;\n\n\t};\n\n\t/**\n\t * Get next navigation control index\n\t * @return {number} - Next control index\n\t */\n\tPANOLENS.Viewer.prototype.getNextControlIndex = function () {\n\n\t\tvar controls, control, nextIndex;\n\n\t\tcontrols = this.controls;\n\t\tcontrol = this.control;\n\t\tnextIndex = controls.indexOf( control ) + 1;\n\n\t\treturn ( nextIndex >= controls.length ) ? 0 : nextIndex;\n\n\t};\n\n\t/**\n\t * Set field of view of camera\n\t */\n\tPANOLENS.Viewer.prototype.setCameraFov = function ( fov ) {\n\n\t\tthis.camera.fov = fov;\n\t\tthis.camera.updateProjectionMatrix();\n\n\t};\n\n\t/**\n\t * Enable control by index\n\t * @param  {PANOLENS.Controls} index - Index of camera control\n\t */\n\tPANOLENS.Viewer.prototype.enableControl = function ( index ) {\n\n\t\tindex = ( index >= 0 && index < this.controls.length ) ? index : 0;\n\n\t\tthis.control.enabled = false;\n\n\t\tthis.control = this.controls[ index ];\n\n\t\tthis.control.enabled = true;\n\n\t\tswitch ( index ) {\n\n\t\t\tcase PANOLENS.Controls.ORBIT:\n\n\t\t\t\tthis.camera.position.copy( this.panorama.position );\n\t\t\t\tthis.camera.position.z += 1;\n\n\t\t\t\tbreak;\n\n\t\t\tcase PANOLENS.Controls.DEVICEORIENTATION:\n\n\t\t\t\tthis.camera.position.copy( this.panorama.position );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.control.update();\n\n\t\tthis.activateWidgetItem( index, undefined );\n\n\t};\n\n\t/**\n\t * Disable current control\n\t */\n\tPANOLENS.Viewer.prototype.disableControl = function () {\n\n\t\tthis.control.enabled = false;\n\n\t};\n\n\t/**\n\t * Toggle next control\n\t */\n\tPANOLENS.Viewer.prototype.toggleNextControl = function () {\n\n\t\tthis.enableControl( this.getNextControlIndex() );\n\n\t};\n\n\t/**\n\t * Screen Space Projection\n\t */\n\tPANOLENS.Viewer.prototype.getScreenVector = function ( worldVector ) {\n\n\t\tvar vector = worldVector.clone();\n\t\tvar widthHalf = ( this.container.clientWidth ) / 2;\n\t\tvar heightHalf = this.container.clientHeight / 2;\n\n\t\tvector.project( this.camera );\n\n\t\tvector.x = ( vector.x * widthHalf ) + widthHalf;\n\t\tvector.y = - ( vector.y * heightHalf ) + heightHalf;\n\t\tvector.z = 0;\n\n\t\treturn vector;\n\n\t};\n\n\t/**\n\t * Check Sprite in Viewport\n\t */\n\tPANOLENS.Viewer.prototype.checkSpriteInViewport = function ( sprite ) {\n\n\t\tthis.camera.matrixWorldInverse.getInverse( this.camera.matrixWorld );\n\t\tthis.cameraViewProjectionMatrix.multiplyMatrices( this.camera.projectionMatrix, this.camera.matrixWorldInverse );\n\t\tthis.cameraFrustum.setFromMatrix( this.cameraViewProjectionMatrix );\n\n\t\treturn sprite.visible && this.cameraFrustum.intersectsSprite( sprite );\n\n\t};\n\n\t/**\n\t * Reverse dragging direction\n\t */\n\tPANOLENS.Viewer.prototype.reverseDraggingDirection = function () {\n\n\t\tthis.OrbitControls.rotateSpeed *= -1;\n\t\tthis.OrbitControls.momentumScalingFactor *= -1;\n\n\t};\n\n\t/**\n\t * Add reticle \n\t */\n\tPANOLENS.Viewer.prototype.addReticle = function () {\n\n\t\tthis.reticle = new PANOLENS.Reticle( 0xffffff, \n\t\t\tthis.options.autoReticleSelect,\n\t\t\tPANOLENS.DataImage.ReticleIdle, \n\t\t\tPANOLENS.DataImage.ReticleDwell, \n\t\t\tthis.options.dwellTime,\n\t\t\t45 );\n\t\tthis.reticle.position.z = -10;\n\t\tthis.camera.add( this.reticle );\n\t\tthis.scene.add( this.camera );\n\n\t};\n\n\t/**\n\t * Tween control looking center\n\t * @param {THREE.Vector3} vector - Vector to be looked at the center\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n\tPANOLENS.Viewer.prototype.tweenControlCenter = function ( vector, duration, easing ) {\n\n\t\tif ( this.control !== this.OrbitControls ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Pass in arguments as array\n\t\tif ( vector instanceof Array ) {\n\n\t\t\tduration = vector[ 1 ];\n\t\t\teasing = vector[ 2 ];\n\t\t\tvector = vector[ 0 ];\n\n\t\t}\n\n\t\tduration = duration !== undefined ? duration : 1000;\n\t\teasing = easing || TWEEN.Easing.Exponential.Out;\n\n\t\tvar scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv;\n\n\t\tscope = this;\n\n\t\tchv = this.camera.getWorldDirection();\n\t\tcvv = chv.clone();\n\n\t\tvptc = this.panorama.getWorldPosition().sub( this.camera.getWorldPosition() );\n\n\t\thv = vector.clone();\n\t\t// Scale effect\n\t\thv.x *= -1;\n\t\thv.add( vptc ).normalize();\n\t\tvv = hv.clone();\n\n\t\tchv.y = 0;\n\t\thv.y = 0;\n\n\t\tha = Math.atan2( hv.z, hv.x ) - Math.atan2( chv.z, chv.x );\n\t\tha = ha > Math.PI ? ha - 2 * Math.PI : ha;\n\t\tha = ha < -Math.PI ? ha + 2 * Math.PI : ha;\n\t\tva = Math.abs( cvv.angleTo( chv ) + ( cvv.y * vv.y <= 0 ? vv.angleTo( hv ) : -vv.angleTo( hv ) ) );\n\t\tva *= vv.y < cvv.y ? 1 : -1;\n\n\t\tov = { left: 0, up: 0 };\n\t\tnv = { left: 0, up: 0 };\n\n\t\tthis.tweenLeftAnimation.stop();\n\t\tthis.tweenUpAnimation.stop();\n\n\t\tthis.tweenLeftAnimation = new TWEEN.Tween( ov )\n\t\t\t.to( { left: ha }, duration )\n\t\t\t.easing( easing )\n\t\t\t.onUpdate(function(){\n\t\t\t\tscope.control.rotateLeft( this.left - nv.left );\n\t\t\t\tnv.left = this.left;\n\t\t\t})\n\t\t\t.start();\n\n\t\tthis.tweenUpAnimation = new TWEEN.Tween( ov )\n\t\t\t.to( { up: va }, duration )\n\t\t\t.easing( easing )\n\t\t\t.onUpdate(function(){\n\t\t\t\tscope.control.rotateUp( this.up - nv.up );\n\t\t\t\tnv.up = this.up;\n\t\t\t})\n\t\t\t.start();\n\n\t};\n\n\t/**\n\t * Tween control looking center by object\n\t * @param {THREE.Object3D} object - Object to be looked at the center\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n\tPANOLENS.Viewer.prototype.tweenControlCenterByObject = function ( object, duration, easing ) {\n\n\t\tvar isUnderScalePlaceHolder = false;\n\n\t\tobject.traverseAncestors( function ( ancestor ) {\n\n\t\t\tif ( ancestor.scalePlaceHolder ) {\n\n\t\t\t\tisUnderScalePlaceHolder = true;\n\n\t\t\t}\n\t\t} );\n\n\t\tif ( isUnderScalePlaceHolder ) {\n\n\t\t\tvar invertXVector = new THREE.Vector3( -1, 1, 1 );\n\n\t\t\tthis.tweenControlCenter( object.getWorldPosition().multiply( invertXVector ), duration, easing );\n\n\t\t} else {\n\n\t\t\tthis.tweenControlCenter( object.getWorldPosition(), duration, easing );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * This is called when window size is changed\n\t * @fires PANOLENS.Viewer#window-resize\n\t * @param {number} [windowWidth] - Specify if custom element has changed width\n\t * @param {number} [windowHeight] - Specify if custom element has changed height\n\t */\n\tPANOLENS.Viewer.prototype.onWindowResize = function ( windowWidth, windowHeight ) {\n\n\t\tvar width, height, expand;\n\n\t\texpand = this.container.classList.contains( 'panolens-container' ) || this.container.isFullscreen;\n\n\t\tif ( windowWidth !== undefined && windowHeight !== undefined ) {\n\n\t\t\twidth = windowWidth;\n\t\t\theight = windowHeight;\n\t\t\tthis.container._width = windowWidth;\n\t\t\tthis.container._height = windowHeight;\n\n\t\t} else {\n\n\t\t\twidth = expand ? Math.max(document.documentElement.clientWidth, window.innerWidth || 0) : this.container.clientWidth;\n\t\t\theight = expand ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : this.container.clientHeight;\n\t\t\tthis.container._width = width;\n\t\t\tthis.container._height = height;\n\n\t\t}\n\n\t\tthis.camera.aspect = width / height;\n\t\tthis.camera.updateProjectionMatrix();\n\n\t\tthis.renderer.setSize( width, height );\n\n\t\t// Update reticle\n\t\tif ( this.options.enableReticle || this.tempEnableReticle ) {\n\n\t\t\tthis.updateReticleEvent();\n\n\t\t}\n\n\t\t/**\n\t\t * Window resizing event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#window-resize\n\t\t * @property {number} width  - Width of the window\n\t\t * @property {number} height - Height of the window\n\t\t */\n\t\tthis.dispatchEvent( { type: 'window-resize', width: width, height: height });\n\t\tthis.scene.traverse( function ( object ) {\n\n\t\t\tif ( object.dispatchEvent ) {\n\n\t\t\t\tobject.dispatchEvent( { type: 'window-resize', width: width, height: height });\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\tPANOLENS.Viewer.prototype.addOutputElement = function () {\n\n\t\tvar element = document.createElement( 'div' );\n\t\telement.style.position = 'absolute';\n\t\telement.style.right = '10px';\n\t\telement.style.top = '10px';\n\t\telement.style.color = \"#fff\";\n\t\tthis.container.appendChild( element );\n\t\tthis.outputDivElement = element;\n\n\t};\n\n\t/**\n\t * Output infospot attach position in developer console by holding down Ctrl button\n\t */\n\tPANOLENS.Viewer.prototype.outputInfospotPosition = function () {\n\n\t\tvar intersects, point, panoramaWorldPosition, outputPosition;\n\n\t\tintersects = this.raycaster.intersectObject( this.panorama, true );\n\n\t\tif ( intersects.length > 0 ) {\n\n\t\t\tpoint = intersects[0].point;\n\t\t\tpanoramaWorldPosition = this.panorama.getWorldPosition();\n\n\t\t\t// Panorama is scaled -1 on X axis\n\t\t\toutputPosition = new THREE.Vector3(\n\t\t\t\t-(point.x - panoramaWorldPosition.x).toFixed(2),\n\t\t\t\t(point.y - panoramaWorldPosition.y).toFixed(2),\n\t\t\t\t(point.z - panoramaWorldPosition.z).toFixed(2)\n\t\t\t);\n\n\t\t\tswitch ( this.options.output ) {\n\n\t\t\t\tcase 'console':\n\t\t\t\t\tconsole.info( outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'overlay':\n\t\t\t\t\tthis.outputDivElement.textContent = outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onMouseDown = function ( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tthis.userMouse.x = ( event.clientX >= 0 ) ? event.clientX : event.touches[0].clientX;\n\t\tthis.userMouse.y = ( event.clientY >= 0 ) ? event.clientY : event.touches[0].clientY;\n\t\tthis.userMouse.type = 'mousedown';\n\t\tthis.onTap( event );\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onMouseMove = function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tthis.userMouse.type = 'mousemove';\n\t\tthis.onTap( event );\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onMouseUp = function ( event ) {\n\n\t\tvar onTarget = false, type;\n\n\t\tthis.userMouse.type = 'mouseup';\n\n\t\ttype = ( this.userMouse.x >= event.clientX - this.options.clickTolerance \n\t\t\t\t&& this.userMouse.x <= event.clientX + this.options.clickTolerance\n\t\t\t\t&& this.userMouse.y >= event.clientY - this.options.clickTolerance\n\t\t\t\t&& this.userMouse.y <= event.clientY + this.options.clickTolerance ) \n\t\t\t\t||  ( event.changedTouches \n\t\t\t\t&& this.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance\n\t\t\t\t&& this.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance \n\t\t\t\t&& this.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance\n\t\t\t\t&& this.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance ) \n\t\t? 'click' : undefined;\n\n\t\t// Event should happen on canvas\n\t\tif ( event && event.target && !event.target.classList.contains( 'panolens-canvas' ) ) { return; }\n\n\t\tevent.preventDefault();\n\n\t\tif ( event.changedTouches && event.changedTouches.length === 1 ) {\n\n\t\t\tonTarget = this.onTap( { clientX : event.changedTouches[0].clientX, clientY : event.changedTouches[0].clientY }, type );\n\t\t\n\t\t} else {\n\n\t\t\tonTarget = this.onTap( event, type );\n\n\t\t}\n\n\t\tthis.userMouse.type = 'none';\n\n\t\tif ( onTarget ) { \n\n\t\t\treturn; \n\n\t\t}\n\n\t\tif ( type === 'click' ) {\n\n\t\t\tthis.options.autoHideInfospot && this.panorama && this.panorama.toggleInfospotVisibility();\n\t\t\tthis.options.autoHideControlBar && this.toggleControlBar();\n\n\t\t}\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onTap = function ( event, type ) {\n\n\t\tvar intersects, intersect_entity, intersect;\n\n\t\tthis.raycasterPoint.x = ( ( event.clientX - this.container.offsetLeft ) / this.container.clientWidth ) * 2 - 1;\n\t\tthis.raycasterPoint.y = - ( ( event.clientY - this.container.offsetTop ) / this.container.clientHeight ) * 2 + 1;\n\n\t\tthis.raycaster.setFromCamera( this.raycasterPoint, this.camera );\n\n\t\t// Return if no panorama \n\t\tif ( !this.panorama ) { \n\n\t\t\treturn; \n\n\t\t}\n\n\t\t// output infospot information\n\t\tif ( event.type !== 'mousedown' && PANOLENS.Utils.checkTouchSupported() || this.OUTPUT_INFOSPOT ) { \n\n\t\t\tthis.outputInfospotPosition(); \n\n\t\t}\n\n\t\tintersects = this.raycaster.intersectObjects( this.panorama.children, true );\n\n\t\tintersect_entity = this.getConvertedIntersect( intersects );\n\n\t\tintersect = ( intersects.length > 0 ) ? intersects[0].object : intersect;\n\n\t\tif ( this.userMouse.type === 'mouseup'  ) {\n\n\t\t\tif ( intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent ) {\n\n\t\t\t\tthis.pressEntityObject.dispatchEvent( { type: 'pressstop-entity', mouseEvent: event } );\n\n\t\t\t}\n\n\t\t\tthis.pressEntityObject = undefined;\n\n\t\t}\n\n\t\tif ( this.userMouse.type === 'mouseup'  ) {\n\n\t\t\tif ( intersect && this.pressObject === intersect && this.pressObject.dispatchEvent ) {\n\n\t\t\t\tthis.pressObject.dispatchEvent( { type: 'pressstop', mouseEvent: event } );\n\n\t\t\t}\n\n\t\t\tthis.pressObject = undefined;\n\n\t\t}\n\n\t\tif ( type === 'click' ) {\n\n\t\t\tthis.panorama.dispatchEvent( { type: 'click', intersects: intersects, mouseEvent: event } );\n\n\t\t\tif ( intersect_entity && intersect_entity.dispatchEvent ) {\n\n\t\t\t\tintersect_entity.dispatchEvent( { type: 'click-entity', mouseEvent: event } );\n\n\t\t\t}\n\n\t\t\tif ( intersect && intersect.dispatchEvent ) {\n\n\t\t\t\tintersect.dispatchEvent( { type: 'click', mouseEvent: event } );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.panorama.dispatchEvent( { type: 'hover', intersects: intersects, mouseEvent: event } );\n\n\t\t\tif ( ( this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity )\n\t\t\t\t|| ( this.hoverObject && intersects.length === 0 ) ){\n\n\t\t\t\tif ( this.hoverObject.dispatchEvent ) {\n\n\t\t\t\t\tthis.hoverObject.dispatchEvent( { type: 'hoverleave', mouseEvent: event } );\n\n\t\t\t\t\t// Cancel dwelling\n\t\t\t\t\tthis.reticle.cancelDwelling();\n\n\t\t\t\t}\n\n\t\t\t\tthis.hoverObject = undefined;\n\n\t\t\t}\n\n\t\t\tif ( intersect_entity && intersects.length > 0 ) {\n\n\t\t\t\tif ( this.hoverObject !== intersect_entity ) {\n\n\t\t\t\t\tthis.hoverObject = intersect_entity;\n\n\t\t\t\t\tif ( this.hoverObject.dispatchEvent ) {\n\n\t\t\t\t\t\tthis.hoverObject.dispatchEvent( { type: 'hoverenter', mouseEvent: event } );\n\n\t\t\t\t\t\t// Start reticle timer\n\t\t\t\t\t\tif ( this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle ) {\n\t\t\t\t\t\t\tthis.reticle.startDwelling( this.onTap.bind( this, event, 'click' ) );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity ) {\n\n\t\t\t\t\tthis.pressEntityObject = intersect_entity;\n\n\t\t\t\t\tif ( this.pressEntityObject.dispatchEvent ) {\n\n\t\t\t\t\t\tthis.pressEntityObject.dispatchEvent( { type: 'pressstart-entity', mouseEvent: event } );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.userMouse.type === 'mousedown' && this.pressObject != intersect ) {\n\n\t\t\t\t\tthis.pressObject = intersect;\n\n\t\t\t\t\tif ( this.pressObject.dispatchEvent ) {\n\n\t\t\t\t\t\tthis.pressObject.dispatchEvent( { type: 'pressstart', mouseEvent: event } );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.userMouse.type === 'mousemove' || this.options.enableReticle ) {\n\n\t\t\t\t\tif ( intersect && intersect.dispatchEvent ) {\n\n\t\t\t\t\t\tintersect.dispatchEvent( { type: 'hover', mouseEvent: event } );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.pressEntityObject && this.pressEntityObject.dispatchEvent ) {\n\n\t\t\t\t\t\tthis.pressEntityObject.dispatchEvent( { type: 'pressmove-entity', mouseEvent: event } );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.pressObject && this.pressObject.dispatchEvent ) {\n\n\t\t\t\t\t\tthis.pressObject.dispatchEvent( { type: 'pressmove', mouseEvent: event } );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( !intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent ) {\n\n\t\t\t\tthis.pressEntityObject.dispatchEvent( { type: 'pressstop-entity', mouseEvent: event } );\n\n\t\t\t\tthis.pressEntityObject = undefined;\n\n\t\t\t}\n\n\t\t\tif ( !intersect && this.pressObject && this.pressObject.dispatchEvent ) {\n\n\t\t\t\tthis.pressObject.dispatchEvent( { type: 'pressstop', mouseEvent: event } );\n\n\t\t\t\tthis.pressObject = undefined;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Infospot handler\n\t\tif ( intersect && intersect instanceof PANOLENS.Infospot ) {\n\n\t\t\tthis.infospot = intersect;\n\t\t\t\n\t\t\tif ( type === 'click' ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\t\t\t\n\n\t\t} else if ( this.infospot ) {\n\n\t\t\tthis.hideInfospot();\n\n\t\t}\n\n\t};\n\n\tPANOLENS.Viewer.prototype.getConvertedIntersect = function ( intersects ) {\n\n\t\tvar intersect;\n\n\t\tfor ( var i = 0; i < intersects.length; i++ ) {\n\n\t\t\tif ( intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough ) {\n\n\t\t\t\tif ( intersects[i].object.entity && intersects[i].object.entity.passThrough ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if ( intersects[i].object.entity && !intersects[i].object.entity.passThrough ) {\n\t\t\t\t\tintersect = intersects[i].object.entity;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tintersect = intersects[i].object;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn intersect;\n\n\t};\n\n\tPANOLENS.Viewer.prototype.hideInfospot = function ( intersects ) {\n\n\t\tif ( this.infospot ) {\n\n\t\t\tthis.infospot.onHoverEnd();\n\n\t\t\tthis.infospot = undefined;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Toggle control bar\n\t * @fires [PANOLENS.Viewer#control-bar-toggle]\n\t */\n\tPANOLENS.Viewer.prototype.toggleControlBar = function () {\n\n\t\t/**\n\t\t * Toggle control bar event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#control-bar-toggle\n\t\t */\n\t\tthis.widget && this.widget.dispatchEvent( { type: 'control-bar-toggle' } );\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onKeyDown = function ( event ) {\n\n\t\tif ( this.options.output && this.options.output !== 'none' && event.key === 'Control' ) {\n\n\t\t\tthis.OUTPUT_INFOSPOT = true;\n\n\t\t}\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onKeyUp = function ( event ) {\n\n\t\tthis.OUTPUT_INFOSPOT = false;\n\n\t};\n\n\t/**\n\t * Update control and callbacks\n\t */\n\tPANOLENS.Viewer.prototype.update = function () {\n\n\t\tTWEEN.update();\n\n\t\tthis.updateCallbacks.forEach( function( callback ){ callback(); } );\n\n\t\tthis.control.update();\n\n\t\tthis.scene.traverse( function( child ){\n\t\t\tif ( child instanceof PANOLENS.Infospot \n\t\t\t\t&& child.element \n\t\t\t\t&& ( this.hoverObject === child \n\t\t\t\t\t|| child.element.style.display !== 'none' \n\t\t\t\t\t|| (child.element.left && child.element.left.style.display !== 'none')\n\t\t\t\t\t|| (child.element.right && child.element.right.style.display !== 'none') ) ) {\n\t\t\t\tif ( this.checkSpriteInViewport( child ) ) {\n\t\t\t\t\tvar vector = this.getScreenVector( child.getWorldPosition() );\n\t\t\t\t\tchild.translateElement( vector.x, vector.y );\n\t\t\t\t} else {\n\t\t\t\t\tchild.onDismiss();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}.bind(this) );\n\n\t};\n\n\t/**\n\t * Rendering function to be called on every animation frame\n\t */\n\tPANOLENS.Viewer.prototype.render = function () {\n\n\t\tif ( this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO ) {\n\n\t\t\tthis.effect.render( this.scene, this.camera );\n\n\t\t} else {\n\n\t\t\tthis.renderer.render( this.scene, this.camera );\n\n\t\t}\n\n\t};\n\n\tPANOLENS.Viewer.prototype.animate = function () {\n\n\t\tthis.requestAnimationId = window.requestAnimationFrame( this.animate.bind( this ) );\n\n\t\tthis.onChange();\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onChange = function () {\n\n\t\tthis.update();\n\t\tthis.render();\n\n\t};\n\n\t/**\n\t * Register mouse and touch event on container\n\t */\n\tPANOLENS.Viewer.prototype.registerMouseAndTouchEvents = function () {\n\n\t\tthis.container.addEventListener( 'mousedown' , \tthis.HANDLER_MOUSE_DOWN, false );\n\t\tthis.container.addEventListener( 'mousemove' , \tthis.HANDLER_MOUSE_MOVE, false );\n\t\tthis.container.addEventListener( 'mouseup'\t , \tthis.HANDLER_MOUSE_UP  , false );\n\t\tthis.container.addEventListener( 'touchstart', \tthis.HANDLER_MOUSE_DOWN, false );\n\t\tthis.container.addEventListener( 'touchend'  , \tthis.HANDLER_MOUSE_UP  , false );\n\n\t};\n\n\t/**\n\t * Unregister mouse and touch event on container\n\t */\n\tPANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents = function () {\n\n\t\tthis.container.removeEventListener( 'mousedown' ,  this.HANDLER_MOUSE_DOWN, false );\n\t\tthis.container.removeEventListener( 'mousemove' ,  this.HANDLER_MOUSE_MOVE, false );\n\t\tthis.container.removeEventListener( 'mouseup'\t,  this.HANDLER_MOUSE_UP  , false );\n\t\tthis.container.removeEventListener( 'touchstart',  this.HANDLER_MOUSE_DOWN, false );\n\t\tthis.container.removeEventListener( 'touchend'  ,  this.HANDLER_MOUSE_UP  , false );\n\t};\n\n\t/**\n\t * Register reticle event\n\t */\n\tPANOLENS.Viewer.prototype.registerReticleEvent = function () {\n\n\t\tthis.addUpdateCallback( this.HANDLER_TAP );\n\n\t};\n\n\t/**\n\t * Unregister reticle event\n\t */\n\tPANOLENS.Viewer.prototype.unregisterReticleEvent = function () {\n\n\t\tthis.removeUpdateCallback( this.HANDLER_TAP );\n\n\t};\n\n\t/**\n\t * Update reticle event\n\t */\n\tPANOLENS.Viewer.prototype.updateReticleEvent = function () {\n\n\t\tvar centerX, centerY;\n\n\t\tcenterX = this.container.clientWidth / 2 + this.container.offsetLeft;\n\t\tcenterY = this.container.clientHeight / 2;\n\n\t\tthis.removeUpdateCallback( this.HANDLER_TAP );\n\t\tthis.HANDLER_TAP = this.onTap.bind( this, { clientX: centerX, clientY: centerY } );\n\t\tthis.addUpdateCallback( this.HANDLER_TAP );\n\n\t};\n\n\t/**\n\t * Register container and window listeners\n\t */\n\tPANOLENS.Viewer.prototype.registerEventListeners = function () {\n\n\t\t// Resize Event\n\t\twindow.addEventListener( 'resize' , this.HANDLER_WINDOW_RESIZE, true );\n\n\t\t// Keyboard Event\n\t\twindow.addEventListener( 'keydown', this.HANDLER_KEY_DOWN, true );\n\t\twindow.addEventListener( 'keyup'  , this.HANDLER_KEY_UP\t , true );\n\n\t};\n\n\t/**\n\t * Unregister container and window listeners\n\t */\n\tPANOLENS.Viewer.prototype.unregisterEventListeners = function () {\n\n\t\t// Resize Event\n\t\twindow.removeEventListener( 'resize' , this.HANDLER_WINDOW_RESIZE, true );\n\n\t\t// Keyboard Event\n\t\twindow.removeEventListener( 'keydown', this.HANDLER_KEY_DOWN, true );\n\t\twindow.removeEventListener( 'keyup'  , this.HANDLER_KEY_UP  , true );\n\n\t};\n\n\t/**\n\t * Dispose all scene objects and clear cache\n\t */\n\tPANOLENS.Viewer.prototype.dispose = function () {\n\n\t\t// Unregister dom event listeners\n\t\tthis.unregisterEventListeners();\n\n\t\t// recursive disposal on 3d objects\n\t\tfunction recursiveDispose ( object ) {\n\n\t\t\tfor ( var i = object.children.length - 1; i >= 0; i-- ) {\n\n\t\t\t\trecursiveDispose( object.children[i] );\n\t\t\t\tobject.remove( object.children[i] );\n\n\t\t\t}\n\n\t\t\tif ( object instanceof PANOLENS.Infospot ) {\n\n\t\t\t\tobject.dispose();\n\n\t\t\t}\n\n\t\t\tobject.geometry && object.geometry.dispose();\n\t\t\tobject.material && object.material.dispose();\n\t\t}\n\n\t\trecursiveDispose( this.scene );\n\n\t\t// dispose widget\n\t\tif ( this.widget ) {\n\n\t\t\tthis.widget.dispose();\n\t\t\tthis.widget = null;\n\n\t\t}\n\n\t\t// clear cache\n\t\tif ( THREE.Cache && THREE.Cache.enabled ) {\n\n\t\t\tTHREE.Cache.clear();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Destory viewer by disposing and stopping requestAnimationFrame\n\t */\n\tPANOLENS.Viewer.prototype.destory = function () {\n\n\t\tthis.dispose();\n\t\tthis.render();\n\t\twindow.cancelAnimationFrame( this.requestAnimationId );\t\t\n\n\t};\n\n\t/**\n\t * On panorama dispose\n\t */\n\tPANOLENS.Viewer.prototype.onPanoramaDispose = function ( panorama ) {\n\n\t\tif ( panorama instanceof PANOLENS.VideoPanorama ) {\n\n\t\t\tthis.hideVideoWidget();\n\n\t\t}\n\n\t\tif ( panorama === this.panorama ) {\n\n\t\t\tthis.panorama = null;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Load ajax call\n\t * @param {string} url - URL to be requested\n\t * @param {function} [callback] - Callback after request completes\n\t */\n\tPANOLENS.Viewer.prototype.loadAsyncRequest = function ( url, callback ) {\n\n\t\tvar request = new XMLHttpRequest();\n\t\trequest.onloadend = function ( event ) {\n\t\t\tcallback && callback( event );\n\t\t};\n\t\trequest.open( \"GET\", url, true );\n\t\trequest.send( null );\n\n\t};\n\n\t/**\n\t * View indicator in upper left\n\t * */\n\tPANOLENS.Viewer.prototype.addViewIndicator = function () {\n\n\t\tvar scope = this;\n\n\t\tfunction loadViewIndicator ( asyncEvent ) {\n\n\t\t\tif ( asyncEvent.loaded === 0 ) return;\n\n\t\t\tvar viewIndicatorDiv = asyncEvent.target.responseXML.documentElement;\n\t\t\tviewIndicatorDiv.style.width = scope.viewIndicatorSize + \"px\";\n\t\t\tviewIndicatorDiv.style.height = scope.viewIndicatorSize + \"px\";\n\t\t\tviewIndicatorDiv.style.position = \"absolute\";\n\t\t\tviewIndicatorDiv.style.top = \"10px\";\n\t\t\tviewIndicatorDiv.style.left = \"10px\";\n\t\t\tviewIndicatorDiv.style.opacity = \"0.5\";\n\t\t\tviewIndicatorDiv.style.cursor = \"pointer\";\n\t\t\tviewIndicatorDiv.id = \"panolens-view-indicator-container\";\n\n\t\t\tscope.container.appendChild( viewIndicatorDiv );\n\n\t\t\tvar indicator = viewIndicatorDiv.querySelector( \"#indicator\" );\n\t\t\tvar setIndicatorD = function () {\n\n\t\t\t\tscope.radius = scope.viewIndicatorSize * 0.225;\n\t\t\t\tscope.currentPanoAngle = scope.camera.rotation.y - THREE.Math.degToRad( 90 );\n\t\t\t\tscope.fovAngle = THREE.Math.degToRad( scope.camera.fov ) ;\n\t\t\t\tscope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2;\n\t\t\t\tscope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2;\n\t\t\t\tscope.leftX = scope.radius * Math.cos( scope.leftAngle );\n\t\t\t\tscope.leftY = scope.radius * Math.sin( scope.leftAngle );\n\t\t\t\tscope.rightX = scope.radius * Math.cos( scope.rightAngle );\n\t\t\t\tscope.rightY = scope.radius * Math.sin( scope.rightAngle );\n\t\t\t\tscope.indicatorD = \"M \" + scope.leftX + \" \" + scope.leftY + \" A \" + scope.radius + \" \" + scope.radius + \" 0 0 1 \" + scope.rightX + \" \" + scope.rightY;\n\n\t\t\t\tif ( scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius ) {\n\n\t\t\t\t\tindicator.setAttribute( \"d\", scope.indicatorD );\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tscope.addUpdateCallback( setIndicatorD );\n\n\t\t\tvar indicatorOnMouseEnter = function () {\n\n\t\t\t\tthis.style.opacity = \"1\";\n\n\t\t\t};\n\n\t\t\tvar indicatorOnMouseLeave = function () {\n\n\t\t\t\tthis.style.opacity = \"0.5\";\n\n\t\t\t};\n\n\t\t\tviewIndicatorDiv.addEventListener( \"mouseenter\", indicatorOnMouseEnter );\n\t\t\tviewIndicatorDiv.addEventListener( \"mouseleave\", indicatorOnMouseLeave );\n\t\t}\n\n\t\tthis.loadAsyncRequest( PANOLENS.DataImage.ViewIndicator, loadViewIndicator );\n\n\t};\n\n\t/**\n\t * Append custom control item to existing control bar\n\t * @param {object} [option={}] - Style object to overwirte default element style. It takes 'style', 'onTap' and 'group' properties.\n\t */\n\tPANOLENS.Viewer.prototype.appendControlItem = function ( option ) {\n\n\t\tvar item = this.widget.createCustomItem( option );\t\t\n\n\t\tif ( option.group === 'video' ) {\n\n\t\t\tthis.widget.videoElement.appendChild( item );\n\n\t\t} else {\n\n\t\t\tthis.widget.barElement.appendChild( item );\n\n\t\t}\n\n\t\treturn item;\n\n\t};\n\n} )();\n;(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\tvar createLayout = require('layout-bmfont-text')\n\tvar inherits = require('inherits')\n\tvar createIndices = require('quad-indices')\n\tvar buffer = require('three-buffer-vertex-data')\n\tvar assign = require('object-assign')\n\n\tvar vertices = require('./lib/vertices')\n\tvar utils = require('./lib/utils')\n\n\tvar Base = THREE.BufferGeometry\n\n\tmodule.exports = function createTextGeometry (opt) {\n\t  return new TextGeometry(opt)\n\t}\n\n\tfunction TextGeometry (opt) {\n\t  Base.call(this)\n\n\t  if (typeof opt === 'string') {\n\t    opt = { text: opt }\n\t  }\n\n\t  // use these as default values for any subsequent\n\t  // calls to update()\n\t  this._opt = assign({}, opt)\n\n\t  // also do an initial setup...\n\t  if (opt) this.update(opt)\n\t}\n\n\tinherits(TextGeometry, Base)\n\n\tTextGeometry.prototype.update = function (opt) {\n\t  if (typeof opt === 'string') {\n\t    opt = { text: opt }\n\t  }\n\n\t  // use constructor defaults\n\t  opt = assign({}, this._opt, opt)\n\n\t  if (!opt.font) {\n\t    throw new TypeError('must specify a { font } in options')\n\t  }\n\n\t  this.layout = createLayout(opt)\n\n\t  // get vec2 texcoords\n\t  var flipY = opt.flipY !== false\n\n\t  // the desired BMFont data\n\t  var font = opt.font\n\n\t  // determine texture size from font file\n\t  var texWidth = font.common.scaleW\n\t  var texHeight = font.common.scaleH\n\n\t  // get visible glyphs\n\t  var glyphs = this.layout.glyphs.filter(function (glyph) {\n\t    var bitmap = glyph.data\n\t    return bitmap.width * bitmap.height > 0\n\t  })\n\n\t  // provide visible glyphs for convenience\n\t  this.visibleGlyphs = glyphs\n\n\t  // get common vertex data\n\t  var positions = vertices.positions(glyphs)\n\t  var uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY)\n\t  var indices = createIndices({\n\t    clockwise: true,\n\t    type: 'uint16',\n\t    count: glyphs.length\n\t  })\n\n\t  // update vertex data\n\t  buffer.index(this, indices, 1, 'uint16')\n\t  buffer.attr(this, 'position', positions, 2)\n\t  buffer.attr(this, 'uv', uvs, 2)\n\n\t  // update multipage data\n\t  if (!opt.multipage && 'page' in this.attributes) {\n\t    // disable multipage rendering\n\t    this.removeAttribute('page')\n\t  } else if (opt.multipage) {\n\t    var pages = vertices.pages(glyphs)\n\t    // enable multipage rendering\n\t    buffer.attr(this, 'page', pages, 1)\n\t  }\n\t}\n\n\tTextGeometry.prototype.computeBoundingSphere = function () {\n\t  if (this.boundingSphere === null) {\n\t    this.boundingSphere = new THREE.Sphere()\n\t  }\n\n\t  var positions = this.attributes.position.array\n\t  var itemSize = this.attributes.position.itemSize\n\t  if (!positions || !itemSize || positions.length < 2) {\n\t    this.boundingSphere.radius = 0\n\t    this.boundingSphere.center.set(0, 0, 0)\n\t    return\n\t  }\n\t  utils.computeSphere(positions, this.boundingSphere)\n\t  if (isNaN(this.boundingSphere.radius)) {\n\t    console.error('THREE.BufferGeometry.computeBoundingSphere(): ' +\n\t      'Computed radius is NaN. The ' +\n\t      '\"position\" attribute is likely to have NaN values.')\n\t  }\n\t}\n\n\tTextGeometry.prototype.computeBoundingBox = function () {\n\t  if (this.boundingBox === null) {\n\t    this.boundingBox = new THREE.Box3()\n\t  }\n\n\t  var bbox = this.boundingBox\n\t  var positions = this.attributes.position.array\n\t  var itemSize = this.attributes.position.itemSize\n\t  if (!positions || !itemSize || positions.length < 2) {\n\t    bbox.makeEmpty()\n\t    return\n\t  }\n\t  utils.computeBox(positions, bbox)\n\t}\n\n\t},{\"./lib/utils\":2,\"./lib/vertices\":3,\"inherits\":4,\"layout-bmfont-text\":5,\"object-assign\":26,\"quad-indices\":27,\"three-buffer-vertex-data\":31}],2:[function(require,module,exports){\n\tvar itemSize = 2\n\tvar box = { min: [0, 0], max: [0, 0] }\n\n\tfunction bounds (positions) {\n\t  var count = positions.length / itemSize\n\t  box.min[0] = positions[0]\n\t  box.min[1] = positions[1]\n\t  box.max[0] = positions[0]\n\t  box.max[1] = positions[1]\n\n\t  for (var i = 0; i < count; i++) {\n\t    var x = positions[i * itemSize + 0]\n\t    var y = positions[i * itemSize + 1]\n\t    box.min[0] = Math.min(x, box.min[0])\n\t    box.min[1] = Math.min(y, box.min[1])\n\t    box.max[0] = Math.max(x, box.max[0])\n\t    box.max[1] = Math.max(y, box.max[1])\n\t  }\n\t}\n\n\tmodule.exports.computeBox = function (positions, output) {\n\t  bounds(positions)\n\t  output.min.set(box.min[0], box.min[1], 0)\n\t  output.max.set(box.max[0], box.max[1], 0)\n\t}\n\n\tmodule.exports.computeSphere = function (positions, output) {\n\t  bounds(positions)\n\t  var minX = box.min[0]\n\t  var minY = box.min[1]\n\t  var maxX = box.max[0]\n\t  var maxY = box.max[1]\n\t  var width = maxX - minX\n\t  var height = maxY - minY\n\t  var length = Math.sqrt(width * width + height * height)\n\t  output.center.set(minX + width / 2, minY + height / 2, 0)\n\t  output.radius = length / 2\n\t}\n\n\t},{}],3:[function(require,module,exports){\n\tmodule.exports.pages = function pages (glyphs) {\n\t  var pages = new Float32Array(glyphs.length * 4 * 1)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var id = glyph.data.page || 0\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t  })\n\t  return pages\n\t}\n\n\tmodule.exports.uvs = function uvs (glyphs, texWidth, texHeight, flipY) {\n\t  var uvs = new Float32Array(glyphs.length * 4 * 2)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var bitmap = glyph.data\n\t    var bw = (bitmap.x + bitmap.width)\n\t    var bh = (bitmap.y + bitmap.height)\n\n\t    // top left position\n\t    var u0 = bitmap.x / texWidth\n\t    var v1 = bitmap.y / texHeight\n\t    var u1 = bw / texWidth\n\t    var v0 = bh / texHeight\n\n\t    if (flipY) {\n\t      v1 = (texHeight - bitmap.y) / texHeight\n\t      v0 = (texHeight - bh) / texHeight\n\t    }\n\n\t    // BL\n\t    uvs[i++] = u0\n\t    uvs[i++] = v1\n\t    // TL\n\t    uvs[i++] = u0\n\t    uvs[i++] = v0\n\t    // TR\n\t    uvs[i++] = u1\n\t    uvs[i++] = v0\n\t    // BR\n\t    uvs[i++] = u1\n\t    uvs[i++] = v1\n\t  })\n\t  return uvs\n\t}\n\n\tmodule.exports.positions = function positions (glyphs) {\n\t  var positions = new Float32Array(glyphs.length * 4 * 2)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var bitmap = glyph.data\n\n\t    // bottom left position\n\t    var x = glyph.position[0] + bitmap.xoffset\n\t    var y = glyph.position[1] + bitmap.yoffset\n\n\t    // quad size\n\t    var w = bitmap.width\n\t    var h = bitmap.height\n\n\t    // BL\n\t    positions[i++] = x\n\t    positions[i++] = y\n\t    // TL\n\t    positions[i++] = x\n\t    positions[i++] = y + h\n\t    // TR\n\t    positions[i++] = x + w\n\t    positions[i++] = y + h\n\t    // BR\n\t    positions[i++] = x + w\n\t    positions[i++] = y\n\t  })\n\t  return positions\n\t}\n\n\t},{}],4:[function(require,module,exports){\n\tif (typeof Object.create === 'function') {\n\t  // implementation from standard node.js 'util' module\n\t  module.exports = function inherits(ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    ctor.prototype = Object.create(superCtor.prototype, {\n\t      constructor: {\n\t        value: ctor,\n\t        enumerable: false,\n\t        writable: true,\n\t        configurable: true\n\t      }\n\t    });\n\t  };\n\t} else {\n\t  // old school shim for old browsers\n\t  module.exports = function inherits(ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    var TempCtor = function () {}\n\t    TempCtor.prototype = superCtor.prototype\n\t    ctor.prototype = new TempCtor()\n\t    ctor.prototype.constructor = ctor\n\t  }\n\t}\n\n\t},{}],5:[function(require,module,exports){\n\tvar wordWrap = require('word-wrapper')\n\tvar xtend = require('xtend')\n\tvar findChar = require('indexof-property')('id')\n\tvar number = require('as-number')\n\n\tvar X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z']\n\tvar M_WIDTHS = ['m', 'w']\n\tvar CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n\n\n\tvar TAB_ID = '\\t'.charCodeAt(0)\n\tvar SPACE_ID = ' '.charCodeAt(0)\n\tvar ALIGN_LEFT = 0, \n\t    ALIGN_CENTER = 1, \n\t    ALIGN_RIGHT = 2\n\n\tmodule.exports = function createLayout(opt) {\n\t  return new TextLayout(opt)\n\t}\n\n\tfunction TextLayout(opt) {\n\t  this.glyphs = []\n\t  this._measure = this.computeMetrics.bind(this)\n\t  this.update(opt)\n\t}\n\n\tTextLayout.prototype.update = function(opt) {\n\t  opt = xtend({\n\t    measure: this._measure\n\t  }, opt)\n\t  this._opt = opt\n\t  this._opt.tabSize = number(this._opt.tabSize, 4)\n\n\t  if (!opt.font)\n\t    throw new Error('must provide a valid bitmap font')\n\n\t  var glyphs = this.glyphs\n\t  var text = opt.text||'' \n\t  var font = opt.font\n\t  this._setupSpaceGlyphs(font)\n\t  \n\t  var lines = wordWrap.lines(text, opt)\n\t  var minWidth = opt.width || 0\n\n\t  //clear glyphs\n\t  glyphs.length = 0\n\n\t  //get max line width\n\t  var maxLineWidth = lines.reduce(function(prev, line) {\n\t    return Math.max(prev, line.width, minWidth)\n\t  }, 0)\n\n\t  //the pen position\n\t  var x = 0\n\t  var y = 0\n\t  var lineHeight = number(opt.lineHeight, font.common.lineHeight)\n\t  var baseline = font.common.base\n\t  var descender = lineHeight-baseline\n\t  var letterSpacing = opt.letterSpacing || 0\n\t  var height = lineHeight * lines.length - descender\n\t  var align = getAlignType(this._opt.align)\n\n\t  //draw text along baseline\n\t  y -= height\n\t  \n\t  //the metrics for this text layout\n\t  this._width = maxLineWidth\n\t  this._height = height\n\t  this._descender = lineHeight - baseline\n\t  this._baseline = baseline\n\t  this._xHeight = getXHeight(font)\n\t  this._capHeight = getCapHeight(font)\n\t  this._lineHeight = lineHeight\n\t  this._ascender = lineHeight - descender - this._xHeight\n\t    \n\t  //layout each glyph\n\t  var self = this\n\t  lines.forEach(function(line, lineIndex) {\n\t    var start = line.start\n\t    var end = line.end\n\t    var lineWidth = line.width\n\t    var lastGlyph\n\t    \n\t    //for each glyph in that line...\n\t    for (var i=start; i<end; i++) {\n\t      var id = text.charCodeAt(i)\n\t      var glyph = self.getGlyph(font, id)\n\t      if (glyph) {\n\t        if (lastGlyph) \n\t          x += getKerning(font, lastGlyph.id, glyph.id)\n\n\t        var tx = x\n\t        if (align === ALIGN_CENTER) \n\t          tx += (maxLineWidth-lineWidth)/2\n\t        else if (align === ALIGN_RIGHT)\n\t          tx += (maxLineWidth-lineWidth)\n\n\t        glyphs.push({\n\t          position: [tx, y],\n\t          data: glyph,\n\t          index: i,\n\t          line: lineIndex\n\t        })  \n\n\t        //move pen forward\n\t        x += glyph.xadvance + letterSpacing\n\t        lastGlyph = glyph\n\t      }\n\t    }\n\n\t    //next line down\n\t    y += lineHeight\n\t    x = 0\n\t  })\n\t  this._linesTotal = lines.length;\n\t}\n\n\tTextLayout.prototype._setupSpaceGlyphs = function(font) {\n\t  //These are fallbacks, when the font doesn't include\n\t  //' ' or '\\t' glyphs\n\t  this._fallbackSpaceGlyph = null\n\t  this._fallbackTabGlyph = null\n\n\t  if (!font.chars || font.chars.length === 0)\n\t    return\n\n\t  //try to get space glyph\n\t  //then fall back to the 'm' or 'w' glyphs\n\t  //then fall back to the first glyph available\n\t  var space = getGlyphById(font, SPACE_ID) \n\t          || getMGlyph(font) \n\t          || font.chars[0]\n\n\t  //and create a fallback for tab\n\t  var tabWidth = this._opt.tabSize * space.xadvance\n\t  this._fallbackSpaceGlyph = space\n\t  this._fallbackTabGlyph = xtend(space, {\n\t    x: 0, y: 0, xadvance: tabWidth, id: TAB_ID, \n\t    xoffset: 0, yoffset: 0, width: 0, height: 0\n\t  })\n\t}\n\n\tTextLayout.prototype.getGlyph = function(font, id) {\n\t  var glyph = getGlyphById(font, id)\n\t  if (glyph)\n\t    return glyph\n\t  else if (id === TAB_ID) \n\t    return this._fallbackTabGlyph\n\t  else if (id === SPACE_ID) \n\t    return this._fallbackSpaceGlyph\n\t  return null\n\t}\n\n\tTextLayout.prototype.computeMetrics = function(text, start, end, width) {\n\t  var letterSpacing = this._opt.letterSpacing || 0\n\t  var font = this._opt.font\n\t  var curPen = 0\n\t  var curWidth = 0\n\t  var count = 0\n\t  var glyph\n\t  var lastGlyph\n\n\t  if (!font.chars || font.chars.length === 0) {\n\t    return {\n\t      start: start,\n\t      end: start,\n\t      width: 0\n\t    }\n\t  }\n\n\t  end = Math.min(text.length, end)\n\t  for (var i=start; i < end; i++) {\n\t    var id = text.charCodeAt(i)\n\t    var glyph = this.getGlyph(font, id)\n\n\t    if (glyph) {\n\t      //move pen forward\n\t      var xoff = glyph.xoffset\n\t      var kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0\n\t      curPen += kern\n\n\t      var nextPen = curPen + glyph.xadvance + letterSpacing\n\t      var nextWidth = curPen + glyph.width\n\n\t      //we've hit our limit; we can't move onto the next glyph\n\t      if (nextWidth >= width || nextPen >= width)\n\t        break\n\n\t      //otherwise continue along our line\n\t      curPen = nextPen\n\t      curWidth = nextWidth\n\t      lastGlyph = glyph\n\t    }\n\t    count++\n\t  }\n\t  \n\t  //make sure rightmost edge lines up with rendered glyphs\n\t  if (lastGlyph)\n\t    curWidth += lastGlyph.xoffset\n\n\t  return {\n\t    start: start,\n\t    end: start + count,\n\t    width: curWidth\n\t  }\n\t}\n\n\t//getters for the private vars\n\t;['width', 'height', \n\t  'descender', 'ascender',\n\t  'xHeight', 'baseline',\n\t  'capHeight',\n\t  'lineHeight' ].forEach(addGetter)\n\n\tfunction addGetter(name) {\n\t  Object.defineProperty(TextLayout.prototype, name, {\n\t    get: wrapper(name),\n\t    configurable: true\n\t  })\n\t}\n\n\t//create lookups for private vars\n\tfunction wrapper(name) {\n\t  return (new Function([\n\t    'return function '+name+'() {',\n\t    '  return this._'+name,\n\t    '}'\n\t  ].join('\\n')))()\n\t}\n\n\tfunction getGlyphById(font, id) {\n\t  if (!font.chars || font.chars.length === 0)\n\t    return null\n\n\t  var glyphIdx = findChar(font.chars, id)\n\t  if (glyphIdx >= 0)\n\t    return font.chars[glyphIdx]\n\t  return null\n\t}\n\n\tfunction getXHeight(font) {\n\t  for (var i=0; i<X_HEIGHTS.length; i++) {\n\t    var id = X_HEIGHTS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) \n\t      return font.chars[idx].height\n\t  }\n\t  return 0\n\t}\n\n\tfunction getMGlyph(font) {\n\t  for (var i=0; i<M_WIDTHS.length; i++) {\n\t    var id = M_WIDTHS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) \n\t      return font.chars[idx]\n\t  }\n\t  return 0\n\t}\n\n\tfunction getCapHeight(font) {\n\t  for (var i=0; i<CAP_HEIGHTS.length; i++) {\n\t    var id = CAP_HEIGHTS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) \n\t      return font.chars[idx].height\n\t  }\n\t  return 0\n\t}\n\n\tfunction getKerning(font, left, right) {\n\t  if (!font.kernings || font.kernings.length === 0)\n\t    return 0\n\n\t  var table = font.kernings\n\t  for (var i=0; i<table.length; i++) {\n\t    var kern = table[i]\n\t    if (kern.first === left && kern.second === right)\n\t      return kern.amount\n\t  }\n\t  return 0\n\t}\n\n\tfunction getAlignType(align) {\n\t  if (align === 'center')\n\t    return ALIGN_CENTER\n\t  else if (align === 'right')\n\t    return ALIGN_RIGHT\n\t  return ALIGN_LEFT\n\t}\n\t},{\"as-number\":6,\"indexof-property\":7,\"word-wrapper\":8,\"xtend\":9}],6:[function(require,module,exports){\n\tmodule.exports = function numtype(num, def) {\n\t  return typeof num === 'number'\n\t    ? num \n\t    : (typeof def === 'number' ? def : 0)\n\t}\n\t},{}],7:[function(require,module,exports){\n\tmodule.exports = function compile(property) {\n\t  if (!property || typeof property !== 'string')\n\t    throw new Error('must specify property for indexof search')\n\n\t  return new Function('array', 'value', 'start', [\n\t    'start = start || 0',\n\t    'for (var i=start; i<array.length; i++)',\n\t    '  if (array[i][\"' + property +'\"] === value)',\n\t    '      return i',\n\t    'return -1'\n\t  ].join('\\n'))\n\t}\n\t},{}],8:[function(require,module,exports){\n\tvar newline = /\\n/\n\tvar newlineChar = '\\n'\n\tvar whitespace = /\\s/\n\n\tmodule.exports = function(text, opt) {\n\t    var lines = module.exports.lines(text, opt)\n\t    return lines.map(function(line) {\n\t        return text.substring(line.start, line.end)\n\t    }).join('\\n')\n\t}\n\n\tmodule.exports.lines = function wordwrap(text, opt) {\n\t    opt = opt||{}\n\n\t    //zero width results in nothing visible\n\t    if (opt.width === 0 && opt.mode !== 'nowrap') \n\t        return []\n\n\t    text = text||''\n\t    var width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE\n\t    var start = Math.max(0, opt.start||0)\n\t    var end = typeof opt.end === 'number' ? opt.end : text.length\n\t    var mode = opt.mode\n\n\t    var measure = opt.measure || monospace\n\t    if (mode === 'pre')\n\t        return pre(measure, text, start, end, width)\n\t    else\n\t        return greedy(measure, text, start, end, width, mode)\n\t}\n\n\tfunction idxOf(text, chr, start, end) {\n\t    var idx = text.indexOf(chr, start)\n\t    if (idx === -1 || idx > end)\n\t        return end\n\t    return idx\n\t}\n\n\tfunction isWhitespace(chr) {\n\t    return whitespace.test(chr)\n\t}\n\n\tfunction pre(measure, text, start, end, width) {\n\t    var lines = []\n\t    var lineStart = start\n\t    for (var i=start; i<end && i<text.length; i++) {\n\t        var chr = text.charAt(i)\n\t        var isNewline = newline.test(chr)\n\n\t        //If we've reached a newline, then step down a line\n\t        //Or if we've reached the EOF\n\t        if (isNewline || i===end-1) {\n\t            var lineEnd = isNewline ? i : i+1\n\t            var measured = measure(text, lineStart, lineEnd, width)\n\t            lines.push(measured)\n\t            \n\t            lineStart = i+1\n\t        }\n\t    }\n\t    return lines\n\t}\n\n\tfunction greedy(measure, text, start, end, width, mode) {\n\t    //A greedy word wrapper based on LibGDX algorithm\n\t    //https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/BitmapFontCache.java\n\t    var lines = []\n\n\t    var testWidth = width\n\t    //if 'nowrap' is specified, we only wrap on newline chars\n\t    if (mode === 'nowrap')\n\t        testWidth = Number.MAX_VALUE\n\n\t    while (start < end && start < text.length) {\n\t        //get next newline position\n\t        var newLine = idxOf(text, newlineChar, start, end)\n\n\t        //eat whitespace at start of line\n\t        while (start < newLine) {\n\t            if (!isWhitespace( text.charAt(start) ))\n\t                break\n\t            start++\n\t        }\n\n\t        //determine visible # of glyphs for the available width\n\t        var measured = measure(text, start, newLine, testWidth)\n\n\t        var lineEnd = start + (measured.end-measured.start)\n\t        var nextStart = lineEnd + newlineChar.length\n\n\t        //if we had to cut the line before the next newline...\n\t        if (lineEnd < newLine) {\n\t            //find char to break on\n\t            while (lineEnd > start) {\n\t                if (isWhitespace(text.charAt(lineEnd)))\n\t                    break\n\t                lineEnd--\n\t            }\n\t            if (lineEnd === start) {\n\t                if (nextStart > start + newlineChar.length) nextStart--\n\t                lineEnd = nextStart // If no characters to break, show all.\n\t            } else {\n\t                nextStart = lineEnd\n\t                //eat whitespace at end of line\n\t                while (lineEnd > start) {\n\t                    if (!isWhitespace(text.charAt(lineEnd - newlineChar.length)))\n\t                        break\n\t                    lineEnd--\n\t                }\n\t            }\n\t        }\n\t        if (lineEnd >= start) {\n\t            var result = measure(text, start, lineEnd, testWidth)\n\t            lines.push(result)\n\t        }\n\t        start = nextStart\n\t    }\n\t    return lines\n\t}\n\n\t//determines the visible number of glyphs within a given width\n\tfunction monospace(text, start, end, width) {\n\t    var glyphs = Math.min(width, end-start)\n\t    return {\n\t        start: start,\n\t        end: start+glyphs\n\t    }\n\t}\n\t},{}],9:[function(require,module,exports){\n\tmodule.exports = extend\n\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n\tfunction extend() {\n\t    var target = {}\n\n\t    for (var i = 0; i < arguments.length; i++) {\n\t        var source = arguments[i]\n\n\t        for (var key in source) {\n\t            if (hasOwnProperty.call(source, key)) {\n\t                target[key] = source[key]\n\t            }\n\t        }\n\t    }\n\n\t    return target\n\t}\n\n\t},{}],10:[function(require,module,exports){\n\t(function (Buffer){\n\tvar xhr = require('xhr')\n\tvar noop = function(){}\n\tvar parseASCII = require('parse-bmfont-ascii')\n\tvar parseXML = require('parse-bmfont-xml')\n\tvar readBinary = require('parse-bmfont-binary')\n\tvar isBinaryFormat = require('./lib/is-binary')\n\tvar xtend = require('xtend')\n\n\tvar xml2 = (function hasXML2() {\n\t  return window.XMLHttpRequest && \"withCredentials\" in new XMLHttpRequest\n\t})()\n\n\tmodule.exports = function(opt, cb) {\n\t  cb = typeof cb === 'function' ? cb : noop\n\n\t  if (typeof opt === 'string')\n\t    opt = { uri: opt }\n\t  else if (!opt)\n\t    opt = {}\n\n\t  var expectBinary = opt.binary\n\t  if (expectBinary)\n\t    opt = getBinaryOpts(opt)\n\n\t  xhr(opt, function(err, res, body) {\n\t    if (err)\n\t      return cb(err)\n\t    if (!/^2/.test(res.statusCode))\n\t      return cb(new Error('http status code: '+res.statusCode))\n\t    if (!body)\n\t      return cb(new Error('no body result'))\n\n\t    var binary = false \n\n\t    //if the response type is an array buffer,\n\t    //we need to convert it into a regular Buffer object\n\t    if (isArrayBuffer(body)) {\n\t      var array = new Uint8Array(body)\n\t      body = new Buffer(array, 'binary')\n\t    }\n\n\t    //now check the string/Buffer response\n\t    //and see if it has a binary BMF header\n\t    if (isBinaryFormat(body)) {\n\t      binary = true\n\t      //if we have a string, turn it into a Buffer\n\t      if (typeof body === 'string') \n\t        body = new Buffer(body, 'binary')\n\t    } \n\n\t    //we are not parsing a binary format, just ASCII/XML/etc\n\t    if (!binary) {\n\t      //might still be a buffer if responseType is 'arraybuffer'\n\t      if (Buffer.isBuffer(body))\n\t        body = body.toString(opt.encoding)\n\t      body = body.trim()\n\t    }\n\n\t    var result\n\t    try {\n\t      var type = res.headers['content-type']\n\t      if (binary)\n\t        result = readBinary(body)\n\t      else if (/json/.test(type) || body.charAt(0) === '{')\n\t        result = JSON.parse(body)\n\t      else if (/xml/.test(type)  || body.charAt(0) === '<')\n\t        result = parseXML(body)\n\t      else\n\t        result = parseASCII(body)\n\t    } catch (e) {\n\t      cb(new Error('error parsing font '+e.message))\n\t      cb = noop\n\t    }\n\t    cb(null, result)\n\t  })\n\t}\n\n\tfunction isArrayBuffer(arr) {\n\t  var str = Object.prototype.toString\n\t  return str.call(arr) === '[object ArrayBuffer]'\n\t}\n\n\tfunction getBinaryOpts(opt) {\n\t  //IE10+ and other modern browsers support array buffers\n\t  if (xml2)\n\t    return xtend(opt, { responseType: 'arraybuffer' })\n\t  \n\t  if (typeof window.XMLHttpRequest === 'undefined')\n\t    throw new Error('your browser does not support XHR loading')\n\n\t  //IE9 and XML1 browsers could still use an override\n\t  var req = new window.XMLHttpRequest()\n\t  req.overrideMimeType('text/plain; charset=x-user-defined')\n\t  return xtend({\n\t    xhr: req\n\t  }, opt)\n\t}\n\t}).call(this,require(\"buffer\").Buffer)\n\t},{\"./lib/is-binary\":11,\"buffer\":37,\"parse-bmfont-ascii\":13,\"parse-bmfont-binary\":14,\"parse-bmfont-xml\":15,\"xhr\":18,\"xtend\":25}],11:[function(require,module,exports){\n\t(function (Buffer){\n\tvar equal = require('buffer-equal')\n\tvar HEADER = new Buffer([66, 77, 70, 3])\n\n\tmodule.exports = function(buf) {\n\t  if (typeof buf === 'string')\n\t    return buf.substring(0, 3) === 'BMF'\n\t  return buf.length > 4 && equal(buf.slice(0, 4), HEADER)\n\t}\n\t}).call(this,require(\"buffer\").Buffer)\n\t},{\"buffer\":37,\"buffer-equal\":12}],12:[function(require,module,exports){\n\tvar Buffer = require('buffer').Buffer; // for use with browserify\n\n\tmodule.exports = function (a, b) {\n\t    if (!Buffer.isBuffer(a)) return undefined;\n\t    if (!Buffer.isBuffer(b)) return undefined;\n\t    if (typeof a.equals === 'function') return a.equals(b);\n\t    if (a.length !== b.length) return false;\n\t    \n\t    for (var i = 0; i < a.length; i++) {\n\t        if (a[i] !== b[i]) return false;\n\t    }\n\t    \n\t    return true;\n\t};\n\n\t},{\"buffer\":37}],13:[function(require,module,exports){\n\tmodule.exports = function parseBMFontAscii(data) {\n\t  if (!data)\n\t    throw new Error('no data provided')\n\t  data = data.toString().trim()\n\n\t  var output = {\n\t    pages: [],\n\t    chars: [],\n\t    kernings: []\n\t  }\n\n\t  var lines = data.split(/\\r\\n?|\\n/g)\n\n\t  if (lines.length === 0)\n\t    throw new Error('no data in BMFont file')\n\n\t  for (var i = 0; i < lines.length; i++) {\n\t    var lineData = splitLine(lines[i], i)\n\t    if (!lineData) //skip empty lines\n\t      continue\n\n\t    if (lineData.key === 'page') {\n\t      if (typeof lineData.data.id !== 'number')\n\t        throw new Error('malformed file at line ' + i + ' -- needs page id=N')\n\t      if (typeof lineData.data.file !== 'string')\n\t        throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"')\n\t      output.pages[lineData.data.id] = lineData.data.file\n\t    } else if (lineData.key === 'chars' || lineData.key === 'kernings') {\n\t      //... do nothing for these two ...\n\t    } else if (lineData.key === 'char') {\n\t      output.chars.push(lineData.data)\n\t    } else if (lineData.key === 'kerning') {\n\t      output.kernings.push(lineData.data)\n\t    } else {\n\t      output[lineData.key] = lineData.data\n\t    }\n\t  }\n\n\t  return output\n\t}\n\n\tfunction splitLine(line, idx) {\n\t  line = line.replace(/\\t+/g, ' ').trim()\n\t  if (!line)\n\t    return null\n\n\t  var space = line.indexOf(' ')\n\t  if (space === -1) \n\t    throw new Error(\"no named row at line \" + idx)\n\n\t  var key = line.substring(0, space)\n\n\t  line = line.substring(space + 1)\n\t  //clear \"letter\" field as it is non-standard and\n\t  //requires additional complexity to parse \" / = symbols\n\t  line = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '')  \n\t  line = line.split(\"=\")\n\t  line = line.map(function(str) {\n\t    return str.trim().match((/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g))\n\t  })\n\n\t  var data = []\n\t  for (var i = 0; i < line.length; i++) {\n\t    var dt = line[i]\n\t    if (i === 0) {\n\t      data.push({\n\t        key: dt[0],\n\t        data: \"\"\n\t      })\n\t    } else if (i === line.length - 1) {\n\t      data[data.length - 1].data = parseData(dt[0])\n\t    } else {\n\t      data[data.length - 1].data = parseData(dt[0])\n\t      data.push({\n\t        key: dt[1],\n\t        data: \"\"\n\t      })\n\t    }\n\t  }\n\n\t  var out = {\n\t    key: key,\n\t    data: {}\n\t  }\n\n\t  data.forEach(function(v) {\n\t    out.data[v.key] = v.data;\n\t  })\n\n\t  return out\n\t}\n\n\tfunction parseData(data) {\n\t  if (!data || data.length === 0)\n\t    return \"\"\n\n\t  if (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0)\n\t    return data.substring(1, data.length - 1)\n\t  if (data.indexOf(',') !== -1)\n\t    return parseIntList(data)\n\t  return parseInt(data, 10)\n\t}\n\n\tfunction parseIntList(data) {\n\t  return data.split(',').map(function(val) {\n\t    return parseInt(val, 10)\n\t  })\n\t}\n\t},{}],14:[function(require,module,exports){\n\tvar HEADER = [66, 77, 70]\n\n\tmodule.exports = function readBMFontBinary(buf) {\n\t  if (buf.length < 6)\n\t    throw new Error('invalid buffer length for BMFont')\n\n\t  var header = HEADER.every(function(byte, i) {\n\t    return buf.readUInt8(i) === byte\n\t  })\n\n\t  if (!header)\n\t    throw new Error('BMFont missing BMF byte header')\n\n\t  var i = 3\n\t  var vers = buf.readUInt8(i++)\n\t  if (vers > 3)\n\t    throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)')\n\t  \n\t  var target = { kernings: [], chars: [] }\n\t  for (var b=0; b<5; b++)\n\t    i += readBlock(target, buf, i)\n\t  return target\n\t}\n\n\tfunction readBlock(target, buf, i) {\n\t  if (i > buf.length-1)\n\t    return 0\n\n\t  var blockID = buf.readUInt8(i++)\n\t  var blockSize = buf.readInt32LE(i)\n\t  i += 4\n\n\t  switch(blockID) {\n\t    case 1: \n\t      target.info = readInfo(buf, i)\n\t      break\n\t    case 2:\n\t      target.common = readCommon(buf, i)\n\t      break\n\t    case 3:\n\t      target.pages = readPages(buf, i, blockSize)\n\t      break\n\t    case 4:\n\t      target.chars = readChars(buf, i, blockSize)\n\t      break\n\t    case 5:\n\t      target.kernings = readKernings(buf, i, blockSize)\n\t      break\n\t  }\n\t  return 5 + blockSize\n\t}\n\n\tfunction readInfo(buf, i) {\n\t  var info = {}\n\t  info.size = buf.readInt16LE(i)\n\n\t  var bitField = buf.readUInt8(i+2)\n\t  info.smooth = (bitField >> 7) & 1\n\t  info.unicode = (bitField >> 6) & 1\n\t  info.italic = (bitField >> 5) & 1\n\t  info.bold = (bitField >> 4) & 1\n\t  \n\t  //fixedHeight is only mentioned in binary spec \n\t  if ((bitField >> 3) & 1)\n\t    info.fixedHeight = 1\n\t  \n\t  info.charset = buf.readUInt8(i+3) || ''\n\t  info.stretchH = buf.readUInt16LE(i+4)\n\t  info.aa = buf.readUInt8(i+6)\n\t  info.padding = [\n\t    buf.readInt8(i+7),\n\t    buf.readInt8(i+8),\n\t    buf.readInt8(i+9),\n\t    buf.readInt8(i+10)\n\t  ]\n\t  info.spacing = [\n\t    buf.readInt8(i+11),\n\t    buf.readInt8(i+12)\n\t  ]\n\t  info.outline = buf.readUInt8(i+13)\n\t  info.face = readStringNT(buf, i+14)\n\t  return info\n\t}\n\n\tfunction readCommon(buf, i) {\n\t  var common = {}\n\t  common.lineHeight = buf.readUInt16LE(i)\n\t  common.base = buf.readUInt16LE(i+2)\n\t  common.scaleW = buf.readUInt16LE(i+4)\n\t  common.scaleH = buf.readUInt16LE(i+6)\n\t  common.pages = buf.readUInt16LE(i+8)\n\t  var bitField = buf.readUInt8(i+10)\n\t  common.packed = 0\n\t  common.alphaChnl = buf.readUInt8(i+11)\n\t  common.redChnl = buf.readUInt8(i+12)\n\t  common.greenChnl = buf.readUInt8(i+13)\n\t  common.blueChnl = buf.readUInt8(i+14)\n\t  return common\n\t}\n\n\tfunction readPages(buf, i, size) {\n\t  var pages = []\n\t  var text = readNameNT(buf, i)\n\t  var len = text.length+1\n\t  var count = size / len\n\t  for (var c=0; c<count; c++) {\n\t    pages[c] = buf.slice(i, i+text.length).toString('utf8')\n\t    i += len\n\t  }\n\t  return pages\n\t}\n\n\tfunction readChars(buf, i, blockSize) {\n\t  var chars = []\n\n\t  var count = blockSize / 20\n\t  for (var c=0; c<count; c++) {\n\t    var char = {}\n\t    var off = c*20\n\t    char.id = buf.readUInt32LE(i + 0 + off)\n\t    char.x = buf.readUInt16LE(i + 4 + off)\n\t    char.y = buf.readUInt16LE(i + 6 + off)\n\t    char.width = buf.readUInt16LE(i + 8 + off)\n\t    char.height = buf.readUInt16LE(i + 10 + off)\n\t    char.xoffset = buf.readInt16LE(i + 12 + off)\n\t    char.yoffset = buf.readInt16LE(i + 14 + off)\n\t    char.xadvance = buf.readInt16LE(i + 16 + off)\n\t    char.page = buf.readUInt8(i + 18 + off)\n\t    char.chnl = buf.readUInt8(i + 19 + off)\n\t    chars[c] = char\n\t  }\n\t  return chars\n\t}\n\n\tfunction readKernings(buf, i, blockSize) {\n\t  var kernings = []\n\t  var count = blockSize / 10\n\t  for (var c=0; c<count; c++) {\n\t    var kern = {}\n\t    var off = c*10\n\t    kern.first = buf.readUInt32LE(i + 0 + off)\n\t    kern.second = buf.readUInt32LE(i + 4 + off)\n\t    kern.amount = buf.readInt16LE(i + 8 + off)\n\t    kernings[c] = kern\n\t  }\n\t  return kernings\n\t}\n\n\tfunction readNameNT(buf, offset) {\n\t  var pos=offset\n\t  for (; pos<buf.length; pos++) {\n\t    if (buf[pos] === 0x00) \n\t      break\n\t  }\n\t  return buf.slice(offset, pos)\n\t}\n\n\tfunction readStringNT(buf, offset) {\n\t  return readNameNT(buf, offset).toString('utf8')\n\t}\n\t},{}],15:[function(require,module,exports){\n\tvar parseAttributes = require('./parse-attribs')\n\tvar parseFromString = require('xml-parse-from-string')\n\n\t//In some cases element.attribute.nodeName can return\n\t//all lowercase values.. so we need to map them to the correct \n\t//case\n\tvar NAME_MAP = {\n\t  scaleh: 'scaleH',\n\t  scalew: 'scaleW',\n\t  stretchh: 'stretchH',\n\t  lineheight: 'lineHeight',\n\t  alphachnl: 'alphaChnl',\n\t  redchnl: 'redChnl',\n\t  greenchnl: 'greenChnl',\n\t  bluechnl: 'blueChnl'\n\t}\n\n\tmodule.exports = function parse(data) {\n\t  data = data.toString()\n\t  \n\t  var xmlRoot = parseFromString(data)\n\t  var output = {\n\t    pages: [],\n\t    chars: [],\n\t    kernings: []\n\t  }\n\n\t  //get config settings\n\t  ;['info', 'common'].forEach(function(key) {\n\t    var element = xmlRoot.getElementsByTagName(key)[0]\n\t    if (element)\n\t      output[key] = parseAttributes(getAttribs(element))\n\t  })\n\n\t  //get page info\n\t  var pageRoot = xmlRoot.getElementsByTagName('pages')[0]\n\t  if (!pageRoot)\n\t    throw new Error('malformed file -- no <pages> element')\n\t  var pages = pageRoot.getElementsByTagName('page')\n\t  for (var i=0; i<pages.length; i++) {\n\t    var p = pages[i]\n\t    var id = parseInt(p.getAttribute('id'), 10)\n\t    var file = p.getAttribute('file')\n\t    if (isNaN(id))\n\t      throw new Error('malformed file -- page \"id\" attribute is NaN')\n\t    if (!file)\n\t      throw new Error('malformed file -- needs page \"file\" attribute')\n\t    output.pages[parseInt(id, 10)] = file\n\t  }\n\n\t  //get kernings / chars\n\t  ;['chars', 'kernings'].forEach(function(key) {\n\t    var element = xmlRoot.getElementsByTagName(key)[0]\n\t    if (!element)\n\t      return\n\t    var childTag = key.substring(0, key.length-1)\n\t    var children = element.getElementsByTagName(childTag)\n\t    for (var i=0; i<children.length; i++) {      \n\t      var child = children[i]\n\t      output[key].push(parseAttributes(getAttribs(child)))\n\t    }\n\t  })\n\t  return output\n\t}\n\n\tfunction getAttribs(element) {\n\t  var attribs = getAttribList(element)\n\t  return attribs.reduce(function(dict, attrib) {\n\t    var key = mapName(attrib.nodeName)\n\t    dict[key] = attrib.nodeValue\n\t    return dict\n\t  }, {})\n\t}\n\n\tfunction getAttribList(element) {\n\t  //IE8+ and modern browsers\n\t  var attribs = []\n\t  for (var i=0; i<element.attributes.length; i++)\n\t    attribs.push(element.attributes[i])\n\t  return attribs\n\t}\n\n\tfunction mapName(nodeName) {\n\t  return NAME_MAP[nodeName.toLowerCase()] || nodeName\n\t}\n\t},{\"./parse-attribs\":16,\"xml-parse-from-string\":17}],16:[function(require,module,exports){\n\t//Some versions of GlyphDesigner have a typo\n\t//that causes some bugs with parsing. \n\t//Need to confirm with recent version of the software\n\t//to see whether this is still an issue or not.\n\tvar GLYPH_DESIGNER_ERROR = 'chasrset'\n\n\tmodule.exports = function parseAttributes(obj) {\n\t  if (GLYPH_DESIGNER_ERROR in obj) {\n\t    obj['charset'] = obj[GLYPH_DESIGNER_ERROR]\n\t    delete obj[GLYPH_DESIGNER_ERROR]\n\t  }\n\n\t  for (var k in obj) {\n\t    if (k === 'face' || k === 'charset') \n\t      continue\n\t    else if (k === 'padding' || k === 'spacing')\n\t      obj[k] = parseIntList(obj[k])\n\t    else\n\t      obj[k] = parseInt(obj[k], 10) \n\t  }\n\t  return obj\n\t}\n\n\tfunction parseIntList(data) {\n\t  return data.split(',').map(function(val) {\n\t    return parseInt(val, 10)\n\t  })\n\t}\n\t},{}],17:[function(require,module,exports){\n\tmodule.exports = (function xmlparser() {\n\t  //common browsers\n\t  if (typeof window.DOMParser !== 'undefined') {\n\t    return function(str) {\n\t      var parser = new window.DOMParser()\n\t      return parser.parseFromString(str, 'application/xml')\n\t    }\n\t  } \n\n\t  //IE8 fallback\n\t  if (typeof window.ActiveXObject !== 'undefined'\n\t      && new window.ActiveXObject('Microsoft.XMLDOM')) {\n\t    return function(str) {\n\t      var xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\")\n\t      xmlDoc.async = \"false\"\n\t      xmlDoc.loadXML(str)\n\t      return xmlDoc\n\t    }\n\t  }\n\n\t  //last resort fallback\n\t  return function(str) {\n\t    var div = document.createElement('div')\n\t    div.innerHTML = str\n\t    return div\n\t  }\n\t})()\n\t},{}],18:[function(require,module,exports){\n\t\"use strict\";\n\tvar window = require(\"global/window\")\n\tvar once = require(\"once\")\n\tvar isFunction = require(\"is-function\")\n\tvar parseHeaders = require(\"parse-headers\")\n\tvar xtend = require(\"xtend\")\n\n\tmodule.exports = createXHR\n\tcreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\n\tcreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\n\tforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n\t    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n\t        options = initParams(uri, options, callback)\n\t        options.method = method.toUpperCase()\n\t        return _createXHR(options)\n\t    }\n\t})\n\n\tfunction forEachArray(array, iterator) {\n\t    for (var i = 0; i < array.length; i++) {\n\t        iterator(array[i])\n\t    }\n\t}\n\n\tfunction isEmpty(obj){\n\t    for(var i in obj){\n\t        if(obj.hasOwnProperty(i)) return false\n\t    }\n\t    return true\n\t}\n\n\tfunction initParams(uri, options, callback) {\n\t    var params = uri\n\n\t    if (isFunction(options)) {\n\t        callback = options\n\t        if (typeof uri === \"string\") {\n\t            params = {uri:uri}\n\t        }\n\t    } else {\n\t        params = xtend(options, {uri: uri})\n\t    }\n\n\t    params.callback = callback\n\t    return params\n\t}\n\n\tfunction createXHR(uri, options, callback) {\n\t    options = initParams(uri, options, callback)\n\t    return _createXHR(options)\n\t}\n\n\tfunction _createXHR(options) {\n\t    var callback = options.callback\n\t    if(typeof callback === \"undefined\"){\n\t        throw new Error(\"callback argument missing\")\n\t    }\n\t    callback = once(callback)\n\n\t    function readystatechange() {\n\t        if (xhr.readyState === 4) {\n\t            loadFunc()\n\t        }\n\t    }\n\n\t    function getBody() {\n\t        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n\t        var body = undefined\n\n\t        if (xhr.response) {\n\t            body = xhr.response\n\t        } else if (xhr.responseType === \"text\" || !xhr.responseType) {\n\t            body = xhr.responseText || xhr.responseXML\n\t        }\n\n\t        if (isJson) {\n\t            try {\n\t                body = JSON.parse(body)\n\t            } catch (e) {}\n\t        }\n\n\t        return body\n\t    }\n\n\t    var failureResponse = {\n\t                body: undefined,\n\t                headers: {},\n\t                statusCode: 0,\n\t                method: method,\n\t                url: uri,\n\t                rawRequest: xhr\n\t            }\n\n\t    function errorFunc(evt) {\n\t        clearTimeout(timeoutTimer)\n\t        if(!(evt instanceof Error)){\n\t            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n\t        }\n\t        evt.statusCode = 0\n\t        callback(evt, failureResponse)\n\t    }\n\n\t    // will load the data & process the response in a special response object\n\t    function loadFunc() {\n\t        if (aborted) return\n\t        var status\n\t        clearTimeout(timeoutTimer)\n\t        if(options.useXDR && xhr.status===undefined) {\n\t            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n\t            status = 200\n\t        } else {\n\t            status = (xhr.status === 1223 ? 204 : xhr.status)\n\t        }\n\t        var response = failureResponse\n\t        var err = null\n\n\t        if (status !== 0){\n\t            response = {\n\t                body: getBody(),\n\t                statusCode: status,\n\t                method: method,\n\t                headers: {},\n\t                url: uri,\n\t                rawRequest: xhr\n\t            }\n\t            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n\t                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n\t            }\n\t        } else {\n\t            err = new Error(\"Internal XMLHttpRequest Error\")\n\t        }\n\t        callback(err, response, response.body)\n\n\t    }\n\n\t    var xhr = options.xhr || null\n\n\t    if (!xhr) {\n\t        if (options.cors || options.useXDR) {\n\t            xhr = new createXHR.XDomainRequest()\n\t        }else{\n\t            xhr = new createXHR.XMLHttpRequest()\n\t        }\n\t    }\n\n\t    var key\n\t    var aborted\n\t    var uri = xhr.url = options.uri || options.url\n\t    var method = xhr.method = options.method || \"GET\"\n\t    var body = options.body || options.data || null\n\t    var headers = xhr.headers = options.headers || {}\n\t    var sync = !!options.sync\n\t    var isJson = false\n\t    var timeoutTimer\n\n\t    if (\"json\" in options) {\n\t        isJson = true\n\t        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n\t        if (method !== \"GET\" && method !== \"HEAD\") {\n\t            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n\t            body = JSON.stringify(options.json)\n\t        }\n\t    }\n\n\t    xhr.onreadystatechange = readystatechange\n\t    xhr.onload = loadFunc\n\t    xhr.onerror = errorFunc\n\t    // IE9 must have onprogress be set to a unique function.\n\t    xhr.onprogress = function () {\n\t        // IE must die\n\t    }\n\t    xhr.ontimeout = errorFunc\n\t    xhr.open(method, uri, !sync, options.username, options.password)\n\t    //has to be after open\n\t    if(!sync) {\n\t        xhr.withCredentials = !!options.withCredentials\n\t    }\n\t    // Cannot set timeout with sync request\n\t    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n\t    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n\t    if (!sync && options.timeout > 0 ) {\n\t        timeoutTimer = setTimeout(function(){\n\t            aborted=true//IE9 may still call readystatechange\n\t            xhr.abort(\"timeout\")\n\t            var e = new Error(\"XMLHttpRequest timeout\")\n\t            e.code = \"ETIMEDOUT\"\n\t            errorFunc(e)\n\t        }, options.timeout )\n\t    }\n\n\t    if (xhr.setRequestHeader) {\n\t        for(key in headers){\n\t            if(headers.hasOwnProperty(key)){\n\t                xhr.setRequestHeader(key, headers[key])\n\t            }\n\t        }\n\t    } else if (options.headers && !isEmpty(options.headers)) {\n\t        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n\t    }\n\n\t    if (\"responseType\" in options) {\n\t        xhr.responseType = options.responseType\n\t    }\n\n\t    if (\"beforeSend\" in options &&\n\t        typeof options.beforeSend === \"function\"\n\t    ) {\n\t        options.beforeSend(xhr)\n\t    }\n\n\t    xhr.send(body)\n\n\t    return xhr\n\n\n\t}\n\n\tfunction noop() {}\n\n\t},{\"global/window\":19,\"is-function\":20,\"once\":21,\"parse-headers\":24,\"xtend\":25}],19:[function(require,module,exports){\n\t(function (global){\n\tif (typeof window !== \"undefined\") {\n\t    module.exports = window;\n\t} else if (typeof global !== \"undefined\") {\n\t    module.exports = global;\n\t} else if (typeof self !== \"undefined\"){\n\t    module.exports = self;\n\t} else {\n\t    module.exports = {};\n\t}\n\n\t}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\t},{}],20:[function(require,module,exports){\n\tmodule.exports = isFunction\n\n\tvar toString = Object.prototype.toString\n\n\tfunction isFunction (fn) {\n\t  var string = toString.call(fn)\n\t  return string === '[object Function]' ||\n\t    (typeof fn === 'function' && string !== '[object RegExp]') ||\n\t    (typeof window !== 'undefined' &&\n\t     // IE8 and below\n\t     (fn === window.setTimeout ||\n\t      fn === window.alert ||\n\t      fn === window.confirm ||\n\t      fn === window.prompt))\n\t};\n\n\t},{}],21:[function(require,module,exports){\n\tmodule.exports = once\n\n\tonce.proto = once(function () {\n\t  Object.defineProperty(Function.prototype, 'once', {\n\t    value: function () {\n\t      return once(this)\n\t    },\n\t    configurable: true\n\t  })\n\t})\n\n\tfunction once (fn) {\n\t  var called = false\n\t  return function () {\n\t    if (called) return\n\t    called = true\n\t    return fn.apply(this, arguments)\n\t  }\n\t}\n\n\t},{}],22:[function(require,module,exports){\n\tvar isFunction = require('is-function')\n\n\tmodule.exports = forEach\n\n\tvar toString = Object.prototype.toString\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty\n\n\tfunction forEach(list, iterator, context) {\n\t    if (!isFunction(iterator)) {\n\t        throw new TypeError('iterator must be a function')\n\t    }\n\n\t    if (arguments.length < 3) {\n\t        context = this\n\t    }\n\t    \n\t    if (toString.call(list) === '[object Array]')\n\t        forEachArray(list, iterator, context)\n\t    else if (typeof list === 'string')\n\t        forEachString(list, iterator, context)\n\t    else\n\t        forEachObject(list, iterator, context)\n\t}\n\n\tfunction forEachArray(array, iterator, context) {\n\t    for (var i = 0, len = array.length; i < len; i++) {\n\t        if (hasOwnProperty.call(array, i)) {\n\t            iterator.call(context, array[i], i, array)\n\t        }\n\t    }\n\t}\n\n\tfunction forEachString(string, iterator, context) {\n\t    for (var i = 0, len = string.length; i < len; i++) {\n\t        // no such thing as a sparse string.\n\t        iterator.call(context, string.charAt(i), i, string)\n\t    }\n\t}\n\n\tfunction forEachObject(object, iterator, context) {\n\t    for (var k in object) {\n\t        if (hasOwnProperty.call(object, k)) {\n\t            iterator.call(context, object[k], k, object)\n\t        }\n\t    }\n\t}\n\n\t},{\"is-function\":20}],23:[function(require,module,exports){\n\n\texports = module.exports = trim;\n\n\tfunction trim(str){\n\t  return str.replace(/^\\s*|\\s*$/g, '');\n\t}\n\n\texports.left = function(str){\n\t  return str.replace(/^\\s*/, '');\n\t};\n\n\texports.right = function(str){\n\t  return str.replace(/\\s*$/, '');\n\t};\n\n\t},{}],24:[function(require,module,exports){\n\tvar trim = require('trim')\n\t  , forEach = require('for-each')\n\t  , isArray = function(arg) {\n\t      return Object.prototype.toString.call(arg) === '[object Array]';\n\t    }\n\n\tmodule.exports = function (headers) {\n\t  if (!headers)\n\t    return {}\n\n\t  var result = {}\n\n\t  forEach(\n\t      trim(headers).split('\\n')\n\t    , function (row) {\n\t        var index = row.indexOf(':')\n\t          , key = trim(row.slice(0, index)).toLowerCase()\n\t          , value = trim(row.slice(index + 1))\n\n\t        if (typeof(result[key]) === 'undefined') {\n\t          result[key] = value\n\t        } else if (isArray(result[key])) {\n\t          result[key].push(value)\n\t        } else {\n\t          result[key] = [ result[key], value ]\n\t        }\n\t      }\n\t  )\n\n\t  return result\n\t}\n\t},{\"for-each\":22,\"trim\":23}],25:[function(require,module,exports){\n\targuments[4][9][0].apply(exports,arguments)\n\t},{\"dup\":9}],26:[function(require,module,exports){\n\t/* eslint-disable no-unused-vars */\n\t'use strict';\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n\tfunction toObject(val) {\n\t  if (val === null || val === undefined) {\n\t    throw new TypeError('Object.assign cannot be called with null or undefined');\n\t  }\n\n\t  return Object(val);\n\t}\n\n\tmodule.exports = Object.assign || function (target, source) {\n\t  var from;\n\t  var to = toObject(target);\n\t  var symbols;\n\n\t  for (var s = 1; s < arguments.length; s++) {\n\t    from = Object(arguments[s]);\n\n\t    for (var key in from) {\n\t      if (hasOwnProperty.call(from, key)) {\n\t        to[key] = from[key];\n\t      }\n\t    }\n\n\t    if (Object.getOwnPropertySymbols) {\n\t      symbols = Object.getOwnPropertySymbols(from);\n\t      for (var i = 0; i < symbols.length; i++) {\n\t        if (propIsEnumerable.call(from, symbols[i])) {\n\t          to[symbols[i]] = from[symbols[i]];\n\t        }\n\t      }\n\t    }\n\t  }\n\n\t  return to;\n\t};\n\n\t},{}],27:[function(require,module,exports){\n\tvar dtype = require('dtype')\n\tvar anArray = require('an-array')\n\tvar isBuffer = require('is-buffer')\n\n\tvar CW = [0, 2, 3]\n\tvar CCW = [2, 1, 3]\n\n\tmodule.exports = function createQuadElements(array, opt) {\n\t    //if user didn't specify an output array\n\t    if (!array || !(anArray(array) || isBuffer(array))) {\n\t        opt = array || {}\n\t        array = null\n\t    }\n\n\t    if (typeof opt === 'number') //backwards-compatible\n\t        opt = { count: opt }\n\t    else\n\t        opt = opt || {}\n\n\t    var type = typeof opt.type === 'string' ? opt.type : 'uint16'\n\t    var count = typeof opt.count === 'number' ? opt.count : 1\n\t    var start = (opt.start || 0) \n\n\t    var dir = opt.clockwise !== false ? CW : CCW,\n\t        a = dir[0], \n\t        b = dir[1],\n\t        c = dir[2]\n\n\t    var numIndices = count * 6\n\n\t    var indices = array || new (dtype(type))(numIndices)\n\t    for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n\t        var x = i + start\n\t        indices[x + 0] = j + 0\n\t        indices[x + 1] = j + 1\n\t        indices[x + 2] = j + 2\n\t        indices[x + 3] = j + a\n\t        indices[x + 4] = j + b\n\t        indices[x + 5] = j + c\n\t    }\n\t    return indices\n\t}\n\t},{\"an-array\":28,\"dtype\":29,\"is-buffer\":30}],28:[function(require,module,exports){\n\tvar str = Object.prototype.toString\n\n\tmodule.exports = anArray\n\n\tfunction anArray(arr) {\n\t  return (\n\t       arr.BYTES_PER_ELEMENT\n\t    && str.call(arr.buffer) === '[object ArrayBuffer]'\n\t    || Array.isArray(arr)\n\t  )\n\t}\n\n\t},{}],29:[function(require,module,exports){\n\tmodule.exports = function(dtype) {\n\t  switch (dtype) {\n\t    case 'int8':\n\t      return Int8Array\n\t    case 'int16':\n\t      return Int16Array\n\t    case 'int32':\n\t      return Int32Array\n\t    case 'uint8':\n\t      return Uint8Array\n\t    case 'uint16':\n\t      return Uint16Array\n\t    case 'uint32':\n\t      return Uint32Array\n\t    case 'float32':\n\t      return Float32Array\n\t    case 'float64':\n\t      return Float64Array\n\t    case 'array':\n\t      return Array\n\t    case 'uint8_clamped':\n\t      return Uint8ClampedArray\n\t  }\n\t}\n\n\t},{}],30:[function(require,module,exports){\n\t/**\n\t * Determine if an object is Buffer\n\t *\n\t * Author:   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * License:  MIT\n\t *\n\t * `npm install is-buffer`\n\t */\n\n\tmodule.exports = function (obj) {\n\t  return !!(obj != null &&\n\t    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)\n\t      (obj.constructor &&\n\t      typeof obj.constructor.isBuffer === 'function' &&\n\t      obj.constructor.isBuffer(obj))\n\t    ))\n\t}\n\n\t},{}],31:[function(require,module,exports){\n\tvar flatten = require('flatten-vertex-data')\n\n\tmodule.exports.attr = setAttribute\n\tmodule.exports.index = setIndex\n\n\tfunction setIndex (geometry, data, itemSize, dtype) {\n\t  if (typeof itemSize !== 'number') itemSize = 1\n\t  if (typeof dtype !== 'number') dtype = 'uint16'\n\n\t  var isR69 = !geometry.index && typeof geometry.setIndex !== 'function'\n\t  var attrib = isR69 ? geometry.getAttribute('index') : geometry.index\n\t  var newAttrib = updateAttribute(attrib, data, itemSize, dtype)\n\t  if (newAttrib) {\n\t    if (isR69) geometry.addAttribute('index', newAttrib)\n\t    else geometry.index = newAttrib\n\t  }\n\t}\n\n\tfunction setAttribute (geometry, key, data, itemSize, dtype) {\n\t  if (typeof itemSize !== 'number') itemSize = 3\n\t  if (typeof dtype !== 'number') dtype = 'float32'\n\t  if (Array.isArray(data) &&\n\t    Array.isArray(data[0]) &&\n\t    data[0].length !== itemSize) {\n\t    throw new Error('Nested vertex array has unexpected size; expected ' +\n\t      itemSize + ' but found ' + data[0].length)\n\t  }\n\n\t  var attrib = geometry.getAttribute(key)\n\t  var newAttrib = updateAttribute(attrib, data, itemSize, dtype)\n\t  if (newAttrib) {\n\t    geometry.addAttribute(key, newAttrib)\n\t  }\n\t}\n\n\tfunction updateAttribute (attrib, data, itemSize, dtype) {\n\t  data = data || []\n\t  if (!attrib || rebuildAttribute(attrib, data, itemSize)) {\n\t    // create a new array with desired type\n\t    data = flatten(data, dtype)\n\t    attrib = new THREE.BufferAttribute(data, itemSize)\n\t    attrib.needsUpdate = true\n\t    return attrib\n\t  } else {\n\t    // copy data into the existing array\n\t    flatten(data, attrib.array)\n\t    attrib.needsUpdate = true\n\t    return null\n\t  }\n\t}\n\n\t// Test whether the attribute needs to be re-created,\n\t// returns false if we can re-use it as-is.\n\tfunction rebuildAttribute (attrib, data, itemSize) {\n\t  if (attrib.itemSize !== itemSize) return true\n\t  if (!attrib.array) return true\n\t  var attribLength = attrib.array.length\n\t  if (Array.isArray(data) && Array.isArray(data[0])) {\n\t    // [ [ x, y, z ] ]\n\t    return attribLength !== data.length * itemSize\n\t  } else {\n\t    // [ x, y, z ]\n\t    return attribLength !== data.length\n\t  }\n\t}\n\n\t},{\"flatten-vertex-data\":32}],32:[function(require,module,exports){\n\t/*eslint new-cap:0*/\n\tvar dtype = require('dtype')\n\tmodule.exports = flattenVertexData\n\tfunction flattenVertexData (data, output, offset) {\n\t  if (!data) throw new TypeError('must specify data as first parameter')\n\t  offset = +(offset || 0) | 0\n\n\t  if (Array.isArray(data) && Array.isArray(data[0])) {\n\t    var dim = data[0].length\n\t    var length = data.length * dim\n\n\t    // no output specified, create a new typed array\n\t    if (!output || typeof output === 'string') {\n\t      output = new (dtype(output || 'float32'))(length + offset)\n\t    }\n\n\t    var dstLength = output.length - offset\n\t    if (length !== dstLength) {\n\t      throw new Error('source length ' + length + ' (' + dim + 'x' + data.length + ')' +\n\t        ' does not match destination length ' + dstLength)\n\t    }\n\n\t    for (var i = 0, k = offset; i < data.length; i++) {\n\t      for (var j = 0; j < dim; j++) {\n\t        output[k++] = data[i][j]\n\t      }\n\t    }\n\t  } else {\n\t    if (!output || typeof output === 'string') {\n\t      // no output, create a new one\n\t      var Ctor = dtype(output || 'float32')\n\t      if (offset === 0) {\n\t        output = new Ctor(data)\n\t      } else {\n\t        output = new Ctor(data.length + offset)\n\t        output.set(data, offset)\n\t      }\n\t    } else {\n\t      // store output in existing array\n\t      output.set(data, offset)\n\t    }\n\t  }\n\n\t  return output\n\t}\n\n\t},{\"dtype\":33}],33:[function(require,module,exports){\n\targuments[4][29][0].apply(exports,arguments)\n\t},{\"dup\":29}],34:[function(require,module,exports){\n\tvar assign = require('object-assign')\n\n\tmodule.exports = function createSDFShader (opt) {\n\t  opt = opt || {}\n\t  var opacity = typeof opt.opacity === 'number' ? opt.opacity : 1\n\t  var alphaTest = typeof opt.alphaTest === 'number' ? opt.alphaTest : 0.0001\n\t  var precision = opt.precision || 'highp'\n\t  var color = opt.color\n\t  var map = opt.map\n\n\t  // remove to satisfy r73\n\t  delete opt.map\n\t  delete opt.color\n\t  delete opt.precision\n\t  delete opt.opacity\n\n\t  return assign({\n\t    uniforms: {\n\t      opacity: { type: 'f', value: opacity },\n\t      map: { type: 't', value: map || new THREE.Texture() },\n\t      color: { type: 'c', value: new THREE.Color(color) }\n\t    },\n\t    vertexShader: [\n\t      'attribute vec2 uv;',\n\t      'attribute vec4 position;',\n\t      'uniform mat4 projectionMatrix;',\n\t      'uniform mat4 modelViewMatrix;',\n\t      'varying vec2 vUv;',\n\t      'void main() {',\n\t      'vUv = uv;',\n\t      'gl_Position = projectionMatrix * modelViewMatrix * position;',\n\t      '}'\n\t    ].join('\\n'),\n\t    fragmentShader: [\n\t      '#ifdef GL_OES_standard_derivatives',\n\t      '#extension GL_OES_standard_derivatives : enable',\n\t      '#endif',\n\t      'precision ' + precision + ' float;',\n\t      'uniform float opacity;',\n\t      'uniform vec3 color;',\n\t      'uniform sampler2D map;',\n\t      'varying vec2 vUv;',\n\n\t      'float aastep(float value) {',\n\t      '  #ifdef GL_OES_standard_derivatives',\n\t      '    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;',\n\t      '  #else',\n\t      '    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));',\n\t      '  #endif',\n\t      '  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);',\n\t      '}',\n\n\t      'void main() {',\n\t      '  vec4 texColor = texture2D(map, vUv);',\n\t      '  float alpha = aastep(texColor.a);',\n\t      '  gl_FragColor = vec4(color, opacity * alpha);',\n\t      alphaTest === 0\n\t        ? ''\n\t        : '  if (gl_FragColor.a < ' + alphaTest + ') discard;',\n\t      '}'\n\t    ].join('\\n')\n\t  }, opt)\n\t}\n\n\t},{\"object-assign\":26}],35:[function(require,module,exports){\n\tvar loadFont = require('load-bmfont')\n\t//global.THREE = require('three')\n\n\t// A utility to load a font, then a texture\n\tmodule.exports = function (opt, cb) {\n\t  loadFont(opt.font, function (err, font) {\n\t    if (err) throw err\n\t\tPANOLENS.Utils.TextureLoader.load( opt.image, function (tex) {\n\t      cb(font, tex)\n\t    } );\n\t  })\n\t}\n\n\t},{\"load-bmfont\":10}],36:[function(require,module,exports){\n\n\tvar createText = require('../')\n\tvar SDFShader = require('../shaders/sdf')\n\n\tif ( PANOLENS && PANOLENS.Utils && PANOLENS.SpriteText ) {\n\t\tPANOLENS.Utils.loadBMFont = function(fontObject, callback){\n\t\t\trequire('./load')(fontObject, PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype, callback));\n\t\t};\n\t\tPANOLENS.SpriteText.prototype.generateTextGeometry = createText;\n\t\tPANOLENS.SpriteText.prototype.generateSDFShader = SDFShader;\n\t}\n\n\t},{\"../\":1,\"../shaders/sdf\":34,\"./load\":35}],37:[function(require,module,exports){\n\t(function (global){\n\t/*!\n\t * The buffer module from node.js, for the browser.\n\t *\n\t * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * @license  MIT\n\t */\n\t/* eslint-disable no-proto */\n\n\t'use strict'\n\n\tvar base64 = require('base64-js')\n\tvar ieee754 = require('ieee754')\n\tvar isArray = require('isarray')\n\n\texports.Buffer = Buffer\n\texports.SlowBuffer = SlowBuffer\n\texports.INSPECT_MAX_BYTES = 50\n\tBuffer.poolSize = 8192 // not used by this implementation\n\n\tvar rootParent = {}\n\n\t/**\n\t * If `Buffer.TYPED_ARRAY_SUPPORT`:\n\t *   === true    Use Uint8Array implementation (fastest)\n\t *   === false   Use Object implementation (most compatible, even IE6)\n\t *\n\t * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n\t * Opera 11.6+, iOS 4.2+.\n\t *\n\t * Due to various browser bugs, sometimes the Object implementation will be used even\n\t * when the browser supports typed arrays.\n\t *\n\t * Note:\n\t *\n\t *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n\t *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n\t *\n\t *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n\t *\n\t *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n\t *     incorrect length in some situations.\n\n\t * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n\t * get the Object implementation, which is slower but behaves correctly.\n\t */\n\tBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n\t  ? global.TYPED_ARRAY_SUPPORT\n\t  : typedArraySupport()\n\n\tfunction typedArraySupport () {\n\t  try {\n\t    var arr = new Uint8Array(1)\n\t    arr.foo = function () { return 42 }\n\t    return arr.foo() === 42 && // typed array instances can be augmented\n\t        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n\t        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n\t  } catch (e) {\n\t    return false\n\t  }\n\t}\n\n\tfunction kMaxLength () {\n\t  return Buffer.TYPED_ARRAY_SUPPORT\n\t    ? 0x7fffffff\n\t    : 0x3fffffff\n\t}\n\n\t/**\n\t * Class: Buffer\n\t * =============\n\t *\n\t * The Buffer constructor returns instances of `Uint8Array` that are augmented\n\t * with function properties for all the node `Buffer` API functions. We use\n\t * `Uint8Array` so that square bracket notation works as expected -- it returns\n\t * a single octet.\n\t *\n\t * By augmenting the instances, we can avoid modifying the `Uint8Array`\n\t * prototype.\n\t */\n\tfunction Buffer (arg) {\n\t  if (!(this instanceof Buffer)) {\n\t    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n\t    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n\t    return new Buffer(arg)\n\t  }\n\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this.length = 0\n\t    this.parent = undefined\n\t  }\n\n\t  // Common case.\n\t  if (typeof arg === 'number') {\n\t    return fromNumber(this, arg)\n\t  }\n\n\t  // Slightly less common case.\n\t  if (typeof arg === 'string') {\n\t    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n\t  }\n\n\t  // Unusual.\n\t  return fromObject(this, arg)\n\t}\n\n\tfunction fromNumber (that, length) {\n\t  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    for (var i = 0; i < length; i++) {\n\t      that[i] = 0\n\t    }\n\t  }\n\t  return that\n\t}\n\n\tfunction fromString (that, string, encoding) {\n\t  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n\t  // Assumption: byteLength() return value is always < kMaxLength.\n\t  var length = byteLength(string, encoding) | 0\n\t  that = allocate(that, length)\n\n\t  that.write(string, encoding)\n\t  return that\n\t}\n\n\tfunction fromObject (that, object) {\n\t  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n\t  if (isArray(object)) return fromArray(that, object)\n\n\t  if (object == null) {\n\t    throw new TypeError('must start with number, buffer, array or string')\n\t  }\n\n\t  if (typeof ArrayBuffer !== 'undefined') {\n\t    if (object.buffer instanceof ArrayBuffer) {\n\t      return fromTypedArray(that, object)\n\t    }\n\t    if (object instanceof ArrayBuffer) {\n\t      return fromArrayBuffer(that, object)\n\t    }\n\t  }\n\n\t  if (object.length) return fromArrayLike(that, object)\n\n\t  return fromJsonObject(that, object)\n\t}\n\n\tfunction fromBuffer (that, buffer) {\n\t  var length = checked(buffer.length) | 0\n\t  that = allocate(that, length)\n\t  buffer.copy(that, 0, 0, length)\n\t  return that\n\t}\n\n\tfunction fromArray (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n\t}\n\n\t// Duplicate of fromArray() to keep fromArray() monomorphic.\n\tfunction fromTypedArray (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  // Truncating the elements is probably not what people expect from typed\n\t  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n\t  // of the old Buffer constructor.\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n\t}\n\n\tfunction fromArrayBuffer (that, array) {\n\t  //array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(array)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that = fromTypedArray(that, new Uint8Array(array))\n\t  }\n\t  return that\n\t}\n\n\tfunction fromArrayLike (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n\t}\n\n\t// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n\t// Returns a zero-length buffer for inputs that don't conform to the spec.\n\tfunction fromJsonObject (that, object) {\n\t  var array\n\t  var length = 0\n\n\t  if (object.type === 'Buffer' && isArray(object.data)) {\n\t    array = object.data\n\t    length = checked(array.length) | 0\n\t  }\n\t  that = allocate(that, length)\n\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n\t}\n\n\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t  Buffer.prototype.__proto__ = Uint8Array.prototype\n\t  Buffer.__proto__ = Uint8Array\n\t} else {\n\t  // pre-set for values that may exist in the future\n\t  Buffer.prototype.length = undefined\n\t  Buffer.prototype.parent = undefined\n\t}\n\n\tfunction allocate (that, length) {\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(length)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that.length = length\n\t  }\n\n\t  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n\t  if (fromPool) that.parent = rootParent\n\n\t  return that\n\t}\n\n\tfunction checked (length) {\n\t  // Note: cannot use `length < kMaxLength` here because that fails when\n\t  // length is NaN (which is otherwise coerced to zero.)\n\t  if (length >= kMaxLength()) {\n\t    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n\t                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n\t  }\n\t  return length | 0\n\t}\n\n\tfunction SlowBuffer (subject, encoding) {\n\t  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n\t  var buf = new Buffer(subject, encoding)\n\t  delete buf.parent\n\t  return buf\n\t}\n\n\tBuffer.isBuffer = function isBuffer (b) {\n\t  return !!(b != null && b._isBuffer)\n\t}\n\n\tBuffer.compare = function compare (a, b) {\n\t  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n\t    throw new TypeError('Arguments must be Buffers')\n\t  }\n\n\t  if (a === b) return 0\n\n\t  var x = a.length\n\t  var y = b.length\n\n\t  var i = 0\n\t  var len = Math.min(x, y)\n\t  while (i < len) {\n\t    if (a[i] !== b[i]) break\n\n\t    ++i\n\t  }\n\n\t  if (i !== len) {\n\t    x = a[i]\n\t    y = b[i]\n\t  }\n\n\t  if (x < y) return -1\n\t  if (y < x) return 1\n\t  return 0\n\t}\n\n\tBuffer.isEncoding = function isEncoding (encoding) {\n\t  switch (String(encoding).toLowerCase()) {\n\t    case 'hex':\n\t    case 'utf8':\n\t    case 'utf-8':\n\t    case 'ascii':\n\t    case 'binary':\n\t    case 'base64':\n\t    case 'raw':\n\t    case 'ucs2':\n\t    case 'ucs-2':\n\t    case 'utf16le':\n\t    case 'utf-16le':\n\t      return true\n\t    default:\n\t      return false\n\t  }\n\t}\n\n\tBuffer.concat = function concat (list, length) {\n\t  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n\t  if (list.length === 0) {\n\t    return new Buffer(0)\n\t  }\n\n\t  var i\n\t  if (length === undefined) {\n\t    length = 0\n\t    for (i = 0; i < list.length; i++) {\n\t      length += list[i].length\n\t    }\n\t  }\n\n\t  var buf = new Buffer(length)\n\t  var pos = 0\n\t  for (i = 0; i < list.length; i++) {\n\t    var item = list[i]\n\t    item.copy(buf, pos)\n\t    pos += item.length\n\t  }\n\t  return buf\n\t}\n\n\tfunction byteLength (string, encoding) {\n\t  if (typeof string !== 'string') string = '' + string\n\n\t  var len = string.length\n\t  if (len === 0) return 0\n\n\t  // Use a for loop to avoid recursion\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'ascii':\n\t      case 'binary':\n\t      // Deprecated\n\t      case 'raw':\n\t      case 'raws':\n\t        return len\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8ToBytes(string).length\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return len * 2\n\t      case 'hex':\n\t        return len >>> 1\n\t      case 'base64':\n\t        return base64ToBytes(string).length\n\t      default:\n\t        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n\t}\n\tBuffer.byteLength = byteLength\n\n\tfunction slowToString (encoding, start, end) {\n\t  var loweredCase = false\n\n\t  start = start | 0\n\t  end = end === undefined || end === Infinity ? this.length : end | 0\n\n\t  if (!encoding) encoding = 'utf8'\n\t  if (start < 0) start = 0\n\t  if (end > this.length) end = this.length\n\t  if (end <= start) return ''\n\n\t  while (true) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexSlice(this, start, end)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Slice(this, start, end)\n\n\t      case 'ascii':\n\t        return asciiSlice(this, start, end)\n\n\t      case 'binary':\n\t        return binarySlice(this, start, end)\n\n\t      case 'base64':\n\t        return base64Slice(this, start, end)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return utf16leSlice(this, start, end)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = (encoding + '').toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n\t}\n\n\t// Even though this property is private, it shouldn't be removed because it is\n\t// used by `is-buffer` to detect buffer instances in Safari 5-7.\n\tBuffer.prototype._isBuffer = true\n\n\tBuffer.prototype.toString = function toString () {\n\t  var length = this.length | 0\n\t  if (length === 0) return ''\n\t  if (arguments.length === 0) return utf8Slice(this, 0, length)\n\t  return slowToString.apply(this, arguments)\n\t}\n\n\tBuffer.prototype.equals = function equals (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return true\n\t  return Buffer.compare(this, b) === 0\n\t}\n\n\tBuffer.prototype.inspect = function inspect () {\n\t  var str = ''\n\t  var max = exports.INSPECT_MAX_BYTES\n\t  if (this.length > 0) {\n\t    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n\t    if (this.length > max) str += ' ... '\n\t  }\n\t  return '<Buffer ' + str + '>'\n\t}\n\n\tBuffer.prototype.compare = function compare (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return 0\n\t  return Buffer.compare(this, b)\n\t}\n\n\tBuffer.prototype.indexOf = function indexOf (val, byteOffset) {\n\t  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n\t  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n\t  byteOffset >>= 0\n\n\t  if (this.length === 0) return -1\n\t  if (byteOffset >= this.length) return -1\n\n\t  // Negative offsets start from the end of the buffer\n\t  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n\t  if (typeof val === 'string') {\n\t    if (val.length === 0) return -1 // special case: looking for empty string always fails\n\t    return String.prototype.indexOf.call(this, val, byteOffset)\n\t  }\n\t  if (Buffer.isBuffer(val)) {\n\t    return arrayIndexOf(this, val, byteOffset)\n\t  }\n\t  if (typeof val === 'number') {\n\t    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n\t      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n\t    }\n\t    return arrayIndexOf(this, [ val ], byteOffset)\n\t  }\n\n\t  function arrayIndexOf (arr, val, byteOffset) {\n\t    var foundIndex = -1\n\t    for (var i = 0; byteOffset + i < arr.length; i++) {\n\t      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n\t        if (foundIndex === -1) foundIndex = i\n\t        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n\t      } else {\n\t        foundIndex = -1\n\t      }\n\t    }\n\t    return -1\n\t  }\n\n\t  throw new TypeError('val must be string, number or Buffer')\n\t}\n\n\tfunction hexWrite (buf, string, offset, length) {\n\t  offset = Number(offset) || 0\n\t  var remaining = buf.length - offset\n\t  if (!length) {\n\t    length = remaining\n\t  } else {\n\t    length = Number(length)\n\t    if (length > remaining) {\n\t      length = remaining\n\t    }\n\t  }\n\n\t  // must be an even number of digits\n\t  var strLen = string.length\n\t  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n\t  if (length > strLen / 2) {\n\t    length = strLen / 2\n\t  }\n\t  for (var i = 0; i < length; i++) {\n\t    var parsed = parseInt(string.substr(i * 2, 2), 16)\n\t    if (isNaN(parsed)) throw new Error('Invalid hex string')\n\t    buf[offset + i] = parsed\n\t  }\n\t  return i\n\t}\n\n\tfunction utf8Write (buf, string, offset, length) {\n\t  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n\t}\n\n\tfunction asciiWrite (buf, string, offset, length) {\n\t  return blitBuffer(asciiToBytes(string), buf, offset, length)\n\t}\n\n\tfunction binaryWrite (buf, string, offset, length) {\n\t  return asciiWrite(buf, string, offset, length)\n\t}\n\n\tfunction base64Write (buf, string, offset, length) {\n\t  return blitBuffer(base64ToBytes(string), buf, offset, length)\n\t}\n\n\tfunction ucs2Write (buf, string, offset, length) {\n\t  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n\t}\n\n\tBuffer.prototype.write = function write (string, offset, length, encoding) {\n\t  // Buffer#write(string)\n\t  if (offset === undefined) {\n\t    encoding = 'utf8'\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, encoding)\n\t  } else if (length === undefined && typeof offset === 'string') {\n\t    encoding = offset\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, offset[, length][, encoding])\n\t  } else if (isFinite(offset)) {\n\t    offset = offset | 0\n\t    if (isFinite(length)) {\n\t      length = length | 0\n\t      if (encoding === undefined) encoding = 'utf8'\n\t    } else {\n\t      encoding = length\n\t      length = undefined\n\t    }\n\t  // legacy write(string, encoding, offset, length) - remove in v0.13\n\t  } else {\n\t    var swap = encoding\n\t    encoding = offset\n\t    offset = length | 0\n\t    length = swap\n\t  }\n\n\t  var remaining = this.length - offset\n\t  if (length === undefined || length > remaining) length = remaining\n\n\t  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n\t    throw new RangeError('attempt to write outside buffer bounds')\n\t  }\n\n\t  if (!encoding) encoding = 'utf8'\n\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexWrite(this, string, offset, length)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Write(this, string, offset, length)\n\n\t      case 'ascii':\n\t        return asciiWrite(this, string, offset, length)\n\n\t      case 'binary':\n\t        return binaryWrite(this, string, offset, length)\n\n\t      case 'base64':\n\t        // Warning: maxLength not taken into account in base64Write\n\t        return base64Write(this, string, offset, length)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return ucs2Write(this, string, offset, length)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n\t}\n\n\tBuffer.prototype.toJSON = function toJSON () {\n\t  return {\n\t    type: 'Buffer',\n\t    data: Array.prototype.slice.call(this._arr || this, 0)\n\t  }\n\t}\n\n\tfunction base64Slice (buf, start, end) {\n\t  if (start === 0 && end === buf.length) {\n\t    return base64.fromByteArray(buf)\n\t  } else {\n\t    return base64.fromByteArray(buf.slice(start, end))\n\t  }\n\t}\n\n\tfunction utf8Slice (buf, start, end) {\n\t  end = Math.min(buf.length, end)\n\t  var res = []\n\n\t  var i = start\n\t  while (i < end) {\n\t    var firstByte = buf[i]\n\t    var codePoint = null\n\t    var bytesPerSequence = (firstByte > 0xEF) ? 4\n\t      : (firstByte > 0xDF) ? 3\n\t      : (firstByte > 0xBF) ? 2\n\t      : 1\n\n\t    if (i + bytesPerSequence <= end) {\n\t      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n\t      switch (bytesPerSequence) {\n\t        case 1:\n\t          if (firstByte < 0x80) {\n\t            codePoint = firstByte\n\t          }\n\t          break\n\t        case 2:\n\t          secondByte = buf[i + 1]\n\t          if ((secondByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n\t            if (tempCodePoint > 0x7F) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 3:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n\t            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 4:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          fourthByte = buf[i + 3]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n\t            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t      }\n\t    }\n\n\t    if (codePoint === null) {\n\t      // we did not generate a valid codePoint so insert a\n\t      // replacement char (U+FFFD) and advance only 1 byte\n\t      codePoint = 0xFFFD\n\t      bytesPerSequence = 1\n\t    } else if (codePoint > 0xFFFF) {\n\t      // encode to utf16 (surrogate pair dance)\n\t      codePoint -= 0x10000\n\t      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n\t      codePoint = 0xDC00 | codePoint & 0x3FF\n\t    }\n\n\t    res.push(codePoint)\n\t    i += bytesPerSequence\n\t  }\n\n\t  return decodeCodePointsArray(res)\n\t}\n\n\t// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n\t// the lowest limit is Chrome, with 0x10000 args.\n\t// We go 1 magnitude less, for safety\n\tvar MAX_ARGUMENTS_LENGTH = 0x1000\n\n\tfunction decodeCodePointsArray (codePoints) {\n\t  var len = codePoints.length\n\t  if (len <= MAX_ARGUMENTS_LENGTH) {\n\t    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n\t  }\n\n\t  // Decode in chunks to avoid \"call stack size exceeded\".\n\t  var res = ''\n\t  var i = 0\n\t  while (i < len) {\n\t    res += String.fromCharCode.apply(\n\t      String,\n\t      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n\t    )\n\t  }\n\t  return res\n\t}\n\n\tfunction asciiSlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\n\t  for (var i = start; i < end; i++) {\n\t    ret += String.fromCharCode(buf[i] & 0x7F)\n\t  }\n\t  return ret\n\t}\n\n\tfunction binarySlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\n\t  for (var i = start; i < end; i++) {\n\t    ret += String.fromCharCode(buf[i])\n\t  }\n\t  return ret\n\t}\n\n\tfunction hexSlice (buf, start, end) {\n\t  var len = buf.length\n\n\t  if (!start || start < 0) start = 0\n\t  if (!end || end < 0 || end > len) end = len\n\n\t  var out = ''\n\t  for (var i = start; i < end; i++) {\n\t    out += toHex(buf[i])\n\t  }\n\t  return out\n\t}\n\n\tfunction utf16leSlice (buf, start, end) {\n\t  var bytes = buf.slice(start, end)\n\t  var res = ''\n\t  for (var i = 0; i < bytes.length; i += 2) {\n\t    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n\t  }\n\t  return res\n\t}\n\n\tBuffer.prototype.slice = function slice (start, end) {\n\t  var len = this.length\n\t  start = ~~start\n\t  end = end === undefined ? len : ~~end\n\n\t  if (start < 0) {\n\t    start += len\n\t    if (start < 0) start = 0\n\t  } else if (start > len) {\n\t    start = len\n\t  }\n\n\t  if (end < 0) {\n\t    end += len\n\t    if (end < 0) end = 0\n\t  } else if (end > len) {\n\t    end = len\n\t  }\n\n\t  if (end < start) end = start\n\n\t  var newBuf\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    newBuf = this.subarray(start, end)\n\t    newBuf.__proto__ = Buffer.prototype\n\t  } else {\n\t    var sliceLen = end - start\n\t    newBuf = new Buffer(sliceLen, undefined)\n\t    for (var i = 0; i < sliceLen; i++) {\n\t      newBuf[i] = this[i + start]\n\t    }\n\t  }\n\n\t  if (newBuf.length) newBuf.parent = this.parent || this\n\n\t  return newBuf\n\t}\n\n\t/*\n\t * Need to make sure that buffer isn't trying to write out of bounds.\n\t */\n\tfunction checkOffset (offset, ext, length) {\n\t  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n\t  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n\t}\n\n\tBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\n\t  return val\n\t}\n\n\tBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) {\n\t    checkOffset(offset, byteLength, this.length)\n\t  }\n\n\t  var val = this[offset + --byteLength]\n\t  var mul = 1\n\t  while (byteLength > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --byteLength] * mul\n\t  }\n\n\t  return val\n\t}\n\n\tBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  return this[offset]\n\t}\n\n\tBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return this[offset] | (this[offset + 1] << 8)\n\t}\n\n\tBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return (this[offset] << 8) | this[offset + 1]\n\t}\n\n\tBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return ((this[offset]) |\n\t      (this[offset + 1] << 8) |\n\t      (this[offset + 2] << 16)) +\n\t      (this[offset + 3] * 0x1000000)\n\t}\n\n\tBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset] * 0x1000000) +\n\t    ((this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    this[offset + 3])\n\t}\n\n\tBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\t  mul *= 0x80\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n\t  return val\n\t}\n\n\tBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var i = byteLength\n\t  var mul = 1\n\t  var val = this[offset + --i]\n\t  while (i > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --i] * mul\n\t  }\n\t  mul *= 0x80\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n\t  return val\n\t}\n\n\tBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  if (!(this[offset] & 0x80)) return (this[offset])\n\t  return ((0xff - this[offset] + 1) * -1)\n\t}\n\n\tBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset] | (this[offset + 1] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n\t}\n\n\tBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset + 1] | (this[offset] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n\t}\n\n\tBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset]) |\n\t    (this[offset + 1] << 8) |\n\t    (this[offset + 2] << 16) |\n\t    (this[offset + 3] << 24)\n\t}\n\n\tBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset] << 24) |\n\t    (this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    (this[offset + 3])\n\t}\n\n\tBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, true, 23, 4)\n\t}\n\n\tBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, false, 23, 4)\n\t}\n\n\tBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, true, 52, 8)\n\t}\n\n\tBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, false, 52, 8)\n\t}\n\n\tfunction checkInt (buf, value, offset, ext, max, min) {\n\t  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n\t  if (value > max || value < min) throw new RangeError('value is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('index out of range')\n\t}\n\n\tBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n\t  var mul = 1\n\t  var i = 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\n\t  return offset + byteLength\n\t}\n\n\tBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\n\t  return offset + byteLength\n\t}\n\n\tBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n\t}\n\n\tfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n\t    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n\t      (littleEndian ? i : 1 - i) * 8\n\t  }\n\t}\n\n\tBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n\t}\n\n\tBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n\t}\n\n\tfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n\t    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n\t  }\n\t}\n\n\tBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset + 3] = (value >>> 24)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n\t}\n\n\tBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n\t}\n\n\tBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\n\t  var i = 0\n\t  var mul = 1\n\t  var sub = value < 0 ? 1 : 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\n\t  return offset + byteLength\n\t}\n\n\tBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  var sub = value < 0 ? 1 : 0\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\n\t  return offset + byteLength\n\t}\n\n\tBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  if (value < 0) value = 0xff + value + 1\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n\t}\n\n\tBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n\t}\n\n\tBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n\t}\n\n\tBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 3] = (value >>> 24)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n\t}\n\n\tBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n\t}\n\n\tfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n\t  if (value > max || value < min) throw new RangeError('value is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('index out of range')\n\t  if (offset < 0) throw new RangeError('index out of range')\n\t}\n\n\tfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n\t  return offset + 4\n\t}\n\n\tBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, true, noAssert)\n\t}\n\n\tBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, false, noAssert)\n\t}\n\n\tfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n\t  return offset + 8\n\t}\n\n\tBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, true, noAssert)\n\t}\n\n\tBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, false, noAssert)\n\t}\n\n\t// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\tBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n\t  if (!start) start = 0\n\t  if (!end && end !== 0) end = this.length\n\t  if (targetStart >= target.length) targetStart = target.length\n\t  if (!targetStart) targetStart = 0\n\t  if (end > 0 && end < start) end = start\n\n\t  // Copy 0 bytes; we're done\n\t  if (end === start) return 0\n\t  if (target.length === 0 || this.length === 0) return 0\n\n\t  // Fatal error conditions\n\t  if (targetStart < 0) {\n\t    throw new RangeError('targetStart out of bounds')\n\t  }\n\t  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n\t  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n\t  // Are we oob?\n\t  if (end > this.length) end = this.length\n\t  if (target.length - targetStart < end - start) {\n\t    end = target.length - targetStart + start\n\t  }\n\n\t  var len = end - start\n\t  var i\n\n\t  if (this === target && start < targetStart && targetStart < end) {\n\t    // descending copy from end\n\t    for (i = len - 1; i >= 0; i--) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // ascending copy from start\n\t    for (i = 0; i < len; i++) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else {\n\t    Uint8Array.prototype.set.call(\n\t      target,\n\t      this.subarray(start, start + len),\n\t      targetStart\n\t    )\n\t  }\n\n\t  return len\n\t}\n\n\t// fill(value, start=0, end=buffer.length)\n\tBuffer.prototype.fill = function fill (value, start, end) {\n\t  if (!value) value = 0\n\t  if (!start) start = 0\n\t  if (!end) end = this.length\n\n\t  if (end < start) throw new RangeError('end < start')\n\n\t  // Fill 0 bytes; we're done\n\t  if (end === start) return\n\t  if (this.length === 0) return\n\n\t  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n\t  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n\t  var i\n\t  if (typeof value === 'number') {\n\t    for (i = start; i < end; i++) {\n\t      this[i] = value\n\t    }\n\t  } else {\n\t    var bytes = utf8ToBytes(value.toString())\n\t    var len = bytes.length\n\t    for (i = start; i < end; i++) {\n\t      this[i] = bytes[i % len]\n\t    }\n\t  }\n\n\t  return this\n\t}\n\n\t// HELPER FUNCTIONS\n\t// ================\n\n\tvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\n\tfunction base64clean (str) {\n\t  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n\t  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n\t  // Node converts strings with length < 2 to ''\n\t  if (str.length < 2) return ''\n\t  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\t  while (str.length % 4 !== 0) {\n\t    str = str + '='\n\t  }\n\t  return str\n\t}\n\n\tfunction stringtrim (str) {\n\t  if (str.trim) return str.trim()\n\t  return str.replace(/^\\s+|\\s+$/g, '')\n\t}\n\n\tfunction toHex (n) {\n\t  if (n < 16) return '0' + n.toString(16)\n\t  return n.toString(16)\n\t}\n\n\tfunction utf8ToBytes (string, units) {\n\t  units = units || Infinity\n\t  var codePoint\n\t  var length = string.length\n\t  var leadSurrogate = null\n\t  var bytes = []\n\n\t  for (var i = 0; i < length; i++) {\n\t    codePoint = string.charCodeAt(i)\n\n\t    // is surrogate component\n\t    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n\t      // last char was a lead\n\t      if (!leadSurrogate) {\n\t        // no lead yet\n\t        if (codePoint > 0xDBFF) {\n\t          // unexpected trail\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        } else if (i + 1 === length) {\n\t          // unpaired lead\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        }\n\n\t        // valid lead\n\t        leadSurrogate = codePoint\n\n\t        continue\n\t      }\n\n\t      // 2 leads in a row\n\t      if (codePoint < 0xDC00) {\n\t        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t        leadSurrogate = codePoint\n\t        continue\n\t      }\n\n\t      // valid surrogate pair\n\t      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n\t    } else if (leadSurrogate) {\n\t      // valid bmp char, but last char was a lead\n\t      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t    }\n\n\t    leadSurrogate = null\n\n\t    // encode utf8\n\t    if (codePoint < 0x80) {\n\t      if ((units -= 1) < 0) break\n\t      bytes.push(codePoint)\n\t    } else if (codePoint < 0x800) {\n\t      if ((units -= 2) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x6 | 0xC0,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x10000) {\n\t      if ((units -= 3) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0xC | 0xE0,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x110000) {\n\t      if ((units -= 4) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x12 | 0xF0,\n\t        codePoint >> 0xC & 0x3F | 0x80,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else {\n\t      throw new Error('Invalid code point')\n\t    }\n\t  }\n\n\t  return bytes\n\t}\n\n\tfunction asciiToBytes (str) {\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; i++) {\n\t    // Node's code seems to be doing this and not & 0x7F..\n\t    byteArray.push(str.charCodeAt(i) & 0xFF)\n\t  }\n\t  return byteArray\n\t}\n\n\tfunction utf16leToBytes (str, units) {\n\t  var c, hi, lo\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; i++) {\n\t    if ((units -= 2) < 0) break\n\n\t    c = str.charCodeAt(i)\n\t    hi = c >> 8\n\t    lo = c % 256\n\t    byteArray.push(lo)\n\t    byteArray.push(hi)\n\t  }\n\n\t  return byteArray\n\t}\n\n\tfunction base64ToBytes (str) {\n\t  return base64.toByteArray(base64clean(str))\n\t}\n\n\tfunction blitBuffer (src, dst, offset, length) {\n\t  for (var i = 0; i < length; i++) {\n\t    if ((i + offset >= dst.length) || (i >= src.length)) break\n\t    dst[i + offset] = src[i]\n\t  }\n\t  return i\n\t}\n\n\t}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\t},{\"base64-js\":38,\"ieee754\":39,\"isarray\":40}],38:[function(require,module,exports){\n\t;(function (exports) {\n\t  'use strict'\n\n\t  var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n\n\t  var Arr = (typeof Uint8Array !== 'undefined')\n\t    ? Uint8Array\n\t    : Array\n\n\t  var PLUS = '+'.charCodeAt(0)\n\t  var SLASH = '/'.charCodeAt(0)\n\t  var NUMBER = '0'.charCodeAt(0)\n\t  var LOWER = 'a'.charCodeAt(0)\n\t  var UPPER = 'A'.charCodeAt(0)\n\t  var PLUS_URL_SAFE = '-'.charCodeAt(0)\n\t  var SLASH_URL_SAFE = '_'.charCodeAt(0)\n\n\t  function decode (elt) {\n\t    var code = elt.charCodeAt(0)\n\t    if (code === PLUS || code === PLUS_URL_SAFE) return 62 // '+'\n\t    if (code === SLASH || code === SLASH_URL_SAFE) return 63 // '/'\n\t    if (code < NUMBER) return -1 // no match\n\t    if (code < NUMBER + 10) return code - NUMBER + 26 + 26\n\t    if (code < UPPER + 26) return code - UPPER\n\t    if (code < LOWER + 26) return code - LOWER + 26\n\t  }\n\n\t  function b64ToByteArray (b64) {\n\t    var i, j, l, tmp, placeHolders, arr\n\n\t    if (b64.length % 4 > 0) {\n\t      throw new Error('Invalid string. Length must be a multiple of 4')\n\t    }\n\n\t    // the number of equal signs (place holders)\n\t    // if there are two placeholders, than the two characters before it\n\t    // represent one byte\n\t    // if there is only one, then the three characters before it represent 2 bytes\n\t    // this is just a cheap hack to not do indexOf twice\n\t    var len = b64.length\n\t    placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0\n\n\t    // base64 is 4/3 + up to two characters of the original data\n\t    arr = new Arr(b64.length * 3 / 4 - placeHolders)\n\n\t    // if there are placeholders, only get up to the last complete 4 chars\n\t    l = placeHolders > 0 ? b64.length - 4 : b64.length\n\n\t    var L = 0\n\n\t    function push (v) {\n\t      arr[L++] = v\n\t    }\n\n\t    for (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t      tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\n\t      push((tmp & 0xFF0000) >> 16)\n\t      push((tmp & 0xFF00) >> 8)\n\t      push(tmp & 0xFF)\n\t    }\n\n\t    if (placeHolders === 2) {\n\t      tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\n\t      push(tmp & 0xFF)\n\t    } else if (placeHolders === 1) {\n\t      tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\n\t      push((tmp >> 8) & 0xFF)\n\t      push(tmp & 0xFF)\n\t    }\n\n\t    return arr\n\t  }\n\n\t  function uint8ToBase64 (uint8) {\n\t    var i\n\t    var extraBytes = uint8.length % 3 // if we have 1 byte left, pad 2 bytes\n\t    var output = ''\n\t    var temp, length\n\n\t    function encode (num) {\n\t      return lookup.charAt(num)\n\t    }\n\n\t    function tripletToBase64 (num) {\n\t      return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)\n\t    }\n\n\t    // go through the array every three bytes, we'll deal with trailing stuff later\n\t    for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t      temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n\t      output += tripletToBase64(temp)\n\t    }\n\n\t    // pad the end with zeros, but make sure to not forget the extra bytes\n\t    switch (extraBytes) {\n\t      case 1:\n\t        temp = uint8[uint8.length - 1]\n\t        output += encode(temp >> 2)\n\t        output += encode((temp << 4) & 0x3F)\n\t        output += '=='\n\t        break\n\t      case 2:\n\t        temp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])\n\t        output += encode(temp >> 10)\n\t        output += encode((temp >> 4) & 0x3F)\n\t        output += encode((temp << 2) & 0x3F)\n\t        output += '='\n\t        break\n\t      default:\n\t        break\n\t    }\n\n\t    return output\n\t  }\n\n\t  exports.toByteArray = b64ToByteArray\n\t  exports.fromByteArray = uint8ToBase64\n\t}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))\n\n\t},{}],39:[function(require,module,exports){\n\texports.read = function (buffer, offset, isLE, mLen, nBytes) {\n\t  var e, m\n\t  var eLen = nBytes * 8 - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var nBits = -7\n\t  var i = isLE ? (nBytes - 1) : 0\n\t  var d = isLE ? -1 : 1\n\t  var s = buffer[offset + i]\n\n\t  i += d\n\n\t  e = s & ((1 << (-nBits)) - 1)\n\t  s >>= (-nBits)\n\t  nBits += eLen\n\t  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t  m = e & ((1 << (-nBits)) - 1)\n\t  e >>= (-nBits)\n\t  nBits += mLen\n\t  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t  if (e === 0) {\n\t    e = 1 - eBias\n\t  } else if (e === eMax) {\n\t    return m ? NaN : ((s ? -1 : 1) * Infinity)\n\t  } else {\n\t    m = m + Math.pow(2, mLen)\n\t    e = e - eBias\n\t  }\n\t  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n\t}\n\n\texports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n\t  var e, m, c\n\t  var eLen = nBytes * 8 - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n\t  var i = isLE ? 0 : (nBytes - 1)\n\t  var d = isLE ? 1 : -1\n\t  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n\t  value = Math.abs(value)\n\n\t  if (isNaN(value) || value === Infinity) {\n\t    m = isNaN(value) ? 1 : 0\n\t    e = eMax\n\t  } else {\n\t    e = Math.floor(Math.log(value) / Math.LN2)\n\t    if (value * (c = Math.pow(2, -e)) < 1) {\n\t      e--\n\t      c *= 2\n\t    }\n\t    if (e + eBias >= 1) {\n\t      value += rt / c\n\t    } else {\n\t      value += rt * Math.pow(2, 1 - eBias)\n\t    }\n\t    if (value * c >= 2) {\n\t      e++\n\t      c /= 2\n\t    }\n\n\t    if (e + eBias >= eMax) {\n\t      m = 0\n\t      e = eMax\n\t    } else if (e + eBias >= 1) {\n\t      m = (value * c - 1) * Math.pow(2, mLen)\n\t      e = e + eBias\n\t    } else {\n\t      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n\t      e = 0\n\t    }\n\t  }\n\n\t  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n\t  e = (e << mLen) | m\n\t  eLen += mLen\n\t  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n\t  buffer[offset + i - d] |= s * 128\n\t}\n\n\t},{}],40:[function(require,module,exports){\n\tvar toString = {}.toString;\n\n\tmodule.exports = Array.isArray || function (arr) {\n\t  return toString.call(arr) == '[object Array]';\n\t};\n\n},{}]},{},[36]);\n\nexport default PANOLENS;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/panolens.js","import { Box3, Vector3, Vector2, BufferAttribute } from 'three';\n\nlet box = new Box3();\n\nfunction getSize( object ) {\n\n    box.setFromObject( object );\n\n    return box.getSize();\n}\n\nfunction getCenter( object ) {\n\n    box.setFromObject( object );\n\n    return box.getCenter();\n}\n\nfunction lightsDiff( lights, oldLights ) {\n\n}\n\nfunction toIndexed ( bufferGeometry ) {\n\n    var raw_positions = bufferGeometry.getAttribute( 'position' ).array;\n\n    var raw_uvs;\n    var hasUV = bufferGeometry.getAttribute( 'uv' ) !== undefined;\n    if ( hasUV ) raw_uvs = bufferGeometry.getAttribute( 'uv' ).array;\n\n    var raw_normals;\n    var hasNormal = bufferGeometry.getAttribute( 'normal' ) !== undefined;\n    if ( hasNormal ) raw_normals = bufferGeometry.getAttribute( 'normal' ).array;\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = [];\n\n    var face, face_normalss, face_uvs, tmp_indices;\n\n    var v0 = new Vector3();\n    var v1 = new Vector3();\n    var v2 = new Vector3();\n\n    var n0 = new Vector3();\n    var n1 = new Vector3();\n    var n2 = new Vector3();\n\n    var uv0 = new Vector2();\n    var uv1 = new Vector2();\n    var uv2 = new Vector2();\n\n    for ( var i = 0; i < raw_positions.length; i += 9 ) {\n\n        v0.x = raw_positions[ i ];\n        v0.y = raw_positions[ i + 1 ];\n        v0.z = raw_positions[ i + 2 ];\n\n        v1.x = raw_positions[ i + 3 ];\n        v1.y = raw_positions[ i + 4 ];\n        v1.z = raw_positions[ i + 5 ];\n\n        v2.x = raw_positions[ i + 6 ];\n        v2.y = raw_positions[ i + 7 ];\n        v2.z = raw_positions[ i + 8 ];\n\n        face = [ v0, v1, v2 ];\n\n        if ( hasNormal ) {\n\n            n0.x = raw_normals[ i ];\n            n0.y = raw_normals[ i + 1 ];\n            n0.z = raw_normals[ i + 2 ];\n\n            n1.x = raw_normals[ i + 3 ];\n            n1.y = raw_normals[ i + 4 ];\n            n1.z = raw_normals[ i + 5 ];\n\n            n2.x = raw_normals[ i + 6 ];\n            n2.y = raw_normals[ i + 7 ];\n            n2.z = raw_normals[ i + 8 ];\n\n            face_normalss = [ n0, n1, n2 ];\n\n        }\n\n        if ( hasUV ) {\n\n            uv0.x = raw_uvs[ i ];\n            uv0.y = raw_uvs[ i + 1 ];\n\n            uv1.x = raw_uvs[ i + 2 ];\n            uv1.y = raw_uvs[ i + 3 ];\n\n            uv2.x = raw_uvs[ i + 4 ];\n            uv2.y = raw_uvs[ i + 5 ];\n\n            face_uvs = [ uv0, uv1, uv2 ];\n\n        }\n\n        tmp_indices = [];\n\n        face.forEach( function ( v, i ) {\n\n            var id = exists( v, vertices );\n            if ( id == -1 ) {\n\n                id = vertices.length;\n                vertices.push( v.clone() );\n\n                if ( hasNormal ) normals.push( face_normalss[ i ].clone() );\n                if ( hasUV ) uvs.push( face_uvs[ i ].clone() );\n\n            }\n            tmp_indices.push( id );\n\n        } );\n\n        indices.push( tmp_indices[ 0 ], tmp_indices[ 1 ], tmp_indices[ 2 ] );\n\n    }\n\n    var positionBuffer = new Float32Array( vertices.length * 3 );\n    if ( hasNormal ) var normalBuffer = new Float32Array( vertices.length * 3 );\n    if ( hasUV ) var uvBuffer = new Float32Array( vertices.length * 2 );\n\n    var i2 = 0;\n    var i3 = 0;\n    for ( i = 0; i < vertices.length; i++ ) {\n\n        i3 = i * 3;\n\n        positionBuffer[ i3 ] = vertices[ i ].x;\n        positionBuffer[ i3 + 1 ] = vertices[ i ].y;\n        positionBuffer[ i3 + 2 ] = vertices[ i ].z;\n\n        if ( hasNormal ) {\n\n            normalBuffer[ i3 ] = normals[ i ].x;\n            normalBuffer[ i3 + 1 ] = normals[ i ].y;\n            normalBuffer[ i3 + 2 ] = normals[ i ].z;\n\n        }\n\n        if ( hasUV ) {\n\n            i2 = i * 2;\n            uvBuffer[ i2 ] = uvs[ i ].x;\n            uvBuffer[ i2 + 1 ] = uvs[ i ].y;\n\n        }\n\n    }\n\n    bufferGeometry.addAttribute( 'position', new BufferAttribute( positionBuffer, 3 ) );\n    if ( hasNormal ) bufferGeometry.addAttribute( 'normal', new BufferAttribute( normalBuffer, 3 ) );\n    if ( hasUV ) bufferGeometry.addAttribute( 'uv', new BufferAttribute( uvBuffer, 2 ) );\n    bufferGeometry.setIndex( new BufferAttribute( new Uint32Array( indices ), 1 ) );\n    return bufferGeometry;\n\n    function exists( v, vertices ) {\n        for ( var i = 0; i < vertices.length; i++ ) {\n            if ( v.equals( vertices[ i ] ) ) return i;\n        }\n        return -1;\n    }\n}\n\nexport { getSize, getCenter, toIndexed }\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js"],"sourceRoot":""}