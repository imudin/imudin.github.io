{"version":3,"sources":["webpack:///assets/js/app.3aee517276a28eace82b.js","webpack:///./demos/components/demo-block.vue?916f","webpack:///./demos/App.vue?0551","webpack:///./demos/pages/demo-cube-pano.vue","webpack:///./demos/pages/demo-pano.vue","webpack:///./demos/pages/demo-video-pano.vue","webpack:///./demos/components/demo-block.vue?6e72","webpack:///./demos/App.vue?8c56","webpack:///./demos/pages/demo-cube-pano.vue?d0a6","webpack:///./demos/pages/demo-pano.vue?c299","webpack:///./demos/pages/demo-video-pano.vue?e6e9","webpack:///./src/Pano.vue?e317","webpack:///./demos/components/demo-block.vue?9e40","webpack:///./demos/App.vue?0543","webpack:///./demos/components/demo-block.vue","webpack:///./src/Pano.vue","webpack:///./demos/router/index.js","webpack:///./demos/App.vue","webpack:///./demos/index.js","webpack:///./demos/pages/index.js","webpack:///App.vue","webpack:///demo-block.vue","webpack:///demo-cube-pano.vue","webpack:///demo-pano.vue","webpack:///demo-video-pano.vue","webpack:///Pano.vue","webpack:///./src/lib/panolens.js"],"names":["webpackJsonp","124","module","exports","__webpack_require__","push","i","125","126","308","Component","309","310","311","render","_vm","this","_h","$createElement","_c","_self","staticClass","_t","_v","ref","_s","_f","vueCode","htmlCode","staticRenderFns","312","attrs","to","313","vue-code","code","html-code","slot","type","source","on","on-load","onLoad","directives","name","rawName","value","expression","314","315","316","staticStyle","width","height","margin","border","padding","318","content","locals","319","36","37","60","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__pages__","use","routes","map","page","path","replace","toLowerCase","component","console","log","redirect","61","62","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_1__App_vue__","__WEBPACK_IMPORTED_MODULE_1__App_vue___default","n","__WEBPACK_IMPORTED_MODULE_2__router__","el","router","h","a","63","d","pages","__WEBPACK_IMPORTED_MODULE_0__demo_pano__","__WEBPACK_IMPORTED_MODULE_0__demo_pano___default","__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__","__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default","__WEBPACK_IMPORTED_MODULE_2__demo_video_pano__","__WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default","64","65","__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__","__WEBPACK_IMPORTED_MODULE_1_highlight_js__","__WEBPACK_IMPORTED_MODULE_1_highlight_js___default","codeHandler","props","String","default","mounted","highlightBlock","$refs","data","filters","val","components","66","__WEBPACK_IMPORTED_MODULE_0__components_demo_block__","__WEBPACK_IMPORTED_MODULE_0__components_demo_block___default","__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__","__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default","loading","methods","Pano","DemoBlock","67","68","69","__WEBPACK_IMPORTED_MODULE_0__lib_panolens__","Number","size","viewer","panorama","created","window","addEventListener","onResize","undefined","$el","offsetWidth","offsetHeight","Viewer","container","cameraFov","loadPano","watch","_this","$nextTick","l","f","r","b","u","CubePanorama","VideoPanorama","autoplay","ImagePanorama","add","that","$emit","70","process","global","require","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default","__WEBPACK_IMPORTED_MODULE_8_three__","PANOLENS","REVISION","enableInlineVideo","e","t","start","stop","requestAnimationFrame","cancelAnimationFrame","stopImmediatePropagation","get","set","dispatchEvent","Event","resolve","then","Audio","crossOrigin","src","currentSrc","m","Date","now","currentTime","k","T","o","driver","video","duration","s","readyState","HAVE_FUTURE_DATA","hasAudio","playbackRate","loop","networkState","NETWORK_IDLE","buffered","length","load","ended","pause","c","g","webkitDisplayingFullscreen","E","paused","play","updater","HAVE_ENOUGH_DATA","v","w","p","bind","muted","indexOf","y","everywhere","iPad","ipad","test","navigator","userAgent","classList","removeEventListener","platform","warn","document","head","style","matchMedia","matches","TWEEN","_tweens","getAll","removeAll","tween","remove","splice","update","time","preserve","hrtime","performance","getTime","Tween","object","_repeatDelayTime","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","Easing","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","_onStopCallback","properties","property","Array","concat","call","stopChainedTweens","end","numChainedTweens","delay","amount","repeat","times","repeatDelay","yoyo","easing","interpolation","chain","arguments","onStart","callback","onUpdate","onComplete","onStop","elapsed","charAt","parseFloat","isFinite","tmp","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","Back","Bounce","floor","fn","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","v0","v1","t2","root","define","domElement","getAutoRotationAngle","scope","autoRotateSpeed","getZoomScale","zoomSpeed","onMouseDown","event","momentumOn","momentumLeft","momentumUp","enabled","preventDefault","button","mouseButtons","ORBIT","noRotate","state","STATE","ROTATE","rotateStart","clientX","clientY","ZOOM","noZoom","DOLLY","dollyStart","PAN","noPan","panStart","NONE","onMouseMove","onMouseUp","startEvent","element","body","rotateEnd","rotateDelta","subVectors","rotateLeft","x","clientWidth","rotateSpeed","rotateUp","clientHeight","copy","eventPrevious","dollyEnd","dollyDelta","dollyIn","dollyOut","panEnd","panDelta","pan","endEvent","onMouseWheel","stopPropagation","delta","wheelDelta","detail","fov","maxFov","updateProjectionMatrix","minFov","changeEvent","onKeyUp","keyCode","keys","UP","keyUp","BOTTOM","keyBottom","LEFT","keyLeft","RIGHT","keyRight","onKeyDown","noKeys","momentumKeydownFactor","touchstart","touches","TOUCH_ROTATE","pageX","pageY","TOUCH_DOLLY","dx","dy","TOUCH_PAN","touchmove","scale","touchend","frameId","target","center","minDistance","maxDistance","Infinity","minZoom","maxZoom","keyPanSpeed","autoRotate","minPolarAngle","maxPolarAngle","momentumDampingFactor","momentumScalingFactor","minAzimuthAngle","maxAzimuthAngle","MIDDLE","theta","phi","panOffset","offset","phiDelta","thetaDelta","lastPosition","lastQuaternion","target0","clone","position0","position","zoom0","zoom","quat","setFromUnitVectors","up","quatInverse","inverse","setLastQuaternion","quaternion","getLastPosition","angle","panLeft","distance","te","matrix","elements","multiplyScalar","panUp","deltaX","deltaY","sub","targetDistance","tan","right","left","top","bottom","momentum","abs","dollyScale","max","min","ignoreUpdate","applyQuaternion","atan2","z","radius","lookAt","distanceToSquared","dot","reset","getPolarAngle","getAzimuthalAngle","prototype","constructor","camera","rotY","rotX","tempX","tempY","rotation","reorder","deviceOrientation","screenOrientation","alpha","alphaOffsetAngle","onDeviceOrientationChangeEvent","onScreenOrientationChangeEvent","orientation","onTouchStartEvent","onTouchMoveEvent","degToRad","updateAlphaOffsetAngle","setCameraQuaternion","beta","gamma","orient","vectorFingerY","zee","euler","q0","q1","fingerQY","fingerQX","setFromAxisAngle","multiply","setFromEuler","connect","disconnect","dispose","direction","axis","_sign","_cosh","exp","_sinhInverse","modify","geometry","thirdAxis","crossVectors","P","transpose","InverseP","getInverse","newVertices","oldVertices","anglesBetweenOldandNewVertices","meshGeometryBoundingBoxMaxx","meshGeometryBoundingBoxMinx","meshGeometryBoundingBoxMaxy","meshGeometryBoundingBoxMiny","vertices","applyMatrix4","meshWidthold","meshDepth","ParamB","oldMiddlex","oldMiddley","meshWidth","NewParamB","rightEdgePos","bendCenter","x0","y0","normalize","Q","addVectors","middle","O","acos","computeFaceNormals","verticesNeedUpdate","normalsNeedUpdate","fvNames","fl","faces","face","vertexNormals","vl","rotateMatrix","applyMatrix3","renderer","_camera","_scene","_stereo","aspect","_params","minFilter","magFilter","format","_renderTarget","scissorTest","texture","generateMipmaps","distortion","removeAttribute","toNonIndexed","positions","attributes","array","uvs","uv","count","positions2","Float32Array","uvs2","vector","scalar","material","mesh","setSize","pixelRatio","getPixelRatio","scene","updateMatrixWorld","parent","scissor","viewport","cameraL","cameraR","setEyeSeparation","eyeSep","getSize","autoClear","clear","setScissorTest","setScissor","setViewport","GSVPANO","PanoLoader","parameters","_zoom","_panoId","_parameters","_panoClient","google","maps","StreetViewService","_count","_total","_canvas","_ctx","_wc","_hc","copyright","levelsW","levelsH","widths","heights","gl","canvas","createElement","getContext","error","maxW","maxH","maxTexSize","getParameter","MAX_TEXTURE_SIZE","setProgress","loaded","total","onProgress","throwError","message","onError","adaptTextureToZoom","ceil","ptr","composeFromTile","px","py","drawImage","progress","round","panoId","onPanoramaLoad","loadFromId","id","composePanorama","url","self","useWebGL","loadTexture","img","Image","panoid","getPanoramaById","result","status","StreetViewStatus","OK","onPanoramaData","location","pano","onNoPanoramaData","setZoom","DataImageSource","DataImage","Info","Arrow","FullscreenEnter","FullscreenLeave","VideoPlay","VideoPause","WhiteTile","ReticleIdle","Setting","ChevronRight","Check","ViewIndicator","ReticleDwell","Controls","DEVICEORIENTATION","Modes","UNKNOWN","NORMAL","CARDBOARD","STEREO","checkTouchSupported","msMaxTouchPoints","ImageLoader","onImageLoaded","urlCreator","revokeObjectURL","image","cached","request","arrayBufferView","blob","reference","iconName","hasOwnProperty","setTimeout","URL","webkitURL","createElementNS","XMLHttpRequest","open","responseType","onprogress","lengthComputable","onloadend","Uint8Array","response","Blob","createObjectURL","send","TextureLoader","needsUpdate","CubeTextureLoader","urls","all","loadings","index","images","StereographicShader","uniforms","tDiffuse","resolution","transform","vertexShader","join","fragmentShader","Panorama","ImageQualityLow","ImageQualityFair","ImageQualityMedium","ImageQualityHigh","ImageQualitySuperHigh","animationDuration","defaultInfospotSize","linkedSpots","isInfospotVisible","linkingImageURL","linkingImageScale","side","visible","infospotAnimation","fadeIn","setContainer","onClick","setupTransitions","invertedObject","Infospot","method","scalePlaceHolder","intersects","traverse","HTMLElement","children","forEach","child","getZoomLevel","innerWidth","updateTexture","toggleInfospotVisibility","isVisible","show","hide","setLinkingImage","link","imageScale","imageSrc","spot","toPanorama","fadeInAnimation","fadeOutAnimation","enterTransition","leaveTransition","opacity","fadeOut","onEnter","onLeave","recursiveDispose","transparent","HTMLImageElement","GoogleStreetviewPanorama","gsvLoader","loadRequested","setupGoogleMapAPI","loadGSVLoader","script","onreadystatechange","setGSVLoader","onload","getElementsByTagName","appendChild","getGSVLoader","edgeLength","shader","JSON","parse","BasicPanorama","tile","options","playsinline","videoElement","videoRenderObject","videoProgress","isIOS","isMobile","pauseVideo","resumeVideoProgress","toggleVideo","setVideoCurrentTime","setAttribute","onloadeddata","setVideoTexture","querySelectorAll","ontimeupdate","resetVideo","videoTexture","isVideoPaused","percentage","playVideo","isVideoMuted","muteVideo","unmuteVideo","getVideoElement","EmptyPanorama","color","LittlePlanet","ratio","EPS","createGeometry","createMaterial","dragging","userMouse","quatA","quatB","quatCur","quatSlerp","vectorX","vectorY","onWindowResize","registerMouseEvents","onContextMenu","unregisterMouseEvents","pinchDistance","onUpdateCallback","angleX","angleY","addZoomDelta","lowerBound","upperBound","slerp","makeRotationFromQuaternion","ImageLittlePlanet","Reticle","autoSelect","idleImageUrl","dwellImageUrl","dwellTime","dwellSpriteAmount","dwellInterval","IDLE","DWELLING","scaleIdle","scaleDwell","textureLoaded","idleTexture","dwellTexture","depthTest","currentTile","startTime","renderOrder","timerId","updateStatus","loadTextures","setupDwellSprite","select","completeCallback","completeDwelling","updateDwelling","clearTimer","wrapS","startDwelling","elasped","cancelDwelling","Tile","widthSegments","heightSegments","forceDirection","forceAxis","forceAngle","bendModifier","entity","animationFadeOut","animationFadeIn","animationTranslation","tweens","bend","originalGeometry","setEntity","unbend","toState","ripple","TileGroup","tileArray","verticalGap","depthGap","v_gap","d_gap","animationEasing","visibleDelta","setTexture","originalPosition","updateVisbility","imageArray","outline","updateAllTexture","scrollUp","tiles","scrollDown","getIndex","getTileCount","sharedFont","sharedTexture","pendingQueue","SpriteText","text","maxWidth","addText","generateTextGeometry","generateSDFShader","setBMFont","font","anisotropy","pop","textAnchor","computeBoundingBox","computeBoundingSphere","layout","textMesh","getLayout","Widget","DEFAULT_TRANSITION","TOUCH_ENABLED","PREVENT_EVENT_HANDLER","barElement","fullscreenElement","settingElement","mainMenu","activeMainItem","activeSubMenu","mask","addControlBar","bar","styleTranslate","styleOpacity","gradientStyle","float","webkitTransform","msTransform","background","transition","pointerEvents","isHidden","toggle","menu","createDefaultMenu","createMainMenu","createMask","removeChild","deactivate","handler","title","subMenu","addControlButton","createFullscreenButton","createSettingButton","createVideoControl","display","onTap","activated","activate","item","createCustomItem","backgroundImage","webkitTransition","_width","changeSize","unslideAll","tapSkipped","isFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","onFullScreenChange","stylesheetId","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","querySelector","sheet","innerHTML","controlButton","createVideoControlButton","seekBar","createVideoControlSeekbar","isDragging","mouseX","changedTouches","percentageNow","parseInt","progressElement","addControlListeners","onVideoControlDrag","percentageNext","onVideoControlStop","removeControlListeners","progressElementControl","getBoundingClientRect","offsetX","onDispose","backgroundColor","borderRadius","marginTop","createMenuItem","textContent","textDecoration","cursor","slide","unslide","setIcon","icon","setSelectionTitle","selection","addSelection","fontSize","fontWeight","addIcon","flip","backgroundSize","addSubMenu","items","createSubMenu","createMenuItemHeader","header","borderBottom","paddingBottom","menus","onNextTick","slideAll","parentElement","createMenu","addItem","paddingLeft","setActiveItem","activeItem","addHeader","fontFamily","visibility","boxShadow","overflow","willChange","backgroundRepeat","backgroundPosition","webkitUserSelect","MozUserSelect","userSelect","filter","webkitFilter","mergeStyleOptions","animated","postLoad","naturalWidth","naturalHeight","startScale","scaleUpAnimation","scaleFactor","scaleDownAnimation","isHovering","cursorStyle","mode","HANDLER_FOCUS","showAnimation","hideAnimation","onHover","onHoverStart","onHoverEnd","onDualEyeEffect","onDismiss","setFocusMethod","getContainer","lockHoverElement","unlockHoverElement","mouseEvent","_height","locked","halfWidth","halfHeight","cloneNode","translateElement","verticalDelta","setElementStyle","setText","setCursorHoverStyle","addHoverText","maxHeight","textShadow","addHoverElement","removeHoverElement","focus","controlBar","controlButtons","autoHideControlBar","autoHideInfospot","horizontalView","clickTolerance","reverseDragging","enableReticle","autoReticleSelect","viewIndicator","indicatorSize","output","innerHeight","antialias","viewIndicatorSize","reticle","tempEnableReticle","OrbitControls","DeviceOrientationControls","CardboardEffect","StereoEffect","controls","effect","widget","hoverObject","infospot","pressEntityObject","pressObject","raycaster","raycasterPoint","updateCallbacks","requestAnimationId","cameraFrustum","cameraViewProjectionMatrix","outputDivElement","HANDLER_MOUSE_DOWN","HANDLER_MOUSE_UP","HANDLER_MOUSE_MOVE","HANDLER_WINDOW_RESIZE","HANDLER_KEY_DOWN","HANDLER_KEY_UP","HANDLER_TAP","OUTPUT_INFOSPOT","tweenLeftAnimation","tweenUpAnimation","setPixelRatio","devicePixelRatio","setClearColor","sortObjects","passiveRendering","control","addReticle","addDefaultControlBar","addViewIndicator","reverseDraggingDirection","enableReticleControl","registerMouseAndTouchEvents","addOutputElement","registerEventListeners","animate","eventHandler","addPanoramaEventListener","setPanorama","buttonName","leavingPanorama","hideInfospot","afterEnterComplete","dispatchEventToChildren","activateWidgetItem","controlIndex","ControlMenuItem","ModeMenuItem","enableEffect","disableEffect","disableReticleControl","unregisterMouseAndTouchEvents","registerReticleEvent","updateReticleEvent","unregisterReticleEvent","toggleVideoPlay","onVideoUpdate","addUpdateCallback","removeUpdateCallback","showVideoWidget","hideVideoWidget","updateVideoPlayButton","setCameraControl","getControl","getScene","getCamera","getRenderer","getControlName","getNextControlName","getNextControlIndex","nextIndex","setCameraFov","enableControl","disableControl","toggleNextControl","getScreenVector","worldVector","widthHalf","heightHalf","project","checkSpriteInViewport","sprite","matrixWorldInverse","matrixWorld","multiplyMatrices","projectionMatrix","setFromMatrix","intersectsSprite","tweenControlCenter","ha","va","chv","cvv","hv","vv","vptc","ov","nv","getWorldDirection","getWorldPosition","angleTo","tweenControlCenterByObject","isUnderScalePlaceHolder","traverseAncestors","ancestor","invertXVector","windowWidth","windowHeight","expand","contains","documentElement","outputInfospotPosition","point","panoramaWorldPosition","outputPosition","intersectObject","toFixed","info","onTarget","toggleControlBar","intersect_entity","intersect","offsetLeft","offsetTop","setFromCamera","intersectObjects","getConvertedIntersect","passThrough","key","onChange","centerX","centerY","unregisterEventListeners","destory","onPanoramaDispose","loadAsyncRequest","loadViewIndicator","asyncEvent","viewIndicatorDiv","responseXML","indicator","setIndicatorD","currentPanoAngle","fovAngle","leftAngle","rightAngle","leftX","leftY","rightX","rightY","indicatorD","indicatorOnMouseEnter","indicatorOnMouseLeave","appendControlItem","option","group","Error","1","TextGeometry","opt","Base","_opt","assign","createLayout","inherits","createIndices","buffer","utils","TypeError","flipY","texWidth","common","scaleW","texHeight","scaleH","glyphs","glyph","bitmap","visibleGlyphs","indices","clockwise","attr","multipage","boundingSphere","itemSize","computeSphere","isNaN","boundingBox","bbox","makeEmpty","computeBox","./lib/utils","./lib/vertices","layout-bmfont-text","object-assign","quad-indices","three-buffer-vertex-data","2","bounds","box","minX","minY","maxX","maxY","3","bw","bh","u0","u1","xoffset","yoffset","4","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor","5","TextLayout","_measure","computeMetrics","addGetter","wrapper","Function","getGlyphById","chars","glyphIdx","findChar","getXHeight","X_HEIGHTS","charCodeAt","idx","getMGlyph","M_WIDTHS","getCapHeight","CAP_HEIGHTS","getKerning","kernings","table","kern","first","second","getAlignType","align","ALIGN_CENTER","ALIGN_RIGHT","ALIGN_LEFT","wordWrap","xtend","number","TAB_ID","SPACE_ID","measure","tabSize","_setupSpaceGlyphs","lines","minWidth","maxLineWidth","reduce","prev","line","lineHeight","baseline","base","descender","letterSpacing","_descender","_baseline","_xHeight","_capHeight","_lineHeight","_ascender","lineIndex","lastGlyph","lineWidth","getGlyph","tx","xadvance","_linesTotal","_fallbackSpaceGlyph","_fallbackTabGlyph","space","tabWidth","curPen","curWidth","nextPen","nextWidth","as-number","indexof-property","word-wrapper","6","num","def","7","8","idxOf","chr","isWhitespace","whitespace","pre","lineStart","isNewline","newline","lineEnd","measured","greedy","testWidth","MAX_VALUE","newLine","newlineChar","nextStart","monospace","substring","9","extend","10","Buffer","isArrayBuffer","arr","toString","getBinaryOpts","xml2","req","overrideMimeType","xhr","noop","parseASCII","parseXML","readBinary","isBinaryFormat","cb","uri","binary","err","res","statusCode","isBuffer","encoding","trim","headers","./lib/is-binary","parse-bmfont-ascii","parse-bmfont-binary","parse-bmfont-xml","11","equal","HEADER","buf","slice","buffer-equal","12","equals","13","splitLine","split","str","match","dt","parseData","out","parseIntList","lineData","file","14","readBlock","blockID","readUInt8","blockSize","readInt32LE","readInfo","readCommon","readPages","readChars","readKernings","readInt16LE","bitField","smooth","unicode","italic","bold","fixedHeight","charset","stretchH","readUInt16LE","aa","readInt8","spacing","readStringNT","packed","alphaChnl","redChnl","greenChnl","blueChnl","readNameNT","len","char","off","readUInt32LE","chnl","pos","every","byte","15","getAttribs","getAttribList","dict","attrib","mapName","nodeName","nodeValue","attribs","NAME_MAP","parseAttributes","parseFromString","scaleh","scalew","stretchh","lineheight","alphachnl","redchnl","greenchnl","bluechnl","xmlRoot","pageRoot","getAttribute","childTag","./parse-attribs","xml-parse-from-string","16","obj","17","DOMParser","ActiveXObject","xmlDoc","async","loadXML","div","18","isEmpty","initParams","params","isFunction","createXHR","_createXHR","readystatechange","loadFunc","getBody","responseText","isJson","errorFunc","evt","clearTimeout","timeoutTimer","failureResponse","aborted","useXDR","rawRequest","getAllResponseHeaders","parseHeaders","once","cors","XDomainRequest","sync","json","onerror","ontimeout","username","password","withCredentials","timeout","abort","setRequestHeader","beforeSend","iterator","toUpperCase","global/window","is-function","parse-headers","19","20","string","alert","confirm","prompt","21","called","apply","proto","22","list","context","forEachArray","forEachString","forEachObject","23","24","isArray","arg","row","for-each","25","dup","26","toObject","propIsEnumerable","propertyIsEnumerable","from","symbols","27","dtype","anArray","CW","CCW","dir","numIndices","j","an-array","is-buffer","28","BYTES_PER_ELEMENT","29","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Float64Array","Uint8ClampedArray","30","_isBuffer","31","setIndex","isR69","newAttrib","updateAttribute","addAttribute","rebuildAttribute","flatten","attribLength","flatten-vertex-data","32","flattenVertexData","dim","dstLength","Ctor","33","34","alphaTest","precision","35","loadFont","tex","load-bmfont","createText","SDFShader","loadBMFont","fontObject","../","../shaders/sdf","./load","kMaxLength","TYPED_ARRAY_SUPPORT","fromNumber","fromString","fromObject","allocate","checked","byteLength","write","fromBuffer","fromArray","ArrayBuffer","fromTypedArray","fromArrayBuffer","fromArrayLike","fromJsonObject","__proto__","poolSize","rootParent","RangeError","SlowBuffer","subject","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","binarySlice","base64Slice","utf16leSlice","hexWrite","remaining","strLen","parsed","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","binaryWrite","base64Write","ucs2Write","utf16leToBytes","base64","fromByteArray","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","stringtrim","INVALID_BASE64_RE","units","leadSurrogate","byteArray","hi","lo","toByteArray","dst","INSPECT_MAX_BYTES","foo","subarray","compare","isEncoding","inspect","byteOffset","arrayIndexOf","foundIndex","swap","toJSON","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt16BE","readUInt32BE","readIntLE","readIntBE","readInt16BE","readInt32BE","readFloatLE","read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","fill","base64-js","isarray","38","decode","elt","PLUS","PLUS_URL_SAFE","SLASH","SLASH_URL_SAFE","NUMBER","UPPER","LOWER","b64ToByteArray","b64","L","placeHolders","Arr","uint8ToBase64","uint8","encode","lookup","temp","extraBytes","base64js","39","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","40"],"mappings":"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","file":"assets/js/app.3aee517276a28eace82b.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 124:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(57)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:70%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:30%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .hljs{background:transparent}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 125:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(57)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.demos,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.demos-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.demos-header .title{font-weight:700;font-size:18px;display:inline-block}.demos-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.demos-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.demos-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.demos-menu .demos-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.demos-menu .demos-menu-item>a{display:block;width:100%;height:100%}.demos-menu .demos-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.demos-menu .demos-menu-item:hover>a{color:#39f}.demos-pages{height:100%;overflow:hidden}.demo-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.demo-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;animation:loading-rotate .75s 0s linear infinite}.demo-loading:after,.demo-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.demo-loading:after{height:100%;width:0}@keyframes loading-rotate{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(.6)}to{transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 126:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 308:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(66),\n  /* template */\n  __webpack_require__(313),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 309:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(67),\n  /* template */\n  __webpack_require__(314),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 310:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(68),\n  /* template */\n  __webpack_require__(315),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 311:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"             \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n        \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"          \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)) + \"\\n          \")]), _vm._v(\"\\n        \")])])])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 312:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demos\"\n  }, [_c('div', {\n    staticClass: \"demos-content\"\n  }, [_c('ul', {\n    staticClass: \"demos-menu\"\n  }, [_c('li', {\n    staticClass: \"demos-menu-title\"\n  }, [_vm._v(\"demos\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-pano\"\n    }\n  }, [_vm._v(\"basic panorama\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-cube-pano\"\n    }\n  }, [_vm._v(\"Cube Faces\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-video-pano\"\n    }\n  }, [_vm._v(\"Video Pano\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demos-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 313:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"cube\",\n      \"source\": \"assets/faces/pano_%s.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 314:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"source\": \"assets/equirectangular.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 315:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"video\",\n      \"source\": \"assets/ClashofClans.mp4\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 316:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 318:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(124);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(59)(\"56304fc1\", content, true);\n\n/***/ }),\n\n/***/ 319:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(125);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(59)(\"48e2ad6a\", content, true);\n\n/***/ }),\n\n/***/ 36:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(318)\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(65),\n  /* template */\n  __webpack_require__(311),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 37:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(69),\n  /* template */\n  __webpack_require__(316),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 60:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(317);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages__ = __webpack_require__(63);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\nvar routes = __WEBPACK_IMPORTED_MODULE_2__pages__[\"a\" /* pages */].map(function (page) {\n  var name = page.name;\n  return {\n    path: '/' + name.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase(),\n    name: name,\n    component: page\n  };\n});\n\nconsole.log(routes);\n\nroutes.push({\n  path: '*',\n  redirect: '/demo-pano'\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({ routes: routes }));\n\n/***/ }),\n\n/***/ 61:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(319)\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(64),\n  /* template */\n  __webpack_require__(312),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(60);\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App_vue___default.a);\n  }\n});\n\n/***/ }),\n\n/***/ 63:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return pages; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_pano__ = __webpack_require__(309);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__demo_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__ = __webpack_require__(308);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_video_pano__ = __webpack_require__(310);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__demo_video_pano__);\n\n\n\n\nvar pages = [__WEBPACK_IMPORTED_MODULE_0__demo_pano___default.a, __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default.a, __WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default.a];\n\n\n\n/***/ }),\n\n/***/ 64:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'App'\n});\n\n/***/ }),\n\n/***/ 65:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__ = __webpack_require__(126);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js__ = __webpack_require__(128);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_highlight_js__);\n\n\n\n\n\nvar codeHandler = function codeHandler(code) {\n  var scripts = '\\n  <script src=\"vue.js\"></script> \\n  <script src=\"vue-vr.min.js\"></script>';\n  return code.replace(/#scripts#/ig, scripts);\n};\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'App',\n  props: {\n    vueCode: {\n      type: String,\n      default: ''\n    },\n    htmlCode: {\n      type: String,\n      default: '// TODO'\n    }\n  },\n  mounted: function mounted() {\n    __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.vueCode);\n    __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.htmlCode);\n  },\n  data: function data() {\n    return {};\n  },\n\n  filters: {\n    code: function code(val) {\n      return codeHandler(val);\n    }\n  },\n  components: {}\n});\n\n/***/ }),\n\n/***/ 66:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        type=\\'cube\\'\\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\\n</template>\\n<script>\\n    import { Pano } from \\'vuejs-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n </script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'cube\\'\\n            source=\"assets/faces/pano_%s.jpg\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'DemoCubePano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 67:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        src=\"assets/equirectangular.jpg\">\\n    </Pano>\\n</template>\\n\\n<script>\\n    import { Pano } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'cube\\'\\n            source=\"assets/equirectangular.jpg\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'DemoPano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 68:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        type=\\'video\\'\\n        source=\"assets/ClashofClans.mp4\">\\n    </Pano>\\n</template>\\n\\n<script>\\n    import { Pano } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n</script>';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'video\\'\\n            source=\"assets/ClashofClans.mp4\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>';\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'DemoVideoPano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 69:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__lib_panolens__ = __webpack_require__(70);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'Pano',\n  props: {\n    source: {\n      type: String,\n      default: ''\n    },\n    type: {\n      type: String,\n      default: 'image'\n    },\n    width: {\n      type: Number,\n      default: 100\n    },\n    height: {\n      type: Number,\n      default: 100\n    }\n  },\n  data: function data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      viewer: null,\n      panorama: null\n    };\n  },\n  created: function created() {\n    window.addEventListener('resize', this.onResize, false);\n  },\n  mounted: function mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].Viewer({\n      container: this.$el,\n      cameraFov: 100\n    });\n\n    this.loadPano();\n  },\n\n  watch: {\n    source: function source() {\n      if (!this.viewer) return;\n      if (!this.panorama) return;\n      this.loadPano();\n    }\n  },\n  methods: {\n    onResize: function onResize() {\n      var _this = this;\n\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(function () {\n          _this.size = {\n            width: _this.$el.offsetWidth,\n            height: _this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    loadPano: function loadPano() {\n      console.log('this.source = ' + this.source);\n      if (!this.source) return;\n\n      switch (this.type) {\n        case 'cube':\n          var l = this.source.replace('%s', 'l');\n          var f = this.source.replace('%s', 'f');\n          var r = this.source.replace('%s', 'r');\n          var b = this.source.replace('%s', 'b');\n          var u = this.source.replace('%s', 'u');\n          var d = this.source.replace('%s', 'd');\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].CubePanorama([r, l, u, d, f, b]);\n          break;\n        case 'video':\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].VideoPanorama(this.source, { autoplay: true });\n          console.log('this is video');\n          break;\n        default:\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_0__lib_panolens__[\"a\" /* default */].ImagePanorama(this.source);\n          break;\n      }\n\n      this.viewer.add(this.panorama);\n\n      var that = this;\n      this.panorama.addEventListener('load', function () {\n        that.$emit('on-load');\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process, module, global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__ = __webpack_require__(73);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__ = __webpack_require__(71);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__ = __webpack_require__(74);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_three__ = __webpack_require__(306);\nvar require;var require;\n\n\n\n\n\n\n\n\n\nvar PANOLENS = { REVISION: '9' };\n\nvar enableInlineVideo = function () {\n  'use strict';\n\n  function e(e, i, n, r) {\n    function t(n) {\n      d = i(t, r), e(n - (a || n)), a = n;\n    }var d, a;return { start: function start() {\n        d || t(0);\n      }, stop: function stop() {\n        n(d), d = null, a = 0;\n      } };\n  }function i(i) {\n    return e(i, requestAnimationFrame, cancelAnimationFrame);\n  }function n(e, i, n) {\n    function r(r) {\n      n && !n(e, i) || r.stopImmediatePropagation();\n    }return e.addEventListener(i, r), r;\n  }function r(e, i, n, r) {\n    function t() {\n      return n[i];\n    }function d(e) {\n      n[i] = e;\n    }r && d(e[i]), __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default()(e, i, { get: t, set: d });\n  }function t(e, i, n) {\n    n.addEventListener(i, function () {\n      return e.dispatchEvent(new Event(i));\n    });\n  }function d(e, i) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default.a.resolve().then(function () {\n      e.dispatchEvent(new Event(i));\n    });\n  }function a(e) {\n    var i = new Audio();return t(e, 'play', i), t(e, 'playing', i), t(e, 'pause', i), i.crossOrigin = e.crossOrigin, i.src = e.src || e.currentSrc || 'data:', i;\n  }function u(e, i, n) {\n    (m || 0) + 200 < Date.now() && (e[h] = !0, m = Date.now()), n || (e.currentTime = i), k[++T % 3] = 100 * i | 0;\n  }function o(e) {\n    return e.driver.currentTime >= e.video.duration;\n  }function s(e) {\n    var i = this;i.video.readyState >= i.video.HAVE_FUTURE_DATA ? (i.hasAudio || (i.driver.currentTime = i.video.currentTime + e * i.video.playbackRate / 1e3, i.video.loop && o(i) && (i.driver.currentTime = 0)), u(i.video, i.driver.currentTime)) : i.video.networkState === i.video.NETWORK_IDLE && i.video.buffered.length === 0 && i.video.load(), i.video.ended && (delete i.video[h], i.video.pause(!0));\n  }function c() {\n    var e = this,\n        i = e[g];if (e.webkitDisplayingFullscreen) return void e[E]();i.driver.src !== 'data:' && i.driver.src !== e.src && (u(e, 0, !0), i.driver.src = e.src), e.paused && (i.paused = !1, e.buffered.length === 0 && e.load(), i.driver.play(), i.updater.start(), i.hasAudio || (d(e, 'play'), i.video.readyState >= i.video.HAVE_ENOUGH_DATA && d(e, 'playing')));\n  }function v(e) {\n    var i = this,\n        n = i[g];n.driver.pause(), n.updater.stop(), i.webkitDisplayingFullscreen && i[w](), n.paused && !e || (n.paused = !0, n.hasAudio || d(i, 'pause'), i.ended && !i.webkitDisplayingFullscreen && (i[h] = !0, d(i, 'ended')));\n  }function p(e, n) {\n    var r = {};e[g] = r, r.paused = !0, r.hasAudio = n, r.video = e, r.updater = i(s.bind(r)), n ? r.driver = a(e) : (e.addEventListener('canplay', function () {\n      e.paused || d(e, 'playing');\n    }), r.driver = { src: e.src || e.currentSrc || 'data:', muted: !0, paused: !0, pause: function pause() {\n        r.driver.paused = !0;\n      }, play: function play() {\n        r.driver.paused = !1, o(r) && u(e, 0);\n      }, get ended() {\n        return o(r);\n      } }), e.addEventListener('emptied', function () {\n      var i = !r.driver.src || r.driver.src === 'data:';r.driver.src && r.driver.src !== e.src && (u(e, 0, !0), r.driver.src = e.src, i || !n && e.autoplay ? r.driver.play() : r.updater.stop());\n    }, !1), e.addEventListener('webkitbeginfullscreen', function () {\n      e.paused ? n && r.driver.buffered.length === 0 && r.driver.load() : (e.pause(), e[E]());\n    }), n && (e.addEventListener('webkitendfullscreen', function () {\n      r.driver.currentTime = e.currentTime;\n    }), e.addEventListener('seeking', function () {\n      k.indexOf(100 * e.currentTime | 0) < 0 && (r.driver.currentTime = e.currentTime);\n    }));\n  }function l(e) {\n    var i = e[h];return delete e[h], !e.webkitDisplayingFullscreen && !i;\n  }function f(e) {\n    var i = e[g];e[E] = e.play, e[w] = e.pause, e.play = c, e.pause = v, r(e, 'paused', i.driver), r(e, 'muted', i.driver, !0), r(e, 'playbackRate', i.driver, !0), r(e, 'ended', i.driver), r(e, 'loop', i.driver, !0), n(e, 'seeking', function (e) {\n      return !e.webkitDisplayingFullscreen;\n    }), n(e, 'seeked', function (e) {\n      return !e.webkitDisplayingFullscreen;\n    }), n(e, 'timeupdate', l), n(e, 'ended', l);\n  }function y(e, i) {\n    if (void 0 === i && (i = {}), !e[g]) {\n      if (!i.everywhere) {\n        if (!b) return;if (!(i.iPad || i.ipad ? /iPhone|iPod|iPad/ : /iPhone|iPod/).test(navigator.userAgent)) return;\n      }e.pause();var n = e.autoplay;e.autoplay = !1, p(e, !e.muted), f(e), e.classList.add('IIV'), e.muted && n && (e.play(), e.addEventListener('playing', function i() {\n        e.autoplay = !0, e.removeEventListener('playing', i);\n      })), /iPhone|iPod|iPad/.test(navigator.platform) || console.warn('iphone-inline-video is not guaranteed to work in emulated environments');\n    }\n  }var m,\n      b = (typeof document === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default()(document)) === 'object' && 'object-fit' in document.head.style && !matchMedia('(-webkit-video-playable-inline)').matches,\n      g = 'bfred-it:iphone-inline-video',\n      h = 'bfred-it:iphone-inline-video:event',\n      E = 'bfred-it:iphone-inline-video:nativeplay',\n      w = 'bfred-it:iphone-inline-video:nativepause',\n      k = [],\n      T = 0;return y;\n}();\n\n\nvar TWEEN = TWEEN || function () {\n  var _tweens = [];\n\n  return {\n\n    getAll: function getAll() {\n      return _tweens;\n    },\n\n    removeAll: function removeAll() {\n      _tweens = [];\n    },\n\n    add: function add(tween) {\n      _tweens.push(tween);\n    },\n\n    remove: function remove(tween) {\n      var i = _tweens.indexOf(tween);\n\n      if (i !== -1) {\n        _tweens.splice(i, 1);\n      }\n    },\n\n    update: function update(time, preserve) {\n      if (_tweens.length === 0) {\n        return false;\n      }\n\n      var i = 0;\n\n      time = time !== undefined ? time : TWEEN.now();\n\n      while (i < _tweens.length) {\n        if (_tweens[i].update(time) || preserve) {\n          i++;\n        } else {\n          _tweens.splice(i, 1);\n        }\n      }\n\n      return true;\n    }\n  };\n}();\n\nif (typeof window === 'undefined' && typeof process !== 'undefined') {\n  TWEEN.now = function () {\n    var time = process.hrtime();\n\n    return time[0] * 1000 + time[1] / 1000000;\n  };\n} else if (typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined) {\n    TWEEN.now = window.performance.now.bind(window.performance);\n  } else if (Date.now !== undefined) {\n      TWEEN.now = Date.now;\n    } else {\n        TWEEN.now = function () {\n          return new Date().getTime();\n        };\n      }\n\nTWEEN.Tween = function (object) {\n  var _object = object;\n  var _valuesStart = {};\n  var _valuesEnd = {};\n  var _valuesStartRepeat = {};\n  var _duration = 1000;\n  var _repeat = 0;\n  var _repeatDelayTime;\n  var _yoyo = false;\n  var _isPlaying = false;\n  var _reversed = false;\n  var _delayTime = 0;\n  var _startTime = null;\n  var _easingFunction = TWEEN.Easing.Linear.None;\n  var _interpolationFunction = TWEEN.Interpolation.Linear;\n  var _chainedTweens = [];\n  var _onStartCallback = null;\n  var _onStartCallbackFired = false;\n  var _onUpdateCallback = null;\n  var _onCompleteCallback = null;\n  var _onStopCallback = null;\n\n  this.to = function (properties, duration) {\n    _valuesEnd = properties;\n\n    if (duration !== undefined) {\n      _duration = duration;\n    }\n\n    return this;\n  };\n\n  this.start = function (time) {\n    TWEEN.add(this);\n\n    _isPlaying = true;\n\n    _onStartCallbackFired = false;\n\n    _startTime = time !== undefined ? time : TWEEN.now();\n    _startTime += _delayTime;\n\n    for (var property in _valuesEnd) {\n      if (_valuesEnd[property] instanceof Array) {\n        if (_valuesEnd[property].length === 0) {\n          continue;\n        }\n\n        _valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n      }\n\n      if (_object[property] === undefined) {\n        continue;\n      }\n\n      _valuesStart[property] = _object[property];\n\n      if (_valuesStart[property] instanceof Array === false) {\n        _valuesStart[property] *= 1.0;\n      }\n\n      _valuesStartRepeat[property] = _valuesStart[property] || 0;\n    }\n\n    return this;\n  };\n\n  this.stop = function () {\n    if (!_isPlaying) {\n      return this;\n    }\n\n    TWEEN.remove(this);\n    _isPlaying = false;\n\n    if (_onStopCallback !== null) {\n      _onStopCallback.call(_object, _object);\n    }\n\n    this.stopChainedTweens();\n    return this;\n  };\n\n  this.end = function () {\n    this.update(_startTime + _duration);\n    return this;\n  };\n\n  this.stopChainedTweens = function () {\n    for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n      _chainedTweens[i].stop();\n    }\n  };\n\n  this.delay = function (amount) {\n    _delayTime = amount;\n    return this;\n  };\n\n  this.repeat = function (times) {\n    _repeat = times;\n    return this;\n  };\n\n  this.repeatDelay = function (amount) {\n    _repeatDelayTime = amount;\n    return this;\n  };\n\n  this.yoyo = function (yoyo) {\n    _yoyo = yoyo;\n    return this;\n  };\n\n  this.easing = function (easing) {\n    _easingFunction = easing;\n    return this;\n  };\n\n  this.interpolation = function (interpolation) {\n    _interpolationFunction = interpolation;\n    return this;\n  };\n\n  this.chain = function () {\n    _chainedTweens = arguments;\n    return this;\n  };\n\n  this.onStart = function (callback) {\n    _onStartCallback = callback;\n    return this;\n  };\n\n  this.onUpdate = function (callback) {\n    _onUpdateCallback = callback;\n    return this;\n  };\n\n  this.onComplete = function (callback) {\n    _onCompleteCallback = callback;\n    return this;\n  };\n\n  this.onStop = function (callback) {\n    _onStopCallback = callback;\n    return this;\n  };\n\n  this.update = function (time) {\n    var property;\n    var elapsed;\n    var value;\n\n    if (time < _startTime) {\n      return true;\n    }\n\n    if (_onStartCallbackFired === false) {\n      if (_onStartCallback !== null) {\n        _onStartCallback.call(_object, _object);\n      }\n\n      _onStartCallbackFired = true;\n    }\n\n    elapsed = (time - _startTime) / _duration;\n    elapsed = elapsed > 1 ? 1 : elapsed;\n\n    value = _easingFunction(elapsed);\n\n    for (property in _valuesEnd) {\n      if (_valuesStart[property] === undefined) {\n        continue;\n      }\n\n      var start = _valuesStart[property] || 0;\n      var end = _valuesEnd[property];\n\n      if (end instanceof Array) {\n        _object[property] = _interpolationFunction(end, value);\n      } else {\n        if (typeof end === 'string') {\n          if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            end = start + parseFloat(end);\n          } else {\n            end = parseFloat(end);\n          }\n        }\n\n        if (typeof end === 'number') {\n          _object[property] = start + (end - start) * value;\n        }\n      }\n    }\n\n    if (_onUpdateCallback !== null) {\n      _onUpdateCallback.call(_object, value);\n    }\n\n    if (elapsed === 1) {\n      if (_repeat > 0) {\n        if (isFinite(_repeat)) {\n          _repeat--;\n        }\n\n        for (property in _valuesStartRepeat) {\n          if (typeof _valuesEnd[property] === 'string') {\n            _valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property]);\n          }\n\n          if (_yoyo) {\n            var tmp = _valuesStartRepeat[property];\n\n            _valuesStartRepeat[property] = _valuesEnd[property];\n            _valuesEnd[property] = tmp;\n          }\n\n          _valuesStart[property] = _valuesStartRepeat[property];\n        }\n\n        if (_yoyo) {\n          _reversed = !_reversed;\n        }\n\n        if (_repeatDelayTime !== undefined) {\n          _startTime = time + _repeatDelayTime;\n        } else {\n          _startTime = time + _delayTime;\n        }\n\n        return true;\n      } else {\n        if (_onCompleteCallback !== null) {\n          _onCompleteCallback.call(_object, _object);\n        }\n\n        for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n          _chainedTweens[i].start(_startTime + _duration);\n        }\n\n        return false;\n      }\n    }\n\n    return true;\n  };\n};\n\nTWEEN.Easing = {\n\n  Linear: {\n\n    None: function None(k) {\n      return k;\n    }\n\n  },\n\n  Quadratic: {\n\n    In: function In(k) {\n      return k * k;\n    },\n\n    Out: function Out(k) {\n      return k * (2 - k);\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k;\n      }\n\n      return -0.5 * (--k * (k - 2) - 1);\n    }\n\n  },\n\n  Cubic: {\n\n    In: function In(k) {\n      return k * k * k;\n    },\n\n    Out: function Out(k) {\n      return --k * k * k + 1;\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2);\n    }\n\n  },\n\n  Quartic: {\n\n    In: function In(k) {\n      return k * k * k * k;\n    },\n\n    Out: function Out(k) {\n      return 1 - --k * k * k * k;\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k;\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2);\n    }\n\n  },\n\n  Quintic: {\n\n    In: function In(k) {\n      return k * k * k * k * k;\n    },\n\n    Out: function Out(k) {\n      return --k * k * k * k * k + 1;\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k;\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In: function In(k) {\n      return 1 - Math.cos(k * Math.PI / 2);\n    },\n\n    Out: function Out(k) {\n      return Math.sin(k * Math.PI / 2);\n    },\n\n    InOut: function InOut(k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n\n  },\n\n  Exponential: {\n\n    In: function In(k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n\n    Out: function Out(k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n\n    InOut: function InOut(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1);\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    }\n\n  },\n\n  Circular: {\n\n    In: function In(k) {\n      return 1 - Math.sqrt(1 - k * k);\n    },\n\n    Out: function Out(k) {\n      return Math.sqrt(1 - --k * k);\n    },\n\n    InOut: function InOut(k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1);\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    }\n\n  },\n\n  Elastic: {\n\n    In: function In(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n    },\n\n    Out: function Out(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n    },\n\n    InOut: function InOut(k) {\n      if (k === 0) {\n        return 0;\n      }\n\n      if (k === 1) {\n        return 1;\n      }\n\n      k *= 2;\n\n      if (k < 1) {\n        return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n      }\n\n      return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n    }\n\n  },\n\n  Back: {\n\n    In: function In(k) {\n      var s = 1.70158;\n\n      return k * k * ((s + 1) * k - s);\n    },\n\n    Out: function Out(k) {\n      var s = 1.70158;\n\n      return --k * k * ((s + 1) * k + s) + 1;\n    },\n\n    InOut: function InOut(k) {\n      var s = 1.70158 * 1.525;\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s));\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    }\n\n  },\n\n  Bounce: {\n\n    In: function In(k) {\n      return 1 - TWEEN.Easing.Bounce.Out(1 - k);\n    },\n\n    Out: function Out(k) {\n      if (k < 1 / 2.75) {\n        return 7.5625 * k * k;\n      } else if (k < 2 / 2.75) {\n        return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n      } else if (k < 2.5 / 2.75) {\n        return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n      } else {\n        return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n      }\n    },\n\n    InOut: function InOut(k) {\n      if (k < 0.5) {\n        return TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n      }\n\n      return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n    }\n\n  }\n\n};\n\nTWEEN.Interpolation = {\n\n  Linear: function Linear(v, k) {\n    var m = v.length - 1;\n    var f = m * k;\n    var i = Math.floor(f);\n    var fn = TWEEN.Interpolation.Utils.Linear;\n\n    if (k < 0) {\n      return fn(v[0], v[1], f);\n    }\n\n    if (k > 1) {\n      return fn(v[m], v[m - 1], m - f);\n    }\n\n    return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n  },\n\n  Bezier: function Bezier(v, k) {\n    var b = 0;\n    var n = v.length - 1;\n    var pw = Math.pow;\n    var bn = TWEEN.Interpolation.Utils.Bernstein;\n\n    for (var i = 0; i <= n; i++) {\n      b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n    }\n\n    return b;\n  },\n\n  CatmullRom: function CatmullRom(v, k) {\n    var m = v.length - 1;\n    var f = m * k;\n    var i = Math.floor(f);\n    var fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n    if (v[0] === v[m]) {\n      if (k < 0) {\n        i = Math.floor(f = m * (1 + k));\n      }\n\n      return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n    } else {\n      if (k < 0) {\n        return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n      }\n\n      if (k > 1) {\n        return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n      }\n\n      return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n    }\n  },\n\n  Utils: {\n\n    Linear: function Linear(p0, p1, t) {\n      return (p1 - p0) * t + p0;\n    },\n\n    Bernstein: function Bernstein(n, i) {\n      var fc = TWEEN.Interpolation.Utils.Factorial;\n\n      return fc(n) / fc(i) / fc(n - i);\n    },\n\n    Factorial: function () {\n      var a = [1];\n\n      return function (n) {\n        var s = 1;\n\n        if (a[n]) {\n          return a[n];\n        }\n\n        for (var i = n; i > 1; i--) {\n          s *= i;\n        }\n\n        a[n] = s;\n        return s;\n      };\n    }(),\n\n    CatmullRom: function CatmullRom(p0, p1, p2, p3, t) {\n      var v0 = (p2 - p0) * 0.5;\n      var v1 = (p3 - p1) * 0.5;\n      var t2 = t * t;\n      var t3 = t * t2;\n\n      return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n    }\n\n  }\n\n};\n\n(function (root) {\n  if (typeof define === 'function' && __webpack_require__(321)) {\n    define([], function () {\n      return TWEEN;\n    });\n  } else if (typeof module !== 'undefined' && (typeof exports === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default()(exports)) === 'object') {\n    module.exports = TWEEN;\n  } else if (root !== undefined) {\n    root.TWEEN = TWEEN;\n  }\n})(this);\n\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"] = function (object, domElement) {\n  this.object = object;\n  this.domElement = domElement !== undefined ? domElement : document;\n  this.frameId;\n\n  this.enabled = true;\n\n  this.target = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  this.center = this.target;\n\n  this.noZoom = false;\n  this.zoomSpeed = 1.0;\n\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  this.minZoom = 0;\n  this.maxZoom = Infinity;\n\n  this.noRotate = false;\n  this.rotateSpeed = -0.15;\n\n  this.noPan = true;\n  this.keyPanSpeed = 7.0;\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0;\n  this.minPolarAngle = 0;\n  this.maxPolarAngle = Math.PI;\n  this.momentumDampingFactor = 0.90;\n  this.momentumScalingFactor = -0.005;\n  this.momentumKeydownFactor = 20;\n\n  this.minFov = 30;\n  this.maxFov = 120;\n\n  this.minAzimuthAngle = -Infinity;\n  this.maxAzimuthAngle = Infinity;\n  this.noKeys = false;\n\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n  this.mouseButtons = { ORBIT: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].LEFT, ZOOM: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].MIDDLE, PAN: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].RIGHT };\n\n  var scope = this;\n\n  var EPS = 10e-8;\n  var MEPS = 10e-5;\n\n  var rotateStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var rotateEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var rotateDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n  var panStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var panEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var panDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var panOffset = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  var offset = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  var dollyStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var dollyEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var dollyDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n  var theta;\n  var phi;\n  var phiDelta = 0;\n  var thetaDelta = 0;\n  var scale = 1;\n  var pan = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n  var lastPosition = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n  var lastQuaternion = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n  var momentumLeft = 0,\n      momentumUp = 0;\n  var eventCurrent, eventPrevious;\n  var momentumOn = false;\n\n  var keyUp, keyBottom, keyLeft, keyRight;\n\n  var STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n  var state = STATE.NONE;\n\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  var quat = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]().setFromUnitVectors(object.up, new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0));\n  var quatInverse = quat.clone().inverse();\n\n  var changeEvent = { type: 'change' };\n  var startEvent = { type: 'start' };\n  var endEvent = { type: 'end' };\n\n  this.setLastQuaternion = function (quaternion) {\n    lastQuaternion.copy(quaternion);\n    scope.object.quaternion.copy(quaternion);\n  };\n\n  this.getLastPosition = function () {\n    return lastPosition;\n  };\n\n  this.rotateLeft = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle();\n    }\n\n    thetaDelta -= angle;\n  };\n\n  this.rotateUp = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle();\n    }\n\n    phiDelta -= angle;\n  };\n\n  this.panLeft = function (distance) {\n    var te = this.object.matrix.elements;\n\n    panOffset.set(te[0], te[1], te[2]);\n    panOffset.multiplyScalar(-distance);\n\n    pan.add(panOffset);\n  };\n\n  this.panUp = function (distance) {\n    var te = this.object.matrix.elements;\n\n    panOffset.set(te[4], te[5], te[6]);\n    panOffset.multiplyScalar(distance);\n\n    pan.add(panOffset);\n  };\n\n  this.pan = function (deltaX, deltaY) {\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n      var position = scope.object.position;\n      var offset = position.clone().sub(scope.target);\n      var targetDistance = offset.length();\n\n      targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n      scope.panLeft(2 * deltaX * targetDistance / element.clientHeight);\n      scope.panUp(2 * deltaY * targetDistance / element.clientHeight);\n    } else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n      scope.panLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth);\n      scope.panUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight);\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n    }\n  };\n\n  this.momentum = function () {\n    if (!momentumOn) return;\n\n    if (Math.abs(momentumLeft) < MEPS && Math.abs(momentumUp) < MEPS) {\n      momentumOn = false;\n      return;\n    }\n\n    momentumUp *= this.momentumDampingFactor;\n    momentumLeft *= this.momentumDampingFactor;\n\n    thetaDelta -= this.momentumScalingFactor * momentumLeft;\n    phiDelta -= this.momentumScalingFactor * momentumUp;\n  };\n\n  this.dollyIn = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale();\n    }\n\n    if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n      scale /= dollyScale;\n    } else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale));\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(changeEvent);\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n    }\n  };\n\n  this.dollyOut = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale();\n    }\n\n    if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n      scale *= dollyScale;\n    } else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale));\n      scope.object.updateProjectionMatrix();\n      scope.dispatchEvent(changeEvent);\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n    }\n  };\n\n  this.update = function (ignoreUpdate) {\n    var position = this.object.position;\n\n    offset.copy(position).sub(this.target);\n\n    offset.applyQuaternion(quat);\n\n    theta = Math.atan2(offset.x, offset.z);\n\n    phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y);\n\n    if (this.autoRotate && state === STATE.NONE) {\n      this.rotateLeft(getAutoRotationAngle());\n    }\n\n    this.momentum();\n\n    theta += thetaDelta;\n    phi += phiDelta;\n\n    theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta));\n\n    phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi));\n\n    phi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\n\n    var radius = offset.length() * scale;\n\n    radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\n\n    this.target.add(pan);\n\n    offset.x = radius * Math.sin(phi) * Math.sin(theta);\n    offset.y = radius * Math.cos(phi);\n    offset.z = radius * Math.sin(phi) * Math.cos(theta);\n\n    offset.applyQuaternion(quatInverse);\n\n    position.copy(this.target).add(offset);\n\n    this.object.lookAt(this.target);\n\n    thetaDelta = 0;\n    phiDelta = 0;\n    scale = 1;\n    pan.set(0, 0, 0);\n\n    if (lastPosition.distanceToSquared(this.object.position) > EPS || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n      ignoreUpdate !== true && this.dispatchEvent(changeEvent);\n\n      lastPosition.copy(this.object.position);\n      lastQuaternion.copy(this.object.quaternion);\n    }\n  };\n\n  this.reset = function () {\n    state = STATE.NONE;\n\n    this.target.copy(this.target0);\n    this.object.position.copy(this.position0);\n    this.object.zoom = this.zoom0;\n\n    this.object.updateProjectionMatrix();\n    this.dispatchEvent(changeEvent);\n\n    this.update();\n  };\n\n  this.getPolarAngle = function () {\n    return phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n    return theta;\n  };\n\n  function getAutoRotationAngle() {\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale() {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function onMouseDown(event) {\n    momentumOn = false;\n\n    momentumLeft = momentumUp = 0;\n\n    if (scope.enabled === false) return;\n    event.preventDefault();\n\n    if (event.button === scope.mouseButtons.ORBIT) {\n      if (scope.noRotate === true) return;\n\n      state = STATE.ROTATE;\n\n      rotateStart.set(event.clientX, event.clientY);\n    } else if (event.button === scope.mouseButtons.ZOOM) {\n      if (scope.noZoom === true) return;\n\n      state = STATE.DOLLY;\n\n      dollyStart.set(event.clientX, event.clientY);\n    } else if (event.button === scope.mouseButtons.PAN) {\n      if (scope.noPan === true) return;\n\n      state = STATE.PAN;\n\n      panStart.set(event.clientX, event.clientY);\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener('mousemove', onMouseMove, false);\n      document.addEventListener('mouseup', onMouseUp, false);\n      scope.dispatchEvent(startEvent);\n    }\n\n    scope.update();\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    if (state === STATE.ROTATE) {\n      if (scope.noRotate === true) return;\n\n      rotateEnd.set(event.clientX, event.clientY);\n      rotateDelta.subVectors(rotateEnd, rotateStart);\n\n      scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n      scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n      rotateStart.copy(rotateEnd);\n\n      if (eventPrevious) {\n        momentumLeft = event.clientX - eventPrevious.clientX;\n        momentumUp = event.clientY - eventPrevious.clientY;\n      }\n\n      eventPrevious = event;\n    } else if (state === STATE.DOLLY) {\n      if (scope.noZoom === true) return;\n\n      dollyEnd.set(event.clientX, event.clientY);\n      dollyDelta.subVectors(dollyEnd, dollyStart);\n\n      if (dollyDelta.y > 0) {\n        scope.dollyIn();\n      } else if (dollyDelta.y < 0) {\n        scope.dollyOut();\n      }\n\n      dollyStart.copy(dollyEnd);\n    } else if (state === STATE.PAN) {\n      if (scope.noPan === true) return;\n\n      panEnd.set(event.clientX, event.clientY);\n      panDelta.subVectors(panEnd, panStart);\n\n      scope.pan(panDelta.x, panDelta.y);\n\n      panStart.copy(panEnd);\n    }\n\n    if (state !== STATE.NONE) scope.update();\n  }\n\n  function onMouseUp() {\n    momentumOn = true;\n\n    eventPrevious = undefined;\n\n    if (scope.enabled === false) return;\n\n    document.removeEventListener('mousemove', onMouseMove, false);\n    document.removeEventListener('mouseup', onMouseUp, false);\n    scope.dispatchEvent(endEvent);\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n    if (scope.enabled === false || scope.noZoom === true || state !== STATE.NONE) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    var delta = 0;\n\n    if (event.wheelDelta !== undefined) {\n      delta = event.wheelDelta;\n    } else if (event.detail !== undefined) {\n      delta = -event.detail;\n    }\n\n    if (delta > 0) {\n      scope.object.fov = scope.object.fov < scope.maxFov ? scope.object.fov + 1 : scope.maxFov;\n      scope.object.updateProjectionMatrix();\n    } else if (delta < 0) {\n      scope.object.fov = scope.object.fov > scope.minFov ? scope.object.fov - 1 : scope.minFov;\n      scope.object.updateProjectionMatrix();\n    }\n\n    scope.update();\n    scope.dispatchEvent(changeEvent);\n    scope.dispatchEvent(startEvent);\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyUp(event) {\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = false;\n        break;\n\n      case scope.keys.BOTTOM:\n        keyBottom = false;\n        break;\n\n      case scope.keys.LEFT:\n        keyLeft = false;\n        break;\n\n      case scope.keys.RIGHT:\n        keyRight = false;\n        break;\n    }\n  }\n\n  function onKeyDown(event) {\n    if (scope.enabled === false || scope.noKeys === true || scope.noRotate === true) return;\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = true;\n        break;\n\n      case scope.keys.BOTTOM:\n        keyBottom = true;\n        break;\n\n      case scope.keys.LEFT:\n        keyLeft = true;\n        break;\n\n      case scope.keys.RIGHT:\n        keyRight = true;\n        break;\n    }\n\n    if (keyUp || keyBottom || keyLeft || keyRight) {\n      momentumOn = true;\n\n      if (keyUp) momentumUp = -scope.rotateSpeed * scope.momentumKeydownFactor;\n      if (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor;\n      if (keyLeft) momentumLeft = -scope.rotateSpeed * scope.momentumKeydownFactor;\n      if (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor;\n    }\n  }\n\n  function touchstart(event) {\n    momentumOn = false;\n\n    momentumLeft = momentumUp = 0;\n\n    if (scope.enabled === false) return;\n\n    switch (event.touches.length) {\n      case 1:\n\n        if (scope.noRotate === true) return;\n\n        state = STATE.TOUCH_ROTATE;\n\n        rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n        break;\n\n      case 2:\n\n        if (scope.noZoom === true) return;\n\n        state = STATE.TOUCH_DOLLY;\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        break;\n\n      case 3:\n\n        if (scope.noPan === true) return;\n\n        state = STATE.TOUCH_PAN;\n\n        panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n        break;\n\n      default:\n\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) scope.dispatchEvent(startEvent);\n  }\n\n  function touchmove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    switch (event.touches.length) {\n      case 1:\n\n        if (scope.noRotate === true) return;\n        if (state !== STATE.TOUCH_ROTATE) return;\n\n        rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n\n        scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n        scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n        rotateStart.copy(rotateEnd);\n\n        if (eventPrevious) {\n          momentumLeft = event.touches[0].pageX - eventPrevious.pageX;\n          momentumUp = event.touches[0].pageY - eventPrevious.pageY;\n        }\n\n        eventPrevious = {\n          pageX: event.touches[0].pageX,\n          pageY: event.touches[0].pageY\n        };\n\n        scope.update();\n        break;\n\n      case 2:\n\n        if (scope.noZoom === true) return;\n        if (state !== STATE.TOUCH_DOLLY) return;\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        if (event.scale < 1) {\n          scope.object.fov = scope.object.fov < scope.maxFov ? scope.object.fov + 1 : scope.maxFov;\n          scope.object.updateProjectionMatrix();\n        } else if (event.scale > 1) {\n          scope.object.fov = scope.object.fov > scope.minFov ? scope.object.fov - 1 : scope.minFov;\n          scope.object.updateProjectionMatrix();\n        }\n\n        scope.update();\n        scope.dispatchEvent(changeEvent);\n        break;\n\n      case 3:\n\n        if (scope.noPan === true) return;\n        if (state !== STATE.TOUCH_PAN) return;\n\n        panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        panDelta.subVectors(panEnd, panStart);\n\n        scope.pan(panDelta.x, panDelta.y);\n\n        panStart.copy(panEnd);\n\n        scope.update();\n        break;\n\n      default:\n\n        state = STATE.NONE;\n    }\n  }\n\n  function touchend() {\n    momentumOn = true;\n\n    eventPrevious = undefined;\n\n    if (scope.enabled === false) return;\n\n    scope.dispatchEvent(endEvent);\n    state = STATE.NONE;\n  }\n\n  this.domElement.addEventListener('mousedown', onMouseDown, false);\n  this.domElement.addEventListener('mousewheel', onMouseWheel, false);\n  this.domElement.addEventListener('DOMMouseScroll', onMouseWheel, false);\n\n  this.domElement.addEventListener('touchstart', touchstart, false);\n  this.domElement.addEventListener('touchend', touchend, false);\n  this.domElement.addEventListener('touchmove', touchmove, false);\n\n  window.addEventListener('keyup', onKeyUp, false);\n  window.addEventListener('keydown', onKeyDown, false);\n\n  this.update();\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"].prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"].prototype.constructor = __WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"];\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"] = function (camera, domElement) {\n  var scope = this;\n  var changeEvent = { type: 'change' };\n\n  var rotY = 0;\n  var rotX = 0;\n  var tempX = 0;\n  var tempY = 0;\n\n  this.camera = camera;\n  this.camera.rotation.reorder('YXZ');\n  this.domElement = domElement !== undefined ? domElement : document;\n\n  this.enabled = true;\n\n  this.deviceOrientation = {};\n  this.screenOrientation = 0;\n\n  this.alpha = 0;\n  this.alphaOffsetAngle = 0;\n\n  var onDeviceOrientationChangeEvent = function onDeviceOrientationChangeEvent(event) {\n    scope.deviceOrientation = event;\n  };\n\n  var onScreenOrientationChangeEvent = function onScreenOrientationChangeEvent() {\n    scope.screenOrientation = window.orientation || 0;\n  };\n\n  var onTouchStartEvent = function onTouchStartEvent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    tempX = event.touches[0].pageX;\n    tempY = event.touches[0].pageY;\n  };\n\n  var onTouchMoveEvent = function onTouchMoveEvent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    rotY += __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad((event.touches[0].pageX - tempX) / 4);\n    rotX += __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad((tempY - event.touches[0].pageY) / 4);\n\n    scope.updateAlphaOffsetAngle(rotY);\n\n    tempX = event.touches[0].pageX;\n    tempY = event.touches[0].pageY;\n  };\n\n  var setCameraQuaternion = function setCameraQuaternion(quaternion, alpha, beta, gamma, orient) {\n    var zee = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 0, 1);\n\n    var euler = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Euler\"]();\n\n    var q0 = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n    var q1 = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"](-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5));\n\n    var vectorFingerY;\n    var fingerQY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    var fingerQX = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n    if (scope.screenOrientation == 0) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX);\n    } else if (scope.screenOrientation == 180) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX);\n    } else if (scope.screenOrientation == 90) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX);\n    } else if (scope.screenOrientation == -90) {\n      vectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX);\n    }\n\n    q1.multiply(fingerQY);\n    q1.multiply(fingerQX);\n\n    euler.set(beta, alpha, -gamma, 'YXZ');\n\n    quaternion.setFromEuler(euler);\n\n    quaternion.multiply(q1);\n\n    quaternion.multiply(q0.setFromAxisAngle(zee, -orient));\n  };\n\n  this.connect = function () {\n    onScreenOrientationChangeEvent();\n\n    window.addEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n    window.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n    window.addEventListener('deviceorientation', this.update.bind(this), false);\n\n    scope.domElement.addEventListener('touchstart', onTouchStartEvent, false);\n    scope.domElement.addEventListener('touchmove', onTouchMoveEvent, false);\n\n    scope.enabled = true;\n  };\n\n  this.disconnect = function () {\n    window.removeEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n    window.removeEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n    window.removeEventListener('deviceorientation', this.update.bind(this), false);\n\n    scope.domElement.removeEventListener('touchstart', onTouchStartEvent, false);\n    scope.domElement.removeEventListener('touchmove', onTouchMoveEvent, false);\n\n    scope.enabled = false;\n  };\n\n  this.update = function (ignoreUpdate) {\n    if (scope.enabled === false) return;\n\n    var alpha = scope.deviceOrientation.alpha ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.alpha) + this.alphaOffsetAngle : 0;\n    var beta = scope.deviceOrientation.beta ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.beta) : 0;\n    var gamma = scope.deviceOrientation.gamma ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.gamma) : 0;\n    var orient = scope.screenOrientation ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.screenOrientation) : 0;\n\n    setCameraQuaternion(scope.camera.quaternion, alpha, beta, gamma, orient);\n    this.alpha = alpha;\n\n    ignoreUpdate !== true && this.dispatchEvent(changeEvent);\n  };\n\n  this.updateAlphaOffsetAngle = function (angle) {\n    this.alphaOffsetAngle = angle;\n    this.update();\n  };\n\n  this.dispose = function () {\n    this.disconnect();\n  };\n\n  this.connect();\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"].prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"].prototype.constructor = __WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"];\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"] = function () {};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"].prototype = {\n\n  constructor: __WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"],\n\n  set: function set(direction, axis, angle) {\n    this.direction = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();this.direction.copy(direction);\n    this.axis = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();this.axis.copy(axis);\n    this.angle = angle;\n    return this;\n  },\n\n  _sign: function _sign(a) {\n    return a < 0 ? -1 : a > 0 ? 1 : 0;\n  },\n\n  _cosh: function _cosh(x) {\n    return (Math.exp(x) + Math.exp(-x)) / 2;\n  },\n\n  _sinhInverse: function _sinhInverse(x) {\n    return Math.log(Math.abs(x) + Math.sqrt(x * x + 1));\n  },\n\n  modify: function modify(geometry) {\n    var thirdAxis = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();thirdAxis.crossVectors(this.direction, this.axis);\n\n    var P = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]();\n    P.set(thirdAxis.x, thirdAxis.y, thirdAxis.z, 0, this.direction.x, this.direction.y, this.direction.z, 0, this.axis.x, this.axis.y, this.axis.z, 0, 0, 0, 0, 1).transpose();\n\n    var InverseP = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]().getInverse(P);\n    var newVertices = [];var oldVertices = [];var anglesBetweenOldandNewVertices = [];\n\n    var meshGeometryBoundingBoxMaxx = 0;var meshGeometryBoundingBoxMinx = 0;\n    var meshGeometryBoundingBoxMaxy = 0;var meshGeometryBoundingBoxMiny = 0;\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      newVertices[i] = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();newVertices[i].copy(geometry.vertices[i]).applyMatrix4(InverseP);\n      if (newVertices[i].x > meshGeometryBoundingBoxMaxx) {\n        meshGeometryBoundingBoxMaxx = newVertices[i].x;\n      }\n      if (newVertices[i].x < meshGeometryBoundingBoxMinx) {\n        meshGeometryBoundingBoxMinx = newVertices[i].x;\n      }\n      if (newVertices[i].y > meshGeometryBoundingBoxMaxy) {\n        meshGeometryBoundingBoxMaxy = newVertices[i].y;\n      }\n      if (newVertices[i].y < meshGeometryBoundingBoxMiny) {\n        meshGeometryBoundingBoxMiny = newVertices[i].y;\n      }\n    }\n\n    var meshWidthold = meshGeometryBoundingBoxMaxx - meshGeometryBoundingBoxMinx;\n    var meshDepth = meshGeometryBoundingBoxMaxy - meshGeometryBoundingBoxMiny;\n    var ParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidthold;\n    var oldMiddlex = (meshGeometryBoundingBoxMaxx + meshGeometryBoundingBoxMinx) / 2;\n    var oldMiddley = (meshGeometryBoundingBoxMaxy + meshGeometryBoundingBoxMiny) / 2;\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      oldVertices[i] = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();oldVertices[i].copy(newVertices[i]);\n      newVertices[i].x = this._sign(newVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((newVertices[i].x - oldMiddlex) * ParamB);\n    }\n\n    var meshWidth = 2 / ParamB * this._sinhInverse(meshWidthold / 2 * ParamB);\n\n    var NewParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidth;\n\n    var rightEdgePos = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](meshWidth / 2, -meshDepth / 2, 0);\n    rightEdgePos.y = 1 / NewParamB * this._cosh(NewParamB * rightEdgePos.x) - 1 / NewParamB - meshDepth / 2;\n\n    var bendCenter = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, rightEdgePos.y + rightEdgePos.x / Math.tan(this.angle), 0);\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var x0 = this._sign(oldVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((oldVertices[i].x - oldMiddlex) * ParamB);\n      var y0 = 1 / NewParamB * this._cosh(NewParamB * x0) - 1 / NewParamB;\n\n      var k = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](bendCenter.x - x0, bendCenter.y - (y0 - meshDepth / 2), bendCenter.z).normalize();\n\n      var Q = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n      Q.addVectors(new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](x0, y0 - meshDepth / 2, oldVertices[i].z), k.multiplyScalar(oldVertices[i].y + meshDepth / 2));\n      newVertices[i].x = Q.x;newVertices[i].y = Q.y;\n    }\n\n    var middle = oldMiddlex * meshWidth / meshWidthold;\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var O = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](oldMiddlex, oldMiddley, oldVertices[i].z);\n      var p = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();p.subVectors(oldVertices[i], O);\n      var q = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();q.subVectors(newVertices[i], O);\n\n      anglesBetweenOldandNewVertices[i] = Math.acos(1 / this._cosh(ParamB * newVertices[i].x)) * this._sign(newVertices[i].x);\n\n      newVertices[i].x = newVertices[i].x + middle;\n      geometry.vertices[i].copy(newVertices[i].applyMatrix4(P));\n    }\n\n    geometry.computeFaceNormals();\n    geometry.verticesNeedUpdate = true;\n    geometry.normalsNeedUpdate = true;\n\n    var fvNames = ['a', 'b', 'c', 'd'];\n\n    for (var f = 0, fl = geometry.faces.length; f < fl; f++) {\n      var face = geometry.faces[f];\n      if (face.vertexNormals === undefined) {\n        continue;\n      }\n      for (var v = 0, vl = face.vertexNormals.length; v < vl; v++) {\n        var angle = anglesBetweenOldandNewVertices[face[fvNames[v]]];\n        var x = this.axis.x,\n            y = this.axis.y,\n            z = this.axis.z;\n\n        var rotateMatrix = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix3\"]();\n        rotateMatrix.set(Math.cos(angle) + (1 - Math.cos(angle)) * x * x, (1 - Math.cos(angle)) * x * y - Math.sin(angle) * z, (1 - Math.cos(angle)) * x * z + Math.sin(angle) * y, (1 - Math.cos(angle)) * y * x + Math.sin(angle) * z, Math.cos(angle) + (1 - Math.cos(angle)) * y * y, (1 - Math.cos(angle)) * y * z - Math.sin(angle) * x, (1 - Math.cos(angle)) * z * x - Math.sin(angle) * y, (1 - Math.cos(angle)) * z * y + Math.sin(angle) * x, Math.cos(angle) + (1 - Math.cos(angle)) * z * z);\n\n        face.vertexNormals[v].applyMatrix3(rotateMatrix);\n      }\n    }\n\n\n    return this;\n  }\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"CardboardEffect\"] = function (renderer) {\n  var _camera = new __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"](-1, 1, 1, -1, 0, 1);\n\n  var _scene = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Scene\"]();\n\n  var _stereo = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoCamera\"]();\n  _stereo.aspect = 0.5;\n\n  var _params = { minFilter: __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"], magFilter: __WEBPACK_IMPORTED_MODULE_8_three__[\"NearestFilter\"], format: __WEBPACK_IMPORTED_MODULE_8_three__[\"RGBAFormat\"] };\n\n  var _renderTarget = new __WEBPACK_IMPORTED_MODULE_8_three__[\"WebGLRenderTarget\"](512, 512, _params);\n  _renderTarget.scissorTest = true;\n  _renderTarget.texture.generateMipmaps = false;\n\n  var distortion = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"](0.441, 0.156);\n\n  var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneBufferGeometry\"](1, 1, 10, 20).removeAttribute('normal').toNonIndexed();\n\n  var positions = geometry.attributes.position.array;\n  var uvs = geometry.attributes.uv.array;\n\n  geometry.attributes.position.count *= 2;\n  geometry.attributes.uv.count *= 2;\n\n  var positions2 = new Float32Array(positions.length * 2);\n  positions2.set(positions);\n  positions2.set(positions, positions.length);\n\n  var uvs2 = new Float32Array(uvs.length * 2);\n  uvs2.set(uvs);\n  uvs2.set(uvs, uvs.length);\n\n  var vector = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n  var length = positions.length / 3;\n\n  for (var i = 0, l = positions2.length / 3; i < l; i++) {\n    vector.x = positions2[i * 3 + 0];\n    vector.y = positions2[i * 3 + 1];\n\n    var dot = vector.dot(vector);\n    var scalar = 1.5 + (distortion.x + distortion.y * dot) * dot;\n\n    var offset = i < length ? 0 : 1;\n\n    positions2[i * 3 + 0] = vector.x / scalar * 1.5 - 0.5 + offset;\n    positions2[i * 3 + 1] = vector.y / scalar * 3.0;\n\n    uvs2[i * 2] = (uvs2[i * 2] + offset) * 0.5;\n  }\n\n  geometry.attributes.position.array = positions2;\n  geometry.attributes.uv.array = uvs2;\n\n  var material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ map: _renderTarget.texture });\n  var mesh = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"](geometry, material);\n  _scene.add(mesh);\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height);\n\n    var pixelRatio = renderer.getPixelRatio();\n\n    _renderTarget.setSize(width * pixelRatio, height * pixelRatio);\n  };\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld();\n\n    if (camera.parent === null) camera.updateMatrixWorld();\n\n    _stereo.update(camera);\n\n    var width = _renderTarget.width / 2;\n    var height = _renderTarget.height;\n\n    _renderTarget.scissor.set(0, 0, width, height);\n    _renderTarget.viewport.set(0, 0, width, height);\n    renderer.render(scene, _stereo.cameraL, _renderTarget);\n\n    _renderTarget.scissor.set(width, 0, width, height);\n    _renderTarget.viewport.set(width, 0, width, height);\n    renderer.render(scene, _stereo.cameraR, _renderTarget);\n\n    renderer.render(_scene, _camera);\n  };\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"StereoEffect\"] = function (renderer) {\n  var _stereo = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoCamera\"]();\n  _stereo.aspect = 0.5;\n\n  this.setEyeSeparation = function (eyeSep) {\n    _stereo.eyeSep = eyeSep;\n  };\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height);\n  };\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld();\n\n    if (camera.parent === null) camera.updateMatrixWorld();\n\n    _stereo.update(camera);\n\n    var size = renderer.getSize();\n\n    if (renderer.autoClear) renderer.clear();\n    renderer.setScissorTest(true);\n\n    renderer.setScissor(0, 0, size.width / 2, size.height);\n    renderer.setViewport(0, 0, size.width / 2, size.height);\n    renderer.render(scene, _stereo.cameraL);\n\n    renderer.setScissor(size.width / 2, 0, size.width / 2, size.height);\n    renderer.setViewport(size.width / 2, 0, size.width / 2, size.height);\n    renderer.render(scene, _stereo.cameraR);\n\n    renderer.setScissorTest(false);\n  };\n};\nvar GSVPANO = GSVPANO || {};\nGSVPANO.PanoLoader = function (parameters) {\n  'use strict';\n\n  var _parameters = parameters || {},\n      _location,\n      _zoom,\n      _panoId,\n      _panoClient = new google.maps.StreetViewService(),\n      _count = 0,\n      _total = 0,\n      _canvas = [],\n      _ctx = [],\n      _wc = 0,\n      _hc = 0,\n      result = null,\n      rotation = 0,\n      copyright = '',\n      onSizeChange = null,\n      onPanoramaLoad = null;\n\n  var levelsW = [1, 2, 4, 7, 13, 26],\n      levelsH = [1, 1, 2, 4, 7, 13];\n\n  var widths = [416, 832, 1664, 3328, 6656, 13312],\n      heights = [416, 416, 832, 1664, 3328, 6656];\n\n  var gl = null;\n  try {\n    var canvas = document.createElement('canvas');\n    gl = canvas.getContext('experimental-webgl');\n    if (gl == null) {\n      gl = canvas.getContext('webgl');\n    }\n  } catch (error) {}\n\n  var maxW = 1024,\n      maxH = 1024;\n\n  if (gl) {\n    var maxTexSize = Math.max(gl.getParameter(gl.MAX_TEXTURE_SIZE), 6656);\n\n    maxW = maxH = maxTexSize;\n  }\n\n  this.setProgress = function (loaded, total) {\n    if (this.onProgress) {\n      this.onProgress({ loaded: loaded, total: total });\n    }\n  };\n\n  this.throwError = function (message) {\n    if (this.onError) {\n      this.onError(message);\n    } else {\n      console.error(message);\n    }\n  };\n\n  this.adaptTextureToZoom = function () {\n    var w = levelsW[_zoom] * 416,\n        h = levelsH[_zoom] * 416;\n\n    w = widths[_zoom];\n    h = heights[_zoom];\n\n    _wc = Math.ceil(w / maxW);\n    _hc = Math.ceil(h / maxH);\n\n    _canvas = [];_ctx = [];\n\n    var ptr = 0;\n    for (var y = 0; y < _hc; y++) {\n      for (var x = 0; x < _wc; x++) {\n        var c = document.createElement('canvas');\n        if (x < _wc - 1) c.width = maxW;else c.width = w - maxW * x;\n        if (y < _hc - 1) c.height = maxH;else c.height = h - maxH * y;\n        _canvas.push(c);\n        _ctx.push(c.getContext('2d'));\n        ptr++;\n      }\n    }\n  };\n\n  this.composeFromTile = function (x, y, texture) {\n    x *= 512;\n    y *= 512;\n    var px = Math.floor(x / maxW),\n        py = Math.floor(y / maxH);\n\n    x -= px * maxW;\n    y -= py * maxH;\n\n    _ctx[py * _wc + px].drawImage(texture, 0, 0, texture.width, texture.height, x, y, 512, 512);\n    this.progress();\n  };\n\n  this.progress = function () {\n    _count++;\n\n    var p = Math.round(_count * 100 / _total);\n    this.setProgress(_count, _total);\n\n    if (_count === _total) {\n      this.canvas = _canvas;\n      this.panoId = _panoId;\n      this.zoom = _zoom;\n      if (this.onPanoramaLoad) {\n        this.onPanoramaLoad(_canvas[0]);\n      }\n    }\n  };\n\n  this.loadFromId = function (id) {\n    _panoId = id;\n    this.composePanorama();\n  };\n\n  this.composePanorama = function () {\n    this.setProgress(0, 1);\n\n    var w = levelsW[_zoom],\n        h = levelsH[_zoom],\n        self = this,\n        url,\n        x,\n        y;\n\n    _count = 0;\n    _total = w * h;\n\n    var self = this;\n    for (var y = 0; y < h; y++) {\n      for (var x = 0; x < w; x++) {\n        var url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + _zoom + '&x=' + x + '&y=' + y + '&panoid=' + _panoId + '&nbt&fover=2';\n        (function (x, y) {\n          if (_parameters.useWebGL) {\n            var texture = __WEBPACK_IMPORTED_MODULE_8_three__[\"ImageUtils\"].loadTexture(url, null, function () {\n              self.composeFromTile(x, y, texture);\n            });\n          } else {\n            var img = new Image();\n            img.addEventListener('load', function () {\n              self.composeFromTile(x, y, this);\n            });\n            img.crossOrigin = '';\n            img.src = url;\n          }\n        })(x, y);\n      }\n    }\n  };\n\n  this.load = function (panoid) {\n    this.loadPano(panoid);\n  };\n\n  this.loadPano = function (id) {\n    var self = this;\n    _panoClient.getPanoramaById(id, function (result, status) {\n      if (status === google.maps.StreetViewStatus.OK) {\n        self.result = result;\n        if (self.onPanoramaData) self.onPanoramaData(result);\n\n        copyright = result.copyright;\n        self.copyright = result.copyright;\n        _panoId = result.location.pano;\n        self.location = location;\n        self.composePanorama();\n      } else {\n        if (self.onNoPanoramaData) self.onNoPanoramaData(status);\n        self.throwError('Could not retrieve panorama for the following reason: ' + status);\n      }\n    });\n  };\n\n  this.setZoom = function (z) {\n    _zoom = z;\n    this.adaptTextureToZoom();\n  };\n\n  this.setZoom(_parameters.zoom || 1);\n};(function () {\n  'use strict';\n\n  PANOLENS.DataImageSource = 'https://pchen66.github.io/Panolens/asset/icon/';\n\n  PANOLENS.DataImage = {\n    Info: PANOLENS.DataImageSource + 'information.png',\n    Arrow: PANOLENS.DataImageSource + 'arrow-up.png',\n    FullscreenEnter: PANOLENS.DataImageSource + 'fullscreen.png',\n    FullscreenLeave: PANOLENS.DataImageSource + 'fullscreen-exit.png',\n    VideoPlay: PANOLENS.DataImageSource + 'video-play.png',\n    VideoPause: PANOLENS.DataImageSource + 'pause.png',\n    WhiteTile: PANOLENS.DataImageSource + 'tiles.png',\n    ReticleIdle: PANOLENS.DataImageSource + 'reticle-idle.png',\n    Setting: PANOLENS.DataImageSource + 'setting.png',\n    ChevronRight: PANOLENS.DataImageSource + 'chevron-right.png',\n    Check: PANOLENS.DataImageSource + 'check.png',\n    ViewIndicator: PANOLENS.DataImageSource + 'view-indicator.svg',\n    ReticleDwell: PANOLENS.DataImageSource + 'reticle-animation.png'\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Controls = {\n\n    ORBIT: 0,\n\n    DEVICEORIENTATION: 1\n\n  };\n\n  PANOLENS.Modes = {\n    UNKNOWN: 0,\n\n    NORMAL: 1,\n\n    CARDBOARD: 2,\n\n    STEREO: 3\n\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils = {};\n\n  PANOLENS.Utils.checkTouchSupported = function () {\n    return window ? 'ontouchstart' in window || window.navigator.msMaxTouchPoints : false;\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils.ImageLoader = {};\n\n  PANOLENS.Utils.ImageLoader.load = function (url, onLoad, onProgress, onError) {\n    var cached, request, arrayBufferView, blob, urlCreator, image, reference;\n\n    for (var iconName in PANOLENS.DataImage) {\n      if (PANOLENS.DataImage.hasOwnProperty(iconName) && url === PANOLENS.DataImage[iconName]) {\n        reference = iconName;\n      }\n    }\n\n    cached = __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].get(reference || url);\n\n    if (cached !== undefined) {\n      if (onLoad) {\n        setTimeout(function () {\n          if (onProgress) {\n            onProgress({ loaded: 1, total: 1 });\n          }\n\n          onLoad(cached);\n        }, 0);\n      }\n\n      return cached;\n    }\n\n    urlCreator = window.URL || window.webkitURL;\n    image = document.createElementNS('http://www.w3.org/1999/xhtml', 'img');\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].add(reference || url, image);\n\n    function onImageLoaded() {\n      urlCreator.revokeObjectURL(image.src);\n      onLoad && onLoad(image);\n    }\n\n    if (url.indexOf('data:') === 0) {\n      image.addEventListener('load', onImageLoaded, false);\n      image.src = url;\n      return image;\n    }\n\n    image.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : '';\n\n    request = new XMLHttpRequest();\n    request.open('GET', url, true);\n    request.responseType = 'arraybuffer';\n    request.onprogress = function (event) {\n      if (event.lengthComputable) {\n        onProgress && onProgress({ loaded: event.loaded, total: event.total });\n      }\n    };\n    request.onloadend = function (event) {\n      arrayBufferView = new Uint8Array(this.response);\n      blob = new Blob([arrayBufferView]);\n\n      image.addEventListener('load', onImageLoaded, false);\n      image.src = urlCreator.createObjectURL(blob);\n    };\n\n    request.send(null);\n  };\n\n  __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].enabled = true;\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils.TextureLoader = {};\n\n  PANOLENS.Utils.TextureLoader.load = function (url, onLoad, onProgress, onError) {\n    var texture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\n    PANOLENS.Utils.ImageLoader.load(url, function (image) {\n      texture.image = image;\n      texture.needsUpdate = true;\n\n      onLoad && onLoad(texture);\n    }, onProgress, onError);\n\n    return texture;\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Utils.CubeTextureLoader = {};\n\n  PANOLENS.Utils.CubeTextureLoader.load = function (urls, onLoad, onProgress, onError) {\n    var texture, loaded, progress, all, loadings;\n\n    texture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"CubeTexture\"]([]);\n\n    loaded = 0;\n    progress = {};\n    all = {};\n\n    urls.map(function (url, index) {\n      PANOLENS.Utils.ImageLoader.load(url, function (image) {\n        texture.images[index] = image;\n\n        loaded++;\n\n        if (loaded === 6) {\n          texture.needsUpdate = true;\n\n          onLoad && onLoad(texture);\n        }\n      }, function (event) {\n        progress[index] = { loaded: event.loaded, total: event.total };\n\n        all.loaded = 0;\n        all.total = 0;\n        loadings = 0;\n\n        for (var i in progress) {\n          loadings++;\n          all.loaded += progress[i].loaded;\n          all.total += progress[i].total;\n        }\n\n        if (loadings < 6) {\n          all.total = all.total / loadings * 6;\n        }\n\n        onProgress && onProgress(all);\n      }, onError);\n    });\n\n    return texture;\n  };\n})();\n\nPANOLENS.StereographicShader = {\n\n  uniforms: {\n\n    'tDiffuse': { value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]() },\n    'resolution': { value: 1.0 },\n    'transform': { value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]() },\n    'zoom': { value: 1.0 }\n\n  },\n\n  vertexShader: ['varying vec2 vUv;', 'void main() {', 'vUv = uv;', 'gl_Position = vec4( position, 1.0 );', '}'].join('\\n'),\n\n  fragmentShader: ['uniform sampler2D tDiffuse;', 'uniform float resolution;', 'uniform mat4 transform;', 'uniform float zoom;', 'varying vec2 vUv;', 'const float PI = 3.141592653589793;', 'void main(){', 'vec2 position = -1.0 +  2.0 * vUv;', 'position *= vec2( zoom * resolution, zoom * 0.5 );', 'float x2y2 = position.x * position.x + position.y * position.y;', 'vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );', 'sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );', 'vec2 sampleUV = vec2(', '(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,', '(asin(sphere_pnt.z) / PI + 0.5)', ');', 'gl_FragColor = texture2D( tDiffuse, sampleUV );', '}'].join('\\n')\n\n};(function () {\n  'use strict';\n\n  PANOLENS.Panorama = function (geometry, material) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].call(this);\n\n    this.type = 'panorama';\n\n    this.ImageQualityLow = 1;\n    this.ImageQualityFair = 2;\n    this.ImageQualityMedium = 3;\n    this.ImageQualityHigh = 4;\n    this.ImageQualitySuperHigh = 5;\n\n    this.animationDuration = 1000;\n\n    this.defaultInfospotSize = 350;\n\n    this.container = undefined;\n\n    this.loaded = false;\n\n    this.linkedSpots = [];\n\n    this.isInfospotVisible = false;\n\n    this.linkingImageURL = undefined;\n    this.linkingImageScale = undefined;\n\n    this.geometry = geometry;\n\n    this.material = material;\n    this.material.side = __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"];\n    this.material.visible = false;\n\n    this.scale.x *= -1;\n\n    this.infospotAnimation = new TWEEN.Tween(this).to({}, this.animationDuration / 2);\n\n    this.addEventListener('load', this.fadeIn.bind(this));\n    this.addEventListener('panolens-container', this.setContainer.bind(this));\n    this.addEventListener('click', this.onClick.bind(this));\n\n    this.setupTransitions();\n  };\n\n  PANOLENS.Panorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].prototype);\n\n  PANOLENS.Panorama.prototype.constructor = PANOLENS.Panorama;\n\n  PANOLENS.Panorama.prototype.add = function (object) {\n    var scope, invertedObject;\n\n    scope = this;\n\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    if (object instanceof PANOLENS.Infospot) {\n      invertedObject = object;\n\n      if (object.dispatchEvent) {\n        this.container && object.dispatchEvent({ type: 'panolens-container', container: this.container });\n\n        object.dispatchEvent({ type: 'panolens-infospot-focus',\n          method: function method(vector, duration, easing) {\n            scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'tweenControlCenter', data: [vector, duration, easing] });\n          } });\n      }\n    } else {\n      invertedObject = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"]();\n      invertedObject.scale.x = -1;\n      invertedObject.scalePlaceHolder = true;\n      invertedObject.add(object);\n    }\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype.add.call(this, invertedObject);\n  };\n\n  PANOLENS.Panorama.prototype.load = function () {\n    this.onLoad();\n  };\n\n  PANOLENS.Panorama.prototype.onClick = function (event) {\n    if (event.intersects && event.intersects.length === 0) {\n      this.traverse(function (object) {\n        object.dispatchEvent({ type: 'dismiss' });\n      });\n    }\n  };\n\n  PANOLENS.Panorama.prototype.setContainer = function (data) {\n    var container;\n\n    if (data instanceof HTMLElement) {\n      container = data;\n    } else if (data && data.container) {\n      container = data.container;\n    }\n\n    if (container) {\n      this.children.forEach(function (child) {\n        if (child instanceof PANOLENS.Infospot && child.dispatchEvent) {\n          child.dispatchEvent({ type: 'panolens-container', container: container });\n        }\n      });\n\n      this.container = container;\n    }\n  };\n\n  PANOLENS.Panorama.prototype.onLoad = function () {\n    this.loaded = true;\n\n    this.dispatchEvent({ type: 'load' });\n  };\n\n  PANOLENS.Panorama.prototype.onProgress = function (progress) {\n    this.dispatchEvent({ type: 'progress', progress: progress });\n  };\n\n  PANOLENS.Panorama.prototype.onError = function () {\n    this.dispatchEvent({ type: 'error' });\n  };\n\n  PANOLENS.Panorama.prototype.getZoomLevel = function () {\n    var zoomLevel;\n\n    if (window.innerWidth <= 800) {\n      zoomLevel = this.ImageQualityFair;\n    } else if (window.innerWidth > 800 && window.innerWidth <= 1280) {\n      zoomLevel = this.ImageQualityMedium;\n    } else if (window.innerWidth > 1280 && window.innerWidth <= 1920) {\n      zoomLevel = this.ImageQualityHigh;\n    } else if (window.innerWidth > 1920) {\n      zoomLevel = this.ImageQualitySuperHigh;\n    } else {\n      zoomLevel = this.ImageQualityLow;\n    }\n\n    return zoomLevel;\n  };\n\n  PANOLENS.Panorama.prototype.updateTexture = function (texture) {\n    this.material.map = texture;\n\n    this.material.needsUpdate = true;\n  };\n\n  PANOLENS.Panorama.prototype.toggleInfospotVisibility = function (isVisible, delay) {\n    delay = delay !== undefined ? delay : 0;\n\n    var scope, visible;\n\n    scope = this;\n    visible = isVisible !== undefined ? isVisible : !this.isInfospotVisible;\n\n    this.traverse(function (object) {\n      if (object instanceof PANOLENS.Infospot) {\n        visible ? object.show(delay) : object.hide(delay);\n      }\n    });\n\n    this.isInfospotVisible = visible;\n\n    this.infospotAnimation.onComplete(function () {\n      scope.dispatchEvent({ type: 'infospot-animation-complete', visible: visible });\n    }).delay(delay).start();\n  };\n\n  PANOLENS.Panorama.prototype.setLinkingImage = function (url, scale) {\n    this.linkingImageURL = url;\n    this.linkingImageScale = scale;\n  };\n\n  PANOLENS.Panorama.prototype.link = function (pano, position, imageScale, imageSrc) {\n    var scope = this,\n        spot,\n        scale,\n        img;\n\n    this.visible = true;\n\n    if (!position) {\n      console.warn('Please specify infospot position for linking');\n\n      return;\n    }\n\n    if (imageScale !== undefined) {\n      scale = imageScale;\n    } else if (pano.linkingImageScale !== undefined) {\n      scale = pano.linkingImageScale;\n    } else {\n      scale = 300;\n    }\n\n    if (imageSrc) {\n      img = imageSrc;\n    } else if (pano.linkingImageURL) {\n      img = pano.linkingImageURL;\n    } else {\n      img = PANOLENS.DataImage.Arrow;\n    }\n\n    spot = new PANOLENS.Infospot(scale, img);\n    spot.position.copy(position);\n    spot.toPanorama = pano;\n    spot.addEventListener('click', function () {\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setPanorama', data: pano });\n    });\n\n    this.linkedSpots.push(spot);\n\n    this.add(spot);\n\n    this.visible = false;\n  };\n\n  PANOLENS.Panorama.prototype.reset = function () {\n    this.children.length = 0;\n  };\n\n  PANOLENS.Panorama.prototype.setupTransitions = function () {\n    this.fadeInAnimation = new TWEEN.Tween(this.material).easing(TWEEN.Easing.Quartic.Out).onStart(function () {\n      this.visible = true;\n      this.material.visible = true;\n\n      this.dispatchEvent({ type: 'enter-fade-start' });\n    }.bind(this));\n\n    this.fadeOutAnimation = new TWEEN.Tween(this.material).easing(TWEEN.Easing.Quartic.Out).onComplete(function () {\n      this.visible = false;\n      this.material.visible = true;\n\n      this.dispatchEvent({ type: 'leave-complete' });\n    }.bind(this));\n\n    this.enterTransition = new TWEEN.Tween(this).easing(TWEEN.Easing.Quartic.Out).onComplete(function () {\n      this.dispatchEvent({ type: 'enter-animation-complete' });\n    }.bind(this)).start();\n\n    this.leaveTransition = new TWEEN.Tween(this).easing(TWEEN.Easing.Quartic.Out);\n  };\n\n  PANOLENS.Panorama.prototype.fadeIn = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration;\n\n    this.fadeOutAnimation.stop();\n    this.fadeInAnimation.to({ opacity: 1 }, duration).onComplete(function () {\n      this.toggleInfospotVisibility(true, duration / 2);\n\n      this.dispatchEvent({ type: 'enter-fade-complete' });\n    }.bind(this)).start();\n  };\n\n  PANOLENS.Panorama.prototype.fadeOut = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration;\n\n    this.fadeInAnimation.stop();\n    this.fadeOutAnimation.to({ opacity: 0 }, duration).start();\n  };\n\n  PANOLENS.Panorama.prototype.onEnter = function () {\n    var duration = this.animationDuration;\n\n    this.leaveTransition.stop();\n    this.enterTransition.to({}, duration).onStart(function () {\n      this.dispatchEvent({ type: 'enter-animation-start' });\n\n      if (this.loaded) {\n        this.fadeIn(duration);\n      } else {\n        this.load();\n      }\n    }.bind(this)).start();\n\n    this.dispatchEvent({ type: 'enter' });\n  };\n\n  PANOLENS.Panorama.prototype.onLeave = function () {\n    var duration = this.animationDuration;\n\n    this.enterTransition.stop();\n    this.leaveTransition.to({}, duration).onStart(function () {\n      this.dispatchEvent({ type: 'leave-animation-start' });\n\n      this.fadeOut(duration);\n      this.toggleInfospotVisibility(false);\n    }.bind(this)).start();\n\n    this.dispatchEvent({ type: 'leave' });\n  };\n\n  PANOLENS.Panorama.prototype.dispose = function () {\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this });\n\n    function recursiveDispose(object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i]);\n        object.remove(object.children[i]);\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose();\n      }\n\n      object.geometry && object.geometry.dispose();\n      object.material && object.material.dispose();\n    }\n\n    recursiveDispose(this);\n\n    if (this.parent) {\n      this.parent.remove(this);\n    }\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.ImagePanorama = function (image, radius) {\n    radius = radius || 5000;\n\n    var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"SphereGeometry\"](radius, 60, 40),\n        material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ opacity: 0, transparent: true });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n\n    this.src = image;\n  };\n\n  PANOLENS.ImagePanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.ImagePanorama.prototype.constructor = PANOLENS.ImagePanorama;\n\n  PANOLENS.ImagePanorama.prototype.load = function (src) {\n    src = src || this.src;\n\n    if (!src) {\n      console.warn('Image source undefined');\n    } else if (typeof src === 'string') {\n      PANOLENS.Utils.TextureLoader.load(src, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this));\n    } else if (src instanceof HTMLImageElement) {\n      this.onLoad(new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"](src));\n    }\n  };\n\n  PANOLENS.ImagePanorama.prototype.onLoad = function (texture) {\n    texture.minFilter = texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\n    texture.needsUpdate = true;\n\n    this.updateTexture(texture);\n\n    window.requestAnimationFrame(function () {\n      window.requestAnimationFrame(function () {\n        PANOLENS.Panorama.prototype.onLoad.call(this);\n      }.bind(this));\n    }.bind(this));\n  };\n\n  PANOLENS.ImagePanorama.prototype.reset = function () {\n    PANOLENS.Panorama.prototype.reset.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.GoogleStreetviewPanorama = function (panoId, radius) {\n    PANOLENS.ImagePanorama.call(this, undefined, radius);\n\n    this.panoId = panoId;\n\n    this.gsvLoader = undefined;\n\n    this.loadRequested = false;\n\n    this.setupGoogleMapAPI();\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.ImagePanorama.prototype);\n\n  PANOLENS.GoogleStreetviewPanorama.constructor = PANOLENS.GoogleStreetviewPanorama;\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.load = function (panoId) {\n    this.loadRequested = true;\n\n    panoId = panoId || this.panoId || {};\n\n    if (panoId && this.gsvLoader) {\n      this.loadGSVLoader(panoId);\n    } else {\n      this.gsvLoader = {};\n    }\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI = function () {\n    var script = document.createElement('script');\n    script.src = 'https://maps.googleapis.com/maps/api/js';\n    script.onreadystatechange = this.setGSVLoader.bind(this);\n    script.onload = this.setGSVLoader.bind(this);\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader = function () {\n    this.gsvLoader = new GSVPANO.PanoLoader();\n\n    if (this.gsvLoader === {} || this.loadRequested) {\n      this.load();\n    }\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader = function () {\n    return this.gsvLoader;\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader = function (panoId) {\n    this.loadRequested = false;\n\n    this.gsvLoader.onProgress = this.onProgress.bind(this);\n\n    this.gsvLoader.onPanoramaLoad = this.onLoad.bind(this);\n\n    this.gsvLoader.setZoom(this.getZoomLevel());\n\n    this.gsvLoader.load(panoId);\n\n    this.gsvLoader.loaded = true;\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.onLoad = function (canvas) {\n    if (!this.gsvLoader) {\n      return;\n    }\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"](canvas));\n  };\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.reset = function () {\n    this.gsvLoader = undefined;\n\n    PANOLENS.ImagePanorama.prototype.reset.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.CubePanorama = function (images, edgeLength) {\n    var shader, geometry, material;\n\n    this.images = images || [];\n\n    edgeLength = edgeLength || 10000;\n    shader = JSON.parse(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderLib\"]['cube']));\n\n    geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BoxGeometry\"](edgeLength, edgeLength, edgeLength);\n    material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderMaterial\"]({\n\n      fragmentShader: shader.fragmentShader,\n      vertexShader: shader.vertexShader,\n      uniforms: shader.uniforms,\n      side: __WEBPACK_IMPORTED_MODULE_8_three__[\"BackSide\"]\n\n    });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n  };\n\n  PANOLENS.CubePanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.CubePanorama.prototype.constructor = PANOLENS.CubePanorama;\n\n  PANOLENS.CubePanorama.prototype.load = function () {\n    PANOLENS.Utils.CubeTextureLoader.load(this.images, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this));\n  };\n\n  PANOLENS.CubePanorama.prototype.onLoad = function (texture) {\n    this.material.uniforms['tCube'].value = texture;\n\n    PANOLENS.Panorama.prototype.onLoad.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.BasicPanorama = function (edgeLength) {\n    var tile = PANOLENS.DataImage.WhiteTile;\n\n    PANOLENS.CubePanorama.call(this, [tile, tile, tile, tile, tile, tile], edgeLength);\n  };\n\n  PANOLENS.BasicPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.CubePanorama.prototype);\n\n  PANOLENS.BasicPanorama.prototype.constructor = PANOLENS.BasicPanorama;\n})();(function () {\n  'use strict';\n\n  PANOLENS.VideoPanorama = function (src, options, radius) {\n    radius = radius || 5000;\n\n    var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"SphereGeometry\"](radius, 60, 40),\n        material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ opacity: 0, transparent: true });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n\n    this.src = src;\n    this.options = options || {};\n    this.options.playsinline = this.options.playsinline !== false;\n\n    this.videoElement = undefined;\n    this.videoRenderObject = undefined;\n    this.videoProgress = 0;\n\n    this.isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);\n    this.isMobile = this.isIOS || /Android|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent);\n\n    this.addEventListener('leave', this.pauseVideo.bind(this));\n    this.addEventListener('enter-fade-start', this.resumeVideoProgress.bind(this));\n    this.addEventListener('video-toggle', this.toggleVideo.bind(this));\n    this.addEventListener('video-time', this.setVideoCurrentTime.bind(this));\n  };\n\n  PANOLENS.VideoPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.VideoPanorama.constructor = PANOLENS.VideoPanorama;\n\n  PANOLENS.VideoPanorama.prototype.load = function (src, options) {\n    var scope = this;\n\n    src = src || this.src || '';\n    options = options || this.options || {};\n\n    this.videoElement = options.videoElement || document.createElement('video');\n\n    this.videoElement.muted = options.muted || false;\n    this.videoElement.loop = options.loop !== undefined ? options.loop : true;\n    this.videoElement.autoplay = options.autoplay !== undefined ? options.autoplay : false;\n    this.videoElement.crossOrigin = options.crossOrigin !== undefined ? options.crossOrigin : 'anonymous';\n\n    if (options.playsinline) {\n      this.videoElement.setAttribute('playsinline', '');\n      this.videoElement.setAttribute('webkit-playsinline', '');\n    }\n\n    var onloadeddata = function onloadeddata() {\n      scope.onProgress({ loaded: 1, total: 1 });\n      scope.setVideoTexture(scope.videoElement);\n\n      if (scope.videoElement.autoplay) {\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n      }\n\n      if (scope.isMobile) {\n        if (scope.videoElement.autoplay && scope.videoElement.muted) {\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n        } else {\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n        }\n      }\n\n      scope.onLoad();\n    };\n\n    if (this.videoElement.readyState > 2) {\n      onloadeddata();\n    } else {\n      if (!this.videoElement.querySelectorAll('source').length || !this.videoElement.src) {\n        this.videoElement.src = src;\n      }\n\n      this.videoElement.load();\n    }\n\n    this.videoElement.onloadeddata = onloadeddata;\n\n    this.videoElement.ontimeupdate = function (event) {\n      scope.videoProgress = this.duration >= 0 ? this.currentTime / this.duration : 0;\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: scope.videoProgress });\n    };\n\n    this.videoElement.addEventListener('ended', function () {\n      if (!scope.options.loop) {\n        scope.resetVideo();\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n      }\n    }, false);\n  };\n\n  PANOLENS.VideoPanorama.prototype.setVideoTexture = function (video) {\n    var videoTexture, videoRenderObject, scene;\n\n    if (!video) return;\n\n    videoTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"VideoTexture\"](video);\n    videoTexture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    videoTexture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    videoTexture.format = __WEBPACK_IMPORTED_MODULE_8_three__[\"RGBFormat\"];\n\n    videoRenderObject = {\n\n      video: video,\n      videoTexture: videoTexture\n\n    };\n\n    if (this.isIOS) {\n      enableInlineVideo(video);\n    }\n\n    this.updateTexture(videoTexture);\n\n    this.videoRenderObject = videoRenderObject;\n  };\n\n  PANOLENS.VideoPanorama.prototype.reset = function () {\n    this.videoElement = undefined;\n\n    PANOLENS.Panorama.prototype.reset.call(this);\n  };\n\n  PANOLENS.VideoPanorama.prototype.isVideoPaused = function () {\n    return this.videoRenderObject.video.paused;\n  };\n\n  PANOLENS.VideoPanorama.prototype.toggleVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      if (this.isVideoPaused()) {\n        this.videoRenderObject.video.play();\n      } else {\n        this.videoRenderObject.video.pause();\n      }\n    }\n  };\n\n  PANOLENS.VideoPanorama.prototype.setVideoCurrentTime = function (event) {\n    if (this.videoRenderObject && this.videoRenderObject.video && !__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default()(event.percentage) && event.percentage !== 1) {\n      this.videoRenderObject.video.currentTime = this.videoRenderObject.video.duration * event.percentage;\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: event.percentage });\n    }\n  };\n\n  PANOLENS.VideoPanorama.prototype.playVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoPaused()) {\n      this.videoRenderObject.video.play();\n    }\n\n    this.dispatchEvent({ type: 'play' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.pauseVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoPaused()) {\n      this.videoRenderObject.video.pause();\n    }\n\n    this.dispatchEvent({ type: 'pause' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.resumeVideoProgress = function () {\n    if (this.videoElement.autoplay && !this.isMobile) {\n      this.playVideo();\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n    } else {\n      this.pauseVideo();\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n    }\n\n    this.setVideoCurrentTime({ percentage: this.videoProgress });\n  };\n\n  PANOLENS.VideoPanorama.prototype.resetVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      this.setVideoCurrentTime({ percentage: 0 });\n    }\n  };\n\n  PANOLENS.VideoPanorama.prototype.isVideoMuted = function () {\n    return this.videoRenderObject.video.muted;\n  };\n\n  PANOLENS.VideoPanorama.prototype.muteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = true;\n    }\n\n    this.dispatchEvent({ type: 'volumechange' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.unmuteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = false;\n    }\n\n    this.dispatchEvent({ type: 'volumechange' });\n  };\n\n  PANOLENS.VideoPanorama.prototype.getVideoElement = function () {\n    return this.videoRenderObject.video;\n  };\n\n  PANOLENS.VideoPanorama.prototype.dispose = function () {\n    this.resetVideo();\n    this.pauseVideo();\n\n    this.removeEventListener('leave', this.pauseVideo.bind(this));\n    this.removeEventListener('enter-fade-start', this.resumeVideoProgress.bind(this));\n    this.removeEventListener('video-toggle', this.toggleVideo.bind(this));\n    this.removeEventListener('video-time', this.setVideoCurrentTime.bind(this));\n\n    PANOLENS.Panorama.prototype.dispose.call(this);\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.EmptyPanorama = function (radius) {\n    radius = radius || 5000;\n\n    var geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Geometry\"](),\n        material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({\n      color: 0x000000, opacity: 1, transparent: true\n    });\n\n    PANOLENS.Panorama.call(this, geometry, material);\n  };\n\n  PANOLENS.EmptyPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n  PANOLENS.EmptyPanorama.prototype.constructor = PANOLENS.EmptyPanorama;\n})();(function () {\n  PANOLENS.LittlePlanet = function (type, source, size, ratio) {\n    type = type || 'image';\n\n    type === 'image' && PANOLENS.ImagePanorama.call(this, source, size);\n\n    this.size = size || 10000;\n    this.ratio = ratio || 0.5;\n    this.EPS = 0.000001;\n    this.frameId;\n\n    this.geometry = this.createGeometry();\n    this.material = this.createMaterial(this.size);\n\n    this.dragging = false;\n    this.userMouse = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n    this.quatA = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    this.quatB = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    this.quatCur = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n    this.quatSlerp = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n    this.vectorX = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n    this.vectorY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n\n    this.addEventListener('window-resize', this.onWindowResize);\n  };\n\n  PANOLENS.LittlePlanet.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.ImagePanorama.prototype);\n\n  PANOLENS.LittlePlanet.prototype.constructor = PANOLENS.LittlePlanet;\n\n  PANOLENS.LittlePlanet.prototype.createGeometry = function () {\n    return new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneGeometry\"](this.size, this.size * this.ratio);\n  };\n\n  PANOLENS.LittlePlanet.prototype.createMaterial = function (size) {\n    var uniforms = PANOLENS.StereographicShader.uniforms;\n    uniforms.zoom.value = size;\n\n    return new __WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderMaterial\"]({\n\n      uniforms: uniforms,\n      vertexShader: PANOLENS.StereographicShader.vertexShader,\n      fragmentShader: PANOLENS.StereographicShader.fragmentShader\n\n    });\n  };\n\n  PANOLENS.LittlePlanet.prototype.registerMouseEvents = function () {\n    this.container.addEventListener('mousedown', this.onMouseDown.bind(this), false);\n    this.container.addEventListener('mousemove', this.onMouseMove.bind(this), false);\n    this.container.addEventListener('mouseup', this.onMouseUp.bind(this), false);\n    this.container.addEventListener('touchstart', this.onMouseDown.bind(this), false);\n    this.container.addEventListener('touchmove', this.onMouseMove.bind(this), false);\n    this.container.addEventListener('touchend', this.onMouseUp.bind(this), false);\n    this.container.addEventListener('mousewheel', this.onMouseWheel.bind(this), false);\n    this.container.addEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false);\n    this.container.addEventListener('contextmenu', this.onContextMenu.bind(this), false);\n  };\n\n  PANOLENS.LittlePlanet.prototype.unregisterMouseEvents = function () {\n    this.container.removeEventListener('mousedown', this.onMouseDown.bind(this), false);\n    this.container.removeEventListener('mousemove', this.onMouseMove.bind(this), false);\n    this.container.removeEventListener('mouseup', this.onMouseUp.bind(this), false);\n    this.container.removeEventListener('touchstart', this.onMouseDown.bind(this), false);\n    this.container.removeEventListener('touchmove', this.onMouseMove.bind(this), false);\n    this.container.removeEventListener('touchend', this.onMouseUp.bind(this), false);\n    this.container.removeEventListener('mousewheel', this.onMouseWheel.bind(this), false);\n    this.container.removeEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false);\n    this.container.removeEventListener('contextmenu', this.onContextMenu.bind(this), false);\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseDown = function (event) {\n    var x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n    var y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\n    var inputCount = event.touches && event.touches.length || 1;\n\n    switch (inputCount) {\n      case 1:\n\n        this.dragging = true;\n        this.userMouse.set(x, y);\n\n        break;\n\n      case 2:\n\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        this.userMouse.pinchDistance = distance;\n\n        break;\n\n      default:\n\n        break;\n    }\n\n    this.onUpdateCallback();\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseMove = function (event) {\n    var x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n    var y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\n    var inputCount = event.touches && event.touches.length || 1;\n\n    switch (inputCount) {\n      case 1:\n\n        var angleX = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(x - this.userMouse.x) * 0.4;\n        var angleY = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(y - this.userMouse.y) * 0.4;\n\n        if (this.dragging) {\n          this.quatA.setFromAxisAngle(this.vectorY, angleX);\n          this.quatB.setFromAxisAngle(this.vectorX, angleY);\n          this.quatCur.multiply(this.quatA).multiply(this.quatB);\n          this.userMouse.set(x, y);\n        }\n\n        break;\n\n      case 2:\n\n        var uniforms = this.material.uniforms;\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n\n        this.addZoomDelta(this.userMouse.pinchDistance - distance);\n\n        break;\n\n      default:\n\n        break;\n    }\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseUp = function (event) {\n    this.dragging = false;\n  };\n\n  PANOLENS.LittlePlanet.prototype.onMouseWheel = function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    var delta = 0;\n\n    if (event.wheelDelta !== undefined) {\n      delta = event.wheelDelta;\n    } else if (event.detail !== undefined) {\n      delta = -event.detail;\n    }\n\n    this.addZoomDelta(delta);\n    this.onUpdateCallback();\n  };\n\n  PANOLENS.LittlePlanet.prototype.addZoomDelta = function (delta) {\n    var uniforms = this.material.uniforms;\n    var lowerBound = this.size * 0.1;\n    var upperBound = this.size * 10;\n\n    uniforms.zoom.value += delta;\n\n    if (uniforms.zoom.value <= lowerBound) {\n      uniforms.zoom.value = lowerBound;\n    } else if (uniforms.zoom.value >= upperBound) {\n      uniforms.zoom.value = upperBound;\n    }\n  };\n\n  PANOLENS.LittlePlanet.prototype.onUpdateCallback = function () {\n    this.frameId = window.requestAnimationFrame(this.onUpdateCallback.bind(this));\n\n    this.quatSlerp.slerp(this.quatCur, 0.1);\n    this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp);\n\n    if (!this.dragging && 1.0 - this.quatSlerp.clone().dot(this.quatCur) < this.EPS) {\n      window.cancelAnimationFrame(this.frameId);\n    }\n  };\n\n  PANOLENS.LittlePlanet.prototype.reset = function () {\n    this.quatCur.set(0, 0, 0, 1);\n    this.quatSlerp.set(0, 0, 0, 1);\n    this.onUpdateCallback();\n  };\n\n  PANOLENS.LittlePlanet.prototype.onLoad = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\n    this.registerMouseEvents();\n    this.onUpdateCallback();\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'disableControl' });\n  };\n\n  PANOLENS.LittlePlanet.prototype.onLeave = function () {\n    this.unregisterMouseEvents();\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'enableControl', data: PANOLENS.Controls.ORBIT });\n\n    window.cancelAnimationFrame(this.frameId);\n\n    PANOLENS.Panorama.prototype.onLeave.call(this);\n  };\n\n  PANOLENS.LittlePlanet.prototype.onWindowResize = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n  };\n\n  PANOLENS.LittlePlanet.prototype.onContextMenu = function () {\n    this.dragging = false;\n  };\n})();(function () {\n  PANOLENS.ImageLittlePlanet = function (source, size, ratio) {\n    PANOLENS.LittlePlanet.call(this, 'image', source, size, ratio);\n  };\n\n  PANOLENS.ImageLittlePlanet.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.LittlePlanet.prototype);\n\n  PANOLENS.ImageLittlePlanet.prototype.constructor = PANOLENS.ImageLittlePlanet;\n\n  PANOLENS.ImageLittlePlanet.prototype.onLoad = function (texture) {\n    this.updateTexture(texture);\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, texture);\n    PANOLENS.LittlePlanet.prototype.onLoad.call(this);\n  };\n\n  PANOLENS.ImageLittlePlanet.prototype.updateTexture = function (texture) {\n    texture.minFilter = texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\n    this.material.uniforms['tDiffuse'].value = texture;\n  };\n})();(function () {\n  PANOLENS.Reticle = function (color, autoSelect, idleImageUrl, dwellImageUrl, dwellTime, dwellSpriteAmount) {\n    color = color || 0xffffff;\n\n    this.autoSelect = autoSelect != undefined ? autoSelect : true;\n\n    this.dwellTime = dwellTime || 1500;\n    this.dwellSpriteAmount = dwellSpriteAmount || 45;\n    this.dwellInterval = this.dwellTime / this.dwellSpriteAmount;\n\n    this.IDLE = 0;\n    this.DWELLING = 1;\n    this.status;\n\n    this.scaleIdle = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0.2, 0.2, 1);\n    this.scaleDwell = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0.8, 1);\n\n    this.textureLoaded = false;\n    this.idleImageUrl = idleImageUrl || PANOLENS.DataImage.ReticleIdle;\n    this.dwellImageUrl = dwellImageUrl || PANOLENS.DataImage.ReticleDwell;\n    this.idleTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n    this.dwellTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"SpriteMaterial\"]({ color: color, depthTest: false }));\n\n    this.currentTile = 0;\n    this.startTime = 0;\n\n    this.visible = false;\n    this.renderOrder = 10;\n    this.timerId;\n\n    this.updateStatus(this.IDLE);\n  };\n\n  PANOLENS.Reticle.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].prototype);\n\n  PANOLENS.Reticle.prototype.constructor = PANOLENS.Reticle;\n\n  PANOLENS.Reticle.prototype.show = function () {\n    this.visible = true;\n  };\n\n  PANOLENS.Reticle.prototype.hide = function () {\n    this.visible = false;\n  };\n\n  PANOLENS.Reticle.prototype.loadTextures = function () {\n    this.idleTexture = PANOLENS.Utils.TextureLoader.load(this.idleImageUrl);\n    this.dwellTexture = PANOLENS.Utils.TextureLoader.load(this.dwellImageUrl);\n\n    this.material.map = this.idleTexture;\n    this.setupDwellSprite(this.dwellTexture);\n    this.textureLoaded = true;\n  };\n\n  PANOLENS.Reticle.prototype.select = function (completeCallback) {\n    if (performance.now() - this.startTime >= this.dwellTime) {\n      this.completeDwelling();\n      completeCallback();\n    } else if (this.autoSelect) {\n      this.updateDwelling(performance.now());\n      this.timerId = window.requestAnimationFrame(this.select.bind(this, completeCallback));\n    }\n  };\n\n  PANOLENS.Reticle.prototype.clearTimer = function () {\n    window.cancelAnimationFrame(this.timerId);\n    this.timerId = null;\n  };\n\n  PANOLENS.Reticle.prototype.setupDwellSprite = function (texture) {\n    texture.wrapS = __WEBPACK_IMPORTED_MODULE_8_three__[\"RepeatWrapping\"];\n    texture.repeat.set(1 / this.dwellSpriteAmount, 1);\n  };\n\n  PANOLENS.Reticle.prototype.updateStatus = function (status) {\n    this.status = status;\n\n    if (status === this.IDLE) {\n      this.scale.copy(this.scaleIdle);\n      this.material.map = this.idleTexture;\n    } else if (status === this.DWELLING) {\n      this.scale.copy(this.scaleDwell);\n      this.material.map = this.dwellTexture;\n    }\n\n    this.currentTile = 0;\n    this.material.map.offset.x = 0;\n  };\n\n  PANOLENS.Reticle.prototype.startDwelling = function (completeCallback) {\n    if (!this.autoSelect) {\n      return;\n    }\n\n    this.startTime = performance.now();\n    this.updateStatus(this.DWELLING);\n    this.select(completeCallback);\n  };\n\n  PANOLENS.Reticle.prototype.updateDwelling = function (time) {\n    var elasped = time - this.startTime;\n\n    if (this.currentTile <= this.dwellSpriteAmount) {\n      this.currentTile = Math.floor(elasped / this.dwellTime * this.dwellSpriteAmount);\n      this.material.map.offset.x = this.currentTile / this.dwellSpriteAmount;\n    } else {\n      this.updateStatus(this.IDLE);\n    }\n  };\n\n  PANOLENS.Reticle.prototype.cancelDwelling = function () {\n    this.clearTimer();\n    this.updateStatus(this.IDLE);\n  };\n\n  PANOLENS.Reticle.prototype.completeDwelling = function () {\n    this.clearTimer();\n    this.updateStatus(this.IDLE);\n  };\n})();(function () {\n  PANOLENS.Tile = function (width, height, widthSegments, heightSegments, forceDirection, forceAxis, forceAngle) {\n    var scope = this;\n\n    this.parameters = {\n      width: width,\n      height: height,\n      widthSegments: widthSegments,\n      heightSegments: heightSegments,\n      forceDirection: forceDirection,\n      forceAxis: forceAxis,\n      forceAngle: forceAngle\n    };\n\n    width = width || 10;\n    height = height || 5;\n    widthSegments = widthSegments || 1;\n    heightSegments = heightSegments || 1;\n    forceDirection = forceDirection || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 0, 1);\n    forceAxis = forceAxis || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n    forceAngle = forceAngle !== undefined ? forceAngle : 0;\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneGeometry\"](width, height, widthSegments, heightSegments), new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ color: 0xffffff, transparent: true }));\n\n    this.bendModifier = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"]();\n\n    this.entity = undefined;\n\n    this.animationDuration = 500;\n    this.animationFadeOut = undefined;\n    this.animationFadeIn = undefined;\n    this.animationTranslation = undefined;\n    this.tweens = {};\n\n    if (forceAngle !== 0) {\n      this.bend(forceDirection, forceAxis, forceAngle);\n    }\n\n    this.originalGeometry = this.geometry.clone();\n  };\n\n  PANOLENS.Tile.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].prototype);\n\n  PANOLENS.Tile.prototype.constructor = PANOLENS.Tile;\n\n  PANOLENS.Tile.prototype.clone = function () {\n    var parameters = this.parameters,\n        tile;\n\n    tile = new PANOLENS.Tile(parameters.width, parameters.height, parameters.widthSegments, parameters.heightSegments, parameters.forceDirection, parameters.forceAxis, parameters.forceAngle);\n\n    tile.setEntity(this.entity);\n    tile.material = this.material.clone();\n\n    return tile;\n  };\n\n  PANOLENS.Tile.prototype.bend = function (direction, axis, angle) {\n    this.bendModifier.set(direction, axis, angle).modify(this.geometry);\n  };\n\n  PANOLENS.Tile.prototype.unbend = function () {\n    var geometry = this.geometry;\n\n    this.geometry = this.originalGeometry;\n    this.originalGeometry = this.geometry.clone();\n\n    geometry.dispose();\n    geometry = null;\n  };\n\n  PANOLENS.Tile.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this;\n    toState = toState || {};\n    duration = duration || this.animationDuration;\n    easing = easing || TWEEN.Easing.Exponential.Out;\n    delay = delay !== undefined ? delay : 0;\n    onStart = onStart || null;\n    onUpdate = onUpdate || null;\n    onComplete = onComplete || null;\n\n    if (!this.tweens[name]) {\n      this.tweens[name] = new TWEEN.Tween(object).to(toState, duration).easing(easing).delay(delay).onStart(onStart).onUpdate(onUpdate).onComplete(onComplete);\n    }\n\n    return this.tweens[name];\n  };\n\n  PANOLENS.Tile.prototype.ripple = function (scale, duration, easing) {\n    scale = scale || 2;\n    duration = duration || 200;\n    easing = easing || TWEEN.Easing.Cubic.Out;\n\n    var scope = this,\n        ripple = this.clone();\n\n    new TWEEN.Tween(ripple.scale).to({ x: scale, y: scale }, duration).easing(easing).start();\n\n    new TWEEN.Tween(ripple.material).to({ opacity: 0 }, duration).easing(easing).onComplete(function () {\n      scope.remove(ripple);\n      ripple.geometry.dispose();\n      ripple.material.dispose();\n    }).start();\n\n    this.add(ripple);\n  };\n\n  PANOLENS.Tile.prototype.setEntity = function (entity) {\n    this.entity = entity;\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.TileGroup = function (tileArray, verticalGap, depthGap, animationDuration, offset) {\n    var scope = this,\n        textureLoader;\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].call(this);\n\n    this.tileArray = tileArray || [];\n    this.offset = offset !== undefined ? offset : 0;\n    this.v_gap = verticalGap !== undefined ? verticalGap : 6;\n    this.d_gap = depthGap !== undefined ? depthGap : 2;\n    this.animationDuration = animationDuration !== undefined ? animationDuration : 200;\n    this.animationEasing = TWEEN.Easing.Exponential.Out;\n    this.visibleDelta = 2;\n\n    this.tileArray.map(function (tile, index) {\n      if (tile.image) {\n        PANOLENS.Utils.TextureLoader.load(tile.image, scope.setTexture.bind(tile));\n      }\n\n      tile.position.set(0, index * -scope.v_gap, index * -scope.d_gap);\n      tile.originalPosition = tile.position.clone();\n      tile.setEntity(scope);\n      scope.add(tile);\n    });\n\n    this.updateVisbility();\n  };\n\n  PANOLENS.TileGroup.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype);\n\n  PANOLENS.TileGroup.prototype.constructor = PANOLENS.TileGroup;\n\n  PANOLENS.TileGroup.prototype.updateTexture = function (imageArray) {\n    var scope = this;\n\n    imageArray = imageArray || [];\n    this.children.map(function (child, index) {\n      if (child instanceof PANOLENS.Tile && imageArray[index]) {\n        PANOLENS.Utils.TextureLoader.load(imageArray[index], scope.setTexture.bind(child));\n        if (child.outline) {\n          child.outline.material.visible = true;\n        }\n      }\n    });\n  };\n\n  PANOLENS.TileGroup.prototype.updateAllTexture = function (imageArray) {\n    this.updateTexture(imageArray);\n\n    if (imageArray.length < this.children.length) {\n      for (var i = imageArray.length; i < this.children.length; i++) {\n        if (this.children[i] instanceof PANOLENS.Tile) {\n          this.children[i].material.visible = false;\n          if (this.children[i].outline) {\n            this.children[i].outline.material.visible = false;\n          }\n        }\n      }\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.setTexture = function (texture) {\n    texture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    this.material.visible = true;\n    this.material.map = texture;\n    this.material.needsUpdate = true;\n  };\n\n  PANOLENS.TileGroup.prototype.updateVisbility = function () {\n    this.children[this.offset].visible = true;\n    new TWEEN.Tween(this.children[this.offset].material).to({ opacity: 1 }, this.animationDuration).easing(this.animationEasing).start();\n\n    if (this.children[this.offset].outline) {\n      this.children[this.offset].outline.visible = true;\n    }\n\n    for (var i = this.offset - 1; i >= 0; i--) {\n      if (this.tileArray.indexOf(this.children[i]) === -1) {\n        continue;\n      }\n\n      if (this.offset - i <= this.visibleDelta) {\n        this.children[i].visible = true;\n        new TWEEN.Tween(this.children[i].material).to({ opacity: 1 / (this.offset - i) * 0.5 }, this.animationDuration).easing(this.animationEasing).start();\n      } else {\n        this.children[i].visible = false;\n      }\n\n      this.children[i].outline && (this.children[i].outline.visible = false);\n    }\n\n    for (var i = this.offset + 1; i < this.children.length; i++) {\n      if (this.tileArray.indexOf(this.children[i]) === -1) {\n        continue;\n      }\n\n      if (i - this.offset <= this.visibleDelta) {\n        this.children[i].visible = true;\n        new TWEEN.Tween(this.children[i].material).to({ opacity: 1 / (i - this.offset) * 0.5 }, this.animationDuration).easing(this.animationEasing).start();\n      } else {\n        this.children[i].visible = false;\n      }\n\n      this.children[i].outline && (this.children[i].outline.visible = false);\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.scrollUp = function (duration) {\n    var tiles = this.tileArray,\n        offset;\n\n    duration = duration !== undefined ? duration : this.animationDuration;\n\n    offset = this.offset + 1;\n\n    if (this.offset < tiles.length - 1 && tiles[this.offset + 1].material.visible) {\n      for (var i = tiles.length - 1; i >= 0; i--) {\n        new TWEEN.Tween(tiles[i].position).to({ y: (i - offset) * -this.v_gap,\n          z: Math.abs(i - offset) * -this.d_gap }, duration).easing(this.animationEasing).start();\n      }\n\n      this.offset++;\n      this.updateVisbility();\n      this.dispatchEvent({ type: 'scroll', direction: 'up' });\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.scrollDown = function (duration) {\n    var tiles = this.tileArray,\n        offset;\n\n    duration = duration !== undefined ? duration : this.animationDuration;\n\n    offset = this.offset - 1;\n\n    if (this.offset > 0 && tiles[this.offset - 1].material.visible) {\n      for (var i = 0; i < tiles.length; i++) {\n        new TWEEN.Tween(tiles[i].position).to({ y: (i - offset) * -this.v_gap,\n          z: Math.abs(i - offset) * -this.d_gap }, duration).easing(this.animationEasing).start();\n      }\n\n      this.offset--;\n      this.updateVisbility();\n      this.dispatchEvent({ type: 'scroll', direction: 'down' });\n    }\n  };\n\n  PANOLENS.TileGroup.prototype.reset = function () {\n    this.tileArray.map(function (child, index) {\n      child.position.copy(child.originalPosition);\n    });\n\n    this.offset = 0;\n    this.updateVisbility();\n  };\n\n  PANOLENS.TileGroup.prototype.getIndex = function () {\n    return this.offset;\n  };\n\n  PANOLENS.TileGroup.prototype.getTileCount = function () {\n    var count = 0;\n\n    this.tileArray.map(function (tile) {\n      if (tile.material.visible) {\n        count++;\n      }\n    });\n\n    return count;\n  };\n})();(function () {\n  'use strict';\n\n  var sharedFont, sharedTexture;\n  var pendingQueue = [];\n\n  PANOLENS.SpriteText = function (text, maxWidth, color, opacity, options) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].call(this);\n\n    this.text = text || '';\n    this.maxWidth = maxWidth || 2000;\n    this.color = color || 0xffffff;\n    this.opacity = opacity !== undefined ? opacity : 1;\n    this.options = options || {};\n\n    this.animationDuration = 500;\n    this.animationFadeOut = undefined;\n    this.animationFadeIn = undefined;\n    this.tweens = {};\n\n    this.addText(text);\n  };\n\n  PANOLENS.SpriteText.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype);\n\n  PANOLENS.SpriteText.prototype.constructor = PANOLENS.SpriteText;\n\n  PANOLENS.SpriteText.prototype.generateTextGeometry = function () {};\n  PANOLENS.SpriteText.prototype.generateSDFShader = function () {};\n\n  PANOLENS.SpriteText.prototype.setBMFont = function (callback, font, texture) {\n    texture.needsUpdate = true;\n    texture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearMipMapLinearFilter\"];\n    texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n    texture.generateMipmaps = true;\n    texture.anisotropy = 8;\n\n    sharedFont = font;\n    sharedTexture = texture;\n\n    for (var i = pendingQueue.length - 1; i >= 0; i--) {\n      pendingQueue[i].target.addText(pendingQueue[i].text);\n    }\n\n    while (pendingQueue.length > 0) {\n      pendingQueue.pop();\n    }\n\n    callback && callback();\n  };\n\n  PANOLENS.SpriteText.prototype.addText = function (text) {\n    if (!sharedFont || !sharedTexture) {\n      pendingQueue.push({ target: this, text: text });\n      return;\n    }\n\n    var textAnchor = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"]();\n\n    this.options.text = text;\n    this.options.font = sharedFont;\n    this.options.width = this.maxWidth;\n\n    var geometry = this.generateTextGeometry(this.options);\n    geometry.computeBoundingBox();\n    geometry.computeBoundingSphere();\n\n    var material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"RawShaderMaterial\"](this.generateSDFShader({\n      map: sharedTexture,\n      side: __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"],\n      transparent: true,\n      color: this.color,\n      opacity: this.opacity\n    }));\n\n    var layout = geometry.layout;\n    var textMesh = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"](geometry, material);\n\n    textMesh.entity = this;\n    textMesh.position.x = -layout.width / 2;\n    textMesh.position.y = layout.height * 1.035;\n\n    textAnchor.scale.x = textAnchor.scale.y = -0.05;\n    textAnchor.add(textMesh);\n\n    this.mesh = textMesh;\n    this.add(textAnchor);\n  };\n\n  PANOLENS.SpriteText.prototype.update = function (options) {\n    var mesh;\n\n    options = options || {};\n\n    mesh = this.mesh;\n\n    mesh.geometry.update(options);\n    mesh.position.x = -mesh.geometry.layout.width / 2;\n    mesh.position.y = mesh.geometry.layout.height * 1.035;\n  };\n\n  PANOLENS.SpriteText.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this;\n    toState = toState || {};\n    duration = duration || this.animationDuration;\n    easing = easing || TWEEN.Easing.Exponential.Out;\n    delay = delay !== undefined ? delay : 0;\n    onStart = onStart || null;\n    onUpdate = onUpdate || null;\n    onComplete = onComplete || null;\n\n    if (!this.tweens[name]) {\n      this.tweens[name] = new TWEEN.Tween(object).to(toState, duration).easing(easing).delay(delay).onStart(onStart).onUpdate(onUpdate).onComplete(onComplete);\n    }\n\n    return this.tweens[name];\n  };\n\n  PANOLENS.SpriteText.prototype.getLayout = function () {\n    return this.mesh && this.mesh.geometry && this.mesh.geometry.layout || {};\n  };\n\n  PANOLENS.SpriteText.prototype.setEntity = function (entity) {\n    this.entity = entity;\n  };\n})();(function () {\n  PANOLENS.Widget = function (container) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].call(this);\n\n    this.DEFAULT_TRANSITION = 'all 0.27s ease';\n    this.TOUCH_ENABLED = PANOLENS.Utils.checkTouchSupported();\n    this.PREVENT_EVENT_HANDLER = function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    };\n\n    this.container = container;\n\n    this.barElement;\n    this.fullscreenElement;\n    this.videoElement;\n    this.settingElement;\n\n    this.mainMenu;\n\n    this.activeMainItem;\n    this.activeSubMenu;\n    this.mask;\n  };\n\n  PANOLENS.Widget.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n\n  PANOLENS.Widget.prototype.constructor = PANOLENS.Widget;\n\n  PANOLENS.Widget.prototype.addControlBar = function () {\n    if (!this.container) {\n      console.warn('Widget container not set');\n      return;\n    }\n\n    var scope = this,\n        bar,\n        styleTranslate,\n        styleOpacity,\n        gradientStyle;\n\n    gradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))';\n\n    bar = document.createElement('div');\n    bar.style.width = '100%';\n    bar.style.height = '44px';\n    bar.style.float = 'left';\n    bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)';\n    bar.style.background = '-webkit-' + gradientStyle;\n    bar.style.background = '-moz-' + gradientStyle;\n    bar.style.background = '-o-' + gradientStyle;\n    bar.style.background = '-ms-' + gradientStyle;\n    bar.style.background = gradientStyle;\n    bar.style.transition = this.DEFAULT_TRANSITION;\n    bar.style.pointerEvents = 'none';\n    bar.isHidden = false;\n    bar.toggle = function () {\n      bar.isHidden = !bar.isHidden;\n      styleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)';\n      styleOpacity = bar.isHidden ? 0 : 1;\n      bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate;\n      bar.style.opacity = styleOpacity;\n    };\n\n    var menu = this.createDefaultMenu();\n    this.mainMenu = this.createMainMenu(menu);\n    bar.appendChild(this.mainMenu);\n\n    var mask = this.createMask();\n    this.mask = mask;\n    this.container.appendChild(mask);\n\n    bar.dispose = function () {\n      if (scope.fullscreenElement) {\n        bar.removeChild(scope.fullscreenElement);\n        scope.fullscreenElement.dispose();\n        scope.fullscreenElement = null;\n      }\n\n      if (scope.settingElement) {\n        bar.removeChild(scope.settingElement);\n        scope.settingElement.dispose();\n        scope.settingElement = null;\n      }\n\n      if (scope.videoElement) {\n        bar.removeChild(scope.videoElement);\n        scope.videoElement.dispose();\n        scope.videoElement = null;\n      }\n    };\n\n    this.container.appendChild(bar);\n\n    this.mask.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true);\n    this.mask.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true);\n    this.mask.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true);\n    this.mask.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.mask.hide();\n      scope.settingElement.deactivate();\n    }, false);\n\n    this.addEventListener('control-bar-toggle', bar.toggle);\n\n    this.barElement = bar;\n  };\n\n  PANOLENS.Widget.prototype.createDefaultMenu = function () {\n    var scope = this,\n        handler;\n\n    handler = function handler(method, data) {\n      return function () {\n        scope.dispatchEvent({\n\n          type: 'panolens-viewer-handler',\n          method: method,\n          data: data\n\n        });\n      };\n    };\n\n    return [{\n      title: 'Control',\n      subMenu: [{\n        title: this.TOUCH_ENABLED ? 'Touch' : 'Mouse',\n        handler: handler('enableControl', PANOLENS.Controls.ORBIT)\n      }, {\n        title: 'Sensor',\n        handler: handler('enableControl', PANOLENS.Controls.DEVICEORIENTATION)\n      }]\n    }, {\n      title: 'Mode',\n      subMenu: [{\n        title: 'Normal',\n        handler: handler('disableEffect')\n      }, {\n        title: 'Cardboard',\n        handler: handler('enableEffect', PANOLENS.Modes.CARDBOARD)\n      }, {\n        title: 'Stereoscopic',\n        handler: handler('enableEffect', PANOLENS.Modes.STEREO)\n      }]\n    }];\n  };\n\n  PANOLENS.Widget.prototype.addControlButton = function (name) {\n    var element;\n\n    switch (name) {\n      case 'fullscreen':\n\n        element = this.createFullscreenButton();\n        this.fullscreenElement = element;\n\n        break;\n\n      case 'setting':\n\n        element = this.createSettingButton();\n        this.settingElement = element;\n\n        break;\n\n      case 'video':\n\n        element = this.createVideoControl();\n        this.videoElement = element;\n\n        break;\n\n      default:\n\n        return;\n    }\n\n    if (!element) {\n      return;\n    }\n\n    this.barElement.appendChild(element);\n  };\n\n  PANOLENS.Widget.prototype.createMask = function () {\n    var element = document.createElement('div');\n    element.style.position = 'absolute';\n    element.style.top = 0;\n    element.style.left = 0;\n    element.style.width = '100%';\n    element.style.height = '100%';\n    element.style.background = 'transparent';\n    element.style.display = 'none';\n\n    element.show = function () {\n      this.style.display = 'block';\n    };\n\n    element.hide = function () {\n      this.style.display = 'none';\n    };\n\n    return element;\n  };\n\n  PANOLENS.Widget.prototype.createSettingButton = function () {\n    var scope = this,\n        item;\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.mainMenu.toggle();\n\n      if (this.activated) {\n        this.deactivate();\n      } else {\n        this.activate();\n      }\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.Setting + '\")',\n        webkitTransition: this.DEFAULT_TRANSITION,\n        transition: this.DEFAULT_TRANSITION\n\n      },\n\n      onTap: onTap\n\n    });\n\n    item.activate = function () {\n      this.style.transform = 'rotate3d(0,0,1,90deg)';\n      this.activated = true;\n      scope.mask.show();\n    };\n\n    item.deactivate = function () {\n      this.style.transform = 'rotate3d(0,0,0,0)';\n      this.activated = false;\n      scope.mask.hide();\n\n      if (scope.mainMenu && scope.mainMenu.visible) {\n        scope.mainMenu.hide();\n      }\n\n      if (scope.activeSubMenu && scope.activeSubMenu.visible) {\n        scope.activeSubMenu.hide();\n      }\n\n      if (scope.mainMenu && scope.mainMenu._width) {\n        scope.mainMenu.changeSize(scope.mainMenu._width);\n        scope.mainMenu.unslideAll();\n      }\n    };\n\n    item.activated = false;\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createFullscreenButton = function () {\n    var scope = this,\n        item,\n        isFullscreen = false,\n        tapSkipped = true,\n        stylesheetId;\n\n    stylesheetId = 'panolens-style-addon';\n\n    if (!document.fullscreenEnabled && !document.webkitFullscreenEnabled && !document.mozFullScreenEnabled && !document.msFullscreenEnabled) {\n      return;\n    }\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      tapSkipped = false;\n\n      if (!isFullscreen) {\n        scope.container.requestFullscreen && scope.container.requestFullscreen();\n        scope.container.msRequestFullscreen && scope.container.msRequestFullscreen();\n        scope.container.mozRequestFullScreen && scope.container.mozRequestFullScreen();\n        scope.container.webkitRequestFullscreen && scope.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        isFullscreen = true;\n      } else {\n        document.exitFullscreen && document.exitFullscreen();\n        document.msExitFullscreen && document.msExitFullscreen();\n        document.mozCancelFullScreen && document.mozCancelFullScreen();\n        document.webkitExitFullscreen && document.webkitExitFullscreen();\n        isFullscreen = false;\n      }\n\n      this.style.backgroundImage = isFullscreen ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n    }\n\n    function onFullScreenChange(e) {\n      if (tapSkipped) {\n        isFullscreen = !isFullscreen;\n\n        item.style.backgroundImage = isFullscreen ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n      }\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onWindowResize', data: false });\n\n      tapSkipped = true;\n    }\n\n    document.addEventListener('fullscreenchange', onFullScreenChange, false);\n    document.addEventListener('webkitfullscreenchange', onFullScreenChange, false);\n    document.addEventListener('mozfullscreenchange', onFullScreenChange, false);\n    document.addEventListener('MSFullscreenChange', onFullScreenChange, false);\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n\n      },\n\n      onTap: onTap\n\n    });\n\n    if (!document.querySelector(stylesheetId)) {\n      var sheet = document.createElement('style');\n      sheet.id = stylesheetId;\n      sheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }';\n      document.body.appendChild(sheet);\n    }\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createVideoControl = function () {\n    var item;\n\n    item = document.createElement('span');\n    item.style.display = 'none';\n    item.show = function () {\n      item.style.display = '';\n    };\n\n    item.hide = function () {\n      item.style.display = 'none';\n      item.controlButton.paused = true;\n      item.controlButton.update();\n    };\n\n    item.controlButton = this.createVideoControlButton();\n    item.seekBar = this.createVideoControlSeekbar();\n\n    item.appendChild(item.controlButton);\n    item.appendChild(item.seekBar);\n\n    item.dispose = function () {\n      item.removeChild(item.controlButton);\n      item.removeChild(item.seekBar);\n\n      item.controlButton.dispose();\n      item.controlButton = null;\n\n      item.seekBar.dispose();\n      item.seekBar = null;\n    };\n\n    this.addEventListener('video-control-show', item.show);\n    this.addEventListener('video-control-hide', item.hide);\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createVideoControlButton = function () {\n    var scope = this,\n        item;\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused });\n\n      this.paused = !this.paused;\n\n      item.update();\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.VideoPlay + '\")'\n\n      },\n\n      onTap: onTap\n\n    });\n\n    item.paused = true;\n\n    item.update = function (paused) {\n      this.paused = paused !== undefined ? paused : this.paused;\n\n      this.style.backgroundImage = 'url(\"' + (this.paused ? PANOLENS.DataImage.VideoPlay : PANOLENS.DataImage.VideoPause) + '\")';\n    };\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createVideoControlSeekbar = function () {\n    var scope = this,\n        item,\n        progressElement,\n        progressElementControl,\n        isDragging = false,\n        mouseX,\n        percentageNow,\n        percentageNext;\n\n    progressElement = document.createElement('div');\n    progressElement.style.width = '0%';\n    progressElement.style.height = '100%';\n    progressElement.style.backgroundColor = '#fff';\n\n    progressElementControl = document.createElement('div');\n    progressElementControl.style.float = 'right';\n    progressElementControl.style.width = '14px';\n    progressElementControl.style.height = '14px';\n    progressElementControl.style.transform = 'translate(7px, -5px)';\n    progressElementControl.style.borderRadius = '50%';\n    progressElementControl.style.backgroundColor = '#ddd';\n\n    progressElementControl.addEventListener('mousedown', onMouseDown, false);\n    progressElementControl.addEventListener('touchstart', onMouseDown, false);\n\n    function onMouseDown(event) {\n      event.stopPropagation();\n\n      isDragging = true;\n\n      mouseX = event.clientX || event.changedTouches && event.changedTouches[0].clientX;\n\n      percentageNow = parseInt(progressElement.style.width) / 100;\n\n      addControlListeners();\n    }\n\n    function onVideoControlDrag(event) {\n      var clientX;\n\n      if (isDragging) {\n        clientX = event.clientX || event.changedTouches && event.changedTouches[0].clientX;\n\n        percentageNext = (clientX - mouseX) / item.clientWidth;\n\n        percentageNext = percentageNow + percentageNext;\n\n        percentageNext = percentageNext > 1 ? 1 : percentageNext < 0 ? 0 : percentageNext;\n\n        item.setProgress(percentageNext);\n\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext });\n      }\n    }\n\n    function onVideoControlStop(event) {\n      event.stopPropagation();\n\n      isDragging = false;\n\n      removeControlListeners();\n    }\n\n    function addControlListeners() {\n      scope.container.addEventListener('mousemove', onVideoControlDrag, false);\n      scope.container.addEventListener('mouseup', onVideoControlStop, false);\n      scope.container.addEventListener('touchmove', onVideoControlDrag, false);\n      scope.container.addEventListener('touchend', onVideoControlStop, false);\n    }\n\n    function removeControlListeners() {\n      scope.container.removeEventListener('mousemove', onVideoControlDrag, false);\n      scope.container.removeEventListener('mouseup', onVideoControlStop, false);\n      scope.container.removeEventListener('touchmove', onVideoControlDrag, false);\n      scope.container.removeEventListener('touchend', onVideoControlStop, false);\n    }\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      var percentage;\n\n      if (event.target === progressElementControl) {\n        return;\n      }\n\n      percentage = event.changedTouches && event.changedTouches.length > 0 ? (event.changedTouches[0].pageX - event.target.getBoundingClientRect().left) / this.clientWidth : event.offsetX / this.clientWidth;\n\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage });\n\n      item.setProgress(event.offsetX / this.clientWidth);\n    }\n\n    function onDispose() {\n      removeControlListeners();\n      progressElement = null;\n      progressElementControl = null;\n    }\n\n    progressElement.appendChild(progressElementControl);\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        width: '30%',\n        height: '4px',\n        marginTop: '20px',\n        backgroundColor: 'rgba(188,188,188,0.8)'\n\n      },\n\n      onTap: onTap,\n      onDispose: onDispose\n\n    });\n\n    item.appendChild(progressElement);\n\n    item.setProgress = function (percentage) {\n      progressElement.style.width = percentage * 100 + '%';\n    };\n\n    this.addEventListener('video-update', function (event) {\n      item.setProgress(event.percentage);\n    });\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createMenuItem = function (title) {\n    var scope = this,\n        item = document.createElement('a');\n    item.textContent = title;\n    item.style.display = 'block';\n    item.style.padding = '10px';\n    item.style.textDecoration = 'none';\n    item.style.cursor = 'pointer';\n    item.style.pointerEvents = 'auto';\n    item.style.transition = this.DEFAULT_TRANSITION;\n\n    item.slide = function (right) {\n      this.style.transform = 'translateX(' + (right ? '' : '-') + '100%)';\n    };\n\n    item.unslide = function () {\n      this.style.transform = 'translateX(0)';\n    };\n\n    item.setIcon = function (url) {\n      if (this.icon) {\n        this.icon.style.backgroundImage = 'url(' + url + ')';\n      }\n    };\n\n    item.setSelectionTitle = function (title) {\n      if (this.selection) {\n        this.selection.textContent = title;\n      }\n    };\n\n    item.addSelection = function (name) {\n      var selection = document.createElement('span');\n      selection.style.fontSize = '13px';\n      selection.style.fontWeight = '300';\n      selection.style.float = 'right';\n\n      this.selection = selection;\n      this.setSelectionTitle(name);\n      this.appendChild(selection);\n\n      return this;\n    };\n\n    item.addIcon = function (url, left, flip) {\n      url = url || PANOLENS.DataImage.ChevronRight;\n      left = left || false;\n      flip = flip || false;\n\n      var element = document.createElement('span');\n      element.style.float = left ? 'left' : 'right';\n      element.style.width = '17px';\n      element.style.height = '17px';\n      element.style['margin' + (left ? 'Right' : 'Left')] = '12px';\n      element.style.backgroundSize = 'cover';\n\n      if (flip) {\n        element.style.transform = 'rotateZ(180deg)';\n      }\n\n      this.icon = element;\n      this.setIcon(url);\n      this.appendChild(element);\n\n      return this;\n    };\n\n    item.addSubMenu = function (title, items) {\n      this.subMenu = scope.createSubMenu(title, items);\n\n      return this;\n    };\n\n    item.addEventListener('mouseenter', function () {\n      this.style.backgroundColor = '#e0e0e0';\n    }, false);\n\n    item.addEventListener('mouseleave', function () {\n      this.style.backgroundColor = '#fafafa';\n    }, false);\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.createMenuItemHeader = function (title) {\n    var header = this.createMenuItem(title);\n\n    header.style.borderBottom = '1px solid #333';\n    header.style.paddingBottom = '15px';\n\n    return header;\n  };\n\n  PANOLENS.Widget.prototype.createMainMenu = function (menus) {\n    var scope = this,\n        menu = this.createMenu(),\n        subMenu;\n\n    menu._width = 200;\n    menu.changeSize(menu._width);\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      var mainMenu = scope.mainMenu,\n          subMenu = this.subMenu;\n\n      function onNextTick() {\n        mainMenu.changeSize(subMenu.clientWidth);\n        subMenu.show();\n        subMenu.unslideAll();\n      }\n\n      mainMenu.hide();\n      mainMenu.slideAll();\n      mainMenu.parentElement.appendChild(subMenu);\n\n      scope.activeMainItem = this;\n      scope.activeSubMenu = subMenu;\n\n      window.requestAnimationFrame(onNextTick);\n    }\n\n    for (var i = 0; i < menus.length; i++) {\n      var item = menu.addItem(menus[i].title);\n\n      item.style.paddingLeft = '20px';\n\n      item.addIcon().addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n      if (menus[i].subMenu && menus[i].subMenu.length > 0) {\n        var title = menus[i].subMenu[0].title;\n\n        item.addSelection(title).addSubMenu(menus[i].title, menus[i].subMenu);\n      }\n    }\n\n    return menu;\n  };\n\n  PANOLENS.Widget.prototype.createSubMenu = function (title, items) {\n    var scope = this,\n        menu,\n        subMenu = this.createMenu();\n\n    subMenu.items = items;\n    subMenu.activeItem;\n\n    function onTap(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      menu = scope.mainMenu;\n      menu.changeSize(menu._width);\n      menu.unslideAll();\n      menu.show();\n      subMenu.slideAll(true);\n      subMenu.hide();\n\n      if (this.type !== 'header') {\n        subMenu.setActiveItem(this);\n        scope.activeMainItem.setSelectionTitle(this.textContent);\n\n        this.handler && this.handler();\n      }\n    }\n\n    subMenu.addHeader(title).addIcon(undefined, true, true).addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n    for (var i = 0; i < items.length; i++) {\n      var item = subMenu.addItem(items[i].title);\n\n      item.style.fontWeight = 300;\n      item.handler = items[i].handler;\n      item.addIcon(' ', true);\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n      if (!subMenu.activeItem) {\n        subMenu.setActiveItem(item);\n      }\n    }\n\n    subMenu.slideAll(true);\n\n    return subMenu;\n  };\n\n  PANOLENS.Widget.prototype.createMenu = function () {\n    var scope = this,\n        menu = document.createElement('span'),\n        style;\n\n    style = menu.style;\n\n    style.padding = '5px 0';\n    style.position = 'fixed';\n    style.bottom = '100%';\n    style.right = '14px';\n    style.backgroundColor = '#fafafa';\n    style.fontFamily = 'Helvetica Neue';\n    style.fontSize = '14px';\n    style.visibility = 'hidden';\n    style.opacity = 0;\n    style.boxShadow = '0 0 12pt rgba(0,0,0,0.25)';\n    style.borderRadius = '2px';\n    style.overflow = 'hidden';\n    style.willChange = 'width, height, opacity';\n    style.pointerEvents = 'auto';\n    style.transition = this.DEFAULT_TRANSITION;\n\n    menu.visible = false;\n\n    menu.changeSize = function (width, height) {\n      if (width) {\n        this.style.width = width + 'px';\n      }\n\n      if (height) {\n        this.style.height = height + 'px';\n      }\n    };\n\n    menu.show = function () {\n      this.style.opacity = 1;\n      this.style.visibility = 'visible';\n      this.visible = true;\n    };\n\n    menu.hide = function () {\n      this.style.opacity = 0;\n      this.style.visibility = 'hidden';\n      this.visible = false;\n    };\n\n    menu.toggle = function () {\n      if (this.visible) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    };\n\n    menu.slideAll = function (right) {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[i].slide) {\n          menu.children[i].slide(right);\n        }\n      }\n    };\n\n    menu.unslideAll = function () {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[i].unslide) {\n          menu.children[i].unslide();\n        }\n      }\n    };\n\n    menu.addHeader = function (title) {\n      var header = scope.createMenuItemHeader(title);\n      header.type = 'header';\n\n      this.appendChild(header);\n\n      return header;\n    };\n\n    menu.addItem = function (title) {\n      var item = scope.createMenuItem(title);\n      item.type = 'item';\n\n      this.appendChild(item);\n\n      return item;\n    };\n\n    menu.setActiveItem = function (item) {\n      if (this.activeItem) {\n        this.activeItem.setIcon(' ');\n      }\n\n      item.setIcon(PANOLENS.DataImage.Check);\n\n      this.activeItem = item;\n    };\n\n    menu.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true);\n    menu.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true);\n    menu.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true);\n\n    return menu;\n  };\n\n  PANOLENS.Widget.prototype.createCustomItem = function (options) {\n    options = options || {};\n\n    var scope = this,\n        item = options.element || document.createElement('span');\n\n    item.style.cursor = 'pointer';\n    item.style.float = 'right';\n    item.style.width = '44px';\n    item.style.height = '100%';\n    item.style.backgroundSize = '60%';\n    item.style.backgroundRepeat = 'no-repeat';\n    item.style.backgroundPosition = 'center';\n    item.style.webkitUserSelect = item.style.MozUserSelect = item.style.userSelect = 'none';\n    item.style.position = 'relative';\n    item.style.pointerEvents = 'auto';\n\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function () {\n      item.style.filter = item.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))';\n    });\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function () {\n      item.style.filter = item.style.webkitFilter = '';\n    });\n\n    item = this.mergeStyleOptions(item, options.style);\n\n    if (options.onTap) {\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false);\n    }\n\n    item.dispose = function () {\n      item.removeEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false);\n\n      options.onDispose && options.onDispose();\n    };\n\n    return item;\n  };\n\n  PANOLENS.Widget.prototype.mergeStyleOptions = function (element, options) {\n    options = options || {};\n\n    for (var property in options) {\n      if (options.hasOwnProperty(property)) {\n        element.style[property] = options[property];\n      }\n    }\n\n    return element;\n  };\n\n  PANOLENS.Widget.prototype.dispose = function () {\n    if (this.barElement) {\n      this.container.removeChild(this.barElement);\n      this.barElement.dispose();\n      this.barElement = null;\n    }\n  };\n})();(function () {\n  PANOLENS.Infospot = function (scale, imageSrc, animated) {\n    var scope = this,\n        ratio,\n        startScale,\n        endScale,\n        duration;\n\n    scale = scale || 300;\n    imageSrc = imageSrc || PANOLENS.DataImage.Info;\n    duration = 500;\n\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].call(this);\n\n    this.type = 'infospot';\n\n    this.animated = animated !== undefined ? animated : true;\n    this.isHovering = false;\n    this.visible = false;\n\n    this.element;\n    this.toPanorama;\n    this.cursorStyle;\n\n    this.mode = PANOLENS.Modes.UNKNOWN;\n\n    this.scale.set(scale, scale, 1);\n    this.rotation.y = Math.PI;\n    this.scaleFactor = 1.3;\n\n    this.container;\n\n    this.HANDLER_FOCUS;\n\n    PANOLENS.Utils.TextureLoader.load(imageSrc, postLoad);\n\n    function postLoad(texture) {\n      texture.wrapS = __WEBPACK_IMPORTED_MODULE_8_three__[\"RepeatWrapping\"];\n      texture.repeat.x = -1;\n\n      texture.image.width = texture.image.naturalWidth || 64;\n      texture.image.height = texture.image.naturalHeight || 64;\n\n      ratio = texture.image.width / texture.image.height;\n      scope.scale.set(ratio * scale, scale, 1);\n\n      startScale = scope.scale.clone();\n\n      scope.scaleUpAnimation = new TWEEN.Tween(scope.scale).to({ x: startScale.x * scope.scaleFactor, y: startScale.y * scope.scaleFactor }, duration).easing(TWEEN.Easing.Elastic.Out);\n\n      scope.scaleDownAnimation = new TWEEN.Tween(scope.scale).to({ x: startScale.x, y: startScale.y }, duration).easing(TWEEN.Easing.Elastic.Out);\n\n      scope.material.side = __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"];\n      scope.material.map = texture;\n      scope.material.depthTest = false;\n      scope.material.needsUpdate = true;\n    }\n\n    function show() {\n      this.visible = true;\n    }\n\n    function hide() {\n      this.visible = false;\n    }\n\n    this.showAnimation = new TWEEN.Tween(this.material).to({ opacity: 1 }, duration).onStart(show.bind(this)).easing(TWEEN.Easing.Quartic.Out);\n\n    this.hideAnimation = new TWEEN.Tween(this.material).to({ opacity: 0 }, duration).onComplete(hide.bind(this)).easing(TWEEN.Easing.Quartic.Out);\n\n    this.addEventListener('click', this.onClick);\n    this.addEventListener('hover', this.onHover);\n    this.addEventListener('hoverenter', this.onHoverStart);\n    this.addEventListener('hoverleave', this.onHoverEnd);\n    this.addEventListener('panolens-dual-eye-effect', this.onDualEyeEffect);\n    this.addEventListener('panolens-container', this.setContainer.bind(this));\n    this.addEventListener('dismiss', this.onDismiss);\n    this.addEventListener('panolens-infospot-focus', this.setFocusMethod);\n  };\n\n  PANOLENS.Infospot.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].prototype);\n\n  PANOLENS.Infospot.prototype.setContainer = function (data) {\n    var container;\n\n    if (data instanceof HTMLElement) {\n      container = data;\n    } else if (data && data.container) {\n      container = data.container;\n    }\n\n    if (container && this.element) {\n      container.appendChild(this.element);\n    }\n\n    this.container = container;\n  };\n\n  PANOLENS.Infospot.prototype.getContainer = function () {\n    return this.container;\n  };\n\n  PANOLENS.Infospot.prototype.onClick = function (event) {\n    if (this.element && this.getContainer()) {\n      this.onHoverStart(event);\n\n      this.lockHoverElement();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onDismiss = function (event) {\n    if (this.element) {\n      this.unlockHoverElement();\n      this.onHoverEnd();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onHover = function (event) {};\n\n  PANOLENS.Infospot.prototype.onHoverStart = function (event) {\n    if (!this.getContainer()) {\n      return;\n    }\n\n    var cursorStyle = this.cursorStyle || (this.mode === PANOLENS.Modes.NORMAL ? 'pointer' : 'default');\n\n    this.isHovering = true;\n    this.container.style.cursor = cursorStyle;\n\n    if (this.animated) {\n      this.scaleDownAnimation && this.scaleDownAnimation.stop();\n      this.scaleUpAnimation && this.scaleUpAnimation.start();\n    }\n\n    if (this.element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0) {\n      if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n        this.element.style.display = 'none';\n        this.element.left && (this.element.left.style.display = 'block');\n        this.element.right && (this.element.right.style.display = 'block');\n\n        this.element._width = this.element.left.clientWidth;\n        this.element._height = this.element.left.clientHeight;\n      } else {\n        this.element.style.display = 'block';\n        this.element.left && (this.element.left.style.display = 'none');\n        this.element.right && (this.element.right.style.display = 'none');\n\n        this.element._width = this.element.clientWidth;\n        this.element._height = this.element.clientHeight;\n      }\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onHoverEnd = function () {\n    if (!this.getContainer()) {\n      return;\n    }\n\n    this.isHovering = false;\n    this.container.style.cursor = 'default';\n\n    if (this.animated) {\n      this.scaleUpAnimation && this.scaleUpAnimation.stop();\n      this.scaleDownAnimation && this.scaleDownAnimation.start();\n    }\n\n    if (this.element && !this.element.locked) {\n      this.element.style.display = 'none';\n      this.element.left && (this.element.left.style.display = 'none');\n      this.element.right && (this.element.right.style.display = 'none');\n\n      this.unlockHoverElement();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.onDualEyeEffect = function (event) {\n    if (!this.getContainer()) {\n      return;\n    }\n\n    var element, halfWidth, halfHeight;\n\n    this.mode = event.mode;\n\n    element = this.element;\n\n    halfWidth = this.container.clientWidth / 2;\n    halfHeight = this.container.clientHeight / 2;\n\n    if (!element) {\n      return;\n    }\n\n    if (!element.left || !element.right) {\n      element.left = element.cloneNode(true);\n      element.right = element.cloneNode(true);\n    }\n\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      element.left.style.display = element.style.display;\n      element.right.style.display = element.style.display;\n      element.style.display = 'none';\n    } else {\n      element.style.display = element.left.style.display;\n      element.left.style.display = 'none';\n      element.right.style.display = 'none';\n    }\n\n    this.translateElement(halfWidth, halfHeight);\n\n    this.container.appendChild(element.left);\n    this.container.appendChild(element.right);\n  };\n\n  PANOLENS.Infospot.prototype.translateElement = function (x, y) {\n    if (!this.element._width || !this.element._height || !this.getContainer()) {\n      return;\n    }\n\n    var left, top, element, width, height, delta, container;\n\n    container = this.container;\n    element = this.element;\n    width = element._width / 2;\n    height = element._height / 2;\n    delta = element.verticalDelta !== undefined ? element.verticalDelta : 40;\n\n    left = x - width;\n    top = y - height - delta;\n\n    if ((this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) && element.left && element.right && !(x === container.clientWidth / 2 && y === container.clientHeight / 2)) {\n      left = container.clientWidth / 4 - width + (x - container.clientWidth / 2);\n      top = container.clientHeight / 2 - height - delta + (y - container.clientHeight / 2);\n\n      this.setElementStyle('transform', element.left, 'translate(' + left + 'px, ' + top + 'px)');\n\n      left += container.clientWidth / 2;\n\n      this.setElementStyle('transform', element.right, 'translate(' + left + 'px, ' + top + 'px)');\n    } else {\n      this.setElementStyle('transform', element, 'translate(' + left + 'px, ' + top + 'px)');\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setElementStyle = function (type, element, value) {\n    var style = element.style;\n\n    if (type === 'transform') {\n      style.webkitTransform = style.msTransform = style.transform = value;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setText = function (text) {\n    if (this.element) {\n      this.element.textContent = text;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setCursorHoverStyle = function (style) {\n    this.cursorStyle = style;\n  };\n\n  PANOLENS.Infospot.prototype.addHoverText = function (text, delta) {\n    if (!this.element) {\n      this.element = document.createElement('div');\n      this.element.style.display = 'none';\n      this.element.style.color = '#fff';\n      this.element.style.top = 0;\n      this.element.style.maxWidth = '50%';\n      this.element.style.maxHeight = '50%';\n      this.element.style.textShadow = '0 0 3px #000000';\n      this.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif';\n      this.element.style.position = 'absolute';\n      this.element.classList.add('panolens-infospot');\n      this.element.verticalDelta = delta !== undefined ? delta : 40;\n    }\n\n    this.setText(text);\n  };\n\n  PANOLENS.Infospot.prototype.addHoverElement = function (el, delta) {\n    if (!this.element) {\n      this.element = el.cloneNode(true);\n      this.element.style.display = 'none';\n      this.element.style.top = 0;\n      this.element.style.position = 'absolute';\n      this.element.classList.add('panolens-infospot');\n      this.element.verticalDelta = delta !== undefined ? delta : 40;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.removeHoverElement = function () {\n    if (this.element) {\n      if (this.element.left) {\n        this.container.removeChild(this.element.left);\n        this.element.left = null;\n      }\n\n      if (this.element.right) {\n        this.container.removeChild(this.element.right);\n        this.element.right = null;\n      }\n\n      this.container.removeChild(this.element);\n      this.element = null;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.lockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = true;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.unlockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = false;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.show = function (delay) {\n    delay = delay || 0;\n\n    if (this.animated) {\n      this.hideAnimation && this.hideAnimation.stop();\n      this.showAnimation && this.showAnimation.delay(delay).start();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.hide = function (delay) {\n    delay = delay || 0;\n\n    if (this.animated) {\n      this.showAnimation && this.showAnimation.stop();\n      this.hideAnimation && this.hideAnimation.delay(delay).start();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.setFocusMethod = function (event) {\n    if (event) {\n      this.HANDLER_FOCUS = event.method;\n    }\n  };\n\n  PANOLENS.Infospot.prototype.focus = function (duration, easing) {\n    if (this.HANDLER_FOCUS) {\n      this.HANDLER_FOCUS(this.position, duration, easing);\n      this.onDismiss();\n    }\n  };\n\n  PANOLENS.Infospot.prototype.dispose = function () {\n    this.removeHoverElement();\n    this.material.dispose();\n\n    if (this.parent) {\n      this.parent.remove(this);\n    }\n  };\n})();(function () {\n  'use strict';\n\n  PANOLENS.Viewer = function (options) {\n    __WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].call(this);\n\n    if (!__WEBPACK_IMPORTED_MODULE_8_three__) {\n      console.error('Three.JS not found');\n\n      return;\n    }\n\n    var container;\n\n    options = options || {};\n    options.controlBar = options.controlBar !== undefined ? options.controlBar : true;\n    options.controlButtons = options.controlButtons || ['fullscreen', 'setting', 'video'];\n    options.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false;\n    options.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true;\n    options.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false;\n    options.clickTolerance = options.clickTolerance || 10;\n    options.cameraFov = options.cameraFov || 60;\n    options.reverseDragging = options.reverseDragging || false;\n    options.enableReticle = options.enableReticle || false;\n    options.dwellTime = options.dwellTime || 1500;\n    options.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true;\n    options.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false;\n    options.indicatorSize = options.indicatorSize || 30;\n    options.output = options.output ? options.output : 'none';\n\n    this.options = options;\n\n    if (options.container) {\n      container = options.container;\n      container._width = container.clientWidth;\n      container._height = container.clientHeight;\n    } else {\n      container = document.createElement('div');\n      container.classList.add('panolens-container');\n      container.style.width = '100%';\n      container.style.height = '100%';\n      container._width = window.innerWidth;\n      container._height = window.innerHeight;\n      document.body.appendChild(container);\n    }\n\n    this.container = container;\n\n    this.camera = options.camera || new __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"](this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 10000);\n    this.scene = options.scene || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Scene\"]();\n    this.renderer = options.renderer || new __WEBPACK_IMPORTED_MODULE_8_three__[\"WebGLRenderer\"]({ alpha: true, antialias: false });\n\n    this.viewIndicatorSize = options.indicatorSize;\n\n    this.reticle = {};\n    this.tempEnableReticle = this.options.enableReticle;\n\n    this.mode = PANOLENS.Modes.NORMAL;\n\n    this.OrbitControls;\n    this.DeviceOrientationControls;\n\n    this.CardboardEffect;\n    this.StereoEffect;\n\n    this.controls;\n    this.effect;\n    this.panorama;\n    this.widget;\n\n    this.hoverObject;\n    this.infospot;\n    this.pressEntityObject;\n    this.pressObject;\n\n    this.raycaster = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Raycaster\"]();\n    this.raycasterPoint = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n    this.userMouse = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n    this.updateCallbacks = [];\n    this.requestAnimationId;\n\n    this.cameraFrustum = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Frustum\"]();\n    this.cameraViewProjectionMatrix = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]();\n\n    this.outputDivElement;\n\n    this.HANDLER_MOUSE_DOWN = this.onMouseDown.bind(this);\n    this.HANDLER_MOUSE_UP = this.onMouseUp.bind(this);\n    this.HANDLER_MOUSE_MOVE = this.onMouseMove.bind(this);\n    this.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind(this);\n    this.HANDLER_KEY_DOWN = this.onKeyDown.bind(this);\n    this.HANDLER_KEY_UP = this.onKeyUp.bind(this);\n    this.HANDLER_TAP = this.onTap.bind(this, {\n      clientX: this.container.clientWidth / 2,\n      clientY: this.container.clientHeight / 2\n    });\n\n    this.OUTPUT_INFOSPOT = false;\n\n    this.tweenLeftAnimation = new TWEEN.Tween();\n    this.tweenUpAnimation = new TWEEN.Tween();\n\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n    this.renderer.setClearColor(0x000000, 1);\n    this.renderer.sortObjects = false;\n\n    this.renderer.domElement.classList.add('panolens-canvas');\n    this.renderer.domElement.style.display = 'block';\n    this.container.style.backgroundColor = '#000';\n    this.container.appendChild(this.renderer.domElement);\n\n    this.OrbitControls = new __WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"](this.camera, this.container);\n    this.OrbitControls.name = 'orbit';\n    this.OrbitControls.minDistance = 1;\n    this.OrbitControls.noPan = true;\n    this.DeviceOrientationControls = new __WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"](this.camera, this.container);\n    this.DeviceOrientationControls.name = 'device-orientation';\n    this.DeviceOrientationControls.enabled = false;\n    this.camera.position.z = 1;\n\n    if (this.options.passiveRendering) {\n      console.warn('passiveRendering is now deprecated');\n    }\n\n    this.controls = [this.OrbitControls, this.DeviceOrientationControls];\n    this.control = this.OrbitControls;\n\n    this.CardboardEffect = new __WEBPACK_IMPORTED_MODULE_8_three__[\"CardboardEffect\"](this.renderer);\n    this.CardboardEffect.setSize(this.container.clientWidth, this.container.clientHeight);\n\n    this.StereoEffect = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoEffect\"](this.renderer);\n    this.StereoEffect.setSize(this.container.clientWidth, this.container.clientHeight);\n\n    this.effect = this.CardboardEffect;\n\n    this.addReticle();\n\n    if (this.options.horizontalView) {\n      this.OrbitControls.minPolarAngle = Math.PI / 2;\n      this.OrbitControls.maxPolarAngle = Math.PI / 2;\n    }\n\n    if (this.options.controlBar !== false) {\n      this.addDefaultControlBar(this.options.controlButtons);\n    }\n\n    if (this.options.viewIndicator) {\n      this.addViewIndicator();\n    }\n\n    if (this.options.reverseDragging) {\n      this.reverseDraggingDirection();\n    }\n\n    if (this.options.enableReticle) {\n      this.enableReticleControl();\n    } else {\n      this.registerMouseAndTouchEvents();\n    }\n\n    if (this.options.output === 'overlay') {\n      this.addOutputElement();\n    }\n\n    this.registerEventListeners();\n\n    this.animate.call(this);\n  };\n\n  PANOLENS.Viewer.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n\n  PANOLENS.Viewer.prototype.constructor = PANOLENS.Viewer;\n\n  PANOLENS.Viewer.prototype.add = function (object) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[i]);\n      }\n\n      return this;\n    }\n\n    this.scene.add(object);\n\n    if (object.addEventListener) {\n      object.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n    }\n\n    if (object instanceof PANOLENS.Panorama && object.dispatchEvent) {\n      object.dispatchEvent({ type: 'panolens-container', container: this.container });\n    }\n\n    if (object.type === 'panorama') {\n      this.addPanoramaEventListener(object);\n\n      if (!this.panorama) {\n        this.setPanorama(object);\n      }\n    }\n  };\n\n  PANOLENS.Viewer.prototype.remove = function (object) {\n    if (object.removeEventListener) {\n      object.removeEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n    }\n\n    this.scene.remove(object);\n  };\n\n  PANOLENS.Viewer.prototype.addDefaultControlBar = function (array) {\n    var scope = this;\n\n    if (this.widget) {\n      console.warn('Default control bar exists');\n      return;\n    }\n\n    this.widget = new PANOLENS.Widget(this.container);\n    this.widget.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n    this.widget.addControlBar();\n    array.forEach(function (buttonName) {\n      scope.widget.addControlButton(buttonName);\n    });\n  };\n\n  PANOLENS.Viewer.prototype.setPanorama = function (pano) {\n    var scope = this,\n        leavingPanorama = this.panorama;\n\n    if (pano.type === 'panorama' && leavingPanorama !== pano) {\n      this.hideInfospot();\n\n      var afterEnterComplete = function afterEnterComplete() {\n        leavingPanorama && leavingPanorama.onLeave();\n        pano.removeEventListener('enter-fade-start', afterEnterComplete);\n      };\n\n      pano.addEventListener('enter-fade-start', afterEnterComplete);\n\n      (this.panorama = pano).onEnter();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.eventHandler = function (event) {\n    if (event.method && this[event.method]) {\n      this[event.method](event.data);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.dispatchEventToChildren = function (event) {\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent(event);\n      }\n    });\n  };\n\n  PANOLENS.Viewer.prototype.activateWidgetItem = function (controlIndex, mode) {\n    var mainMenu = this.widget.mainMenu;\n    var ControlMenuItem = mainMenu.children[0];\n    var ModeMenuItem = mainMenu.children[1];\n\n    var item;\n\n    if (controlIndex !== undefined) {\n      switch (controlIndex) {\n        case 0:\n\n          item = ControlMenuItem.subMenu.children[1];\n\n          break;\n\n        case 1:\n\n          item = ControlMenuItem.subMenu.children[2];\n\n          break;\n\n        default:\n\n          item = ControlMenuItem.subMenu.children[1];\n\n          break;\n      }\n\n      ControlMenuItem.subMenu.setActiveItem(item);\n      ControlMenuItem.setSelectionTitle(item.textContent);\n    }\n\n    if (mode !== undefined) {\n      switch (mode) {\n        case PANOLENS.Modes.CARDBOARD:\n\n          item = ModeMenuItem.subMenu.children[2];\n\n          break;\n\n        case PANOLENS.Modes.STEREO:\n\n          item = ModeMenuItem.subMenu.children[3];\n\n          break;\n\n        default:\n\n          item = ModeMenuItem.subMenu.children[1];\n\n          break;\n      }\n\n      ModeMenuItem.subMenu.setActiveItem(item);\n      ModeMenuItem.setSelectionTitle(item.textContent);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.enableEffect = function (mode) {\n    if (this.mode === mode) {\n      return;\n    }\n    if (mode === PANOLENS.Modes.NORMAL) {\n      this.disableEffect();return;\n    } else {\n      this.mode = mode;\n    }\n\n    var fov = this.camera.fov;\n\n    switch (mode) {\n      case PANOLENS.Modes.CARDBOARD:\n\n        this.effect = this.CardboardEffect;\n        this.enableReticleControl();\n\n        break;\n\n      case PANOLENS.Modes.STEREO:\n\n        this.effect = this.StereoEffect;\n        this.enableReticleControl();\n\n        break;\n\n      default:\n\n        this.effect = null;\n        this.disableReticleControl();\n\n        break;\n    }\n\n    this.activateWidgetItem(undefined, this.mode);\n\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode });\n\n    this.camera.fov = fov + 10e-3;\n    this.effect.setSize(this.container.clientWidth, this.container.clientHeight);\n    this.render();\n    this.camera.fov = fov;\n  };\n\n  PANOLENS.Viewer.prototype.disableEffect = function () {\n    if (this.mode === PANOLENS.Modes.NORMAL) {\n      return;\n    }\n\n    this.mode = PANOLENS.Modes.NORMAL;\n    this.disableReticleControl();\n\n    this.activateWidgetItem(undefined, this.mode);\n\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode });\n\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n    this.render();\n  };\n\n  PANOLENS.Viewer.prototype.enableReticleControl = function () {\n    if (this.reticle.visible) {\n      return;\n    }\n    if (!this.reticle.textureLoaded) {\n      this.reticle.loadTextures();\n    }\n\n    this.tempEnableReticle = true;\n\n    this.unregisterMouseAndTouchEvents();\n    this.reticle.show();\n    this.registerReticleEvent();\n    this.updateReticleEvent();\n  };\n\n  PANOLENS.Viewer.prototype.disableReticleControl = function () {\n    this.tempEnableReticle = false;\n\n    if (!this.options.enableReticle) {\n      this.reticle.hide();\n      this.unregisterReticleEvent();\n      this.registerMouseAndTouchEvents();\n    } else {\n      this.updateReticleEvent();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.toggleVideoPlay = function (pause) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      this.panorama.dispatchEvent({ type: 'video-toggle', pause: pause });\n    }\n  };\n\n  PANOLENS.Viewer.prototype.setVideoCurrentTime = function (percentage) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      this.panorama.dispatchEvent({ type: 'video-time', percentage: percentage });\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onVideoUpdate = function (percentage) {\n    this.widget && this.widget.dispatchEvent({ type: 'video-update', percentage: percentage });\n  };\n\n  PANOLENS.Viewer.prototype.addUpdateCallback = function (fn) {\n    if (fn) {\n      this.updateCallbacks.push(fn);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.removeUpdateCallback = function (fn) {\n    var index = this.updateCallbacks.indexOf(fn);\n\n    if (fn && index >= 0) {\n      this.updateCallbacks.splice(index, 1);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.showVideoWidget = function () {\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-show' });\n  };\n\n  PANOLENS.Viewer.prototype.hideVideoWidget = function () {\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-hide' });\n  };\n\n  PANOLENS.Viewer.prototype.updateVideoPlayButton = function (paused) {\n    if (this.widget && this.widget.videoElement && this.widget.videoElement.controlButton) {\n      this.widget.videoElement.controlButton.update(paused);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.addPanoramaEventListener = function (pano) {\n    var scope = this;\n\n    pano.addEventListener('enter-fade-start', this.setCameraControl.bind(this));\n\n    if (pano instanceof PANOLENS.VideoPanorama) {\n      pano.addEventListener('enter-fade-start', this.showVideoWidget.bind(this));\n      pano.addEventListener('leave', function () {\n        if (!(this.panorama instanceof PANOLENS.VideoPanorama)) {\n          this.hideVideoWidget.call(this);\n        }\n      }.bind(this));\n    }\n  };\n\n  PANOLENS.Viewer.prototype.setCameraControl = function () {\n    this.OrbitControls.target.copy(this.panorama.position);\n  };\n\n  PANOLENS.Viewer.prototype.getControl = function () {\n    return this.control;\n  }, PANOLENS.Viewer.prototype.getScene = function () {\n    return this.scene;\n  };\n\n  PANOLENS.Viewer.prototype.getCamera = function () {\n    return this.camera;\n  }, PANOLENS.Viewer.prototype.getRenderer = function () {\n    return this.renderer;\n  };\n\n  PANOLENS.Viewer.prototype.getContainer = function () {\n    return this.container;\n  };\n\n  PANOLENS.Viewer.prototype.getControlName = function () {\n    return this.control.name;\n  };\n\n  PANOLENS.Viewer.prototype.getNextControlName = function () {\n    return this.controls[this.getNextControlIndex()].name;\n  };\n\n  PANOLENS.Viewer.prototype.getNextControlIndex = function () {\n    var controls, control, nextIndex;\n\n    controls = this.controls;\n    control = this.control;\n    nextIndex = controls.indexOf(control) + 1;\n\n    return nextIndex >= controls.length ? 0 : nextIndex;\n  };\n\n  PANOLENS.Viewer.prototype.setCameraFov = function (fov) {\n    this.camera.fov = fov;\n    this.camera.updateProjectionMatrix();\n  };\n\n  PANOLENS.Viewer.prototype.enableControl = function (index) {\n    index = index >= 0 && index < this.controls.length ? index : 0;\n\n    this.control.enabled = false;\n\n    this.control = this.controls[index];\n\n    this.control.enabled = true;\n\n    switch (index) {\n      case PANOLENS.Controls.ORBIT:\n\n        this.camera.position.copy(this.panorama.position);\n        this.camera.position.z += 1;\n\n        break;\n\n      case PANOLENS.Controls.DEVICEORIENTATION:\n\n        this.camera.position.copy(this.panorama.position);\n\n        break;\n\n      default:\n\n        break;\n    }\n\n    this.control.update();\n\n    this.activateWidgetItem(index, undefined);\n  };\n\n  PANOLENS.Viewer.prototype.disableControl = function () {\n    this.control.enabled = false;\n  };\n\n  PANOLENS.Viewer.prototype.toggleNextControl = function () {\n    this.enableControl(this.getNextControlIndex());\n  };\n\n  PANOLENS.Viewer.prototype.getScreenVector = function (worldVector) {\n    var vector = worldVector.clone();\n    var widthHalf = this.container.clientWidth / 2;\n    var heightHalf = this.container.clientHeight / 2;\n\n    vector.project(this.camera);\n\n    vector.x = vector.x * widthHalf + widthHalf;\n    vector.y = -(vector.y * heightHalf) + heightHalf;\n    vector.z = 0;\n\n    return vector;\n  };\n\n  PANOLENS.Viewer.prototype.checkSpriteInViewport = function (sprite) {\n    this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld);\n    this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse);\n    this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix);\n\n    return sprite.visible && this.cameraFrustum.intersectsSprite(sprite);\n  };\n\n  PANOLENS.Viewer.prototype.reverseDraggingDirection = function () {\n    this.OrbitControls.rotateSpeed *= -1;\n    this.OrbitControls.momentumScalingFactor *= -1;\n  };\n\n  PANOLENS.Viewer.prototype.addReticle = function () {\n    this.reticle = new PANOLENS.Reticle(0xffffff, this.options.autoReticleSelect, PANOLENS.DataImage.ReticleIdle, PANOLENS.DataImage.ReticleDwell, this.options.dwellTime, 45);\n    this.reticle.position.z = -10;\n    this.camera.add(this.reticle);\n    this.scene.add(this.camera);\n  };\n\n  PANOLENS.Viewer.prototype.tweenControlCenter = function (vector, duration, easing) {\n    if (this.control !== this.OrbitControls) {\n      return;\n    }\n\n    if (vector instanceof Array) {\n      duration = vector[1];\n      easing = vector[2];\n      vector = vector[0];\n    }\n\n    duration = duration !== undefined ? duration : 1000;\n    easing = easing || TWEEN.Easing.Exponential.Out;\n\n    var scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv;\n\n    scope = this;\n\n    chv = this.camera.getWorldDirection();\n    cvv = chv.clone();\n\n    vptc = this.panorama.getWorldPosition().sub(this.camera.getWorldPosition());\n\n    hv = vector.clone();\n\n    hv.x *= -1;\n    hv.add(vptc).normalize();\n    vv = hv.clone();\n\n    chv.y = 0;\n    hv.y = 0;\n\n    ha = Math.atan2(hv.z, hv.x) - Math.atan2(chv.z, chv.x);\n    ha = ha > Math.PI ? ha - 2 * Math.PI : ha;\n    ha = ha < -Math.PI ? ha + 2 * Math.PI : ha;\n    va = Math.abs(cvv.angleTo(chv) + (cvv.y * vv.y <= 0 ? vv.angleTo(hv) : -vv.angleTo(hv)));\n    va *= vv.y < cvv.y ? 1 : -1;\n\n    ov = { left: 0, up: 0 };\n    nv = { left: 0, up: 0 };\n\n    this.tweenLeftAnimation.stop();\n    this.tweenUpAnimation.stop();\n\n    this.tweenLeftAnimation = new TWEEN.Tween(ov).to({ left: ha }, duration).easing(easing).onUpdate(function () {\n      scope.control.rotateLeft(this.left - nv.left);\n      nv.left = this.left;\n    }).start();\n\n    this.tweenUpAnimation = new TWEEN.Tween(ov).to({ up: va }, duration).easing(easing).onUpdate(function () {\n      scope.control.rotateUp(this.up - nv.up);\n      nv.up = this.up;\n    }).start();\n  };\n\n  PANOLENS.Viewer.prototype.tweenControlCenterByObject = function (object, duration, easing) {\n    var isUnderScalePlaceHolder = false;\n\n    object.traverseAncestors(function (ancestor) {\n      if (ancestor.scalePlaceHolder) {\n        isUnderScalePlaceHolder = true;\n      }\n    });\n\n    if (isUnderScalePlaceHolder) {\n      var invertXVector = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](-1, 1, 1);\n\n      this.tweenControlCenter(object.getWorldPosition().multiply(invertXVector), duration, easing);\n    } else {\n      this.tweenControlCenter(object.getWorldPosition(), duration, easing);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onWindowResize = function (windowWidth, windowHeight) {\n    var width, height, expand;\n\n    expand = this.container.classList.contains('panolens-container') || this.container.isFullscreen;\n\n    if (windowWidth !== undefined && windowHeight !== undefined) {\n      width = windowWidth;\n      height = windowHeight;\n      this.container._width = windowWidth;\n      this.container._height = windowHeight;\n    } else {\n      width = expand ? Math.max(document.documentElement.clientWidth, window.innerWidth || 0) : this.container.clientWidth;\n      height = expand ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : this.container.clientHeight;\n      this.container._width = width;\n      this.container._height = height;\n    }\n\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n\n    this.renderer.setSize(width, height);\n\n    if (this.options.enableReticle || this.tempEnableReticle) {\n      this.updateReticleEvent();\n    }\n\n    this.dispatchEvent({ type: 'window-resize', width: width, height: height });\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent({ type: 'window-resize', width: width, height: height });\n      }\n    });\n  };\n\n  PANOLENS.Viewer.prototype.addOutputElement = function () {\n    var element = document.createElement('div');\n    element.style.position = 'absolute';\n    element.style.right = '10px';\n    element.style.top = '10px';\n    element.style.color = '#fff';\n    this.container.appendChild(element);\n    this.outputDivElement = element;\n  };\n\n  PANOLENS.Viewer.prototype.outputInfospotPosition = function () {\n    var intersects, point, panoramaWorldPosition, outputPosition;\n\n    intersects = this.raycaster.intersectObject(this.panorama, true);\n\n    if (intersects.length > 0) {\n      point = intersects[0].point;\n      panoramaWorldPosition = this.panorama.getWorldPosition();\n\n      outputPosition = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](-(point.x - panoramaWorldPosition.x).toFixed(2), (point.y - panoramaWorldPosition.y).toFixed(2), (point.z - panoramaWorldPosition.z).toFixed(2));\n\n      switch (this.options.output) {\n        case 'console':\n          console.info(outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z);\n          break;\n\n        case 'overlay':\n          this.outputDivElement.textContent = outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z;\n          break;\n\n        default:\n          break;\n      }\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onMouseDown = function (event) {\n    event.preventDefault();\n\n    this.userMouse.x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n    this.userMouse.y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n    this.userMouse.type = 'mousedown';\n    this.onTap(event);\n  };\n\n  PANOLENS.Viewer.prototype.onMouseMove = function (event) {\n    event.preventDefault();\n    this.userMouse.type = 'mousemove';\n    this.onTap(event);\n  };\n\n  PANOLENS.Viewer.prototype.onMouseUp = function (event) {\n    var onTarget = false,\n        type;\n\n    this.userMouse.type = 'mouseup';\n\n    type = this.userMouse.x >= event.clientX - this.options.clickTolerance && this.userMouse.x <= event.clientX + this.options.clickTolerance && this.userMouse.y >= event.clientY - this.options.clickTolerance && this.userMouse.y <= event.clientY + this.options.clickTolerance || event.changedTouches && this.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance && this.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance && this.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance && this.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance ? 'click' : undefined;\n\n    if (event && event.target && !event.target.classList.contains('panolens-canvas')) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (event.changedTouches && event.changedTouches.length === 1) {\n      onTarget = this.onTap({ clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY }, type);\n    } else {\n      onTarget = this.onTap(event, type);\n    }\n\n    this.userMouse.type = 'none';\n\n    if (onTarget) {\n      return;\n    }\n\n    if (type === 'click') {\n      this.options.autoHideInfospot && this.panorama && this.panorama.toggleInfospotVisibility();\n      this.options.autoHideControlBar && this.toggleControlBar();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onTap = function (event, type) {\n    var intersects, intersect_entity, intersect;\n\n    this.raycasterPoint.x = (event.clientX - this.container.offsetLeft) / this.container.clientWidth * 2 - 1;\n    this.raycasterPoint.y = -((event.clientY - this.container.offsetTop) / this.container.clientHeight) * 2 + 1;\n\n    this.raycaster.setFromCamera(this.raycasterPoint, this.camera);\n\n    if (!this.panorama) {\n      return;\n    }\n\n    if (event.type !== 'mousedown' && PANOLENS.Utils.checkTouchSupported() || this.OUTPUT_INFOSPOT) {\n      this.outputInfospotPosition();\n    }\n\n    intersects = this.raycaster.intersectObjects(this.panorama.children, true);\n\n    intersect_entity = this.getConvertedIntersect(intersects);\n\n    intersect = intersects.length > 0 ? intersects[0].object : intersect;\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event });\n      }\n\n      this.pressEntityObject = undefined;\n    }\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect && this.pressObject === intersect && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event });\n      }\n\n      this.pressObject = undefined;\n    }\n\n    if (type === 'click') {\n      this.panorama.dispatchEvent({ type: 'click', intersects: intersects, mouseEvent: event });\n\n      if (intersect_entity && intersect_entity.dispatchEvent) {\n        intersect_entity.dispatchEvent({ type: 'click-entity', mouseEvent: event });\n      }\n\n      if (intersect && intersect.dispatchEvent) {\n        intersect.dispatchEvent({ type: 'click', mouseEvent: event });\n      }\n    } else {\n      this.panorama.dispatchEvent({ type: 'hover', intersects: intersects, mouseEvent: event });\n\n      if (this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity || this.hoverObject && intersects.length === 0) {\n        if (this.hoverObject.dispatchEvent) {\n          this.hoverObject.dispatchEvent({ type: 'hoverleave', mouseEvent: event });\n\n          this.reticle.cancelDwelling();\n        }\n\n        this.hoverObject = undefined;\n      }\n\n      if (intersect_entity && intersects.length > 0) {\n        if (this.hoverObject !== intersect_entity) {\n          this.hoverObject = intersect_entity;\n\n          if (this.hoverObject.dispatchEvent) {\n            this.hoverObject.dispatchEvent({ type: 'hoverenter', mouseEvent: event });\n\n            if (this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle) {\n              this.reticle.startDwelling(this.onTap.bind(this, event, 'click'));\n            }\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity) {\n          this.pressEntityObject = intersect_entity;\n\n          if (this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressstart-entity', mouseEvent: event });\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressObject != intersect) {\n          this.pressObject = intersect;\n\n          if (this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressstart', mouseEvent: event });\n          }\n        }\n\n        if (this.userMouse.type === 'mousemove' || this.options.enableReticle) {\n          if (intersect && intersect.dispatchEvent) {\n            intersect.dispatchEvent({ type: 'hover', mouseEvent: event });\n          }\n\n          if (this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressmove-entity', mouseEvent: event });\n          }\n\n          if (this.pressObject && this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressmove', mouseEvent: event });\n          }\n        }\n      }\n\n      if (!intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event });\n\n        this.pressEntityObject = undefined;\n      }\n\n      if (!intersect && this.pressObject && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event });\n\n        this.pressObject = undefined;\n      }\n    }\n\n    if (intersect && intersect instanceof PANOLENS.Infospot) {\n      this.infospot = intersect;\n\n      if (type === 'click') {\n        return true;\n      }\n    } else if (this.infospot) {\n      this.hideInfospot();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.getConvertedIntersect = function (intersects) {\n    var intersect;\n\n    for (var i = 0; i < intersects.length; i++) {\n      if (intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough) {\n        if (intersects[i].object.entity && intersects[i].object.entity.passThrough) {\n          continue;\n        } else if (intersects[i].object.entity && !intersects[i].object.entity.passThrough) {\n          intersect = intersects[i].object.entity;\n          break;\n        } else {\n          intersect = intersects[i].object;\n          break;\n        }\n      }\n    }\n\n    return intersect;\n  };\n\n  PANOLENS.Viewer.prototype.hideInfospot = function (intersects) {\n    if (this.infospot) {\n      this.infospot.onHoverEnd();\n\n      this.infospot = undefined;\n    }\n  };\n\n  PANOLENS.Viewer.prototype.toggleControlBar = function () {\n    this.widget && this.widget.dispatchEvent({ type: 'control-bar-toggle' });\n  };\n\n  PANOLENS.Viewer.prototype.onKeyDown = function (event) {\n    if (this.options.output && this.options.output !== 'none' && event.key === 'Control') {\n      this.OUTPUT_INFOSPOT = true;\n    }\n  };\n\n  PANOLENS.Viewer.prototype.onKeyUp = function (event) {\n    this.OUTPUT_INFOSPOT = false;\n  };\n\n  PANOLENS.Viewer.prototype.update = function () {\n    TWEEN.update();\n\n    this.updateCallbacks.forEach(function (callback) {\n      callback();\n    });\n\n    this.control.update();\n\n    this.scene.traverse(function (child) {\n      if (child instanceof PANOLENS.Infospot && child.element && (this.hoverObject === child || child.element.style.display !== 'none' || child.element.left && child.element.left.style.display !== 'none' || child.element.right && child.element.right.style.display !== 'none')) {\n        if (this.checkSpriteInViewport(child)) {\n          var vector = this.getScreenVector(child.getWorldPosition());\n          child.translateElement(vector.x, vector.y);\n        } else {\n          child.onDismiss();\n        }\n      }\n    }.bind(this));\n  };\n\n  PANOLENS.Viewer.prototype.render = function () {\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      this.effect.render(this.scene, this.camera);\n    } else {\n      this.renderer.render(this.scene, this.camera);\n    }\n  };\n\n  PANOLENS.Viewer.prototype.animate = function () {\n    this.requestAnimationId = window.requestAnimationFrame(this.animate.bind(this));\n\n    this.onChange();\n  };\n\n  PANOLENS.Viewer.prototype.onChange = function () {\n    this.update();\n    this.render();\n  };\n\n  PANOLENS.Viewer.prototype.registerMouseAndTouchEvents = function () {\n    this.container.addEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false);\n    this.container.addEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false);\n    this.container.addEventListener('mouseup', this.HANDLER_MOUSE_UP, false);\n    this.container.addEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false);\n    this.container.addEventListener('touchend', this.HANDLER_MOUSE_UP, false);\n  };\n\n  PANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents = function () {\n    this.container.removeEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false);\n    this.container.removeEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false);\n    this.container.removeEventListener('mouseup', this.HANDLER_MOUSE_UP, false);\n    this.container.removeEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false);\n    this.container.removeEventListener('touchend', this.HANDLER_MOUSE_UP, false);\n  };\n\n  PANOLENS.Viewer.prototype.registerReticleEvent = function () {\n    this.addUpdateCallback(this.HANDLER_TAP);\n  };\n\n  PANOLENS.Viewer.prototype.unregisterReticleEvent = function () {\n    this.removeUpdateCallback(this.HANDLER_TAP);\n  };\n\n  PANOLENS.Viewer.prototype.updateReticleEvent = function () {\n    var centerX, centerY;\n\n    centerX = this.container.clientWidth / 2 + this.container.offsetLeft;\n    centerY = this.container.clientHeight / 2;\n\n    this.removeUpdateCallback(this.HANDLER_TAP);\n    this.HANDLER_TAP = this.onTap.bind(this, { clientX: centerX, clientY: centerY });\n    this.addUpdateCallback(this.HANDLER_TAP);\n  };\n\n  PANOLENS.Viewer.prototype.registerEventListeners = function () {\n    window.addEventListener('resize', this.HANDLER_WINDOW_RESIZE, true);\n\n    window.addEventListener('keydown', this.HANDLER_KEY_DOWN, true);\n    window.addEventListener('keyup', this.HANDLER_KEY_UP, true);\n  };\n\n  PANOLENS.Viewer.prototype.unregisterEventListeners = function () {\n    window.removeEventListener('resize', this.HANDLER_WINDOW_RESIZE, true);\n\n    window.removeEventListener('keydown', this.HANDLER_KEY_DOWN, true);\n    window.removeEventListener('keyup', this.HANDLER_KEY_UP, true);\n  };\n\n  PANOLENS.Viewer.prototype.dispose = function () {\n    this.unregisterEventListeners();\n\n    function recursiveDispose(object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i]);\n        object.remove(object.children[i]);\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose();\n      }\n\n      object.geometry && object.geometry.dispose();\n      object.material && object.material.dispose();\n    }\n\n    recursiveDispose(this.scene);\n\n    if (this.widget) {\n      this.widget.dispose();\n      this.widget = null;\n    }\n\n    if (__WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"] && __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].enabled) {\n      __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].clear();\n    }\n  };\n\n  PANOLENS.Viewer.prototype.destory = function () {\n    this.dispose();\n    this.render();\n    window.cancelAnimationFrame(this.requestAnimationId);\n  };\n\n  PANOLENS.Viewer.prototype.onPanoramaDispose = function (panorama) {\n    if (panorama instanceof PANOLENS.VideoPanorama) {\n      this.hideVideoWidget();\n    }\n\n    if (panorama === this.panorama) {\n      this.panorama = null;\n    }\n  };\n\n  PANOLENS.Viewer.prototype.loadAsyncRequest = function (url, callback) {\n    var request = new XMLHttpRequest();\n    request.onloadend = function (event) {\n      callback && callback(event);\n    };\n    request.open('GET', url, true);\n    request.send(null);\n  };\n\n  PANOLENS.Viewer.prototype.addViewIndicator = function () {\n    var scope = this;\n\n    function loadViewIndicator(asyncEvent) {\n      if (asyncEvent.loaded === 0) return;\n\n      var viewIndicatorDiv = asyncEvent.target.responseXML.documentElement;\n      viewIndicatorDiv.style.width = scope.viewIndicatorSize + 'px';\n      viewIndicatorDiv.style.height = scope.viewIndicatorSize + 'px';\n      viewIndicatorDiv.style.position = 'absolute';\n      viewIndicatorDiv.style.top = '10px';\n      viewIndicatorDiv.style.left = '10px';\n      viewIndicatorDiv.style.opacity = '0.5';\n      viewIndicatorDiv.style.cursor = 'pointer';\n      viewIndicatorDiv.id = 'panolens-view-indicator-container';\n\n      scope.container.appendChild(viewIndicatorDiv);\n\n      var indicator = viewIndicatorDiv.querySelector('#indicator');\n      var setIndicatorD = function setIndicatorD() {\n        scope.radius = scope.viewIndicatorSize * 0.225;\n        scope.currentPanoAngle = scope.camera.rotation.y - __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(90);\n        scope.fovAngle = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.camera.fov);\n        scope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2;\n        scope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2;\n        scope.leftX = scope.radius * Math.cos(scope.leftAngle);\n        scope.leftY = scope.radius * Math.sin(scope.leftAngle);\n        scope.rightX = scope.radius * Math.cos(scope.rightAngle);\n        scope.rightY = scope.radius * Math.sin(scope.rightAngle);\n        scope.indicatorD = 'M ' + scope.leftX + ' ' + scope.leftY + ' A ' + scope.radius + ' ' + scope.radius + ' 0 0 1 ' + scope.rightX + ' ' + scope.rightY;\n\n        if (scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius) {\n          indicator.setAttribute('d', scope.indicatorD);\n        }\n      };\n\n      scope.addUpdateCallback(setIndicatorD);\n\n      var indicatorOnMouseEnter = function indicatorOnMouseEnter() {\n        this.style.opacity = '1';\n      };\n\n      var indicatorOnMouseLeave = function indicatorOnMouseLeave() {\n        this.style.opacity = '0.5';\n      };\n\n      viewIndicatorDiv.addEventListener('mouseenter', indicatorOnMouseEnter);\n      viewIndicatorDiv.addEventListener('mouseleave', indicatorOnMouseLeave);\n    }\n\n    this.loadAsyncRequest(PANOLENS.DataImage.ViewIndicator, loadViewIndicator);\n  };\n\n  PANOLENS.Viewer.prototype.appendControlItem = function (option) {\n    var item = this.widget.createCustomItem(option);\n\n    if (option.group === 'video') {\n      this.widget.videoElement.appendChild(item);\n    } else {\n      this.widget.barElement.appendChild(item);\n    }\n\n    return item;\n  };\n})();(function e(t, n, r) {\n  function s(o, u) {\n    if (!n[o]) {\n      if (!t[o]) {\n        var a = typeof require === 'function' && require;if (!u && a) return require(o, !0);if (i) return i(o, !0);var f = new Error(\"Cannot find module '\" + o + \"'\");throw f.code = 'MODULE_NOT_FOUND', f;\n      }var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {\n        var n = t[o][1][e];return s(n || e);\n      }, l, l.exports, e, t, n, r);\n    }return n[o].exports;\n  }var i = typeof require === 'function' && require;for (var o = 0; o < r.length; o++) {\n    s(r[o]);\n  }return s;\n})({ 1: [function (require, module, exports) {\n    var createLayout = require('layout-bmfont-text');\n    var inherits = require('inherits');\n    var createIndices = require('quad-indices');\n    var buffer = require('three-buffer-vertex-data');\n    var assign = require('object-assign');\n\n    var vertices = require('./lib/vertices');\n    var utils = require('./lib/utils');\n\n    var Base = __WEBPACK_IMPORTED_MODULE_8_three__[\"BufferGeometry\"];\n\n    module.exports = function createTextGeometry(opt) {\n      return new TextGeometry(opt);\n    };\n\n    function TextGeometry(opt) {\n      Base.call(this);\n\n      if (typeof opt === 'string') {\n        opt = { text: opt };\n      }\n\n      this._opt = assign({}, opt);\n\n      if (opt) this.update(opt);\n    }\n\n    inherits(TextGeometry, Base);\n\n    TextGeometry.prototype.update = function (opt) {\n      if (typeof opt === 'string') {\n        opt = { text: opt };\n      }\n\n      opt = assign({}, this._opt, opt);\n\n      if (!opt.font) {\n        throw new TypeError('must specify a { font } in options');\n      }\n\n      this.layout = createLayout(opt);\n\n      var flipY = opt.flipY !== false;\n\n      var font = opt.font;\n\n      var texWidth = font.common.scaleW;\n      var texHeight = font.common.scaleH;\n\n      var glyphs = this.layout.glyphs.filter(function (glyph) {\n        var bitmap = glyph.data;\n        return bitmap.width * bitmap.height > 0;\n      });\n\n      this.visibleGlyphs = glyphs;\n\n      var positions = vertices.positions(glyphs);\n      var uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY);\n      var indices = createIndices({\n        clockwise: true,\n        type: 'uint16',\n        count: glyphs.length\n      });\n\n      buffer.index(this, indices, 1, 'uint16');\n      buffer.attr(this, 'position', positions, 2);\n      buffer.attr(this, 'uv', uvs, 2);\n\n      if (!opt.multipage && 'page' in this.attributes) {\n        this.removeAttribute('page');\n      } else if (opt.multipage) {\n        var pages = vertices.pages(glyphs);\n\n        buffer.attr(this, 'page', pages, 1);\n      }\n    };\n\n    TextGeometry.prototype.computeBoundingSphere = function () {\n      if (this.boundingSphere === null) {\n        this.boundingSphere = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Sphere\"]();\n      }\n\n      var positions = this.attributes.position.array;\n      var itemSize = this.attributes.position.itemSize;\n      if (!positions || !itemSize || positions.length < 2) {\n        this.boundingSphere.radius = 0;\n        this.boundingSphere.center.set(0, 0, 0);\n        return;\n      }\n      utils.computeSphere(positions, this.boundingSphere);\n      if (isNaN(this.boundingSphere.radius)) {\n        console.error('THREE.BufferGeometry.computeBoundingSphere(): ' + 'Computed radius is NaN. The ' + '\"position\" attribute is likely to have NaN values.');\n      }\n    };\n\n    TextGeometry.prototype.computeBoundingBox = function () {\n      if (this.boundingBox === null) {\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Box3\"]();\n      }\n\n      var bbox = this.boundingBox;\n      var positions = this.attributes.position.array;\n      var itemSize = this.attributes.position.itemSize;\n      if (!positions || !itemSize || positions.length < 2) {\n        bbox.makeEmpty();\n        return;\n      }\n      utils.computeBox(positions, bbox);\n    };\n  }, { './lib/utils': 2, './lib/vertices': 3, 'inherits': 4, 'layout-bmfont-text': 5, 'object-assign': 26, 'quad-indices': 27, 'three-buffer-vertex-data': 31 }],\n  2: [function (require, module, exports) {\n    var itemSize = 2;\n    var box = { min: [0, 0], max: [0, 0] };\n\n    function bounds(positions) {\n      var count = positions.length / itemSize;\n      box.min[0] = positions[0];\n      box.min[1] = positions[1];\n      box.max[0] = positions[0];\n      box.max[1] = positions[1];\n\n      for (var i = 0; i < count; i++) {\n        var x = positions[i * itemSize + 0];\n        var y = positions[i * itemSize + 1];\n        box.min[0] = Math.min(x, box.min[0]);\n        box.min[1] = Math.min(y, box.min[1]);\n        box.max[0] = Math.max(x, box.max[0]);\n        box.max[1] = Math.max(y, box.max[1]);\n      }\n    }\n\n    module.exports.computeBox = function (positions, output) {\n      bounds(positions);\n      output.min.set(box.min[0], box.min[1], 0);\n      output.max.set(box.max[0], box.max[1], 0);\n    };\n\n    module.exports.computeSphere = function (positions, output) {\n      bounds(positions);\n      var minX = box.min[0];\n      var minY = box.min[1];\n      var maxX = box.max[0];\n      var maxY = box.max[1];\n      var width = maxX - minX;\n      var height = maxY - minY;\n      var length = Math.sqrt(width * width + height * height);\n      output.center.set(minX + width / 2, minY + height / 2, 0);\n      output.radius = length / 2;\n    };\n  }, {}],\n  3: [function (require, module, exports) {\n    module.exports.pages = function pages(glyphs) {\n      var pages = new Float32Array(glyphs.length * 4 * 1);\n      var i = 0;\n      glyphs.forEach(function (glyph) {\n        var id = glyph.data.page || 0;\n        pages[i++] = id;\n        pages[i++] = id;\n        pages[i++] = id;\n        pages[i++] = id;\n      });\n      return pages;\n    };\n\n    module.exports.uvs = function uvs(glyphs, texWidth, texHeight, flipY) {\n      var uvs = new Float32Array(glyphs.length * 4 * 2);\n      var i = 0;\n      glyphs.forEach(function (glyph) {\n        var bitmap = glyph.data;\n        var bw = bitmap.x + bitmap.width;\n        var bh = bitmap.y + bitmap.height;\n\n        var u0 = bitmap.x / texWidth;\n        var v1 = bitmap.y / texHeight;\n        var u1 = bw / texWidth;\n        var v0 = bh / texHeight;\n\n        if (flipY) {\n          v1 = (texHeight - bitmap.y) / texHeight;\n          v0 = (texHeight - bh) / texHeight;\n        }\n\n        uvs[i++] = u0;\n        uvs[i++] = v1;\n\n        uvs[i++] = u0;\n        uvs[i++] = v0;\n\n        uvs[i++] = u1;\n        uvs[i++] = v0;\n\n        uvs[i++] = u1;\n        uvs[i++] = v1;\n      });\n      return uvs;\n    };\n\n    module.exports.positions = function positions(glyphs) {\n      var positions = new Float32Array(glyphs.length * 4 * 2);\n      var i = 0;\n      glyphs.forEach(function (glyph) {\n        var bitmap = glyph.data;\n\n        var x = glyph.position[0] + bitmap.xoffset;\n        var y = glyph.position[1] + bitmap.yoffset;\n\n        var w = bitmap.width;\n        var h = bitmap.height;\n\n        positions[i++] = x;\n        positions[i++] = y;\n\n        positions[i++] = x;\n        positions[i++] = y + h;\n\n        positions[i++] = x + w;\n        positions[i++] = y + h;\n\n        positions[i++] = x + w;\n        positions[i++] = y;\n      });\n      return positions;\n    };\n  }, {}],\n  4: [function (require, module, exports) {\n    if (typeof __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default.a === 'function') {\n      module.exports = function inherits(ctor, superCtor) {\n        ctor.super_ = superCtor;\n        ctor.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(superCtor.prototype, {\n          constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n          }\n        });\n      };\n    } else {\n      module.exports = function inherits(ctor, superCtor) {\n        ctor.super_ = superCtor;\n        var TempCtor = function TempCtor() {};\n        TempCtor.prototype = superCtor.prototype;\n        ctor.prototype = new TempCtor();\n        ctor.prototype.constructor = ctor;\n      };\n    }\n  }, {}],\n  5: [function (require, module, exports) {\n    var wordWrap = require('word-wrapper');\n    var xtend = require('xtend');\n    var findChar = require('indexof-property')('id');\n    var number = require('as-number');\n\n    var X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z'];\n    var M_WIDTHS = ['m', 'w'];\n    var CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\n\n    var TAB_ID = '\\t'.charCodeAt(0);\n    var SPACE_ID = ' '.charCodeAt(0);\n    var ALIGN_LEFT = 0,\n        ALIGN_CENTER = 1,\n        ALIGN_RIGHT = 2;\n\n    module.exports = function createLayout(opt) {\n      return new TextLayout(opt);\n    };\n\n    function TextLayout(opt) {\n      this.glyphs = [];\n      this._measure = this.computeMetrics.bind(this);\n      this.update(opt);\n    }\n\n    TextLayout.prototype.update = function (opt) {\n      opt = xtend({\n        measure: this._measure\n      }, opt);\n      this._opt = opt;\n      this._opt.tabSize = number(this._opt.tabSize, 4);\n\n      if (!opt.font) {\n        throw new Error('must provide a valid bitmap font');\n      }\n\n      var glyphs = this.glyphs;\n      var text = opt.text || '';\n      var font = opt.font;\n      this._setupSpaceGlyphs(font);\n\n      var lines = wordWrap.lines(text, opt);\n      var minWidth = opt.width || 0;\n\n      glyphs.length = 0;\n\n      var maxLineWidth = lines.reduce(function (prev, line) {\n        return Math.max(prev, line.width, minWidth);\n      }, 0);\n\n      var x = 0;\n      var y = 0;\n      var lineHeight = number(opt.lineHeight, font.common.lineHeight);\n      var baseline = font.common.base;\n      var descender = lineHeight - baseline;\n      var letterSpacing = opt.letterSpacing || 0;\n      var height = lineHeight * lines.length - descender;\n      var align = getAlignType(this._opt.align);\n\n      y -= height;\n\n      this._width = maxLineWidth;\n      this._height = height;\n      this._descender = lineHeight - baseline;\n      this._baseline = baseline;\n      this._xHeight = getXHeight(font);\n      this._capHeight = getCapHeight(font);\n      this._lineHeight = lineHeight;\n      this._ascender = lineHeight - descender - this._xHeight;\n\n      var self = this;\n      lines.forEach(function (line, lineIndex) {\n        var start = line.start;\n        var end = line.end;\n        var lineWidth = line.width;\n        var lastGlyph;\n\n        for (var i = start; i < end; i++) {\n          var id = text.charCodeAt(i);\n          var glyph = self.getGlyph(font, id);\n          if (glyph) {\n            if (lastGlyph) {\n              x += getKerning(font, lastGlyph.id, glyph.id);\n            }\n\n            var tx = x;\n            if (align === ALIGN_CENTER) {\n              tx += (maxLineWidth - lineWidth) / 2;\n            } else if (align === ALIGN_RIGHT) {\n              tx += maxLineWidth - lineWidth;\n            }\n\n            glyphs.push({\n              position: [tx, y],\n              data: glyph,\n              index: i,\n              line: lineIndex\n            });\n\n            x += glyph.xadvance + letterSpacing;\n            lastGlyph = glyph;\n          }\n        }\n\n        y += lineHeight;\n        x = 0;\n      });\n      this._linesTotal = lines.length;\n    };\n\n    TextLayout.prototype._setupSpaceGlyphs = function (font) {\n      this._fallbackSpaceGlyph = null;\n      this._fallbackTabGlyph = null;\n\n      if (!font.chars || font.chars.length === 0) {\n        return;\n      }\n\n      var space = getGlyphById(font, SPACE_ID) || getMGlyph(font) || font.chars[0];\n\n      var tabWidth = this._opt.tabSize * space.xadvance;\n      this._fallbackSpaceGlyph = space;\n      this._fallbackTabGlyph = xtend(space, {\n        x: 0,\n        y: 0,\n        xadvance: tabWidth,\n        id: TAB_ID,\n        xoffset: 0,\n        yoffset: 0,\n        width: 0,\n        height: 0\n      });\n    };\n\n    TextLayout.prototype.getGlyph = function (font, id) {\n      var glyph = getGlyphById(font, id);\n      if (glyph) {\n        return glyph;\n      } else if (id === TAB_ID) {\n        return this._fallbackTabGlyph;\n      } else if (id === SPACE_ID) {\n        return this._fallbackSpaceGlyph;\n      }\n      return null;\n    };\n\n    TextLayout.prototype.computeMetrics = function (text, start, end, width) {\n      var letterSpacing = this._opt.letterSpacing || 0;\n      var font = this._opt.font;\n      var curPen = 0;\n      var curWidth = 0;\n      var count = 0;\n      var glyph;\n      var lastGlyph;\n\n      if (!font.chars || font.chars.length === 0) {\n        return {\n          start: start,\n          end: start,\n          width: 0\n        };\n      }\n\n      end = Math.min(text.length, end);\n      for (var i = start; i < end; i++) {\n        var id = text.charCodeAt(i);\n        var glyph = this.getGlyph(font, id);\n\n        if (glyph) {\n          var xoff = glyph.xoffset;\n          var kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0;\n          curPen += kern;\n\n          var nextPen = curPen + glyph.xadvance + letterSpacing;\n          var nextWidth = curPen + glyph.width;\n\n          if (nextWidth >= width || nextPen >= width) {\n            break;\n          }\n\n          curPen = nextPen;\n          curWidth = nextWidth;\n          lastGlyph = glyph;\n        }\n        count++;\n      }\n\n      if (lastGlyph) {\n        curWidth += lastGlyph.xoffset;\n      }\n\n      return {\n        start: start,\n        end: start + count,\n        width: curWidth\n      };\n    };['width', 'height', 'descender', 'ascender', 'xHeight', 'baseline', 'capHeight', 'lineHeight'].forEach(addGetter);\n\n    function addGetter(name) {\n      __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default()(TextLayout.prototype, name, {\n        get: wrapper(name),\n        configurable: true\n      });\n    }\n\n    function wrapper(name) {\n      return new Function(['return function ' + name + '() {', '  return this._' + name, '}'].join('\\n'))();\n    }\n\n    function getGlyphById(font, id) {\n      if (!font.chars || font.chars.length === 0) {\n        return null;\n      }\n\n      var glyphIdx = findChar(font.chars, id);\n      if (glyphIdx >= 0) {\n        return font.chars[glyphIdx];\n      }\n      return null;\n    }\n\n    function getXHeight(font) {\n      for (var i = 0; i < X_HEIGHTS.length; i++) {\n        var id = X_HEIGHTS[i].charCodeAt(0);\n        var idx = findChar(font.chars, id);\n        if (idx >= 0) {\n          return font.chars[idx].height;\n        }\n      }\n      return 0;\n    }\n\n    function getMGlyph(font) {\n      for (var i = 0; i < M_WIDTHS.length; i++) {\n        var id = M_WIDTHS[i].charCodeAt(0);\n        var idx = findChar(font.chars, id);\n        if (idx >= 0) {\n          return font.chars[idx];\n        }\n      }\n      return 0;\n    }\n\n    function getCapHeight(font) {\n      for (var i = 0; i < CAP_HEIGHTS.length; i++) {\n        var id = CAP_HEIGHTS[i].charCodeAt(0);\n        var idx = findChar(font.chars, id);\n        if (idx >= 0) {\n          return font.chars[idx].height;\n        }\n      }\n      return 0;\n    }\n\n    function getKerning(font, left, right) {\n      if (!font.kernings || font.kernings.length === 0) {\n        return 0;\n      }\n\n      var table = font.kernings;\n      for (var i = 0; i < table.length; i++) {\n        var kern = table[i];\n        if (kern.first === left && kern.second === right) {\n          return kern.amount;\n        }\n      }\n      return 0;\n    }\n\n    function getAlignType(align) {\n      if (align === 'center') {\n        return ALIGN_CENTER;\n      } else if (align === 'right') {\n        return ALIGN_RIGHT;\n      }\n      return ALIGN_LEFT;\n    }\n  }, { 'as-number': 6, 'indexof-property': 7, 'word-wrapper': 8, 'xtend': 9 }],\n  6: [function (require, module, exports) {\n    module.exports = function numtype(num, def) {\n      return typeof num === 'number' ? num : typeof def === 'number' ? def : 0;\n    };\n  }, {}],\n  7: [function (require, module, exports) {\n    module.exports = function compile(property) {\n      if (!property || typeof property !== 'string') {\n        throw new Error('must specify property for indexof search');\n      }\n\n      return new Function('array', 'value', 'start', ['start = start || 0', 'for (var i=start; i<array.length; i++)', '  if (array[i][\"' + property + '\"] === value)', '      return i', 'return -1'].join('\\n'));\n    };\n  }, {}],\n  8: [function (require, module, exports) {\n    var newline = /\\n/;\n    var newlineChar = '\\n';\n    var whitespace = /\\s/;\n\n    module.exports = function (text, opt) {\n      var lines = module.exports.lines(text, opt);\n      return lines.map(function (line) {\n        return text.substring(line.start, line.end);\n      }).join('\\n');\n    };\n\n    module.exports.lines = function wordwrap(text, opt) {\n      opt = opt || {};\n\n      if (opt.width === 0 && opt.mode !== 'nowrap') {\n        return [];\n      }\n\n      text = text || '';\n      var width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE;\n      var start = Math.max(0, opt.start || 0);\n      var end = typeof opt.end === 'number' ? opt.end : text.length;\n      var mode = opt.mode;\n\n      var measure = opt.measure || monospace;\n      if (mode === 'pre') {\n        return pre(measure, text, start, end, width);\n      } else {\n        return greedy(measure, text, start, end, width, mode);\n      }\n    };\n\n    function idxOf(text, chr, start, end) {\n      var idx = text.indexOf(chr, start);\n      if (idx === -1 || idx > end) {\n        return end;\n      }\n      return idx;\n    }\n\n    function isWhitespace(chr) {\n      return whitespace.test(chr);\n    }\n\n    function pre(measure, text, start, end, width) {\n      var lines = [];\n      var lineStart = start;\n      for (var i = start; i < end && i < text.length; i++) {\n        var chr = text.charAt(i);\n        var isNewline = newline.test(chr);\n\n        if (isNewline || i === end - 1) {\n          var lineEnd = isNewline ? i : i + 1;\n          var measured = measure(text, lineStart, lineEnd, width);\n          lines.push(measured);\n\n          lineStart = i + 1;\n        }\n      }\n      return lines;\n    }\n\n    function greedy(measure, text, start, end, width, mode) {\n      var lines = [];\n\n      var testWidth = width;\n\n      if (mode === 'nowrap') {\n        testWidth = Number.MAX_VALUE;\n      }\n\n      while (start < end && start < text.length) {\n        var newLine = idxOf(text, newlineChar, start, end);\n\n        while (start < newLine) {\n          if (!isWhitespace(text.charAt(start))) {\n            break;\n          }\n          start++;\n        }\n\n        var measured = measure(text, start, newLine, testWidth);\n\n        var lineEnd = start + (measured.end - measured.start);\n        var nextStart = lineEnd + newlineChar.length;\n\n        if (lineEnd < newLine) {\n          while (lineEnd > start) {\n            if (isWhitespace(text.charAt(lineEnd))) {\n              break;\n            }\n            lineEnd--;\n          }\n          if (lineEnd === start) {\n            if (nextStart > start + newlineChar.length) nextStart--;\n            lineEnd = nextStart;\n          } else {\n            nextStart = lineEnd;\n\n            while (lineEnd > start) {\n              if (!isWhitespace(text.charAt(lineEnd - newlineChar.length))) {\n                break;\n              }\n              lineEnd--;\n            }\n          }\n        }\n        if (lineEnd >= start) {\n          var result = measure(text, start, lineEnd, testWidth);\n          lines.push(result);\n        }\n        start = nextStart;\n      }\n      return lines;\n    }\n\n    function monospace(text, start, end, width) {\n      var glyphs = Math.min(width, end - start);\n      return {\n        start: start,\n        end: start + glyphs\n      };\n    }\n  }, {}],\n  9: [function (require, module, exports) {\n    module.exports = extend;\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    function extend() {\n      var target = {};\n\n      for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    }\n  }, {}],\n  10: [function (require, module, exports) {\n    (function (Buffer) {\n      var xhr = require('xhr');\n      var noop = function noop() {};\n      var parseASCII = require('parse-bmfont-ascii');\n      var parseXML = require('parse-bmfont-xml');\n      var readBinary = require('parse-bmfont-binary');\n      var isBinaryFormat = require('./lib/is-binary');\n      var xtend = require('xtend');\n\n      var xml2 = function hasXML2() {\n        return window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest();\n      }();\n\n      module.exports = function (opt, cb) {\n        cb = typeof cb === 'function' ? cb : noop;\n\n        if (typeof opt === 'string') {\n          opt = { uri: opt };\n        } else if (!opt) {\n          opt = {};\n        }\n\n        var expectBinary = opt.binary;\n        if (expectBinary) {\n          opt = getBinaryOpts(opt);\n        }\n\n        xhr(opt, function (err, res, body) {\n          if (err) {\n            return cb(err);\n          }\n          if (!/^2/.test(res.statusCode)) {\n            return cb(new Error('http status code: ' + res.statusCode));\n          }\n          if (!body) {\n            return cb(new Error('no body result'));\n          }\n\n          var binary = false;\n\n          if (isArrayBuffer(body)) {\n            var array = new Uint8Array(body);\n            body = new Buffer(array, 'binary');\n          }\n\n          if (isBinaryFormat(body)) {\n            binary = true;\n\n            if (typeof body === 'string') {\n              body = new Buffer(body, 'binary');\n            }\n          }\n\n          if (!binary) {\n            if (Buffer.isBuffer(body)) {\n              body = body.toString(opt.encoding);\n            }\n            body = body.trim();\n          }\n\n          var result;\n          try {\n            var type = res.headers['content-type'];\n            if (binary) {\n              result = readBinary(body);\n            } else if (/json/.test(type) || body.charAt(0) === '{') {\n              result = JSON.parse(body);\n            } else if (/xml/.test(type) || body.charAt(0) === '<') {\n              result = parseXML(body);\n            } else {\n              result = parseASCII(body);\n            }\n          } catch (e) {\n            cb(new Error('error parsing font ' + e.message));\n            cb = noop;\n          }\n          cb(null, result);\n        });\n      };\n\n      function isArrayBuffer(arr) {\n        var str = Object.prototype.toString;\n        return str.call(arr) === '[object ArrayBuffer]';\n      }\n\n      function getBinaryOpts(opt) {\n        if (xml2) {\n          return xtend(opt, { responseType: 'arraybuffer' });\n        }\n\n        if (typeof window.XMLHttpRequest === 'undefined') {\n          throw new Error('your browser does not support XHR loading');\n        }\n\n        var req = new window.XMLHttpRequest();\n        req.overrideMimeType('text/plain; charset=x-user-defined');\n        return xtend({\n          xhr: req\n        }, opt);\n      }\n    }).call(this, require('buffer').Buffer);\n  }, { './lib/is-binary': 11, 'buffer': 37, 'parse-bmfont-ascii': 13, 'parse-bmfont-binary': 14, 'parse-bmfont-xml': 15, 'xhr': 18, 'xtend': 25 }],\n  11: [function (require, module, exports) {\n    (function (Buffer) {\n      var equal = require('buffer-equal');\n      var HEADER = new Buffer([66, 77, 70, 3]);\n\n      module.exports = function (buf) {\n        if (typeof buf === 'string') {\n          return buf.substring(0, 3) === 'BMF';\n        }\n        return buf.length > 4 && equal(buf.slice(0, 4), HEADER);\n      };\n    }).call(this, require('buffer').Buffer);\n  }, { 'buffer': 37, 'buffer-equal': 12 }],\n  12: [function (require, module, exports) {\n    var Buffer = require('buffer').Buffer;\n\n    module.exports = function (a, b) {\n      if (!Buffer.isBuffer(a)) return undefined;\n      if (!Buffer.isBuffer(b)) return undefined;\n      if (typeof a.equals === 'function') return a.equals(b);\n      if (a.length !== b.length) return false;\n\n      for (var i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) return false;\n      }\n\n      return true;\n    };\n  }, { 'buffer': 37 }],\n  13: [function (require, module, exports) {\n    module.exports = function parseBMFontAscii(data) {\n      if (!data) {\n        throw new Error('no data provided');\n      }\n      data = data.toString().trim();\n\n      var output = {\n        pages: [],\n        chars: [],\n        kernings: []\n      };\n\n      var lines = data.split(/\\r\\n?|\\n/g);\n\n      if (lines.length === 0) {\n        throw new Error('no data in BMFont file');\n      }\n\n      for (var i = 0; i < lines.length; i++) {\n        var lineData = splitLine(lines[i], i);\n        if (!lineData) {\n            continue;\n          }\n\n        if (lineData.key === 'page') {\n          if (typeof lineData.data.id !== 'number') {\n            throw new Error('malformed file at line ' + i + ' -- needs page id=N');\n          }\n          if (typeof lineData.data.file !== 'string') {\n            throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"');\n          }\n          output.pages[lineData.data.id] = lineData.data.file;\n        } else if (lineData.key === 'chars' || lineData.key === 'kernings') {} else if (lineData.key === 'char') {\n          output.chars.push(lineData.data);\n        } else if (lineData.key === 'kerning') {\n          output.kernings.push(lineData.data);\n        } else {\n          output[lineData.key] = lineData.data;\n        }\n      }\n\n      return output;\n    };\n\n    function splitLine(line, idx) {\n      line = line.replace(/\\t+/g, ' ').trim();\n      if (!line) {\n        return null;\n      }\n\n      var space = line.indexOf(' ');\n      if (space === -1) {\n        throw new Error('no named row at line ' + idx);\n      }\n\n      var key = line.substring(0, space);\n\n      line = line.substring(space + 1);\n\n      line = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '');\n      line = line.split('=');\n      line = line.map(function (str) {\n        return str.trim().match(/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g);\n      });\n\n      var data = [];\n      for (var i = 0; i < line.length; i++) {\n        var dt = line[i];\n        if (i === 0) {\n          data.push({\n            key: dt[0],\n            data: ''\n          });\n        } else if (i === line.length - 1) {\n          data[data.length - 1].data = parseData(dt[0]);\n        } else {\n          data[data.length - 1].data = parseData(dt[0]);\n          data.push({\n            key: dt[1],\n            data: ''\n          });\n        }\n      }\n\n      var out = {\n        key: key,\n        data: {}\n      };\n\n      data.forEach(function (v) {\n        out.data[v.key] = v.data;\n      });\n\n      return out;\n    }\n\n    function parseData(data) {\n      if (!data || data.length === 0) {\n        return '';\n      }\n\n      if (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0) {\n        return data.substring(1, data.length - 1);\n      }\n      if (data.indexOf(',') !== -1) {\n        return parseIntList(data);\n      }\n      return parseInt(data, 10);\n    }\n\n    function parseIntList(data) {\n      return data.split(',').map(function (val) {\n        return parseInt(val, 10);\n      });\n    }\n  }, {}],\n  14: [function (require, module, exports) {\n    var HEADER = [66, 77, 70];\n\n    module.exports = function readBMFontBinary(buf) {\n      if (buf.length < 6) {\n        throw new Error('invalid buffer length for BMFont');\n      }\n\n      var header = HEADER.every(function (byte, i) {\n        return buf.readUInt8(i) === byte;\n      });\n\n      if (!header) {\n        throw new Error('BMFont missing BMF byte header');\n      }\n\n      var i = 3;\n      var vers = buf.readUInt8(i++);\n      if (vers > 3) {\n        throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)');\n      }\n\n      var target = { kernings: [], chars: [] };\n      for (var b = 0; b < 5; b++) {\n        i += readBlock(target, buf, i);\n      }\n      return target;\n    };\n\n    function readBlock(target, buf, i) {\n      if (i > buf.length - 1) {\n        return 0;\n      }\n\n      var blockID = buf.readUInt8(i++);\n      var blockSize = buf.readInt32LE(i);\n      i += 4;\n\n      switch (blockID) {\n        case 1:\n          target.info = readInfo(buf, i);\n          break;\n        case 2:\n          target.common = readCommon(buf, i);\n          break;\n        case 3:\n          target.pages = readPages(buf, i, blockSize);\n          break;\n        case 4:\n          target.chars = readChars(buf, i, blockSize);\n          break;\n        case 5:\n          target.kernings = readKernings(buf, i, blockSize);\n          break;\n      }\n      return 5 + blockSize;\n    }\n\n    function readInfo(buf, i) {\n      var info = {};\n      info.size = buf.readInt16LE(i);\n\n      var bitField = buf.readUInt8(i + 2);\n      info.smooth = bitField >> 7 & 1;\n      info.unicode = bitField >> 6 & 1;\n      info.italic = bitField >> 5 & 1;\n      info.bold = bitField >> 4 & 1;\n\n      if (bitField >> 3 & 1) {\n        info.fixedHeight = 1;\n      }\n\n      info.charset = buf.readUInt8(i + 3) || '';\n      info.stretchH = buf.readUInt16LE(i + 4);\n      info.aa = buf.readUInt8(i + 6);\n      info.padding = [buf.readInt8(i + 7), buf.readInt8(i + 8), buf.readInt8(i + 9), buf.readInt8(i + 10)];\n      info.spacing = [buf.readInt8(i + 11), buf.readInt8(i + 12)];\n      info.outline = buf.readUInt8(i + 13);\n      info.face = readStringNT(buf, i + 14);\n      return info;\n    }\n\n    function readCommon(buf, i) {\n      var common = {};\n      common.lineHeight = buf.readUInt16LE(i);\n      common.base = buf.readUInt16LE(i + 2);\n      common.scaleW = buf.readUInt16LE(i + 4);\n      common.scaleH = buf.readUInt16LE(i + 6);\n      common.pages = buf.readUInt16LE(i + 8);\n      var bitField = buf.readUInt8(i + 10);\n      common.packed = 0;\n      common.alphaChnl = buf.readUInt8(i + 11);\n      common.redChnl = buf.readUInt8(i + 12);\n      common.greenChnl = buf.readUInt8(i + 13);\n      common.blueChnl = buf.readUInt8(i + 14);\n      return common;\n    }\n\n    function readPages(buf, i, size) {\n      var pages = [];\n      var text = readNameNT(buf, i);\n      var len = text.length + 1;\n      var count = size / len;\n      for (var c = 0; c < count; c++) {\n        pages[c] = buf.slice(i, i + text.length).toString('utf8');\n        i += len;\n      }\n      return pages;\n    }\n\n    function readChars(buf, i, blockSize) {\n      var chars = [];\n\n      var count = blockSize / 20;\n      for (var c = 0; c < count; c++) {\n        var char = {};\n        var off = c * 20;\n        char.id = buf.readUInt32LE(i + 0 + off);\n        char.x = buf.readUInt16LE(i + 4 + off);\n        char.y = buf.readUInt16LE(i + 6 + off);\n        char.width = buf.readUInt16LE(i + 8 + off);\n        char.height = buf.readUInt16LE(i + 10 + off);\n        char.xoffset = buf.readInt16LE(i + 12 + off);\n        char.yoffset = buf.readInt16LE(i + 14 + off);\n        char.xadvance = buf.readInt16LE(i + 16 + off);\n        char.page = buf.readUInt8(i + 18 + off);\n        char.chnl = buf.readUInt8(i + 19 + off);\n        chars[c] = char;\n      }\n      return chars;\n    }\n\n    function readKernings(buf, i, blockSize) {\n      var kernings = [];\n      var count = blockSize / 10;\n      for (var c = 0; c < count; c++) {\n        var kern = {};\n        var off = c * 10;\n        kern.first = buf.readUInt32LE(i + 0 + off);\n        kern.second = buf.readUInt32LE(i + 4 + off);\n        kern.amount = buf.readInt16LE(i + 8 + off);\n        kernings[c] = kern;\n      }\n      return kernings;\n    }\n\n    function readNameNT(buf, offset) {\n      var pos = offset;\n      for (; pos < buf.length; pos++) {\n        if (buf[pos] === 0x00) {\n          break;\n        }\n      }\n      return buf.slice(offset, pos);\n    }\n\n    function readStringNT(buf, offset) {\n      return readNameNT(buf, offset).toString('utf8');\n    }\n  }, {}],\n  15: [function (require, module, exports) {\n    var parseAttributes = require('./parse-attribs');\n    var parseFromString = require('xml-parse-from-string');\n\n    var NAME_MAP = {\n      scaleh: 'scaleH',\n      scalew: 'scaleW',\n      stretchh: 'stretchH',\n      lineheight: 'lineHeight',\n      alphachnl: 'alphaChnl',\n      redchnl: 'redChnl',\n      greenchnl: 'greenChnl',\n      bluechnl: 'blueChnl'\n    };\n\n    module.exports = function parse(data) {\n      data = data.toString();\n\n      var xmlRoot = parseFromString(data);\n      var output = {\n        pages: [],\n        chars: [],\n        kernings: []\n      };['info', 'common'].forEach(function (key) {\n        var element = xmlRoot.getElementsByTagName(key)[0];\n        if (element) {\n          output[key] = parseAttributes(getAttribs(element));\n        }\n      });\n\n      var pageRoot = xmlRoot.getElementsByTagName('pages')[0];\n      if (!pageRoot) {\n        throw new Error('malformed file -- no <pages> element');\n      }\n      var pages = pageRoot.getElementsByTagName('page');\n      for (var i = 0; i < pages.length; i++) {\n        var p = pages[i];\n        var id = parseInt(p.getAttribute('id'), 10);\n        var file = p.getAttribute('file');\n        if (isNaN(id)) {\n          throw new Error('malformed file -- page \"id\" attribute is NaN');\n        }\n        if (!file) {\n          throw new Error('malformed file -- needs page \"file\" attribute');\n        }\n        output.pages[parseInt(id, 10)] = file;\n      }\n\n      ['chars', 'kernings'].forEach(function (key) {\n        var element = xmlRoot.getElementsByTagName(key)[0];\n        if (!element) {\n          return;\n        }\n        var childTag = key.substring(0, key.length - 1);\n        var children = element.getElementsByTagName(childTag);\n        for (var i = 0; i < children.length; i++) {\n          var child = children[i];\n          output[key].push(parseAttributes(getAttribs(child)));\n        }\n      });\n      return output;\n    };\n\n    function getAttribs(element) {\n      var attribs = getAttribList(element);\n      return attribs.reduce(function (dict, attrib) {\n        var key = mapName(attrib.nodeName);\n        dict[key] = attrib.nodeValue;\n        return dict;\n      }, {});\n    }\n\n    function getAttribList(element) {\n      var attribs = [];\n      for (var i = 0; i < element.attributes.length; i++) {\n        attribs.push(element.attributes[i]);\n      }\n      return attribs;\n    }\n\n    function mapName(nodeName) {\n      return NAME_MAP[nodeName.toLowerCase()] || nodeName;\n    }\n  }, { './parse-attribs': 16, 'xml-parse-from-string': 17 }],\n  16: [function (require, module, exports) {\n    var GLYPH_DESIGNER_ERROR = 'chasrset';\n\n    module.exports = function parseAttributes(obj) {\n      if (GLYPH_DESIGNER_ERROR in obj) {\n        obj['charset'] = obj[GLYPH_DESIGNER_ERROR];\n        delete obj[GLYPH_DESIGNER_ERROR];\n      }\n\n      for (var k in obj) {\n        if (k === 'face' || k === 'charset') {\n          continue;\n        } else if (k === 'padding' || k === 'spacing') {\n          obj[k] = parseIntList(obj[k]);\n        } else {\n          obj[k] = parseInt(obj[k], 10);\n        }\n      }\n      return obj;\n    };\n\n    function parseIntList(data) {\n      return data.split(',').map(function (val) {\n        return parseInt(val, 10);\n      });\n    }\n  }, {}],\n  17: [function (require, module, exports) {\n    module.exports = function xmlparser() {\n      if (typeof window.DOMParser !== 'undefined') {\n        return function (str) {\n          var parser = new window.DOMParser();\n          return parser.parseFromString(str, 'application/xml');\n        };\n      }\n\n      if (typeof window.ActiveXObject !== 'undefined' && new window.ActiveXObject('Microsoft.XMLDOM')) {\n        return function (str) {\n          var xmlDoc = new window.ActiveXObject('Microsoft.XMLDOM');\n          xmlDoc.async = 'false';\n          xmlDoc.loadXML(str);\n          return xmlDoc;\n        };\n      }\n\n      return function (str) {\n        var div = document.createElement('div');\n        div.innerHTML = str;\n        return div;\n      };\n    }();\n  }, {}],\n  18: [function (require, module, exports) {\n    'use strict';\n\n    var window = require('global/window');\n    var once = require('once');\n    var isFunction = require('is-function');\n    var parseHeaders = require('parse-headers');\n    var xtend = require('xtend');\n\n    module.exports = createXHR;\n    createXHR.XMLHttpRequest = window.XMLHttpRequest || noop;\n    createXHR.XDomainRequest = 'withCredentials' in new createXHR.XMLHttpRequest() ? createXHR.XMLHttpRequest : window.XDomainRequest;\n\n    forEachArray(['get', 'put', 'post', 'patch', 'head', 'delete'], function (method) {\n      createXHR[method === 'delete' ? 'del' : method] = function (uri, options, callback) {\n        options = initParams(uri, options, callback);\n        options.method = method.toUpperCase();\n        return _createXHR(options);\n      };\n    });\n\n    function forEachArray(array, iterator) {\n      for (var i = 0; i < array.length; i++) {\n        iterator(array[i]);\n      }\n    }\n\n    function isEmpty(obj) {\n      for (var i in obj) {\n        if (obj.hasOwnProperty(i)) return false;\n      }\n      return true;\n    }\n\n    function initParams(uri, options, callback) {\n      var params = uri;\n\n      if (isFunction(options)) {\n        callback = options;\n        if (typeof uri === 'string') {\n          params = { uri: uri };\n        }\n      } else {\n        params = xtend(options, { uri: uri });\n      }\n\n      params.callback = callback;\n      return params;\n    }\n\n    function createXHR(uri, options, callback) {\n      options = initParams(uri, options, callback);\n      return _createXHR(options);\n    }\n\n    function _createXHR(options) {\n      var callback = options.callback;\n      if (typeof callback === 'undefined') {\n        throw new Error('callback argument missing');\n      }\n      callback = once(callback);\n\n      function readystatechange() {\n        if (xhr.readyState === 4) {\n          loadFunc();\n        }\n      }\n\n      function getBody() {\n        var body = undefined;\n\n        if (xhr.response) {\n          body = xhr.response;\n        } else if (xhr.responseType === 'text' || !xhr.responseType) {\n          body = xhr.responseText || xhr.responseXML;\n        }\n\n        if (isJson) {\n          try {\n            body = JSON.parse(body);\n          } catch (e) {}\n        }\n\n        return body;\n      }\n\n      var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n      };\n\n      function errorFunc(evt) {\n        clearTimeout(timeoutTimer);\n        if (!(evt instanceof Error)) {\n          evt = new Error('' + (evt || 'Unknown XMLHttpRequest Error'));\n        }\n        evt.statusCode = 0;\n        callback(evt, failureResponse);\n      }\n\n      function loadFunc() {\n        if (aborted) return;\n        var status;\n        clearTimeout(timeoutTimer);\n        if (options.useXDR && xhr.status === undefined) {\n          status = 200;\n        } else {\n          status = xhr.status === 1223 ? 204 : xhr.status;\n        }\n        var response = failureResponse;\n        var err = null;\n\n        if (status !== 0) {\n          response = {\n            body: getBody(),\n            statusCode: status,\n            method: method,\n            headers: {},\n            url: uri,\n            rawRequest: xhr\n          };\n          if (xhr.getAllResponseHeaders) {\n            response.headers = parseHeaders(xhr.getAllResponseHeaders());\n          }\n        } else {\n          err = new Error('Internal XMLHttpRequest Error');\n        }\n        callback(err, response, response.body);\n      }\n\n      var xhr = options.xhr || null;\n\n      if (!xhr) {\n        if (options.cors || options.useXDR) {\n          xhr = new createXHR.XDomainRequest();\n        } else {\n          xhr = new createXHR.XMLHttpRequest();\n        }\n      }\n\n      var key;\n      var aborted;\n      var uri = xhr.url = options.uri || options.url;\n      var method = xhr.method = options.method || 'GET';\n      var body = options.body || options.data || null;\n      var headers = xhr.headers = options.headers || {};\n      var sync = !!options.sync;\n      var isJson = false;\n      var timeoutTimer;\n\n      if ('json' in options) {\n        isJson = true;\n        headers['accept'] || headers['Accept'] || (headers['Accept'] = 'application/json');\n        if (method !== 'GET' && method !== 'HEAD') {\n          headers['content-type'] || headers['Content-Type'] || (headers['Content-Type'] = 'application/json');\n          body = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(options.json);\n        }\n      }\n\n      xhr.onreadystatechange = readystatechange;\n      xhr.onload = loadFunc;\n      xhr.onerror = errorFunc;\n\n      xhr.onprogress = function () {};\n      xhr.ontimeout = errorFunc;\n      xhr.open(method, uri, !sync, options.username, options.password);\n\n      if (!sync) {\n        xhr.withCredentials = !!options.withCredentials;\n      }\n\n      if (!sync && options.timeout > 0) {\n        timeoutTimer = setTimeout(function () {\n          aborted = true;\n          xhr.abort('timeout');\n          var e = new Error('XMLHttpRequest timeout');\n          e.code = 'ETIMEDOUT';\n          errorFunc(e);\n        }, options.timeout);\n      }\n\n      if (xhr.setRequestHeader) {\n        for (key in headers) {\n          if (headers.hasOwnProperty(key)) {\n            xhr.setRequestHeader(key, headers[key]);\n          }\n        }\n      } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error('Headers cannot be set on an XDomainRequest object');\n      }\n\n      if ('responseType' in options) {\n        xhr.responseType = options.responseType;\n      }\n\n      if ('beforeSend' in options && typeof options.beforeSend === 'function') {\n        options.beforeSend(xhr);\n      }\n\n      xhr.send(body);\n\n      return xhr;\n    }\n\n    function noop() {}\n  }, { 'global/window': 19, 'is-function': 20, 'once': 21, 'parse-headers': 24, 'xtend': 25 }],\n  19: [function (require, module, exports) {\n    (function (global) {\n      if (typeof window !== 'undefined') {\n        module.exports = window;\n      } else if (typeof global !== 'undefined') {\n        module.exports = global;\n      } else if (typeof self !== 'undefined') {\n        module.exports = self;\n      } else {\n        module.exports = {};\n      }\n    }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {});\n  }, {}],\n  20: [function (require, module, exports) {\n    module.exports = isFunction;\n\n    var toString = Object.prototype.toString;\n\n    function isFunction(fn) {\n      var string = toString.call(fn);\n      return string === '[object Function]' || typeof fn === 'function' && string !== '[object RegExp]' || typeof window !== 'undefined' && (fn === window.setTimeout || fn === window.alert || fn === window.confirm || fn === window.prompt);\n    }\n  }, {}],\n  21: [function (require, module, exports) {\n    module.exports = once;\n\n    once.proto = once(function () {\n      Object.defineProperty(Function.prototype, 'once', {\n        value: function value() {\n          return once(this);\n        },\n        configurable: true\n      });\n    });\n\n    function once(fn) {\n      var called = false;\n      return function () {\n        if (called) return;\n        called = true;\n        return fn.apply(this, arguments);\n      };\n    }\n  }, {}],\n  22: [function (require, module, exports) {\n    var isFunction = require('is-function');\n\n    module.exports = forEach;\n\n    var toString = Object.prototype.toString;\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    function forEach(list, iterator, context) {\n      if (!isFunction(iterator)) {\n        throw new TypeError('iterator must be a function');\n      }\n\n      if (arguments.length < 3) {\n        context = this;\n      }\n\n      if (toString.call(list) === '[object Array]') {\n        forEachArray(list, iterator, context);\n      } else if (typeof list === 'string') {\n        forEachString(list, iterator, context);\n      } else {\n        forEachObject(list, iterator, context);\n      }\n    }\n\n    function forEachArray(array, iterator, context) {\n      for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n          iterator.call(context, array[i], i, array);\n        }\n      }\n    }\n\n    function forEachString(string, iterator, context) {\n      for (var i = 0, len = string.length; i < len; i++) {\n        iterator.call(context, string.charAt(i), i, string);\n      }\n    }\n\n    function forEachObject(object, iterator, context) {\n      for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n          iterator.call(context, object[k], k, object);\n        }\n      }\n    }\n  }, { 'is-function': 20 }],\n  23: [function (require, module, exports) {\n    exports = module.exports = trim;\n\n    function trim(str) {\n      return str.replace(/^\\s*|\\s*$/g, '');\n    }\n\n    exports.left = function (str) {\n      return str.replace(/^\\s*/, '');\n    };\n\n    exports.right = function (str) {\n      return str.replace(/\\s*$/, '');\n    };\n  }, {}],\n  24: [function (require, module, exports) {\n    var trim = require('trim'),\n        forEach = require('for-each'),\n        isArray = function isArray(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n\n    module.exports = function (headers) {\n      if (!headers) {\n        return {};\n      }\n\n      var result = {};\n\n      forEach(trim(headers).split('\\n'), function (row) {\n        var index = row.indexOf(':'),\n            key = trim(row.slice(0, index)).toLowerCase(),\n            value = trim(row.slice(index + 1));\n\n        if (typeof result[key] === 'undefined') {\n          result[key] = value;\n        } else if (isArray(result[key])) {\n          result[key].push(value);\n        } else {\n          result[key] = [result[key], value];\n        }\n      });\n\n      return result;\n    };\n  }, { 'for-each': 22, 'trim': 23 }],\n  25: [function (require, module, exports) {\n    arguments[4][9][0].apply(exports, arguments);\n  }, { 'dup': 9 }],\n  26: [function (require, module, exports) {\n    'use strict';\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n    function toObject(val) {\n      if (val === null || val === undefined) {\n        throw new TypeError('Object.assign cannot be called with null or undefined');\n      }\n\n      return Object(val);\n    }\n\n    module.exports = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default.a || function (target, source) {\n      var from;\n      var to = toObject(target);\n      var symbols;\n\n      for (var s = 1; s < arguments.length; s++) {\n        from = Object(arguments[s]);\n\n        for (var key in from) {\n          if (hasOwnProperty.call(from, key)) {\n            to[key] = from[key];\n          }\n        }\n\n        if (__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default.a) {\n          symbols = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default()(from);\n          for (var i = 0; i < symbols.length; i++) {\n            if (propIsEnumerable.call(from, symbols[i])) {\n              to[symbols[i]] = from[symbols[i]];\n            }\n          }\n        }\n      }\n\n      return to;\n    };\n  }, {}],\n  27: [function (require, module, exports) {\n    var dtype = require('dtype');\n    var anArray = require('an-array');\n    var isBuffer = require('is-buffer');\n\n    var CW = [0, 2, 3];\n    var CCW = [2, 1, 3];\n\n    module.exports = function createQuadElements(array, opt) {\n      if (!array || !(anArray(array) || isBuffer(array))) {\n        opt = array || {};\n        array = null;\n      }\n\n      if (typeof opt === 'number') {\n          opt = { count: opt };\n        } else {\n        opt = opt || {};\n      }\n\n      var type = typeof opt.type === 'string' ? opt.type : 'uint16';\n      var count = typeof opt.count === 'number' ? opt.count : 1;\n      var start = opt.start || 0;\n\n      var dir = opt.clockwise !== false ? CW : CCW,\n          a = dir[0],\n          b = dir[1],\n          c = dir[2];\n\n      var numIndices = count * 6;\n\n      var indices = array || new (dtype(type))(numIndices);\n      for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n        var x = i + start;\n        indices[x + 0] = j + 0;\n        indices[x + 1] = j + 1;\n        indices[x + 2] = j + 2;\n        indices[x + 3] = j + a;\n        indices[x + 4] = j + b;\n        indices[x + 5] = j + c;\n      }\n      return indices;\n    };\n  }, { 'an-array': 28, 'dtype': 29, 'is-buffer': 30 }],\n  28: [function (require, module, exports) {\n    var str = Object.prototype.toString;\n\n    module.exports = anArray;\n\n    function anArray(arr) {\n      return arr.BYTES_PER_ELEMENT && str.call(arr.buffer) === '[object ArrayBuffer]' || Array.isArray(arr);\n    }\n  }, {}],\n  29: [function (require, module, exports) {\n    module.exports = function (dtype) {\n      switch (dtype) {\n        case 'int8':\n          return Int8Array;\n        case 'int16':\n          return Int16Array;\n        case 'int32':\n          return Int32Array;\n        case 'uint8':\n          return Uint8Array;\n        case 'uint16':\n          return Uint16Array;\n        case 'uint32':\n          return Uint32Array;\n        case 'float32':\n          return Float32Array;\n        case 'float64':\n          return Float64Array;\n        case 'array':\n          return Array;\n        case 'uint8_clamped':\n          return Uint8ClampedArray;\n      }\n    };\n  }, {}],\n  30: [function (require, module, exports) {\n\n    module.exports = function (obj) {\n      return !!(obj != null && (obj._isBuffer || obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)));\n    };\n  }, {}],\n  31: [function (require, module, exports) {\n    var flatten = require('flatten-vertex-data');\n\n    module.exports.attr = setAttribute;\n    module.exports.index = setIndex;\n\n    function setIndex(geometry, data, itemSize, dtype) {\n      if (typeof itemSize !== 'number') itemSize = 1;\n      if (typeof dtype !== 'number') dtype = 'uint16';\n\n      var isR69 = !geometry.index && typeof geometry.setIndex !== 'function';\n      var attrib = isR69 ? geometry.getAttribute('index') : geometry.index;\n      var newAttrib = updateAttribute(attrib, data, itemSize, dtype);\n      if (newAttrib) {\n        if (isR69) geometry.addAttribute('index', newAttrib);else geometry.index = newAttrib;\n      }\n    }\n\n    function setAttribute(geometry, key, data, itemSize, dtype) {\n      if (typeof itemSize !== 'number') itemSize = 3;\n      if (typeof dtype !== 'number') dtype = 'float32';\n      if (Array.isArray(data) && Array.isArray(data[0]) && data[0].length !== itemSize) {\n        throw new Error('Nested vertex array has unexpected size; expected ' + itemSize + ' but found ' + data[0].length);\n      }\n\n      var attrib = geometry.getAttribute(key);\n      var newAttrib = updateAttribute(attrib, data, itemSize, dtype);\n      if (newAttrib) {\n        geometry.addAttribute(key, newAttrib);\n      }\n    }\n\n    function updateAttribute(attrib, data, itemSize, dtype) {\n      data = data || [];\n      if (!attrib || rebuildAttribute(attrib, data, itemSize)) {\n        data = flatten(data, dtype);\n        attrib = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BufferAttribute\"](data, itemSize);\n        attrib.needsUpdate = true;\n        return attrib;\n      } else {\n        flatten(data, attrib.array);\n        attrib.needsUpdate = true;\n        return null;\n      }\n    }\n\n    function rebuildAttribute(attrib, data, itemSize) {\n      if (attrib.itemSize !== itemSize) return true;\n      if (!attrib.array) return true;\n      var attribLength = attrib.array.length;\n      if (Array.isArray(data) && Array.isArray(data[0])) {\n        return attribLength !== data.length * itemSize;\n      } else {\n        return attribLength !== data.length;\n      }\n    }\n  }, { 'flatten-vertex-data': 32 }],\n  32: [function (require, module, exports) {\n    var dtype = require('dtype');\n    module.exports = flattenVertexData;\n    function flattenVertexData(data, output, offset) {\n      if (!data) throw new TypeError('must specify data as first parameter');\n      offset = +(offset || 0) | 0;\n\n      if (Array.isArray(data) && Array.isArray(data[0])) {\n        var dim = data[0].length;\n        var length = data.length * dim;\n\n        if (!output || typeof output === 'string') {\n          output = new (dtype(output || 'float32'))(length + offset);\n        }\n\n        var dstLength = output.length - offset;\n        if (length !== dstLength) {\n          throw new Error('source length ' + length + ' (' + dim + 'x' + data.length + ')' + ' does not match destination length ' + dstLength);\n        }\n\n        for (var i = 0, k = offset; i < data.length; i++) {\n          for (var j = 0; j < dim; j++) {\n            output[k++] = data[i][j];\n          }\n        }\n      } else {\n        if (!output || typeof output === 'string') {\n          var Ctor = dtype(output || 'float32');\n          if (offset === 0) {\n            output = new Ctor(data);\n          } else {\n            output = new Ctor(data.length + offset);\n            output.set(data, offset);\n          }\n        } else {\n          output.set(data, offset);\n        }\n      }\n\n      return output;\n    }\n  }, { 'dtype': 33 }],\n  33: [function (require, module, exports) {\n    arguments[4][29][0].apply(exports, arguments);\n  }, { 'dup': 29 }],\n  34: [function (require, module, exports) {\n    var assign = require('object-assign');\n\n    module.exports = function createSDFShader(opt) {\n      opt = opt || {};\n      var opacity = typeof opt.opacity === 'number' ? opt.opacity : 1;\n      var alphaTest = typeof opt.alphaTest === 'number' ? opt.alphaTest : 0.0001;\n      var precision = opt.precision || 'highp';\n      var color = opt.color;\n      var map = opt.map;\n\n      delete opt.map;\n      delete opt.color;\n      delete opt.precision;\n      delete opt.opacity;\n\n      return assign({\n        uniforms: {\n          opacity: { type: 'f', value: opacity },\n          map: { type: 't', value: map || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]() },\n          color: { type: 'c', value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Color\"](color) }\n        },\n        vertexShader: ['attribute vec2 uv;', 'attribute vec4 position;', 'uniform mat4 projectionMatrix;', 'uniform mat4 modelViewMatrix;', 'varying vec2 vUv;', 'void main() {', 'vUv = uv;', 'gl_Position = projectionMatrix * modelViewMatrix * position;', '}'].join('\\n'),\n        fragmentShader: ['#ifdef GL_OES_standard_derivatives', '#extension GL_OES_standard_derivatives : enable', '#endif', 'precision ' + precision + ' float;', 'uniform float opacity;', 'uniform vec3 color;', 'uniform sampler2D map;', 'varying vec2 vUv;', 'float aastep(float value) {', '  #ifdef GL_OES_standard_derivatives', '    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;', '  #else', '    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));', '  #endif', '  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);', '}', 'void main() {', '  vec4 texColor = texture2D(map, vUv);', '  float alpha = aastep(texColor.a);', '  gl_FragColor = vec4(color, opacity * alpha);', alphaTest === 0 ? '' : '  if (gl_FragColor.a < ' + alphaTest + ') discard;', '}'].join('\\n')\n      }, opt);\n    };\n  }, { 'object-assign': 26 }],\n  35: [function (require, module, exports) {\n    var loadFont = require('load-bmfont');\n\n    module.exports = function (opt, cb) {\n      loadFont(opt.font, function (err, font) {\n        if (err) throw err;\n        PANOLENS.Utils.TextureLoader.load(opt.image, function (tex) {\n          cb(font, tex);\n        });\n      });\n    };\n  }, { 'load-bmfont': 10 }],\n  36: [function (require, module, exports) {\n    var createText = require('../');\n    var SDFShader = require('../shaders/sdf');\n\n    if (PANOLENS && PANOLENS.Utils && PANOLENS.SpriteText) {\n      PANOLENS.Utils.loadBMFont = function (fontObject, callback) {\n        require('./load')(fontObject, PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype, callback));\n      };\n      PANOLENS.SpriteText.prototype.generateTextGeometry = createText;\n      PANOLENS.SpriteText.prototype.generateSDFShader = SDFShader;\n    }\n  }, { '../': 1, '../shaders/sdf': 34, './load': 35 }],\n  37: [function (require, module, exports) {\n    (function (global) {\n      /*!\n      * The buffer module from node.js, for the browser.\n      *\n      * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n      * @license  MIT\n      */\n      'use strict';\n\n      var base64 = require('base64-js');\n      var ieee754 = require('ieee754');\n      var isArray = require('isarray');\n\n      exports.Buffer = Buffer;\n      exports.SlowBuffer = SlowBuffer;\n      exports.INSPECT_MAX_BYTES = 50;\n      Buffer.poolSize = 8192;\n\n      var rootParent = {};\n\n      Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n\n      function typedArraySupport() {\n        try {\n          var arr = new Uint8Array(1);\n          arr.foo = function () {\n            return 42;\n          };\n          return arr.foo() === 42 && typeof arr.subarray === 'function' && arr.subarray(1, 1).byteLength === 0;\n        } catch (e) {\n          return false;\n        }\n      }\n\n      function kMaxLength() {\n        return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n      }\n\n      function Buffer(arg) {\n        if (!(this instanceof Buffer)) {\n          if (arguments.length > 1) return new Buffer(arg, arguments[1]);\n          return new Buffer(arg);\n        }\n\n        if (!Buffer.TYPED_ARRAY_SUPPORT) {\n          this.length = 0;\n          this.parent = undefined;\n        }\n\n        if (typeof arg === 'number') {\n          return fromNumber(this, arg);\n        }\n\n        if (typeof arg === 'string') {\n          return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8');\n        }\n\n        return fromObject(this, arg);\n      }\n\n      function fromNumber(that, length) {\n        that = allocate(that, length < 0 ? 0 : checked(length) | 0);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) {\n          for (var i = 0; i < length; i++) {\n            that[i] = 0;\n          }\n        }\n        return that;\n      }\n\n      function fromString(that, string, encoding) {\n        if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8';\n\n        var length = byteLength(string, encoding) | 0;\n        that = allocate(that, length);\n\n        that.write(string, encoding);\n        return that;\n      }\n\n      function fromObject(that, object) {\n        if (Buffer.isBuffer(object)) return fromBuffer(that, object);\n\n        if (isArray(object)) return fromArray(that, object);\n\n        if (object == null) {\n          throw new TypeError('must start with number, buffer, array or string');\n        }\n\n        if (typeof ArrayBuffer !== 'undefined') {\n          if (object.buffer instanceof ArrayBuffer) {\n            return fromTypedArray(that, object);\n          }\n          if (object instanceof ArrayBuffer) {\n            return fromArrayBuffer(that, object);\n          }\n        }\n\n        if (object.length) return fromArrayLike(that, object);\n\n        return fromJsonObject(that, object);\n      }\n\n      function fromBuffer(that, buffer) {\n        var length = checked(buffer.length) | 0;\n        that = allocate(that, length);\n        buffer.copy(that, 0, 0, length);\n        return that;\n      }\n\n      function fromArray(that, array) {\n        var length = checked(array.length) | 0;\n        that = allocate(that, length);\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      function fromTypedArray(that, array) {\n        var length = checked(array.length) | 0;\n        that = allocate(that, length);\n\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      function fromArrayBuffer(that, array) {\n\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          that = new Uint8Array(array);\n          that.__proto__ = Buffer.prototype;\n        } else {\n          that = fromTypedArray(that, new Uint8Array(array));\n        }\n        return that;\n      }\n\n      function fromArrayLike(that, array) {\n        var length = checked(array.length) | 0;\n        that = allocate(that, length);\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      function fromJsonObject(that, object) {\n        var array;\n        var length = 0;\n\n        if (object.type === 'Buffer' && isArray(object.data)) {\n          array = object.data;\n          length = checked(array.length) | 0;\n        }\n        that = allocate(that, length);\n\n        for (var i = 0; i < length; i += 1) {\n          that[i] = array[i] & 255;\n        }\n        return that;\n      }\n\n      if (Buffer.TYPED_ARRAY_SUPPORT) {\n        Buffer.prototype.__proto__ = Uint8Array.prototype;\n        Buffer.__proto__ = Uint8Array;\n      } else {\n        Buffer.prototype.length = undefined;\n        Buffer.prototype.parent = undefined;\n      }\n\n      function allocate(that, length) {\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          that = new Uint8Array(length);\n          that.__proto__ = Buffer.prototype;\n        } else {\n          that.length = length;\n        }\n\n        var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1;\n        if (fromPool) that.parent = rootParent;\n\n        return that;\n      }\n\n      function checked(length) {\n        if (length >= kMaxLength()) {\n          throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n        }\n        return length | 0;\n      }\n\n      function SlowBuffer(subject, encoding) {\n        if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding);\n\n        var buf = new Buffer(subject, encoding);\n        delete buf.parent;\n        return buf;\n      }\n\n      Buffer.isBuffer = function isBuffer(b) {\n        return !!(b != null && b._isBuffer);\n      };\n\n      Buffer.compare = function compare(a, b) {\n        if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n          throw new TypeError('Arguments must be Buffers');\n        }\n\n        if (a === b) return 0;\n\n        var x = a.length;\n        var y = b.length;\n\n        var i = 0;\n        var len = Math.min(x, y);\n        while (i < len) {\n          if (a[i] !== b[i]) break;\n\n          ++i;\n        }\n\n        if (i !== len) {\n          x = a[i];\n          y = b[i];\n        }\n\n        if (x < y) return -1;\n        if (y < x) return 1;\n        return 0;\n      };\n\n      Buffer.isEncoding = function isEncoding(encoding) {\n        switch (String(encoding).toLowerCase()) {\n          case 'hex':\n          case 'utf8':\n          case 'utf-8':\n          case 'ascii':\n          case 'binary':\n          case 'base64':\n          case 'raw':\n          case 'ucs2':\n          case 'ucs-2':\n          case 'utf16le':\n          case 'utf-16le':\n            return true;\n          default:\n            return false;\n        }\n      };\n\n      Buffer.concat = function concat(list, length) {\n        if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.');\n\n        if (list.length === 0) {\n          return new Buffer(0);\n        }\n\n        var i;\n        if (length === undefined) {\n          length = 0;\n          for (i = 0; i < list.length; i++) {\n            length += list[i].length;\n          }\n        }\n\n        var buf = new Buffer(length);\n        var pos = 0;\n        for (i = 0; i < list.length; i++) {\n          var item = list[i];\n          item.copy(buf, pos);\n          pos += item.length;\n        }\n        return buf;\n      };\n\n      function byteLength(string, encoding) {\n        if (typeof string !== 'string') string = '' + string;\n\n        var len = string.length;\n        if (len === 0) return 0;\n\n        var loweredCase = false;\n        for (;;) {\n          switch (encoding) {\n            case 'ascii':\n            case 'binary':\n            case 'raw':\n            case 'raws':\n              return len;\n            case 'utf8':\n            case 'utf-8':\n              return utf8ToBytes(string).length;\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return len * 2;\n            case 'hex':\n              return len >>> 1;\n            case 'base64':\n              return base64ToBytes(string).length;\n            default:\n              if (loweredCase) return utf8ToBytes(string).length;\n              encoding = ('' + encoding).toLowerCase();\n              loweredCase = true;\n          }\n        }\n      }\n      Buffer.byteLength = byteLength;\n\n      function slowToString(encoding, start, end) {\n        var loweredCase = false;\n\n        start = start | 0;\n        end = end === undefined || end === Infinity ? this.length : end | 0;\n\n        if (!encoding) encoding = 'utf8';\n        if (start < 0) start = 0;\n        if (end > this.length) end = this.length;\n        if (end <= start) return '';\n\n        while (true) {\n          switch (encoding) {\n            case 'hex':\n              return hexSlice(this, start, end);\n\n            case 'utf8':\n            case 'utf-8':\n              return utf8Slice(this, start, end);\n\n            case 'ascii':\n              return asciiSlice(this, start, end);\n\n            case 'binary':\n              return binarySlice(this, start, end);\n\n            case 'base64':\n              return base64Slice(this, start, end);\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return utf16leSlice(this, start, end);\n\n            default:\n              if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n              encoding = (encoding + '').toLowerCase();\n              loweredCase = true;\n          }\n        }\n      }\n\n      Buffer.prototype._isBuffer = true;\n\n      Buffer.prototype.toString = function toString() {\n        var length = this.length | 0;\n        if (length === 0) return '';\n        if (arguments.length === 0) return utf8Slice(this, 0, length);\n        return slowToString.apply(this, arguments);\n      };\n\n      Buffer.prototype.equals = function equals(b) {\n        if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n        if (this === b) return true;\n        return Buffer.compare(this, b) === 0;\n      };\n\n      Buffer.prototype.inspect = function inspect() {\n        var str = '';\n        var max = exports.INSPECT_MAX_BYTES;\n        if (this.length > 0) {\n          str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n          if (this.length > max) str += ' ... ';\n        }\n        return '<Buffer ' + str + '>';\n      };\n\n      Buffer.prototype.compare = function compare(b) {\n        if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n        if (this === b) return 0;\n        return Buffer.compare(this, b);\n      };\n\n      Buffer.prototype.indexOf = function indexOf(val, byteOffset) {\n        if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff;else if (byteOffset < -0x80000000) byteOffset = -0x80000000;\n        byteOffset >>= 0;\n\n        if (this.length === 0) return -1;\n        if (byteOffset >= this.length) return -1;\n\n        if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0);\n\n        if (typeof val === 'string') {\n          if (val.length === 0) return -1;\n          return String.prototype.indexOf.call(this, val, byteOffset);\n        }\n        if (Buffer.isBuffer(val)) {\n          return arrayIndexOf(this, val, byteOffset);\n        }\n        if (typeof val === 'number') {\n          if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n            return Uint8Array.prototype.indexOf.call(this, val, byteOffset);\n          }\n          return arrayIndexOf(this, [val], byteOffset);\n        }\n\n        function arrayIndexOf(arr, val, byteOffset) {\n          var foundIndex = -1;\n          for (var i = 0; byteOffset + i < arr.length; i++) {\n            if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n              if (foundIndex === -1) foundIndex = i;\n              if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex;\n            } else {\n              foundIndex = -1;\n            }\n          }\n          return -1;\n        }\n\n        throw new TypeError('val must be string, number or Buffer');\n      };\n\n      function hexWrite(buf, string, offset, length) {\n        offset = Number(offset) || 0;\n        var remaining = buf.length - offset;\n        if (!length) {\n          length = remaining;\n        } else {\n          length = Number(length);\n          if (length > remaining) {\n            length = remaining;\n          }\n        }\n\n        var strLen = string.length;\n        if (strLen % 2 !== 0) throw new Error('Invalid hex string');\n\n        if (length > strLen / 2) {\n          length = strLen / 2;\n        }\n        for (var i = 0; i < length; i++) {\n          var parsed = parseInt(string.substr(i * 2, 2), 16);\n          if (isNaN(parsed)) throw new Error('Invalid hex string');\n          buf[offset + i] = parsed;\n        }\n        return i;\n      }\n\n      function utf8Write(buf, string, offset, length) {\n        return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n      }\n\n      function asciiWrite(buf, string, offset, length) {\n        return blitBuffer(asciiToBytes(string), buf, offset, length);\n      }\n\n      function binaryWrite(buf, string, offset, length) {\n        return asciiWrite(buf, string, offset, length);\n      }\n\n      function base64Write(buf, string, offset, length) {\n        return blitBuffer(base64ToBytes(string), buf, offset, length);\n      }\n\n      function ucs2Write(buf, string, offset, length) {\n        return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n      }\n\n      Buffer.prototype.write = function write(string, offset, length, encoding) {\n        if (offset === undefined) {\n          encoding = 'utf8';\n          length = this.length;\n          offset = 0;\n        } else if (length === undefined && typeof offset === 'string') {\n          encoding = offset;\n          length = this.length;\n          offset = 0;\n        } else if (isFinite(offset)) {\n          offset = offset | 0;\n          if (isFinite(length)) {\n            length = length | 0;\n            if (encoding === undefined) encoding = 'utf8';\n          } else {\n            encoding = length;\n            length = undefined;\n          }\n        } else {\n          var swap = encoding;\n          encoding = offset;\n          offset = length | 0;\n          length = swap;\n        }\n\n        var remaining = this.length - offset;\n        if (length === undefined || length > remaining) length = remaining;\n\n        if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n          throw new RangeError('attempt to write outside buffer bounds');\n        }\n\n        if (!encoding) encoding = 'utf8';\n\n        var loweredCase = false;\n        for (;;) {\n          switch (encoding) {\n            case 'hex':\n              return hexWrite(this, string, offset, length);\n\n            case 'utf8':\n            case 'utf-8':\n              return utf8Write(this, string, offset, length);\n\n            case 'ascii':\n              return asciiWrite(this, string, offset, length);\n\n            case 'binary':\n              return binaryWrite(this, string, offset, length);\n\n            case 'base64':\n              return base64Write(this, string, offset, length);\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n              return ucs2Write(this, string, offset, length);\n\n            default:\n              if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n              encoding = ('' + encoding).toLowerCase();\n              loweredCase = true;\n          }\n        }\n      };\n\n      Buffer.prototype.toJSON = function toJSON() {\n        return {\n          type: 'Buffer',\n          data: Array.prototype.slice.call(this._arr || this, 0)\n        };\n      };\n\n      function base64Slice(buf, start, end) {\n        if (start === 0 && end === buf.length) {\n          return base64.fromByteArray(buf);\n        } else {\n          return base64.fromByteArray(buf.slice(start, end));\n        }\n      }\n\n      function utf8Slice(buf, start, end) {\n        end = Math.min(buf.length, end);\n        var res = [];\n\n        var i = start;\n        while (i < end) {\n          var firstByte = buf[i];\n          var codePoint = null;\n          var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n          if (i + bytesPerSequence <= end) {\n            var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n            switch (bytesPerSequence) {\n              case 1:\n                if (firstByte < 0x80) {\n                  codePoint = firstByte;\n                }\n                break;\n              case 2:\n                secondByte = buf[i + 1];\n                if ((secondByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n                  if (tempCodePoint > 0x7F) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n                break;\n              case 3:\n                secondByte = buf[i + 1];\n                thirdByte = buf[i + 2];\n                if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n                  if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n                break;\n              case 4:\n                secondByte = buf[i + 1];\n                thirdByte = buf[i + 2];\n                fourthByte = buf[i + 3];\n                if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n                  tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n                  if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n                    codePoint = tempCodePoint;\n                  }\n                }\n            }\n          }\n\n          if (codePoint === null) {\n            codePoint = 0xFFFD;\n            bytesPerSequence = 1;\n          } else if (codePoint > 0xFFFF) {\n            codePoint -= 0x10000;\n            res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n            codePoint = 0xDC00 | codePoint & 0x3FF;\n          }\n\n          res.push(codePoint);\n          i += bytesPerSequence;\n        }\n\n        return decodeCodePointsArray(res);\n      }\n\n      var MAX_ARGUMENTS_LENGTH = 0x1000;\n\n      function decodeCodePointsArray(codePoints) {\n        var len = codePoints.length;\n        if (len <= MAX_ARGUMENTS_LENGTH) {\n          return String.fromCharCode.apply(String, codePoints);\n        }\n\n        var res = '';\n        var i = 0;\n        while (i < len) {\n          res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n        }\n        return res;\n      }\n\n      function asciiSlice(buf, start, end) {\n        var ret = '';\n        end = Math.min(buf.length, end);\n\n        for (var i = start; i < end; i++) {\n          ret += String.fromCharCode(buf[i] & 0x7F);\n        }\n        return ret;\n      }\n\n      function binarySlice(buf, start, end) {\n        var ret = '';\n        end = Math.min(buf.length, end);\n\n        for (var i = start; i < end; i++) {\n          ret += String.fromCharCode(buf[i]);\n        }\n        return ret;\n      }\n\n      function hexSlice(buf, start, end) {\n        var len = buf.length;\n\n        if (!start || start < 0) start = 0;\n        if (!end || end < 0 || end > len) end = len;\n\n        var out = '';\n        for (var i = start; i < end; i++) {\n          out += toHex(buf[i]);\n        }\n        return out;\n      }\n\n      function utf16leSlice(buf, start, end) {\n        var bytes = buf.slice(start, end);\n        var res = '';\n        for (var i = 0; i < bytes.length; i += 2) {\n          res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n        }\n        return res;\n      }\n\n      Buffer.prototype.slice = function slice(start, end) {\n        var len = this.length;\n        start = ~~start;\n        end = end === undefined ? len : ~~end;\n\n        if (start < 0) {\n          start += len;\n          if (start < 0) start = 0;\n        } else if (start > len) {\n          start = len;\n        }\n\n        if (end < 0) {\n          end += len;\n          if (end < 0) end = 0;\n        } else if (end > len) {\n          end = len;\n        }\n\n        if (end < start) end = start;\n\n        var newBuf;\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          newBuf = this.subarray(start, end);\n          newBuf.__proto__ = Buffer.prototype;\n        } else {\n          var sliceLen = end - start;\n          newBuf = new Buffer(sliceLen, undefined);\n          for (var i = 0; i < sliceLen; i++) {\n            newBuf[i] = this[i + start];\n          }\n        }\n\n        if (newBuf.length) newBuf.parent = this.parent || this;\n\n        return newBuf;\n      };\n\n      function checkOffset(offset, ext, length) {\n        if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n        if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n      }\n\n      Buffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n        var val = this[offset];\n        var mul = 1;\n        var i = 0;\n        while (++i < byteLength && (mul *= 0x100)) {\n          val += this[offset + i] * mul;\n        }\n\n        return val;\n      };\n\n      Buffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) {\n          checkOffset(offset, byteLength, this.length);\n        }\n\n        var val = this[offset + --byteLength];\n        var mul = 1;\n        while (byteLength > 0 && (mul *= 0x100)) {\n          val += this[offset + --byteLength] * mul;\n        }\n\n        return val;\n      };\n\n      Buffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 1, this.length);\n        return this[offset];\n      };\n\n      Buffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        return this[offset] | this[offset + 1] << 8;\n      };\n\n      Buffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        return this[offset] << 8 | this[offset + 1];\n      };\n\n      Buffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n      };\n\n      Buffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n      };\n\n      Buffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n        var val = this[offset];\n        var mul = 1;\n        var i = 0;\n        while (++i < byteLength && (mul *= 0x100)) {\n          val += this[offset + i] * mul;\n        }\n        mul *= 0x80;\n\n        if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n        return val;\n      };\n\n      Buffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n        var i = byteLength;\n        var mul = 1;\n        var val = this[offset + --i];\n        while (i > 0 && (mul *= 0x100)) {\n          val += this[offset + --i] * mul;\n        }\n        mul *= 0x80;\n\n        if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n        return val;\n      };\n\n      Buffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 1, this.length);\n        if (!(this[offset] & 0x80)) return this[offset];\n        return (0xff - this[offset] + 1) * -1;\n      };\n\n      Buffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        var val = this[offset] | this[offset + 1] << 8;\n        return val & 0x8000 ? val | 0xFFFF0000 : val;\n      };\n\n      Buffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 2, this.length);\n        var val = this[offset + 1] | this[offset] << 8;\n        return val & 0x8000 ? val | 0xFFFF0000 : val;\n      };\n\n      Buffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n      };\n\n      Buffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n\n        return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n      };\n\n      Buffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return ieee754.read(this, offset, true, 23, 4);\n      };\n\n      Buffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 4, this.length);\n        return ieee754.read(this, offset, false, 23, 4);\n      };\n\n      Buffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 8, this.length);\n        return ieee754.read(this, offset, true, 52, 8);\n      };\n\n      Buffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n        if (!noAssert) checkOffset(offset, 8, this.length);\n        return ieee754.read(this, offset, false, 52, 8);\n      };\n\n      function checkInt(buf, value, offset, ext, max, min) {\n        if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance');\n        if (value > max || value < min) throw new RangeError('value is out of bounds');\n        if (offset + ext > buf.length) throw new RangeError('index out of range');\n      }\n\n      Buffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0);\n\n        var mul = 1;\n        var i = 0;\n        this[offset] = value & 0xFF;\n        while (++i < byteLength && (mul *= 0x100)) {\n          this[offset + i] = value / mul & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        byteLength = byteLength | 0;\n        if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0);\n\n        var i = byteLength - 1;\n        var mul = 1;\n        this[offset + i] = value & 0xFF;\n        while (--i >= 0 && (mul *= 0x100)) {\n          this[offset + i] = value / mul & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n        this[offset] = value & 0xff;\n        return offset + 1;\n      };\n\n      function objectWriteUInt16(buf, value, offset, littleEndian) {\n        if (value < 0) value = 0xffff + value + 1;\n        for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n          buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n        }\n      }\n\n      Buffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n        } else {\n          objectWriteUInt16(this, value, offset, true);\n        }\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 8;\n          this[offset + 1] = value & 0xff;\n        } else {\n          objectWriteUInt16(this, value, offset, false);\n        }\n        return offset + 2;\n      };\n\n      function objectWriteUInt32(buf, value, offset, littleEndian) {\n        if (value < 0) value = 0xffffffff + value + 1;\n        for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n          buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n        }\n      }\n\n      Buffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset + 3] = value >>> 24;\n          this[offset + 2] = value >>> 16;\n          this[offset + 1] = value >>> 8;\n          this[offset] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, true);\n        }\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 24;\n          this[offset + 1] = value >>> 16;\n          this[offset + 2] = value >>> 8;\n          this[offset + 3] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, false);\n        }\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) {\n          var limit = Math.pow(2, 8 * byteLength - 1);\n\n          checkInt(this, value, offset, byteLength, limit - 1, -limit);\n        }\n\n        var i = 0;\n        var mul = 1;\n        var sub = value < 0 ? 1 : 0;\n        this[offset] = value & 0xFF;\n        while (++i < byteLength && (mul *= 0x100)) {\n          this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) {\n          var limit = Math.pow(2, 8 * byteLength - 1);\n\n          checkInt(this, value, offset, byteLength, limit - 1, -limit);\n        }\n\n        var i = byteLength - 1;\n        var mul = 1;\n        var sub = value < 0 ? 1 : 0;\n        this[offset + i] = value & 0xFF;\n        while (--i >= 0 && (mul *= 0x100)) {\n          this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n        }\n\n        return offset + byteLength;\n      };\n\n      Buffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n        if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n        if (value < 0) value = 0xff + value + 1;\n        this[offset] = value & 0xff;\n        return offset + 1;\n      };\n\n      Buffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n        } else {\n          objectWriteUInt16(this, value, offset, true);\n        }\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 8;\n          this[offset + 1] = value & 0xff;\n        } else {\n          objectWriteUInt16(this, value, offset, false);\n        }\n        return offset + 2;\n      };\n\n      Buffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value & 0xff;\n          this[offset + 1] = value >>> 8;\n          this[offset + 2] = value >>> 16;\n          this[offset + 3] = value >>> 24;\n        } else {\n          objectWriteUInt32(this, value, offset, true);\n        }\n        return offset + 4;\n      };\n\n      Buffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n        value = +value;\n        offset = offset | 0;\n        if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n        if (value < 0) value = 0xffffffff + value + 1;\n        if (Buffer.TYPED_ARRAY_SUPPORT) {\n          this[offset] = value >>> 24;\n          this[offset + 1] = value >>> 16;\n          this[offset + 2] = value >>> 8;\n          this[offset + 3] = value & 0xff;\n        } else {\n          objectWriteUInt32(this, value, offset, false);\n        }\n        return offset + 4;\n      };\n\n      function checkIEEE754(buf, value, offset, ext, max, min) {\n        if (value > max || value < min) throw new RangeError('value is out of bounds');\n        if (offset + ext > buf.length) throw new RangeError('index out of range');\n        if (offset < 0) throw new RangeError('index out of range');\n      }\n\n      function writeFloat(buf, value, offset, littleEndian, noAssert) {\n        if (!noAssert) {\n          checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n        }\n        ieee754.write(buf, value, offset, littleEndian, 23, 4);\n        return offset + 4;\n      }\n\n      Buffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n        return writeFloat(this, value, offset, true, noAssert);\n      };\n\n      Buffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n        return writeFloat(this, value, offset, false, noAssert);\n      };\n\n      function writeDouble(buf, value, offset, littleEndian, noAssert) {\n        if (!noAssert) {\n          checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n        }\n        ieee754.write(buf, value, offset, littleEndian, 52, 8);\n        return offset + 8;\n      }\n\n      Buffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n        return writeDouble(this, value, offset, true, noAssert);\n      };\n\n      Buffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n        return writeDouble(this, value, offset, false, noAssert);\n      };\n\n      Buffer.prototype.copy = function copy(target, targetStart, start, end) {\n        if (!start) start = 0;\n        if (!end && end !== 0) end = this.length;\n        if (targetStart >= target.length) targetStart = target.length;\n        if (!targetStart) targetStart = 0;\n        if (end > 0 && end < start) end = start;\n\n        if (end === start) return 0;\n        if (target.length === 0 || this.length === 0) return 0;\n\n        if (targetStart < 0) {\n          throw new RangeError('targetStart out of bounds');\n        }\n        if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n        if (end < 0) throw new RangeError('sourceEnd out of bounds');\n\n        if (end > this.length) end = this.length;\n        if (target.length - targetStart < end - start) {\n          end = target.length - targetStart + start;\n        }\n\n        var len = end - start;\n        var i;\n\n        if (this === target && start < targetStart && targetStart < end) {\n          for (i = len - 1; i >= 0; i--) {\n            target[i + targetStart] = this[i + start];\n          }\n        } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n          for (i = 0; i < len; i++) {\n            target[i + targetStart] = this[i + start];\n          }\n        } else {\n          Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n        }\n\n        return len;\n      };\n\n      Buffer.prototype.fill = function fill(value, start, end) {\n        if (!value) value = 0;\n        if (!start) start = 0;\n        if (!end) end = this.length;\n\n        if (end < start) throw new RangeError('end < start');\n\n        if (end === start) return;\n        if (this.length === 0) return;\n\n        if (start < 0 || start >= this.length) throw new RangeError('start out of bounds');\n        if (end < 0 || end > this.length) throw new RangeError('end out of bounds');\n\n        var i;\n        if (typeof value === 'number') {\n          for (i = start; i < end; i++) {\n            this[i] = value;\n          }\n        } else {\n          var bytes = utf8ToBytes(value.toString());\n          var len = bytes.length;\n          for (i = start; i < end; i++) {\n            this[i] = bytes[i % len];\n          }\n        }\n\n        return this;\n      };\n\n      var INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\n      function base64clean(str) {\n        str = stringtrim(str).replace(INVALID_BASE64_RE, '');\n\n        if (str.length < 2) return '';\n\n        while (str.length % 4 !== 0) {\n          str = str + '=';\n        }\n        return str;\n      }\n\n      function stringtrim(str) {\n        if (str.trim) return str.trim();\n        return str.replace(/^\\s+|\\s+$/g, '');\n      }\n\n      function toHex(n) {\n        if (n < 16) return '0' + n.toString(16);\n        return n.toString(16);\n      }\n\n      function utf8ToBytes(string, units) {\n        units = units || Infinity;\n        var codePoint;\n        var length = string.length;\n        var leadSurrogate = null;\n        var bytes = [];\n\n        for (var i = 0; i < length; i++) {\n          codePoint = string.charCodeAt(i);\n\n          if (codePoint > 0xD7FF && codePoint < 0xE000) {\n            if (!leadSurrogate) {\n              if (codePoint > 0xDBFF) {\n                if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n                continue;\n              } else if (i + 1 === length) {\n                if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n                continue;\n              }\n\n              leadSurrogate = codePoint;\n\n              continue;\n            }\n\n            if (codePoint < 0xDC00) {\n              if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n              leadSurrogate = codePoint;\n              continue;\n            }\n\n            codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n          } else if (leadSurrogate) {\n            if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          }\n\n          leadSurrogate = null;\n\n          if (codePoint < 0x80) {\n            if ((units -= 1) < 0) break;\n            bytes.push(codePoint);\n          } else if (codePoint < 0x800) {\n            if ((units -= 2) < 0) break;\n            bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n          } else if (codePoint < 0x10000) {\n            if ((units -= 3) < 0) break;\n            bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n          } else if (codePoint < 0x110000) {\n            if ((units -= 4) < 0) break;\n            bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n          } else {\n            throw new Error('Invalid code point');\n          }\n        }\n\n        return bytes;\n      }\n\n      function asciiToBytes(str) {\n        var byteArray = [];\n        for (var i = 0; i < str.length; i++) {\n          byteArray.push(str.charCodeAt(i) & 0xFF);\n        }\n        return byteArray;\n      }\n\n      function utf16leToBytes(str, units) {\n        var c, hi, lo;\n        var byteArray = [];\n        for (var i = 0; i < str.length; i++) {\n          if ((units -= 2) < 0) break;\n\n          c = str.charCodeAt(i);\n          hi = c >> 8;\n          lo = c % 256;\n          byteArray.push(lo);\n          byteArray.push(hi);\n        }\n\n        return byteArray;\n      }\n\n      function base64ToBytes(str) {\n        return base64.toByteArray(base64clean(str));\n      }\n\n      function blitBuffer(src, dst, offset, length) {\n        for (var i = 0; i < length; i++) {\n          if (i + offset >= dst.length || i >= src.length) break;\n          dst[i + offset] = src[i];\n        }\n        return i;\n      }\n    }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {});\n  }, { 'base64-js': 38, 'ieee754': 39, 'isarray': 40 }],\n  38: [function (require, module, exports) {\n    (function (exports) {\n      'use strict';\n\n      var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n      var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\n\n      var PLUS = '+'.charCodeAt(0);\n      var SLASH = '/'.charCodeAt(0);\n      var NUMBER = '0'.charCodeAt(0);\n      var LOWER = 'a'.charCodeAt(0);\n      var UPPER = 'A'.charCodeAt(0);\n      var PLUS_URL_SAFE = '-'.charCodeAt(0);\n      var SLASH_URL_SAFE = '_'.charCodeAt(0);\n\n      function decode(elt) {\n        var code = elt.charCodeAt(0);\n        if (code === PLUS || code === PLUS_URL_SAFE) return 62;\n        if (code === SLASH || code === SLASH_URL_SAFE) return 63;\n        if (code < NUMBER) return -1;\n        if (code < NUMBER + 10) return code - NUMBER + 26 + 26;\n        if (code < UPPER + 26) return code - UPPER;\n        if (code < LOWER + 26) return code - LOWER + 26;\n      }\n\n      function b64ToByteArray(b64) {\n        var i, j, l, tmp, placeHolders, arr;\n\n        if (b64.length % 4 > 0) {\n          throw new Error('Invalid string. Length must be a multiple of 4');\n        }\n\n        var len = b64.length;\n        placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0;\n\n        arr = new Arr(b64.length * 3 / 4 - placeHolders);\n\n        l = placeHolders > 0 ? b64.length - 4 : b64.length;\n\n        var L = 0;\n\n        function push(v) {\n          arr[L++] = v;\n        }\n\n        for (i = 0, j = 0; i < l; i += 4, j += 3) {\n          tmp = decode(b64.charAt(i)) << 18 | decode(b64.charAt(i + 1)) << 12 | decode(b64.charAt(i + 2)) << 6 | decode(b64.charAt(i + 3));\n          push((tmp & 0xFF0000) >> 16);\n          push((tmp & 0xFF00) >> 8);\n          push(tmp & 0xFF);\n        }\n\n        if (placeHolders === 2) {\n          tmp = decode(b64.charAt(i)) << 2 | decode(b64.charAt(i + 1)) >> 4;\n          push(tmp & 0xFF);\n        } else if (placeHolders === 1) {\n          tmp = decode(b64.charAt(i)) << 10 | decode(b64.charAt(i + 1)) << 4 | decode(b64.charAt(i + 2)) >> 2;\n          push(tmp >> 8 & 0xFF);\n          push(tmp & 0xFF);\n        }\n\n        return arr;\n      }\n\n      function uint8ToBase64(uint8) {\n        var i;\n        var extraBytes = uint8.length % 3;\n        var output = '';\n        var temp, length;\n\n        function encode(num) {\n          return lookup.charAt(num);\n        }\n\n        function tripletToBase64(num) {\n          return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F);\n        }\n\n        for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n          temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2];\n          output += tripletToBase64(temp);\n        }\n\n        switch (extraBytes) {\n          case 1:\n            temp = uint8[uint8.length - 1];\n            output += encode(temp >> 2);\n            output += encode(temp << 4 & 0x3F);\n            output += '==';\n            break;\n          case 2:\n            temp = (uint8[uint8.length - 2] << 8) + uint8[uint8.length - 1];\n            output += encode(temp >> 10);\n            output += encode(temp >> 4 & 0x3F);\n            output += encode(temp << 2 & 0x3F);\n            output += '=';\n            break;\n          default:\n            break;\n        }\n\n        return output;\n      }\n\n      exports.toByteArray = b64ToByteArray;\n      exports.fromByteArray = uint8ToBase64;\n    })(typeof exports === 'undefined' ? this.base64js = {} : exports);\n  }, {}],\n  39: [function (require, module, exports) {\n    exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n      var e, m;\n      var eLen = nBytes * 8 - mLen - 1;\n      var eMax = (1 << eLen) - 1;\n      var eBias = eMax >> 1;\n      var nBits = -7;\n      var i = isLE ? nBytes - 1 : 0;\n      var d = isLE ? -1 : 1;\n      var s = buffer[offset + i];\n\n      i += d;\n\n      e = s & (1 << -nBits) - 1;\n      s >>= -nBits;\n      nBits += eLen;\n      for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n      m = e & (1 << -nBits) - 1;\n      e >>= -nBits;\n      nBits += mLen;\n      for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n      if (e === 0) {\n        e = 1 - eBias;\n      } else if (e === eMax) {\n        return m ? NaN : (s ? -1 : 1) * Infinity;\n      } else {\n        m = m + Math.pow(2, mLen);\n        e = e - eBias;\n      }\n      return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n    };\n\n    exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n      var e, m, c;\n      var eLen = nBytes * 8 - mLen - 1;\n      var eMax = (1 << eLen) - 1;\n      var eBias = eMax >> 1;\n      var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n      var i = isLE ? 0 : nBytes - 1;\n      var d = isLE ? 1 : -1;\n      var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n\n      value = Math.abs(value);\n\n      if (isNaN(value) || value === Infinity) {\n        m = isNaN(value) ? 1 : 0;\n        e = eMax;\n      } else {\n        e = Math.floor(Math.log(value) / Math.LN2);\n        if (value * (c = Math.pow(2, -e)) < 1) {\n          e--;\n          c *= 2;\n        }\n        if (e + eBias >= 1) {\n          value += rt / c;\n        } else {\n          value += rt * Math.pow(2, 1 - eBias);\n        }\n        if (value * c >= 2) {\n          e++;\n          c /= 2;\n        }\n\n        if (e + eBias >= eMax) {\n          m = 0;\n          e = eMax;\n        } else if (e + eBias >= 1) {\n          m = (value * c - 1) * Math.pow(2, mLen);\n          e = e + eBias;\n        } else {\n          m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n          e = 0;\n        }\n      }\n\n      for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n      e = e << mLen | m;\n      eLen += mLen;\n      for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n      buffer[offset + i - d] |= s * 128;\n    };\n  }, {}],\n  40: [function (require, module, exports) {\n    var toString = {}.toString;\n\n    module.exports = Array.isArray || function (arr) {\n      return toString.call(arr) == '[object Array]';\n    };\n  }, {}] }, {}, [36]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PANOLENS);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(58), __webpack_require__(322)(module), __webpack_require__(23)))\n\n/***/ })\n\n},[62]);\n\n\n// WEBPACK FOOTER //\n// assets/js/app.3aee517276a28eace82b.js","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:70%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:30%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .hljs{background:transparent}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-213df8bf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/components/demo-block.vue\n// module id = 124\n// module chunks = 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.demos,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.demos-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.demos-header .title{font-weight:700;font-size:18px;display:inline-block}.demos-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.demos-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.demos-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.demos-menu .demos-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.demos-menu .demos-menu-item>a{display:block;width:100%;height:100%}.demos-menu .demos-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.demos-menu .demos-menu-item:hover>a{color:#39f}.demos-pages{height:100%;overflow:hidden}.demo-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.demo-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;animation:loading-rotate .75s 0s linear infinite}.demo-loading:after,.demo-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.demo-loading:after{height:100%;width:0}@keyframes loading-rotate{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(.6)}to{transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-223dbf78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/App.vue\n// module id = 125\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-cube-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29108898\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-cube-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-cube-pano.vue\n// module id = 308\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a5bfa54\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-pano.vue\n// module id = 309\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-video-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-32faa3e6\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-video-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-video-pano.vue\n// module id = 310\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"             \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n        \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"          \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)) + \"\\n          \")]), _vm._v(\"\\n        \")])])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-213df8bf\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/components/demo-block.vue\n// module id = 311\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demos\"\n  }, [_c('div', {\n    staticClass: \"demos-content\"\n  }, [_c('ul', {\n    staticClass: \"demos-menu\"\n  }, [_c('li', {\n    staticClass: \"demos-menu-title\"\n  }, [_vm._v(\"demos\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-pano\"\n    }\n  }, [_vm._v(\"basic panorama\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-cube-pano\"\n    }\n  }, [_vm._v(\"Cube Faces\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-video-pano\"\n    }\n  }, [_vm._v(\"Video Pano\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demos-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-223dbf78\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/App.vue\n// module id = 312\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"cube\",\n      \"source\": \"assets/faces/pano_%s.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-29108898\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-cube-pano.vue\n// module id = 313\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"source\": \"assets/equirectangular.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a5bfa54\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-pano.vue\n// module id = 314\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"video\",\n      \"source\": \"assets/ClashofClans.mp4\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-32faa3e6\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-video-pano.vue\n// module id = 315\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-7974fb6b\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Pano.vue\n// module id = 316\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-213df8bf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./demo-block.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"56304fc1\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-213df8bf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/components/demo-block.vue\n// module id = 318\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-223dbf78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./App.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"48e2ad6a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-223dbf78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/App.vue\n// module id = 319\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-213df8bf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./demo-block.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-block.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-213df8bf\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-block.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/components/demo-block.vue\n// module id = 36\n// module chunks = 1","var Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Pano.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7974fb6b\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Pano.vue\n// module id = 37\n// module chunks = 1","import Vue from 'vue'\nimport Router from 'vue-router'\n\nimport { pages } from '../pages'\n\nVue.use(Router)\n\nconst routes = pages.map(page => {\n  const name = page.name\n  return {\n    path: '/' + name.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase(),\n    name,\n    component: page\n  }\n})\n\nconsole.log(routes)\n\nroutes.push({\n  path: '*',\n  redirect: '/demo-pano'\n})\n\nexport default new Router({ routes })\n\n\n\n// WEBPACK FOOTER //\n// ./demos/router/index.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-223dbf78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-223dbf78\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/App.vue\n// module id = 61\n// module chunks = 1","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\nnew Vue({ // eslint-disable-line no-new\n  el: '#app',\n  router,\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./demos/index.js","import DemoPano from './demo-pano'\nimport DemoCubePano from './demo-cube-pano'\nimport DemoVideoPano from './demo-video-pano'\n\nconst pages = [\n  DemoPano,\n  DemoCubePano,\n  DemoVideoPano\n]\n\nexport { pages }\n\n\n\n// WEBPACK FOOTER //\n// ./demos/pages/index.js","<template>\n  <div class=\"demos\">\n    <div class=\"demos-content\">\n      <ul class=\"demos-menu\">\n        <li class=\"demos-menu-title\">demos</li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-pano\">basic panorama</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-cube-pano\">Cube Faces</router-link>\n        </li>\n        <li class=\"demos-menu-item\">\n          <router-link to=\"demo-video-pano\">Video Pano</router-link>\n        </li>\n      </ul>\n\n      <div class=\"demos-pages\">\n        <router-view></router-view>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'App'\n}\n\n</script>\n\n<style>\n* {\n    margin: 0;\n    border: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nul,\nol,\nli {\n    list-style: none;\n}\n\na {\n    color: #657180;\n    text-decoration: none;\n}\n\nhtml,\nbody,\n.demos {\n    width: 100%;\n    height: 100%;\n    color: #657180;\n}\n\nbody {\n    background: #eee;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", SimSun, sans-serif;\n    background: #fff;\n}\n\n.demos-header {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    background: #f3f6fb;\n    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\n    border-bottom: solid 1px #dfe2e7;\n    padding: 15px 15px 15px 30px;\n    line-height: 20px;\n}\n\n.demos-header .title {\n    font-weight: bold;\n    font-size: 18px;\n    display: inline-block;\n}\n\n.demos-header .github {\n    color: #39f;\n    display: inline-block;\n    font-size: 12px;\n    float: right;\n}\n\n.demos-content {\n    width: 100%;\n    height: 100%;\n    padding-top: 52px;\n    overflow: hidden;\n}\n\n.demos-menu {\n    float: left;\n    width: 230px;\n    height: 100%;\n    border-right: solid 1px #dfe2e7;\n    padding: 10px 30px;\n}\n\n.demos-menu .demos-menu-item {\n    display: block;\n    width: 100%;\n    height: 30px;\n    line-height: 30px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.demos-menu .demos-menu-item>a {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.demos-menu .demos-menu-title {\n    display: block;\n    width: 100%;\n    padding: 6px 0;\n    margin-top: 10px;\n    font-size: 14px;\n    font-weight: bold;\n}\n\n.demos-menu .demos-menu-item:hover>a {\n    color: #39f;\n}\n\n.demos-pages {\n    height: 100%;\n    overflow: hidden;\n}\n\n.demo-loading {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n}\n\n.demo-loading::before {\n    content: '';\n    border-radius: 100%;\n    margin: 2px;\n    border: 3px solid #20a0ff;\n    border-bottom-color: transparent;\n    height: 36px;\n    width: 36px;\n    display: inline-block;\n    animation: loading-rotate .75s 0s linear infinite;\n    vertical-align: middle;\n}\n\n.demo-loading::after {\n    content: '';\n    display: inline-block;\n    height: 100%;\n    width: 0;\n    vertical-align: middle;\n}\n\n@keyframes loading-rotate {\n    0% {\n        transform: rotate(0) scale(1);\n    }\n    50% {\n        transform: rotate(180deg) scale(.6);\n    }\n    100% {\n        transform: rotate(360deg) scale(1);\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?0027f4e4","<template>\n  <div class=\"demo-block\">\n    <div class=\"demo-block-preview\">\n      <slot name=\"preview\"></slot>\n    </div>\n    <div class=\"demo-block-code\">\n      <div class=\"demo-block-code-box\">\n        <h3>Vue Component & Webpack</h3>\n        <div class=\"demo-block-code-box-content\">\n          <pre>\n               <code\n                ref=\"vueCode\"\n                class=\"html\">{{ vueCode | code }}</code>\n          </pre>\n        </div>\n      </div>\n      <div class=\"demo-block-code-box\">\n        <h3>HTML & JS</h3>\n        <div class=\"demo-block-code-box-content\">\n          <pre>\n            <code\n              ref=\"htmlCode\"\n              class=\"html\">{{ htmlCode | code }}\n            </code>\n          </pre>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport 'highlight.js/styles/github.css'\nimport hljs from 'highlight.js'\n\n/* eslint-disable no-useless-escape */\nconst codeHandler = (code) => {\n  const scripts = `\n  <script src=\"vue.js\"><\\/script> \n  <script src=\"vue-vr.min.js\"><\\/script>`\n  return code.replace(/#scripts#/ig, scripts)\n}\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'App',\n  props: {\n    vueCode: {\n      type: String,\n      default: ''\n    },\n    htmlCode: {\n      type: String,\n      default: '// TODO'\n    }\n  },\n  mounted () {\n    hljs.highlightBlock(this.$refs.vueCode)\n    hljs.highlightBlock(this.$refs.htmlCode)\n  },\n  data () {\n    return {}\n  },\n  filters: {\n    code (val) {\n      return codeHandler(val)\n    }\n  },\n  components: {\n\n  }\n}\n</script>\n<style>\n    .demo-block {\n        width: 100%;\n        height: 100%;\n        background-color: #fff;\n        border-radius: 3px;\n    }\n\n    .demo-block .demo-block-preview {\n        width: 70%;\n        height: 100%;\n        float: left;\n        position: relative;\n    }\n\n    .demo-block .demo-block-code {\n        width: 30%;\n        height: 100%;\n        background: #f9fafc;\n        border-left: solid 1px #dfe2e7;\n        font-size: 13px;\n        float: left;\n    }\n\n    .demo-block .demo-block-code pre code {\n        font: normal 10pt Consolas, Monaco, monospace;\n    }\n\n    .demo-block .demo-block-code .demo-block-code-box {\n        width: 100%;\n        height: 50%;\n        position: relative;\n        overflow: hidden;\n    }\n\n    .demo-block .demo-block-code-box::after {\n        content: '';\n        display: block;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        width: 90%;\n        height: 1px;\n        background: -webkit-linear-gradient(left, #dfe2e7 80%, rgba(223,226,231,0) 100%);\n    }\n\n    .demo-block .demo-block-code-box h3 {\n        width: 100%;\n        padding: 10px 20px;\n        font-size: 16px;\n        font-weight: bold;\n        position: absolute;\n    }\n\n    .demo-block .demo-block-code-box-content {\n        position: absolute;\n        top: 40px;\n        bottom: 10px;\n        left: 20px;\n        right: 20px;\n        overflow: auto;\n    }\n\n    .demo-block .hljs {\n        background: transparent;\n    }\n\n    .demo-block .demo-block-code code {\n        position: absolute;\n        top: 0;\n        left: 0;\n    }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// demo-block.vue?050a101a","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Pano\n        @on-load=\"onLoad\"\n        type='cube'\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\n\nimport DemoBlock from '../components/demo-block'\nimport Pano from '../../src/Pano.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        type='cube'\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\n</template>\n<script>\n    import { Pano } from 'vuejs-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n <\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='cube'\n            source=\"assets/faces/pano_%s.jpg\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoCubePano',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true\n    }\n  },\n  methods: {\n    onLoad () {\n      this.loading = false\n    }\n  },\n  components: {\n    Pano,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-cube-pano.vue?fdd2d788","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Pano\n        @on-load=\"onLoad\"\n        source=\"assets/equirectangular.jpg\"></Pano>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block'\nimport Pano from '../../src/Pano.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        src=\"assets/equirectangular.jpg\">\n    </Pano>\n</template>\n\n<script>\n    import { Pano } from 'vue-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='cube'\n            source=\"assets/equirectangular.jpg\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoPano',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true\n    }\n  },\n  methods: {\n    onLoad () {\n      this.loading = false\n    }\n  },\n  components: {\n    Pano,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-pano.vue?396641d1","<template>\n  <demo-block\n    :vue-code=\"code\"\n    :html-code=\"htmlCode\">\n    <template slot=\"preview\">\n      <Pano\n        @on-load=\"onLoad\"\n        type='video'\n        source=\"assets/ClashofClans.mp4\"></Pano>\n      <div\n        class=\"demo-loading\"\n        v-show=\"loading\"></div>\n    </template>\n  </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block'\nimport Pano from '../../src/Pano.vue'\n\n/* eslint-disable no-useless-escape */\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        type='video'\n        source=\"assets/ClashofClans.mp4\">\n    </Pano>\n</template>\n\n<script>\n    import { Pano } from 'vue-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n<\\/script>`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='video'\n            source=\"assets/ClashofClans.mp4\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>`\n/* eslint-enable no-useless-escape */\n\nexport default {\n  name: 'DemoVideoPano',\n  data () {\n    return {\n      code,\n      htmlCode,\n      loading: true\n    }\n  },\n  methods: {\n    onLoad () {\n      this.loading = false\n    }\n  },\n  components: {\n    Pano,\n    DemoBlock\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-video-pano.vue?17bba2d2","<template>\n  <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">\n  </div>\n</template>\n\n<script>\nimport PanoLens from './lib/panolens'\n\nexport default {\n  name: 'Pano',\n  props: {\n    source: {\n      type: String,\n      default: ''\n    },\n    type: {\n      type: String,\n      default: 'image'\n    },\n    width: {\n      type: Number,\n      default: 100\n    },\n    height: {\n      type: Number,\n      default: 100\n    }\n  },\n  data () {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      viewer: null,\n      panorama: null\n    }\n  },\n  created () {\n    window.addEventListener('resize', this.onResize, false)\n  },\n  mounted () {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      }\n    }\n\n    this.viewer = new PanoLens.Viewer({\n      container: this.$el,\n      cameraFov: 100\n    })\n\n    this.loadPano()\n  },\n  watch: {\n    source () {\n      if (!this.viewer) return\n      if (!this.panorama) return\n      this.loadPano()\n    }\n  },\n  methods: {\n    onResize () {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight\n          }\n        })\n      }\n    },\n    loadPano () {\n      console.log('this.source = ' + this.source)\n      if (!this.source) return\n\n      switch (this.type) {\n        case 'cube':\n          var l = this.source.replace('%s', 'l')\n          var f = this.source.replace('%s', 'f')\n          var r = this.source.replace('%s', 'r')\n          var b = this.source.replace('%s', 'b')\n          var u = this.source.replace('%s', 'u')\n          var d = this.source.replace('%s', 'd')\n          this.panorama = new PanoLens.CubePanorama([r, l, u, d, f, b])\n          break\n        case 'video':\n          this.panorama = new PanoLens.VideoPanorama(this.source, { autoplay: true })\n          console.log('this is video')\n          break\n        default:\n          this.panorama = new PanoLens.ImagePanorama(this.source)\n          break\n      }\n\n      this.viewer.add(this.panorama)\n\n      const that = this\n      this.panorama.addEventListener('load', () => {\n        that.$emit('on-load')\n      })\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Pano.vue?0bdf4952","import * as THREE from 'three'\n\n/**\n * Panolens.js\n * @author pchen66\n * @namespace PANOLENS\n */\n\nvar PANOLENS = { REVISION: '9' }\n/*! npm.im/iphone-inline-video 2.2.2 */\nvar enableInlineVideo = (function () {\n  'use strict'/*! npm.im/intervalometer */\n  function e (e, i, n, r) { function t (n) { d = i(t, r), e(n - (a || n)), a = n } var d, a; return {start: function () { d || t(0) }, stop: function () { n(d), d = null, a = 0 }} } function i (i) { return e(i, requestAnimationFrame, cancelAnimationFrame) } function n (e, i, n) { function r (r) { n && !n(e, i) || r.stopImmediatePropagation() } return e.addEventListener(i, r), r } function r (e, i, n, r) { function t () { return n[i] } function d (e) { n[i] = e }r && d(e[i]), Object.defineProperty(e, i, {get: t, set: d}) } function t (e, i, n) { n.addEventListener(i, function () { return e.dispatchEvent(new Event(i)) }) } function d (e, i) { Promise.resolve().then(function () { e.dispatchEvent(new Event(i)) }) } function a (e) { var i = new Audio(); return t(e, 'play', i), t(e, 'playing', i), t(e, 'pause', i), i.crossOrigin = e.crossOrigin, i.src = e.src || e.currentSrc || 'data:', i } function u (e, i, n) { (m || 0) + 200 < Date.now() && (e[h] = !0, m = Date.now()), n || (e.currentTime = i), k[++T % 3] = 100 * i | 0 } function o (e) { return e.driver.currentTime >= e.video.duration } function s (e) { var i = this; i.video.readyState >= i.video.HAVE_FUTURE_DATA ? (i.hasAudio || (i.driver.currentTime = i.video.currentTime + e * i.video.playbackRate / 1e3, i.video.loop && o(i) && (i.driver.currentTime = 0)), u(i.video, i.driver.currentTime)) : i.video.networkState === i.video.NETWORK_IDLE && i.video.buffered.length === 0 && i.video.load(), i.video.ended && (delete i.video[h], i.video.pause(!0)) } function c () { var e = this, i = e[g]; if (e.webkitDisplayingFullscreen) return void e[E](); i.driver.src !== 'data:' && i.driver.src !== e.src && (u(e, 0, !0), i.driver.src = e.src), e.paused && (i.paused = !1, e.buffered.length === 0 && e.load(), i.driver.play(), i.updater.start(), i.hasAudio || (d(e, 'play'), i.video.readyState >= i.video.HAVE_ENOUGH_DATA && d(e, 'playing'))) } function v (e) { var i = this, n = i[g]; n.driver.pause(), n.updater.stop(), i.webkitDisplayingFullscreen && i[w](), n.paused && !e || (n.paused = !0, n.hasAudio || d(i, 'pause'), i.ended && !i.webkitDisplayingFullscreen && (i[h] = !0, d(i, 'ended'))) } function p (e, n) { var r = {}; e[g] = r, r.paused = !0, r.hasAudio = n, r.video = e, r.updater = i(s.bind(r)), n ? r.driver = a(e) : (e.addEventListener('canplay', function () { e.paused || d(e, 'playing') }), r.driver = {src: e.src || e.currentSrc || 'data:', muted: !0, paused: !0, pause: function () { r.driver.paused = !0 }, play: function () { r.driver.paused = !1, o(r) && u(e, 0) }, get ended () { return o(r) }}), e.addEventListener('emptied', function () { var i = !r.driver.src || r.driver.src === 'data:'; r.driver.src && r.driver.src !== e.src && (u(e, 0, !0), r.driver.src = e.src, i || !n && e.autoplay ? r.driver.play() : r.updater.stop()) }, !1), e.addEventListener('webkitbeginfullscreen', function () { e.paused ? n && r.driver.buffered.length === 0 && r.driver.load() : (e.pause(), e[E]()) }), n && (e.addEventListener('webkitendfullscreen', function () { r.driver.currentTime = e.currentTime }), e.addEventListener('seeking', function () { k.indexOf(100 * e.currentTime | 0) < 0 && (r.driver.currentTime = e.currentTime) })) } function l (e) { var i = e[h]; return delete e[h], !e.webkitDisplayingFullscreen && !i } function f (e) { var i = e[g]; e[E] = e.play, e[w] = e.pause, e.play = c, e.pause = v, r(e, 'paused', i.driver), r(e, 'muted', i.driver, !0), r(e, 'playbackRate', i.driver, !0), r(e, 'ended', i.driver), r(e, 'loop', i.driver, !0), n(e, 'seeking', function (e) { return !e.webkitDisplayingFullscreen }), n(e, 'seeked', function (e) { return !e.webkitDisplayingFullscreen }), n(e, 'timeupdate', l), n(e, 'ended', l) } function y (e, i) { if (void 0 === i && (i = {}), !e[g]) { if (!i.everywhere) { if (!b) return; if (!(i.iPad || i.ipad ? /iPhone|iPod|iPad/ : /iPhone|iPod/).test(navigator.userAgent)) return }e.pause(); var n = e.autoplay; e.autoplay = !1, p(e, !e.muted), f(e), e.classList.add('IIV'), e.muted && n && (e.play(), e.addEventListener('playing', function i () { e.autoplay = !0, e.removeEventListener('playing', i) })), /iPhone|iPod|iPad/.test(navigator.platform) || console.warn('iphone-inline-video is not guaranteed to work in emulated environments') } } var m, b = typeof document === 'object' && 'object-fit' in document.head.style && !matchMedia('(-webkit-video-playable-inline)').matches, g = 'bfred-it:iphone-inline-video', h = 'bfred-it:iphone-inline-video:event', E = 'bfred-it:iphone-inline-video:nativeplay', w = 'bfred-it:iphone-inline-video:nativepause', k = [], T = 0; return y\n}())\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\nvar TWEEN = TWEEN || (function () {\n  var _tweens = []\n\n  return {\n\n    getAll: function () {\n      return _tweens\n    },\n\n    removeAll: function () {\n      _tweens = []\n    },\n\n    add: function (tween) {\n      _tweens.push(tween)\n    },\n\n    remove: function (tween) {\n      var i = _tweens.indexOf(tween)\n\n      if (i !== -1) {\n        _tweens.splice(i, 1)\n      }\n    },\n\n    update: function (time, preserve) {\n      if (_tweens.length === 0) {\n        return false\n      }\n\n      var i = 0\n\n      time = time !== undefined ? time : TWEEN.now()\n\n      while (i < _tweens.length) {\n        if (_tweens[i].update(time) || preserve) {\n          i++\n        } else {\n          _tweens.splice(i, 1)\n        }\n      }\n\n      return true\n    }\n  }\n})()\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {\n  TWEEN.now = function () {\n    var time = process.hrtime()\n\n    // Convert [seconds, nanoseconds] to milliseconds.\n    return time[0] * 1000 + time[1] / 1000000\n  }\n}\n// In a browser, use window.performance.now if it is available.\nelse if (typeof (window) !== 'undefined' &&\n         window.performance !== undefined &&\n\t\t window.performance.now !== undefined) {\n  // This must be bound, because directly assigning this function\n  // leads to an invocation exception in Chrome.\n  TWEEN.now = window.performance.now.bind(window.performance)\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n  TWEEN.now = Date.now\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n  TWEEN.now = function () {\n    return new Date().getTime()\n  }\n}\n\nTWEEN.Tween = function (object) {\n  var _object = object\n  var _valuesStart = {}\n  var _valuesEnd = {}\n  var _valuesStartRepeat = {}\n  var _duration = 1000\n  var _repeat = 0\n  var _repeatDelayTime\n  var _yoyo = false\n  var _isPlaying = false\n  var _reversed = false\n  var _delayTime = 0\n  var _startTime = null\n  var _easingFunction = TWEEN.Easing.Linear.None\n  var _interpolationFunction = TWEEN.Interpolation.Linear\n  var _chainedTweens = []\n  var _onStartCallback = null\n  var _onStartCallbackFired = false\n  var _onUpdateCallback = null\n  var _onCompleteCallback = null\n  var _onStopCallback = null\n\n  this.to = function (properties, duration) {\n    _valuesEnd = properties\n\n    if (duration !== undefined) {\n      _duration = duration\n    }\n\n    return this\n  }\n\n  this.start = function (time) {\n    TWEEN.add(this)\n\n    _isPlaying = true\n\n    _onStartCallbackFired = false\n\n    _startTime = time !== undefined ? time : TWEEN.now()\n    _startTime += _delayTime\n\n    for (var property in _valuesEnd) {\n      // Check if an Array was provided as property value\n      if (_valuesEnd[property] instanceof Array) {\n        if (_valuesEnd[property].length === 0) {\n          continue\n        }\n\n        // Create a local copy of the Array with the start value at the front\n        _valuesEnd[property] = [_object[property]].concat(_valuesEnd[property])\n      }\n\n      // If `to()` specifies a property that doesn't exist in the source object,\n      // we should not set that property in the object\n      if (_object[property] === undefined) {\n        continue\n      }\n\n      // Save the starting value.\n      _valuesStart[property] = _object[property]\n\n      if ((_valuesStart[property] instanceof Array) === false) {\n        _valuesStart[property] *= 1.0 // Ensures we're using numbers, not strings\n      }\n\n      _valuesStartRepeat[property] = _valuesStart[property] || 0\n    }\n\n    return this\n  }\n\n  this.stop = function () {\n    if (!_isPlaying) {\n      return this\n    }\n\n    TWEEN.remove(this)\n    _isPlaying = false\n\n    if (_onStopCallback !== null) {\n      _onStopCallback.call(_object, _object)\n    }\n\n    this.stopChainedTweens()\n    return this\n  }\n\n  this.end = function () {\n    this.update(_startTime + _duration)\n    return this\n  }\n\n  this.stopChainedTweens = function () {\n    for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n      _chainedTweens[i].stop()\n    }\n  }\n\n  this.delay = function (amount) {\n    _delayTime = amount\n    return this\n  }\n\n  this.repeat = function (times) {\n    _repeat = times\n    return this\n  }\n\n  this.repeatDelay = function (amount) {\n    _repeatDelayTime = amount\n    return this\n  }\n\n  this.yoyo = function (yoyo) {\n    _yoyo = yoyo\n    return this\n  }\n\n  this.easing = function (easing) {\n    _easingFunction = easing\n    return this\n  }\n\n  this.interpolation = function (interpolation) {\n    _interpolationFunction = interpolation\n    return this\n  }\n\n  this.chain = function () {\n    _chainedTweens = arguments\n    return this\n  }\n\n  this.onStart = function (callback) {\n    _onStartCallback = callback\n    return this\n  }\n\n  this.onUpdate = function (callback) {\n    _onUpdateCallback = callback\n    return this\n  }\n\n  this.onComplete = function (callback) {\n    _onCompleteCallback = callback\n    return this\n  }\n\n  this.onStop = function (callback) {\n    _onStopCallback = callback\n    return this\n  }\n\n  this.update = function (time) {\n    var property\n    var elapsed\n    var value\n\n    if (time < _startTime) {\n      return true\n    }\n\n    if (_onStartCallbackFired === false) {\n      if (_onStartCallback !== null) {\n        _onStartCallback.call(_object, _object)\n      }\n\n      _onStartCallbackFired = true\n    }\n\n    elapsed = (time - _startTime) / _duration\n    elapsed = elapsed > 1 ? 1 : elapsed\n\n    value = _easingFunction(elapsed)\n\n    for (property in _valuesEnd) {\n      // Don't update properties that do not exist in the source object\n      if (_valuesStart[property] === undefined) {\n        continue\n      }\n\n      var start = _valuesStart[property] || 0\n      var end = _valuesEnd[property]\n\n      if (end instanceof Array) {\n        _object[property] = _interpolationFunction(end, value)\n      } else {\n        // Parses relative end values with start as base (e.g.: +10, -3)\n        if (typeof (end) === 'string') {\n          if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            end = start + parseFloat(end)\n          } else {\n            end = parseFloat(end)\n          }\n        }\n\n        // Protect against non numeric properties.\n        if (typeof (end) === 'number') {\n          _object[property] = start + (end - start) * value\n        }\n      }\n    }\n\n    if (_onUpdateCallback !== null) {\n      _onUpdateCallback.call(_object, value)\n    }\n\n    if (elapsed === 1) {\n      if (_repeat > 0) {\n        if (isFinite(_repeat)) {\n          _repeat--\n        }\n\n        // Reassign starting values, restart by making startTime = now\n        for (property in _valuesStartRepeat) {\n          if (typeof (_valuesEnd[property]) === 'string') {\n            _valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property])\n          }\n\n          if (_yoyo) {\n            var tmp = _valuesStartRepeat[property]\n\n            _valuesStartRepeat[property] = _valuesEnd[property]\n            _valuesEnd[property] = tmp\n          }\n\n          _valuesStart[property] = _valuesStartRepeat[property]\n        }\n\n        if (_yoyo) {\n          _reversed = !_reversed\n        }\n\n        if (_repeatDelayTime !== undefined) {\n          _startTime = time + _repeatDelayTime\n        } else {\n          _startTime = time + _delayTime\n        }\n\n        return true\n      } else {\n        if (_onCompleteCallback !== null) {\n          _onCompleteCallback.call(_object, _object)\n        }\n\n        for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n          // Make the chained tweens start exactly at the time they should,\n          // even if the `update()` method was called way past the duration of the tween\n          _chainedTweens[i].start(_startTime + _duration)\n        }\n\n        return false\n      }\n    }\n\n    return true\n  }\n}\n\nTWEEN.Easing = {\n\n  Linear: {\n\n    None: function (k) {\n      return k\n    }\n\n  },\n\n  Quadratic: {\n\n    In: function (k) {\n      return k * k\n    },\n\n    Out: function (k) {\n      return k * (2 - k)\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k\n      }\n\n      return -0.5 * (--k * (k - 2) - 1)\n    }\n\n  },\n\n  Cubic: {\n\n    In: function (k) {\n      return k * k * k\n    },\n\n    Out: function (k) {\n      return --k * k * k + 1\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2)\n    }\n\n  },\n\n  Quartic: {\n\n    In: function (k) {\n      return k * k * k * k\n    },\n\n    Out: function (k) {\n      return 1 - (--k * k * k * k)\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2)\n    }\n\n  },\n\n  Quintic: {\n\n    In: function (k) {\n      return k * k * k * k * k\n    },\n\n    Out: function (k) {\n      return --k * k * k * k * k + 1\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2)\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In: function (k) {\n      return 1 - Math.cos(k * Math.PI / 2)\n    },\n\n    Out: function (k) {\n      return Math.sin(k * Math.PI / 2)\n    },\n\n    InOut: function (k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k))\n    }\n\n  },\n\n  Exponential: {\n\n    In: function (k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1)\n    },\n\n    Out: function (k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k)\n    },\n\n    InOut: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1)\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2)\n    }\n\n  },\n\n  Circular: {\n\n    In: function (k) {\n      return 1 - Math.sqrt(1 - k * k)\n    },\n\n    Out: function (k) {\n      return Math.sqrt(1 - (--k * k))\n    },\n\n    InOut: function (k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1)\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1)\n    }\n\n  },\n\n  Elastic: {\n\n    In: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n    },\n\n    Out: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1\n    },\n\n    InOut: function (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      k *= 2\n\n      if (k < 1) {\n        return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n      }\n\n      return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1\n    }\n\n  },\n\n  Back: {\n\n    In: function (k) {\n      var s = 1.70158\n\n      return k * k * ((s + 1) * k - s)\n    },\n\n    Out: function (k) {\n      var s = 1.70158\n\n      return --k * k * ((s + 1) * k + s) + 1\n    },\n\n    InOut: function (k) {\n      var s = 1.70158 * 1.525\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s))\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2)\n    }\n\n  },\n\n  Bounce: {\n\n    In: function (k) {\n      return 1 - TWEEN.Easing.Bounce.Out(1 - k)\n    },\n\n    Out: function (k) {\n      if (k < (1 / 2.75)) {\n        return 7.5625 * k * k\n      } else if (k < (2 / 2.75)) {\n        return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75\n      } else if (k < (2.5 / 2.75)) {\n        return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375\n      } else {\n        return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375\n      }\n    },\n\n    InOut: function (k) {\n      if (k < 0.5) {\n        return TWEEN.Easing.Bounce.In(k * 2) * 0.5\n      }\n\n      return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5\n    }\n\n  }\n\n}\n\nTWEEN.Interpolation = {\n\n  Linear: function (v, k) {\n    var m = v.length - 1\n    var f = m * k\n    var i = Math.floor(f)\n    var fn = TWEEN.Interpolation.Utils.Linear\n\n    if (k < 0) {\n      return fn(v[0], v[1], f)\n    }\n\n    if (k > 1) {\n      return fn(v[m], v[m - 1], m - f)\n    }\n\n    return fn(v[i], v[i + 1 > m ? m : i + 1], f - i)\n  },\n\n  Bezier: function (v, k) {\n    var b = 0\n    var n = v.length - 1\n    var pw = Math.pow\n    var bn = TWEEN.Interpolation.Utils.Bernstein\n\n    for (var i = 0; i <= n; i++) {\n      b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i)\n    }\n\n    return b\n  },\n\n  CatmullRom: function (v, k) {\n    var m = v.length - 1\n    var f = m * k\n    var i = Math.floor(f)\n    var fn = TWEEN.Interpolation.Utils.CatmullRom\n\n    if (v[0] === v[m]) {\n      if (k < 0) {\n        i = Math.floor(f = m * (1 + k))\n      }\n\n      return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i)\n    } else {\n      if (k < 0) {\n        return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0])\n      }\n\n      if (k > 1) {\n        return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m])\n      }\n\n      return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i)\n    }\n  },\n\n  Utils: {\n\n    Linear: function (p0, p1, t) {\n      return (p1 - p0) * t + p0\n    },\n\n    Bernstein: function (n, i) {\n      var fc = TWEEN.Interpolation.Utils.Factorial\n\n      return fc(n) / fc(i) / fc(n - i)\n    },\n\n    Factorial: (function () {\n      var a = [1]\n\n      return function (n) {\n        var s = 1\n\n        if (a[n]) {\n          return a[n]\n        }\n\n        for (var i = n; i > 1; i--) {\n          s *= i\n        }\n\n        a[n] = s\n        return s\n      }\n    })(),\n\n    CatmullRom: function (p0, p1, p2, p3, t) {\n      var v0 = (p2 - p0) * 0.5\n      var v1 = (p3 - p1) * 0.5\n      var t2 = t * t\n      var t3 = t * t2\n\n      return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1\n    }\n\n  }\n\n};\n\n// UMD (Universal Module Definition)\n(function (root) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define([], function () {\n      return TWEEN\n    })\n  } else if (typeof module !== 'undefined' && typeof exports === 'object') {\n    // Node.js\n    module.exports = TWEEN\n  } else if (root !== undefined) {\n    // Global variable\n    root.TWEEN = TWEEN\n  }\n})(this)\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n/* global THREE, console */\n\n// This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n// the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n// supported.\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\nTHREE.OrbitControls = function (object, domElement) {\n  this.object = object\n  this.domElement = (domElement !== undefined) ? domElement : document\n  this.frameId\n\n  // API\n\n  // Set to false to disable this control\n  this.enabled = true\n\n  // \"target\" sets the location of focus, where the control orbits around\n  // and where it pans with respect to.\n  this.target = new THREE.Vector3()\n\n  // center is old, deprecated; use \"target\" instead\n  this.center = this.target\n\n  // This option actually enables dollying in and out; left as \"zoom\" for\n  // backwards compatibility\n  this.noZoom = false\n  this.zoomSpeed = 1.0\n\n  // Limits to how far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = 0\n  this.maxDistance = Infinity\n\n  // Limits to how far you can zoom in and out ( OrthographicCamera only )\n  this.minZoom = 0\n  this.maxZoom = Infinity\n\n  // Set to true to disable this control\n  this.noRotate = false\n  this.rotateSpeed = -0.15\n\n  // Set to true to disable this control\n  this.noPan = true\n  this.keyPanSpeed = 7.0\t// pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  this.autoRotate = false\n  this.autoRotateSpeed = 2.0 // 30 seconds per round when fps is 60\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = 0 // radians\n  this.maxPolarAngle = Math.PI // radians\n\n  // Momentum\n  \tthis.momentumDampingFactor = 0.90\n  \tthis.momentumScalingFactor = -0.005\n  \tthis.momentumKeydownFactor = 20\n\n  \t// Fov\n  \tthis.minFov = 30\n  \tthis.maxFov = 120\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = -Infinity // radians\n  this.maxAzimuthAngle = Infinity // radians\n\n  // Set to true to disable use of the keys\n  this.noKeys = false\n\n  // The four arrow keys\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 }\n\n  // Mouse buttons\n  this.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT }\n\n  /// /////////\n  // internals\n\n  var scope = this\n\n  var EPS = 10e-8\n  var MEPS = 10e-5\n\n  var rotateStart = new THREE.Vector2()\n  var rotateEnd = new THREE.Vector2()\n  var rotateDelta = new THREE.Vector2()\n\n  var panStart = new THREE.Vector2()\n  var panEnd = new THREE.Vector2()\n  var panDelta = new THREE.Vector2()\n  var panOffset = new THREE.Vector3()\n\n  var offset = new THREE.Vector3()\n\n  var dollyStart = new THREE.Vector2()\n  var dollyEnd = new THREE.Vector2()\n  var dollyDelta = new THREE.Vector2()\n\n  var theta\n  var phi\n  var phiDelta = 0\n  var thetaDelta = 0\n  var scale = 1\n  var pan = new THREE.Vector3()\n\n  var lastPosition = new THREE.Vector3()\n  var lastQuaternion = new THREE.Quaternion()\n\n  var momentumLeft = 0, momentumUp = 0\n  var eventCurrent, eventPrevious\n  var momentumOn = false\n\n  var keyUp, keyBottom, keyLeft, keyRight\n\n  var STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 }\n\n  var state = STATE.NONE\n\n  // for reset\n\n  this.target0 = this.target.clone()\n  this.position0 = this.object.position.clone()\n  this.zoom0 = this.object.zoom\n\n  // so camera.up is the orbit axis\n\n  var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0))\n  var quatInverse = quat.clone().inverse()\n\n  // events\n\n  var changeEvent = { type: 'change' }\n  var startEvent = { type: 'start' }\n  var endEvent = { type: 'end' }\n\n  this.setLastQuaternion = function (quaternion) {\n    lastQuaternion.copy(quaternion)\n    scope.object.quaternion.copy(quaternion)\n  }\n\n  this.getLastPosition = function () {\n    return lastPosition\n  }\n\n  this.rotateLeft = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle()\n    }\n\n    thetaDelta -= angle\n  }\n\n  this.rotateUp = function (angle) {\n    if (angle === undefined) {\n      angle = getAutoRotationAngle()\n    }\n\n    phiDelta -= angle\n  }\n\n  // pass in distance in world space to move left\n  this.panLeft = function (distance) {\n    var te = this.object.matrix.elements\n\n    // get X column of matrix\n    panOffset.set(te[ 0 ], te[ 1 ], te[ 2 ])\n    panOffset.multiplyScalar(-distance)\n\n    pan.add(panOffset)\n  }\n\n  // pass in distance in world space to move up\n  this.panUp = function (distance) {\n    var te = this.object.matrix.elements\n\n    // get Y column of matrix\n    panOffset.set(te[ 4 ], te[ 5 ], te[ 6 ])\n    panOffset.multiplyScalar(distance)\n\n    pan.add(panOffset)\n  }\n\n  // pass in x,y of change desired in pixel space,\n  // right and down are positive\n  this.pan = function (deltaX, deltaY) {\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      // perspective\n      var position = scope.object.position\n      var offset = position.clone().sub(scope.target)\n      var targetDistance = offset.length()\n\n      // half of the fov is center to top of screen\n      targetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0)\n\n      // we actually don't use screenWidth, since perspective camera is fixed to screen height\n      scope.panLeft(2 * deltaX * targetDistance / element.clientHeight)\n      scope.panUp(2 * deltaY * targetDistance / element.clientHeight)\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      // orthographic\n      scope.panLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth)\n      scope.panUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight)\n    } else {\n      // camera neither orthographic or perspective\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.')\n    }\n  }\n\n  this.momentum = function () {\n    if (!momentumOn) return\n\n    if (Math.abs(momentumLeft) < MEPS && Math.abs(momentumUp) < MEPS) {\n      momentumOn = false\n      return\n    }\n\n    momentumUp *= this.momentumDampingFactor\n    momentumLeft *= this.momentumDampingFactor\n\n    thetaDelta -= this.momentumScalingFactor * momentumLeft\n    phiDelta -= this.momentumScalingFactor * momentumUp\n  }\n\n  this.dollyIn = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale()\n    }\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      scale /= dollyScale\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale))\n      scope.object.updateProjectionMatrix()\n      scope.dispatchEvent(changeEvent)\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n    }\n  }\n\n  this.dollyOut = function (dollyScale) {\n    if (dollyScale === undefined) {\n      dollyScale = getZoomScale()\n    }\n\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      scale *= dollyScale\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale))\n      scope.object.updateProjectionMatrix()\n      scope.dispatchEvent(changeEvent)\n    } else {\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n    }\n  }\n\n  this.update = function (ignoreUpdate) {\n    var position = this.object.position\n\n    offset.copy(position).sub(this.target)\n\n    // rotate offset to \"y-axis-is-up\" space\n    offset.applyQuaternion(quat)\n\n    // angle from z-axis around y-axis\n\n    theta = Math.atan2(offset.x, offset.z)\n\n    // angle from y-axis\n\n    phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y)\n\n    if (this.autoRotate && state === STATE.NONE) {\n      this.rotateLeft(getAutoRotationAngle())\n    }\n\n    this.momentum()\n\n    theta += thetaDelta\n    phi += phiDelta\n\n    // restrict theta to be between desired limits\n    theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta))\n\n    // restrict phi to be between desired limits\n    phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi))\n\n    // restrict phi to be betwee EPS and PI-EPS\n    phi = Math.max(EPS, Math.min(Math.PI - EPS, phi))\n\n    var radius = offset.length() * scale\n\n    // restrict radius to be between desired limits\n    radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius))\n\n    // move target to panned location\n    this.target.add(pan)\n\n    offset.x = radius * Math.sin(phi) * Math.sin(theta)\n    offset.y = radius * Math.cos(phi)\n    offset.z = radius * Math.sin(phi) * Math.cos(theta)\n\n    // rotate offset back to \"camera-up-vector-is-up\" space\n    offset.applyQuaternion(quatInverse)\n\n    position.copy(this.target).add(offset)\n\n    this.object.lookAt(this.target)\n\n    thetaDelta = 0\n    phiDelta = 0\n    scale = 1\n    pan.set(0, 0, 0)\n\n    // update condition is:\n    // min(camera displacement, camera rotation in radians)^2 > EPS\n    // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n    if (lastPosition.distanceToSquared(this.object.position) > EPS ||\n\t\t    8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n      ignoreUpdate !== true && this.dispatchEvent(changeEvent)\n\n      lastPosition.copy(this.object.position)\n      lastQuaternion.copy(this.object.quaternion)\n    }\n  }\n\n  this.reset = function () {\n    state = STATE.NONE\n\n    this.target.copy(this.target0)\n    this.object.position.copy(this.position0)\n    this.object.zoom = this.zoom0\n\n    this.object.updateProjectionMatrix()\n    this.dispatchEvent(changeEvent)\n\n    this.update()\n  }\n\n  this.getPolarAngle = function () {\n    return phi\n  }\n\n  this.getAzimuthalAngle = function () {\n    return theta\n  }\n\n  function getAutoRotationAngle () {\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed\n  }\n\n  function getZoomScale () {\n    return Math.pow(0.95, scope.zoomSpeed)\n  }\n\n  function onMouseDown (event) {\n    momentumOn = false\n\n   \t\tmomentumLeft = momentumUp = 0\n\n    if (scope.enabled === false) return\n    event.preventDefault()\n\n    if (event.button === scope.mouseButtons.ORBIT) {\n      if (scope.noRotate === true) return\n\n      state = STATE.ROTATE\n\n      rotateStart.set(event.clientX, event.clientY)\n    } else if (event.button === scope.mouseButtons.ZOOM) {\n      if (scope.noZoom === true) return\n\n      state = STATE.DOLLY\n\n      dollyStart.set(event.clientX, event.clientY)\n    } else if (event.button === scope.mouseButtons.PAN) {\n      if (scope.noPan === true) return\n\n      state = STATE.PAN\n\n      panStart.set(event.clientX, event.clientY)\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener('mousemove', onMouseMove, false)\n      document.addEventListener('mouseup', onMouseUp, false)\n      scope.dispatchEvent(startEvent)\n    }\n\n    scope.update()\n  }\n\n  function onMouseMove (event) {\n    if (scope.enabled === false) return\n\n    event.preventDefault()\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n    if (state === STATE.ROTATE) {\n      if (scope.noRotate === true) return\n\n      rotateEnd.set(event.clientX, event.clientY)\n      rotateDelta.subVectors(rotateEnd, rotateStart)\n\n      // rotating across whole screen goes 360 degrees around\n      scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed)\n\n      // rotating up and down along whole screen attempts to go 360, but limited to 180\n      scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed)\n\n      rotateStart.copy(rotateEnd)\n\n      if (eventPrevious) {\n        momentumLeft = event.clientX - eventPrevious.clientX\n        momentumUp = event.clientY - eventPrevious.clientY\n      }\n\n      eventPrevious = event\n    } else if (state === STATE.DOLLY) {\n      if (scope.noZoom === true) return\n\n      dollyEnd.set(event.clientX, event.clientY)\n      dollyDelta.subVectors(dollyEnd, dollyStart)\n\n      if (dollyDelta.y > 0) {\n        scope.dollyIn()\n      } else if (dollyDelta.y < 0) {\n        scope.dollyOut()\n      }\n\n      dollyStart.copy(dollyEnd)\n    } else if (state === STATE.PAN) {\n      if (scope.noPan === true) return\n\n      panEnd.set(event.clientX, event.clientY)\n      panDelta.subVectors(panEnd, panStart)\n\n      scope.pan(panDelta.x, panDelta.y)\n\n      panStart.copy(panEnd)\n    }\n\n    if (state !== STATE.NONE) scope.update()\n  }\n\n  function onMouseUp (/* event */) {\n    momentumOn = true\n\n    eventPrevious = undefined\n\n    if (scope.enabled === false) return\n\n    document.removeEventListener('mousemove', onMouseMove, false)\n    document.removeEventListener('mouseup', onMouseUp, false)\n    scope.dispatchEvent(endEvent)\n    state = STATE.NONE\n  }\n\n  function onMouseWheel (event) {\n    if (scope.enabled === false || scope.noZoom === true || state !== STATE.NONE) return\n\n    event.preventDefault()\n    event.stopPropagation()\n\n    var delta = 0\n\n    if (event.wheelDelta !== undefined) { // WebKit / Opera / Explorer 9\n      delta = event.wheelDelta\n    } else if (event.detail !== undefined) { // Firefox\n      delta = -event.detail\n    }\n\n    if (delta > 0) {\n      // scope.dollyOut();\n      scope.object.fov = (scope.object.fov < scope.maxFov)\n        ? scope.object.fov + 1\n        : scope.maxFov\n      scope.object.updateProjectionMatrix()\n    } else if (delta < 0) {\n      // scope.dollyIn();\n      scope.object.fov = (scope.object.fov > scope.minFov)\n        ? scope.object.fov - 1\n        : scope.minFov\n      scope.object.updateProjectionMatrix()\n    }\n\n    scope.update()\n    scope.dispatchEvent(changeEvent)\n    scope.dispatchEvent(startEvent)\n    scope.dispatchEvent(endEvent)\n  }\n\n  function onKeyUp (event) {\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = false\n        break\n\n      case scope.keys.BOTTOM:\n        keyBottom = false\n        break\n\n      case scope.keys.LEFT:\n        keyLeft = false\n        break\n\n      case scope.keys.RIGHT:\n        keyRight = false\n        break\n    }\n  }\n\n  function onKeyDown (event) {\n    if (scope.enabled === false || scope.noKeys === true || scope.noRotate === true) return\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        keyUp = true\n        break\n\n      case scope.keys.BOTTOM:\n        keyBottom = true\n        break\n\n      case scope.keys.LEFT:\n        keyLeft = true\n        break\n\n      case scope.keys.RIGHT:\n        keyRight = true\n        break\n    }\n\n    if (keyUp || keyBottom || keyLeft || keyRight) {\n      momentumOn = true\n\n      if (keyUp) momentumUp = -scope.rotateSpeed * scope.momentumKeydownFactor\n      if (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor\n      if (keyLeft) momentumLeft = -scope.rotateSpeed * scope.momentumKeydownFactor\n      if (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor\n    }\n  }\n\n  function touchstart (event) {\n    momentumOn = false\n\n    momentumLeft = momentumUp = 0\n\n    if (scope.enabled === false) return\n\n    switch (event.touches.length) {\n      case 1:\t// one-fingered touch: rotate\n\n        if (scope.noRotate === true) return\n\n        state = STATE.TOUCH_ROTATE\n\n        rotateStart.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        break\n\n      case 2:\t// two-fingered touch: dolly\n\n        if (scope.noZoom === true) return\n\n        state = STATE.TOUCH_DOLLY\n\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n\n        break\n\n      case 3: // three-fingered touch: pan\n\n        if (scope.noPan === true) return\n\n        state = STATE.TOUCH_PAN\n\n        panStart.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        break\n\n      default:\n\n        state = STATE.NONE\n    }\n\n    if (state !== STATE.NONE) scope.dispatchEvent(startEvent)\n  }\n\n  function touchmove (event) {\n    if (scope.enabled === false) return\n\n    event.preventDefault()\n    event.stopPropagation()\n\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n    switch (event.touches.length) {\n      case 1: // one-fingered touch: rotate\n\n        if (scope.noRotate === true) return\n        if (state !== STATE.TOUCH_ROTATE) return\n\n        rotateEnd.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        rotateDelta.subVectors(rotateEnd, rotateStart)\n\n        // rotating across whole screen goes 360 degrees around\n        scope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed)\n        // rotating up and down along whole screen attempts to go 360, but limited to 180\n        scope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed)\n\n        rotateStart.copy(rotateEnd)\n\n        if (eventPrevious) {\n          momentumLeft = event.touches[ 0 ].pageX - eventPrevious.pageX\n          momentumUp = event.touches[ 0 ].pageY - eventPrevious.pageY\n        }\n\n        eventPrevious = {\n          pageX: event.touches[ 0 ].pageX,\n          pageY: event.touches[ 0 ].pageY\n        }\n\n        scope.update()\n        break\n\n      case 2: // two-fingered touch: dolly\n\n        if (scope.noZoom === true) return\n        if (state !== STATE.TOUCH_DOLLY) return\n\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n\n        if (event.scale < 1) {\n          scope.object.fov = (scope.object.fov < scope.maxFov)\n            ? scope.object.fov + 1\n            : scope.maxFov\n          scope.object.updateProjectionMatrix()\n        } else if (event.scale > 1) {\n          scope.object.fov = (scope.object.fov > scope.minFov)\n            ? scope.object.fov - 1\n            : scope.minFov\n          scope.object.updateProjectionMatrix()\n        }\n\n        scope.update()\n        scope.dispatchEvent(changeEvent)\n        break\n\n      case 3: // three-fingered touch: pan\n\n        if (scope.noPan === true) return\n        if (state !== STATE.TOUCH_PAN) return\n\n        panEnd.set(event.touches[ 0 ].pageX, event.touches[ 0 ].pageY)\n        panDelta.subVectors(panEnd, panStart)\n\n        scope.pan(panDelta.x, panDelta.y)\n\n        panStart.copy(panEnd)\n\n        scope.update()\n        break\n\n      default:\n\n        state = STATE.NONE\n    }\n  }\n\n  function touchend (/* event */) {\n    momentumOn = true\n\n    eventPrevious = undefined\n\n    if (scope.enabled === false) return\n\n    scope.dispatchEvent(endEvent)\n    state = STATE.NONE\n  }\n\n  // this.domElement.addEventListener( 'contextmenu', function ( event ) { event.preventDefault(); }, false );\n  this.domElement.addEventListener('mousedown', onMouseDown, false)\n  this.domElement.addEventListener('mousewheel', onMouseWheel, false)\n  this.domElement.addEventListener('DOMMouseScroll', onMouseWheel, false) // firefox\n\n  this.domElement.addEventListener('touchstart', touchstart, false)\n  this.domElement.addEventListener('touchend', touchend, false)\n  this.domElement.addEventListener('touchmove', touchmove, false)\n\n  window.addEventListener('keyup', onKeyUp, false)\n  window.addEventListener('keydown', onKeyDown, false)\n\n  // force an update at start\n  this.update()\n}\n\nTHREE.OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype)\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls/**\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n *\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\n\nTHREE.DeviceOrientationControls = function (camera, domElement) {\n  var scope = this\n  var changeEvent = { type: 'change' }\n\n  var rotY = 0\n  var rotX = 0\n  var tempX = 0\n  var tempY = 0\n\n  this.camera = camera\n  this.camera.rotation.reorder('YXZ')\n  this.domElement = (domElement !== undefined) ? domElement : document\n\n  this.enabled = true\n\n  this.deviceOrientation = {}\n  this.screenOrientation = 0\n\n  this.alpha = 0\n  this.alphaOffsetAngle = 0\n\n  var onDeviceOrientationChangeEvent = function (event) {\n    scope.deviceOrientation = event\n  }\n\n  var onScreenOrientationChangeEvent = function () {\n    scope.screenOrientation = window.orientation || 0\n  }\n\n  var onTouchStartEvent = function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    tempX = event.touches[ 0 ].pageX\n    tempY = event.touches[ 0 ].pageY\n  }\n\n  var onTouchMoveEvent = function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    rotY += THREE.Math.degToRad((event.touches[ 0 ].pageX - tempX) / 4)\n    rotX += THREE.Math.degToRad((tempY - event.touches[ 0 ].pageY) / 4)\n\n    scope.updateAlphaOffsetAngle(rotY)\n\n    tempX = event.touches[ 0 ].pageX\n    tempY = event.touches[ 0 ].pageY\n  }\n\n  // The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n  var setCameraQuaternion = function (quaternion, alpha, beta, gamma, orient) {\n    var zee = new THREE.Vector3(0, 0, 1)\n\n    var euler = new THREE.Euler()\n\n    var q0 = new THREE.Quaternion()\n\n    var q1 = new THREE.Quaternion(-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5)) // - PI/2 around the x-axis\n\n    var vectorFingerY\n    var fingerQY = new THREE.Quaternion()\n    var fingerQX = new THREE.Quaternion()\n\n    if (scope.screenOrientation == 0) {\n      vectorFingerY = new THREE.Vector3(1, 0, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX)\n    } else if (scope.screenOrientation == 180) {\n      vectorFingerY = new THREE.Vector3(1, 0, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX)\n    } else if (scope.screenOrientation == 90) {\n      vectorFingerY = new THREE.Vector3(0, 1, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, rotX)\n    } else if (scope.screenOrientation == -90) {\n      vectorFingerY = new THREE.Vector3(0, 1, 0)\n      fingerQY.setFromAxisAngle(vectorFingerY, -rotX)\n    }\n\n    q1.multiply(fingerQY)\n    q1.multiply(fingerQX)\n\n    euler.set(beta, alpha, -gamma, 'YXZ') // 'ZXY' for the device, but 'YXZ' for us\n\n    quaternion.setFromEuler(euler) // orient the device\n\n    quaternion.multiply(q1) // camera looks out the back of the device, not the top\n\n    quaternion.multiply(q0.setFromAxisAngle(zee, -orient)) // adjust for screen orientation\n  }\n\n  this.connect = function () {\n    onScreenOrientationChangeEvent() // run once on load\n\n    window.addEventListener('orientationchange', onScreenOrientationChangeEvent, false)\n    window.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false)\n    window.addEventListener('deviceorientation', this.update.bind(this), false)\n\n    scope.domElement.addEventListener('touchstart', onTouchStartEvent, false)\n    scope.domElement.addEventListener('touchmove', onTouchMoveEvent, false)\n\n    scope.enabled = true\n  }\n\n  this.disconnect = function () {\n    window.removeEventListener('orientationchange', onScreenOrientationChangeEvent, false)\n    window.removeEventListener('deviceorientation', onDeviceOrientationChangeEvent, false)\n    window.removeEventListener('deviceorientation', this.update.bind(this), false)\n\n    scope.domElement.removeEventListener('touchstart', onTouchStartEvent, false)\n    scope.domElement.removeEventListener('touchmove', onTouchMoveEvent, false)\n\n    scope.enabled = false\n  }\n\n  this.update = function (ignoreUpdate) {\n    if (scope.enabled === false) return\n\n    var alpha = scope.deviceOrientation.alpha ? THREE.Math.degToRad(scope.deviceOrientation.alpha) + this.alphaOffsetAngle : 0 // Z\n    var beta = scope.deviceOrientation.beta ? THREE.Math.degToRad(scope.deviceOrientation.beta) : 0 // X'\n    var gamma = scope.deviceOrientation.gamma ? THREE.Math.degToRad(scope.deviceOrientation.gamma) : 0 // Y''\n    var orient = scope.screenOrientation ? THREE.Math.degToRad(scope.screenOrientation) : 0 // O\n\n    setCameraQuaternion(scope.camera.quaternion, alpha, beta, gamma, orient)\n    this.alpha = alpha\n\n    ignoreUpdate !== true && this.dispatchEvent(changeEvent)\n  }\n\n  this.updateAlphaOffsetAngle = function (angle) {\n    this.alphaOffsetAngle = angle\n    this.update()\n  }\n\n  this.dispose = function () {\n    this.disconnect()\n  }\n\n  this.connect()\n}\n\nTHREE.DeviceOrientationControls.prototype = Object.create(THREE.EventDispatcher.prototype)\nTHREE.DeviceOrientationControls.prototype.constructor = THREE.DeviceOrientationControls /** The Bend modifier lets you bend the current selection up to 90 degrees about a single axis,\n * producing a uniform bend in an object's geometry.\n * You can control the angle and direction of the bend on any of three axes.\n * The geometry has to have rather large number of polygons!\n * options:\n * \t direction - deformation direction (in local coordinates!).\n * \t axis - deformation axis (in local coordinates!). Vector of direction and axis are perpendicular.\n * \t angle - deformation angle.\n * @author Vildanov Almaz / alvild@gmail.com\n * The algorithm of a bend is based on the chain line cosh: y = 1/b * cosh(b*x) - 1/b. It can be used only in three.js.\n */\n\nTHREE.BendModifier = function () {\n\n}\n\nTHREE.BendModifier.prototype = {\n\n  constructor: THREE.BendModifier,\n\n  set: function (direction, axis, angle) {\n    this.direction = new THREE.Vector3(); this.direction.copy(direction)\n    this.axis = new THREE.Vector3(); this.axis.copy(axis)\n    this.angle = angle\n    return this\n  },\n\n  _sign: function (a) {\n    return a < 0 ? -1 : a > 0 ? 1 : 0\n  },\n\n  _cosh: function (x) {\n    return (Math.exp(x) + Math.exp(-x)) / 2\n  },\n\n  _sinhInverse: function (x) {\n    return Math.log(Math.abs(x) + Math.sqrt(x * x + 1))\n  },\n\n  modify: function (geometry) {\n    var thirdAxis = new THREE.Vector3(); thirdAxis.crossVectors(this.direction, this.axis)\n\n    // P - matrices of the change-of-coordinates\n    var P = new THREE.Matrix4()\n    P.set(thirdAxis.x, thirdAxis.y, thirdAxis.z, 0,\n      this.direction.x, this.direction.y, this.direction.z, 0,\n      this.axis.x, this.axis.y, this.axis.z, 0,\n      0, 0, 0, 1).transpose()\n\n    var InverseP = new THREE.Matrix4().getInverse(P)\n    var newVertices = []; var oldVertices = []; var anglesBetweenOldandNewVertices = []\n\n    var meshGeometryBoundingBoxMaxx = 0; var meshGeometryBoundingBoxMinx = 0\n    var meshGeometryBoundingBoxMaxy = 0; var meshGeometryBoundingBoxMiny = 0\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      newVertices[i] = new THREE.Vector3(); newVertices[i].copy(geometry.vertices[i]).applyMatrix4(InverseP)\n      if (newVertices[i].x > meshGeometryBoundingBoxMaxx) { meshGeometryBoundingBoxMaxx = newVertices[i].x }\n      if (newVertices[i].x < meshGeometryBoundingBoxMinx) { meshGeometryBoundingBoxMinx = newVertices[i].x }\n      if (newVertices[i].y > meshGeometryBoundingBoxMaxy) { meshGeometryBoundingBoxMaxy = newVertices[i].y }\n      if (newVertices[i].y < meshGeometryBoundingBoxMiny) { meshGeometryBoundingBoxMiny = newVertices[i].y }\n    }\n\n    var meshWidthold = meshGeometryBoundingBoxMaxx - meshGeometryBoundingBoxMinx\n    var meshDepth = meshGeometryBoundingBoxMaxy - meshGeometryBoundingBoxMiny\n    var ParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidthold\n    var oldMiddlex = (meshGeometryBoundingBoxMaxx + meshGeometryBoundingBoxMinx) / 2\n    var oldMiddley = (meshGeometryBoundingBoxMaxy + meshGeometryBoundingBoxMiny) / 2\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      oldVertices[i] = new THREE.Vector3(); oldVertices[i].copy(newVertices[i])\n      newVertices[i].x = this._sign(newVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((newVertices[i].x - oldMiddlex) * ParamB)\n    }\n\n    var meshWidth = 2 / ParamB * this._sinhInverse(meshWidthold / 2 * ParamB)\n\n    var NewParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidth\n\n    var rightEdgePos = new THREE.Vector3(meshWidth / 2, -meshDepth / 2, 0)\n    rightEdgePos.y = 1 / NewParamB * this._cosh(NewParamB * rightEdgePos.x) - 1 / NewParamB - meshDepth / 2\n\n    var bendCenter = new THREE.Vector3(0, rightEdgePos.y + rightEdgePos.x / Math.tan(this.angle), 0)\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var x0 = this._sign(oldVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((oldVertices[i].x - oldMiddlex) * ParamB)\n      var y0 = 1 / NewParamB * this._cosh(NewParamB * x0) - 1 / NewParamB\n\n      var k = new THREE.Vector3(bendCenter.x - x0, bendCenter.y - (y0 - meshDepth / 2), bendCenter.z).normalize()\n\n      var Q = new THREE.Vector3()\n      Q.addVectors(new THREE.Vector3(x0, y0 - meshDepth / 2, oldVertices[i].z), k.multiplyScalar(oldVertices[i].y + meshDepth / 2))\n      newVertices[i].x = Q.x; newVertices[i].y = Q.y\n    }\n\n    var middle = oldMiddlex * meshWidth / meshWidthold\n\n    for (var i = 0; i < geometry.vertices.length; i++) {\n      var O = new THREE.Vector3(oldMiddlex, oldMiddley, oldVertices[i].z)\n      var p = new THREE.Vector3(); p.subVectors(oldVertices[i], O)\n      var q = new THREE.Vector3(); q.subVectors(newVertices[i], O)\n\n      anglesBetweenOldandNewVertices[i] = Math.acos(1 / this._cosh(ParamB * newVertices[i].x)) * this._sign(newVertices[i].x)\n\n      newVertices[i].x = newVertices[i].x + middle\n      geometry.vertices[i].copy(newVertices[i].applyMatrix4(P))\n    }\n\n    geometry.computeFaceNormals()\n    geometry.verticesNeedUpdate = true\n    geometry.normalsNeedUpdate = true\n\n    // compute Vertex Normals\n    var fvNames = [ 'a', 'b', 'c', 'd' ]\n\n    for (var f = 0, fl = geometry.faces.length; f < fl; f++) {\n      var face = geometry.faces[ f ]\n      if (face.vertexNormals === undefined) {\n        continue\n      }\n      for (var v = 0, vl = face.vertexNormals.length; v < vl; v++) {\n        var angle = anglesBetweenOldandNewVertices[ face[ fvNames[ v ] ] ]\n        var x = this.axis.x,\n          y = this.axis.y,\n          z = this.axis.z\n\n        var rotateMatrix = new THREE.Matrix3()\n        rotateMatrix.set(Math.cos(angle) + (1 - Math.cos(angle)) * x * x, (1 - Math.cos(angle)) * x * y - Math.sin(angle) * z, (1 - Math.cos(angle)) * x * z + Math.sin(angle) * y,\n          (1 - Math.cos(angle)) * y * x + Math.sin(angle) * z, Math.cos(angle) + (1 - Math.cos(angle)) * y * y, (1 - Math.cos(angle)) * y * z - Math.sin(angle) * x,\n          (1 - Math.cos(angle)) * z * x - Math.sin(angle) * y, (1 - Math.cos(angle)) * z * y + Math.sin(angle) * x, Math.cos(angle) + (1 - Math.cos(angle)) * z * z)\n\n        face.vertexNormals[ v ].applyMatrix3(rotateMatrix)\n      }\n    }\n    // end compute Vertex Normals\n\n    return this\n  }\n}/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CardboardEffect = function (renderer) {\n  var _camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1)\n\n  var _scene = new THREE.Scene()\n\n  var _stereo = new THREE.StereoCamera()\n  _stereo.aspect = 0.5\n\n  var _params = { minFilter: THREE.LinearFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat }\n\n  var _renderTarget = new THREE.WebGLRenderTarget(512, 512, _params)\n  _renderTarget.scissorTest = true\n  _renderTarget.texture.generateMipmaps = false\n\n  // Distortion Mesh ported from:\n  // https://github.com/borismus/webvr-boilerplate/blob/master/src/distortion/barrel-distortion-fragment.js\n\n  var distortion = new THREE.Vector2(0.441, 0.156)\n\n  var geometry = new THREE.PlaneBufferGeometry(1, 1, 10, 20).removeAttribute('normal').toNonIndexed()\n\n  var positions = geometry.attributes.position.array\n  var uvs = geometry.attributes.uv.array\n\n  // duplicate\n  geometry.attributes.position.count *= 2\n  geometry.attributes.uv.count *= 2\n\n  var positions2 = new Float32Array(positions.length * 2)\n  positions2.set(positions)\n  positions2.set(positions, positions.length)\n\n  var uvs2 = new Float32Array(uvs.length * 2)\n  uvs2.set(uvs)\n  uvs2.set(uvs, uvs.length)\n\n  var vector = new THREE.Vector2()\n  var length = positions.length / 3\n\n  for (var i = 0, l = positions2.length / 3; i < l; i++) {\n    vector.x = positions2[ i * 3 + 0 ]\n    vector.y = positions2[ i * 3 + 1 ]\n\n    var dot = vector.dot(vector)\n    var scalar = 1.5 + (distortion.x + distortion.y * dot) * dot\n\n    var offset = i < length ? 0 : 1\n\n    positions2[ i * 3 + 0 ] = (vector.x / scalar) * 1.5 - 0.5 + offset\n    positions2[ i * 3 + 1 ] = (vector.y / scalar) * 3.0\n\n    uvs2[ i * 2 ] = (uvs2[ i * 2 ] + offset) * 0.5\n  }\n\n  geometry.attributes.position.array = positions2\n  geometry.attributes.uv.array = uvs2\n\n  //\n\n  // var material = new THREE.MeshBasicMaterial( { wireframe: true } );\n  var material = new THREE.MeshBasicMaterial({ map: _renderTarget.texture })\n  var mesh = new THREE.Mesh(geometry, material)\n  _scene.add(mesh)\n\n  //\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height)\n\n    var pixelRatio = renderer.getPixelRatio()\n\n    _renderTarget.setSize(width * pixelRatio, height * pixelRatio)\n  }\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld()\n\n    if (camera.parent === null) camera.updateMatrixWorld()\n\n    _stereo.update(camera)\n\n    var width = _renderTarget.width / 2\n    var height = _renderTarget.height\n\n    _renderTarget.scissor.set(0, 0, width, height)\n    _renderTarget.viewport.set(0, 0, width, height)\n    renderer.render(scene, _stereo.cameraL, _renderTarget)\n\n    _renderTarget.scissor.set(width, 0, width, height)\n    _renderTarget.viewport.set(width, 0, width, height)\n    renderer.render(scene, _stereo.cameraR, _renderTarget)\n\n    renderer.render(_scene, _camera)\n  }\n}/**\n * @author alteredq / http://alteredqualia.com/\n * @authod mrdoob / http://mrdoob.com/\n * @authod arodic / http://aleksandarrodic.com/\n * @authod fonserbc / http://fonserbc.github.io/\n*/\n\nTHREE.StereoEffect = function (renderer) {\n  var _stereo = new THREE.StereoCamera()\n  _stereo.aspect = 0.5\n\n  this.setEyeSeparation = function (eyeSep) {\n    _stereo.eyeSep = eyeSep\n  }\n\n  this.setSize = function (width, height) {\n    renderer.setSize(width, height)\n  }\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld()\n\n    if (camera.parent === null) camera.updateMatrixWorld()\n\n    _stereo.update(camera)\n\n    var size = renderer.getSize()\n\n    if (renderer.autoClear) renderer.clear()\n    renderer.setScissorTest(true)\n\n    renderer.setScissor(0, 0, size.width / 2, size.height)\n    renderer.setViewport(0, 0, size.width / 2, size.height)\n    renderer.render(scene, _stereo.cameraL)\n\n    renderer.setScissor(size.width / 2, 0, size.width / 2, size.height)\n    renderer.setViewport(size.width / 2, 0, size.width / 2, size.height)\n    renderer.render(scene, _stereo.cameraR)\n\n    renderer.setScissorTest(false)\n  }\n}\nvar GSVPANO = GSVPANO || {}\nGSVPANO.PanoLoader = function (parameters) {\n  'use strict'\n\n  var _parameters = parameters || {},\n    _location,\n    _zoom,\n    _panoId,\n    _panoClient = new google.maps.StreetViewService(),\n    _count = 0,\n    _total = 0,\n    _canvas = [],\n    _ctx = [],\n    _wc = 0,\n    _hc = 0,\n    result = null,\n    rotation = 0,\n    copyright = '',\n    onSizeChange = null,\n    onPanoramaLoad = null\n\n  var levelsW = [ 1, 2, 4, 7, 13, 26 ],\n    levelsH = [ 1, 1, 2, 4, 7, 13 ]\n\n  var widths = [ 416, 832, 1664, 3328, 6656, 13312 ],\n    heights = [ 416, 416, 832, 1664, 3328, 6656 ]\n\n  var gl = null\n  try {\n    var canvas = document.createElement('canvas')\n\t    gl = canvas.getContext('experimental-webgl')\n\t    if (gl == null) {\n\t        gl = canvas.getContext('webgl')\n\t    }\n  } catch (error) {}\n\n  var maxW = 1024,\n    maxH = 1024\n\n  if (gl) {\n    var maxTexSize = Math.max(gl.getParameter(gl.MAX_TEXTURE_SIZE), 6656)\n    // alert( 'MAX_TEXTURE_SIZE ' + maxTexSize );\n    maxW = maxH = maxTexSize\n  }\n\n  this.setProgress = function (loaded, total) {\n    if (this.onProgress) {\n      this.onProgress({loaded: loaded, total: total})\n    }\n  }\n\n  this.throwError = function (message) {\n    if (this.onError) {\n      this.onError(message)\n    } else {\n      console.error(message)\n    }\n  }\n\n  this.adaptTextureToZoom = function () {\n    var w = levelsW[ _zoom ] * 416,\n      h = levelsH[ _zoom ] * 416\n\n    w = widths[ _zoom ]\n    h = heights[ _zoom ]\n\n    _wc = Math.ceil(w / maxW)\n    _hc = Math.ceil(h / maxH)\n\n    _canvas = []; _ctx = []\n\n    var ptr = 0\n    for (var y = 0; y < _hc; y++) {\n      for (var x = 0; x < _wc; x++) {\n        var c = document.createElement('canvas')\n        if (x < (_wc - 1)) c.width = maxW; else c.width = w - (maxW * x)\n        if (y < (_hc - 1)) c.height = maxH; else c.height = h - (maxH * y)\n        _canvas.push(c)\n        _ctx.push(c.getContext('2d'))\n        ptr++\n      }\n    }\n  }\n\n  this.composeFromTile = function (x, y, texture) {\n    x *= 512\n    y *= 512\n    var px = Math.floor(x / maxW), py = Math.floor(y / maxH)\n\n    x -= px * maxW\n    y -= py * maxH\n\n    _ctx[ py * _wc + px ].drawImage(texture, 0, 0, texture.width, texture.height, x, y, 512, 512)\n    this.progress()\n  }\n\n  this.progress = function () {\n    _count++\n\n    var p = Math.round(_count * 100 / _total)\n    this.setProgress(_count, _total)\n\n    if (_count === _total) {\n      this.canvas = _canvas\n      this.panoId = _panoId\n      this.zoom = _zoom\n      if (this.onPanoramaLoad) {\n        this.onPanoramaLoad(_canvas[0])\n      }\n    }\n  }\n\n  this.loadFromId = function (id) {\n    _panoId = id\n    this.composePanorama()\n  }\n\n  this.composePanorama = function () {\n    this.setProgress(0, 1)\n\n    var w = levelsW[ _zoom ],\n      h = levelsH[ _zoom ],\n      self = this,\n      url,\n      x,\n      y\n\n    _count = 0\n    _total = w * h\n\n    var self = this\n    for (var y = 0; y < h; y++) {\n      for (var x = 0; x < w; x++) {\n        var url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + _zoom + '&x=' + x + '&y=' + y + '&panoid=' + _panoId + '&nbt&fover=2';\n        (function (x, y) {\n          if (_parameters.useWebGL) {\n            var texture = THREE.ImageUtils.loadTexture(url, null, function () {\n              self.composeFromTile(x, y, texture)\n            })\n          } else {\n            var img = new Image()\n            img.addEventListener('load', function () {\n              self.composeFromTile(x, y, this)\n            })\n            img.crossOrigin = ''\n            img.src = url\n          }\n        })(x, y)\n      }\n    }\n  }\n\n  this.load = function (panoid) {\n    this.loadPano(panoid)\n  }\n\n  this.loadPano = function (id) {\n    var self = this\n    _panoClient.getPanoramaById(id, function (result, status) {\n      if (status === google.maps.StreetViewStatus.OK) {\n        self.result = result\n        if (self.onPanoramaData) self.onPanoramaData(result)\n        // var h = google.maps.geometry.spherical.computeHeading(location, result.location.latLng);\n        // rotation = (result.tiles.centerHeading - h) * Math.PI / 180.0;\n        copyright = result.copyright\n        self.copyright = result.copyright\n        _panoId = result.location.pano\n        self.location = location\n        self.composePanorama()\n      } else {\n        if (self.onNoPanoramaData) self.onNoPanoramaData(status)\n        self.throwError('Could not retrieve panorama for the following reason: ' + status)\n      }\n    })\n  }\n\n  this.setZoom = function (z) {\n    _zoom = z\n    this.adaptTextureToZoom()\n  }\n\n  this.setZoom(_parameters.zoom || 1)\n}; (function () {\n  'use strict'\n\n  /**\n     * Data Image Source\n     * @type {String}\n     */\n  PANOLENS.DataImageSource = 'https://pchen66.github.io/Panolens/asset/icon/'\n\n  /**\n     * Data Image\n     * @memberOf PANOLENS\n     * @enum {string}\n     */\n  PANOLENS.DataImage = {\n    Info: PANOLENS.DataImageSource + 'information.png',\n    Arrow: PANOLENS.DataImageSource + 'arrow-up.png',\n    FullscreenEnter: PANOLENS.DataImageSource + 'fullscreen.png',\n    FullscreenLeave: PANOLENS.DataImageSource + 'fullscreen-exit.png',\n    VideoPlay: PANOLENS.DataImageSource + 'video-play.png',\n    VideoPause: PANOLENS.DataImageSource + 'pause.png',\n    WhiteTile: PANOLENS.DataImageSource + 'tiles.png',\n    ReticleIdle: PANOLENS.DataImageSource + 'reticle-idle.png',\n    Setting: PANOLENS.DataImageSource + 'setting.png',\n    ChevronRight: PANOLENS.DataImageSource + 'chevron-right.png',\n    Check: PANOLENS.DataImageSource + 'check.png',\n    ViewIndicator: PANOLENS.DataImageSource + 'view-indicator.svg',\n    ReticleDwell: PANOLENS.DataImageSource + 'reticle-animation.png'\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Control Index Enum\n\t * @memberOf PANOLENS\n\t * @enum {number}\n\t */\n\n  PANOLENS.Controls = {\n\n    ORBIT: 0,\n\n    DEVICEORIENTATION: 1\n\n  }\n\n  /**\n\t * Effect Mode Enum\n\t * @memberOf PANOLENS\n\t * @enum {number}\n\t */\n  PANOLENS.Modes = {\n\n    /** Unknown */\n    UNKNOWN: 0,\n\n    /** Normal */\n    NORMAL: 1,\n\n    /** Google Cardboard */\n    CARDBOARD: 2,\n\n    /** Stereoscopic **/\n    STEREO: 3\n\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Utility\n\t * @namespace PANOLENS.Utils\n\t * @memberOf PANOLENS\n\t * @type {object}\n\t */\n  PANOLENS.Utils = {}\n\n  PANOLENS.Utils.checkTouchSupported = function () {\n    return window ? 'ontouchstart' in window || window.navigator.msMaxTouchPoints : false\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Image loader with progress based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/ImageLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n  PANOLENS.Utils.ImageLoader = {}\n\n  /**\n\t * Load an image with XMLHttpRequest to provide progress checking\n\t * @param  {string}   url        - An image url\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {HTMLImageElement}    - DOM image element\n\t */\n\n  PANOLENS.Utils.ImageLoader.load = function (url, onLoad, onProgress, onError) {\n    var cached, request, arrayBufferView, blob, urlCreator, image, reference\n\n    // Reference key\n    for (var iconName in PANOLENS.DataImage) {\n      if (PANOLENS.DataImage.hasOwnProperty(iconName) &&\n\t\t\t\turl === PANOLENS.DataImage[ iconName ]) {\n        reference = iconName\n      }\n    }\n\n    // Cached\n    cached = THREE.Cache.get(reference || url)\n\n    if (cached !== undefined) {\n      if (onLoad) {\n        setTimeout(function () {\n          if (onProgress) {\n            onProgress({ loaded: 1, total: 1 })\n          }\n\n          onLoad(cached)\n        }, 0)\n      }\n\n      return cached\n    }\n\n    // Construct a new XMLHttpRequest\n    urlCreator = window.URL || window.webkitURL\n    image = document.createElementNS('http://www.w3.org/1999/xhtml', 'img')\n\n    // Add to cache\n    THREE.Cache.add(reference || url, image)\n\n    function onImageLoaded () {\n      urlCreator.revokeObjectURL(image.src)\n      onLoad && onLoad(image)\n    }\n\n    if (url.indexOf('data:') === 0) {\n      image.addEventListener('load', onImageLoaded, false)\n      image.src = url\n      return image\n    }\n\n    image.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : ''\n\n    request = new XMLHttpRequest()\n    request.open('GET', url, true)\n    request.responseType = 'arraybuffer'\n    request.onprogress = function (event) {\n\t\t    if (event.lengthComputable) {\n\t\t      onProgress && onProgress({ loaded: event.loaded, total: event.total })\n\t\t    }\n    }\n    request.onloadend = function (event) {\n\t\t    arrayBufferView = new Uint8Array(this.response)\n\t\t    blob = new Blob([ arrayBufferView ])\n\n\t\t    image.addEventListener('load', onImageLoaded, false)\n      image.src = urlCreator.createObjectURL(blob)\n    }\n\n    request.send(null)\n  }\n\n  // Enable cache\n  THREE.Cache.enabled = true\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Texture loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/TextureLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n  PANOLENS.Utils.TextureLoader = {}\n\n  /**\n\t * Load image texture\n\t * @param  {string}   url        - An image url\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {THREE.Texture}   \t - Image texture\n\t */\n  PANOLENS.Utils.TextureLoader.load = function (url, onLoad, onProgress, onError) {\n    var texture = new THREE.Texture()\n\n    PANOLENS.Utils.ImageLoader.load(url, function (image) {\n      texture.image = image\n      texture.needsUpdate = true\n\n      onLoad && onLoad(texture)\n    }, onProgress, onError)\n\n    return texture\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Cube Texture Loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/CubeTextureLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n  PANOLENS.Utils.CubeTextureLoader = {}\n\n  /**\n\t * Load 6 images as a cube texture\n\t * @param  {array}   urls        - Array with 6 image urls\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {THREE.CubeTexture}   - Cube texture\n\t */\n  PANOLENS.Utils.CubeTextureLoader.load = function (urls, onLoad, onProgress, onError) {\n    var texture, loaded, progress, all, loadings\n\n    texture = new THREE.CubeTexture([])\n\n    loaded = 0\n    progress = {}\n    all = {}\n\n    urls.map(function (url, index) {\n      PANOLENS.Utils.ImageLoader.load(url, function (image) {\n        texture.images[ index ] = image\n\n        loaded++\n\n        if (loaded === 6) {\n          texture.needsUpdate = true\n\n          onLoad && onLoad(texture)\n        }\n      }, function (event) {\n        progress[ index ] = { loaded: event.loaded, total: event.total }\n\n        all.loaded = 0\n        all.total = 0\n        loadings = 0\n\n        for (var i in progress) {\n          loadings++\n          all.loaded += progress[ i ].loaded\n          all.total += progress[ i ].total\n        }\n\n        if (loadings < 6) {\n          all.total = all.total / loadings * 6\n        }\n\n        onProgress && onProgress(all)\n      }, onError)\n    })\n\n    return texture\n  }\n})()/**\n * Stereographic projection shader\n * based on http://notlion.github.io/streetview-stereographic\n * @author pchen66\n */\n\nPANOLENS.StereographicShader = {\n\n  uniforms: {\n\n    'tDiffuse': { value: new THREE.Texture() },\n    'resolution': { value: 1.0 },\n    'transform': { value: new THREE.Matrix4() },\n    'zoom': { value: 1.0 }\n\n  },\n\n  vertexShader: [\n\n    'varying vec2 vUv;',\n\n    'void main() {',\n\n    'vUv = uv;',\n    'gl_Position = vec4( position, 1.0 );',\n\n    '}'\n\n  ].join('\\n'),\n\n  fragmentShader: [\n\n    'uniform sampler2D tDiffuse;',\n    'uniform float resolution;',\n    'uniform mat4 transform;',\n    'uniform float zoom;',\n\n    'varying vec2 vUv;',\n\n    'const float PI = 3.141592653589793;',\n\n    'void main(){',\n\n    'vec2 position = -1.0 +  2.0 * vUv;',\n\n    'position *= vec2( zoom * resolution, zoom * 0.5 );',\n\n    'float x2y2 = position.x * position.x + position.y * position.y;',\n    'vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );',\n\n    'sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );',\n\n    'vec2 sampleUV = vec2(',\n    '(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,',\n    '(asin(sphere_pnt.z) / PI + 0.5)',\n    ');',\n\n    'gl_FragColor = texture2D( tDiffuse, sampleUV );',\n\n    '}'\n\n  ].join('\\n')\n\n}; (function () {\n  'use strict'\n\n  /**\n\t * Skeleton panorama derived from THREE.Mesh\n\t * @constructor\n\t * @param {THREE.Geometry} geometry - The geometry for this panorama\n\t * @param {THREE.Material} material - The material for this panorama\n\t */\n  PANOLENS.Panorama = function (geometry, material) {\n    THREE.Mesh.call(this)\n\n    this.type = 'panorama'\n\n    this.ImageQualityLow = 1\n    this.ImageQualityFair = 2\n    this.ImageQualityMedium = 3\n    this.ImageQualityHigh = 4\n    this.ImageQualitySuperHigh = 5\n\n    this.animationDuration = 1000\n\n    this.defaultInfospotSize = 350\n\n    this.container = undefined\n\n    this.loaded = false\n\n    this.linkedSpots = []\n\n    this.isInfospotVisible = false\n\n    this.linkingImageURL = undefined\n    this.linkingImageScale = undefined\n\n    this.geometry = geometry\n\n    this.material = material\n    this.material.side = THREE.DoubleSide\n    this.material.visible = false\n\n    this.scale.x *= -1\n\n    this.infospotAnimation = new TWEEN.Tween(this).to({}, this.animationDuration / 2)\n\n    this.addEventListener('load', this.fadeIn.bind(this))\n    this.addEventListener('panolens-container', this.setContainer.bind(this))\n    this.addEventListener('click', this.onClick.bind(this))\n\n    this.setupTransitions()\n  }\n\n  PANOLENS.Panorama.prototype = Object.create(THREE.Mesh.prototype)\n\n  PANOLENS.Panorama.prototype.constructor = PANOLENS.Panorama\n\n  /**\n\t * Adding an object\n\t * To counter the scale.x = -1, it will automatically add an\n\t * empty object with inverted scale on x\n\t * @param {THREE.Object3D} object - The object to be added\n\t */\n  PANOLENS.Panorama.prototype.add = function (object) {\n    var scope, invertedObject\n\n    scope = this\n\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[ i ])\n      }\n\n      return this\n    }\n\n    // In case of infospots\n    if (object instanceof PANOLENS.Infospot) {\n      invertedObject = object\n\n      if (object.dispatchEvent) {\n        this.container && object.dispatchEvent({ type: 'panolens-container', container: this.container })\n\n        object.dispatchEvent({ type: 'panolens-infospot-focus',\n          method: function (vector, duration, easing) {\n            /**\n\t\t        \t * Infospot focus handler event\n\t\t        \t * @type {object}\n\t\t        \t * @event PANOLENS.Panorama#panolens-viewer-handler\n\t\t        \t * @property {string} method - Viewer function name\n\t\t        \t * @property {*} data - The argument to be passed into the method\n\t\t        \t */\n\t\t        \tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'tweenControlCenter', data: [ vector, duration, easing ] })\n          } })\n      }\n    } else {\n      // Counter scale.x = -1 effect\n      invertedObject = new THREE.Object3D()\n      invertedObject.scale.x = -1\n      invertedObject.scalePlaceHolder = true\n      invertedObject.add(object)\n    }\n\n    THREE.Object3D.prototype.add.call(this, invertedObject)\n  }\n\n  PANOLENS.Panorama.prototype.load = function () {\n    this.onLoad()\n  }\n\n  /**\n\t * Click event handler\n\t * @param  {object} event - Click event\n\t * @fires PANOLENS.Infospot#dismiss\n\t */\n  PANOLENS.Panorama.prototype.onClick = function (event) {\n    if (event.intersects && event.intersects.length === 0) {\n      this.traverse(function (object) {\n        /**\n\t\t\t\t * Dimiss event\n\t\t\t\t * @type {object}\n\t\t\t\t * @event PANOLENS.Infospot#dismiss\n\t\t\t\t */\n        object.dispatchEvent({ type: 'dismiss' })\n      })\n    }\n  }\n\n  /**\n\t * Set container of this panorama\n\t * @param {HTMLElement|object} data - Data with container information\n\t * @fires PANOLENS.Infospot#panolens-container\n\t */\n  PANOLENS.Panorama.prototype.setContainer = function (data) {\n    var container\n\n    if (data instanceof HTMLElement) {\n      container = data\n    } else if (data && data.container) {\n      container = data.container\n    }\n\n    if (container) {\n      this.children.forEach(function (child) {\n        if (child instanceof PANOLENS.Infospot && child.dispatchEvent) {\n          /**\n\t\t\t\t\t * Set container event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @event PANOLENS.Infospot#panolens-container\n\t\t\t\t\t * @property {HTMLElement} container - The container of this panorama\n\t\t\t\t\t */\n          child.dispatchEvent({ type: 'panolens-container', container: container })\n        }\n      })\n\n      this.container = container\n    }\n  }\n\n  /**\n\t * This will be called when panorama is loaded\n\t * @fires PANOLENS.Panorama#load\n\t */\n  PANOLENS.Panorama.prototype.onLoad = function () {\n    this.loaded = true\n\n    /**\n\t\t * Load panorama event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#load\n\t\t */\n    this.dispatchEvent({ type: 'load' })\n  }\n\n  /**\n\t * This will be called when panorama is in progress\n\t * @fires PANOLENS.Panorama#progress\n\t */\n  PANOLENS.Panorama.prototype.onProgress = function (progress) {\n    /**\n\t\t * Loading panorama progress event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#progress\n\t \t * @property {object} progress - The progress object containing loaded and total amount\n\t\t */\n    this.dispatchEvent({ type: 'progress', progress: progress })\n  }\n\n  /**\n\t * This will be called when panorama loading has error\n\t * @fires PANOLENS.Panorama#error\n\t */\n  PANOLENS.Panorama.prototype.onError = function () {\n    /**\n\t\t * Loading panorama error event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#error\n\t\t */\n    this.dispatchEvent({ type: 'error' })\n  }\n\n  /**\n\t * Get zoom level based on window width\n\t * @return {number} zoom level indicating image quality\n\t */\n  PANOLENS.Panorama.prototype.getZoomLevel = function () {\n    var zoomLevel\n\n    if (window.innerWidth <= 800) {\n      zoomLevel = this.ImageQualityFair\n    } else if (window.innerWidth > 800 && window.innerWidth <= 1280) {\n      zoomLevel = this.ImageQualityMedium\n    } else if (window.innerWidth > 1280 && window.innerWidth <= 1920) {\n      zoomLevel = this.ImageQualityHigh\n    } else if (window.innerWidth > 1920) {\n      zoomLevel = this.ImageQualitySuperHigh\n    } else {\n      zoomLevel = this.ImageQualityLow\n    }\n\n    return zoomLevel\n  }\n\n  /**\n\t * Update texture of a panorama\n\t * @param {THREE.Texture} texture - Texture to be updated\n\t */\n  PANOLENS.Panorama.prototype.updateTexture = function (texture) {\n    this.material.map = texture\n\n    this.material.needsUpdate = true\n  }\n\n  /**\n\t * Toggle visibility of infospots in this panorama\n\t * @param  {boolean} isVisible - Visibility of infospots\n\t * @param  {number} delay - Delay in milliseconds to change visibility\n\t * @fires PANOLENS.Panorama#infospot-animation-complete\n\t */\n  PANOLENS.Panorama.prototype.toggleInfospotVisibility = function (isVisible, delay) {\n    delay = (delay !== undefined) ? delay : 0\n\n    var scope, visible\n\n    scope = this\n    visible = (isVisible !== undefined) ? isVisible : (!this.isInfospotVisible)\n\n    this.traverse(function (object) {\n      if (object instanceof PANOLENS.Infospot) {\n        visible ? object.show(delay) : object.hide(delay)\n      }\n    })\n\n    this.isInfospotVisible = visible\n\n    // Animation complete event\n    this.infospotAnimation.onComplete(function () {\n      /**\n\t\t\t * Complete toggling infospot visibility\n\t\t\t * @event PANOLENS.Panorama#infospot-animation-complete\n\t\t\t * @type {object}\n\t\t\t */\n      scope.dispatchEvent({ type: 'infospot-animation-complete', visible: visible })\n    }).delay(delay).start()\n  }\n\n  /**\n\t * Set image of this panorama's linking infospot\n\t * @param {string} url   - Url to the image asset\n\t * @param {number} scale - Scale factor of the infospot\n\t */\n  PANOLENS.Panorama.prototype.setLinkingImage = function (url, scale) {\n    this.linkingImageURL = url\n    this.linkingImageScale = scale\n  }\n\n  /**\n\t * Link one-way panorama\n\t * @param  {PANOLENS.Panorama} pano  - The panorama to be linked to\n\t * @param  {THREE.Vector3} position - The position of infospot which navigates to the pano\n\t * @param  {number} [imageScale=300] - Image scale of linked infospot\n\t * @param  {string} [imageSrc=PANOLENS.DataImage.Arrow] - The image source of linked infospot\n\t */\n  PANOLENS.Panorama.prototype.link = function (pano, position, imageScale, imageSrc) {\n    var scope = this, spot, scale, img\n\n    this.visible = true\n\n    if (!position) {\n      console.warn('Please specify infospot position for linking')\n\n      return\n    }\n\n    // Infospot scale\n    if (imageScale !== undefined) {\n      scale = imageScale\n    } else if (pano.linkingImageScale !== undefined) {\n      scale = pano.linkingImageScale\n    } else {\n      scale = 300\n    }\n\n    // Infospot image\n    if (imageSrc) {\n      img = imageSrc\n    } else if (pano.linkingImageURL) {\n      img = pano.linkingImageURL\n    } else {\n      img = PANOLENS.DataImage.Arrow\n    }\n\n    // Creates a new infospot\n    spot = new PANOLENS.Infospot(scale, img)\n    spot.position.copy(position)\n    spot.toPanorama = pano\n    spot.addEventListener('click', function () {\n        \t/**\n        \t * Viewer handler event\n        \t * @type {object}\n        \t * @event PANOLENS.Panorama#panolens-viewer-handler\n        \t * @property {string} method - Viewer function name\n        \t * @property {*} data - The argument to be passed into the method\n        \t */\n        \tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setPanorama', data: pano })\n    })\n\n    this.linkedSpots.push(spot)\n\n    this.add(spot)\n\n    this.visible = false\n  }\n\n  PANOLENS.Panorama.prototype.reset = function () {\n    this.children.length = 0\n  }\n\n  PANOLENS.Panorama.prototype.setupTransitions = function () {\n    this.fadeInAnimation = new TWEEN.Tween(this.material)\n      .easing(TWEEN.Easing.Quartic.Out)\n      .onStart(function () {\n        this.visible = true\n        this.material.visible = true\n\n        /**\n\t\t\t\t * Enter panorama fade in start event\n\t\t\t\t * @event PANOLENS.Panorama#enter-fade-start\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-fade-start' })\n      }.bind(this))\n\n    this.fadeOutAnimation = new TWEEN.Tween(this.material)\n      .easing(TWEEN.Easing.Quartic.Out)\n      .onComplete(function () {\n        this.visible = false\n        this.material.visible = true\n\n        /**\n\t\t\t\t * Leave panorama complete event\n\t\t\t\t * @event PANOLENS.Panorama#leave-complete\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'leave-complete' })\n      }.bind(this))\n\n    this.enterTransition = new TWEEN.Tween(this)\n      .easing(TWEEN.Easing.Quartic.Out)\n      .onComplete(function () {\n        /**\n\t\t\t\t * Enter panorama and animation complete event\n\t\t\t\t * @event PANOLENS.Panorama#enter-animation-complete\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-animation-complete' })\n      }.bind(this))\n      .start()\n\n    this.leaveTransition = new TWEEN.Tween(this)\n      .easing(TWEEN.Easing.Quartic.Out)\n  }\n\n  /**\n\t * Start fading in animation\n\t * @fires PANOLENS.Panorama#enter-fade-complete\n\t */\n  PANOLENS.Panorama.prototype.fadeIn = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration\n\n    this.fadeOutAnimation.stop()\n    this.fadeInAnimation\n      .to({ opacity: 1 }, duration)\n      .onComplete(function () {\n        this.toggleInfospotVisibility(true, duration / 2)\n\n        /**\n\t\t\t\t * Enter panorama fade complete event\n\t\t\t\t * @event PANOLENS.Panorama#enter-fade-complete\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-fade-complete' })\n      }.bind(this))\n      .start()\n  }\n\n  /**\n\t * Start fading out animation\n\t */\n  PANOLENS.Panorama.prototype.fadeOut = function (duration) {\n    duration = duration >= 0 ? duration : this.animationDuration\n\n    this.fadeInAnimation.stop()\n    this.fadeOutAnimation.to({ opacity: 0 }, duration).start()\n  }\n\n  /**\n\t * This will be called when entering a panorama\n\t * @fires PANOLENS.Panorama#enter\n\t * @fires PANOLENS.Panorama#enter-animation-start\n\t */\n  PANOLENS.Panorama.prototype.onEnter = function () {\n    var duration = this.animationDuration\n\n    this.leaveTransition.stop()\n    this.enterTransition\n      .to({}, duration)\n      .onStart(function () {\n        /**\n\t\t\t\t * Enter panorama and animation starting event\n\t\t\t\t * @event PANOLENS.Panorama#enter-animation-start\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'enter-animation-start' })\n\n        if (this.loaded) {\n          this.fadeIn(duration)\n        } else {\n          this.load()\n        }\n      }.bind(this))\n      .start()\n\n    /**\n\t\t * Enter panorama event\n\t\t * @event PANOLENS.Panorama#enter\n\t\t * @type {object}\n\t\t */\n    this.dispatchEvent({ type: 'enter' })\n  }\n\n  /**\n\t * This will be called when leaving a panorama\n\t * @fires PANOLENS.Panorama#leave\n\t */\n  PANOLENS.Panorama.prototype.onLeave = function () {\n    var duration = this.animationDuration\n\n    this.enterTransition.stop()\n    this.leaveTransition\n      .to({}, duration)\n      .onStart(function () {\n        /**\n\t\t\t\t * Leave panorama and animation starting event\n\t\t\t\t * @event PANOLENS.Panorama#leave-animation-start\n\t\t\t\t * @type {object}\n\t\t\t\t */\n        this.dispatchEvent({ type: 'leave-animation-start' })\n\n        this.fadeOut(duration)\n        this.toggleInfospotVisibility(false)\n      }.bind(this))\n      .start()\n\n    /**\n\t\t * Leave panorama event\n\t\t * @event PANOLENS.Panorama#leave\n\t\t * @type {object}\n\t\t */\n    this.dispatchEvent({ type: 'leave' })\n  }\n\n  /**\n\t * Dispose panorama\n\t */\n  PANOLENS.Panorama.prototype.dispose = function () {\n    /**\n    \t * On panorama dispose handler\n    \t * @type {object}\n    \t * @event PANOLENS.Panorama#panolens-viewer-handler\n    \t * @property {string} method - Viewer function name\n    \t * @property {*} data - The argument to be passed into the method\n    \t */\n    \tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this })\n\n    // recursive disposal on 3d objects\n    function recursiveDispose (object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i])\n        object.remove(object.children[i])\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose()\n      }\n\n      object.geometry && object.geometry.dispose()\n      object.material && object.material.dispose()\n    }\n\n    recursiveDispose(this)\n\n    if (this.parent) {\n      this.parent.remove(this)\n    }\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Equirectangular based image panorama\n\t * @constructor\n\t * @param {string} image - Image url or HTMLImageElement\n\t * @param {number} [radius=5000] - Radius of panorama\n\t */\n  PANOLENS.ImagePanorama = function (image, radius) {\n    radius = radius || 5000\n\n    var geometry = new THREE.SphereGeometry(radius, 60, 40),\n      material = new THREE.MeshBasicMaterial({ opacity: 0, transparent: true })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n\n    this.src = image\n  }\n\n  PANOLENS.ImagePanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.ImagePanorama.prototype.constructor = PANOLENS.ImagePanorama\n\n  /**\n\t * Load image asset\n\t * @param  {*} src - Url or image element\n\t */\n  PANOLENS.ImagePanorama.prototype.load = function (src) {\n    src = src || this.src\n\n    if (!src) {\n      console.warn('Image source undefined')\n    } else if (typeof src === 'string') {\n      PANOLENS.Utils.TextureLoader.load(src, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this))\n    } else if (src instanceof HTMLImageElement) {\n      this.onLoad(new THREE.Texture(src))\n    }\n  }\n\n  /**\n\t * This will be called when image is loaded\n\t * @param  {THREE.Texture} texture - Texture to be updated\n\t */\n  PANOLENS.ImagePanorama.prototype.onLoad = function (texture) {\n    texture.minFilter = texture.magFilter = THREE.LinearFilter\n\n    texture.needsUpdate = true\n\n    this.updateTexture(texture)\n\n    // Call onLoad after second frame being painted\n    window.requestAnimationFrame(function () {\n      window.requestAnimationFrame(function () {\n        PANOLENS.Panorama.prototype.onLoad.call(this)\n      }.bind(this))\n    }.bind(this))\n  }\n\n  PANOLENS.ImagePanorama.prototype.reset = function () {\n    PANOLENS.Panorama.prototype.reset.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Google streetview panorama\n\t *\n\t * [How to get Panorama ID]{@link http://stackoverflow.com/questions/29916149/google-maps-streetview-how-to-get-panorama-id}\n\t * @constructor\n\t * @param {string} panoId - Panorama id from Google Streetview\n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n  PANOLENS.GoogleStreetviewPanorama = function (panoId, radius) {\n    PANOLENS.ImagePanorama.call(this, undefined, radius)\n\n    this.panoId = panoId\n\n    this.gsvLoader = undefined\n\n    this.loadRequested = false\n\n    this.setupGoogleMapAPI()\n  }\n\n  PANOLENS.GoogleStreetviewPanorama.prototype = Object.create(PANOLENS.ImagePanorama.prototype)\n\n  PANOLENS.GoogleStreetviewPanorama.constructor = PANOLENS.GoogleStreetviewPanorama\n\n  /**\n\t * Load Google Street View by panorama id\n\t * @param {string} panoId - Gogogle Street View panorama id\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.load = function (panoId) {\n    this.loadRequested = true\n\n    panoId = (panoId || this.panoId) || {}\n\n    if (panoId && this.gsvLoader) {\n      this.loadGSVLoader(panoId)\n    } else {\n      this.gsvLoader = {}\n    }\n  }\n\n  /**\n\t * Setup Google Map API\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI = function () {\n    var script = document.createElement('script')\n    script.src = 'https://maps.googleapis.com/maps/api/js'\n    script.onreadystatechange = this.setGSVLoader.bind(this)\n    \tscript.onload = this.setGSVLoader.bind(this)\n\n    document.getElementsByTagName('head')[0].appendChild(script)\n  }\n\n  /**\n\t * Set GSV Loader\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader = function () {\n    this.gsvLoader = new GSVPANO.PanoLoader()\n\n    if (this.gsvLoader === {} || this.loadRequested) {\n      this.load()\n    }\n  }\n\n  /**\n\t * Get GSV Loader\n\t * @return {object} GSV Loader instance\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader = function () {\n    return this.gsvLoader\n  }\n\n  /**\n\t * Load GSV Loader\n\t * @param  {string} panoId - Gogogle Street View panorama id\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader = function (panoId) {\n    this.loadRequested = false\n\n    this.gsvLoader.onProgress = this.onProgress.bind(this)\n\n    this.gsvLoader.onPanoramaLoad = this.onLoad.bind(this)\n\n    this.gsvLoader.setZoom(this.getZoomLevel())\n\n    this.gsvLoader.load(panoId)\n\n    this.gsvLoader.loaded = true\n  }\n\n  /**\n\t * This will be called when panorama is loaded\n\t * @param  {HTMLCanvasElement} canvas - Canvas where the tiles have been drawn\n\t */\n  PANOLENS.GoogleStreetviewPanorama.prototype.onLoad = function (canvas) {\n    if (!this.gsvLoader) { return }\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, new THREE.Texture(canvas))\n  }\n\n  PANOLENS.GoogleStreetviewPanorama.prototype.reset = function () {\n    this.gsvLoader = undefined\n\n    PANOLENS.ImagePanorama.prototype.reset.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Cubemap-based panorama\n\t * @constructor\n\t * @param {array} images - An array of cubetexture containing six images\n\t * @param {number} [edgeLength=10000] - The length of cube's edge\n\t */\n  PANOLENS.CubePanorama = function (images, edgeLength) {\n    var shader, geometry, material\n\n    this.images = images || []\n\n    edgeLength = edgeLength || 10000\n    shader = JSON.parse(JSON.stringify(THREE.ShaderLib[ 'cube' ]))\n\n    geometry = new THREE.BoxGeometry(edgeLength, edgeLength, edgeLength)\n    material = new THREE.ShaderMaterial({\n\n      fragmentShader: shader.fragmentShader,\n      vertexShader: shader.vertexShader,\n      uniforms: shader.uniforms,\n      side: THREE.BackSide\n\n    })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n  }\n\n  PANOLENS.CubePanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.CubePanorama.prototype.constructor = PANOLENS.CubePanorama\n\n  /**\n\t * Load 6 images and bind listeners\n\t */\n  PANOLENS.CubePanorama.prototype.load = function () {\n    PANOLENS.Utils.CubeTextureLoader.load(\n\n      this.images,\n\n      this.onLoad.bind(this),\n      this.onProgress.bind(this),\n      this.onError.bind(this)\n\n    )\n  }\n\n  /**\n\t * This will be called when 6 textures are ready\n\t * @param  {THREE.CubeTexture} texture - Cube texture\n\t */\n  PANOLENS.CubePanorama.prototype.onLoad = function (texture) {\n    this.material.uniforms[ 'tCube' ].value = texture\n\n    PANOLENS.Panorama.prototype.onLoad.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Basic panorama with 6 faces tile images\n\t * @constructor\n\t * @param {number} [edgeLength=10000] - The length of cube's edge\n\t */\n  PANOLENS.BasicPanorama = function (edgeLength) {\n    var tile = PANOLENS.DataImage.WhiteTile\n\n    PANOLENS.CubePanorama.call(this, [ tile, tile, tile, tile, tile, tile ], edgeLength)\n  }\n\n  PANOLENS.BasicPanorama.prototype = Object.create(PANOLENS.CubePanorama.prototype)\n\n  PANOLENS.BasicPanorama.prototype.constructor = PANOLENS.BasicPanorama\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Video Panorama\n\t * @constructor\n\t * @param {string} src - Equirectangular video url\n\t * @param {object} [options] - Option for video settings\n\t * @param {HTMLElement} [options.videoElement] - HTML5 video element contains the video\n\t * @param {boolean} [options.loop=true] - Specify if the video should loop in the end\n\t * @param {boolean} [options.muted=false] - Mute the video or not\n\t * @param {boolean} [options.autoplay=false] - Specify if the video should auto play\n\t * @param {boolean} [options.playsinline=true] - Specify if video should play inline for iOS. If you want it to auto play inline, set both autoplay and muted options to true\n\t * @param {string} [options.crossOrigin=\"anonymous\"] - Sets the cross-origin attribute for the video, which allows for cross-origin videos in some browsers (Firefox, Chrome). Set to either \"anonymous\" or \"use-credentials\".\n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n  PANOLENS.VideoPanorama = function (src, options, radius) {\n    radius = radius || 5000\n\n    var geometry = new THREE.SphereGeometry(radius, 60, 40),\n      material = new THREE.MeshBasicMaterial({ opacity: 0, transparent: true })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n\n    this.src = src\n    this.options = options || {}\n    this.options.playsinline = this.options.playsinline !== false\n\n    this.videoElement = undefined\n    this.videoRenderObject = undefined\n    this.videoProgress = 0\n\n    this.isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent)\n    this.isMobile = this.isIOS || /Android|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent)\n\n    this.addEventListener('leave', this.pauseVideo.bind(this))\n    this.addEventListener('enter-fade-start', this.resumeVideoProgress.bind(this))\n    this.addEventListener('video-toggle', this.toggleVideo.bind(this))\n    this.addEventListener('video-time', this.setVideoCurrentTime.bind(this))\n  }\n\n  PANOLENS.VideoPanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.VideoPanorama.constructor = PANOLENS.VideoPanorama\n\n  /**\n\t * Load video panorama\n\t * @param  {string} src     - The video url\n\t * @param  {object} options - Option object containing videoElement\n\t * @fires  PANOLENS.Panorama#panolens-viewer-handler\n\t */\n  PANOLENS.VideoPanorama.prototype.load = function (src, options) {\n    var scope = this\n\n    src = (src || this.src) || ''\n    options = (options || this.options) || {}\n\n    this.videoElement = options.videoElement || document.createElement('video')\n\n    this.videoElement.muted = options.muted || false\n    this.videoElement.loop = (options.loop !== undefined) ? options.loop : true\n    this.videoElement.autoplay = (options.autoplay !== undefined) ? options.autoplay : false\n    this.videoElement.crossOrigin = (options.crossOrigin !== undefined) ? options.crossOrigin : 'anonymous'\n\n    // iphone inline player\n    if (options.playsinline) {\n      this.videoElement.setAttribute('playsinline', '')\n      this.videoElement.setAttribute('webkit-playsinline', '')\n    }\n\n    var onloadeddata = function () {\n      scope.onProgress({ loaded: 1, total: 1 })\n      scope.setVideoTexture(scope.videoElement)\n\n      if (scope.videoElement.autoplay) {\n        /**\n\t\t\t\t * Viewer handler event\n\t\t\t\t * @type {object}\n\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t */\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false })\n      }\n\n      // For mobile silent autoplay\n      if (scope.isMobile) {\n        if (scope.videoElement.autoplay && scope.videoElement.muted) {\n          /**\n\t\t\t\t\t * Viewer handler event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t\t */\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false })\n        } else {\n          /**\n\t\t\t\t\t * Viewer handler event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t\t */\n          scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true })\n        }\n      }\n\n      scope.onLoad()\n    }\n\n    /**\n\t\t * Ready state of the audio/video element\n\t\t * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready\n\t\t * 1 = HAVE_METADATA - metadata for the audio/video is ready\n\t\t * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond\n\t\t * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available\n\t\t * 4 = HAVE_ENOUGH_DATA - enough data available to start playing\n\t\t */\n    if (this.videoElement.readyState > 2) {\n      onloadeddata()\n    } else {\n      if (!this.videoElement.querySelectorAll('source').length || !this.videoElement.src) {\n        this.videoElement.src = src\n      }\n\n      this.videoElement.load()\n    }\n\n    this.videoElement.onloadeddata = onloadeddata\n\n    this.videoElement.ontimeupdate = function (event) {\n      scope.videoProgress = this.duration >= 0 ? this.currentTime / this.duration : 0\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'onVideoUpdate'\n\t\t\t * @property {number} data - The percentage of video progress. Range from 0.0 to 1.0\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: scope.videoProgress })\n    }\n\n    this.videoElement.addEventListener('ended', function () {\n      if (!scope.options.loop) {\n        scope.resetVideo()\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true })\n      }\n    }, false)\n  }\n\n  /**\n\t * Set video texture\n\t * @param {HTMLVideoElement} video  - The html5 video element\n\t * @fires PANOLENS.Panorama#panolens-viewer-handler\n\t */\n  PANOLENS.VideoPanorama.prototype.setVideoTexture = function (video) {\n    var videoTexture, videoRenderObject, scene\n\n    if (!video) return\n\n    videoTexture = new THREE.VideoTexture(video)\n    videoTexture.minFilter = THREE.LinearFilter\n    videoTexture.magFilter = THREE.LinearFilter\n    videoTexture.format = THREE.RGBFormat\n\n    videoRenderObject = {\n\n      video: video,\n      videoTexture: videoTexture\n\n    }\n\n    if (this.isIOS) {\n      enableInlineVideo(video)\n    }\n\n    this.updateTexture(videoTexture)\n\n    this.videoRenderObject = videoRenderObject\n  }\n\n  PANOLENS.VideoPanorama.prototype.reset = function () {\n    this.videoElement = undefined\n\n    PANOLENS.Panorama.prototype.reset.call(this)\n  }\n\n  /**\n\t * Check if video is paused\n\t * @return {boolean} - is video paused or not\n\t */\n  PANOLENS.VideoPanorama.prototype.isVideoPaused = function () {\n    return this.videoRenderObject.video.paused\n  }\n\n  /**\n\t * Toggle video to play or pause\n\t */\n  PANOLENS.VideoPanorama.prototype.toggleVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      if (this.isVideoPaused()) {\n        this.videoRenderObject.video.play()\n      } else {\n        this.videoRenderObject.video.pause()\n      }\n    }\n  }\n\n  /**\n\t * Set video currentTime\n\t * @param {object} event - Event contains percentage. Range from 0.0 to 1.0\n\t */\n  PANOLENS.VideoPanorama.prototype.setVideoCurrentTime = function (event) {\n    if (this.videoRenderObject && this.videoRenderObject.video && !Number.isNaN(event.percentage) && event.percentage !== 1) {\n      this.videoRenderObject.video.currentTime = this.videoRenderObject.video.duration * event.percentage\n\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: event.percentage })\n    }\n  }\n\n  /**\n\t * Play video\n\t */\n  PANOLENS.VideoPanorama.prototype.playVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoPaused()) {\n      this.videoRenderObject.video.play()\n    }\n\n    /**\n\t\t * Play event\n\t\t * @type {object}\n\t\t * @event 'play'\n\t\t * */\n    this.dispatchEvent({ type: 'play' })\n  }\n\n  /**\n\t * Pause video\n\t */\n  PANOLENS.VideoPanorama.prototype.pauseVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoPaused()) {\n      this.videoRenderObject.video.pause()\n    }\n\n    /**\n\t\t * Pause event\n\t\t * @type {object}\n\t\t * @event 'pause'\n\t\t * */\n    this.dispatchEvent({ type: 'pause' })\n  }\n\n  /**\n\t * Resume video\n\t */\n  PANOLENS.VideoPanorama.prototype.resumeVideoProgress = function () {\n    if (this.videoElement.autoplay && !this.isMobile) {\n      this.playVideo()\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t */\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false })\n    } else {\n      this.pauseVideo()\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t */\n      this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true })\n    }\n\n    this.setVideoCurrentTime({ percentage: this.videoProgress })\n  }\n\n  /**\n\t * Reset video at stating point\n\t */\n  PANOLENS.VideoPanorama.prototype.resetVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video) {\n      this.setVideoCurrentTime({ percentage: 0 })\n    }\n  }\n\n  /**\n\t* Check if video is muted\n\t* @return {boolean} - is video muted or not\n\t*/\n  PANOLENS.VideoPanorama.prototype.isVideoMuted = function () {\n    return this.videoRenderObject.video.muted\n  }\n\n  /**\n\t * Mute video\n\t */\n  PANOLENS.VideoPanorama.prototype.muteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = true\n    }\n\n    this.dispatchEvent({ type: 'volumechange' })\n  }\n\n  /**\n\t * Unmute video\n\t */\n  PANOLENS.VideoPanorama.prototype.unmuteVideo = function () {\n    if (this.videoRenderObject && this.videoRenderObject.video && this.isVideoMuted()) {\n      this.videoRenderObject.video.muted = false\n    }\n\n    this.dispatchEvent({ type: 'volumechange' })\n  }\n\n  /**\n\t * Returns the video element\n\t */\n  PANOLENS.VideoPanorama.prototype.getVideoElement = function () {\n    return this.videoRenderObject.video\n  }\n\n  /**\n\t * Dispose video panorama\n\t */\n  PANOLENS.VideoPanorama.prototype.dispose = function () {\n    this.resetVideo()\n    this.pauseVideo()\n\n    this.removeEventListener('leave', this.pauseVideo.bind(this))\n    this.removeEventListener('enter-fade-start', this.resumeVideoProgress.bind(this))\n    this.removeEventListener('video-toggle', this.toggleVideo.bind(this))\n    this.removeEventListener('video-time', this.setVideoCurrentTime.bind(this))\n\n    PANOLENS.Panorama.prototype.dispose.call(this)\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Empty panorama\n\t * @constructor\n\t * @param {number} [radius=5000] - Radius of panorama\n\t */\n  PANOLENS.EmptyPanorama = function (radius) {\n    radius = radius || 5000\n\n    var geometry = new THREE.Geometry(),\n      material = new THREE.MeshBasicMaterial({\n        color: 0x000000, opacity: 1, transparent: true\n      })\n\n    PANOLENS.Panorama.call(this, geometry, material)\n  }\n\n  PANOLENS.EmptyPanorama.prototype = Object.create(PANOLENS.Panorama.prototype)\n\n  PANOLENS.EmptyPanorama.prototype.constructor = PANOLENS.EmptyPanorama\n})(); (function () {\n  /**\n\t * Little Planet\n\t * @constructor\n\t * @param {string} type \t\t- Type of little planet basic class\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n  PANOLENS.LittlePlanet = function (type, source, size, ratio) {\n    type = type || 'image'\n\n    type === 'image' && PANOLENS.ImagePanorama.call(this, source, size)\n\n    this.size = size || 10000\n    this.ratio = ratio || 0.5\n    this.EPS = 0.000001\n    this.frameId\n\n    this.geometry = this.createGeometry()\n    this.material = this.createMaterial(this.size)\n\n    this.dragging = false\n    this.userMouse = new THREE.Vector2()\n\n    this.quatA = new THREE.Quaternion()\n    this.quatB = new THREE.Quaternion()\n    this.quatCur = new THREE.Quaternion()\n    this.quatSlerp = new THREE.Quaternion()\n\n    this.vectorX = new THREE.Vector3(1, 0, 0)\n    this.vectorY = new THREE.Vector3(0, 1, 0)\n\n    this.addEventListener('window-resize', this.onWindowResize)\n  }\n\n  PANOLENS.LittlePlanet.prototype = Object.create(PANOLENS.ImagePanorama.prototype)\n\n  PANOLENS.LittlePlanet.prototype.constructor = PANOLENS.LittlePlanet\n\n  PANOLENS.LittlePlanet.prototype.createGeometry = function () {\n    return new THREE.PlaneGeometry(this.size, this.size * this.ratio)\n  }\n\n  PANOLENS.LittlePlanet.prototype.createMaterial = function (size) {\n    var uniforms = PANOLENS.StereographicShader.uniforms\n    uniforms.zoom.value = size\n\n    return new THREE.ShaderMaterial({\n\n      uniforms: uniforms,\n      vertexShader: PANOLENS.StereographicShader.vertexShader,\n      fragmentShader: PANOLENS.StereographicShader.fragmentShader\n\n    })\n  }\n\n  PANOLENS.LittlePlanet.prototype.registerMouseEvents = function () {\n    this.container.addEventListener('mousedown', this.onMouseDown.bind(this), false)\n    this.container.addEventListener('mousemove', this.onMouseMove.bind(this), false)\n    this.container.addEventListener('mouseup', this.onMouseUp.bind(this), false)\n    this.container.addEventListener('touchstart', this.onMouseDown.bind(this), false)\n    this.container.addEventListener('touchmove', this.onMouseMove.bind(this), false)\n    this.container.addEventListener('touchend', this.onMouseUp.bind(this), false)\n    this.container.addEventListener('mousewheel', this.onMouseWheel.bind(this), false)\n    this.container.addEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false)\n    this.container.addEventListener('contextmenu', this.onContextMenu.bind(this), false)\n  }\n\n  PANOLENS.LittlePlanet.prototype.unregisterMouseEvents = function () {\n    this.container.removeEventListener('mousedown', this.onMouseDown.bind(this), false)\n    this.container.removeEventListener('mousemove', this.onMouseMove.bind(this), false)\n    this.container.removeEventListener('mouseup', this.onMouseUp.bind(this), false)\n    this.container.removeEventListener('touchstart', this.onMouseDown.bind(this), false)\n    this.container.removeEventListener('touchmove', this.onMouseMove.bind(this), false)\n    this.container.removeEventListener('touchend', this.onMouseUp.bind(this), false)\n    this.container.removeEventListener('mousewheel', this.onMouseWheel.bind(this), false)\n    this.container.removeEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false)\n    this.container.removeEventListener('contextmenu', this.onContextMenu.bind(this), false)\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseDown = function (event) {\n    var x = (event.clientX >= 0) ? event.clientX : event.touches[ 0 ].clientX\n    var y = (event.clientY >= 0) ? event.clientY : event.touches[ 0 ].clientY\n\n    var inputCount = (event.touches && event.touches.length) || 1\n\n    switch (inputCount) {\n      case 1:\n\n        this.dragging = true\n        this.userMouse.set(x, y)\n\n        break\n\n      case 2:\n\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n        this.userMouse.pinchDistance = distance\n\n        break\n\n      default:\n\n        break\n    }\n\n    this.onUpdateCallback()\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseMove = function (event) {\n    var x = (event.clientX >= 0) ? event.clientX : event.touches[ 0 ].clientX\n    var y = (event.clientY >= 0) ? event.clientY : event.touches[ 0 ].clientY\n\n    var inputCount = (event.touches && event.touches.length) || 1\n\n    switch (inputCount) {\n      case 1:\n\n        var angleX = THREE.Math.degToRad(x - this.userMouse.x) * 0.4\n        var angleY = THREE.Math.degToRad(y - this.userMouse.y) * 0.4\n\n        if (this.dragging) {\n          this.quatA.setFromAxisAngle(this.vectorY, angleX)\n          this.quatB.setFromAxisAngle(this.vectorX, angleY)\n          this.quatCur.multiply(this.quatA).multiply(this.quatB)\n          this.userMouse.set(x, y)\n        }\n\n        break\n\n      case 2:\n\n        var uniforms = this.material.uniforms\n        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX\n        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY\n        var distance = Math.sqrt(dx * dx + dy * dy)\n\n        this.addZoomDelta(this.userMouse.pinchDistance - distance)\n\n        break\n\n      default:\n\n        break\n    }\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseUp = function (event) {\n    this.dragging = false\n  }\n\n  PANOLENS.LittlePlanet.prototype.onMouseWheel = function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    var delta = 0\n\n    if (event.wheelDelta !== undefined) { // WebKit / Opera / Explorer 9\n      delta = event.wheelDelta\n    } else if (event.detail !== undefined) { // Firefox\n      delta = -event.detail\n    }\n\n    this.addZoomDelta(delta)\n    this.onUpdateCallback()\n  }\n\n  PANOLENS.LittlePlanet.prototype.addZoomDelta = function (delta) {\n    var uniforms = this.material.uniforms\n    var lowerBound = this.size * 0.1\n    var upperBound = this.size * 10\n\n    uniforms.zoom.value += delta\n\n    if (uniforms.zoom.value <= lowerBound) {\n      uniforms.zoom.value = lowerBound\n    } else if (uniforms.zoom.value >= upperBound) {\n      uniforms.zoom.value = upperBound\n    }\n  }\n\n  PANOLENS.LittlePlanet.prototype.onUpdateCallback = function () {\n    this.frameId = window.requestAnimationFrame(this.onUpdateCallback.bind(this))\n\n    this.quatSlerp.slerp(this.quatCur, 0.1)\n    this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp)\n\n    if (!this.dragging && 1.0 - this.quatSlerp.clone().dot(this.quatCur) < this.EPS) {\n      window.cancelAnimationFrame(this.frameId)\n    }\n  }\n\n  PANOLENS.LittlePlanet.prototype.reset = function () {\n    this.quatCur.set(0, 0, 0, 1)\n    this.quatSlerp.set(0, 0, 0, 1)\n    this.onUpdateCallback()\n  }\n\n  PANOLENS.LittlePlanet.prototype.onLoad = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight\n\n    this.registerMouseEvents()\n    this.onUpdateCallback()\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'disableControl' })\n  }\n\n  PANOLENS.LittlePlanet.prototype.onLeave = function () {\n    this.unregisterMouseEvents()\n\n    this.dispatchEvent({ type: 'panolens-viewer-handler', method: 'enableControl', data: PANOLENS.Controls.ORBIT })\n\n    window.cancelAnimationFrame(this.frameId)\n\n    PANOLENS.Panorama.prototype.onLeave.call(this)\n  }\n\n  PANOLENS.LittlePlanet.prototype.onWindowResize = function () {\n    this.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight\n  }\n\n  PANOLENS.LittlePlanet.prototype.onContextMenu = function () {\n    this.dragging = false\n  }\n})(); (function () {\n  /**\n\t * Image Little Planet\n\t * @constructor\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n  PANOLENS.ImageLittlePlanet = function (source, size, ratio) {\n    PANOLENS.LittlePlanet.call(this, 'image', source, size, ratio)\n  }\n\n  PANOLENS.ImageLittlePlanet.prototype = Object.create(PANOLENS.LittlePlanet.prototype)\n\n  PANOLENS.ImageLittlePlanet.prototype.constructor = PANOLENS.ImageLittlePlanet\n\n  PANOLENS.ImageLittlePlanet.prototype.onLoad = function (texture) {\n    this.updateTexture(texture)\n\n    PANOLENS.ImagePanorama.prototype.onLoad.call(this, texture)\n    PANOLENS.LittlePlanet.prototype.onLoad.call(this)\n  }\n\n  PANOLENS.ImageLittlePlanet.prototype.updateTexture = function (texture) {\n    texture.minFilter = texture.magFilter = THREE.LinearFilter\n\n    this.material.uniforms[ 'tDiffuse' ].value = texture\n  }\n})(); (function () {\n  /**\n\t * Reticle 3D Sprite\n\t * @constructor\n\t * @param {THREE.Color} [color=0xfffff] - Color of the reticle sprite\n\t * @param {boolean} [autoSelect=true] - Auto selection\n\t * @param {string} [idleImageUrl=PANOLENS.DataImage.ReticleIdle] - Image asset url\n\t * @param {string} [dwellImageUrl=PANOLENS.DataImage.ReticleDwell] - Image asset url\n\t * @param {number} [dwellTime=1500] - Duration for dwelling sequence to complete\n\t * @param {number} [dwellSpriteAmount=45] - Number of dwelling sprite sequence\n\t */\n  PANOLENS.Reticle = function (color, autoSelect, idleImageUrl, dwellImageUrl, dwellTime, dwellSpriteAmount) {\n    color = color || 0xffffff\n\n    this.autoSelect = autoSelect != undefined ? autoSelect : true\n\n    this.dwellTime = dwellTime || 1500\n    this.dwellSpriteAmount = dwellSpriteAmount || 45\n    this.dwellInterval = this.dwellTime / this.dwellSpriteAmount\n\n    this.IDLE = 0\n    this.DWELLING = 1\n    this.status\n\n    this.scaleIdle = new THREE.Vector3(0.2, 0.2, 1)\n    this.scaleDwell = new THREE.Vector3(1, 0.8, 1)\n\n    this.textureLoaded = false\n    this.idleImageUrl = idleImageUrl || PANOLENS.DataImage.ReticleIdle\n    this.dwellImageUrl = dwellImageUrl || PANOLENS.DataImage.ReticleDwell\n    this.idleTexture = new THREE.Texture()\n    this.dwellTexture = new THREE.Texture()\n\n    THREE.Sprite.call(this, new THREE.SpriteMaterial({ color: color, depthTest: false }))\n\n    this.currentTile = 0\n    this.startTime = 0\n\n    this.visible = false\n    this.renderOrder = 10\n    this.timerId\n\n    // initial update\n    this.updateStatus(this.IDLE)\n  }\n\n  PANOLENS.Reticle.prototype = Object.create(THREE.Sprite.prototype)\n\n  PANOLENS.Reticle.prototype.constructor = PANOLENS.Reticle\n\n  /**\n\t * Make reticle visible\n\t */\n  PANOLENS.Reticle.prototype.show = function () {\n    this.visible = true\n  }\n\n  /**\n\t * Make reticle invisible\n\t */\n  PANOLENS.Reticle.prototype.hide = function () {\n    this.visible = false\n  }\n\n  /**\n\t * Load reticle textures\n\t */\n  PANOLENS.Reticle.prototype.loadTextures = function () {\n    this.idleTexture = PANOLENS.Utils.TextureLoader.load(this.idleImageUrl)\n    this.dwellTexture = PANOLENS.Utils.TextureLoader.load(this.dwellImageUrl)\n\n    this.material.map = this.idleTexture\n    this.setupDwellSprite(this.dwellTexture)\n    this.textureLoaded = true\n  }\n\n  /**\n\t * Start reticle timer selection\n\t * @param  {function} completeCallback - Callback after dwell completes\n\t */\n  PANOLENS.Reticle.prototype.select = function (completeCallback) {\n    if (performance.now() - this.startTime >= this.dwellTime) {\n      this.completeDwelling()\n      completeCallback()\n    } else if (this.autoSelect) {\n      this.updateDwelling(performance.now())\n      this.timerId = window.requestAnimationFrame(this.select.bind(this, completeCallback))\n    }\n  }\n\n  /**\n\t * Clear and reset reticle timer\n\t */\n  PANOLENS.Reticle.prototype.clearTimer = function () {\n    window.cancelAnimationFrame(this.timerId)\n    this.timerId = null\n  }\n\n  /**\n\t * Setup dwell sprite animation\n\t */\n  PANOLENS.Reticle.prototype.setupDwellSprite = function (texture) {\n    texture.wrapS = THREE.RepeatWrapping\n    texture.repeat.set(1 / this.dwellSpriteAmount, 1)\n  }\n\n  /**\n\t * Update reticle status\n\t * @param {number} status - Reticle status\n\t */\n  PANOLENS.Reticle.prototype.updateStatus = function (status) {\n    this.status = status\n\n    if (status === this.IDLE) {\n      this.scale.copy(this.scaleIdle)\n      this.material.map = this.idleTexture\n    } else if (status === this.DWELLING) {\n      this.scale.copy(this.scaleDwell)\n      this.material.map = this.dwellTexture\n    }\n\n    this.currentTile = 0\n    this.material.map.offset.x = 0\n  }\n\n  /**\n\t * Start dwelling sequence\n\t */\n  PANOLENS.Reticle.prototype.startDwelling = function (completeCallback) {\n    if (!this.autoSelect) {\n      return\n    }\n\n    this.startTime = performance.now()\n    this.updateStatus(this.DWELLING)\n    this.select(completeCallback)\n  }\n\n  /**\n\t * Update dwelling sequence\n\t * @param  {number} time - Timestamp for elasped time\n\t */\n  PANOLENS.Reticle.prototype.updateDwelling = function (time) {\n    var elasped = time - this.startTime\n\n    if (this.currentTile <= this.dwellSpriteAmount) {\n      this.currentTile = Math.floor(elasped / this.dwellTime * this.dwellSpriteAmount)\n      this.material.map.offset.x = this.currentTile / this.dwellSpriteAmount\n    } else {\n      this.updateStatus(this.IDLE)\n    }\n  }\n\n  /**\n\t * Cancel dwelling\n\t */\n  PANOLENS.Reticle.prototype.cancelDwelling = function () {\n    this.clearTimer()\n    this.updateStatus(this.IDLE)\n  }\n\n  /**\n\t * Complete dwelling\n\t */\n  PANOLENS.Reticle.prototype.completeDwelling = function () {\n    this.clearTimer()\n    this.updateStatus(this.IDLE)\n  }\n})(); (function () {\n  /**\n\t * Creates a tile with bent capability\n\t * @constructor\n\t * @param {number}  [width=10]                      \t\t\t\t- Width along the X axis\n\t * @param {number}  [height=5]                      \t\t\t\t- Height along the Y axis\n\t * @param {number}  [widthSegments=20]              \t\t\t\t- Width segments\n\t * @param {number}  [heightSegments=20]             \t\t\t\t- Height segments\n\t * @param {THREE.Vector3} [forceDirection=THREE.Vector3( 0, 0, 1 )] - Force direction\n\t * @param {THREE.Vector3} [forceAxis=THREE.Vector3( 0, 1, 0 )] \t\t- Along this axis\n\t * @param {number} [forceAngle=Math.PI/12] \t\t\t\t\t\t\t- Angle to bend in radians\n\t */\n  PANOLENS.Tile = function (width, height, widthSegments, heightSegments, forceDirection, forceAxis, forceAngle) {\n    var scope = this\n\n    this.parameters = {\n      width: width,\n      height: height,\n      widthSegments: widthSegments,\n      heightSegments: heightSegments,\n      forceDirection: forceDirection,\n      forceAxis: forceAxis,\n      forceAngle: forceAngle\n    }\n\n    width = width || 10\n    height = height || 5\n    widthSegments = widthSegments || 1\n    heightSegments = heightSegments || 1\n    forceDirection = forceDirection || new THREE.Vector3(0, 0, 1)\n    forceAxis = forceAxis || new THREE.Vector3(0, 1, 0)\n    forceAngle = forceAngle !== undefined ? forceAngle : 0\n\n    THREE.Mesh.call(this,\n      new THREE.PlaneGeometry(width, height, widthSegments, heightSegments),\n      new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true })\n    )\n\n    this.bendModifier = new THREE.BendModifier()\n\n    this.entity = undefined\n\n    this.animationDuration = 500\n    this.animationFadeOut = undefined\n    this.animationFadeIn = undefined\n    this.animationTranslation = undefined\n    this.tweens = {}\n\n    if (forceAngle !== 0) {\n      this.bend(forceDirection, forceAxis, forceAngle)\n    }\n\n    this.originalGeometry = this.geometry.clone()\n  }\n\n  PANOLENS.Tile.prototype = Object.create(THREE.Mesh.prototype)\n\n  PANOLENS.Tile.prototype.constructor = PANOLENS.Tile\n\n  PANOLENS.Tile.prototype.clone = function () {\n    var parameters = this.parameters, tile\n\n    tile = new PANOLENS.Tile(\n      parameters.width,\n      parameters.height,\n      parameters.widthSegments,\n      parameters.heightSegments,\n      parameters.forceDirection,\n      parameters.forceAxis,\n      parameters.forceAngle\n    )\n\n    tile.setEntity(this.entity)\n    tile.material = this.material.clone()\n\n    return tile\n  }\n\n  /**\n\t * Bend panel with direction, axis, and angle\n\t * @param  {THREE.Vector3} direction - Force direction\n\t * @param  {THREE.Vector3} axis - Along this axis\n\t * @param  {number} angle - Angle to bend in radians\n\t */\n  PANOLENS.Tile.prototype.bend = function (direction, axis, angle) {\n    this.bendModifier.set(direction, axis, angle).modify(this.geometry)\n  }\n\n  /**\n\t * Restore geometry back to initial state\n\t */\n  PANOLENS.Tile.prototype.unbend = function () {\n    var geometry = this.geometry\n\n    this.geometry = this.originalGeometry\n    this.originalGeometry = this.geometry.clone()\n\n    geometry.dispose()\n    geometry = null\n  }\n\n  /**\n\t * Create a tween object for animation\n\t * based on - {@link https://github.com/tweenjs/tween.js}\n\t * @param  {string} name       - Name of the tween animation\n\t * @param  {object} object     - Object to be tweened\n\t * @param  {object} toState    - Final state of the object's properties\n\t * @param  {number} duration   - Tweening duration\n\t * @param  {TWEEN.Easing} easing     - Easing function\n\t * @param  {number} delay      - Animation delay time\n\t * @param  {Function} onStart    - On start function\n\t * @param  {Function} onUpdate   - On update function\n\t * @param  {Function} onComplete - On complete function\n\t * @return {TWEEN.Tween}         - Tween object\n\t */\n  PANOLENS.Tile.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this\n    \ttoState = toState || {}\n    \tduration = duration || this.animationDuration\n    \teasing = easing || TWEEN.Easing.Exponential.Out\n    \tdelay = delay !== undefined ? delay : 0\n    \tonStart = onStart || null\n    \tonUpdate = onUpdate || null\n    \tonComplete = onComplete || null\n\n    \tif (!this.tweens[name]) {\n    \t\tthis.tweens[name] = new TWEEN.Tween(object)\n    \t\t\t.to(toState, duration)\n\t        \t.easing(easing)\n\t        \t.delay(delay)\n\t        \t.onStart(onStart)\n\t        \t.onUpdate(onUpdate)\n\t        \t.onComplete(onComplete)\n    \t}\n\n    \treturn this.tweens[name]\n  }\n\n  /**\n     * Short-hand for displaying a single ripple effect\n     * by duplicating itself and fadeout\n     * @param  {number} scale    - The duplicated self fadeout scale\n     * @param  {number} duration - Effect duration\n     * @param  {TWEEN.Easing} easing   - Easing function\n     */\n  PANOLENS.Tile.prototype.ripple = function (scale, duration, easing) {\n    \tscale = scale || 2\n    \tduration = duration || 200\n    \teasing = easing || TWEEN.Easing.Cubic.Out\n\n    \tvar scope = this, ripple = this.clone()\n\n    new TWEEN.Tween(ripple.scale)\n      .to({x: scale, y: scale}, duration)\n      .easing(easing)\n      .start()\n\n    new TWEEN.Tween(ripple.material)\n      .to({opacity: 0}, duration)\n      .easing(easing)\n      .onComplete(function () {\n        scope.remove(ripple)\n        ripple.geometry.dispose()\n        ripple.material.dispose()\n      })\n      .start()\n\n    this.add(ripple)\n  }\n\n  /**\n\t * Set entity if multiple objects are considered as one entity\n\t * @param {object} entity - Entity represents whole group structure\n\t */\n  PANOLENS.Tile.prototype.setEntity = function (entity) {\n    this.entity = entity\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n     * Group consists of tile array\n     * @constructor\n     * @param {array}  tileArray         - Tile array of PANOLENS.Tile\n     * @param {number} verticalGap       - Vertical gap between each tile\n     * @param {number} depthGap          - Depth gap between each tile\n     * @param {number} animationDuration - Animation duration\n     * @param {number} offset            - Offset index\n     */\n  PANOLENS.TileGroup = function (tileArray, verticalGap, depthGap, animationDuration, offset) {\n    var scope = this, textureLoader\n\n    THREE.Object3D.call(this)\n\n    this.tileArray = tileArray || []\n    this.offset = offset !== undefined ? offset : 0\n    this.v_gap = verticalGap !== undefined ? verticalGap : 6\n    this.d_gap = depthGap !== undefined ? depthGap : 2\n    this.animationDuration = animationDuration !== undefined ? animationDuration : 200\n    this.animationEasing = TWEEN.Easing.Exponential.Out\n    this.visibleDelta = 2\n\n    this.tileArray.map(function (tile, index) {\n      if (tile.image) {\n        PANOLENS.Utils.TextureLoader.load(tile.image, scope.setTexture.bind(tile))\n      }\n\n      tile.position.set(0, index * -scope.v_gap, index * -scope.d_gap)\n      tile.originalPosition = tile.position.clone()\n      tile.setEntity(scope)\n      scope.add(tile)\n    })\n\n    this.updateVisbility()\n  }\n\n  PANOLENS.TileGroup.prototype = Object.create(THREE.Object3D.prototype)\n\n  PANOLENS.TileGroup.prototype.constructor = PANOLENS.TileGroup\n\n  /**\n     * Update corresponding tile textures\n     * @param  {array} imageArray - Image array with index to index image update\n     */\n  PANOLENS.TileGroup.prototype.updateTexture = function (imageArray) {\n    var scope = this\n\n    imageArray = imageArray || []\n    this.children.map(function (child, index) {\n      if (child instanceof PANOLENS.Tile && imageArray[index]) {\n        PANOLENS.Utils.TextureLoader.load(imageArray[index], scope.setTexture.bind(child))\n\t    \t\tif (child.outline) {\n\t    \t\t\tchild.outline.material.visible = true\n\t    \t\t}\n      }\n    })\n  }\n\n  /**\n     * Update all tile textures and hide the remaining ones\n     * @param  {array} imageArray - Image array with index to index image update\n     */\n  PANOLENS.TileGroup.prototype.updateAllTexture = function (imageArray) {\n    this.updateTexture(imageArray)\n\n    if (imageArray.length < this.children.length) {\n      for (var i = imageArray.length; i < this.children.length; i++) {\n        if (this.children[i] instanceof PANOLENS.Tile) {\n          this.children[i].material.visible = false\n          if (this.children[i].outline) {\n            this.children[i].outline.material.visible = false\n          }\n        }\n      }\n    }\n  }\n\n  /**\n     * Set individual texture\n     * @param {THREE.Texture} texture - Texture to be updated\n     */\n  PANOLENS.TileGroup.prototype.setTexture = function (texture) {\n    texture.minFilter = THREE.LinearFilter\n    texture.magFilter = THREE.LinearFilter\n    this.material.visible = true\n    this.material.map = texture\n    this.material.needsUpdate = true\n  }\n\n  /**\n     * Update visibility\n     */\n  PANOLENS.TileGroup.prototype.updateVisbility = function () {\n    \tthis.children[this.offset].visible = true\n    \tnew TWEEN.Tween(this.children[this.offset].material)\n      .to({ opacity: 1 }, this.animationDuration)\n      .easing(this.animationEasing)\n      .start()\n\n    \tif (this.children[this.offset].outline) {\n    \t\tthis.children[this.offset].outline.visible = true\n    \t}\n\n    \t// Backward\n    \tfor (var i = this.offset - 1; i >= 0; i--) {\n    \t\tif (this.tileArray.indexOf(this.children[i]) === -1) { continue }\n\n    \t\tif (this.offset - i <= this.visibleDelta) {\n    \t\t\tthis.children[i].visible = true\n    \t\t\tnew TWEEN.Tween(this.children[i].material)\n    \t\t\t.to({ opacity: 1 / (this.offset - i) * 0.5 }, this.animationDuration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n    \t\t} else {\n    \t\t\tthis.children[i].visible = false\n    \t\t}\n\n    \t\tthis.children[i].outline && (this.children[i].outline.visible = false)\n    \t}\n\n    \t// Forward\n    \tfor (var i = this.offset + 1; i < this.children.length; i++) {\n    \t\tif (this.tileArray.indexOf(this.children[i]) === -1) { continue }\n\n    \t\tif (i - this.offset <= this.visibleDelta) {\n    \t\t\tthis.children[i].visible = true\n    \t\t\tnew TWEEN.Tween(this.children[i].material)\n    \t\t\t.to({ opacity: 1 / (i - this.offset) * 0.5 }, this.animationDuration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n    \t\t} else {\n    \t\t\tthis.children[i].visible = false\n    \t\t}\n\n    \t\tthis.children[i].outline && (this.children[i].outline.visible = false)\n    \t}\n  }\n\n  /**\n     * Scroll up\n     * @param  {number} duration - Scroll up duration\n     */\n  PANOLENS.TileGroup.prototype.scrollUp = function (duration) {\n    \tvar tiles = this.tileArray, offset\n\n    \tduration = duration !== undefined ? duration : this.animationDuration\n\n    \toffset = this.offset + 1\n\n    \tif (this.offset < tiles.length - 1 && tiles[ this.offset + 1 ].material.visible) {\n    \t\tfor (var i = tiles.length - 1; i >= 0; i--) {\n    \t\t\tnew TWEEN.Tween(tiles[i].position)\n    \t\t\t.to({ y: (i - offset) * -this.v_gap,\n    \t\t\t\t  z: Math.abs(i - offset) * -this.d_gap }, duration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n\t    \t}\n\n\t    \tthis.offset++\n\t    \tthis.updateVisbility()\n\t    \tthis.dispatchEvent({ type: 'scroll', direction: 'up' })\n    \t}\n  }\n\n  /**\n     * Scroll down\n     * @param  {number} duration - Scroll up duration\n     */\n  PANOLENS.TileGroup.prototype.scrollDown = function (duration) {\n    \tvar tiles = this.tileArray, offset\n\n    \tduration = duration !== undefined ? duration : this.animationDuration\n\n    \toffset = this.offset - 1\n\n    \tif (this.offset > 0 && tiles[ this.offset - 1 ].material.visible) {\n    \t\tfor (var i = 0; i < tiles.length; i++) {\n\t    \t\tnew TWEEN.Tween(tiles[i].position)\n    \t\t\t.to({ y: (i - offset) * -this.v_gap,\n    \t\t\t\t  z: Math.abs(i - offset) * -this.d_gap }, duration)\n    \t\t\t.easing(this.animationEasing)\n    \t\t\t.start()\n\t    \t}\n\n\t    \tthis.offset--\n\t    \tthis.updateVisbility()\n\t    \tthis.dispatchEvent({ type: 'scroll', direction: 'down' })\n    \t}\n  }\n\n  PANOLENS.TileGroup.prototype.reset = function () {\n    \tthis.tileArray.map(function (child, index) {\n    \t\tchild.position.copy(child.originalPosition)\n    \t})\n\n    \tthis.offset = 0\n    \tthis.updateVisbility()\n  }\n\n  /**\n     * Get current index\n     * @return {number} Index of the group. Range from 0 to this.tileArray.length\n     */\n  PANOLENS.TileGroup.prototype.getIndex = function () {\n    \treturn this.offset\n  }\n\n  /**\n     * Get visible tile counts\n     * @return {number} Number of visible tiles\n     */\n  PANOLENS.TileGroup.prototype.getTileCount = function () {\n    \tvar count = 0\n\n    \tthis.tileArray.map(function (tile) {\n    \t\tif (tile.material.visible) {\n    \t\t\tcount++\n    \t\t}\n    \t})\n\n    \treturn count\n  }\n})(); (function () {\n  'use strict'\n\n  var sharedFont, sharedTexture\n  var pendingQueue = []\n\n  /**\n\t * Sprite text based on {@link https://github.com/Jam3/three-bmfont-text}\n\t * @constructor\n\t * @param {string} text     - Text to be displayed\n\t * @param {number} maxWidth\t- Max width\n\t * @param {number} color    - Color in hexadecimal\n\t * @param {number} opacity  - Text opacity\n\t * @param {object} options  - Options to create text geometry\n\t */\n  PANOLENS.SpriteText = function (text, maxWidth, color, opacity, options) {\n    THREE.Object3D.call(this)\n\n    this.text = text || ''\n    this.maxWidth = maxWidth || 2000\n    this.color = color || 0xffffff\n    this.opacity = opacity !== undefined ? opacity : 1\n    this.options = options || {}\n\n    this.animationDuration = 500\n    this.animationFadeOut = undefined\n    this.animationFadeIn = undefined\n    this.tweens = {}\n\n    this.addText(text)\n  }\n\n  PANOLENS.SpriteText.prototype = Object.create(THREE.Object3D.prototype)\n\n  PANOLENS.SpriteText.prototype.constructor = PANOLENS.SpriteText\n\n  // Reference function will be overwritten by Bmfont.js\n  PANOLENS.SpriteText.prototype.generateTextGeometry = function () {}\n  PANOLENS.SpriteText.prototype.generateSDFShader = function () {}\n\n  /**\n\t * Set BMFont\n\t * @param {Function} callback - Callback after font is loaded\n\t * @param {object}   font     - The font to be loaded\n\t * @param {THREE.Texture}   texture  - Font texture\n\t */\n  PANOLENS.SpriteText.prototype.setBMFont = function (callback, font, texture) {\n    texture.needsUpdate = true\n\t  \ttexture.minFilter = THREE.LinearMipMapLinearFilter\n    texture.magFilter = THREE.LinearFilter\n    texture.generateMipmaps = true\n    texture.anisotropy = 8\n\n    sharedFont = font\n    sharedTexture = texture\n\n    for (var i = pendingQueue.length - 1; i >= 0; i--) {\n      pendingQueue[ i ].target.addText(pendingQueue[ i ].text)\n    }\n\n    while (pendingQueue.length > 0) {\n      pendingQueue.pop()\n    }\n\n    callback && callback()\n  }\n\n  /**\n\t * Add text mesh\n\t * @param {string} text - Text to be displayed\n\t */\n  PANOLENS.SpriteText.prototype.addText = function (text) {\n    if (!sharedFont || !sharedTexture) {\n      pendingQueue.push({ target: this, text: text })\n      return\n    }\n\n    var textAnchor = new THREE.Object3D()\n\n    this.options.text = text\n    this.options.font = sharedFont\n    this.options.width = this.maxWidth\n\n    var geometry = this.generateTextGeometry(this.options)\n    geometry.computeBoundingBox()\n    geometry.computeBoundingSphere()\n\n    var material = new THREE.RawShaderMaterial(this.generateSDFShader({\n\t\t    map: sharedTexture,\n\t\t    side: THREE.DoubleSide,\n\t\t    transparent: true,\n\t\t    color: this.color,\n\t\t    opacity: this.opacity\n    }))\n\n    var layout = geometry.layout\n    var textMesh = new THREE.Mesh(geometry, material)\n\n    textMesh.entity = this\n    textMesh.position.x = -layout.width / 2\n    textMesh.position.y = layout.height * 1.035\n\n    textAnchor.scale.x = textAnchor.scale.y = -0.05\n    textAnchor.add(textMesh)\n\n    this.mesh = textMesh\n    this.add(textAnchor)\n  }\n\n  /**\n\t * Update text geometry\n\t * @param  {object} options - Geometry options based on\n\t *  https://github.com/Jam3/three-bmfont-text#geometry--createtextopt\n\t */\n  PANOLENS.SpriteText.prototype.update = function (options) {\n    var mesh\n\n    options = options || {}\n\n    mesh = this.mesh\n\n    mesh.geometry.update(options)\n    mesh.position.x = -mesh.geometry.layout.width / 2\n    mesh.position.y = mesh.geometry.layout.height * 1.035\n  }\n\n  /**\n\t * Create a tween object for animation\n\t * based on - {@link https://github.com/tweenjs/tween.js}\n\t * @param  {string} name       - Name of the tween animation\n\t * @param  {object} object     - Object to be tweened\n\t * @param  {object} toState    - Final state of the object's properties\n\t * @param  {number} duration   - Tweening duration\n\t * @param  {TWEEN.Easing} easing     - Easing function\n\t * @param  {number} delay      - Animation delay time\n\t * @param  {Function} onStart    - On start function\n\t * @param  {Function} onUpdate   - On update function\n\t * @param  {Function} onComplete - On complete function\n\t * @return {TWEEN.Tween}         - Tween object\n\t */\n  PANOLENS.SpriteText.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n    object = object || this\n    toState = toState || {}\n    duration = duration || this.animationDuration\n    easing = easing || TWEEN.Easing.Exponential.Out\n    delay = delay !== undefined ? delay : 0\n    onStart = onStart || null\n    onUpdate = onUpdate || null\n    onComplete = onComplete || null\n\n    if (!this.tweens[name]) {\n      this.tweens[name] = new TWEEN.Tween(object)\n        .to(toState, duration)\n\t        \t.easing(easing)\n\t        \t.delay(delay)\n\t        \t.onStart(onStart)\n\t        \t.onUpdate(onUpdate)\n\t        \t.onComplete(onComplete)\n    }\n\n    return this.tweens[name]\n  }\n\n  /**\n\t * Get geometry layout\n\t * @return {object} Text geometry layout\n\t */\n  PANOLENS.SpriteText.prototype.getLayout = function () {\n    return this.mesh && this.mesh.geometry && this.mesh.geometry.layout || {}\n  }\n\n  /**\n\t * Set entity if multiple objects are considered as one entity\n\t * @param {object} entity - Entity represents whole group structure\n\t */\n  PANOLENS.SpriteText.prototype.setEntity = function (entity) {\n    this.entity = entity\n  }\n})(); (function () {\n  /**\n\t * Widget for controls\n\t * @constructor\n\t * @param {HTMLElement} container - A domElement where default control widget will be attached to\n\t */\n  PANOLENS.Widget = function (container) {\n    THREE.EventDispatcher.call(this)\n\n    this.DEFAULT_TRANSITION = 'all 0.27s ease'\n    this.TOUCH_ENABLED = PANOLENS.Utils.checkTouchSupported()\n    this.PREVENT_EVENT_HANDLER = function (event) {\n      event.preventDefault()\n      event.stopPropagation()\n    }\n\n    this.container = container\n\n    this.barElement\n    this.fullscreenElement\n    this.videoElement\n    this.settingElement\n\n    this.mainMenu\n\n    this.activeMainItem\n    this.activeSubMenu\n    this.mask\n  }\n\n  PANOLENS.Widget.prototype = Object.create(THREE.EventDispatcher.prototype)\n\n  PANOLENS.Widget.prototype.constructor = PANOLENS.Widget\n\n  /**\n\t * Add control bar\n\t */\n  PANOLENS.Widget.prototype.addControlBar = function () {\n    if (!this.container) {\n      console.warn('Widget container not set')\n      return\n    }\n\n    var scope = this, bar, styleTranslate, styleOpacity, gradientStyle\n\n    gradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))'\n\n    bar = document.createElement('div')\n    bar.style.width = '100%'\n    bar.style.height = '44px'\n    bar.style.float = 'left'\n    bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)'\n    bar.style.background = '-webkit-' + gradientStyle\n    bar.style.background = '-moz-' + gradientStyle\n    bar.style.background = '-o-' + gradientStyle\n    bar.style.background = '-ms-' + gradientStyle\n    bar.style.background = gradientStyle\n    bar.style.transition = this.DEFAULT_TRANSITION\n    bar.style.pointerEvents = 'none'\n    bar.isHidden = false\n    bar.toggle = function () {\n      bar.isHidden = !bar.isHidden\n      styleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)'\n      styleOpacity = bar.isHidden ? 0 : 1\n      bar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate\n      bar.style.opacity = styleOpacity\n    }\n\n    // Menu\n    var menu = this.createDefaultMenu()\n    this.mainMenu = this.createMainMenu(menu)\n    bar.appendChild(this.mainMenu)\n\n    // Mask\n    var mask = this.createMask()\n    this.mask = mask\n    this.container.appendChild(mask)\n\n    // Dispose\n    bar.dispose = function () {\n      if (scope.fullscreenElement) {\n        bar.removeChild(scope.fullscreenElement)\n        scope.fullscreenElement.dispose()\n        scope.fullscreenElement = null\n      }\n\n      if (scope.settingElement) {\n        bar.removeChild(scope.settingElement)\n        scope.settingElement.dispose()\n        scope.settingElement = null\n      }\n\n      if (scope.videoElement) {\n        bar.removeChild(scope.videoElement)\n        scope.videoElement.dispose()\n        scope.videoElement = null\n      }\n    }\n\n    this.container.appendChild(bar)\n\n    // Mask events\n    this.mask.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true)\n    this.mask.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true)\n    this.mask.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true)\n    this.mask.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', function (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      scope.mask.hide()\n      scope.settingElement.deactivate()\n    }, false)\n\n    // Event listener\n    this.addEventListener('control-bar-toggle', bar.toggle)\n\n    this.barElement = bar\n  }\n\n  /**\n\t * Create default menu\n\t */\n  PANOLENS.Widget.prototype.createDefaultMenu = function () {\n    var scope = this, handler\n\n    handler = function (method, data) {\n      return function () {\n        scope.dispatchEvent({\n\n          type: 'panolens-viewer-handler',\n          method: method,\n          data: data\n\n        })\n      }\n    }\n\n    return [\n\n      {\n        title: 'Control',\n        subMenu: [\n          {\n            title: this.TOUCH_ENABLED ? 'Touch' : 'Mouse',\n            handler: handler('enableControl', PANOLENS.Controls.ORBIT)\n          },\n          {\n            title: 'Sensor',\n            handler: handler('enableControl', PANOLENS.Controls.DEVICEORIENTATION)\n          }\n        ]\n      },\n\n      {\n        title: 'Mode',\n        subMenu: [\n          {\n            title: 'Normal',\n            handler: handler('disableEffect')\n          },\n          {\n            title: 'Cardboard',\n            handler: handler('enableEffect', PANOLENS.Modes.CARDBOARD)\n          },\n          {\n            title: 'Stereoscopic',\n            handler: handler('enableEffect', PANOLENS.Modes.STEREO)\n          }\n        ]\n      }\n\n    ]\n  }\n\n  /**\n\t * Add buttons on top of control bar\n\t * @param {string} name - The control button name to be created\n\t */\n  PANOLENS.Widget.prototype.addControlButton = function (name) {\n    var element\n\n    switch (name) {\n      case 'fullscreen':\n\n        element = this.createFullscreenButton()\n        this.fullscreenElement = element\n\n        break\n\n      case 'setting':\n\n        element = this.createSettingButton()\n        this.settingElement = element\n\n        break\n\n      case 'video':\n\n        element = this.createVideoControl()\n        this.videoElement = element\n\n        break\n\n      default:\n\n        return\n    }\n\n    if (!element) {\n      return\n    }\n\n    this.barElement.appendChild(element)\n  }\n\n  PANOLENS.Widget.prototype.createMask = function () {\n    var element = document.createElement('div')\n    element.style.position = 'absolute'\n    element.style.top = 0\n    element.style.left = 0\n    element.style.width = '100%'\n    element.style.height = '100%'\n    element.style.background = 'transparent'\n    element.style.display = 'none'\n\n    element.show = function () {\n      this.style.display = 'block'\n    }\n\n    element.hide = function () {\n      this.style.display = 'none'\n    }\n\n    return element\n  }\n\n  /**\n\t * Create Setting button to toggle menu\n\t */\n  PANOLENS.Widget.prototype.createSettingButton = function () {\n    var scope = this, item\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      scope.mainMenu.toggle()\n\n      if (this.activated) {\n        this.deactivate()\n      } else {\n        this.activate()\n      }\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.Setting + '\")',\n        webkitTransition: this.DEFAULT_TRANSITION,\n        transition: this.DEFAULT_TRANSITION\n\n      },\n\n      onTap: onTap\n\n    })\n\n    item.activate = function () {\n      this.style.transform = 'rotate3d(0,0,1,90deg)'\n      this.activated = true\n      scope.mask.show()\n    }\n\n    item.deactivate = function () {\n      this.style.transform = 'rotate3d(0,0,0,0)'\n      this.activated = false\n      scope.mask.hide()\n\n      if (scope.mainMenu && scope.mainMenu.visible) {\n        scope.mainMenu.hide()\n      }\n\n      if (scope.activeSubMenu && scope.activeSubMenu.visible) {\n        scope.activeSubMenu.hide()\n      }\n\n      if (scope.mainMenu && scope.mainMenu._width) {\n        scope.mainMenu.changeSize(scope.mainMenu._width)\n        scope.mainMenu.unslideAll()\n      }\n    }\n\n    item.activated = false\n\n    return item\n  }\n\n  /**\n\t * Create Fullscreen button\n\t * @return {HTMLSpanElement} - The dom element icon for fullscreen\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n  PANOLENS.Widget.prototype.createFullscreenButton = function () {\n    var scope = this, item, isFullscreen = false, tapSkipped = true, stylesheetId\n\n    stylesheetId = 'panolens-style-addon'\n\n    // Don't create button if no support\n    if (!document.fullscreenEnabled &&\n\t\t\t !document.webkitFullscreenEnabled &&\n\t\t\t !document.mozFullScreenEnabled &&\n\t\t\t !document.msFullscreenEnabled) {\n      return\n    }\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      tapSkipped = false\n\n      if (!isFullscreen) {\n\t\t\t    scope.container.requestFullscreen && scope.container.requestFullscreen()\n\t\t\t    scope.container.msRequestFullscreen && scope.container.msRequestFullscreen()\n\t\t\t    scope.container.mozRequestFullScreen && scope.container.mozRequestFullScreen()\n\t\t\t    scope.container.webkitRequestFullscreen && scope.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)\n        isFullscreen = true\n      } else {\n\t\t\t    document.exitFullscreen && document.exitFullscreen()\n\t\t\t    document.msExitFullscreen && document.msExitFullscreen()\n\t\t\t    document.mozCancelFullScreen && document.mozCancelFullScreen()\n\t\t\t    document.webkitExitFullscreen && document.webkitExitFullscreen()\n        isFullscreen = false\n      }\n\n      this.style.backgroundImage = (isFullscreen)\n        ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")'\n        : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n    }\n\n    function onFullScreenChange (e) {\n      if (tapSkipped) {\n        isFullscreen = !isFullscreen\n\n        item.style.backgroundImage = (isFullscreen)\n          ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")'\n          : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n      }\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'onWindowResize' function call on PANOLENS.Viewer\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onWindowResize', data: false })\n\n      tapSkipped = true\n    }\n\n    document.addEventListener('fullscreenchange', onFullScreenChange, false)\n    document.addEventListener('webkitfullscreenchange', onFullScreenChange, false)\n    document.addEventListener('mozfullscreenchange', onFullScreenChange, false)\n    document.addEventListener('MSFullscreenChange', onFullScreenChange, false)\n\n    item = this.createCustomItem({\n\n      style: {\n\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n\n      },\n\n      onTap: onTap\n\n    })\n\n    // Add fullscreen stlye if not exists\n    if (!document.querySelector(stylesheetId)) {\n      var sheet = document.createElement('style')\n      sheet.id = stylesheetId\n      sheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }'\n      document.body.appendChild(sheet)\n    }\n\n    return item\n  }\n\n  /**\n\t * Create video control container\n\t * @return {HTMLSpanElement} - The dom element icon for video control\n\t */\n  PANOLENS.Widget.prototype.createVideoControl = function () {\n    var item\n\n    item = document.createElement('span')\n    item.style.display = 'none'\n    item.show = function () {\n      item.style.display = ''\n    }\n\n    item.hide = function () {\n      item.style.display = 'none'\n      item.controlButton.paused = true\n      item.controlButton.update()\n    }\n\n    item.controlButton = this.createVideoControlButton()\n    item.seekBar = this.createVideoControlSeekbar()\n\n    item.appendChild(item.controlButton)\n    item.appendChild(item.seekBar)\n\n    item.dispose = function () {\n      item.removeChild(item.controlButton)\n      item.removeChild(item.seekBar)\n\n      item.controlButton.dispose()\n      item.controlButton = null\n\n      item.seekBar.dispose()\n      item.seekBar = null\n    }\n\n    this.addEventListener('video-control-show', item.show)\n    this.addEventListener('video-control-hide', item.hide)\n\n    return item\n  }\n\n  /**\n\t * Create video control button\n\t * @return {HTMLSpanElement} - The dom element icon for video control\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n  PANOLENS.Widget.prototype.createVideoControlButton = function () {\n    var scope = this, item\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'toggleVideoPlay' function call on PANOLENS.Viewer\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused })\n\n      this.paused = !this.paused\n\n      item.update()\n    }\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        backgroundImage: 'url(\"' + PANOLENS.DataImage.VideoPlay + '\")'\n\n      },\n\n      onTap: onTap\n\n    })\n\n    item.paused = true\n\n    item.update = function (paused) {\n      this.paused = paused !== undefined ? paused : this.paused\n\n      this.style.backgroundImage = 'url(\"' + (this.paused\n        ? PANOLENS.DataImage.VideoPlay\n        : PANOLENS.DataImage.VideoPause) + '\")'\n    }\n\n    return item\n  }\n\n  /**\n\t * Create video seekbar\n\t * @return {HTMLSpanElement} - The dom element icon for video seekbar\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n  PANOLENS.Widget.prototype.createVideoControlSeekbar = function () {\n    var scope = this, item, progressElement, progressElementControl,\n      isDragging = false, mouseX, percentageNow, percentageNext\n\n    progressElement = document.createElement('div')\n    progressElement.style.width = '0%'\n    progressElement.style.height = '100%'\n    progressElement.style.backgroundColor = '#fff'\n\n    progressElementControl = document.createElement('div')\n    progressElementControl.style.float = 'right'\n    progressElementControl.style.width = '14px'\n    progressElementControl.style.height = '14px'\n    progressElementControl.style.transform = 'translate(7px, -5px)'\n    progressElementControl.style.borderRadius = '50%'\n    progressElementControl.style.backgroundColor = '#ddd'\n\n    progressElementControl.addEventListener('mousedown', onMouseDown, false)\n    progressElementControl.addEventListener('touchstart', onMouseDown, false)\n\n    function onMouseDown (event) {\n      event.stopPropagation()\n\n      isDragging = true\n\n      mouseX = event.clientX || (event.changedTouches && event.changedTouches[0].clientX)\n\n      percentageNow = parseInt(progressElement.style.width) / 100\n\n      addControlListeners()\n    }\n\n    function onVideoControlDrag (event) {\n      var clientX\n\n      if (isDragging) {\n        clientX = event.clientX || (event.changedTouches && event.changedTouches[0].clientX)\n\n        percentageNext = (clientX - mouseX) / item.clientWidth\n\n        percentageNext = percentageNow + percentageNext\n\n        percentageNext = percentageNext > 1 ? 1 : ((percentageNext < 0) ? 0 : percentageNext)\n\n        item.setProgress(percentageNext)\n\n        /**\n\t\t\t\t * Viewer handler event\n\t\t\t\t * @type {object}\n\t\t\t\t * @property {string} method - 'setVideoCurrentTime' function call on PANOLENS.Viewer\n\t\t\t\t * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t\t\t\t */\n        scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext })\n      }\n    }\n\n    function onVideoControlStop (event) {\n      event.stopPropagation()\n\n      isDragging = false\n\n      removeControlListeners()\n    }\n\n    function addControlListeners () {\n      scope.container.addEventListener('mousemove', onVideoControlDrag, false)\n      scope.container.addEventListener('mouseup', onVideoControlStop, false)\n      scope.container.addEventListener('touchmove', onVideoControlDrag, false)\n      scope.container.addEventListener('touchend', onVideoControlStop, false)\n    }\n\n    function removeControlListeners () {\n      scope.container.removeEventListener('mousemove', onVideoControlDrag, false)\n      scope.container.removeEventListener('mouseup', onVideoControlStop, false)\n      scope.container.removeEventListener('touchmove', onVideoControlDrag, false)\n      scope.container.removeEventListener('touchend', onVideoControlStop, false)\n    }\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      var percentage\n\n      if (event.target === progressElementControl) { return }\n\n      percentage = (event.changedTouches && event.changedTouches.length > 0)\n        ? (event.changedTouches[0].pageX - event.target.getBoundingClientRect().left) / this.clientWidth\n        : event.offsetX / this.clientWidth\n\n      /**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'setVideoCurrentTime' function call on PANOLENS.Viewer\n\t\t\t * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t\t\t */\n      scope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage })\n\n      item.setProgress(event.offsetX / this.clientWidth)\n    }\n\n    function onDispose () {\n      removeControlListeners()\n      progressElement = null\n      progressElementControl = null\n    }\n\n    progressElement.appendChild(progressElementControl)\n\n    item = this.createCustomItem({\n\n      style: {\n\n        float: 'left',\n        width: '30%',\n        height: '4px',\n        marginTop: '20px',\n        backgroundColor: 'rgba(188,188,188,0.8)'\n\n      },\n\n      onTap: onTap,\n      onDispose: onDispose\n\n    })\n\n    item.appendChild(progressElement)\n\n    item.setProgress = function (percentage) {\n      progressElement.style.width = percentage * 100 + '%'\n    }\n\n    this.addEventListener('video-update', function (event) {\n      item.setProgress(event.percentage)\n    })\n\n    return item\n  }\n\n  /**\n\t * Create menu item\n\t * @param  {string} title - Title to display\n\t * @return {HTMLDomElement} - An anchor tag element\n\t */\n  PANOLENS.Widget.prototype.createMenuItem = function (title) {\n    var scope = this, item = document.createElement('a')\n    item.textContent = title\n    item.style.display = 'block'\n    item.style.padding = '10px'\n    item.style.textDecoration = 'none'\n    item.style.cursor = 'pointer'\n    item.style.pointerEvents = 'auto'\n    item.style.transition = this.DEFAULT_TRANSITION\n\n    item.slide = function (right) {\n      this.style.transform = 'translateX(' + (right ? '' : '-') + '100%)'\n    }\n\n    item.unslide = function () {\n      this.style.transform = 'translateX(0)'\n    }\n\n    item.setIcon = function (url) {\n      if (this.icon) {\n        this.icon.style.backgroundImage = 'url(' + url + ')'\n      }\n    }\n\n    item.setSelectionTitle = function (title) {\n      if (this.selection) {\n        this.selection.textContent = title\n      }\n    }\n\n    item.addSelection = function (name) {\n      var selection = document.createElement('span')\n      selection.style.fontSize = '13px'\n      selection.style.fontWeight = '300'\n      selection.style.float = 'right'\n\n      this.selection = selection\n      this.setSelectionTitle(name)\n      this.appendChild(selection)\n\n      return this\n    }\n\n    item.addIcon = function (url, left, flip) {\n      url = url || PANOLENS.DataImage.ChevronRight\n      left = left || false\n      flip = flip || false\n\n      var element = document.createElement('span')\n      element.style.float = left ? 'left' : 'right'\n      element.style.width = '17px'\n      element.style.height = '17px'\n      element.style[ 'margin' + (left ? 'Right' : 'Left') ] = '12px'\n      element.style.backgroundSize = 'cover'\n\n      if (flip) {\n        element.style.transform = 'rotateZ(180deg)'\n      }\n\n      this.icon = element\n      this.setIcon(url)\n      this.appendChild(element)\n\n      return this\n    }\n\n    item.addSubMenu = function (title, items) {\n      this.subMenu = scope.createSubMenu(title, items)\n\n      return this\n    }\n\n    item.addEventListener('mouseenter', function () {\n      this.style.backgroundColor = '#e0e0e0'\n    }, false)\n\n    item.addEventListener('mouseleave', function () {\n      this.style.backgroundColor = '#fafafa'\n    }, false)\n\n    return item\n  }\n\n  /**\n\t * Create menu item header\n\t * @param  {string} title - Title to display\n\t * @return {HTMLDomElement} - An anchor tag element\n\t */\n  PANOLENS.Widget.prototype.createMenuItemHeader = function (title) {\n    var header = this.createMenuItem(title)\n\n    header.style.borderBottom = '1px solid #333'\n    header.style.paddingBottom = '15px'\n\n    return header\n  }\n\n  /**\n\t * Create main menu\n\t * @param  {array} menus - Menu array list\n\t * @return {HTMLDomElement} - A span element\n\t */\n  PANOLENS.Widget.prototype.createMainMenu = function (menus) {\n    var scope = this, menu = this.createMenu(), subMenu\n\n    menu._width = 200\n    menu.changeSize(menu._width)\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      var mainMenu = scope.mainMenu, subMenu = this.subMenu\n\n      function onNextTick () {\n        mainMenu.changeSize(subMenu.clientWidth)\n        subMenu.show()\n        subMenu.unslideAll()\n      }\n\n      mainMenu.hide()\n      mainMenu.slideAll()\n      mainMenu.parentElement.appendChild(subMenu)\n\n      scope.activeMainItem = this\n      scope.activeSubMenu = subMenu\n\n      window.requestAnimationFrame(onNextTick)\n    }\n\n    for (var i = 0; i < menus.length; i++) {\n      var item = menu.addItem(menus[ i ].title)\n\n      item.style.paddingLeft = '20px'\n\n      item.addIcon()\n        .addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false)\n\n      if (menus[ i ].subMenu && menus[ i ].subMenu.length > 0) {\n        var title = menus[ i ].subMenu[ 0 ].title\n\n        item.addSelection(title)\n          .addSubMenu(menus[ i ].title, menus[ i ].subMenu)\n      }\n    }\n\n    return menu\n  }\n\n  /**\n\t * Create sub menu\n\t * @param {string} title - Sub menu title\n\t * @param {array} items - Item array list\n\t * @return {HTMLDomElement} - A span element\n\t */\n  PANOLENS.Widget.prototype.createSubMenu = function (title, items) {\n    var scope = this, menu, subMenu = this.createMenu()\n\n    subMenu.items = items\n    subMenu.activeItem\n\n    function onTap (event) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      menu = scope.mainMenu\n      menu.changeSize(menu._width)\n      menu.unslideAll()\n      menu.show()\n      subMenu.slideAll(true)\n      subMenu.hide()\n\n      if (this.type !== 'header') {\n        subMenu.setActiveItem(this)\n        scope.activeMainItem.setSelectionTitle(this.textContent)\n\n        this.handler && this.handler()\n      }\n    }\n\n    subMenu.addHeader(title).addIcon(undefined, true, true).addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false)\n\n    for (var i = 0; i < items.length; i++) {\n      var item = subMenu.addItem(items[ i ].title)\n\n      item.style.fontWeight = 300\n      item.handler = items[ i ].handler\n      item.addIcon(' ', true)\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false)\n\n      if (!subMenu.activeItem) {\n        subMenu.setActiveItem(item)\n      }\n    }\n\n    subMenu.slideAll(true)\n\n    return subMenu\n  }\n\n  /**\n\t * Create general menu\n\t * @return {HTMLDomElement} - A span element\n\t */\n  PANOLENS.Widget.prototype.createMenu = function () {\n    var scope = this, menu = document.createElement('span'), style\n\n    style = menu.style\n\n    style.padding = '5px 0'\n    style.position = 'fixed'\n    style.bottom = '100%'\n    style.right = '14px'\n    style.backgroundColor = '#fafafa'\n    style.fontFamily = 'Helvetica Neue'\n    style.fontSize = '14px'\n    style.visibility = 'hidden'\n    style.opacity = 0\n    style.boxShadow = '0 0 12pt rgba(0,0,0,0.25)'\n  \t\tstyle.borderRadius = '2px'\n    style.overflow = 'hidden'\n    style.willChange = 'width, height, opacity'\n    style.pointerEvents = 'auto'\n    style.transition = this.DEFAULT_TRANSITION\n\n    menu.visible = false\n\n    menu.changeSize = function (width, height) {\n      if (width) {\n        this.style.width = width + 'px'\n      }\n\n      if (height) {\n        this.style.height = height + 'px'\n      }\n    }\n\n    menu.show = function () {\n      this.style.opacity = 1\n      this.style.visibility = 'visible'\n      this.visible = true\n    }\n\n    menu.hide = function () {\n      this.style.opacity = 0\n      this.style.visibility = 'hidden'\n      this.visible = false\n    }\n\n    menu.toggle = function () {\n      if (this.visible) {\n        this.hide()\n      } else {\n        this.show()\n      }\n    }\n\n    menu.slideAll = function (right) {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[ i ].slide) {\n          menu.children[ i ].slide(right)\n        }\n      }\n    }\n\n    menu.unslideAll = function () {\n      for (var i = 0; i < menu.children.length; i++) {\n        if (menu.children[ i ].unslide) {\n          menu.children[ i ].unslide()\n        }\n      }\n    }\n\n    menu.addHeader = function (title) {\n      var header = scope.createMenuItemHeader(title)\n      header.type = 'header'\n\n      this.appendChild(header)\n\n      return header\n    }\n\n    menu.addItem = function (title) {\n      var item = scope.createMenuItem(title)\n      item.type = 'item'\n\n      this.appendChild(item)\n\n      return item\n    }\n\n    menu.setActiveItem = function (item) {\n      if (this.activeItem) {\n        this.activeItem.setIcon(' ')\n      }\n\n      item.setIcon(PANOLENS.DataImage.Check)\n\n      this.activeItem = item\n    }\n\n    menu.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true)\n    menu.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true)\n    menu.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true)\n\n    return menu\n  }\n\n  /**\n\t * Create custom item element\n\t * @return {HTMLSpanElement} - The dom element icon\n\t */\n  PANOLENS.Widget.prototype.createCustomItem = function (options) {\n    options = options || {}\n\n    var scope = this,\n      item = options.element || document.createElement('span')\n\n    item.style.cursor = 'pointer'\n    item.style.float = 'right'\n    item.style.width = '44px'\n    item.style.height = '100%'\n    item.style.backgroundSize = '60%'\n    item.style.backgroundRepeat = 'no-repeat'\n    item.style.backgroundPosition = 'center'\n    item.style.webkitUserSelect =\n\t\titem.style.MozUserSelect =\n\t\titem.style.userSelect = 'none'\n    item.style.position = 'relative'\n    item.style.pointerEvents = 'auto'\n\n    // White glow on icon\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function () {\n      item.style.filter =\n\t\t\titem.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))'\n    })\n    item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function () {\n      item.style.filter =\n\t\t\titem.style.webkitFilter = ''\n    })\n\n    item = this.mergeStyleOptions(item, options.style)\n\n    if (options.onTap) {\n      item.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false)\n    }\n\n    item.dispose = function () {\n      item.removeEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false)\n\n      options.onDispose && options.onDispose()\n    }\n\n    return item\n  }\n\n  /**\n\t * Merge item css style\n\t * @param  {HTMLDOMElement} element - The element to be merged with style\n\t * @param  {object} options - The style options\n\t * @return {HTMLDOMElement} - The same element with merged styles\n\t */\n  PANOLENS.Widget.prototype.mergeStyleOptions = function (element, options) {\n    options = options || {}\n\n    for (var property in options) {\n      if (options.hasOwnProperty(property)) {\n        element.style[ property ] = options[ property ]\n      }\n    }\n\n    return element\n  }\n\n  /**\n\t * Dispose widgets by detaching dom elements from container\n\t */\n  PANOLENS.Widget.prototype.dispose = function () {\n    if (this.barElement) {\n      this.container.removeChild(this.barElement)\n      this.barElement.dispose()\n      this.barElement = null\n    }\n  }\n})(); (function () {\n  /**\n\t * Information spot attached to panorama\n\t * @constructor\n\t * @param {number} [scale=300] - Infospot scale\n\t * @param {imageSrc} [imageSrc=PANOLENS.DataImage.Info] - Image overlay info\n\t * @param {boolean} [animated=true] - Enable default hover animation\n\t */\n  PANOLENS.Infospot = function (scale, imageSrc, animated) {\n    var scope = this, ratio, startScale, endScale, duration\n\n    scale = scale || 300\n    imageSrc = imageSrc || PANOLENS.DataImage.Info\n    duration = 500\n\n    THREE.Sprite.call(this)\n\n    this.type = 'infospot'\n\n    this.animated = animated !== undefined ? animated : true\n    this.isHovering = false\n    this.visible = false\n\n    this.element\n    this.toPanorama\n    this.cursorStyle\n\n    this.mode = PANOLENS.Modes.UNKNOWN\n\n    this.scale.set(scale, scale, 1)\n    this.rotation.y = Math.PI\n    this.scaleFactor = 1.3\n\n    this.container\n\n    // Event Handler\n    this.HANDLER_FOCUS\n\n    PANOLENS.Utils.TextureLoader.load(imageSrc, postLoad)\n\n    function postLoad (texture) {\n      texture.wrapS = THREE.RepeatWrapping\n      texture.repeat.x = -1\n\n      texture.image.width = texture.image.naturalWidth || 64\n      texture.image.height = texture.image.naturalHeight || 64\n\n      ratio = texture.image.width / texture.image.height\n      scope.scale.set(ratio * scale, scale, 1)\n\n      startScale = scope.scale.clone()\n\n      scope.scaleUpAnimation = new TWEEN.Tween(scope.scale)\n        .to({ x: startScale.x * scope.scaleFactor, y: startScale.y * scope.scaleFactor }, duration)\n        .easing(TWEEN.Easing.Elastic.Out)\n\n      scope.scaleDownAnimation = new TWEEN.Tween(scope.scale)\n        .to({ x: startScale.x, y: startScale.y }, duration)\n        .easing(TWEEN.Easing.Elastic.Out)\n\n      scope.material.side = THREE.DoubleSide\n      scope.material.map = texture\n      scope.material.depthTest = false\n      scope.material.needsUpdate = true\n    }\n\n    function show () {\n      this.visible = true\n    }\n\n    function hide () {\n      this.visible = false\n    }\n\n    // Add show and hide animations\n    this.showAnimation = new TWEEN.Tween(this.material)\n      .to({ opacity: 1 }, duration)\n      .onStart(show.bind(this))\n      .easing(TWEEN.Easing.Quartic.Out)\n\n    this.hideAnimation = new TWEEN.Tween(this.material)\n      .to({ opacity: 0 }, duration)\n      .onComplete(hide.bind(this))\n      .easing(TWEEN.Easing.Quartic.Out)\n\n    // Attach event listeners\n    this.addEventListener('click', this.onClick)\n    this.addEventListener('hover', this.onHover)\n    this.addEventListener('hoverenter', this.onHoverStart)\n    this.addEventListener('hoverleave', this.onHoverEnd)\n    this.addEventListener('panolens-dual-eye-effect', this.onDualEyeEffect)\n    this.addEventListener('panolens-container', this.setContainer.bind(this))\n    this.addEventListener('dismiss', this.onDismiss)\n    this.addEventListener('panolens-infospot-focus', this.setFocusMethod)\n  }\n\n  PANOLENS.Infospot.prototype = Object.create(THREE.Sprite.prototype)\n\n  /**\n\t * Set infospot container\n\t * @param {HTMLElement|object} data - Data with container information\n\t */\n  PANOLENS.Infospot.prototype.setContainer = function (data) {\n    var container\n\n    if (data instanceof HTMLElement) {\n      container = data\n    } else if (data && data.container) {\n      container = data.container\n    }\n\n    // Append element if exists\n    if (container && this.element) {\n      container.appendChild(this.element)\n    }\n\n    this.container = container\n  }\n\n  /**\n\t * Get container\n\t * @return {HTMLElement} - The container of this infospot\n\t */\n  PANOLENS.Infospot.prototype.getContainer = function () {\n    return this.container\n  }\n\n  /**\n\t * This will be called by a click event\n\t * Translate and lock the hovering element if any\n\t * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t */\n  PANOLENS.Infospot.prototype.onClick = function (event) {\n    if (this.element && this.getContainer()) {\n      this.onHoverStart(event)\n\n      // Lock element\n      this.lockHoverElement()\n    }\n  }\n\n  /**\n\t * Dismiss current element if any\n\t * @param  {object} event - Dismiss event\n\t */\n  PANOLENS.Infospot.prototype.onDismiss = function (event) {\n    if (this.element) {\n      this.unlockHoverElement()\n      this.onHoverEnd()\n    }\n  }\n\n  /**\n\t * This will be called by a mouse hover event\n\t * Translate the hovering element if any\n\t * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t */\n  PANOLENS.Infospot.prototype.onHover = function (event) {\n\n  }\n\n  /**\n\t * This will be called on a mouse hover start\n\t * Sets cursor style to 'pointer', display the element and scale up the infospot\n\t */\n  PANOLENS.Infospot.prototype.onHoverStart = function (event) {\n    if (!this.getContainer()) { return }\n\n    var cursorStyle = this.cursorStyle || (this.mode === PANOLENS.Modes.NORMAL ? 'pointer' : 'default')\n\n    this.isHovering = true\n    this.container.style.cursor = cursorStyle\n\n    if (this.animated) {\n      this.scaleDownAnimation && this.scaleDownAnimation.stop()\n      this.scaleUpAnimation && this.scaleUpAnimation.start()\n    }\n\n    if (this.element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0) {\n      if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n        this.element.style.display = 'none'\n        this.element.left && (this.element.left.style.display = 'block')\n        this.element.right && (this.element.right.style.display = 'block')\n\n        // Store element width for reference\n        this.element._width = this.element.left.clientWidth\n        this.element._height = this.element.left.clientHeight\n      } else {\n        this.element.style.display = 'block'\n        this.element.left && (this.element.left.style.display = 'none')\n        this.element.right && (this.element.right.style.display = 'none')\n\n        // Store element width for reference\n        this.element._width = this.element.clientWidth\n        this.element._height = this.element.clientHeight\n      }\n    }\n  }\n\n  /**\n\t * This will be called on a mouse hover end\n\t * Sets cursor style to 'default', hide the element and scale down the infospot\n\t */\n  PANOLENS.Infospot.prototype.onHoverEnd = function () {\n    if (!this.getContainer()) { return }\n\n    this.isHovering = false\n    this.container.style.cursor = 'default'\n\n    if (this.animated) {\n      this.scaleUpAnimation && this.scaleUpAnimation.stop()\n      this.scaleDownAnimation && this.scaleDownAnimation.start()\n    }\n\n    if (this.element && !this.element.locked) {\n      this.element.style.display = 'none'\n      this.element.left && (this.element.left.style.display = 'none')\n      this.element.right && (this.element.right.style.display = 'none')\n\n      this.unlockHoverElement()\n    }\n  }\n\n  /**\n\t * On dual eye effect handler\n\t * Creates duplicate left and right element\n\t * @param  {object} event - panolens-dual-eye-effect event\n\t */\n  PANOLENS.Infospot.prototype.onDualEyeEffect = function (event) {\n    if (!this.getContainer()) { return }\n\n    var element, halfWidth, halfHeight\n\n    this.mode = event.mode\n\n    element = this.element\n\n    halfWidth = this.container.clientWidth / 2\n    halfHeight = this.container.clientHeight / 2\n\n    if (!element) {\n      return\n    }\n\n    if (!element.left || !element.right) {\n      element.left = element.cloneNode(true)\n      element.right = element.cloneNode(true)\n    }\n\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      element.left.style.display = element.style.display\n      element.right.style.display = element.style.display\n      element.style.display = 'none'\n    } else {\n      element.style.display = element.left.style.display\n      element.left.style.display = 'none'\n      element.right.style.display = 'none'\n    }\n\n    // Update elements translation\n    this.translateElement(halfWidth, halfHeight)\n\n    this.container.appendChild(element.left)\n    this.container.appendChild(element.right)\n  }\n\n  /**\n\t * Translate the hovering element by css transform\n\t * @param  {number} x - X position on the window screen\n\t * @param  {number} y - Y position on the window screen\n\t */\n  PANOLENS.Infospot.prototype.translateElement = function (x, y) {\n    if (!this.element._width || !this.element._height || !this.getContainer()) {\n      return\n    }\n\n    var left, top, element, width, height, delta, container\n\n    container = this.container\n    element = this.element\n    width = element._width / 2\n    height = element._height / 2\n    delta = element.verticalDelta !== undefined ? element.verticalDelta : 40\n\n    left = x - width\n    top = y - height - delta\n\n    if ((this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) &&\n\t\t\t\telement.left && element.right &&\n\t\t\t\t!(x === container.clientWidth / 2 && y === container.clientHeight / 2)) {\n      left = container.clientWidth / 4 - width + (x - container.clientWidth / 2)\n      top = container.clientHeight / 2 - height - delta + (y - container.clientHeight / 2)\n\n      this.setElementStyle('transform', element.left, 'translate(' + left + 'px, ' + top + 'px)')\n\n      left += container.clientWidth / 2\n\n      this.setElementStyle('transform', element.right, 'translate(' + left + 'px, ' + top + 'px)')\n    } else {\n      this.setElementStyle('transform', element, 'translate(' + left + 'px, ' + top + 'px)')\n    }\n  }\n\n  /**\n\t * Set vendor specific css\n\t * @param {string} type - CSS style name\n\t * @param {HTMLElement} element - The element to be modified\n\t * @param {string} value - Style value\n\t */\n  PANOLENS.Infospot.prototype.setElementStyle = function (type, element, value) {\n    var style = element.style\n\n    if (type === 'transform') {\n      style.webkitTransform = style.msTransform = style.transform = value\n    }\n  }\n\n  /**\n\t * Set hovering text content\n\t * @param {string} text - Text to be displayed\n\t */\n  PANOLENS.Infospot.prototype.setText = function (text) {\n    if (this.element) {\n      this.element.textContent = text\n    }\n  }\n\n  /**\n\t * Set cursor css style on hover\n\t */\n  PANOLENS.Infospot.prototype.setCursorHoverStyle = function (style) {\n    this.cursorStyle = style\n  }\n\n  /**\n\t * Add hovering text element\n\t * @param {string} text - Text to be displayed\n\t * @param {number} [delta=40] - Vertical delta to the infospot\n\t */\n  PANOLENS.Infospot.prototype.addHoverText = function (text, delta) {\n    if (!this.element) {\n      this.element = document.createElement('div')\n      this.element.style.display = 'none'\n      this.element.style.color = '#fff'\n      this.element.style.top = 0\n      this.element.style.maxWidth = '50%'\n      this.element.style.maxHeight = '50%'\n      this.element.style.textShadow = '0 0 3px #000000'\n      this.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif'\n      this.element.style.position = 'absolute'\n      this.element.classList.add('panolens-infospot')\n      this.element.verticalDelta = delta !== undefined ? delta : 40\n    }\n\n    this.setText(text)\n  }\n\n  /**\n\t * Add hovering element by cloning an element\n\t * @param {HTMLDOMElement} el - Element to be cloned and displayed\n\t * @param {number} [delta=40] - Vertical delta to the infospot\n\t */\n  PANOLENS.Infospot.prototype.addHoverElement = function (el, delta) {\n    if (!this.element) {\n      this.element = el.cloneNode(true)\n      this.element.style.display = 'none'\n      this.element.style.top = 0\n      this.element.style.position = 'absolute'\n      this.element.classList.add('panolens-infospot')\n      this.element.verticalDelta = delta !== undefined ? delta : 40\n    }\n  }\n\n  /**\n\t * Remove hovering element\n\t */\n  PANOLENS.Infospot.prototype.removeHoverElement = function () {\n    if (this.element) {\n      if (this.element.left) {\n        this.container.removeChild(this.element.left)\n        this.element.left = null\n      }\n\n      if (this.element.right) {\n        this.container.removeChild(this.element.right)\n        this.element.right = null\n      }\n\n      this.container.removeChild(this.element)\n      this.element = null\n    }\n  }\n\n  /**\n\t * Lock hovering element\n\t */\n  PANOLENS.Infospot.prototype.lockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = true\n    }\n  }\n\n  /**\n\t * Unlock hovering element\n\t */\n  PANOLENS.Infospot.prototype.unlockHoverElement = function () {\n    if (this.element) {\n      this.element.locked = false\n    }\n  }\n\n  /**\n\t * Show infospot\n\t * @param  {number} [delay=0] - Delay time to show\n\t */\n  PANOLENS.Infospot.prototype.show = function (delay) {\n    delay = delay || 0\n\n    if (this.animated) {\n      this.hideAnimation && this.hideAnimation.stop()\n      this.showAnimation && this.showAnimation.delay(delay).start()\n    }\n  }\n\n  /**\n\t * Hide infospot\n\t * @param  {number} [delay=0] - Delay time to hide\n\t */\n  PANOLENS.Infospot.prototype.hide = function (delay) {\n    delay = delay || 0\n\n    if (this.animated) {\n      this.showAnimation && this.showAnimation.stop()\n      this.hideAnimation && this.hideAnimation.delay(delay).start()\n    }\n  }\n\n  /**\n\t * Set focus event handler\n\t */\n  PANOLENS.Infospot.prototype.setFocusMethod = function (event) {\n    if (event) {\n      this.HANDLER_FOCUS = event.method\n    }\n  }\n\n  /**\n\t * Focus camera center to this infospot\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n  PANOLENS.Infospot.prototype.focus = function (duration, easing) {\n    if (this.HANDLER_FOCUS) {\n      this.HANDLER_FOCUS(this.position, duration, easing)\n      this.onDismiss()\n    }\n  }\n\n  /**\n\t * Dispose infospot\n\t */\n  PANOLENS.Infospot.prototype.dispose = function () {\n    this.removeHoverElement()\n    this.material.dispose()\n\n    if (this.parent) {\n      this.parent.remove(this)\n    }\n  }\n})(); (function () {\n  'use strict'\n\n  /**\n\t * Viewer contains pre-defined scene, camera and renderer\n\t * @constructor\n\t * @param {object} [options] - Use custom or default config options\n\t * @param {HTMLElement} [options.container] - A HTMLElement to host the canvas\n\t * @param {THREE.Scene} [options.scene=THREE.Scene] - A THREE.Scene which contains panorama and 3D objects\n\t * @param {THREE.Camera} [options.camera=THREE.PerspectiveCamera] - A THREE.Camera to view the scene\n\t * @param {THREE.WebGLRenderer} [options.renderer=THREE.WebGLRenderer] - A THREE.WebGLRenderer to render canvas\n\t * @param {boolean} [options.controlBar=true] - Show/hide control bar on the bottom of the container\n\t * @param {array}   [options.controlButtons=[]] - Button names to mount on controlBar if controlBar exists, Defaults to ['fullscreen', 'setting', 'video']\n\t * @param {boolean} [options.autoHideControlBar=false] - Auto hide control bar when click on non-active area\n\t * @param {boolean} [options.autoHideInfospot=true] - Auto hide infospots when click on non-active area\n\t * @param {boolean} [options.horizontalView=false] - Allow only horizontal camera control\n\t * @param {number}  [options.clickTolerance=10] - Distance tolerance to tigger click / tap event\n\t * @param {number}  [options.cameraFov=60] - Camera field of view value\n\t * @param {boolean} [options.reverseDragging=false] - Reverse dragging direction\n\t * @param {boolean} [options.enableReticle=false] - Enable reticle for mouseless interaction other than VR mode\n\t * @param {number}  [options.dwellTime=1500] - Dwell time for reticle selection\n\t * @param {boolean} [options.autoReticleSelect=true] - Auto select a clickable target after dwellTime\n\t * @param {boolean} [options.viewIndicator=false] - Adds an angle view indicator in upper left corner\n\t * @param {number}  [options.indicatorSize=30] - Size of View Indicator\n\t * @param {string}  [options.output='none'] - Whether and where to output raycast position. Could be 'console' or 'overlay'\n\t */\n  PANOLENS.Viewer = function (options) {\n    THREE.EventDispatcher.call(this)\n\n    if (!THREE) {\n      console.error('Three.JS not found')\n\n      return\n    }\n\n    var container\n\n    options = options || {}\n    options.controlBar = options.controlBar !== undefined ? options.controlBar : true\n    options.controlButtons = options.controlButtons || [ 'fullscreen', 'setting', 'video' ]\n    options.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false\n    options.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true\n    options.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false\n    options.clickTolerance = options.clickTolerance || 10\n    options.cameraFov = options.cameraFov || 60\n    options.reverseDragging = options.reverseDragging || false\n    options.enableReticle = options.enableReticle || false\n    options.dwellTime = options.dwellTime || 1500\n    options.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true\n    options.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false\n    options.indicatorSize = options.indicatorSize || 30\n    options.output = options.output ? options.output : 'none'\n\n    this.options = options\n\n    // Container\n    if (options.container) {\n      container = options.container\n      container._width = container.clientWidth\n      container._height = container.clientHeight\n    } else {\n      container = document.createElement('div')\n      container.classList.add('panolens-container')\n      container.style.width = '100%'\n      container.style.height = '100%'\n      container._width = window.innerWidth\n      container._height = window.innerHeight\n      document.body.appendChild(container)\n    }\n\n    this.container = container\n\n    this.camera = options.camera || new THREE.PerspectiveCamera(this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 10000)\n    this.scene = options.scene || new THREE.Scene()\n    this.renderer = options.renderer || new THREE.WebGLRenderer({ alpha: true, antialias: false })\n\n    this.viewIndicatorSize = options.indicatorSize\n\n    this.reticle = {}\n    this.tempEnableReticle = this.options.enableReticle\n\n    this.mode = PANOLENS.Modes.NORMAL\n\n    this.OrbitControls\n    this.DeviceOrientationControls\n\n    this.CardboardEffect\n    this.StereoEffect\n\n    this.controls\n    this.effect\n    this.panorama\n    this.widget\n\n    this.hoverObject\n    this.infospot\n    this.pressEntityObject\n    this.pressObject\n\n    this.raycaster = new THREE.Raycaster()\n    this.raycasterPoint = new THREE.Vector2()\n    this.userMouse = new THREE.Vector2()\n    this.updateCallbacks = []\n    this.requestAnimationId\n\n    this.cameraFrustum = new THREE.Frustum()\n    this.cameraViewProjectionMatrix = new THREE.Matrix4()\n\n    this.outputDivElement\n\n    // Handler references\n    this.HANDLER_MOUSE_DOWN = this.onMouseDown.bind(this)\n    this.HANDLER_MOUSE_UP = this.onMouseUp.bind(this)\n    this.HANDLER_MOUSE_MOVE = this.onMouseMove.bind(this)\n    this.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind(this)\n    this.HANDLER_KEY_DOWN = this.onKeyDown.bind(this)\n    this.HANDLER_KEY_UP = this.onKeyUp.bind(this)\n    this.HANDLER_TAP = this.onTap.bind(this, {\n      clientX: this.container.clientWidth / 2,\n      clientY: this.container.clientHeight / 2\n    })\n\n    // Flag for infospot output\n    this.OUTPUT_INFOSPOT = false\n\n    // Animations\n    this.tweenLeftAnimation = new TWEEN.Tween()\n    this.tweenUpAnimation = new TWEEN.Tween()\n\n    // Renderer\n    this.renderer.setPixelRatio(window.devicePixelRatio)\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight)\n    this.renderer.setClearColor(0x000000, 1)\n    this.renderer.sortObjects = false\n\n    // Append Renderer Element to container\n    this.renderer.domElement.classList.add('panolens-canvas')\n    this.renderer.domElement.style.display = 'block'\n    this.container.style.backgroundColor = '#000'\n    this.container.appendChild(this.renderer.domElement)\n\n    // Camera Controls\n    this.OrbitControls = new THREE.OrbitControls(this.camera, this.container)\n    this.OrbitControls.name = 'orbit'\n    this.OrbitControls.minDistance = 1\n    this.OrbitControls.noPan = true\n    this.DeviceOrientationControls = new THREE.DeviceOrientationControls(this.camera, this.container)\n    this.DeviceOrientationControls.name = 'device-orientation'\n    this.DeviceOrientationControls.enabled = false\n    this.camera.position.z = 1\n\n    // Register change event if passiveRenering\n    if (this.options.passiveRendering) {\n      console.warn('passiveRendering is now deprecated')\n    }\n\n    // Controls\n    this.controls = [ this.OrbitControls, this.DeviceOrientationControls ]\n    this.control = this.OrbitControls\n\n    // Cardboard effect\n    this.CardboardEffect = new THREE.CardboardEffect(this.renderer)\n    this.CardboardEffect.setSize(this.container.clientWidth, this.container.clientHeight)\n\n    // Stereo effect\n    this.StereoEffect = new THREE.StereoEffect(this.renderer)\n    this.StereoEffect.setSize(this.container.clientWidth, this.container.clientHeight)\n\n    this.effect = this.CardboardEffect\n\n    // Add default hidden reticle\n    this.addReticle()\n\n    // Lock horizontal view\n    if (this.options.horizontalView) {\n      this.OrbitControls.minPolarAngle = Math.PI / 2\n      this.OrbitControls.maxPolarAngle = Math.PI / 2\n    }\n\n    // Add Control UI\n    if (this.options.controlBar !== false) {\n      this.addDefaultControlBar(this.options.controlButtons)\n    }\n\n    // Add View Indicator\n    if (this.options.viewIndicator) {\n      this.addViewIndicator()\n    }\n\n    // Reverse dragging direction\n    if (this.options.reverseDragging) {\n      this.reverseDraggingDirection()\n    }\n\n    // Register event if reticle is enabled, otherwise defaults to mouse\n    if (this.options.enableReticle) {\n      this.enableReticleControl()\n    } else {\n      this.registerMouseAndTouchEvents()\n    }\n\n    if (this.options.output === 'overlay') {\n      this.addOutputElement()\n    }\n\n    // Register dom event listeners\n    this.registerEventListeners()\n\n    // Animate\n    this.animate.call(this)\n  }\n\n  PANOLENS.Viewer.prototype = Object.create(THREE.EventDispatcher.prototype)\n\n  PANOLENS.Viewer.prototype.constructor = PANOLENS.Viewer\n\n  /**\n\t * Add an object to the scene\n\t * Automatically hookup with panolens-viewer-handler listener\n\t * to communicate with viewer method\n\t * @param {THREE.Object3D} object - The object to be added\n\t */\n  PANOLENS.Viewer.prototype.add = function (object) {\n    if (arguments.length > 1) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.add(arguments[ i ])\n      }\n\n      return this\n    }\n\n    this.scene.add(object)\n\n    // All object added to scene has 'panolens-viewer-handler' event to handle viewer communication\n    if (object.addEventListener) {\n      object.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this))\n    }\n\n    // All object added to scene being passed with container\n    if (object instanceof PANOLENS.Panorama && object.dispatchEvent) {\n      object.dispatchEvent({ type: 'panolens-container', container: this.container })\n    }\n\n    // Hookup default panorama event listeners\n    if (object.type === 'panorama') {\n      this.addPanoramaEventListener(object)\n\n      if (!this.panorama) {\n        this.setPanorama(object)\n      }\n    }\n  }\n\n  /**\n\t * Remove an object from the scene\n\t * @param  {THREE.Object3D} object - Object to be removed\n\t */\n  PANOLENS.Viewer.prototype.remove = function (object) {\n    if (object.removeEventListener) {\n      object.removeEventListener('panolens-viewer-handler', this.eventHandler.bind(this))\n    }\n\n    this.scene.remove(object)\n  }\n\n  /**\n\t * Add default control bar\n\t * @param {array} array - The control buttons array\n\t */\n  PANOLENS.Viewer.prototype.addDefaultControlBar = function (array) {\n    var scope = this\n\n    if (this.widget) {\n      console.warn('Default control bar exists')\n      return\n    }\n\n    this.widget = new PANOLENS.Widget(this.container)\n    this.widget.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this))\n    this.widget.addControlBar()\n    array.forEach(function (buttonName) {\n      scope.widget.addControlButton(buttonName)\n    })\n  }\n\n  /**\n\t * Set a panorama to be the current one\n\t * @param {PANOLENS.Panorama} pano - Panorama to be set\n\t */\n  PANOLENS.Viewer.prototype.setPanorama = function (pano) {\n    var scope = this, leavingPanorama = this.panorama\n\n    if (pano.type === 'panorama' && leavingPanorama !== pano) {\n      // Clear exisiting infospot\n      this.hideInfospot()\n\n      var afterEnterComplete = function () {\n        leavingPanorama && leavingPanorama.onLeave()\n        pano.removeEventListener('enter-fade-start', afterEnterComplete)\n      }\n\n      pano.addEventListener('enter-fade-start', afterEnterComplete);\n\n      // Assign and enter panorama\n      (this.panorama = pano).onEnter()\n    }\n  }\n\n  /**\n\t * Event handler to execute commands from child objects\n\t * @param {object} event - The dispatched event with method as function name and data as an argument\n\t */\n  PANOLENS.Viewer.prototype.eventHandler = function (event) {\n    if (event.method && this[ event.method ]) {\n      this[ event.method ](event.data)\n    }\n  }\n\n  /**\n\t * Dispatch event to all descendants\n\t * @param  {object} event - Event to be passed along\n\t */\n  PANOLENS.Viewer.prototype.dispatchEventToChildren = function (event) {\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent(event)\n      }\n    })\n  }\n\n  /**\n\t * Set widget content\n\t * @param  {integer} controlIndex - Control index\n\t * @param  {PANOLENS.Modes} mode - Modes for effects\n\t */\n  PANOLENS.Viewer.prototype.activateWidgetItem = function (controlIndex, mode) {\n    var mainMenu = this.widget.mainMenu\n    var ControlMenuItem = mainMenu.children[ 0 ]\n    var ModeMenuItem = mainMenu.children[ 1 ]\n\n    var item\n\n    if (controlIndex !== undefined) {\n      switch (controlIndex) {\n        case 0:\n\n          item = ControlMenuItem.subMenu.children[ 1 ]\n\n          break\n\n        case 1:\n\n          item = ControlMenuItem.subMenu.children[ 2 ]\n\n          break\n\n        default:\n\n          item = ControlMenuItem.subMenu.children[ 1 ]\n\n          break\n      }\n\n      ControlMenuItem.subMenu.setActiveItem(item)\n      ControlMenuItem.setSelectionTitle(item.textContent)\n    }\n\n    if (mode !== undefined) {\n      switch (mode) {\n        case PANOLENS.Modes.CARDBOARD:\n\n          item = ModeMenuItem.subMenu.children[ 2 ]\n\n          break\n\n        case PANOLENS.Modes.STEREO:\n\n          item = ModeMenuItem.subMenu.children[ 3 ]\n\n          break\n\n        default:\n\n          item = ModeMenuItem.subMenu.children[ 1 ]\n\n          break\n      }\n\n      ModeMenuItem.subMenu.setActiveItem(item)\n      ModeMenuItem.setSelectionTitle(item.textContent)\n    }\n  }\n\n  /**\n\t * Enable rendering effect\n\t * @param  {PANOLENS.Modes} mode - Modes for effects\n\t */\n  PANOLENS.Viewer.prototype.enableEffect = function (mode) {\n    if (this.mode === mode) { return }\n    if (mode === PANOLENS.Modes.NORMAL) { this.disableEffect(); return } else { this.mode = mode }\n\n    var fov = this.camera.fov\n\n    switch (mode) {\n      case PANOLENS.Modes.CARDBOARD:\n\n        this.effect = this.CardboardEffect\n        this.enableReticleControl()\n\n        break\n\n      case PANOLENS.Modes.STEREO:\n\n        this.effect = this.StereoEffect\n        this.enableReticleControl()\n\n        break\n\n      default:\n\n        this.effect = null\n        this.disableReticleControl()\n\n        break\n    }\n\n    this.activateWidgetItem(undefined, this.mode)\n\n    /**\n\t\t * Dual eye effect event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#panolens-dual-eye-effect\n\t\t * @event PANOLENS.Infospot#panolens-dual-eye-effect\n\t\t * @property {PANOLENS.Modes} mode - Current display mode\n\t\t */\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode })\n\n    // Force effect stereo camera to update by refreshing fov\n    this.camera.fov = fov + 10e-3\n    this.effect.setSize(this.container.clientWidth, this.container.clientHeight)\n    this.render()\n    this.camera.fov = fov\n  }\n\n  /**\n\t * Disable additional rendering effect\n\t */\n  PANOLENS.Viewer.prototype.disableEffect = function () {\n    if (this.mode === PANOLENS.Modes.NORMAL) { return }\n\n    this.mode = PANOLENS.Modes.NORMAL\n    this.disableReticleControl()\n\n    this.activateWidgetItem(undefined, this.mode)\n\n    /**\n\t\t * Dual eye effect event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#panolens-dual-eye-effect\n\t\t * @event PANOLENS.Infospot#panolens-dual-eye-effect\n\t\t * @property {PANOLENS.Modes} mode - Current display mode\n\t\t */\n    this.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode })\n\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight)\n    this.render()\n  }\n\n  /**\n\t * Enable reticle control\n\t */\n  PANOLENS.Viewer.prototype.enableReticleControl = function () {\n    if (this.reticle.visible) { return }\n    if (!this.reticle.textureLoaded) { this.reticle.loadTextures() }\n\n    this.tempEnableReticle = true\n\n    // Register reticle event and unregister mouse event\n    this.unregisterMouseAndTouchEvents()\n    this.reticle.show()\n    this.registerReticleEvent()\n    this.updateReticleEvent()\n  }\n\n  /**\n\t * Disable reticle control\n\t */\n  PANOLENS.Viewer.prototype.disableReticleControl = function () {\n    this.tempEnableReticle = false\n\n    // Register mouse event and unregister reticle event\n    if (!this.options.enableReticle) {\n      this.reticle.hide()\n      this.unregisterReticleEvent()\n      this.registerMouseAndTouchEvents()\n    } else {\n      this.updateReticleEvent()\n    }\n  }\n\n  /**\n\t * Toggle video play or stop\n\t * @fires PANOLENS.Viewer#video-toggle\n\t */\n  PANOLENS.Viewer.prototype.toggleVideoPlay = function (pause) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      /**\n\t\t\t * Toggle video event\n\t\t\t * @type {object}\n\t\t\t * @event PANOLENS.Viewer#video-toggle\n\t\t\t */\n      this.panorama.dispatchEvent({ type: 'video-toggle', pause: pause })\n    }\n  }\n\n  /**\n\t * Set currentTime in a video\n\t * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t * @fires PANOLENS.Viewer#video-time\n\t */\n  PANOLENS.Viewer.prototype.setVideoCurrentTime = function (percentage) {\n    if (this.panorama instanceof PANOLENS.VideoPanorama) {\n      /**\n\t\t\t * Setting video time event\n\t\t\t * @type {object}\n\t\t\t * @event PANOLENS.Viewer#video-time\n\t\t\t * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t\t\t */\n      this.panorama.dispatchEvent({ type: 'video-time', percentage: percentage })\n    }\n  }\n\n  /**\n\t * This will be called when video updates if an widget is present\n\t * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t * @fires PANOLENS.Viewer#video-update\n\t */\n  PANOLENS.Viewer.prototype.onVideoUpdate = function (percentage) {\n    /**\n\t\t * Video update event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-update\n\t\t * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'video-update', percentage: percentage })\n  }\n\n  /**\n\t * Add update callback to be called every animation frame\n\t */\n  PANOLENS.Viewer.prototype.addUpdateCallback = function (fn) {\n    if (fn) {\n      this.updateCallbacks.push(fn)\n    }\n  }\n\n  /**\n\t * Remove update callback\n\t * @param  {Function} fn - The function to be removed\n\t */\n  PANOLENS.Viewer.prototype.removeUpdateCallback = function (fn) {\n    var index = this.updateCallbacks.indexOf(fn)\n\n    if (fn && index >= 0) {\n      this.updateCallbacks.splice(index, 1)\n    }\n  }\n\n  /**\n\t * Show video widget\n\t */\n  PANOLENS.Viewer.prototype.showVideoWidget = function () {\n    /**\n\t\t * Show video widget event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-control-show\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-show' })\n  }\n\n  /**\n\t * Hide video widget\n\t */\n  PANOLENS.Viewer.prototype.hideVideoWidget = function () {\n    /**\n\t\t * Hide video widget\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-control-hide\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'video-control-hide' })\n  }\n\n  PANOLENS.Viewer.prototype.updateVideoPlayButton = function (paused) {\n    if (this.widget &&\n\t\t\t this.widget.videoElement &&\n\t\t\t this.widget.videoElement.controlButton) {\n      this.widget.videoElement.controlButton.update(paused)\n    }\n  }\n\n  /**\n\t * Add default panorama event listeners\n\t * @param {PANOLENS.Panorama} pano - The panorama to be added with event listener\n\t */\n  PANOLENS.Viewer.prototype.addPanoramaEventListener = function (pano) {\n    var scope = this\n\n    // Set camera control on every panorama\n    pano.addEventListener('enter-fade-start', this.setCameraControl.bind(this))\n\n    // Show and hide widget event only when it's PANOLENS.VideoPanorama\n    if (pano instanceof PANOLENS.VideoPanorama) {\n      pano.addEventListener('enter-fade-start', this.showVideoWidget.bind(this))\n      pano.addEventListener('leave', function () {\n        if (!(this.panorama instanceof PANOLENS.VideoPanorama)) {\n          this.hideVideoWidget.call(this)\n        }\n      }.bind(this))\n    }\n  }\n\n  /**\n\t * Set camera control\n\t */\n  PANOLENS.Viewer.prototype.setCameraControl = function () {\n    this.OrbitControls.target.copy(this.panorama.position)\n  }\n\n  /**\n\t * Get current camera control\n\t * @return {object} - Current navigation control. THREE.OrbitControls or THREE.DeviceOrientationControls\n\t */\n  PANOLENS.Viewer.prototype.getControl = function () {\n    return this.control\n  },\n\n  /**\n\t * Get scene\n\t * @return {THREE.Scene} - Current scene which the viewer is built on\n\t */\n  PANOLENS.Viewer.prototype.getScene = function () {\n    return this.scene\n  }\n\n  /**\n\t * Get camera\n\t * @return {THREE.Camera} - The scene camera\n\t */\n  PANOLENS.Viewer.prototype.getCamera = function () {\n    return this.camera\n  },\n\n  /**\n\t * Get renderer\n\t * @return {THREE.WebGLRenderer} - The renderer using webgl\n\t */\n  PANOLENS.Viewer.prototype.getRenderer = function () {\n    return this.renderer\n  }\n\n  /**\n\t * Get container\n\t * @return {HTMLDOMElement} - The container holds rendererd canvas\n\t */\n  PANOLENS.Viewer.prototype.getContainer = function () {\n    return this.container\n  }\n\n  /**\n\t * Get control name\n\t * @return {string} - Control name. 'orbit' or 'device-orientation'\n\t */\n  PANOLENS.Viewer.prototype.getControlName = function () {\n    return this.control.name\n  }\n\n  /**\n\t * Get next navigation control name\n\t * @return {string} - Next control name\n\t */\n  PANOLENS.Viewer.prototype.getNextControlName = function () {\n    return this.controls[ this.getNextControlIndex() ].name\n  }\n\n  /**\n\t * Get next navigation control index\n\t * @return {number} - Next control index\n\t */\n  PANOLENS.Viewer.prototype.getNextControlIndex = function () {\n    var controls, control, nextIndex\n\n    controls = this.controls\n    control = this.control\n    nextIndex = controls.indexOf(control) + 1\n\n    return (nextIndex >= controls.length) ? 0 : nextIndex\n  }\n\n  /**\n\t * Set field of view of camera\n\t */\n  PANOLENS.Viewer.prototype.setCameraFov = function (fov) {\n    this.camera.fov = fov\n    this.camera.updateProjectionMatrix()\n  }\n\n  /**\n\t * Enable control by index\n\t * @param  {PANOLENS.Controls} index - Index of camera control\n\t */\n  PANOLENS.Viewer.prototype.enableControl = function (index) {\n    index = (index >= 0 && index < this.controls.length) ? index : 0\n\n    this.control.enabled = false\n\n    this.control = this.controls[ index ]\n\n    this.control.enabled = true\n\n    switch (index) {\n      case PANOLENS.Controls.ORBIT:\n\n        this.camera.position.copy(this.panorama.position)\n        this.camera.position.z += 1\n\n        break\n\n      case PANOLENS.Controls.DEVICEORIENTATION:\n\n        this.camera.position.copy(this.panorama.position)\n\n        break\n\n      default:\n\n        break\n    }\n\n    this.control.update()\n\n    this.activateWidgetItem(index, undefined)\n  }\n\n  /**\n\t * Disable current control\n\t */\n  PANOLENS.Viewer.prototype.disableControl = function () {\n    this.control.enabled = false\n  }\n\n  /**\n\t * Toggle next control\n\t */\n  PANOLENS.Viewer.prototype.toggleNextControl = function () {\n    this.enableControl(this.getNextControlIndex())\n  }\n\n  /**\n\t * Screen Space Projection\n\t */\n  PANOLENS.Viewer.prototype.getScreenVector = function (worldVector) {\n    var vector = worldVector.clone()\n    var widthHalf = (this.container.clientWidth) / 2\n    var heightHalf = this.container.clientHeight / 2\n\n    vector.project(this.camera)\n\n    vector.x = (vector.x * widthHalf) + widthHalf\n    vector.y = -(vector.y * heightHalf) + heightHalf\n    vector.z = 0\n\n    return vector\n  }\n\n  /**\n\t * Check Sprite in Viewport\n\t */\n  PANOLENS.Viewer.prototype.checkSpriteInViewport = function (sprite) {\n    this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld)\n    this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse)\n    this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix)\n\n    return sprite.visible && this.cameraFrustum.intersectsSprite(sprite)\n  }\n\n  /**\n\t * Reverse dragging direction\n\t */\n  PANOLENS.Viewer.prototype.reverseDraggingDirection = function () {\n    this.OrbitControls.rotateSpeed *= -1\n    this.OrbitControls.momentumScalingFactor *= -1\n  }\n\n  /**\n\t * Add reticle\n\t */\n  PANOLENS.Viewer.prototype.addReticle = function () {\n    this.reticle = new PANOLENS.Reticle(0xffffff,\n      this.options.autoReticleSelect,\n      PANOLENS.DataImage.ReticleIdle,\n      PANOLENS.DataImage.ReticleDwell,\n      this.options.dwellTime,\n      45)\n    this.reticle.position.z = -10\n    this.camera.add(this.reticle)\n    this.scene.add(this.camera)\n  }\n\n  /**\n\t * Tween control looking center\n\t * @param {THREE.Vector3} vector - Vector to be looked at the center\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n  PANOLENS.Viewer.prototype.tweenControlCenter = function (vector, duration, easing) {\n    if (this.control !== this.OrbitControls) {\n      return\n    }\n\n    // Pass in arguments as array\n    if (vector instanceof Array) {\n      duration = vector[ 1 ]\n      easing = vector[ 2 ]\n      vector = vector[ 0 ]\n    }\n\n    duration = duration !== undefined ? duration : 1000\n    easing = easing || TWEEN.Easing.Exponential.Out\n\n    var scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv\n\n    scope = this\n\n    chv = this.camera.getWorldDirection()\n    cvv = chv.clone()\n\n    vptc = this.panorama.getWorldPosition().sub(this.camera.getWorldPosition())\n\n    hv = vector.clone()\n    // Scale effect\n    hv.x *= -1\n    hv.add(vptc).normalize()\n    vv = hv.clone()\n\n    chv.y = 0\n    hv.y = 0\n\n    ha = Math.atan2(hv.z, hv.x) - Math.atan2(chv.z, chv.x)\n    ha = ha > Math.PI ? ha - 2 * Math.PI : ha\n    ha = ha < -Math.PI ? ha + 2 * Math.PI : ha\n    va = Math.abs(cvv.angleTo(chv) + (cvv.y * vv.y <= 0 ? vv.angleTo(hv) : -vv.angleTo(hv)))\n    va *= vv.y < cvv.y ? 1 : -1\n\n    ov = { left: 0, up: 0 }\n    nv = { left: 0, up: 0 }\n\n    this.tweenLeftAnimation.stop()\n    this.tweenUpAnimation.stop()\n\n    this.tweenLeftAnimation = new TWEEN.Tween(ov)\n      .to({ left: ha }, duration)\n      .easing(easing)\n      .onUpdate(function () {\n        scope.control.rotateLeft(this.left - nv.left)\n        nv.left = this.left\n      })\n      .start()\n\n    this.tweenUpAnimation = new TWEEN.Tween(ov)\n      .to({ up: va }, duration)\n      .easing(easing)\n      .onUpdate(function () {\n        scope.control.rotateUp(this.up - nv.up)\n        nv.up = this.up\n      })\n      .start()\n  }\n\n  /**\n\t * Tween control looking center by object\n\t * @param {THREE.Object3D} object - Object to be looked at the center\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n  PANOLENS.Viewer.prototype.tweenControlCenterByObject = function (object, duration, easing) {\n    var isUnderScalePlaceHolder = false\n\n    object.traverseAncestors(function (ancestor) {\n      if (ancestor.scalePlaceHolder) {\n        isUnderScalePlaceHolder = true\n      }\n    })\n\n    if (isUnderScalePlaceHolder) {\n      var invertXVector = new THREE.Vector3(-1, 1, 1)\n\n      this.tweenControlCenter(object.getWorldPosition().multiply(invertXVector), duration, easing)\n    } else {\n      this.tweenControlCenter(object.getWorldPosition(), duration, easing)\n    }\n  }\n\n  /**\n\t * This is called when window size is changed\n\t * @fires PANOLENS.Viewer#window-resize\n\t * @param {number} [windowWidth] - Specify if custom element has changed width\n\t * @param {number} [windowHeight] - Specify if custom element has changed height\n\t */\n  PANOLENS.Viewer.prototype.onWindowResize = function (windowWidth, windowHeight) {\n    var width, height, expand\n\n    expand = this.container.classList.contains('panolens-container') || this.container.isFullscreen\n\n    if (windowWidth !== undefined && windowHeight !== undefined) {\n      width = windowWidth\n      height = windowHeight\n      this.container._width = windowWidth\n      this.container._height = windowHeight\n    } else {\n      width = expand ? Math.max(document.documentElement.clientWidth, window.innerWidth || 0) : this.container.clientWidth\n      height = expand ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : this.container.clientHeight\n      this.container._width = width\n      this.container._height = height\n    }\n\n    this.camera.aspect = width / height\n    this.camera.updateProjectionMatrix()\n\n    this.renderer.setSize(width, height)\n\n    // Update reticle\n    if (this.options.enableReticle || this.tempEnableReticle) {\n      this.updateReticleEvent()\n    }\n\n    /**\n\t\t * Window resizing event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#window-resize\n\t\t * @property {number} width  - Width of the window\n\t\t * @property {number} height - Height of the window\n\t\t */\n    this.dispatchEvent({ type: 'window-resize', width: width, height: height })\n    this.scene.traverse(function (object) {\n      if (object.dispatchEvent) {\n        object.dispatchEvent({ type: 'window-resize', width: width, height: height })\n      }\n    })\n  }\n\n  PANOLENS.Viewer.prototype.addOutputElement = function () {\n    var element = document.createElement('div')\n    element.style.position = 'absolute'\n    element.style.right = '10px'\n    element.style.top = '10px'\n    element.style.color = '#fff'\n    this.container.appendChild(element)\n    this.outputDivElement = element\n  }\n\n  /**\n\t * Output infospot attach position in developer console by holding down Ctrl button\n\t */\n  PANOLENS.Viewer.prototype.outputInfospotPosition = function () {\n    var intersects, point, panoramaWorldPosition, outputPosition\n\n    intersects = this.raycaster.intersectObject(this.panorama, true)\n\n    if (intersects.length > 0) {\n      point = intersects[0].point\n      panoramaWorldPosition = this.panorama.getWorldPosition()\n\n      // Panorama is scaled -1 on X axis\n      outputPosition = new THREE.Vector3(\n        -(point.x - panoramaWorldPosition.x).toFixed(2),\n        (point.y - panoramaWorldPosition.y).toFixed(2),\n        (point.z - panoramaWorldPosition.z).toFixed(2)\n      )\n\n      switch (this.options.output) {\n        case 'console':\n          console.info(outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z)\n          break\n\n        case 'overlay':\n          this.outputDivElement.textContent = outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z\n          break\n\n        default:\n          break\n      }\n    }\n  }\n\n  PANOLENS.Viewer.prototype.onMouseDown = function (event) {\n    event.preventDefault()\n\n    this.userMouse.x = (event.clientX >= 0) ? event.clientX : event.touches[0].clientX\n    this.userMouse.y = (event.clientY >= 0) ? event.clientY : event.touches[0].clientY\n    this.userMouse.type = 'mousedown'\n    this.onTap(event)\n  }\n\n  PANOLENS.Viewer.prototype.onMouseMove = function (event) {\n    event.preventDefault()\n    this.userMouse.type = 'mousemove'\n    this.onTap(event)\n  }\n\n  PANOLENS.Viewer.prototype.onMouseUp = function (event) {\n    var onTarget = false, type\n\n    this.userMouse.type = 'mouseup'\n\n    type = (this.userMouse.x >= event.clientX - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.x <= event.clientX + this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y >= event.clientY - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y <= event.clientY + this.options.clickTolerance) ||\n\t\t\t\t(event.changedTouches &&\n\t\t\t\tthis.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance &&\n\t\t\t\tthis.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance)\n      ? 'click' : undefined\n\n    // Event should happen on canvas\n    if (event && event.target && !event.target.classList.contains('panolens-canvas')) { return }\n\n    event.preventDefault()\n\n    if (event.changedTouches && event.changedTouches.length === 1) {\n      onTarget = this.onTap({ clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY }, type)\n    } else {\n      onTarget = this.onTap(event, type)\n    }\n\n    this.userMouse.type = 'none'\n\n    if (onTarget) {\n      return\n    }\n\n    if (type === 'click') {\n      this.options.autoHideInfospot && this.panorama && this.panorama.toggleInfospotVisibility()\n      this.options.autoHideControlBar && this.toggleControlBar()\n    }\n  }\n\n  PANOLENS.Viewer.prototype.onTap = function (event, type) {\n    var intersects, intersect_entity, intersect\n\n    this.raycasterPoint.x = ((event.clientX - this.container.offsetLeft) / this.container.clientWidth) * 2 - 1\n    this.raycasterPoint.y = -((event.clientY - this.container.offsetTop) / this.container.clientHeight) * 2 + 1\n\n    this.raycaster.setFromCamera(this.raycasterPoint, this.camera)\n\n    // Return if no panorama\n    if (!this.panorama) {\n      return\n    }\n\n    // output infospot information\n    if (event.type !== 'mousedown' && PANOLENS.Utils.checkTouchSupported() || this.OUTPUT_INFOSPOT) {\n      this.outputInfospotPosition()\n    }\n\n    intersects = this.raycaster.intersectObjects(this.panorama.children, true)\n\n    intersect_entity = this.getConvertedIntersect(intersects)\n\n    intersect = (intersects.length > 0) ? intersects[0].object : intersect\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event })\n      }\n\n      this.pressEntityObject = undefined\n    }\n\n    if (this.userMouse.type === 'mouseup') {\n      if (intersect && this.pressObject === intersect && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event })\n      }\n\n      this.pressObject = undefined\n    }\n\n    if (type === 'click') {\n      this.panorama.dispatchEvent({ type: 'click', intersects: intersects, mouseEvent: event })\n\n      if (intersect_entity && intersect_entity.dispatchEvent) {\n        intersect_entity.dispatchEvent({ type: 'click-entity', mouseEvent: event })\n      }\n\n      if (intersect && intersect.dispatchEvent) {\n        intersect.dispatchEvent({ type: 'click', mouseEvent: event })\n      }\n    } else {\n      this.panorama.dispatchEvent({ type: 'hover', intersects: intersects, mouseEvent: event })\n\n      if ((this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity) ||\n\t\t\t\t(this.hoverObject && intersects.length === 0)) {\n        if (this.hoverObject.dispatchEvent) {\n          this.hoverObject.dispatchEvent({ type: 'hoverleave', mouseEvent: event })\n\n          // Cancel dwelling\n          this.reticle.cancelDwelling()\n        }\n\n        this.hoverObject = undefined\n      }\n\n      if (intersect_entity && intersects.length > 0) {\n        if (this.hoverObject !== intersect_entity) {\n          this.hoverObject = intersect_entity\n\n          if (this.hoverObject.dispatchEvent) {\n            this.hoverObject.dispatchEvent({ type: 'hoverenter', mouseEvent: event })\n\n            // Start reticle timer\n            if (this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle) {\n              this.reticle.startDwelling(this.onTap.bind(this, event, 'click'))\n            }\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity) {\n          this.pressEntityObject = intersect_entity\n\n          if (this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressstart-entity', mouseEvent: event })\n          }\n        }\n\n        if (this.userMouse.type === 'mousedown' && this.pressObject != intersect) {\n          this.pressObject = intersect\n\n          if (this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressstart', mouseEvent: event })\n          }\n        }\n\n        if (this.userMouse.type === 'mousemove' || this.options.enableReticle) {\n          if (intersect && intersect.dispatchEvent) {\n            intersect.dispatchEvent({ type: 'hover', mouseEvent: event })\n          }\n\n          if (this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n            this.pressEntityObject.dispatchEvent({ type: 'pressmove-entity', mouseEvent: event })\n          }\n\n          if (this.pressObject && this.pressObject.dispatchEvent) {\n            this.pressObject.dispatchEvent({ type: 'pressmove', mouseEvent: event })\n          }\n        }\n      }\n\n      if (!intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n        this.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event })\n\n        this.pressEntityObject = undefined\n      }\n\n      if (!intersect && this.pressObject && this.pressObject.dispatchEvent) {\n        this.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event })\n\n        this.pressObject = undefined\n      }\n    }\n\n    // Infospot handler\n    if (intersect && intersect instanceof PANOLENS.Infospot) {\n      this.infospot = intersect\n\n      if (type === 'click') {\n        return true\n      }\n    } else if (this.infospot) {\n      this.hideInfospot()\n    }\n  }\n\n  PANOLENS.Viewer.prototype.getConvertedIntersect = function (intersects) {\n    var intersect\n\n    for (var i = 0; i < intersects.length; i++) {\n      if (intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough) {\n        if (intersects[i].object.entity && intersects[i].object.entity.passThrough) {\n          continue\n        } else if (intersects[i].object.entity && !intersects[i].object.entity.passThrough) {\n          intersect = intersects[i].object.entity\n          break\n        } else {\n          intersect = intersects[i].object\n          break\n        }\n      }\n    }\n\n    return intersect\n  }\n\n  PANOLENS.Viewer.prototype.hideInfospot = function (intersects) {\n    if (this.infospot) {\n      this.infospot.onHoverEnd()\n\n      this.infospot = undefined\n    }\n  }\n\n  /**\n\t * Toggle control bar\n\t * @fires [PANOLENS.Viewer#control-bar-toggle]\n\t */\n  PANOLENS.Viewer.prototype.toggleControlBar = function () {\n    /**\n\t\t * Toggle control bar event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#control-bar-toggle\n\t\t */\n    this.widget && this.widget.dispatchEvent({ type: 'control-bar-toggle' })\n  }\n\n  PANOLENS.Viewer.prototype.onKeyDown = function (event) {\n    if (this.options.output && this.options.output !== 'none' && event.key === 'Control') {\n      this.OUTPUT_INFOSPOT = true\n    }\n  }\n\n  PANOLENS.Viewer.prototype.onKeyUp = function (event) {\n    this.OUTPUT_INFOSPOT = false\n  }\n\n  /**\n\t * Update control and callbacks\n\t */\n  PANOLENS.Viewer.prototype.update = function () {\n    TWEEN.update()\n\n    this.updateCallbacks.forEach(function (callback) { callback() })\n\n    this.control.update()\n\n    this.scene.traverse(function (child) {\n      if (child instanceof PANOLENS.Infospot &&\n\t\t\t\tchild.element &&\n\t\t\t\t(this.hoverObject === child ||\n\t\t\t\t\tchild.element.style.display !== 'none' ||\n\t\t\t\t\t(child.element.left && child.element.left.style.display !== 'none') ||\n\t\t\t\t\t(child.element.right && child.element.right.style.display !== 'none'))) {\n        if (this.checkSpriteInViewport(child)) {\n          var vector = this.getScreenVector(child.getWorldPosition())\n          child.translateElement(vector.x, vector.y)\n        } else {\n          child.onDismiss()\n        }\n      }\n    }.bind(this))\n  }\n\n  /**\n\t * Rendering function to be called on every animation frame\n\t */\n  PANOLENS.Viewer.prototype.render = function () {\n    if (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n      this.effect.render(this.scene, this.camera)\n    } else {\n      this.renderer.render(this.scene, this.camera)\n    }\n  }\n\n  PANOLENS.Viewer.prototype.animate = function () {\n    this.requestAnimationId = window.requestAnimationFrame(this.animate.bind(this))\n\n    this.onChange()\n  }\n\n  PANOLENS.Viewer.prototype.onChange = function () {\n    this.update()\n    this.render()\n  }\n\n  /**\n\t * Register mouse and touch event on container\n\t */\n  PANOLENS.Viewer.prototype.registerMouseAndTouchEvents = function () {\n    this.container.addEventListener('mousedown', \tthis.HANDLER_MOUSE_DOWN, false)\n    this.container.addEventListener('mousemove', \tthis.HANDLER_MOUSE_MOVE, false)\n    this.container.addEventListener('mouseup', \tthis.HANDLER_MOUSE_UP, false)\n    this.container.addEventListener('touchstart', \tthis.HANDLER_MOUSE_DOWN, false)\n    this.container.addEventListener('touchend', \tthis.HANDLER_MOUSE_UP, false)\n  }\n\n  /**\n\t * Unregister mouse and touch event on container\n\t */\n  PANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents = function () {\n    this.container.removeEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false)\n    this.container.removeEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false)\n    this.container.removeEventListener('mouseup', this.HANDLER_MOUSE_UP, false)\n    this.container.removeEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false)\n    this.container.removeEventListener('touchend', this.HANDLER_MOUSE_UP, false)\n  }\n\n  /**\n\t * Register reticle event\n\t */\n  PANOLENS.Viewer.prototype.registerReticleEvent = function () {\n    this.addUpdateCallback(this.HANDLER_TAP)\n  }\n\n  /**\n\t * Unregister reticle event\n\t */\n  PANOLENS.Viewer.prototype.unregisterReticleEvent = function () {\n    this.removeUpdateCallback(this.HANDLER_TAP)\n  }\n\n  /**\n\t * Update reticle event\n\t */\n  PANOLENS.Viewer.prototype.updateReticleEvent = function () {\n    var centerX, centerY\n\n    centerX = this.container.clientWidth / 2 + this.container.offsetLeft\n    centerY = this.container.clientHeight / 2\n\n    this.removeUpdateCallback(this.HANDLER_TAP)\n    this.HANDLER_TAP = this.onTap.bind(this, { clientX: centerX, clientY: centerY })\n    this.addUpdateCallback(this.HANDLER_TAP)\n  }\n\n  /**\n\t * Register container and window listeners\n\t */\n  PANOLENS.Viewer.prototype.registerEventListeners = function () {\n    // Resize Event\n    window.addEventListener('resize', this.HANDLER_WINDOW_RESIZE, true)\n\n    // Keyboard Event\n    window.addEventListener('keydown', this.HANDLER_KEY_DOWN, true)\n    window.addEventListener('keyup', this.HANDLER_KEY_UP, true)\n  }\n\n  /**\n\t * Unregister container and window listeners\n\t */\n  PANOLENS.Viewer.prototype.unregisterEventListeners = function () {\n    // Resize Event\n    window.removeEventListener('resize', this.HANDLER_WINDOW_RESIZE, true)\n\n    // Keyboard Event\n    window.removeEventListener('keydown', this.HANDLER_KEY_DOWN, true)\n    window.removeEventListener('keyup', this.HANDLER_KEY_UP, true)\n  }\n\n  /**\n\t * Dispose all scene objects and clear cache\n\t */\n  PANOLENS.Viewer.prototype.dispose = function () {\n    // Unregister dom event listeners\n    this.unregisterEventListeners()\n\n    // recursive disposal on 3d objects\n    function recursiveDispose (object) {\n      for (var i = object.children.length - 1; i >= 0; i--) {\n        recursiveDispose(object.children[i])\n        object.remove(object.children[i])\n      }\n\n      if (object instanceof PANOLENS.Infospot) {\n        object.dispose()\n      }\n\n      object.geometry && object.geometry.dispose()\n      object.material && object.material.dispose()\n    }\n\n    recursiveDispose(this.scene)\n\n    // dispose widget\n    if (this.widget) {\n      this.widget.dispose()\n      this.widget = null\n    }\n\n    // clear cache\n    if (THREE.Cache && THREE.Cache.enabled) {\n      THREE.Cache.clear()\n    }\n  }\n\n  /**\n\t * Destory viewer by disposing and stopping requestAnimationFrame\n\t */\n  PANOLENS.Viewer.prototype.destory = function () {\n    this.dispose()\n    this.render()\n    window.cancelAnimationFrame(this.requestAnimationId)\n  }\n\n  /**\n\t * On panorama dispose\n\t */\n  PANOLENS.Viewer.prototype.onPanoramaDispose = function (panorama) {\n    if (panorama instanceof PANOLENS.VideoPanorama) {\n      this.hideVideoWidget()\n    }\n\n    if (panorama === this.panorama) {\n      this.panorama = null\n    }\n  }\n\n  /**\n\t * Load ajax call\n\t * @param {string} url - URL to be requested\n\t * @param {function} [callback] - Callback after request completes\n\t */\n  PANOLENS.Viewer.prototype.loadAsyncRequest = function (url, callback) {\n    var request = new XMLHttpRequest()\n    request.onloadend = function (event) {\n      callback && callback(event)\n    }\n    request.open('GET', url, true)\n    request.send(null)\n  }\n\n  /**\n\t * View indicator in upper left\n\t * */\n  PANOLENS.Viewer.prototype.addViewIndicator = function () {\n    var scope = this\n\n    function loadViewIndicator (asyncEvent) {\n      if (asyncEvent.loaded === 0) return\n\n      var viewIndicatorDiv = asyncEvent.target.responseXML.documentElement\n      viewIndicatorDiv.style.width = scope.viewIndicatorSize + 'px'\n      viewIndicatorDiv.style.height = scope.viewIndicatorSize + 'px'\n      viewIndicatorDiv.style.position = 'absolute'\n      viewIndicatorDiv.style.top = '10px'\n      viewIndicatorDiv.style.left = '10px'\n      viewIndicatorDiv.style.opacity = '0.5'\n      viewIndicatorDiv.style.cursor = 'pointer'\n      viewIndicatorDiv.id = 'panolens-view-indicator-container'\n\n      scope.container.appendChild(viewIndicatorDiv)\n\n      var indicator = viewIndicatorDiv.querySelector('#indicator')\n      var setIndicatorD = function () {\n        scope.radius = scope.viewIndicatorSize * 0.225\n        scope.currentPanoAngle = scope.camera.rotation.y - THREE.Math.degToRad(90)\n        scope.fovAngle = THREE.Math.degToRad(scope.camera.fov)\n        scope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2\n        scope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2\n        scope.leftX = scope.radius * Math.cos(scope.leftAngle)\n        scope.leftY = scope.radius * Math.sin(scope.leftAngle)\n        scope.rightX = scope.radius * Math.cos(scope.rightAngle)\n        scope.rightY = scope.radius * Math.sin(scope.rightAngle)\n        scope.indicatorD = 'M ' + scope.leftX + ' ' + scope.leftY + ' A ' + scope.radius + ' ' + scope.radius + ' 0 0 1 ' + scope.rightX + ' ' + scope.rightY\n\n        if (scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius) {\n          indicator.setAttribute('d', scope.indicatorD)\n        }\n      }\n\n      scope.addUpdateCallback(setIndicatorD)\n\n      var indicatorOnMouseEnter = function () {\n        this.style.opacity = '1'\n      }\n\n      var indicatorOnMouseLeave = function () {\n        this.style.opacity = '0.5'\n      }\n\n      viewIndicatorDiv.addEventListener('mouseenter', indicatorOnMouseEnter)\n      viewIndicatorDiv.addEventListener('mouseleave', indicatorOnMouseLeave)\n    }\n\n    this.loadAsyncRequest(PANOLENS.DataImage.ViewIndicator, loadViewIndicator)\n  }\n\n  /**\n\t * Append custom control item to existing control bar\n\t * @param {object} [option={}] - Style object to overwirte default element style. It takes 'style', 'onTap' and 'group' properties.\n\t */\n  PANOLENS.Viewer.prototype.appendControlItem = function (option) {\n    var item = this.widget.createCustomItem(option)\n\n    if (option.group === 'video') {\n      this.widget.videoElement.appendChild(item)\n    } else {\n      this.widget.barElement.appendChild(item)\n    }\n\n    return item\n  }\n})()\n;(function e (t, n, r) { function s (o, u) { if (!n[o]) { if (!t[o]) { var a = typeof require === 'function' && require; if (!u && a) return a(o, !0); if (i) return i(o, !0); var f = new Error(\"Cannot find module '\" + o + \"'\"); throw f.code = 'MODULE_NOT_FOUND', f } var l = n[o] = {exports: {}}; t[o][0].call(l.exports, function (e) { var n = t[o][1][e]; return s(n || e) }, l, l.exports, e, t, n, r) } return n[o].exports } var i = typeof require === 'function' && require; for (var o = 0; o < r.length; o++)s(r[o]); return s })({1: [function (require, module, exports) {\n  var createLayout = require('layout-bmfont-text')\n  var inherits = require('inherits')\n  var createIndices = require('quad-indices')\n  var buffer = require('three-buffer-vertex-data')\n  var assign = require('object-assign')\n\n  var vertices = require('./lib/vertices')\n  var utils = require('./lib/utils')\n\n  var Base = THREE.BufferGeometry\n\n  module.exports = function createTextGeometry (opt) {\n\t  return new TextGeometry(opt)\n  }\n\n  function TextGeometry (opt) {\n\t  Base.call(this)\n\n\t  if (typeof opt === 'string') {\n\t    opt = { text: opt }\n\t  }\n\n\t  // use these as default values for any subsequent\n\t  // calls to update()\n\t  this._opt = assign({}, opt)\n\n\t  // also do an initial setup...\n\t  if (opt) this.update(opt)\n  }\n\n  inherits(TextGeometry, Base)\n\n  TextGeometry.prototype.update = function (opt) {\n\t  if (typeof opt === 'string') {\n\t    opt = { text: opt }\n\t  }\n\n\t  // use constructor defaults\n\t  opt = assign({}, this._opt, opt)\n\n\t  if (!opt.font) {\n\t    throw new TypeError('must specify a { font } in options')\n\t  }\n\n\t  this.layout = createLayout(opt)\n\n\t  // get vec2 texcoords\n\t  var flipY = opt.flipY !== false\n\n\t  // the desired BMFont data\n\t  var font = opt.font\n\n\t  // determine texture size from font file\n\t  var texWidth = font.common.scaleW\n\t  var texHeight = font.common.scaleH\n\n\t  // get visible glyphs\n\t  var glyphs = this.layout.glyphs.filter(function (glyph) {\n\t    var bitmap = glyph.data\n\t    return bitmap.width * bitmap.height > 0\n\t  })\n\n\t  // provide visible glyphs for convenience\n\t  this.visibleGlyphs = glyphs\n\n\t  // get common vertex data\n\t  var positions = vertices.positions(glyphs)\n\t  var uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY)\n\t  var indices = createIndices({\n\t    clockwise: true,\n\t    type: 'uint16',\n\t    count: glyphs.length\n\t  })\n\n\t  // update vertex data\n\t  buffer.index(this, indices, 1, 'uint16')\n\t  buffer.attr(this, 'position', positions, 2)\n\t  buffer.attr(this, 'uv', uvs, 2)\n\n\t  // update multipage data\n\t  if (!opt.multipage && 'page' in this.attributes) {\n\t    // disable multipage rendering\n\t    this.removeAttribute('page')\n\t  } else if (opt.multipage) {\n\t    var pages = vertices.pages(glyphs)\n\t    // enable multipage rendering\n\t    buffer.attr(this, 'page', pages, 1)\n\t  }\n  }\n\n  TextGeometry.prototype.computeBoundingSphere = function () {\n\t  if (this.boundingSphere === null) {\n\t    this.boundingSphere = new THREE.Sphere()\n\t  }\n\n\t  var positions = this.attributes.position.array\n\t  var itemSize = this.attributes.position.itemSize\n\t  if (!positions || !itemSize || positions.length < 2) {\n\t    this.boundingSphere.radius = 0\n\t    this.boundingSphere.center.set(0, 0, 0)\n\t    return\n\t  }\n\t  utils.computeSphere(positions, this.boundingSphere)\n\t  if (isNaN(this.boundingSphere.radius)) {\n\t    console.error('THREE.BufferGeometry.computeBoundingSphere(): ' +\n\t      'Computed radius is NaN. The ' +\n\t      '\"position\" attribute is likely to have NaN values.')\n\t  }\n  }\n\n  TextGeometry.prototype.computeBoundingBox = function () {\n\t  if (this.boundingBox === null) {\n\t    this.boundingBox = new THREE.Box3()\n\t  }\n\n\t  var bbox = this.boundingBox\n\t  var positions = this.attributes.position.array\n\t  var itemSize = this.attributes.position.itemSize\n\t  if (!positions || !itemSize || positions.length < 2) {\n\t    bbox.makeEmpty()\n\t    return\n\t  }\n\t  utils.computeBox(positions, bbox)\n  }\n}, {'./lib/utils': 2, './lib/vertices': 3, 'inherits': 4, 'layout-bmfont-text': 5, 'object-assign': 26, 'quad-indices': 27, 'three-buffer-vertex-data': 31}],\n2: [function (require, module, exports) {\n  var itemSize = 2\n  var box = { min: [0, 0], max: [0, 0] }\n\n  function bounds (positions) {\n\t  var count = positions.length / itemSize\n\t  box.min[0] = positions[0]\n\t  box.min[1] = positions[1]\n\t  box.max[0] = positions[0]\n\t  box.max[1] = positions[1]\n\n\t  for (var i = 0; i < count; i++) {\n\t    var x = positions[i * itemSize + 0]\n\t    var y = positions[i * itemSize + 1]\n\t    box.min[0] = Math.min(x, box.min[0])\n\t    box.min[1] = Math.min(y, box.min[1])\n\t    box.max[0] = Math.max(x, box.max[0])\n\t    box.max[1] = Math.max(y, box.max[1])\n\t  }\n  }\n\n  module.exports.computeBox = function (positions, output) {\n\t  bounds(positions)\n\t  output.min.set(box.min[0], box.min[1], 0)\n\t  output.max.set(box.max[0], box.max[1], 0)\n  }\n\n  module.exports.computeSphere = function (positions, output) {\n\t  bounds(positions)\n\t  var minX = box.min[0]\n\t  var minY = box.min[1]\n\t  var maxX = box.max[0]\n\t  var maxY = box.max[1]\n\t  var width = maxX - minX\n\t  var height = maxY - minY\n\t  var length = Math.sqrt(width * width + height * height)\n\t  output.center.set(minX + width / 2, minY + height / 2, 0)\n\t  output.radius = length / 2\n  }\n}, {}],\n3: [function (require, module, exports) {\n  module.exports.pages = function pages (glyphs) {\n\t  var pages = new Float32Array(glyphs.length * 4 * 1)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var id = glyph.data.page || 0\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t  })\n\t  return pages\n  }\n\n  module.exports.uvs = function uvs (glyphs, texWidth, texHeight, flipY) {\n\t  var uvs = new Float32Array(glyphs.length * 4 * 2)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var bitmap = glyph.data\n\t    var bw = (bitmap.x + bitmap.width)\n\t    var bh = (bitmap.y + bitmap.height)\n\n\t    // top left position\n\t    var u0 = bitmap.x / texWidth\n\t    var v1 = bitmap.y / texHeight\n\t    var u1 = bw / texWidth\n\t    var v0 = bh / texHeight\n\n\t    if (flipY) {\n\t      v1 = (texHeight - bitmap.y) / texHeight\n\t      v0 = (texHeight - bh) / texHeight\n\t    }\n\n\t    // BL\n\t    uvs[i++] = u0\n\t    uvs[i++] = v1\n\t    // TL\n\t    uvs[i++] = u0\n\t    uvs[i++] = v0\n\t    // TR\n\t    uvs[i++] = u1\n\t    uvs[i++] = v0\n\t    // BR\n\t    uvs[i++] = u1\n\t    uvs[i++] = v1\n\t  })\n\t  return uvs\n  }\n\n  module.exports.positions = function positions (glyphs) {\n\t  var positions = new Float32Array(glyphs.length * 4 * 2)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var bitmap = glyph.data\n\n\t    // bottom left position\n\t    var x = glyph.position[0] + bitmap.xoffset\n\t    var y = glyph.position[1] + bitmap.yoffset\n\n\t    // quad size\n\t    var w = bitmap.width\n\t    var h = bitmap.height\n\n\t    // BL\n\t    positions[i++] = x\n\t    positions[i++] = y\n\t    // TL\n\t    positions[i++] = x\n\t    positions[i++] = y + h\n\t    // TR\n\t    positions[i++] = x + w\n\t    positions[i++] = y + h\n\t    // BR\n\t    positions[i++] = x + w\n\t    positions[i++] = y\n\t  })\n\t  return positions\n  }\n}, {}],\n4: [function (require, module, exports) {\n  if (typeof Object.create === 'function') {\n\t  // implementation from standard node.js 'util' module\n\t  module.exports = function inherits (ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    ctor.prototype = Object.create(superCtor.prototype, {\n\t      constructor: {\n\t        value: ctor,\n\t        enumerable: false,\n\t        writable: true,\n\t        configurable: true\n\t      }\n\t    })\n\t  }\n  } else {\n\t  // old school shim for old browsers\n\t  module.exports = function inherits (ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    var TempCtor = function () {}\n\t    TempCtor.prototype = superCtor.prototype\n\t    ctor.prototype = new TempCtor()\n\t    ctor.prototype.constructor = ctor\n\t  }\n  }\n}, {}],\n5: [function (require, module, exports) {\n  var wordWrap = require('word-wrapper')\n  var xtend = require('xtend')\n  var findChar = require('indexof-property')('id')\n  var number = require('as-number')\n\n  var X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z']\n  var M_WIDTHS = ['m', 'w']\n  var CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n\n  var TAB_ID = '\\t'.charCodeAt(0)\n  var SPACE_ID = ' '.charCodeAt(0)\n  var ALIGN_LEFT = 0,\n\t    ALIGN_CENTER = 1,\n\t    ALIGN_RIGHT = 2\n\n  module.exports = function createLayout (opt) {\n\t  return new TextLayout(opt)\n  }\n\n  function TextLayout (opt) {\n\t  this.glyphs = []\n\t  this._measure = this.computeMetrics.bind(this)\n\t  this.update(opt)\n  }\n\n  TextLayout.prototype.update = function (opt) {\n\t  opt = xtend({\n\t    measure: this._measure\n\t  }, opt)\n\t  this._opt = opt\n\t  this._opt.tabSize = number(this._opt.tabSize, 4)\n\n\t  if (!opt.font) { throw new Error('must provide a valid bitmap font') }\n\n\t  var glyphs = this.glyphs\n\t  var text = opt.text || ''\n\t  var font = opt.font\n\t  this._setupSpaceGlyphs(font)\n\n\t  var lines = wordWrap.lines(text, opt)\n\t  var minWidth = opt.width || 0\n\n\t  // clear glyphs\n\t  glyphs.length = 0\n\n\t  // get max line width\n\t  var maxLineWidth = lines.reduce(function (prev, line) {\n\t    return Math.max(prev, line.width, minWidth)\n\t  }, 0)\n\n\t  // the pen position\n\t  var x = 0\n\t  var y = 0\n\t  var lineHeight = number(opt.lineHeight, font.common.lineHeight)\n\t  var baseline = font.common.base\n\t  var descender = lineHeight - baseline\n\t  var letterSpacing = opt.letterSpacing || 0\n\t  var height = lineHeight * lines.length - descender\n\t  var align = getAlignType(this._opt.align)\n\n\t  // draw text along baseline\n\t  y -= height\n\n\t  // the metrics for this text layout\n\t  this._width = maxLineWidth\n\t  this._height = height\n\t  this._descender = lineHeight - baseline\n\t  this._baseline = baseline\n\t  this._xHeight = getXHeight(font)\n\t  this._capHeight = getCapHeight(font)\n\t  this._lineHeight = lineHeight\n\t  this._ascender = lineHeight - descender - this._xHeight\n\n\t  // layout each glyph\n\t  var self = this\n\t  lines.forEach(function (line, lineIndex) {\n\t    var start = line.start\n\t    var end = line.end\n\t    var lineWidth = line.width\n\t    var lastGlyph\n\n\t    // for each glyph in that line...\n\t    for (var i = start; i < end; i++) {\n\t      var id = text.charCodeAt(i)\n\t      var glyph = self.getGlyph(font, id)\n\t      if (glyph) {\n\t        if (lastGlyph) { x += getKerning(font, lastGlyph.id, glyph.id) }\n\n\t        var tx = x\n\t        if (align === ALIGN_CENTER) { tx += (maxLineWidth - lineWidth) / 2 } else if (align === ALIGN_RIGHT) { tx += (maxLineWidth - lineWidth) }\n\n\t        glyphs.push({\n\t          position: [tx, y],\n\t          data: glyph,\n\t          index: i,\n\t          line: lineIndex\n\t        })\n\n\t        // move pen forward\n\t        x += glyph.xadvance + letterSpacing\n\t        lastGlyph = glyph\n\t      }\n\t    }\n\n\t    // next line down\n\t    y += lineHeight\n\t    x = 0\n\t  })\n\t  this._linesTotal = lines.length\n  }\n\n  TextLayout.prototype._setupSpaceGlyphs = function (font) {\n\t  // These are fallbacks, when the font doesn't include\n\t  // ' ' or '\\t' glyphs\n\t  this._fallbackSpaceGlyph = null\n\t  this._fallbackTabGlyph = null\n\n\t  if (!font.chars || font.chars.length === 0) { return }\n\n\t  // try to get space glyph\n\t  // then fall back to the 'm' or 'w' glyphs\n\t  // then fall back to the first glyph available\n\t  var space = getGlyphById(font, SPACE_ID) ||\n\t          getMGlyph(font) ||\n\t          font.chars[0]\n\n\t  // and create a fallback for tab\n\t  var tabWidth = this._opt.tabSize * space.xadvance\n\t  this._fallbackSpaceGlyph = space\n\t  this._fallbackTabGlyph = xtend(space, {\n\t    x: 0,\n      y: 0,\n      xadvance: tabWidth,\n      id: TAB_ID,\n\t    xoffset: 0,\n      yoffset: 0,\n      width: 0,\n      height: 0\n\t  })\n  }\n\n  TextLayout.prototype.getGlyph = function (font, id) {\n\t  var glyph = getGlyphById(font, id)\n\t  if (glyph) { return glyph } else if (id === TAB_ID) { return this._fallbackTabGlyph } else if (id === SPACE_ID) { return this._fallbackSpaceGlyph }\n\t  return null\n  }\n\n  TextLayout.prototype.computeMetrics = function (text, start, end, width) {\n\t  var letterSpacing = this._opt.letterSpacing || 0\n\t  var font = this._opt.font\n\t  var curPen = 0\n\t  var curWidth = 0\n\t  var count = 0\n\t  var glyph\n\t  var lastGlyph\n\n\t  if (!font.chars || font.chars.length === 0) {\n\t    return {\n\t      start: start,\n\t      end: start,\n\t      width: 0\n\t    }\n\t  }\n\n\t  end = Math.min(text.length, end)\n\t  for (var i = start; i < end; i++) {\n\t    var id = text.charCodeAt(i)\n\t    var glyph = this.getGlyph(font, id)\n\n\t    if (glyph) {\n\t      // move pen forward\n\t      var xoff = glyph.xoffset\n\t      var kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0\n\t      curPen += kern\n\n\t      var nextPen = curPen + glyph.xadvance + letterSpacing\n\t      var nextWidth = curPen + glyph.width\n\n\t      // we've hit our limit; we can't move onto the next glyph\n\t      if (nextWidth >= width || nextPen >= width) { break }\n\n\t      // otherwise continue along our line\n\t      curPen = nextPen\n\t      curWidth = nextWidth\n\t      lastGlyph = glyph\n\t    }\n\t    count++\n\t  }\n\n\t  // make sure rightmost edge lines up with rendered glyphs\n\t  if (lastGlyph) { curWidth += lastGlyph.xoffset }\n\n\t  return {\n\t    start: start,\n\t    end: start + count,\n\t    width: curWidth\n\t  }\n  }\n\n  // getters for the private vars\n  ;['width', 'height',\n\t  'descender', 'ascender',\n\t  'xHeight', 'baseline',\n\t  'capHeight',\n\t  'lineHeight' ].forEach(addGetter)\n\n  function addGetter (name) {\n\t  Object.defineProperty(TextLayout.prototype, name, {\n\t    get: wrapper(name),\n\t    configurable: true\n\t  })\n  }\n\n  // create lookups for private vars\n  function wrapper (name) {\n\t  return (new Function([\n\t    'return function ' + name + '() {',\n\t    '  return this._' + name,\n\t    '}'\n\t  ].join('\\n')))()\n  }\n\n  function getGlyphById (font, id) {\n\t  if (!font.chars || font.chars.length === 0) { return null }\n\n\t  var glyphIdx = findChar(font.chars, id)\n\t  if (glyphIdx >= 0) { return font.chars[glyphIdx] }\n\t  return null\n  }\n\n  function getXHeight (font) {\n\t  for (var i = 0; i < X_HEIGHTS.length; i++) {\n\t    var id = X_HEIGHTS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) { return font.chars[idx].height }\n\t  }\n\t  return 0\n  }\n\n  function getMGlyph (font) {\n\t  for (var i = 0; i < M_WIDTHS.length; i++) {\n\t    var id = M_WIDTHS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) { return font.chars[idx] }\n\t  }\n\t  return 0\n  }\n\n  function getCapHeight (font) {\n\t  for (var i = 0; i < CAP_HEIGHTS.length; i++) {\n\t    var id = CAP_HEIGHTS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) { return font.chars[idx].height }\n\t  }\n\t  return 0\n  }\n\n  function getKerning (font, left, right) {\n\t  if (!font.kernings || font.kernings.length === 0) { return 0 }\n\n\t  var table = font.kernings\n\t  for (var i = 0; i < table.length; i++) {\n\t    var kern = table[i]\n\t    if (kern.first === left && kern.second === right) { return kern.amount }\n\t  }\n\t  return 0\n  }\n\n  function getAlignType (align) {\n\t  if (align === 'center') { return ALIGN_CENTER } else if (align === 'right') { return ALIGN_RIGHT }\n\t  return ALIGN_LEFT\n  }\n}, {'as-number': 6, 'indexof-property': 7, 'word-wrapper': 8, 'xtend': 9}],\n6: [function (require, module, exports) {\n  module.exports = function numtype (num, def) {\n\t  return typeof num === 'number'\n\t    ? num\n\t    : (typeof def === 'number' ? def : 0)\n  }\n}, {}],\n7: [function (require, module, exports) {\n  module.exports = function compile (property) {\n\t  if (!property || typeof property !== 'string') { throw new Error('must specify property for indexof search') }\n\n\t  return new Function('array', 'value', 'start', [\n\t    'start = start || 0',\n\t    'for (var i=start; i<array.length; i++)',\n\t    '  if (array[i][\"' + property + '\"] === value)',\n\t    '      return i',\n\t    'return -1'\n\t  ].join('\\n'))\n  }\n}, {}],\n8: [function (require, module, exports) {\n  var newline = /\\n/\n  var newlineChar = '\\n'\n  var whitespace = /\\s/\n\n  module.exports = function (text, opt) {\n\t    var lines = module.exports.lines(text, opt)\n\t    return lines.map(function (line) {\n\t        return text.substring(line.start, line.end)\n\t    }).join('\\n')\n  }\n\n  module.exports.lines = function wordwrap (text, opt) {\n\t    opt = opt || {}\n\n\t    // zero width results in nothing visible\n\t    if (opt.width === 0 && opt.mode !== 'nowrap') { return [] }\n\n\t    text = text || ''\n\t    var width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE\n\t    var start = Math.max(0, opt.start || 0)\n\t    var end = typeof opt.end === 'number' ? opt.end : text.length\n\t    var mode = opt.mode\n\n\t    var measure = opt.measure || monospace\n\t    if (mode === 'pre') { return pre(measure, text, start, end, width) } else { return greedy(measure, text, start, end, width, mode) }\n  }\n\n  function idxOf (text, chr, start, end) {\n\t    var idx = text.indexOf(chr, start)\n\t    if (idx === -1 || idx > end) { return end }\n\t    return idx\n  }\n\n  function isWhitespace (chr) {\n\t    return whitespace.test(chr)\n  }\n\n  function pre (measure, text, start, end, width) {\n\t    var lines = []\n\t    var lineStart = start\n\t    for (var i = start; i < end && i < text.length; i++) {\n\t        var chr = text.charAt(i)\n\t        var isNewline = newline.test(chr)\n\n\t        // If we've reached a newline, then step down a line\n\t        // Or if we've reached the EOF\n\t        if (isNewline || i === end - 1) {\n\t            var lineEnd = isNewline ? i : i + 1\n\t            var measured = measure(text, lineStart, lineEnd, width)\n\t            lines.push(measured)\n\n\t            lineStart = i + 1\n\t        }\n\t    }\n\t    return lines\n  }\n\n  function greedy (measure, text, start, end, width, mode) {\n\t    // A greedy word wrapper based on LibGDX algorithm\n\t    // https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/BitmapFontCache.java\n\t    var lines = []\n\n\t    var testWidth = width\n\t    // if 'nowrap' is specified, we only wrap on newline chars\n\t    if (mode === 'nowrap') { testWidth = Number.MAX_VALUE }\n\n\t    while (start < end && start < text.length) {\n\t        // get next newline position\n\t        var newLine = idxOf(text, newlineChar, start, end)\n\n\t        // eat whitespace at start of line\n\t        while (start < newLine) {\n\t            if (!isWhitespace(text.charAt(start))) { break }\n\t            start++\n\t        }\n\n\t        // determine visible # of glyphs for the available width\n\t        var measured = measure(text, start, newLine, testWidth)\n\n\t        var lineEnd = start + (measured.end - measured.start)\n\t        var nextStart = lineEnd + newlineChar.length\n\n\t        // if we had to cut the line before the next newline...\n\t        if (lineEnd < newLine) {\n\t            // find char to break on\n\t            while (lineEnd > start) {\n\t                if (isWhitespace(text.charAt(lineEnd))) { break }\n\t                lineEnd--\n\t            }\n\t            if (lineEnd === start) {\n\t                if (nextStart > start + newlineChar.length) nextStart--\n\t                lineEnd = nextStart // If no characters to break, show all.\n\t            } else {\n\t                nextStart = lineEnd\n\t                // eat whitespace at end of line\n\t                while (lineEnd > start) {\n\t                    if (!isWhitespace(text.charAt(lineEnd - newlineChar.length))) { break }\n\t                    lineEnd--\n\t                }\n\t            }\n\t        }\n\t        if (lineEnd >= start) {\n\t            var result = measure(text, start, lineEnd, testWidth)\n\t            lines.push(result)\n\t        }\n\t        start = nextStart\n\t    }\n\t    return lines\n  }\n\n  // determines the visible number of glyphs within a given width\n  function monospace (text, start, end, width) {\n\t    var glyphs = Math.min(width, end - start)\n\t    return {\n\t        start: start,\n\t        end: start + glyphs\n\t    }\n  }\n}, {}],\n9: [function (require, module, exports) {\n  module.exports = extend\n\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n\n  function extend () {\n\t    var target = {}\n\n\t    for (var i = 0; i < arguments.length; i++) {\n\t        var source = arguments[i]\n\n\t        for (var key in source) {\n\t            if (hasOwnProperty.call(source, key)) {\n\t                target[key] = source[key]\n\t            }\n\t        }\n\t    }\n\n\t    return target\n  }\n}, {}],\n10: [function (require, module, exports) {\n  (function (Buffer) {\n    var xhr = require('xhr')\n    var noop = function () {}\n    var parseASCII = require('parse-bmfont-ascii')\n    var parseXML = require('parse-bmfont-xml')\n    var readBinary = require('parse-bmfont-binary')\n    var isBinaryFormat = require('./lib/is-binary')\n    var xtend = require('xtend')\n\n    var xml2 = (function hasXML2 () {\n\t  return window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()\n    })()\n\n    module.exports = function (opt, cb) {\n\t  cb = typeof cb === 'function' ? cb : noop\n\n\t  if (typeof opt === 'string') { opt = { uri: opt } } else if (!opt) { opt = {} }\n\n\t  var expectBinary = opt.binary\n\t  if (expectBinary) { opt = getBinaryOpts(opt) }\n\n\t  xhr(opt, function (err, res, body) {\n\t    if (err) { return cb(err) }\n\t    if (!/^2/.test(res.statusCode)) { return cb(new Error('http status code: ' + res.statusCode)) }\n\t    if (!body) { return cb(new Error('no body result')) }\n\n\t    var binary = false\n\n\t    // if the response type is an array buffer,\n\t    // we need to convert it into a regular Buffer object\n\t    if (isArrayBuffer(body)) {\n\t      var array = new Uint8Array(body)\n\t      body = new Buffer(array, 'binary')\n\t    }\n\n\t    // now check the string/Buffer response\n\t    // and see if it has a binary BMF header\n\t    if (isBinaryFormat(body)) {\n\t      binary = true\n\t      // if we have a string, turn it into a Buffer\n\t      if (typeof body === 'string') { body = new Buffer(body, 'binary') }\n\t    }\n\n\t    // we are not parsing a binary format, just ASCII/XML/etc\n\t    if (!binary) {\n\t      // might still be a buffer if responseType is 'arraybuffer'\n\t      if (Buffer.isBuffer(body)) { body = body.toString(opt.encoding) }\n\t      body = body.trim()\n\t    }\n\n\t    var result\n\t    try {\n\t      var type = res.headers['content-type']\n\t      if (binary) { result = readBinary(body) } else if (/json/.test(type) || body.charAt(0) === '{') { result = JSON.parse(body) } else if (/xml/.test(type) || body.charAt(0) === '<') { result = parseXML(body) } else { result = parseASCII(body) }\n\t    } catch (e) {\n\t      cb(new Error('error parsing font ' + e.message))\n\t      cb = noop\n\t    }\n\t    cb(null, result)\n\t  })\n    }\n\n    function isArrayBuffer (arr) {\n\t  var str = Object.prototype.toString\n\t  return str.call(arr) === '[object ArrayBuffer]'\n    }\n\n    function getBinaryOpts (opt) {\n\t  // IE10+ and other modern browsers support array buffers\n\t  if (xml2) { return xtend(opt, { responseType: 'arraybuffer' }) }\n\n\t  if (typeof window.XMLHttpRequest === 'undefined') { throw new Error('your browser does not support XHR loading') }\n\n\t  // IE9 and XML1 browsers could still use an override\n\t  var req = new window.XMLHttpRequest()\n\t  req.overrideMimeType('text/plain; charset=x-user-defined')\n\t  return xtend({\n\t    xhr: req\n\t  }, opt)\n    }\n  }).call(this, require('buffer').Buffer)\n}, {'./lib/is-binary': 11, 'buffer': 37, 'parse-bmfont-ascii': 13, 'parse-bmfont-binary': 14, 'parse-bmfont-xml': 15, 'xhr': 18, 'xtend': 25}],\n11: [function (require, module, exports) {\n  (function (Buffer) {\n    var equal = require('buffer-equal')\n    var HEADER = new Buffer([66, 77, 70, 3])\n\n    module.exports = function (buf) {\n\t  if (typeof buf === 'string') { return buf.substring(0, 3) === 'BMF' }\n\t  return buf.length > 4 && equal(buf.slice(0, 4), HEADER)\n    }\n  }).call(this, require('buffer').Buffer)\n}, {'buffer': 37, 'buffer-equal': 12}],\n12: [function (require, module, exports) {\n  var Buffer = require('buffer').Buffer // for use with browserify\n\n  module.exports = function (a, b) {\n\t    if (!Buffer.isBuffer(a)) return undefined\n\t    if (!Buffer.isBuffer(b)) return undefined\n\t    if (typeof a.equals === 'function') return a.equals(b)\n\t    if (a.length !== b.length) return false\n\n\t    for (var i = 0; i < a.length; i++) {\n\t        if (a[i] !== b[i]) return false\n\t    }\n\n\t    return true\n  }\n}, {'buffer': 37}],\n13: [function (require, module, exports) {\n  module.exports = function parseBMFontAscii (data) {\n\t  if (!data) { throw new Error('no data provided') }\n\t  data = data.toString().trim()\n\n\t  var output = {\n\t    pages: [],\n\t    chars: [],\n\t    kernings: []\n\t  }\n\n\t  var lines = data.split(/\\r\\n?|\\n/g)\n\n\t  if (lines.length === 0) { throw new Error('no data in BMFont file') }\n\n\t  for (var i = 0; i < lines.length; i++) {\n\t    var lineData = splitLine(lines[i], i)\n\t    if (!lineData) // skip empty lines\n\t      { continue }\n\n\t    if (lineData.key === 'page') {\n\t      if (typeof lineData.data.id !== 'number') { throw new Error('malformed file at line ' + i + ' -- needs page id=N') }\n\t      if (typeof lineData.data.file !== 'string') { throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"') }\n\t      output.pages[lineData.data.id] = lineData.data.file\n\t    } else if (lineData.key === 'chars' || lineData.key === 'kernings') {\n\t      // ... do nothing for these two ...\n\t    } else if (lineData.key === 'char') {\n\t      output.chars.push(lineData.data)\n\t    } else if (lineData.key === 'kerning') {\n\t      output.kernings.push(lineData.data)\n\t    } else {\n\t      output[lineData.key] = lineData.data\n\t    }\n\t  }\n\n\t  return output\n  }\n\n  function splitLine (line, idx) {\n\t  line = line.replace(/\\t+/g, ' ').trim()\n\t  if (!line) { return null }\n\n\t  var space = line.indexOf(' ')\n\t  if (space === -1) { throw new Error('no named row at line ' + idx) }\n\n\t  var key = line.substring(0, space)\n\n\t  line = line.substring(space + 1)\n\t  // clear \"letter\" field as it is non-standard and\n\t  // requires additional complexity to parse \" / = symbols\n\t  line = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '')\n\t  line = line.split('=')\n\t  line = line.map(function (str) {\n\t    return str.trim().match((/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g))\n\t  })\n\n\t  var data = []\n\t  for (var i = 0; i < line.length; i++) {\n\t    var dt = line[i]\n\t    if (i === 0) {\n\t      data.push({\n\t        key: dt[0],\n\t        data: ''\n\t      })\n\t    } else if (i === line.length - 1) {\n\t      data[data.length - 1].data = parseData(dt[0])\n\t    } else {\n\t      data[data.length - 1].data = parseData(dt[0])\n\t      data.push({\n\t        key: dt[1],\n\t        data: ''\n\t      })\n\t    }\n\t  }\n\n\t  var out = {\n\t    key: key,\n\t    data: {}\n\t  }\n\n\t  data.forEach(function (v) {\n\t    out.data[v.key] = v.data\n\t  })\n\n\t  return out\n  }\n\n  function parseData (data) {\n\t  if (!data || data.length === 0) { return '' }\n\n\t  if (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0) { return data.substring(1, data.length - 1) }\n\t  if (data.indexOf(',') !== -1) { return parseIntList(data) }\n\t  return parseInt(data, 10)\n  }\n\n  function parseIntList (data) {\n\t  return data.split(',').map(function (val) {\n\t    return parseInt(val, 10)\n\t  })\n  }\n}, {}],\n14: [function (require, module, exports) {\n  var HEADER = [66, 77, 70]\n\n  module.exports = function readBMFontBinary (buf) {\n\t  if (buf.length < 6) { throw new Error('invalid buffer length for BMFont') }\n\n\t  var header = HEADER.every(function (byte, i) {\n\t    return buf.readUInt8(i) === byte\n\t  })\n\n\t  if (!header) { throw new Error('BMFont missing BMF byte header') }\n\n\t  var i = 3\n\t  var vers = buf.readUInt8(i++)\n\t  if (vers > 3) { throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)') }\n\n\t  var target = { kernings: [], chars: [] }\n\t  for (var b = 0; b < 5; b++) { i += readBlock(target, buf, i) }\n\t  return target\n  }\n\n  function readBlock (target, buf, i) {\n\t  if (i > buf.length - 1) { return 0 }\n\n\t  var blockID = buf.readUInt8(i++)\n\t  var blockSize = buf.readInt32LE(i)\n\t  i += 4\n\n\t  switch (blockID) {\n\t    case 1:\n\t      target.info = readInfo(buf, i)\n\t      break\n\t    case 2:\n\t      target.common = readCommon(buf, i)\n\t      break\n\t    case 3:\n\t      target.pages = readPages(buf, i, blockSize)\n\t      break\n\t    case 4:\n\t      target.chars = readChars(buf, i, blockSize)\n\t      break\n\t    case 5:\n\t      target.kernings = readKernings(buf, i, blockSize)\n\t      break\n\t  }\n\t  return 5 + blockSize\n  }\n\n  function readInfo (buf, i) {\n\t  var info = {}\n\t  info.size = buf.readInt16LE(i)\n\n\t  var bitField = buf.readUInt8(i + 2)\n\t  info.smooth = (bitField >> 7) & 1\n\t  info.unicode = (bitField >> 6) & 1\n\t  info.italic = (bitField >> 5) & 1\n\t  info.bold = (bitField >> 4) & 1\n\n\t  // fixedHeight is only mentioned in binary spec\n\t  if ((bitField >> 3) & 1) { info.fixedHeight = 1 }\n\n\t  info.charset = buf.readUInt8(i + 3) || ''\n\t  info.stretchH = buf.readUInt16LE(i + 4)\n\t  info.aa = buf.readUInt8(i + 6)\n\t  info.padding = [\n\t    buf.readInt8(i + 7),\n\t    buf.readInt8(i + 8),\n\t    buf.readInt8(i + 9),\n\t    buf.readInt8(i + 10)\n\t  ]\n\t  info.spacing = [\n\t    buf.readInt8(i + 11),\n\t    buf.readInt8(i + 12)\n\t  ]\n\t  info.outline = buf.readUInt8(i + 13)\n\t  info.face = readStringNT(buf, i + 14)\n\t  return info\n  }\n\n  function readCommon (buf, i) {\n\t  var common = {}\n\t  common.lineHeight = buf.readUInt16LE(i)\n\t  common.base = buf.readUInt16LE(i + 2)\n\t  common.scaleW = buf.readUInt16LE(i + 4)\n\t  common.scaleH = buf.readUInt16LE(i + 6)\n\t  common.pages = buf.readUInt16LE(i + 8)\n\t  var bitField = buf.readUInt8(i + 10)\n\t  common.packed = 0\n\t  common.alphaChnl = buf.readUInt8(i + 11)\n\t  common.redChnl = buf.readUInt8(i + 12)\n\t  common.greenChnl = buf.readUInt8(i + 13)\n\t  common.blueChnl = buf.readUInt8(i + 14)\n\t  return common\n  }\n\n  function readPages (buf, i, size) {\n\t  var pages = []\n\t  var text = readNameNT(buf, i)\n\t  var len = text.length + 1\n\t  var count = size / len\n\t  for (var c = 0; c < count; c++) {\n\t    pages[c] = buf.slice(i, i + text.length).toString('utf8')\n\t    i += len\n\t  }\n\t  return pages\n  }\n\n  function readChars (buf, i, blockSize) {\n\t  var chars = []\n\n\t  var count = blockSize / 20\n\t  for (var c = 0; c < count; c++) {\n\t    var char = {}\n\t    var off = c * 20\n\t    char.id = buf.readUInt32LE(i + 0 + off)\n\t    char.x = buf.readUInt16LE(i + 4 + off)\n\t    char.y = buf.readUInt16LE(i + 6 + off)\n\t    char.width = buf.readUInt16LE(i + 8 + off)\n\t    char.height = buf.readUInt16LE(i + 10 + off)\n\t    char.xoffset = buf.readInt16LE(i + 12 + off)\n\t    char.yoffset = buf.readInt16LE(i + 14 + off)\n\t    char.xadvance = buf.readInt16LE(i + 16 + off)\n\t    char.page = buf.readUInt8(i + 18 + off)\n\t    char.chnl = buf.readUInt8(i + 19 + off)\n\t    chars[c] = char\n\t  }\n\t  return chars\n  }\n\n  function readKernings (buf, i, blockSize) {\n\t  var kernings = []\n\t  var count = blockSize / 10\n\t  for (var c = 0; c < count; c++) {\n\t    var kern = {}\n\t    var off = c * 10\n\t    kern.first = buf.readUInt32LE(i + 0 + off)\n\t    kern.second = buf.readUInt32LE(i + 4 + off)\n\t    kern.amount = buf.readInt16LE(i + 8 + off)\n\t    kernings[c] = kern\n\t  }\n\t  return kernings\n  }\n\n  function readNameNT (buf, offset) {\n\t  var pos = offset\n\t  for (; pos < buf.length; pos++) {\n\t    if (buf[pos] === 0x00) { break }\n\t  }\n\t  return buf.slice(offset, pos)\n  }\n\n  function readStringNT (buf, offset) {\n\t  return readNameNT(buf, offset).toString('utf8')\n  }\n}, {}],\n15: [function (require, module, exports) {\n  var parseAttributes = require('./parse-attribs')\n  var parseFromString = require('xml-parse-from-string')\n\n  // In some cases element.attribute.nodeName can return\n  // all lowercase values.. so we need to map them to the correct\n  // case\n  var NAME_MAP = {\n\t  scaleh: 'scaleH',\n\t  scalew: 'scaleW',\n\t  stretchh: 'stretchH',\n\t  lineheight: 'lineHeight',\n\t  alphachnl: 'alphaChnl',\n\t  redchnl: 'redChnl',\n\t  greenchnl: 'greenChnl',\n\t  bluechnl: 'blueChnl'\n  }\n\n  module.exports = function parse (data) {\n\t  data = data.toString()\n\n\t  var xmlRoot = parseFromString(data)\n\t  var output = {\n\t    pages: [],\n\t    chars: [],\n\t    kernings: []\n\t  }\n\n\t  // get config settings\n\t  ;['info', 'common'].forEach(function (key) {\n\t    var element = xmlRoot.getElementsByTagName(key)[0]\n\t    if (element) { output[key] = parseAttributes(getAttribs(element)) }\n\t  })\n\n\t  // get page info\n\t  var pageRoot = xmlRoot.getElementsByTagName('pages')[0]\n\t  if (!pageRoot) { throw new Error('malformed file -- no <pages> element') }\n\t  var pages = pageRoot.getElementsByTagName('page')\n\t  for (var i = 0; i < pages.length; i++) {\n\t    var p = pages[i]\n\t    var id = parseInt(p.getAttribute('id'), 10)\n\t    var file = p.getAttribute('file')\n\t    if (isNaN(id)) { throw new Error('malformed file -- page \"id\" attribute is NaN') }\n\t    if (!file) { throw new Error('malformed file -- needs page \"file\" attribute') }\n\t    output.pages[parseInt(id, 10)] = file\n\t  }\n\n\t  // get kernings / chars\n\t  ['chars', 'kernings'].forEach(function (key) {\n\t    var element = xmlRoot.getElementsByTagName(key)[0]\n\t    if (!element) { return }\n\t    var childTag = key.substring(0, key.length - 1)\n\t    var children = element.getElementsByTagName(childTag)\n\t    for (var i = 0; i < children.length; i++) {\n\t      var child = children[i]\n\t      output[key].push(parseAttributes(getAttribs(child)))\n\t    }\n\t  })\n\t  return output\n  }\n\n  function getAttribs (element) {\n\t  var attribs = getAttribList(element)\n\t  return attribs.reduce(function (dict, attrib) {\n\t    var key = mapName(attrib.nodeName)\n\t    dict[key] = attrib.nodeValue\n\t    return dict\n\t  }, {})\n  }\n\n  function getAttribList (element) {\n\t  // IE8+ and modern browsers\n\t  var attribs = []\n\t  for (var i = 0; i < element.attributes.length; i++) { attribs.push(element.attributes[i]) }\n\t  return attribs\n  }\n\n  function mapName (nodeName) {\n\t  return NAME_MAP[nodeName.toLowerCase()] || nodeName\n  }\n}, {'./parse-attribs': 16, 'xml-parse-from-string': 17}],\n16: [function (require, module, exports) {\n  // Some versions of GlyphDesigner have a typo\n  // that causes some bugs with parsing.\n  // Need to confirm with recent version of the software\n  // to see whether this is still an issue or not.\n  var GLYPH_DESIGNER_ERROR = 'chasrset'\n\n  module.exports = function parseAttributes (obj) {\n\t  if (GLYPH_DESIGNER_ERROR in obj) {\n\t    obj['charset'] = obj[GLYPH_DESIGNER_ERROR]\n\t    delete obj[GLYPH_DESIGNER_ERROR]\n\t  }\n\n\t  for (var k in obj) {\n\t    if (k === 'face' || k === 'charset') { continue } else if (k === 'padding' || k === 'spacing') { obj[k] = parseIntList(obj[k]) } else { obj[k] = parseInt(obj[k], 10) }\n\t  }\n\t  return obj\n  }\n\n  function parseIntList (data) {\n\t  return data.split(',').map(function (val) {\n\t    return parseInt(val, 10)\n\t  })\n  }\n}, {}],\n17: [function (require, module, exports) {\n  module.exports = (function xmlparser () {\n\t  // common browsers\n\t  if (typeof window.DOMParser !== 'undefined') {\n\t    return function (str) {\n\t      var parser = new window.DOMParser()\n\t      return parser.parseFromString(str, 'application/xml')\n\t    }\n\t  }\n\n\t  // IE8 fallback\n\t  if (typeof window.ActiveXObject !== 'undefined' &&\n\t      new window.ActiveXObject('Microsoft.XMLDOM')) {\n\t    return function (str) {\n\t      var xmlDoc = new window.ActiveXObject('Microsoft.XMLDOM')\n\t      xmlDoc.async = 'false'\n\t      xmlDoc.loadXML(str)\n\t      return xmlDoc\n\t    }\n\t  }\n\n\t  // last resort fallback\n\t  return function (str) {\n\t    var div = document.createElement('div')\n\t    div.innerHTML = str\n\t    return div\n\t  }\n  })()\n}, {}],\n18: [function (require, module, exports) {\n  'use strict'\n  var window = require('global/window')\n  var once = require('once')\n  var isFunction = require('is-function')\n  var parseHeaders = require('parse-headers')\n  var xtend = require('xtend')\n\n  module.exports = createXHR\n  createXHR.XMLHttpRequest = window.XMLHttpRequest || noop\n  createXHR.XDomainRequest = 'withCredentials' in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\n  forEachArray(['get', 'put', 'post', 'patch', 'head', 'delete'], function (method) {\n\t    createXHR[method === 'delete' ? 'del' : method] = function (uri, options, callback) {\n\t        options = initParams(uri, options, callback)\n\t        options.method = method.toUpperCase()\n\t        return _createXHR(options)\n\t    }\n  })\n\n  function forEachArray (array, iterator) {\n\t    for (var i = 0; i < array.length; i++) {\n\t        iterator(array[i])\n\t    }\n  }\n\n  function isEmpty (obj) {\n\t    for (var i in obj) {\n\t        if (obj.hasOwnProperty(i)) return false\n\t    }\n\t    return true\n  }\n\n  function initParams (uri, options, callback) {\n\t    var params = uri\n\n\t    if (isFunction(options)) {\n\t        callback = options\n\t        if (typeof uri === 'string') {\n\t            params = {uri: uri}\n\t        }\n\t    } else {\n\t        params = xtend(options, {uri: uri})\n\t    }\n\n\t    params.callback = callback\n\t    return params\n  }\n\n  function createXHR (uri, options, callback) {\n\t    options = initParams(uri, options, callback)\n\t    return _createXHR(options)\n  }\n\n  function _createXHR (options) {\n\t    var callback = options.callback\n\t    if (typeof callback === 'undefined') {\n\t        throw new Error('callback argument missing')\n\t    }\n\t    callback = once(callback)\n\n\t    function readystatechange () {\n\t        if (xhr.readyState === 4) {\n\t            loadFunc()\n\t        }\n\t    }\n\n\t    function getBody () {\n\t        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n\t        var body = undefined\n\n\t        if (xhr.response) {\n\t            body = xhr.response\n\t        } else if (xhr.responseType === 'text' || !xhr.responseType) {\n\t            body = xhr.responseText || xhr.responseXML\n\t        }\n\n\t        if (isJson) {\n\t            try {\n\t                body = JSON.parse(body)\n\t            } catch (e) {}\n\t        }\n\n\t        return body\n\t    }\n\n\t    var failureResponse = {\n\t                body: undefined,\n\t                headers: {},\n\t                statusCode: 0,\n\t                method: method,\n\t                url: uri,\n\t                rawRequest: xhr\n\t            }\n\n\t    function errorFunc (evt) {\n\t        clearTimeout(timeoutTimer)\n\t        if (!(evt instanceof Error)) {\n\t            evt = new Error('' + (evt || 'Unknown XMLHttpRequest Error'))\n\t        }\n\t        evt.statusCode = 0\n\t        callback(evt, failureResponse)\n\t    }\n\n\t    // will load the data & process the response in a special response object\n\t    function loadFunc () {\n\t        if (aborted) return\n\t        var status\n\t        clearTimeout(timeoutTimer)\n\t        if (options.useXDR && xhr.status === undefined) {\n\t            // IE8 CORS GET successful response doesn't have a status field, but body is fine\n\t            status = 200\n\t        } else {\n\t            status = (xhr.status === 1223 ? 204 : xhr.status)\n\t        }\n\t        var response = failureResponse\n\t        var err = null\n\n\t        if (status !== 0) {\n\t            response = {\n\t                body: getBody(),\n\t                statusCode: status,\n\t                method: method,\n\t                headers: {},\n\t                url: uri,\n\t                rawRequest: xhr\n\t            }\n\t            if (xhr.getAllResponseHeaders) { // remember xhr can in fact be XDR for CORS in IE\n\t                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n\t            }\n\t        } else {\n\t            err = new Error('Internal XMLHttpRequest Error')\n\t        }\n\t        callback(err, response, response.body)\n\t    }\n\n\t    var xhr = options.xhr || null\n\n\t    if (!xhr) {\n\t        if (options.cors || options.useXDR) {\n\t            xhr = new createXHR.XDomainRequest()\n\t        } else {\n\t            xhr = new createXHR.XMLHttpRequest()\n\t        }\n\t    }\n\n\t    var key\n\t    var aborted\n\t    var uri = xhr.url = options.uri || options.url\n\t    var method = xhr.method = options.method || 'GET'\n\t    var body = options.body || options.data || null\n\t    var headers = xhr.headers = options.headers || {}\n\t    var sync = !!options.sync\n\t    var isJson = false\n\t    var timeoutTimer\n\n\t    if ('json' in options) {\n\t        isJson = true\n\t        headers['accept'] || headers['Accept'] || (headers['Accept'] = 'application/json') // Don't override existing accept header declared by user\n\t        if (method !== 'GET' && method !== 'HEAD') {\n\t            headers['content-type'] || headers['Content-Type'] || (headers['Content-Type'] = 'application/json') // Don't override existing accept header declared by user\n\t            body = JSON.stringify(options.json)\n\t        }\n\t    }\n\n\t    xhr.onreadystatechange = readystatechange\n\t    xhr.onload = loadFunc\n\t    xhr.onerror = errorFunc\n\t    // IE9 must have onprogress be set to a unique function.\n\t    xhr.onprogress = function () {\n\t        // IE must die\n\t    }\n\t    xhr.ontimeout = errorFunc\n\t    xhr.open(method, uri, !sync, options.username, options.password)\n\t    // has to be after open\n\t    if (!sync) {\n\t        xhr.withCredentials = !!options.withCredentials\n\t    }\n\t    // Cannot set timeout with sync request\n\t    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n\t    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n\t    if (!sync && options.timeout > 0) {\n\t        timeoutTimer = setTimeout(function () {\n\t            aborted = true// IE9 may still call readystatechange\n\t            xhr.abort('timeout')\n\t            var e = new Error('XMLHttpRequest timeout')\n\t            e.code = 'ETIMEDOUT'\n\t            errorFunc(e)\n\t        }, options.timeout)\n\t    }\n\n\t    if (xhr.setRequestHeader) {\n\t        for (key in headers) {\n\t            if (headers.hasOwnProperty(key)) {\n\t                xhr.setRequestHeader(key, headers[key])\n\t            }\n\t        }\n\t    } else if (options.headers && !isEmpty(options.headers)) {\n\t        throw new Error('Headers cannot be set on an XDomainRequest object')\n\t    }\n\n\t    if ('responseType' in options) {\n\t        xhr.responseType = options.responseType\n\t    }\n\n\t    if ('beforeSend' in options &&\n\t        typeof options.beforeSend === 'function'\n\t    ) {\n\t        options.beforeSend(xhr)\n\t    }\n\n\t    xhr.send(body)\n\n\t    return xhr\n  }\n\n  function noop () {}\n}, {'global/window': 19, 'is-function': 20, 'once': 21, 'parse-headers': 24, 'xtend': 25}],\n19: [function (require, module, exports) {\n  (function (global) {\n    if (typeof window !== 'undefined') {\n\t    module.exports = window\n    } else if (typeof global !== 'undefined') {\n\t    module.exports = global\n    } else if (typeof self !== 'undefined') {\n\t    module.exports = self\n    } else {\n\t    module.exports = {}\n    }\n  }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {})\n}, {}],\n20: [function (require, module, exports) {\n  module.exports = isFunction\n\n  var toString = Object.prototype.toString\n\n  function isFunction (fn) {\n\t  var string = toString.call(fn)\n\t  return string === '[object Function]' ||\n\t    (typeof fn === 'function' && string !== '[object RegExp]') ||\n\t    (typeof window !== 'undefined' &&\n\t     // IE8 and below\n\t     (fn === window.setTimeout ||\n\t      fn === window.alert ||\n\t      fn === window.confirm ||\n\t      fn === window.prompt))\n  }\n}, {}],\n21: [function (require, module, exports) {\n  module.exports = once\n\n  once.proto = once(function () {\n\t  Object.defineProperty(Function.prototype, 'once', {\n\t    value: function () {\n\t      return once(this)\n\t    },\n\t    configurable: true\n\t  })\n  })\n\n  function once (fn) {\n\t  var called = false\n\t  return function () {\n\t    if (called) return\n\t    called = true\n\t    return fn.apply(this, arguments)\n\t  }\n  }\n}, {}],\n22: [function (require, module, exports) {\n  var isFunction = require('is-function')\n\n  module.exports = forEach\n\n  var toString = Object.prototype.toString\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n\n  function forEach (list, iterator, context) {\n\t    if (!isFunction(iterator)) {\n\t        throw new TypeError('iterator must be a function')\n\t    }\n\n\t    if (arguments.length < 3) {\n\t        context = this\n\t    }\n\n\t    if (toString.call(list) === '[object Array]') { forEachArray(list, iterator, context) } else if (typeof list === 'string') { forEachString(list, iterator, context) } else { forEachObject(list, iterator, context) }\n  }\n\n  function forEachArray (array, iterator, context) {\n\t    for (var i = 0, len = array.length; i < len; i++) {\n\t        if (hasOwnProperty.call(array, i)) {\n\t            iterator.call(context, array[i], i, array)\n\t        }\n\t    }\n  }\n\n  function forEachString (string, iterator, context) {\n\t    for (var i = 0, len = string.length; i < len; i++) {\n\t        // no such thing as a sparse string.\n\t        iterator.call(context, string.charAt(i), i, string)\n\t    }\n  }\n\n  function forEachObject (object, iterator, context) {\n\t    for (var k in object) {\n\t        if (hasOwnProperty.call(object, k)) {\n\t            iterator.call(context, object[k], k, object)\n\t        }\n\t    }\n  }\n}, {'is-function': 20}],\n23: [function (require, module, exports) {\n  exports = module.exports = trim\n\n  function trim (str) {\n\t  return str.replace(/^\\s*|\\s*$/g, '')\n  }\n\n  exports.left = function (str) {\n\t  return str.replace(/^\\s*/, '')\n  }\n\n  exports.right = function (str) {\n\t  return str.replace(/\\s*$/, '')\n  }\n}, {}],\n24: [function (require, module, exports) {\n  var trim = require('trim'),\n\t   forEach = require('for-each'),\n\t   isArray = function (arg) {\n\t      return Object.prototype.toString.call(arg) === '[object Array]'\n\t    }\n\n  module.exports = function (headers) {\n\t  if (!headers) { return {} }\n\n\t  var result = {}\n\n\t  forEach(\n\t      trim(headers).split('\\n')\n\t    , function (row) {\n\t        var index = row.indexOf(':'),\n\t           key = trim(row.slice(0, index)).toLowerCase(),\n\t           value = trim(row.slice(index + 1))\n\n\t        if (typeof (result[key]) === 'undefined') {\n\t          result[key] = value\n\t        } else if (isArray(result[key])) {\n\t          result[key].push(value)\n\t        } else {\n\t          result[key] = [ result[key], value ]\n\t        }\n\t      }\n\t  )\n\n\t  return result\n  }\n}, {'for-each': 22, 'trim': 23}],\n25: [function (require, module, exports) {\n  arguments[4][9][0].apply(exports, arguments)\n}, {'dup': 9}],\n26: [function (require, module, exports) {\n  /* eslint-disable no-unused-vars */\n  'use strict'\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n  var propIsEnumerable = Object.prototype.propertyIsEnumerable\n\n  function toObject (val) {\n\t  if (val === null || val === undefined) {\n\t    throw new TypeError('Object.assign cannot be called with null or undefined')\n\t  }\n\n\t  return Object(val)\n  }\n\n  module.exports = Object.assign || function (target, source) {\n\t  var from\n\t  var to = toObject(target)\n\t  var symbols\n\n\t  for (var s = 1; s < arguments.length; s++) {\n\t    from = Object(arguments[s])\n\n\t    for (var key in from) {\n\t      if (hasOwnProperty.call(from, key)) {\n\t        to[key] = from[key]\n\t      }\n\t    }\n\n\t    if (Object.getOwnPropertySymbols) {\n\t      symbols = Object.getOwnPropertySymbols(from)\n\t      for (var i = 0; i < symbols.length; i++) {\n\t        if (propIsEnumerable.call(from, symbols[i])) {\n\t          to[symbols[i]] = from[symbols[i]]\n\t        }\n\t      }\n\t    }\n\t  }\n\n\t  return to\n  }\n}, {}],\n27: [function (require, module, exports) {\n  var dtype = require('dtype')\n  var anArray = require('an-array')\n  var isBuffer = require('is-buffer')\n\n  var CW = [0, 2, 3]\n  var CCW = [2, 1, 3]\n\n  module.exports = function createQuadElements (array, opt) {\n\t    // if user didn't specify an output array\n\t    if (!array || !(anArray(array) || isBuffer(array))) {\n\t        opt = array || {}\n\t        array = null\n\t    }\n\n\t    if (typeof opt === 'number') // backwards-compatible\n\t        { opt = { count: opt } } else { opt = opt || {} }\n\n\t    var type = typeof opt.type === 'string' ? opt.type : 'uint16'\n\t    var count = typeof opt.count === 'number' ? opt.count : 1\n\t    var start = (opt.start || 0)\n\n\t    var dir = opt.clockwise !== false ? CW : CCW,\n\t        a = dir[0],\n\t        b = dir[1],\n\t        c = dir[2]\n\n\t    var numIndices = count * 6\n\n\t    var indices = array || new (dtype(type))(numIndices)\n\t    for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n\t        var x = i + start\n\t        indices[x + 0] = j + 0\n\t        indices[x + 1] = j + 1\n\t        indices[x + 2] = j + 2\n\t        indices[x + 3] = j + a\n\t        indices[x + 4] = j + b\n\t        indices[x + 5] = j + c\n\t    }\n\t    return indices\n  }\n}, {'an-array': 28, 'dtype': 29, 'is-buffer': 30}],\n28: [function (require, module, exports) {\n  var str = Object.prototype.toString\n\n  module.exports = anArray\n\n  function anArray (arr) {\n\t  return (\n\t       arr.BYTES_PER_ELEMENT &&\n\t    str.call(arr.buffer) === '[object ArrayBuffer]' ||\n\t    Array.isArray(arr)\n\t  )\n  }\n}, {}],\n29: [function (require, module, exports) {\n  module.exports = function (dtype) {\n\t  switch (dtype) {\n\t    case 'int8':\n\t      return Int8Array\n\t    case 'int16':\n\t      return Int16Array\n\t    case 'int32':\n\t      return Int32Array\n\t    case 'uint8':\n\t      return Uint8Array\n\t    case 'uint16':\n\t      return Uint16Array\n\t    case 'uint32':\n\t      return Uint32Array\n\t    case 'float32':\n\t      return Float32Array\n\t    case 'float64':\n\t      return Float64Array\n\t    case 'array':\n\t      return Array\n\t    case 'uint8_clamped':\n\t      return Uint8ClampedArray\n\t  }\n  }\n}, {}],\n30: [function (require, module, exports) {\n  /**\n\t * Determine if an object is Buffer\n\t *\n\t * Author:   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * License:  MIT\n\t *\n\t * `npm install is-buffer`\n\t */\n\n  module.exports = function (obj) {\n\t  return !!(obj != null &&\n\t    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)\n\t      (obj.constructor &&\n\t      typeof obj.constructor.isBuffer === 'function' &&\n\t      obj.constructor.isBuffer(obj))\n\t    ))\n  }\n}, {}],\n31: [function (require, module, exports) {\n  var flatten = require('flatten-vertex-data')\n\n  module.exports.attr = setAttribute\n  module.exports.index = setIndex\n\n  function setIndex (geometry, data, itemSize, dtype) {\n\t  if (typeof itemSize !== 'number') itemSize = 1\n\t  if (typeof dtype !== 'number') dtype = 'uint16'\n\n\t  var isR69 = !geometry.index && typeof geometry.setIndex !== 'function'\n\t  var attrib = isR69 ? geometry.getAttribute('index') : geometry.index\n\t  var newAttrib = updateAttribute(attrib, data, itemSize, dtype)\n\t  if (newAttrib) {\n\t    if (isR69) geometry.addAttribute('index', newAttrib)\n\t    else geometry.index = newAttrib\n\t  }\n  }\n\n  function setAttribute (geometry, key, data, itemSize, dtype) {\n\t  if (typeof itemSize !== 'number') itemSize = 3\n\t  if (typeof dtype !== 'number') dtype = 'float32'\n\t  if (Array.isArray(data) &&\n\t    Array.isArray(data[0]) &&\n\t    data[0].length !== itemSize) {\n\t    throw new Error('Nested vertex array has unexpected size; expected ' +\n\t      itemSize + ' but found ' + data[0].length)\n\t  }\n\n\t  var attrib = geometry.getAttribute(key)\n\t  var newAttrib = updateAttribute(attrib, data, itemSize, dtype)\n\t  if (newAttrib) {\n\t    geometry.addAttribute(key, newAttrib)\n\t  }\n  }\n\n  function updateAttribute (attrib, data, itemSize, dtype) {\n\t  data = data || []\n\t  if (!attrib || rebuildAttribute(attrib, data, itemSize)) {\n\t    // create a new array with desired type\n\t    data = flatten(data, dtype)\n\t    attrib = new THREE.BufferAttribute(data, itemSize)\n\t    attrib.needsUpdate = true\n\t    return attrib\n\t  } else {\n\t    // copy data into the existing array\n\t    flatten(data, attrib.array)\n\t    attrib.needsUpdate = true\n\t    return null\n\t  }\n  }\n\n  // Test whether the attribute needs to be re-created,\n  // returns false if we can re-use it as-is.\n  function rebuildAttribute (attrib, data, itemSize) {\n\t  if (attrib.itemSize !== itemSize) return true\n\t  if (!attrib.array) return true\n\t  var attribLength = attrib.array.length\n\t  if (Array.isArray(data) && Array.isArray(data[0])) {\n\t    // [ [ x, y, z ] ]\n\t    return attribLength !== data.length * itemSize\n\t  } else {\n\t    // [ x, y, z ]\n\t    return attribLength !== data.length\n\t  }\n  }\n}, {'flatten-vertex-data': 32}],\n32: [function (require, module, exports) {\n  /* eslint new-cap:0 */\n  var dtype = require('dtype')\n  module.exports = flattenVertexData\n  function flattenVertexData (data, output, offset) {\n\t  if (!data) throw new TypeError('must specify data as first parameter')\n\t  offset = +(offset || 0) | 0\n\n\t  if (Array.isArray(data) && Array.isArray(data[0])) {\n\t    var dim = data[0].length\n\t    var length = data.length * dim\n\n\t    // no output specified, create a new typed array\n\t    if (!output || typeof output === 'string') {\n\t      output = new (dtype(output || 'float32'))(length + offset)\n\t    }\n\n\t    var dstLength = output.length - offset\n\t    if (length !== dstLength) {\n\t      throw new Error('source length ' + length + ' (' + dim + 'x' + data.length + ')' +\n\t        ' does not match destination length ' + dstLength)\n\t    }\n\n\t    for (var i = 0, k = offset; i < data.length; i++) {\n\t      for (var j = 0; j < dim; j++) {\n\t        output[k++] = data[i][j]\n\t      }\n\t    }\n\t  } else {\n\t    if (!output || typeof output === 'string') {\n\t      // no output, create a new one\n\t      var Ctor = dtype(output || 'float32')\n\t      if (offset === 0) {\n\t        output = new Ctor(data)\n\t      } else {\n\t        output = new Ctor(data.length + offset)\n\t        output.set(data, offset)\n\t      }\n\t    } else {\n\t      // store output in existing array\n\t      output.set(data, offset)\n\t    }\n\t  }\n\n\t  return output\n  }\n}, {'dtype': 33}],\n33: [function (require, module, exports) {\n  arguments[4][29][0].apply(exports, arguments)\n}, {'dup': 29}],\n34: [function (require, module, exports) {\n  var assign = require('object-assign')\n\n  module.exports = function createSDFShader (opt) {\n\t  opt = opt || {}\n\t  var opacity = typeof opt.opacity === 'number' ? opt.opacity : 1\n\t  var alphaTest = typeof opt.alphaTest === 'number' ? opt.alphaTest : 0.0001\n\t  var precision = opt.precision || 'highp'\n\t  var color = opt.color\n\t  var map = opt.map\n\n\t  // remove to satisfy r73\n\t  delete opt.map\n\t  delete opt.color\n\t  delete opt.precision\n\t  delete opt.opacity\n\n\t  return assign({\n\t    uniforms: {\n\t      opacity: { type: 'f', value: opacity },\n\t      map: { type: 't', value: map || new THREE.Texture() },\n\t      color: { type: 'c', value: new THREE.Color(color) }\n\t    },\n\t    vertexShader: [\n\t      'attribute vec2 uv;',\n\t      'attribute vec4 position;',\n\t      'uniform mat4 projectionMatrix;',\n\t      'uniform mat4 modelViewMatrix;',\n\t      'varying vec2 vUv;',\n\t      'void main() {',\n\t      'vUv = uv;',\n\t      'gl_Position = projectionMatrix * modelViewMatrix * position;',\n\t      '}'\n\t    ].join('\\n'),\n\t    fragmentShader: [\n\t      '#ifdef GL_OES_standard_derivatives',\n\t      '#extension GL_OES_standard_derivatives : enable',\n\t      '#endif',\n\t      'precision ' + precision + ' float;',\n\t      'uniform float opacity;',\n\t      'uniform vec3 color;',\n\t      'uniform sampler2D map;',\n\t      'varying vec2 vUv;',\n\n\t      'float aastep(float value) {',\n\t      '  #ifdef GL_OES_standard_derivatives',\n\t      '    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;',\n\t      '  #else',\n\t      '    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));',\n\t      '  #endif',\n\t      '  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);',\n\t      '}',\n\n\t      'void main() {',\n\t      '  vec4 texColor = texture2D(map, vUv);',\n\t      '  float alpha = aastep(texColor.a);',\n\t      '  gl_FragColor = vec4(color, opacity * alpha);',\n\t      alphaTest === 0\n\t        ? ''\n\t        : '  if (gl_FragColor.a < ' + alphaTest + ') discard;',\n\t      '}'\n\t    ].join('\\n')\n\t  }, opt)\n  }\n}, {'object-assign': 26}],\n35: [function (require, module, exports) {\n  var loadFont = require('load-bmfont')\n  // global.THREE = require('three')\n\n  // A utility to load a font, then a texture\n  module.exports = function (opt, cb) {\n\t  loadFont(opt.font, function (err, font) {\n\t    if (err) throw err\n      PANOLENS.Utils.TextureLoader.load(opt.image, function (tex) {\n\t      cb(font, tex)\n\t    })\n\t  })\n  }\n}, {'load-bmfont': 10}],\n36: [function (require, module, exports) {\n  var createText = require('../')\n  var SDFShader = require('../shaders/sdf')\n\n  if (PANOLENS && PANOLENS.Utils && PANOLENS.SpriteText) {\n    PANOLENS.Utils.loadBMFont = function (fontObject, callback) {\n      require('./load')(fontObject, PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype, callback))\n    }\n    PANOLENS.SpriteText.prototype.generateTextGeometry = createText\n    PANOLENS.SpriteText.prototype.generateSDFShader = SDFShader\n  }\n}, {'../': 1, '../shaders/sdf': 34, './load': 35}],\n37: [function (require, module, exports) {\n  (function (global) {\n    /*!\n\t * The buffer module from node.js, for the browser.\n\t *\n\t * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * @license  MIT\n\t */\n    /* eslint-disable no-proto */\n\n    'use strict'\n\n    var base64 = require('base64-js')\n    var ieee754 = require('ieee754')\n    var isArray = require('isarray')\n\n    exports.Buffer = Buffer\n    exports.SlowBuffer = SlowBuffer\n    exports.INSPECT_MAX_BYTES = 50\n    Buffer.poolSize = 8192 // not used by this implementation\n\n    var rootParent = {}\n\n    /**\n\t * If `Buffer.TYPED_ARRAY_SUPPORT`:\n\t *   === true    Use Uint8Array implementation (fastest)\n\t *   === false   Use Object implementation (most compatible, even IE6)\n\t *\n\t * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n\t * Opera 11.6+, iOS 4.2+.\n\t *\n\t * Due to various browser bugs, sometimes the Object implementation will be used even\n\t * when the browser supports typed arrays.\n\t *\n\t * Note:\n\t *\n\t *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n\t *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n\t *\n\t *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n\t *\n\t *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n\t *     incorrect length in some situations.\n\n\t * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n\t * get the Object implementation, which is slower but behaves correctly.\n\t */\n    Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n\t  ? global.TYPED_ARRAY_SUPPORT\n\t  : typedArraySupport()\n\n    function typedArraySupport () {\n\t  try {\n\t    var arr = new Uint8Array(1)\n\t    arr.foo = function () { return 42 }\n\t    return arr.foo() === 42 && // typed array instances can be augmented\n\t        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n\t        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n\t  } catch (e) {\n\t    return false\n\t  }\n    }\n\n    function kMaxLength () {\n\t  return Buffer.TYPED_ARRAY_SUPPORT\n\t    ? 0x7fffffff\n\t    : 0x3fffffff\n    }\n\n    /**\n\t * Class: Buffer\n\t * =============\n\t *\n\t * The Buffer constructor returns instances of `Uint8Array` that are augmented\n\t * with function properties for all the node `Buffer` API functions. We use\n\t * `Uint8Array` so that square bracket notation works as expected -- it returns\n\t * a single octet.\n\t *\n\t * By augmenting the instances, we can avoid modifying the `Uint8Array`\n\t * prototype.\n\t */\n    function Buffer (arg) {\n\t  if (!(this instanceof Buffer)) {\n\t    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n\t    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n\t    return new Buffer(arg)\n\t  }\n\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this.length = 0\n\t    this.parent = undefined\n\t  }\n\n\t  // Common case.\n\t  if (typeof arg === 'number') {\n\t    return fromNumber(this, arg)\n\t  }\n\n\t  // Slightly less common case.\n\t  if (typeof arg === 'string') {\n\t    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n\t  }\n\n\t  // Unusual.\n\t  return fromObject(this, arg)\n    }\n\n    function fromNumber (that, length) {\n\t  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    for (var i = 0; i < length; i++) {\n\t      that[i] = 0\n\t    }\n\t  }\n\t  return that\n    }\n\n    function fromString (that, string, encoding) {\n\t  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n\t  // Assumption: byteLength() return value is always < kMaxLength.\n\t  var length = byteLength(string, encoding) | 0\n\t  that = allocate(that, length)\n\n\t  that.write(string, encoding)\n\t  return that\n    }\n\n    function fromObject (that, object) {\n\t  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n\t  if (isArray(object)) return fromArray(that, object)\n\n\t  if (object == null) {\n\t    throw new TypeError('must start with number, buffer, array or string')\n\t  }\n\n\t  if (typeof ArrayBuffer !== 'undefined') {\n\t    if (object.buffer instanceof ArrayBuffer) {\n\t      return fromTypedArray(that, object)\n\t    }\n\t    if (object instanceof ArrayBuffer) {\n\t      return fromArrayBuffer(that, object)\n\t    }\n\t  }\n\n\t  if (object.length) return fromArrayLike(that, object)\n\n\t  return fromJsonObject(that, object)\n    }\n\n    function fromBuffer (that, buffer) {\n\t  var length = checked(buffer.length) | 0\n\t  that = allocate(that, length)\n\t  buffer.copy(that, 0, 0, length)\n\t  return that\n    }\n\n    function fromArray (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    // Duplicate of fromArray() to keep fromArray() monomorphic.\n    function fromTypedArray (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  // Truncating the elements is probably not what people expect from typed\n\t  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n\t  // of the old Buffer constructor.\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    function fromArrayBuffer (that, array) {\n\t  // array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(array)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that = fromTypedArray(that, new Uint8Array(array))\n\t  }\n\t  return that\n    }\n\n    function fromArrayLike (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    // Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n    // Returns a zero-length buffer for inputs that don't conform to the spec.\n    function fromJsonObject (that, object) {\n\t  var array\n\t  var length = 0\n\n\t  if (object.type === 'Buffer' && isArray(object.data)) {\n\t    array = object.data\n\t    length = checked(array.length) | 0\n\t  }\n\t  that = allocate(that, length)\n\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n    }\n\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t  Buffer.prototype.__proto__ = Uint8Array.prototype\n\t  Buffer.__proto__ = Uint8Array\n    } else {\n\t  // pre-set for values that may exist in the future\n\t  Buffer.prototype.length = undefined\n\t  Buffer.prototype.parent = undefined\n    }\n\n    function allocate (that, length) {\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(length)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that.length = length\n\t  }\n\n\t  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n\t  if (fromPool) that.parent = rootParent\n\n\t  return that\n    }\n\n    function checked (length) {\n\t  // Note: cannot use `length < kMaxLength` here because that fails when\n\t  // length is NaN (which is otherwise coerced to zero.)\n\t  if (length >= kMaxLength()) {\n\t    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n\t                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n\t  }\n\t  return length | 0\n    }\n\n    function SlowBuffer (subject, encoding) {\n\t  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n\t  var buf = new Buffer(subject, encoding)\n\t  delete buf.parent\n\t  return buf\n    }\n\n    Buffer.isBuffer = function isBuffer (b) {\n\t  return !!(b != null && b._isBuffer)\n    }\n\n    Buffer.compare = function compare (a, b) {\n\t  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n\t    throw new TypeError('Arguments must be Buffers')\n\t  }\n\n\t  if (a === b) return 0\n\n\t  var x = a.length\n\t  var y = b.length\n\n\t  var i = 0\n\t  var len = Math.min(x, y)\n\t  while (i < len) {\n\t    if (a[i] !== b[i]) break\n\n\t    ++i\n\t  }\n\n\t  if (i !== len) {\n\t    x = a[i]\n\t    y = b[i]\n\t  }\n\n\t  if (x < y) return -1\n\t  if (y < x) return 1\n\t  return 0\n    }\n\n    Buffer.isEncoding = function isEncoding (encoding) {\n\t  switch (String(encoding).toLowerCase()) {\n\t    case 'hex':\n\t    case 'utf8':\n\t    case 'utf-8':\n\t    case 'ascii':\n\t    case 'binary':\n\t    case 'base64':\n\t    case 'raw':\n\t    case 'ucs2':\n\t    case 'ucs-2':\n\t    case 'utf16le':\n\t    case 'utf-16le':\n\t      return true\n\t    default:\n\t      return false\n\t  }\n    }\n\n    Buffer.concat = function concat (list, length) {\n\t  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n\t  if (list.length === 0) {\n\t    return new Buffer(0)\n\t  }\n\n\t  var i\n\t  if (length === undefined) {\n\t    length = 0\n\t    for (i = 0; i < list.length; i++) {\n\t      length += list[i].length\n\t    }\n\t  }\n\n\t  var buf = new Buffer(length)\n\t  var pos = 0\n\t  for (i = 0; i < list.length; i++) {\n\t    var item = list[i]\n\t    item.copy(buf, pos)\n\t    pos += item.length\n\t  }\n\t  return buf\n    }\n\n    function byteLength (string, encoding) {\n\t  if (typeof string !== 'string') string = '' + string\n\n\t  var len = string.length\n\t  if (len === 0) return 0\n\n\t  // Use a for loop to avoid recursion\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'ascii':\n\t      case 'binary':\n\t      // Deprecated\n\t      case 'raw':\n\t      case 'raws':\n\t        return len\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8ToBytes(string).length\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return len * 2\n\t      case 'hex':\n\t        return len >>> 1\n\t      case 'base64':\n\t        return base64ToBytes(string).length\n\t      default:\n\t        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n    }\n    Buffer.byteLength = byteLength\n\n    function slowToString (encoding, start, end) {\n\t  var loweredCase = false\n\n\t  start = start | 0\n\t  end = end === undefined || end === Infinity ? this.length : end | 0\n\n\t  if (!encoding) encoding = 'utf8'\n\t  if (start < 0) start = 0\n\t  if (end > this.length) end = this.length\n\t  if (end <= start) return ''\n\n\t  while (true) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexSlice(this, start, end)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Slice(this, start, end)\n\n\t      case 'ascii':\n\t        return asciiSlice(this, start, end)\n\n\t      case 'binary':\n\t        return binarySlice(this, start, end)\n\n\t      case 'base64':\n\t        return base64Slice(this, start, end)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return utf16leSlice(this, start, end)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = (encoding + '').toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n    }\n\n    // Even though this property is private, it shouldn't be removed because it is\n    // used by `is-buffer` to detect buffer instances in Safari 5-7.\n    Buffer.prototype._isBuffer = true\n\n    Buffer.prototype.toString = function toString () {\n\t  var length = this.length | 0\n\t  if (length === 0) return ''\n\t  if (arguments.length === 0) return utf8Slice(this, 0, length)\n\t  return slowToString.apply(this, arguments)\n    }\n\n    Buffer.prototype.equals = function equals (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return true\n\t  return Buffer.compare(this, b) === 0\n    }\n\n    Buffer.prototype.inspect = function inspect () {\n\t  var str = ''\n\t  var max = exports.INSPECT_MAX_BYTES\n\t  if (this.length > 0) {\n\t    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n\t    if (this.length > max) str += ' ... '\n\t  }\n\t  return '<Buffer ' + str + '>'\n    }\n\n    Buffer.prototype.compare = function compare (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return 0\n\t  return Buffer.compare(this, b)\n    }\n\n    Buffer.prototype.indexOf = function indexOf (val, byteOffset) {\n\t  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n\t  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n\t  byteOffset >>= 0\n\n\t  if (this.length === 0) return -1\n\t  if (byteOffset >= this.length) return -1\n\n\t  // Negative offsets start from the end of the buffer\n\t  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n\t  if (typeof val === 'string') {\n\t    if (val.length === 0) return -1 // special case: looking for empty string always fails\n\t    return String.prototype.indexOf.call(this, val, byteOffset)\n\t  }\n\t  if (Buffer.isBuffer(val)) {\n\t    return arrayIndexOf(this, val, byteOffset)\n\t  }\n\t  if (typeof val === 'number') {\n\t    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n\t      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n\t    }\n\t    return arrayIndexOf(this, [ val ], byteOffset)\n\t  }\n\n\t  function arrayIndexOf (arr, val, byteOffset) {\n\t    var foundIndex = -1\n\t    for (var i = 0; byteOffset + i < arr.length; i++) {\n\t      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n\t        if (foundIndex === -1) foundIndex = i\n\t        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n\t      } else {\n\t        foundIndex = -1\n\t      }\n\t    }\n\t    return -1\n\t  }\n\n\t  throw new TypeError('val must be string, number or Buffer')\n    }\n\n    function hexWrite (buf, string, offset, length) {\n\t  offset = Number(offset) || 0\n\t  var remaining = buf.length - offset\n\t  if (!length) {\n\t    length = remaining\n\t  } else {\n\t    length = Number(length)\n\t    if (length > remaining) {\n\t      length = remaining\n\t    }\n\t  }\n\n\t  // must be an even number of digits\n\t  var strLen = string.length\n\t  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n\t  if (length > strLen / 2) {\n\t    length = strLen / 2\n\t  }\n\t  for (var i = 0; i < length; i++) {\n\t    var parsed = parseInt(string.substr(i * 2, 2), 16)\n\t    if (isNaN(parsed)) throw new Error('Invalid hex string')\n\t    buf[offset + i] = parsed\n\t  }\n\t  return i\n    }\n\n    function utf8Write (buf, string, offset, length) {\n\t  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n    }\n\n    function asciiWrite (buf, string, offset, length) {\n\t  return blitBuffer(asciiToBytes(string), buf, offset, length)\n    }\n\n    function binaryWrite (buf, string, offset, length) {\n\t  return asciiWrite(buf, string, offset, length)\n    }\n\n    function base64Write (buf, string, offset, length) {\n\t  return blitBuffer(base64ToBytes(string), buf, offset, length)\n    }\n\n    function ucs2Write (buf, string, offset, length) {\n\t  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n    }\n\n    Buffer.prototype.write = function write (string, offset, length, encoding) {\n\t  // Buffer#write(string)\n\t  if (offset === undefined) {\n\t    encoding = 'utf8'\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, encoding)\n\t  } else if (length === undefined && typeof offset === 'string') {\n\t    encoding = offset\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, offset[, length][, encoding])\n\t  } else if (isFinite(offset)) {\n\t    offset = offset | 0\n\t    if (isFinite(length)) {\n\t      length = length | 0\n\t      if (encoding === undefined) encoding = 'utf8'\n\t    } else {\n\t      encoding = length\n\t      length = undefined\n\t    }\n\t  // legacy write(string, encoding, offset, length) - remove in v0.13\n\t  } else {\n\t    var swap = encoding\n\t    encoding = offset\n\t    offset = length | 0\n\t    length = swap\n\t  }\n\n\t  var remaining = this.length - offset\n\t  if (length === undefined || length > remaining) length = remaining\n\n\t  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n\t    throw new RangeError('attempt to write outside buffer bounds')\n\t  }\n\n\t  if (!encoding) encoding = 'utf8'\n\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexWrite(this, string, offset, length)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Write(this, string, offset, length)\n\n\t      case 'ascii':\n\t        return asciiWrite(this, string, offset, length)\n\n\t      case 'binary':\n\t        return binaryWrite(this, string, offset, length)\n\n\t      case 'base64':\n\t        // Warning: maxLength not taken into account in base64Write\n\t        return base64Write(this, string, offset, length)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return ucs2Write(this, string, offset, length)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n    }\n\n    Buffer.prototype.toJSON = function toJSON () {\n\t  return {\n\t    type: 'Buffer',\n\t    data: Array.prototype.slice.call(this._arr || this, 0)\n\t  }\n    }\n\n    function base64Slice (buf, start, end) {\n\t  if (start === 0 && end === buf.length) {\n\t    return base64.fromByteArray(buf)\n\t  } else {\n\t    return base64.fromByteArray(buf.slice(start, end))\n\t  }\n    }\n\n    function utf8Slice (buf, start, end) {\n\t  end = Math.min(buf.length, end)\n\t  var res = []\n\n\t  var i = start\n\t  while (i < end) {\n\t    var firstByte = buf[i]\n\t    var codePoint = null\n\t    var bytesPerSequence = (firstByte > 0xEF) ? 4\n\t      : (firstByte > 0xDF) ? 3\n\t      : (firstByte > 0xBF) ? 2\n\t      : 1\n\n\t    if (i + bytesPerSequence <= end) {\n\t      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n\t      switch (bytesPerSequence) {\n\t        case 1:\n\t          if (firstByte < 0x80) {\n\t            codePoint = firstByte\n\t          }\n\t          break\n\t        case 2:\n\t          secondByte = buf[i + 1]\n\t          if ((secondByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n\t            if (tempCodePoint > 0x7F) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 3:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n\t            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 4:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          fourthByte = buf[i + 3]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n\t            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t      }\n\t    }\n\n\t    if (codePoint === null) {\n\t      // we did not generate a valid codePoint so insert a\n\t      // replacement char (U+FFFD) and advance only 1 byte\n\t      codePoint = 0xFFFD\n\t      bytesPerSequence = 1\n\t    } else if (codePoint > 0xFFFF) {\n\t      // encode to utf16 (surrogate pair dance)\n\t      codePoint -= 0x10000\n\t      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n\t      codePoint = 0xDC00 | codePoint & 0x3FF\n\t    }\n\n\t    res.push(codePoint)\n\t    i += bytesPerSequence\n\t  }\n\n\t  return decodeCodePointsArray(res)\n    }\n\n    // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n    // the lowest limit is Chrome, with 0x10000 args.\n    // We go 1 magnitude less, for safety\n    var MAX_ARGUMENTS_LENGTH = 0x1000\n\n    function decodeCodePointsArray (codePoints) {\n\t  var len = codePoints.length\n\t  if (len <= MAX_ARGUMENTS_LENGTH) {\n\t    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n\t  }\n\n\t  // Decode in chunks to avoid \"call stack size exceeded\".\n\t  var res = ''\n\t  var i = 0\n\t  while (i < len) {\n\t    res += String.fromCharCode.apply(\n\t      String,\n\t      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n\t    )\n\t  }\n\t  return res\n    }\n\n    function asciiSlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\n\t  for (var i = start; i < end; i++) {\n\t    ret += String.fromCharCode(buf[i] & 0x7F)\n\t  }\n\t  return ret\n    }\n\n    function binarySlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\n\t  for (var i = start; i < end; i++) {\n\t    ret += String.fromCharCode(buf[i])\n\t  }\n\t  return ret\n    }\n\n    function hexSlice (buf, start, end) {\n\t  var len = buf.length\n\n\t  if (!start || start < 0) start = 0\n\t  if (!end || end < 0 || end > len) end = len\n\n\t  var out = ''\n\t  for (var i = start; i < end; i++) {\n\t    out += toHex(buf[i])\n\t  }\n\t  return out\n    }\n\n    function utf16leSlice (buf, start, end) {\n\t  var bytes = buf.slice(start, end)\n\t  var res = ''\n\t  for (var i = 0; i < bytes.length; i += 2) {\n\t    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n\t  }\n\t  return res\n    }\n\n    Buffer.prototype.slice = function slice (start, end) {\n\t  var len = this.length\n\t  start = ~~start\n\t  end = end === undefined ? len : ~~end\n\n\t  if (start < 0) {\n\t    start += len\n\t    if (start < 0) start = 0\n\t  } else if (start > len) {\n\t    start = len\n\t  }\n\n\t  if (end < 0) {\n\t    end += len\n\t    if (end < 0) end = 0\n\t  } else if (end > len) {\n\t    end = len\n\t  }\n\n\t  if (end < start) end = start\n\n\t  var newBuf\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    newBuf = this.subarray(start, end)\n\t    newBuf.__proto__ = Buffer.prototype\n\t  } else {\n\t    var sliceLen = end - start\n\t    newBuf = new Buffer(sliceLen, undefined)\n\t    for (var i = 0; i < sliceLen; i++) {\n\t      newBuf[i] = this[i + start]\n\t    }\n\t  }\n\n\t  if (newBuf.length) newBuf.parent = this.parent || this\n\n\t  return newBuf\n    }\n\n    /*\n\t * Need to make sure that buffer isn't trying to write out of bounds.\n\t */\n    function checkOffset (offset, ext, length) {\n\t  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n\t  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n    }\n\n    Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\n\t  return val\n    }\n\n    Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) {\n\t    checkOffset(offset, byteLength, this.length)\n\t  }\n\n\t  var val = this[offset + --byteLength]\n\t  var mul = 1\n\t  while (byteLength > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --byteLength] * mul\n\t  }\n\n\t  return val\n    }\n\n    Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  return this[offset]\n    }\n\n    Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return this[offset] | (this[offset + 1] << 8)\n    }\n\n    Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return (this[offset] << 8) | this[offset + 1]\n    }\n\n    Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return ((this[offset]) |\n\t      (this[offset + 1] << 8) |\n\t      (this[offset + 2] << 16)) +\n\t      (this[offset + 3] * 0x1000000)\n    }\n\n    Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset] * 0x1000000) +\n\t    ((this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    this[offset + 3])\n    }\n\n    Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\t  mul *= 0x80\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n\t  return val\n    }\n\n    Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var i = byteLength\n\t  var mul = 1\n\t  var val = this[offset + --i]\n\t  while (i > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --i] * mul\n\t  }\n\t  mul *= 0x80\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n\t  return val\n    }\n\n    Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  if (!(this[offset] & 0x80)) return (this[offset])\n\t  return ((0xff - this[offset] + 1) * -1)\n    }\n\n    Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset] | (this[offset + 1] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n    }\n\n    Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset + 1] | (this[offset] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n    }\n\n    Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset]) |\n\t    (this[offset + 1] << 8) |\n\t    (this[offset + 2] << 16) |\n\t    (this[offset + 3] << 24)\n    }\n\n    Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset] << 24) |\n\t    (this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    (this[offset + 3])\n    }\n\n    Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, true, 23, 4)\n    }\n\n    Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, false, 23, 4)\n    }\n\n    Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, true, 52, 8)\n    }\n\n    Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, false, 52, 8)\n    }\n\n    function checkInt (buf, value, offset, ext, max, min) {\n\t  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n\t  if (value > max || value < min) throw new RangeError('value is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('index out of range')\n    }\n\n    Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n\t  var mul = 1\n\t  var i = 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n    }\n\n    function objectWriteUInt16 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n\t    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n\t      (littleEndian ? i : 1 - i) * 8\n\t  }\n    }\n\n    Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n    }\n\n    Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n    }\n\n    function objectWriteUInt32 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n\t    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n\t  }\n    }\n\n    Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset + 3] = (value >>> 24)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\n\t  var i = 0\n\t  var mul = 1\n\t  var sub = value < 0 ? 1 : 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  var sub = value < 0 ? 1 : 0\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\n\t  return offset + byteLength\n    }\n\n    Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  if (value < 0) value = 0xff + value + 1\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n    }\n\n    Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n    }\n\n    Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n    }\n\n    Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 3] = (value >>> 24)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n    }\n\n    function checkIEEE754 (buf, value, offset, ext, max, min) {\n\t  if (value > max || value < min) throw new RangeError('value is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('index out of range')\n\t  if (offset < 0) throw new RangeError('index out of range')\n    }\n\n    function writeFloat (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n\t  return offset + 4\n    }\n\n    Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, true, noAssert)\n    }\n\n    Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, false, noAssert)\n    }\n\n    function writeDouble (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n\t  return offset + 8\n    }\n\n    Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, true, noAssert)\n    }\n\n    Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, false, noAssert)\n    }\n\n    // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n    Buffer.prototype.copy = function copy (target, targetStart, start, end) {\n\t  if (!start) start = 0\n\t  if (!end && end !== 0) end = this.length\n\t  if (targetStart >= target.length) targetStart = target.length\n\t  if (!targetStart) targetStart = 0\n\t  if (end > 0 && end < start) end = start\n\n\t  // Copy 0 bytes; we're done\n\t  if (end === start) return 0\n\t  if (target.length === 0 || this.length === 0) return 0\n\n\t  // Fatal error conditions\n\t  if (targetStart < 0) {\n\t    throw new RangeError('targetStart out of bounds')\n\t  }\n\t  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n\t  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n\t  // Are we oob?\n\t  if (end > this.length) end = this.length\n\t  if (target.length - targetStart < end - start) {\n\t    end = target.length - targetStart + start\n\t  }\n\n\t  var len = end - start\n\t  var i\n\n\t  if (this === target && start < targetStart && targetStart < end) {\n\t    // descending copy from end\n\t    for (i = len - 1; i >= 0; i--) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // ascending copy from start\n\t    for (i = 0; i < len; i++) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else {\n\t    Uint8Array.prototype.set.call(\n\t      target,\n\t      this.subarray(start, start + len),\n\t      targetStart\n\t    )\n\t  }\n\n\t  return len\n    }\n\n    // fill(value, start=0, end=buffer.length)\n    Buffer.prototype.fill = function fill (value, start, end) {\n\t  if (!value) value = 0\n\t  if (!start) start = 0\n\t  if (!end) end = this.length\n\n\t  if (end < start) throw new RangeError('end < start')\n\n\t  // Fill 0 bytes; we're done\n\t  if (end === start) return\n\t  if (this.length === 0) return\n\n\t  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n\t  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n\t  var i\n\t  if (typeof value === 'number') {\n\t    for (i = start; i < end; i++) {\n\t      this[i] = value\n\t    }\n\t  } else {\n\t    var bytes = utf8ToBytes(value.toString())\n\t    var len = bytes.length\n\t    for (i = start; i < end; i++) {\n\t      this[i] = bytes[i % len]\n\t    }\n\t  }\n\n\t  return this\n    }\n\n    // HELPER FUNCTIONS\n    // ================\n\n    var INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\n    function base64clean (str) {\n\t  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n\t  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n\t  // Node converts strings with length < 2 to ''\n\t  if (str.length < 2) return ''\n\t  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\t  while (str.length % 4 !== 0) {\n\t    str = str + '='\n\t  }\n\t  return str\n    }\n\n    function stringtrim (str) {\n\t  if (str.trim) return str.trim()\n\t  return str.replace(/^\\s+|\\s+$/g, '')\n    }\n\n    function toHex (n) {\n\t  if (n < 16) return '0' + n.toString(16)\n\t  return n.toString(16)\n    }\n\n    function utf8ToBytes (string, units) {\n\t  units = units || Infinity\n\t  var codePoint\n\t  var length = string.length\n\t  var leadSurrogate = null\n\t  var bytes = []\n\n\t  for (var i = 0; i < length; i++) {\n\t    codePoint = string.charCodeAt(i)\n\n\t    // is surrogate component\n\t    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n\t      // last char was a lead\n\t      if (!leadSurrogate) {\n\t        // no lead yet\n\t        if (codePoint > 0xDBFF) {\n\t          // unexpected trail\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        } else if (i + 1 === length) {\n\t          // unpaired lead\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        }\n\n\t        // valid lead\n\t        leadSurrogate = codePoint\n\n\t        continue\n\t      }\n\n\t      // 2 leads in a row\n\t      if (codePoint < 0xDC00) {\n\t        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t        leadSurrogate = codePoint\n\t        continue\n\t      }\n\n\t      // valid surrogate pair\n\t      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n\t    } else if (leadSurrogate) {\n\t      // valid bmp char, but last char was a lead\n\t      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t    }\n\n\t    leadSurrogate = null\n\n\t    // encode utf8\n\t    if (codePoint < 0x80) {\n\t      if ((units -= 1) < 0) break\n\t      bytes.push(codePoint)\n\t    } else if (codePoint < 0x800) {\n\t      if ((units -= 2) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x6 | 0xC0,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x10000) {\n\t      if ((units -= 3) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0xC | 0xE0,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x110000) {\n\t      if ((units -= 4) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x12 | 0xF0,\n\t        codePoint >> 0xC & 0x3F | 0x80,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else {\n\t      throw new Error('Invalid code point')\n\t    }\n\t  }\n\n\t  return bytes\n    }\n\n    function asciiToBytes (str) {\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; i++) {\n\t    // Node's code seems to be doing this and not & 0x7F..\n\t    byteArray.push(str.charCodeAt(i) & 0xFF)\n\t  }\n\t  return byteArray\n    }\n\n    function utf16leToBytes (str, units) {\n\t  var c, hi, lo\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; i++) {\n\t    if ((units -= 2) < 0) break\n\n\t    c = str.charCodeAt(i)\n\t    hi = c >> 8\n\t    lo = c % 256\n\t    byteArray.push(lo)\n\t    byteArray.push(hi)\n\t  }\n\n\t  return byteArray\n    }\n\n    function base64ToBytes (str) {\n\t  return base64.toByteArray(base64clean(str))\n    }\n\n    function blitBuffer (src, dst, offset, length) {\n\t  for (var i = 0; i < length; i++) {\n\t    if ((i + offset >= dst.length) || (i >= src.length)) break\n\t    dst[i + offset] = src[i]\n\t  }\n\t  return i\n    }\n  }).call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {})\n}, {'base64-js': 38, 'ieee754': 39, 'isarray': 40}],\n38: [function (require, module, exports) {\n  (function (exports) {\n\t  'use strict'\n\n\t  var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n\n\t  var Arr = (typeof Uint8Array !== 'undefined')\n\t    ? Uint8Array\n\t    : Array\n\n\t  var PLUS = '+'.charCodeAt(0)\n\t  var SLASH = '/'.charCodeAt(0)\n\t  var NUMBER = '0'.charCodeAt(0)\n\t  var LOWER = 'a'.charCodeAt(0)\n\t  var UPPER = 'A'.charCodeAt(0)\n\t  var PLUS_URL_SAFE = '-'.charCodeAt(0)\n\t  var SLASH_URL_SAFE = '_'.charCodeAt(0)\n\n\t  function decode (elt) {\n\t    var code = elt.charCodeAt(0)\n\t    if (code === PLUS || code === PLUS_URL_SAFE) return 62 // '+'\n\t    if (code === SLASH || code === SLASH_URL_SAFE) return 63 // '/'\n\t    if (code < NUMBER) return -1 // no match\n\t    if (code < NUMBER + 10) return code - NUMBER + 26 + 26\n\t    if (code < UPPER + 26) return code - UPPER\n\t    if (code < LOWER + 26) return code - LOWER + 26\n\t  }\n\n\t  function b64ToByteArray (b64) {\n\t    var i, j, l, tmp, placeHolders, arr\n\n\t    if (b64.length % 4 > 0) {\n\t      throw new Error('Invalid string. Length must be a multiple of 4')\n\t    }\n\n\t    // the number of equal signs (place holders)\n\t    // if there are two placeholders, than the two characters before it\n\t    // represent one byte\n\t    // if there is only one, then the three characters before it represent 2 bytes\n\t    // this is just a cheap hack to not do indexOf twice\n\t    var len = b64.length\n\t    placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0\n\n\t    // base64 is 4/3 + up to two characters of the original data\n\t    arr = new Arr(b64.length * 3 / 4 - placeHolders)\n\n\t    // if there are placeholders, only get up to the last complete 4 chars\n\t    l = placeHolders > 0 ? b64.length - 4 : b64.length\n\n\t    var L = 0\n\n\t    function push (v) {\n\t      arr[L++] = v\n\t    }\n\n\t    for (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t      tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\n\t      push((tmp & 0xFF0000) >> 16)\n\t      push((tmp & 0xFF00) >> 8)\n\t      push(tmp & 0xFF)\n\t    }\n\n\t    if (placeHolders === 2) {\n\t      tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\n\t      push(tmp & 0xFF)\n\t    } else if (placeHolders === 1) {\n\t      tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\n\t      push((tmp >> 8) & 0xFF)\n\t      push(tmp & 0xFF)\n\t    }\n\n\t    return arr\n\t  }\n\n\t  function uint8ToBase64 (uint8) {\n\t    var i\n\t    var extraBytes = uint8.length % 3 // if we have 1 byte left, pad 2 bytes\n\t    var output = ''\n\t    var temp, length\n\n\t    function encode (num) {\n\t      return lookup.charAt(num)\n\t    }\n\n\t    function tripletToBase64 (num) {\n\t      return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)\n\t    }\n\n\t    // go through the array every three bytes, we'll deal with trailing stuff later\n\t    for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t      temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n\t      output += tripletToBase64(temp)\n\t    }\n\n\t    // pad the end with zeros, but make sure to not forget the extra bytes\n\t    switch (extraBytes) {\n\t      case 1:\n\t        temp = uint8[uint8.length - 1]\n\t        output += encode(temp >> 2)\n\t        output += encode((temp << 4) & 0x3F)\n\t        output += '=='\n\t        break\n\t      case 2:\n\t        temp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])\n\t        output += encode(temp >> 10)\n\t        output += encode((temp >> 4) & 0x3F)\n\t        output += encode((temp << 2) & 0x3F)\n\t        output += '='\n\t        break\n\t      default:\n\t        break\n\t    }\n\n\t    return output\n\t  }\n\n\t  exports.toByteArray = b64ToByteArray\n\t  exports.fromByteArray = uint8ToBase64\n  }(typeof exports === 'undefined' ? (this.base64js = {}) : exports))\n}, {}],\n39: [function (require, module, exports) {\n  exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n\t  var e, m\n\t  var eLen = nBytes * 8 - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var nBits = -7\n\t  var i = isLE ? (nBytes - 1) : 0\n\t  var d = isLE ? -1 : 1\n\t  var s = buffer[offset + i]\n\n\t  i += d\n\n\t  e = s & ((1 << (-nBits)) - 1)\n\t  s >>= (-nBits)\n\t  nBits += eLen\n\t  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t  m = e & ((1 << (-nBits)) - 1)\n\t  e >>= (-nBits)\n\t  nBits += mLen\n\t  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t  if (e === 0) {\n\t    e = 1 - eBias\n\t  } else if (e === eMax) {\n\t    return m ? NaN : ((s ? -1 : 1) * Infinity)\n\t  } else {\n\t    m = m + Math.pow(2, mLen)\n\t    e = e - eBias\n\t  }\n\t  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n  }\n\n  exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n\t  var e, m, c\n\t  var eLen = nBytes * 8 - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n\t  var i = isLE ? 0 : (nBytes - 1)\n\t  var d = isLE ? 1 : -1\n\t  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n\t  value = Math.abs(value)\n\n\t  if (isNaN(value) || value === Infinity) {\n\t    m = isNaN(value) ? 1 : 0\n\t    e = eMax\n\t  } else {\n\t    e = Math.floor(Math.log(value) / Math.LN2)\n\t    if (value * (c = Math.pow(2, -e)) < 1) {\n\t      e--\n\t      c *= 2\n\t    }\n\t    if (e + eBias >= 1) {\n\t      value += rt / c\n\t    } else {\n\t      value += rt * Math.pow(2, 1 - eBias)\n\t    }\n\t    if (value * c >= 2) {\n\t      e++\n\t      c /= 2\n\t    }\n\n\t    if (e + eBias >= eMax) {\n\t      m = 0\n\t      e = eMax\n\t    } else if (e + eBias >= 1) {\n\t      m = (value * c - 1) * Math.pow(2, mLen)\n\t      e = e + eBias\n\t    } else {\n\t      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n\t      e = 0\n\t    }\n\t  }\n\n\t  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n\t  e = (e << mLen) | m\n\t  eLen += mLen\n\t  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n\t  buffer[offset + i - d] |= s * 128\n  }\n}, {}],\n40: [function (require, module, exports) {\n  var toString = {}.toString\n\n  module.exports = Array.isArray || function (arr) {\n\t  return toString.call(arr) == '[object Array]'\n  }\n}, {}]}, {}, [36])\n\nexport default PANOLENS\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/panolens.js"],"sourceRoot":""}