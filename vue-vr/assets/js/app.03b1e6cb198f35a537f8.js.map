{"version":3,"sources":["webpack:///assets/js/app.03b1e6cb198f35a537f8.js","webpack:///./demos/components/demo-block.vue?916f","webpack:///./demos/App.vue?0551","webpack:///./demos/pages/demo-cube-pano.vue","webpack:///./demos/pages/demo-pano.vue","webpack:///./demos/pages/demo-video-pano.vue","webpack:///./demos/components/demo-block.vue?6e72","webpack:///./demos/App.vue?8c56","webpack:///./demos/pages/demo-cube-pano.vue?d0a6","webpack:///./demos/pages/demo-pano.vue?c299","webpack:///./demos/pages/demo-video-pano.vue?e6e9","webpack:///./src/Pano.vue?e317","webpack:///./demos/components/demo-block.vue?9e40","webpack:///./demos/App.vue?0543","webpack:///./demos/components/demo-block.vue","webpack:///./src/Pano.vue","webpack:///./demos/router/index.js","webpack:///./demos/App.vue","webpack:///./demos/index.js","webpack:///./demos/pages/index.js","webpack:///App.vue","webpack:///demo-block.vue","webpack:///demo-cube-pano.vue","webpack:///demo-pano.vue","webpack:///demo-video-pano.vue","webpack:///Pano.vue","webpack:///./src/lib/panolens.js","webpack:///./src/util.js"],"names":["webpackJsonp","126","module","exports","__webpack_require__","push","i","127","128","309","Component","310","311","312","render","_vm","this","_h","$createElement","_c","_self","staticClass","_t","_v","ref","_s","_f","vueCode","htmlCode","staticRenderFns","313","attrs","to","314","vue-code","code","html-code","slot","type","source","on","on-load","onLoad","directives","name","rawName","value","expression","315","316","src","317","staticStyle","width","height","margin","border","padding","319","content","locals","320","36","37","61","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__pages__","use","routes","map","page","path","component","console","log","redirect","62","63","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_1__App_vue__","__WEBPACK_IMPORTED_MODULE_1__App_vue___default","n","__WEBPACK_IMPORTED_MODULE_2__router__","el","router","h","a","64","d","pages","__WEBPACK_IMPORTED_MODULE_0__demo_pano__","__WEBPACK_IMPORTED_MODULE_0__demo_pano___default","__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__","__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default","__WEBPACK_IMPORTED_MODULE_2__demo_video_pano__","__WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default","65","66","__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__","__WEBPACK_IMPORTED_MODULE_1_highlight_js__","__WEBPACK_IMPORTED_MODULE_1_highlight_js___default","codeHandler","replace","props","String","default","mounted","highlightBlock","$refs","data","filters","val","components","67","__WEBPACK_IMPORTED_MODULE_0__components_demo_block__","__WEBPACK_IMPORTED_MODULE_0__components_demo_block___default","__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__","__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default","loading","methods","Pano","DemoBlock","68","69","70","__WEBPACK_IMPORTED_MODULE_1__lib_panolens__","Number","size","viewer","panorama","created","window","addEventListener","onResize","undefined","$el","offsetWidth","offsetHeight","Viewer","container","cameraFov","loadPano","watch","_this","$nextTick","l","f","r","b","u","CubePanorama","ImagePanorama","add","that","$emit","71","process","global","require","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default","__WEBPACK_IMPORTED_MODULE_8_three__","PANOLENS","REVISION","enableInlineVideo","e","t","start","stop","requestAnimationFrame","cancelAnimationFrame","stopImmediatePropagation","get","set","dispatchEvent","Event","resolve","then","Audio","crossOrigin","currentSrc","m","Date","now","currentTime","k","T","o","driver","video","duration","s","readyState","HAVE_FUTURE_DATA","hasAudio","playbackRate","loop","networkState","NETWORK_IDLE","buffered","length","load","ended","pause","c","g","webkitDisplayingFullscreen","E","paused","play","updater","HAVE_ENOUGH_DATA","v","w","p","bind","muted","autoplay","indexOf","y","everywhere","iPad","ipad","test","navigator","userAgent","classList","removeEventListener","platform","warn","document","head","style","matchMedia","matches","TWEEN","_tweens","getAll","removeAll","tween","remove","splice","update","time","preserve","hrtime","performance","getTime","Tween","object","_repeatDelayTime","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","Easing","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","_onStopCallback","properties","property","Array","concat","call","stopChainedTweens","end","numChainedTweens","delay","amount","repeat","times","repeatDelay","yoyo","easing","interpolation","chain","arguments","onStart","callback","onUpdate","onComplete","onStop","elapsed","charAt","parseFloat","isFinite","tmp","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","Back","Bounce","floor","fn","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","v0","v1","t2","root","define","domElement","getAutoRotationAngle","scope","autoRotateSpeed","getZoomScale","zoomSpeed","onMouseDown","event","momentumOn","momentumLeft","momentumUp","enabled","preventDefault","button","mouseButtons","ORBIT","noRotate","state","STATE","ROTATE","rotateStart","clientX","clientY","ZOOM","noZoom","DOLLY","dollyStart","PAN","noPan","panStart","NONE","onMouseMove","onMouseUp","startEvent","element","body","rotateEnd","rotateDelta","subVectors","rotateLeft","x","clientWidth","rotateSpeed","rotateUp","clientHeight","copy","eventPrevious","dollyEnd","dollyDelta","dollyIn","dollyOut","panEnd","panDelta","pan","endEvent","onMouseWheel","stopPropagation","delta","wheelDelta","detail","fov","maxFov","updateProjectionMatrix","minFov","changeEvent","onKeyUp","keyCode","keys","UP","keyUp","BOTTOM","keyBottom","LEFT","keyLeft","RIGHT","keyRight","onKeyDown","noKeys","momentumKeydownFactor","touchstart","touches","TOUCH_ROTATE","pageX","pageY","TOUCH_DOLLY","dx","dy","TOUCH_PAN","touchmove","scale","touchend","frameId","target","center","minDistance","maxDistance","Infinity","minZoom","maxZoom","keyPanSpeed","autoRotate","minPolarAngle","maxPolarAngle","momentumDampingFactor","momentumScalingFactor","minAzimuthAngle","maxAzimuthAngle","MIDDLE","theta","phi","panOffset","offset","phiDelta","thetaDelta","lastPosition","lastQuaternion","target0","clone","position0","position","zoom0","zoom","quat","setFromUnitVectors","up","quatInverse","inverse","setLastQuaternion","quaternion","getLastPosition","angle","panLeft","distance","te","matrix","elements","multiplyScalar","panUp","deltaX","deltaY","sub","targetDistance","tan","right","left","top","bottom","momentum","abs","dollyScale","max","min","ignoreUpdate","applyQuaternion","atan2","z","radius","lookAt","distanceToSquared","dot","reset","getPolarAngle","getAzimuthalAngle","prototype","constructor","camera","rotY","rotX","tempX","tempY","rotation","reorder","deviceOrientation","screenOrientation","alpha","alphaOffsetAngle","onDeviceOrientationChangeEvent","onScreenOrientationChangeEvent","orientation","onTouchStartEvent","onTouchMoveEvent","degToRad","updateAlphaOffsetAngle","setCameraQuaternion","beta","gamma","orient","vectorFingerY","zee","euler","q0","q1","fingerQY","fingerQX","setFromAxisAngle","multiply","setFromEuler","connect","disconnect","dispose","direction","axis","_sign","_cosh","exp","_sinhInverse","modify","geometry","thirdAxis","crossVectors","P","transpose","InverseP","getInverse","newVertices","oldVertices","anglesBetweenOldandNewVertices","meshGeometryBoundingBoxMaxx","meshGeometryBoundingBoxMinx","meshGeometryBoundingBoxMaxy","meshGeometryBoundingBoxMiny","vertices","applyMatrix4","meshWidthold","meshDepth","ParamB","oldMiddlex","oldMiddley","meshWidth","NewParamB","rightEdgePos","bendCenter","x0","y0","normalize","Q","addVectors","middle","O","acos","computeFaceNormals","verticesNeedUpdate","normalsNeedUpdate","fvNames","fl","faces","face","vertexNormals","vl","rotateMatrix","applyMatrix3","renderer","_camera","_scene","_stereo","aspect","_params","minFilter","magFilter","format","_renderTarget","scissorTest","texture","generateMipmaps","distortion","removeAttribute","toNonIndexed","positions","attributes","array","uvs","uv","count","positions2","Float32Array","uvs2","vector","scalar","material","mesh","setSize","pixelRatio","getPixelRatio","scene","updateMatrixWorld","parent","scissor","viewport","cameraL","cameraR","setEyeSeparation","eyeSep","getSize","autoClear","clear","setScissorTest","setScissor","setViewport","GSVPANO","PanoLoader","parameters","_zoom","_panoId","_parameters","_panoClient","google","maps","StreetViewService","_count","_total","_canvas","_ctx","_wc","_hc","copyright","levelsW","levelsH","widths","heights","gl","canvas","createElement","getContext","error","maxW","maxH","maxTexSize","getParameter","MAX_TEXTURE_SIZE","setProgress","loaded","total","onProgress","throwError","message","onError","adaptTextureToZoom","ceil","ptr","composeFromTile","px","py","drawImage","progress","round","panoId","onPanoramaLoad","loadFromId","id","composePanorama","url","self","useWebGL","loadTexture","img","Image","panoid","getPanoramaById","result","status","StreetViewStatus","OK","onPanoramaData","location","pano","onNoPanoramaData","setZoom","DataImageSource","DataImage","Info","Arrow","FullscreenEnter","FullscreenLeave","VideoPlay","VideoPause","WhiteTile","ReticleIdle","Setting","ChevronRight","Check","ViewIndicator","ReticleDwell","Controls","DEVICEORIENTATION","Modes","UNKNOWN","NORMAL","CARDBOARD","STEREO","checkTouchSupported","msMaxTouchPoints","ImageLoader","onImageLoaded","urlCreator","revokeObjectURL","image","cached","request","arrayBufferView","blob","reference","iconName","hasOwnProperty","setTimeout","URL","webkitURL","createElementNS","XMLHttpRequest","open","responseType","onprogress","lengthComputable","onloadend","Uint8Array","response","Blob","createObjectURL","send","TextureLoader","needsUpdate","CubeTextureLoader","urls","all","loadings","index","images","StereographicShader","uniforms","tDiffuse","resolution","transform","vertexShader","join","fragmentShader","Panorama","ImageQualityLow","ImageQualityFair","ImageQualityMedium","ImageQualityHigh","ImageQualitySuperHigh","animationDuration","defaultInfospotSize","linkedSpots","isInfospotVisible","linkingImageURL","linkingImageScale","side","visible","infospotAnimation","fadeIn","setContainer","onClick","setupTransitions","invertedObject","Infospot","method","scalePlaceHolder","intersects","traverse","HTMLElement","children","forEach","child","getZoomLevel","innerWidth","updateTexture","toggleInfospotVisibility","isVisible","show","hide","setLinkingImage","link","imageScale","imageSrc","spot","toPanorama","fadeInAnimation","fadeOutAnimation","enterTransition","leaveTransition","opacity","fadeOut","onEnter","onLeave","recursiveDispose","transparent","HTMLImageElement","GoogleStreetviewPanorama","gsvLoader","loadRequested","setupGoogleMapAPI","loadGSVLoader","script","onreadystatechange","setGSVLoader","onload","getElementsByTagName","appendChild","getGSVLoader","edgeLength","shader","JSON","parse","BasicPanorama","tile","VideoPanorama","options","playsinline","videoElement","videoRenderObject","videoProgress","isIOS","isMobile","pauseVideo","resumeVideoProgress","toggleVideo","setVideoCurrentTime","setAttribute","onloadeddata","setVideoTexture","querySelectorAll","ontimeupdate","resetVideo","videoTexture","isVideoPaused","percentage","playVideo","isVideoMuted","muteVideo","unmuteVideo","getVideoElement","EmptyPanorama","color","LittlePlanet","ratio","EPS","createGeometry","createMaterial","dragging","userMouse","quatA","quatB","quatCur","quatSlerp","vectorX","vectorY","onWindowResize","registerMouseEvents","onContextMenu","unregisterMouseEvents","pinchDistance","onUpdateCallback","angleX","angleY","addZoomDelta","lowerBound","upperBound","slerp","makeRotationFromQuaternion","ImageLittlePlanet","Reticle","autoSelect","idleImageUrl","dwellImageUrl","dwellTime","dwellSpriteAmount","dwellInterval","IDLE","DWELLING","scaleIdle","scaleDwell","textureLoaded","idleTexture","dwellTexture","depthTest","currentTile","startTime","renderOrder","timerId","updateStatus","loadTextures","setupDwellSprite","select","completeCallback","completeDwelling","updateDwelling","clearTimer","wrapS","startDwelling","elasped","cancelDwelling","Tile","widthSegments","heightSegments","forceDirection","forceAxis","forceAngle","bendModifier","entity","animationFadeOut","animationFadeIn","animationTranslation","tweens","bend","originalGeometry","setEntity","unbend","toState","ripple","TileGroup","tileArray","verticalGap","depthGap","v_gap","d_gap","animationEasing","visibleDelta","setTexture","originalPosition","updateVisbility","imageArray","outline","updateAllTexture","scrollUp","tiles","scrollDown","getIndex","getTileCount","sharedFont","sharedTexture","pendingQueue","SpriteText","text","maxWidth","addText","generateTextGeometry","generateSDFShader","setBMFont","font","anisotropy","pop","textAnchor","computeBoundingBox","computeBoundingSphere","layout","textMesh","getLayout","Widget","DEFAULT_TRANSITION","TOUCH_ENABLED","PREVENT_EVENT_HANDLER","barElement","fullscreenElement","settingElement","mainMenu","activeMainItem","activeSubMenu","mask","addControlBar","bar","styleTranslate","styleOpacity","gradientStyle","float","webkitTransform","msTransform","background","transition","pointerEvents","isHidden","toggle","menu","createDefaultMenu","createMainMenu","createMask","removeChild","deactivate","handler","title","subMenu","addControlButton","createFullscreenButton","createSettingButton","createVideoControl","display","onTap","activated","activate","item","createCustomItem","backgroundImage","webkitTransition","_width","changeSize","unslideAll","tapSkipped","isFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","onFullScreenChange","stylesheetId","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","querySelector","sheet","innerHTML","controlButton","createVideoControlButton","seekBar","createVideoControlSeekbar","isDragging","mouseX","changedTouches","percentageNow","parseInt","progressElement","addControlListeners","onVideoControlDrag","percentageNext","onVideoControlStop","removeControlListeners","progressElementControl","getBoundingClientRect","offsetX","onDispose","backgroundColor","borderRadius","marginTop","createMenuItem","textContent","textDecoration","cursor","slide","unslide","setIcon","icon","setSelectionTitle","selection","addSelection","fontSize","fontWeight","addIcon","flip","backgroundSize","addSubMenu","items","createSubMenu","createMenuItemHeader","header","borderBottom","paddingBottom","menus","onNextTick","slideAll","parentElement","createMenu","addItem","paddingLeft","setActiveItem","activeItem","addHeader","fontFamily","visibility","boxShadow","overflow","willChange","backgroundRepeat","backgroundPosition","webkitUserSelect","MozUserSelect","userSelect","filter","webkitFilter","mergeStyleOptions","animated","postLoad","naturalWidth","naturalHeight","startScale","scaleUpAnimation","scaleFactor","scaleDownAnimation","isHovering","cursorStyle","mode","HANDLER_FOCUS","showAnimation","hideAnimation","onHover","onHoverStart","onHoverEnd","onDualEyeEffect","onDismiss","setFocusMethod","getContainer","lockHoverElement","unlockHoverElement","mouseEvent","_height","locked","halfWidth","halfHeight","cloneNode","translateElement","verticalDelta","setElementStyle","setText","setCursorHoverStyle","addHoverText","maxHeight","textShadow","addHoverElement","removeHoverElement","focus","controlBar","controlButtons","autoHideControlBar","autoHideInfospot","horizontalView","clickTolerance","reverseDragging","enableReticle","autoReticleSelect","viewIndicator","indicatorSize","output","innerHeight","antialias","viewIndicatorSize","reticle","tempEnableReticle","OrbitControls","DeviceOrientationControls","CardboardEffect","StereoEffect","controls","effect","widget","hoverObject","infospot","pressEntityObject","pressObject","raycaster","raycasterPoint","updateCallbacks","requestAnimationId","cameraFrustum","cameraViewProjectionMatrix","outputDivElement","HANDLER_MOUSE_DOWN","HANDLER_MOUSE_UP","HANDLER_MOUSE_MOVE","HANDLER_WINDOW_RESIZE","HANDLER_KEY_DOWN","HANDLER_KEY_UP","HANDLER_TAP","OUTPUT_INFOSPOT","tweenLeftAnimation","tweenUpAnimation","setPixelRatio","devicePixelRatio","setClearColor","sortObjects","passiveRendering","control","addReticle","addDefaultControlBar","addViewIndicator","reverseDraggingDirection","enableReticleControl","registerMouseAndTouchEvents","addOutputElement","registerEventListeners","animate","eventHandler","addPanoramaEventListener","setPanorama","buttonName","leavingPanorama","hideInfospot","afterEnterComplete","dispatchEventToChildren","activateWidgetItem","controlIndex","ControlMenuItem","ModeMenuItem","enableEffect","disableEffect","disableReticleControl","unregisterMouseAndTouchEvents","registerReticleEvent","updateReticleEvent","unregisterReticleEvent","toggleVideoPlay","onVideoUpdate","addUpdateCallback","removeUpdateCallback","showVideoWidget","hideVideoWidget","updateVideoPlayButton","setCameraControl","getControl","getScene","getCamera","getRenderer","getControlName","getNextControlName","getNextControlIndex","nextIndex","setCameraFov","enableControl","disableControl","toggleNextControl","getScreenVector","worldVector","widthHalf","heightHalf","project","checkSpriteInViewport","sprite","matrixWorldInverse","matrixWorld","multiplyMatrices","projectionMatrix","setFromMatrix","intersectsSprite","tweenControlCenter","ha","va","chv","cvv","hv","vv","vptc","ov","nv","getWorldDirection","getWorldPosition","angleTo","tweenControlCenterByObject","isUnderScalePlaceHolder","traverseAncestors","ancestor","invertXVector","windowWidth","windowHeight","expand","contains","documentElement","outputInfospotPosition","point","panoramaWorldPosition","outputPosition","intersectObject","toFixed","info","onTarget","toggleControlBar","intersect_entity","intersect","offsetLeft","offsetTop","setFromCamera","intersectObjects","getConvertedIntersect","passThrough","key","onChange","centerX","centerY","unregisterEventListeners","destory","onPanoramaDispose","loadAsyncRequest","loadViewIndicator","asyncEvent","viewIndicatorDiv","responseXML","indicator","setIndicatorD","currentPanoAngle","fovAngle","leftAngle","rightAngle","leftX","leftY","rightX","rightY","indicatorD","indicatorOnMouseEnter","indicatorOnMouseLeave","appendControlItem","option","group","Error","1","TextGeometry","opt","Base","_opt","assign","createLayout","inherits","createIndices","buffer","utils","TypeError","flipY","texWidth","common","scaleW","texHeight","scaleH","glyphs","glyph","bitmap","visibleGlyphs","indices","clockwise","attr","multipage","boundingSphere","itemSize","computeSphere","isNaN","boundingBox","bbox","makeEmpty","computeBox","./lib/utils","./lib/vertices","layout-bmfont-text","object-assign","quad-indices","three-buffer-vertex-data","2","bounds","box","minX","minY","maxX","maxY","3","bw","bh","u0","u1","xoffset","yoffset","4","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor","5","TextLayout","_measure","computeMetrics","addGetter","wrapper","Function","getGlyphById","chars","glyphIdx","findChar","getXHeight","X_HEIGHTS","charCodeAt","idx","getMGlyph","M_WIDTHS","getCapHeight","CAP_HEIGHTS","getKerning","kernings","table","kern","first","second","getAlignType","align","ALIGN_CENTER","ALIGN_RIGHT","ALIGN_LEFT","wordWrap","xtend","number","TAB_ID","SPACE_ID","measure","tabSize","_setupSpaceGlyphs","lines","minWidth","maxLineWidth","reduce","prev","line","lineHeight","baseline","base","descender","letterSpacing","_descender","_baseline","_xHeight","_capHeight","_lineHeight","_ascender","lineIndex","lastGlyph","lineWidth","getGlyph","tx","xadvance","_linesTotal","_fallbackSpaceGlyph","_fallbackTabGlyph","space","tabWidth","curPen","curWidth","nextPen","nextWidth","as-number","indexof-property","word-wrapper","6","num","def","7","8","idxOf","chr","isWhitespace","whitespace","pre","lineStart","isNewline","newline","lineEnd","measured","greedy","testWidth","MAX_VALUE","newLine","newlineChar","nextStart","monospace","substring","9","extend","10","Buffer","isArrayBuffer","arr","toString","getBinaryOpts","xml2","req","overrideMimeType","xhr","noop","parseASCII","parseXML","readBinary","isBinaryFormat","cb","uri","binary","err","res","statusCode","isBuffer","encoding","trim","headers","./lib/is-binary","parse-bmfont-ascii","parse-bmfont-binary","parse-bmfont-xml","11","equal","HEADER","buf","slice","buffer-equal","12","equals","13","splitLine","split","str","match","dt","parseData","out","parseIntList","lineData","file","14","readBlock","blockID","readUInt8","blockSize","readInt32LE","readInfo","readCommon","readPages","readChars","readKernings","readInt16LE","bitField","smooth","unicode","italic","bold","fixedHeight","charset","stretchH","readUInt16LE","aa","readInt8","spacing","readStringNT","packed","alphaChnl","redChnl","greenChnl","blueChnl","readNameNT","len","char","off","readUInt32LE","chnl","pos","every","byte","15","getAttribs","getAttribList","dict","attrib","mapName","nodeName","nodeValue","attribs","NAME_MAP","toLowerCase","parseAttributes","parseFromString","scaleh","scalew","stretchh","lineheight","alphachnl","redchnl","greenchnl","bluechnl","xmlRoot","pageRoot","getAttribute","childTag","./parse-attribs","xml-parse-from-string","16","obj","17","DOMParser","ActiveXObject","xmlDoc","async","loadXML","div","18","isEmpty","initParams","params","isFunction","createXHR","_createXHR","readystatechange","loadFunc","getBody","responseText","isJson","errorFunc","evt","clearTimeout","timeoutTimer","failureResponse","aborted","useXDR","rawRequest","getAllResponseHeaders","parseHeaders","once","cors","XDomainRequest","sync","json","onerror","ontimeout","username","password","withCredentials","timeout","abort","setRequestHeader","beforeSend","iterator","toUpperCase","global/window","is-function","parse-headers","19","20","string","alert","confirm","prompt","21","called","apply","proto","22","list","context","forEachArray","forEachString","forEachObject","23","24","isArray","arg","row","for-each","25","dup","26","toObject","propIsEnumerable","propertyIsEnumerable","from","symbols","27","dtype","anArray","CW","CCW","dir","numIndices","j","an-array","is-buffer","28","BYTES_PER_ELEMENT","29","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Float64Array","Uint8ClampedArray","30","_isBuffer","31","setIndex","isR69","newAttrib","updateAttribute","addAttribute","rebuildAttribute","flatten","attribLength","flatten-vertex-data","32","flattenVertexData","dim","dstLength","Ctor","33","34","alphaTest","precision","35","loadFont","tex","load-bmfont","createText","SDFShader","loadBMFont","fontObject","../","../shaders/sdf","./load","kMaxLength","TYPED_ARRAY_SUPPORT","fromNumber","fromString","fromObject","allocate","checked","byteLength","write","fromBuffer","fromArray","ArrayBuffer","fromTypedArray","fromArrayBuffer","fromArrayLike","fromJsonObject","__proto__","poolSize","rootParent","RangeError","SlowBuffer","subject","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","binarySlice","base64Slice","utf16leSlice","hexWrite","remaining","strLen","parsed","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","binaryWrite","base64Write","ucs2Write","utf16leToBytes","base64","fromByteArray","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","ret","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754","writeDouble","base64clean","stringtrim","INVALID_BASE64_RE","units","leadSurrogate","byteArray","hi","lo","toByteArray","dst","INSPECT_MAX_BYTES","foo","subarray","compare","isEncoding","inspect","byteOffset","arrayIndexOf","foundIndex","swap","toJSON","_arr","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt16BE","readUInt32BE","readIntLE","readIntBE","readInt16BE","readInt32BE","readFloatLE","read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","fill","base64-js","isarray","38","decode","elt","PLUS","PLUS_URL_SAFE","SLASH","SLASH_URL_SAFE","NUMBER","UPPER","LOWER","b64ToByteArray","b64","L","placeHolders","Arr","uint8ToBase64","uint8","encode","lookup","temp","extraBytes","base64js","39","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","40","72","__WEBPACK_IMPORTED_MODULE_0_three__"],"mappings":"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","file":"assets/js/app.03b1e6cb198f35a537f8.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 126:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(57)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:70%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:30%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .hljs{background:transparent}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 127:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(57)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.demos,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.demos-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.demos-header .title{font-weight:700;font-size:18px;display:inline-block}.demos-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.demos-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.demos-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.demos-menu .demos-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.demos-menu .demos-menu-item>a{display:block;width:100%;height:100%}.demos-menu .demos-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.demos-menu .demos-menu-item:hover>a{color:#39f}.demos-pages{height:100%;overflow:hidden}.demo-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.demo-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;animation:loading-rotate .75s 0s linear infinite}.demo-loading:after,.demo-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.demo-loading:after{height:100%;width:0}@keyframes loading-rotate{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(.6)}to{transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 128:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 309:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(67),\n  /* template */\n  __webpack_require__(314),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 310:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(68),\n  /* template */\n  __webpack_require__(315),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 311:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(69),\n  /* template */\n  __webpack_require__(316),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 312:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n                \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)))]), _vm._v(\"\\n                \")])])])])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 313:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demos\"\n  }, [_c('div', {\n    staticClass: \"demos-content\"\n  }, [_c('ul', {\n    staticClass: \"demos-menu\"\n  }, [_c('li', {\n    staticClass: \"demos-menu-title\"\n  }, [_vm._v(\"demos\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-pano\"\n    }\n  }, [_vm._v(\"basic panorama\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-cube-pano\"\n    }\n  }, [_vm._v(\"Cube Faces\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demos-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 314:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"cube\",\n      \"source\": \"assets/faces/pano_%s.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 315:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"source\": \"assets/equirectangular.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 316:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"src\": \"./../assets/equirectangular.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 317:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 319:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(126);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(60)(\"56304fc1\", content, true);\n\n/***/ }),\n\n/***/ 320:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(127);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(60)(\"48e2ad6a\", content, true);\n\n/***/ }),\n\n/***/ 36:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(319)\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(66),\n  /* template */\n  __webpack_require__(312),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 37:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(70),\n  /* template */\n  __webpack_require__(317),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 61:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(318);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__pages__ = __webpack_require__(64);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\nvar routes = __WEBPACK_IMPORTED_MODULE_2__pages__[\"a\" /* pages */].map(function (page) {\n\n    var name = page.name;\n\n    return {\n        path: '/' + name,\n        name: name,\n        component: page\n    };\n});\n\nconsole.log(routes);\n\nroutes.push({\n    path: '*',\n    redirect: '/demo-pano'\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({ routes: routes }));\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(320)\n\nvar Component = __webpack_require__(11)(\n  /* script */\n  __webpack_require__(65),\n  /* template */\n  __webpack_require__(313),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 63:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue__ = __webpack_require__(62);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(61);\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  render: function render(h) {\n    return h(__WEBPACK_IMPORTED_MODULE_1__App_vue___default.a);\n  }\n});\n\n/***/ }),\n\n/***/ 64:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return pages; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_pano__ = __webpack_require__(310);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__demo_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__demo_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__ = __webpack_require__(309);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__demo_cube_pano__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_video_pano__ = __webpack_require__(311);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__demo_video_pano__);\n\n\n\n\nvar pages = [__WEBPACK_IMPORTED_MODULE_0__demo_pano___default.a, __WEBPACK_IMPORTED_MODULE_1__demo_cube_pano___default.a, __WEBPACK_IMPORTED_MODULE_2__demo_video_pano___default.a];\n\n\n\n/***/ }),\n\n/***/ 65:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app'\n});\n\n/***/ }),\n\n/***/ 66:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__ = __webpack_require__(128);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_highlight_js_styles_github_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js__ = __webpack_require__(130);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_highlight_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_highlight_js__);\n\n\n\n\n\nvar codeHandler = function codeHandler(code) {\n    var scripts = '<script src=\"vue.js\"></script>\\n \\xA0 \\xA0<script src=\"vue-vr.min.js\"></script>';\n\n    return code.replace(/#scripts#/ig, scripts);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app',\n    props: {\n        vueCode: String,\n        htmlCode: {\n            type: String,\n            default: '// TODO'\n        }\n    },\n    mounted: function mounted() {\n        __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.vueCode);\n        __WEBPACK_IMPORTED_MODULE_1_highlight_js___default.a.highlightBlock(this.$refs.htmlCode);\n    },\n    data: function data() {\n        return {};\n    },\n\n    filters: {\n        code: function code(val) {\n            return codeHandler(val);\n        }\n    },\n    components: {}\n});\n\n/***/ }),\n\n/***/ 67:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        type=\\'cube\\'\\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\\n</template>\\n<script>\\n    import { Pano } from \\'vuejs-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'cube\\'\\n            source=\"assets/faces/pano_%s.jpg\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-cube-pano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 68:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        src=\"assets/equirectangular.jpg\">\\n    </Pano>\\n</template>\\n\\n<script>\\n    import { Pano } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'cube\\'\\n            source=\"assets/equirectangular.jpg\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-pano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 69:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_demo_block__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__src_Pano_vue__);\n\n\n\n\n\nvar code = '\\n<template>\\n    <Pano\\n        @on-load=\"onLoad\"\\n        src=\"./../assets/equirectangular.jpg\">\\n    </Pano>\\n</template>\\n\\n<script>\\n    import { Pano } from \\'vue-vr\\'\\n\\n    export default {\\n        components: {\\n            Pano\\n        }\\n    }\\n</script>\\n';\n\nvar htmlCode = '\\n<body>\\n    <div id=\"app\">\\n        <Pano\\n            @on-load=\"onLoad\"\\n            type=\\'cube\\'\\n            source=\"./../assets/equirectangular.jpg\">\\n        </Pano>\\n    </div>\\n    #scripts#\\n    <script>\\n        new Vue({\\n            el: \\'#app\\'\\n        })\\n    </script>\\n</body>\\n';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'demo-video-pano',\n    data: function data() {\n        return {\n            code: code,\n            htmlCode: htmlCode,\n            loading: true\n        };\n    },\n\n    methods: {\n        onLoad: function onLoad() {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano: __WEBPACK_IMPORTED_MODULE_1__src_Pano_vue___default.a,\n        DemoBlock: __WEBPACK_IMPORTED_MODULE_0__components_demo_block___default.a\n    }\n});\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__util__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lib_panolens__ = __webpack_require__(71);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  props: {\n    source: {\n      type: String\n    },\n    type: {\n      type: String\n    },\n    width: {\n      type: Number\n    },\n    height: {\n      type: Number\n    }\n  },\n  data: function data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      viewer: null,\n      panorama: null\n    };\n  },\n  created: function created() {\n    window.addEventListener(\"resize\", this.onResize, false);\n  },\n  mounted: function mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new __WEBPACK_IMPORTED_MODULE_1__lib_panolens__[\"a\" /* default */].Viewer({\n      container: this.$el,\n      cameraFov: 100\n    });\n\n    console.log(this.source);\n    this.loadPano();\n  },\n\n  watch: {\n    source: function source() {\n      if (!this.viewer) return;\n      if (!this.panorama) return;\n      this.loadPano();\n    }\n  },\n  methods: {\n    onResize: function onResize() {\n      var _this = this;\n\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(function () {\n          _this.size = {\n            width: _this.$el.offsetWidth,\n            height: _this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    loadPano: function loadPano() {\n      if (!this.source) return;\n\n      switch (this.type) {\n        case 'cube':\n          var l = this.source.replace('%s', 'l');\n          var f = this.source.replace('%s', 'f');\n          var r = this.source.replace('%s', 'r');\n          var b = this.source.replace('%s', 'b');\n          var u = this.source.replace('%s', 'u');\n          var d = this.source.replace('%s', 'd');\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_1__lib_panolens__[\"a\" /* default */].CubePanorama([r, l, u, d, f, b]);\n          break;\n        default:\n          this.panorama = new __WEBPACK_IMPORTED_MODULE_1__lib_panolens__[\"a\" /* default */].ImagePanorama(this.source);\n          break;\n      }\n\n      this.viewer.add(this.panorama);\n\n      var that = this;\n      this.panorama.addEventListener('load', function () {\n        that.$emit(\"on-load\");\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 71:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process, module, global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__ = __webpack_require__(74);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__ = __webpack_require__(73);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_three__ = __webpack_require__(59);\nvar require;var require;\n\n\n\n\n\n\n\n\n\nvar PANOLENS = { REVISION: '9' };\n;\nvar enableInlineVideo = function () {\n\t\"use strict\";\n\n\tfunction e(e, i, n, r) {\n\t\tfunction t(n) {\n\t\t\td = i(t, r), e(n - (a || n)), a = n;\n\t\t}var d, a;return { start: function start() {\n\t\t\t\td || t(0);\n\t\t\t}, stop: function stop() {\n\t\t\t\tn(d), d = null, a = 0;\n\t\t\t} };\n\t}function i(i) {\n\t\treturn e(i, requestAnimationFrame, cancelAnimationFrame);\n\t}function n(e, i, n) {\n\t\tfunction r(r) {\n\t\t\tn && !n(e, i) || r.stopImmediatePropagation();\n\t\t}return e.addEventListener(i, r), r;\n\t}function r(e, i, n, r) {\n\t\tfunction t() {\n\t\t\treturn n[i];\n\t\t}function d(e) {\n\t\t\tn[i] = e;\n\t\t}r && d(e[i]), __WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default()(e, i, { get: t, set: d });\n\t}function t(e, i, n) {\n\t\tn.addEventListener(i, function () {\n\t\t\treturn e.dispatchEvent(new Event(i));\n\t\t});\n\t}function d(e, i) {\n\t\t__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_promise___default.a.resolve().then(function () {\n\t\t\te.dispatchEvent(new Event(i));\n\t\t});\n\t}function a(e) {\n\t\tvar i = new Audio();return t(e, \"play\", i), t(e, \"playing\", i), t(e, \"pause\", i), i.crossOrigin = e.crossOrigin, i.src = e.src || e.currentSrc || \"data:\", i;\n\t}function u(e, i, n) {\n\t\t(m || 0) + 200 < Date.now() && (e[h] = !0, m = Date.now()), n || (e.currentTime = i), k[++T % 3] = 100 * i | 0;\n\t}function o(e) {\n\t\treturn e.driver.currentTime >= e.video.duration;\n\t}function s(e) {\n\t\tvar i = this;i.video.readyState >= i.video.HAVE_FUTURE_DATA ? (i.hasAudio || (i.driver.currentTime = i.video.currentTime + e * i.video.playbackRate / 1e3, i.video.loop && o(i) && (i.driver.currentTime = 0)), u(i.video, i.driver.currentTime)) : i.video.networkState === i.video.NETWORK_IDLE && 0 === i.video.buffered.length && i.video.load(), i.video.ended && (delete i.video[h], i.video.pause(!0));\n\t}function c() {\n\t\tvar e = this,\n\t\t    i = e[g];if (e.webkitDisplayingFullscreen) return void e[E]();\"data:\" !== i.driver.src && i.driver.src !== e.src && (u(e, 0, !0), i.driver.src = e.src), e.paused && (i.paused = !1, 0 === e.buffered.length && e.load(), i.driver.play(), i.updater.start(), i.hasAudio || (d(e, \"play\"), i.video.readyState >= i.video.HAVE_ENOUGH_DATA && d(e, \"playing\")));\n\t}function v(e) {\n\t\tvar i = this,\n\t\t    n = i[g];n.driver.pause(), n.updater.stop(), i.webkitDisplayingFullscreen && i[w](), n.paused && !e || (n.paused = !0, n.hasAudio || d(i, \"pause\"), i.ended && !i.webkitDisplayingFullscreen && (i[h] = !0, d(i, \"ended\")));\n\t}function p(e, n) {\n\t\tvar r = {};e[g] = r, r.paused = !0, r.hasAudio = n, r.video = e, r.updater = i(s.bind(r)), n ? r.driver = a(e) : (e.addEventListener(\"canplay\", function () {\n\t\t\te.paused || d(e, \"playing\");\n\t\t}), r.driver = { src: e.src || e.currentSrc || \"data:\", muted: !0, paused: !0, pause: function pause() {\n\t\t\t\tr.driver.paused = !0;\n\t\t\t}, play: function play() {\n\t\t\t\tr.driver.paused = !1, o(r) && u(e, 0);\n\t\t\t}, get ended() {\n\t\t\t\treturn o(r);\n\t\t\t} }), e.addEventListener(\"emptied\", function () {\n\t\t\tvar i = !r.driver.src || \"data:\" === r.driver.src;r.driver.src && r.driver.src !== e.src && (u(e, 0, !0), r.driver.src = e.src, i || !n && e.autoplay ? r.driver.play() : r.updater.stop());\n\t\t}, !1), e.addEventListener(\"webkitbeginfullscreen\", function () {\n\t\t\te.paused ? n && 0 === r.driver.buffered.length && r.driver.load() : (e.pause(), e[E]());\n\t\t}), n && (e.addEventListener(\"webkitendfullscreen\", function () {\n\t\t\tr.driver.currentTime = e.currentTime;\n\t\t}), e.addEventListener(\"seeking\", function () {\n\t\t\tk.indexOf(100 * e.currentTime | 0) < 0 && (r.driver.currentTime = e.currentTime);\n\t\t}));\n\t}function l(e) {\n\t\tvar i = e[h];return delete e[h], !e.webkitDisplayingFullscreen && !i;\n\t}function f(e) {\n\t\tvar i = e[g];e[E] = e.play, e[w] = e.pause, e.play = c, e.pause = v, r(e, \"paused\", i.driver), r(e, \"muted\", i.driver, !0), r(e, \"playbackRate\", i.driver, !0), r(e, \"ended\", i.driver), r(e, \"loop\", i.driver, !0), n(e, \"seeking\", function (e) {\n\t\t\treturn !e.webkitDisplayingFullscreen;\n\t\t}), n(e, \"seeked\", function (e) {\n\t\t\treturn !e.webkitDisplayingFullscreen;\n\t\t}), n(e, \"timeupdate\", l), n(e, \"ended\", l);\n\t}function y(e, i) {\n\t\tif (void 0 === i && (i = {}), !e[g]) {\n\t\t\tif (!i.everywhere) {\n\t\t\t\tif (!b) return;if (!(i.iPad || i.ipad ? /iPhone|iPod|iPad/ : /iPhone|iPod/).test(navigator.userAgent)) return;\n\t\t\t}e.pause();var n = e.autoplay;e.autoplay = !1, p(e, !e.muted), f(e), e.classList.add(\"IIV\"), e.muted && n && (e.play(), e.addEventListener(\"playing\", function i() {\n\t\t\t\te.autoplay = !0, e.removeEventListener(\"playing\", i);\n\t\t\t})), /iPhone|iPod|iPad/.test(navigator.platform) || console.warn(\"iphone-inline-video is not guaranteed to work in emulated environments\");\n\t\t}\n\t}var m,\n\t    b = \"object\" == (typeof document === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default()(document)) && \"object-fit\" in document.head.style && !matchMedia(\"(-webkit-video-playable-inline)\").matches,\n\t    g = \"bfred-it:iphone-inline-video\",\n\t    h = \"bfred-it:iphone-inline-video:event\",\n\t    E = \"bfred-it:iphone-inline-video:nativeplay\",\n\t    w = \"bfred-it:iphone-inline-video:nativepause\",\n\t    k = [],\n\t    T = 0;return y;\n}();\n;\n\nvar TWEEN = TWEEN || function () {\n\n\tvar _tweens = [];\n\n\treturn {\n\n\t\tgetAll: function getAll() {\n\n\t\t\treturn _tweens;\n\t\t},\n\n\t\tremoveAll: function removeAll() {\n\n\t\t\t_tweens = [];\n\t\t},\n\n\t\tadd: function add(tween) {\n\n\t\t\t_tweens.push(tween);\n\t\t},\n\n\t\tremove: function remove(tween) {\n\n\t\t\tvar i = _tweens.indexOf(tween);\n\n\t\t\tif (i !== -1) {\n\t\t\t\t_tweens.splice(i, 1);\n\t\t\t}\n\t\t},\n\n\t\tupdate: function update(time, preserve) {\n\n\t\t\tif (_tweens.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar i = 0;\n\n\t\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t\twhile (i < _tweens.length) {\n\n\t\t\t\tif (_tweens[i].update(time) || preserve) {\n\t\t\t\t\ti++;\n\t\t\t\t} else {\n\t\t\t\t\t_tweens.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t};\n}();\n\nif (typeof window === 'undefined' && typeof process !== 'undefined') {\n\tTWEEN.now = function () {\n\t\tvar time = process.hrtime();\n\n\t\treturn time[0] * 1000 + time[1] / 1000000;\n\t};\n} else if (typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined) {\n\t\tTWEEN.now = window.performance.now.bind(window.performance);\n\t} else if (Date.now !== undefined) {\n\t\t\tTWEEN.now = Date.now;\n\t\t} else {\n\t\t\t\tTWEEN.now = function () {\n\t\t\t\t\treturn new Date().getTime();\n\t\t\t\t};\n\t\t\t}\n\nTWEEN.Tween = function (object) {\n\n\tvar _object = object;\n\tvar _valuesStart = {};\n\tvar _valuesEnd = {};\n\tvar _valuesStartRepeat = {};\n\tvar _duration = 1000;\n\tvar _repeat = 0;\n\tvar _repeatDelayTime;\n\tvar _yoyo = false;\n\tvar _isPlaying = false;\n\tvar _reversed = false;\n\tvar _delayTime = 0;\n\tvar _startTime = null;\n\tvar _easingFunction = TWEEN.Easing.Linear.None;\n\tvar _interpolationFunction = TWEEN.Interpolation.Linear;\n\tvar _chainedTweens = [];\n\tvar _onStartCallback = null;\n\tvar _onStartCallbackFired = false;\n\tvar _onUpdateCallback = null;\n\tvar _onCompleteCallback = null;\n\tvar _onStopCallback = null;\n\n\tthis.to = function (properties, duration) {\n\n\t\t_valuesEnd = properties;\n\n\t\tif (duration !== undefined) {\n\t\t\t_duration = duration;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.start = function (time) {\n\n\t\tTWEEN.add(this);\n\n\t\t_isPlaying = true;\n\n\t\t_onStartCallbackFired = false;\n\n\t\t_startTime = time !== undefined ? time : TWEEN.now();\n\t\t_startTime += _delayTime;\n\n\t\tfor (var property in _valuesEnd) {\n\t\t\tif (_valuesEnd[property] instanceof Array) {\n\n\t\t\t\tif (_valuesEnd[property].length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t_valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n\t\t\t}\n\n\t\t\tif (_object[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t_valuesStart[property] = _object[property];\n\n\t\t\tif (_valuesStart[property] instanceof Array === false) {\n\t\t\t\t_valuesStart[property] *= 1.0;\n\t\t\t}\n\n\t\t\t_valuesStartRepeat[property] = _valuesStart[property] || 0;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\tthis.stop = function () {\n\n\t\tif (!_isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tTWEEN.remove(this);\n\t\t_isPlaying = false;\n\n\t\tif (_onStopCallback !== null) {\n\t\t\t_onStopCallback.call(_object, _object);\n\t\t}\n\n\t\tthis.stopChainedTweens();\n\t\treturn this;\n\t};\n\n\tthis.end = function () {\n\n\t\tthis.update(_startTime + _duration);\n\t\treturn this;\n\t};\n\n\tthis.stopChainedTweens = function () {\n\n\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t_chainedTweens[i].stop();\n\t\t}\n\t};\n\n\tthis.delay = function (amount) {\n\n\t\t_delayTime = amount;\n\t\treturn this;\n\t};\n\n\tthis.repeat = function (times) {\n\n\t\t_repeat = times;\n\t\treturn this;\n\t};\n\n\tthis.repeatDelay = function (amount) {\n\n\t\t_repeatDelayTime = amount;\n\t\treturn this;\n\t};\n\n\tthis.yoyo = function (yoyo) {\n\n\t\t_yoyo = yoyo;\n\t\treturn this;\n\t};\n\n\tthis.easing = function (easing) {\n\n\t\t_easingFunction = easing;\n\t\treturn this;\n\t};\n\n\tthis.interpolation = function (interpolation) {\n\n\t\t_interpolationFunction = interpolation;\n\t\treturn this;\n\t};\n\n\tthis.chain = function () {\n\n\t\t_chainedTweens = arguments;\n\t\treturn this;\n\t};\n\n\tthis.onStart = function (callback) {\n\n\t\t_onStartCallback = callback;\n\t\treturn this;\n\t};\n\n\tthis.onUpdate = function (callback) {\n\n\t\t_onUpdateCallback = callback;\n\t\treturn this;\n\t};\n\n\tthis.onComplete = function (callback) {\n\n\t\t_onCompleteCallback = callback;\n\t\treturn this;\n\t};\n\n\tthis.onStop = function (callback) {\n\n\t\t_onStopCallback = callback;\n\t\treturn this;\n\t};\n\n\tthis.update = function (time) {\n\n\t\tvar property;\n\t\tvar elapsed;\n\t\tvar value;\n\n\t\tif (time < _startTime) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (_onStartCallbackFired === false) {\n\n\t\t\tif (_onStartCallback !== null) {\n\t\t\t\t_onStartCallback.call(_object, _object);\n\t\t\t}\n\n\t\t\t_onStartCallbackFired = true;\n\t\t}\n\n\t\telapsed = (time - _startTime) / _duration;\n\t\telapsed = elapsed > 1 ? 1 : elapsed;\n\n\t\tvalue = _easingFunction(elapsed);\n\n\t\tfor (property in _valuesEnd) {\n\t\t\tif (_valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar start = _valuesStart[property] || 0;\n\t\t\tvar end = _valuesEnd[property];\n\n\t\t\tif (end instanceof Array) {\n\n\t\t\t\t_object[property] = _interpolationFunction(end, value);\n\t\t\t} else {\n\t\t\t\tif (typeof end === 'string') {\n\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\tend = start + parseFloat(end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = parseFloat(end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof end === 'number') {\n\t\t\t\t\t_object[property] = start + (end - start) * value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (_onUpdateCallback !== null) {\n\t\t\t_onUpdateCallback.call(_object, value);\n\t\t}\n\n\t\tif (elapsed === 1) {\n\n\t\t\tif (_repeat > 0) {\n\n\t\t\t\tif (isFinite(_repeat)) {\n\t\t\t\t\t_repeat--;\n\t\t\t\t}\n\n\t\t\t\tfor (property in _valuesStartRepeat) {\n\n\t\t\t\t\tif (typeof _valuesEnd[property] === 'string') {\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_yoyo) {\n\t\t\t\t\t\tvar tmp = _valuesStartRepeat[property];\n\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesEnd[property];\n\t\t\t\t\t\t_valuesEnd[property] = tmp;\n\t\t\t\t\t}\n\n\t\t\t\t\t_valuesStart[property] = _valuesStartRepeat[property];\n\t\t\t\t}\n\n\t\t\t\tif (_yoyo) {\n\t\t\t\t\t_reversed = !_reversed;\n\t\t\t\t}\n\n\t\t\t\tif (_repeatDelayTime !== undefined) {\n\t\t\t\t\t_startTime = time + _repeatDelayTime;\n\t\t\t\t} else {\n\t\t\t\t\t_startTime = time + _delayTime;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t} else {\n\n\t\t\t\tif (_onCompleteCallback !== null) {\n\n\t\t\t\t\t_onCompleteCallback.call(_object, _object);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t_chainedTweens[i].start(_startTime + _duration);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n};\n\nTWEEN.Easing = {\n\n\tLinear: {\n\n\t\tNone: function None(k) {\n\n\t\t\treturn k;\n\t\t}\n\n\t},\n\n\tQuadratic: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k * k;\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn k * (2 - k);\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\n\t\t\treturn -0.5 * (--k * (k - 2) - 1);\n\t\t}\n\n\t},\n\n\tCubic: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k * k * k;\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn --k * k * k + 1;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\t\t}\n\n\t},\n\n\tQuartic: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k * k * k * k;\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn 1 - --k * k * k * k;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn -0.5 * ((k -= 2) * k * k * k - 2);\n\t\t}\n\n\t},\n\n\tQuintic: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k * k * k * k * k;\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn --k * k * k * k * k + 1;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\t\t}\n\n\t},\n\n\tSinusoidal: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn Math.sin(k * Math.PI / 2);\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\t\t}\n\n\t},\n\n\tExponential: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n\t\t}\n\n\t},\n\n\tCircular: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\treturn Math.sqrt(1 - --k * k);\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn -0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\t\t}\n\n\t},\n\n\tElastic: {\n\n\t\tIn: function In(k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t}\n\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\t\t}\n\n\t},\n\n\tBack: {\n\n\t\tIn: function In(k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn k * k * ((s + 1) * k - s);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\t\t}\n\n\t},\n\n\tBounce: {\n\n\t\tIn: function In(k) {\n\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\t\t},\n\n\t\tOut: function Out(k) {\n\n\t\t\tif (k < 1 / 2.75) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < 2 / 2.75) {\n\t\t\t\treturn 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n\t\t\t} else if (k < 2.5 / 2.75) {\n\t\t\t\treturn 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n\t\t\t}\n\t\t},\n\n\t\tInOut: function InOut(k) {\n\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\t\t}\n\n\t}\n\n};\n\nTWEEN.Interpolation = {\n\n\tLinear: function Linear(v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\t},\n\n\tBezier: function Bezier(v, k) {\n\n\t\tvar b = 0;\n\t\tvar n = v.length - 1;\n\t\tvar pw = Math.pow;\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\tfor (var i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\t},\n\n\tCatmullRom: function CatmullRom(v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t}\n\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\t\t} else {\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\t\t}\n\t},\n\n\tUtils: {\n\n\t\tLinear: function Linear(p0, p1, t) {\n\n\t\t\treturn (p1 - p0) * t + p0;\n\t\t},\n\n\t\tBernstein: function Bernstein(n, i) {\n\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\t\t},\n\n\t\tFactorial: function () {\n\n\t\t\tvar a = [1];\n\n\t\t\treturn function (n) {\n\n\t\t\t\tvar s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\t\t\t};\n\t\t}(),\n\n\t\tCatmullRom: function CatmullRom(p0, p1, p2, p3, t) {\n\n\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t * t2;\n\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\t\t}\n\n\t}\n\n};\n\n(function (root) {\n\n\tif (typeof define === 'function' && __webpack_require__(322)) {\n\t\tdefine([], function () {\n\t\t\treturn TWEEN;\n\t\t});\n\t} else if (typeof module !== 'undefined' && (typeof exports === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default()(exports)) === 'object') {\n\t\tmodule.exports = TWEEN;\n\t} else if (root !== undefined) {\n\t\troot.TWEEN = TWEEN;\n\t}\n})(this);\n;\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"] = function (object, domElement) {\n\n\tthis.object = object;\n\tthis.domElement = domElement !== undefined ? domElement : document;\n\tthis.frameId;\n\n\tthis.enabled = true;\n\n\tthis.target = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n\tthis.center = this.target;\n\n\tthis.noZoom = false;\n\tthis.zoomSpeed = 1.0;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\tthis.noRotate = false;\n\tthis.rotateSpeed = -0.15;\n\n\tthis.noPan = true;\n\tthis.keyPanSpeed = 7.0;\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0;\n\tthis.minPolarAngle = 0;\n\tthis.maxPolarAngle = Math.PI;\n\tthis.momentumDampingFactor = 0.90;\n\tthis.momentumScalingFactor = -0.005;\n\tthis.momentumKeydownFactor = 20;\n\n\tthis.minFov = 30;\n\tthis.maxFov = 120;\n\n\tthis.minAzimuthAngle = -Infinity;\n\tthis.maxAzimuthAngle = Infinity;\n\tthis.noKeys = false;\n\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\tthis.mouseButtons = { ORBIT: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].LEFT, ZOOM: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].MIDDLE, PAN: __WEBPACK_IMPORTED_MODULE_8_three__[\"MOUSE\"].RIGHT };\n\n\tvar scope = this;\n\n\tvar EPS = 10e-8;\n\tvar MEPS = 10e-5;\n\n\tvar rotateStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar rotateEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar rotateDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n\tvar panStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar panEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar panDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar panOffset = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n\tvar offset = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n\tvar dollyStart = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar dollyEnd = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar dollyDelta = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n\tvar theta;\n\tvar phi;\n\tvar phiDelta = 0;\n\tvar thetaDelta = 0;\n\tvar scale = 1;\n\tvar pan = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\n\tvar lastPosition = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\tvar lastQuaternion = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n\tvar momentumLeft = 0,\n\t    momentumUp = 0;\n\tvar eventCurrent, eventPrevious;\n\tvar momentumOn = false;\n\n\tvar keyUp, keyBottom, keyLeft, keyRight;\n\n\tvar STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n\tvar state = STATE.NONE;\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\tvar quat = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]().setFromUnitVectors(object.up, new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0));\n\tvar quatInverse = quat.clone().inverse();\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tthis.setLastQuaternion = function (quaternion) {\n\t\tlastQuaternion.copy(quaternion);\n\t\tscope.object.quaternion.copy(quaternion);\n\t};\n\n\tthis.getLastPosition = function () {\n\t\treturn lastPosition;\n\t};\n\n\tthis.rotateLeft = function (angle) {\n\n\t\tif (angle === undefined) {\n\n\t\t\tangle = getAutoRotationAngle();\n\t\t}\n\n\t\tthetaDelta -= angle;\n\t};\n\n\tthis.rotateUp = function (angle) {\n\n\t\tif (angle === undefined) {\n\n\t\t\tangle = getAutoRotationAngle();\n\t\t}\n\n\t\tphiDelta -= angle;\n\t};\n\n\tthis.panLeft = function (distance) {\n\n\t\tvar te = this.object.matrix.elements;\n\n\t\tpanOffset.set(te[0], te[1], te[2]);\n\t\tpanOffset.multiplyScalar(-distance);\n\n\t\tpan.add(panOffset);\n\t};\n\n\tthis.panUp = function (distance) {\n\n\t\tvar te = this.object.matrix.elements;\n\n\t\tpanOffset.set(te[4], te[5], te[6]);\n\t\tpanOffset.multiplyScalar(distance);\n\n\t\tpan.add(panOffset);\n\t};\n\n\tthis.pan = function (deltaX, deltaY) {\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n\t\t\tvar position = scope.object.position;\n\t\t\tvar offset = position.clone().sub(scope.target);\n\t\t\tvar targetDistance = offset.length();\n\n\t\t\ttargetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n\t\t\tscope.panLeft(2 * deltaX * targetDistance / element.clientHeight);\n\t\t\tscope.panUp(2 * deltaY * targetDistance / element.clientHeight);\n\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n\t\t\tscope.panLeft(deltaX * (scope.object.right - scope.object.left) / element.clientWidth);\n\t\t\tscope.panUp(deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight);\n\t\t} else {\n\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n\t\t}\n\t};\n\n\tthis.momentum = function () {\n\n\t\tif (!momentumOn) return;\n\n\t\tif (Math.abs(momentumLeft) < MEPS && Math.abs(momentumUp) < MEPS) {\n\n\t\t\tmomentumOn = false;\n\t\t\treturn;\n\t\t}\n\n\t\tmomentumUp *= this.momentumDampingFactor;\n\t\tmomentumLeft *= this.momentumDampingFactor;\n\n\t\tthetaDelta -= this.momentumScalingFactor * momentumLeft;\n\t\tphiDelta -= this.momentumScalingFactor * momentumUp;\n\t};\n\n\tthis.dollyIn = function (dollyScale) {\n\n\t\tif (dollyScale === undefined) {\n\n\t\t\tdollyScale = getZoomScale();\n\t\t}\n\n\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n\n\t\t\tscale /= dollyScale;\n\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n\n\t\t\tscope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale));\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent(changeEvent);\n\t\t} else {\n\n\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t}\n\t};\n\n\tthis.dollyOut = function (dollyScale) {\n\n\t\tif (dollyScale === undefined) {\n\n\t\t\tdollyScale = getZoomScale();\n\t\t}\n\n\t\tif (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"]) {\n\n\t\t\tscale *= dollyScale;\n\t\t} else if (scope.object instanceof __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"]) {\n\n\t\t\tscope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale));\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent(changeEvent);\n\t\t} else {\n\n\t\t\tconsole.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n\t\t}\n\t};\n\n\tthis.update = function (ignoreUpdate) {\n\n\t\tvar position = this.object.position;\n\n\t\toffset.copy(position).sub(this.target);\n\n\t\toffset.applyQuaternion(quat);\n\n\t\ttheta = Math.atan2(offset.x, offset.z);\n\n\t\tphi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y);\n\n\t\tif (this.autoRotate && state === STATE.NONE) {\n\n\t\t\tthis.rotateLeft(getAutoRotationAngle());\n\t\t}\n\n\t\tthis.momentum();\n\n\t\ttheta += thetaDelta;\n\t\tphi += phiDelta;\n\n\t\ttheta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta));\n\n\t\tphi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi));\n\n\t\tphi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\n\n\t\tvar radius = offset.length() * scale;\n\n\t\tradius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\n\n\t\tthis.target.add(pan);\n\n\t\toffset.x = radius * Math.sin(phi) * Math.sin(theta);\n\t\toffset.y = radius * Math.cos(phi);\n\t\toffset.z = radius * Math.sin(phi) * Math.cos(theta);\n\n\t\toffset.applyQuaternion(quatInverse);\n\n\t\tposition.copy(this.target).add(offset);\n\n\t\tthis.object.lookAt(this.target);\n\n\t\tthetaDelta = 0;\n\t\tphiDelta = 0;\n\t\tscale = 1;\n\t\tpan.set(0, 0, 0);\n\n\t\tif (lastPosition.distanceToSquared(this.object.position) > EPS || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS) {\n\n\t\t\tignoreUpdate !== true && this.dispatchEvent(changeEvent);\n\n\t\t\tlastPosition.copy(this.object.position);\n\t\t\tlastQuaternion.copy(this.object.quaternion);\n\t\t}\n\t};\n\n\tthis.reset = function () {\n\n\t\tstate = STATE.NONE;\n\n\t\tthis.target.copy(this.target0);\n\t\tthis.object.position.copy(this.position0);\n\t\tthis.object.zoom = this.zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\t\tthis.dispatchEvent(changeEvent);\n\n\t\tthis.update();\n\t};\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn phi;\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn theta;\n\t};\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow(0.95, scope.zoomSpeed);\n\t}\n\n\tfunction onMouseDown(event) {\n\n\t\tmomentumOn = false;\n\n\t\tmomentumLeft = momentumUp = 0;\n\n\t\tif (scope.enabled === false) return;\n\t\tevent.preventDefault();\n\n\t\tif (event.button === scope.mouseButtons.ORBIT) {\n\t\t\tif (scope.noRotate === true) return;\n\n\t\t\tstate = STATE.ROTATE;\n\n\t\t\trotateStart.set(event.clientX, event.clientY);\n\t\t} else if (event.button === scope.mouseButtons.ZOOM) {\n\t\t\tif (scope.noZoom === true) return;\n\n\t\t\tstate = STATE.DOLLY;\n\n\t\t\tdollyStart.set(event.clientX, event.clientY);\n\t\t} else if (event.button === scope.mouseButtons.PAN) {\n\t\t\tif (scope.noPan === true) return;\n\n\t\t\tstate = STATE.PAN;\n\n\t\t\tpanStart.set(event.clientX, event.clientY);\n\t\t}\n\n\t\tif (state !== STATE.NONE) {\n\t\t\tdocument.addEventListener('mousemove', onMouseMove, false);\n\t\t\tdocument.addEventListener('mouseup', onMouseUp, false);\n\t\t\tscope.dispatchEvent(startEvent);\n\t\t}\n\n\t\tscope.update();\n\t}\n\n\tfunction onMouseMove(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tevent.preventDefault();\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\tif (state === STATE.ROTATE) {\n\n\t\t\tif (scope.noRotate === true) return;\n\n\t\t\trotateEnd.set(event.clientX, event.clientY);\n\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\t\tscope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\t\tscope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\t\trotateStart.copy(rotateEnd);\n\n\t\t\tif (eventPrevious) {\n\t\t\t\tmomentumLeft = event.clientX - eventPrevious.clientX;\n\t\t\t\tmomentumUp = event.clientY - eventPrevious.clientY;\n\t\t\t}\n\n\t\t\teventPrevious = event;\n\t\t} else if (state === STATE.DOLLY) {\n\n\t\t\tif (scope.noZoom === true) return;\n\n\t\t\tdollyEnd.set(event.clientX, event.clientY);\n\t\t\tdollyDelta.subVectors(dollyEnd, dollyStart);\n\n\t\t\tif (dollyDelta.y > 0) {\n\n\t\t\t\tscope.dollyIn();\n\t\t\t} else if (dollyDelta.y < 0) {\n\n\t\t\t\tscope.dollyOut();\n\t\t\t}\n\n\t\t\tdollyStart.copy(dollyEnd);\n\t\t} else if (state === STATE.PAN) {\n\n\t\t\tif (scope.noPan === true) return;\n\n\t\t\tpanEnd.set(event.clientX, event.clientY);\n\t\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\t\tscope.pan(panDelta.x, panDelta.y);\n\n\t\t\tpanStart.copy(panEnd);\n\t\t}\n\n\t\tif (state !== STATE.NONE) scope.update();\n\t}\n\n\tfunction onMouseUp() {\n\n\t\tmomentumOn = true;\n\n\t\teventPrevious = undefined;\n\n\t\tif (scope.enabled === false) return;\n\n\t\tdocument.removeEventListener('mousemove', onMouseMove, false);\n\t\tdocument.removeEventListener('mouseup', onMouseUp, false);\n\t\tscope.dispatchEvent(endEvent);\n\t\tstate = STATE.NONE;\n\t}\n\n\tfunction onMouseWheel(event) {\n\n\t\tif (scope.enabled === false || scope.noZoom === true || state !== STATE.NONE) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar delta = 0;\n\n\t\tif (event.wheelDelta !== undefined) {\n\n\t\t\tdelta = event.wheelDelta;\n\t\t} else if (event.detail !== undefined) {\n\n\t\t\tdelta = -event.detail;\n\t\t}\n\n\t\tif (delta > 0) {\n\t\t\tscope.object.fov = scope.object.fov < scope.maxFov ? scope.object.fov + 1 : scope.maxFov;\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t} else if (delta < 0) {\n\t\t\tscope.object.fov = scope.object.fov > scope.minFov ? scope.object.fov - 1 : scope.minFov;\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t}\n\n\t\tscope.update();\n\t\tscope.dispatchEvent(changeEvent);\n\t\tscope.dispatchEvent(startEvent);\n\t\tscope.dispatchEvent(endEvent);\n\t}\n\n\tfunction onKeyUp(event) {\n\n\t\tswitch (event.keyCode) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tkeyUp = false;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tkeyBottom = false;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tkeyLeft = false;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tkeyRight = false;\n\t\t\t\tbreak;\n\n\t\t}\n\t}\n\n\tfunction onKeyDown(event) {\n\n\t\tif (scope.enabled === false || scope.noKeys === true || scope.noRotate === true) return;\n\n\t\tswitch (event.keyCode) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tkeyUp = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tkeyBottom = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tkeyLeft = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tkeyRight = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif (keyUp || keyBottom || keyLeft || keyRight) {\n\n\t\t\tmomentumOn = true;\n\n\t\t\tif (keyUp) momentumUp = -scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t\tif (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t\tif (keyLeft) momentumLeft = -scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t\tif (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t}\n\t}\n\n\tfunction touchstart(event) {\n\n\t\tmomentumOn = false;\n\n\t\tmomentumLeft = momentumUp = 0;\n\n\t\tif (scope.enabled === false) return;\n\n\t\tswitch (event.touches.length) {\n\n\t\t\tcase 1:\n\n\t\t\t\tif (scope.noRotate === true) return;\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\trotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tif (scope.noZoom === true) return;\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\n\t\t\t\tif (scope.noPan === true) return;\n\n\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\tpanStart.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif (state !== STATE.NONE) scope.dispatchEvent(startEvent);\n\t}\n\n\tfunction touchmove(event) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\tswitch (event.touches.length) {\n\n\t\t\tcase 1:\n\n\t\t\t\tif (scope.noRotate === true) return;\n\t\t\t\tif (state !== STATE.TOUCH_ROTATE) return;\n\n\t\t\t\trotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\t\trotateDelta.subVectors(rotateEnd, rotateStart);\n\n\t\t\t\tscope.rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\n\n\t\t\t\tscope.rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n\n\t\t\t\trotateStart.copy(rotateEnd);\n\n\t\t\t\tif (eventPrevious) {\n\t\t\t\t\tmomentumLeft = event.touches[0].pageX - eventPrevious.pageX;\n\t\t\t\t\tmomentumUp = event.touches[0].pageY - eventPrevious.pageY;\n\t\t\t\t}\n\n\t\t\t\teventPrevious = {\n\t\t\t\t\tpageX: event.touches[0].pageX,\n\t\t\t\t\tpageY: event.touches[0].pageY\n\t\t\t\t};\n\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tif (scope.noZoom === true) return;\n\t\t\t\tif (state !== STATE.TOUCH_DOLLY) return;\n\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tif (event.scale < 1) {\n\n\t\t\t\t\tscope.object.fov = scope.object.fov < scope.maxFov ? scope.object.fov + 1 : scope.maxFov;\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t} else if (event.scale > 1) {\n\n\t\t\t\t\tscope.object.fov = scope.object.fov > scope.minFov ? scope.object.fov - 1 : scope.minFov;\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t}\n\n\t\t\t\tscope.update();\n\t\t\t\tscope.dispatchEvent(changeEvent);\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\n\t\t\t\tif (scope.noPan === true) return;\n\t\t\t\tif (state !== STATE.TOUCH_PAN) return;\n\n\t\t\t\tpanEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\t\t\t\tpanDelta.subVectors(panEnd, panStart);\n\n\t\t\t\tscope.pan(panDelta.x, panDelta.y);\n\n\t\t\t\tpanStart.copy(panEnd);\n\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\t}\n\n\tfunction touchend() {\n\n\t\tmomentumOn = true;\n\n\t\teventPrevious = undefined;\n\n\t\tif (scope.enabled === false) return;\n\n\t\tscope.dispatchEvent(endEvent);\n\t\tstate = STATE.NONE;\n\t}\n\n\tthis.domElement.addEventListener('mousedown', onMouseDown, false);\n\tthis.domElement.addEventListener('mousewheel', onMouseWheel, false);\n\tthis.domElement.addEventListener('DOMMouseScroll', onMouseWheel, false);\n\n\tthis.domElement.addEventListener('touchstart', touchstart, false);\n\tthis.domElement.addEventListener('touchend', touchend, false);\n\tthis.domElement.addEventListener('touchmove', touchmove, false);\n\n\twindow.addEventListener('keyup', onKeyUp, false);\n\twindow.addEventListener('keydown', onKeyDown, false);\n\n\tthis.update();\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"].prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n__WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"].prototype.constructor = __WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"];;\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"] = function (camera, domElement) {\n\n\tvar scope = this;\n\tvar changeEvent = { type: 'change' };\n\n\tvar rotY = 0;\n\tvar rotX = 0;\n\tvar tempX = 0;\n\tvar tempY = 0;\n\n\tthis.camera = camera;\n\tthis.camera.rotation.reorder(\"YXZ\");\n\tthis.domElement = domElement !== undefined ? domElement : document;\n\n\tthis.enabled = true;\n\n\tthis.deviceOrientation = {};\n\tthis.screenOrientation = 0;\n\n\tthis.alpha = 0;\n\tthis.alphaOffsetAngle = 0;\n\n\tvar onDeviceOrientationChangeEvent = function onDeviceOrientationChangeEvent(event) {\n\n\t\tscope.deviceOrientation = event;\n\t};\n\n\tvar onScreenOrientationChangeEvent = function onScreenOrientationChangeEvent() {\n\n\t\tscope.screenOrientation = window.orientation || 0;\n\t};\n\n\tvar onTouchStartEvent = function onTouchStartEvent(event) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\ttempX = event.touches[0].pageX;\n\t\ttempY = event.touches[0].pageY;\n\t};\n\n\tvar onTouchMoveEvent = function onTouchMoveEvent(event) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\trotY += __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad((event.touches[0].pageX - tempX) / 4);\n\t\trotX += __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad((tempY - event.touches[0].pageY) / 4);\n\n\t\tscope.updateAlphaOffsetAngle(rotY);\n\n\t\ttempX = event.touches[0].pageX;\n\t\ttempY = event.touches[0].pageY;\n\t};\n\n\tvar setCameraQuaternion = function setCameraQuaternion(quaternion, alpha, beta, gamma, orient) {\n\n\t\tvar zee = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 0, 1);\n\n\t\tvar euler = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Euler\"]();\n\n\t\tvar q0 = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n\t\tvar q1 = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"](-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5));\n\n\t\tvar vectorFingerY;\n\t\tvar fingerQY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\t\tvar fingerQX = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n\t\tif (scope.screenOrientation == 0) {\n\n\t\t\tvectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n\t\t\tfingerQY.setFromAxisAngle(vectorFingerY, -rotX);\n\t\t} else if (scope.screenOrientation == 180) {\n\n\t\t\tvectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n\t\t\tfingerQY.setFromAxisAngle(vectorFingerY, rotX);\n\t\t} else if (scope.screenOrientation == 90) {\n\n\t\t\tvectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n\t\t\tfingerQY.setFromAxisAngle(vectorFingerY, rotX);\n\t\t} else if (scope.screenOrientation == -90) {\n\n\t\t\tvectorFingerY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n\t\t\tfingerQY.setFromAxisAngle(vectorFingerY, -rotX);\n\t\t}\n\n\t\tq1.multiply(fingerQY);\n\t\tq1.multiply(fingerQX);\n\n\t\teuler.set(beta, alpha, -gamma, 'YXZ');\n\n\t\tquaternion.setFromEuler(euler);\n\n\t\tquaternion.multiply(q1);\n\n\t\tquaternion.multiply(q0.setFromAxisAngle(zee, -orient));\n\t};\n\n\tthis.connect = function () {\n\n\t\tonScreenOrientationChangeEvent();\n\n\t\twindow.addEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n\t\twindow.addEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n\t\twindow.addEventListener('deviceorientation', this.update.bind(this), false);\n\n\t\tscope.domElement.addEventListener(\"touchstart\", onTouchStartEvent, false);\n\t\tscope.domElement.addEventListener(\"touchmove\", onTouchMoveEvent, false);\n\n\t\tscope.enabled = true;\n\t};\n\n\tthis.disconnect = function () {\n\n\t\twindow.removeEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n\t\twindow.removeEventListener('deviceorientation', onDeviceOrientationChangeEvent, false);\n\t\twindow.removeEventListener('deviceorientation', this.update.bind(this), false);\n\n\t\tscope.domElement.removeEventListener(\"touchstart\", onTouchStartEvent, false);\n\t\tscope.domElement.removeEventListener(\"touchmove\", onTouchMoveEvent, false);\n\n\t\tscope.enabled = false;\n\t};\n\n\tthis.update = function (ignoreUpdate) {\n\n\t\tif (scope.enabled === false) return;\n\n\t\tvar alpha = scope.deviceOrientation.alpha ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.alpha) + this.alphaOffsetAngle : 0;\n\t\tvar beta = scope.deviceOrientation.beta ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.beta) : 0;\n\t\tvar gamma = scope.deviceOrientation.gamma ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.deviceOrientation.gamma) : 0;\n\t\tvar orient = scope.screenOrientation ? __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.screenOrientation) : 0;\n\n\t\tsetCameraQuaternion(scope.camera.quaternion, alpha, beta, gamma, orient);\n\t\tthis.alpha = alpha;\n\n\t\tignoreUpdate !== true && this.dispatchEvent(changeEvent);\n\t};\n\n\tthis.updateAlphaOffsetAngle = function (angle) {\n\n\t\tthis.alphaOffsetAngle = angle;\n\t\tthis.update();\n\t};\n\n\tthis.dispose = function () {\n\n\t\tthis.disconnect();\n\t};\n\n\tthis.connect();\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"].prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n__WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"].prototype.constructor = __WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"];;\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"] = function () {};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"].prototype = {\n\n\tconstructor: __WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"],\n\n\tset: function set(direction, axis, angle) {\n\t\tthis.direction = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();this.direction.copy(direction);\n\t\tthis.axis = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();this.axis.copy(axis);\n\t\tthis.angle = angle;\n\t\treturn this;\n\t},\n\n\t_sign: function _sign(a) {\n\t\treturn 0 > a ? -1 : 0 < a ? 1 : 0;\n\t},\n\n\t_cosh: function _cosh(x) {\n\t\treturn (Math.exp(x) + Math.exp(-x)) / 2;\n\t},\n\n\t_sinhInverse: function _sinhInverse(x) {\n\t\treturn Math.log(Math.abs(x) + Math.sqrt(x * x + 1));\n\t},\n\n\tmodify: function modify(geometry) {\n\n\t\tvar thirdAxis = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();thirdAxis.crossVectors(this.direction, this.axis);\n\n\t\tvar P = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]();\n\t\tP.set(thirdAxis.x, thirdAxis.y, thirdAxis.z, 0, this.direction.x, this.direction.y, this.direction.z, 0, this.axis.x, this.axis.y, this.axis.z, 0, 0, 0, 0, 1).transpose();\n\n\t\tvar InverseP = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]().getInverse(P);\n\t\tvar newVertices = [];var oldVertices = [];var anglesBetweenOldandNewVertices = [];\n\n\t\tvar meshGeometryBoundingBoxMaxx = 0;var meshGeometryBoundingBoxMinx = 0;\n\t\tvar meshGeometryBoundingBoxMaxy = 0;var meshGeometryBoundingBoxMiny = 0;\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\tnewVertices[i] = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();newVertices[i].copy(geometry.vertices[i]).applyMatrix4(InverseP);\n\t\t\tif (newVertices[i].x > meshGeometryBoundingBoxMaxx) {\n\t\t\t\tmeshGeometryBoundingBoxMaxx = newVertices[i].x;\n\t\t\t}\n\t\t\tif (newVertices[i].x < meshGeometryBoundingBoxMinx) {\n\t\t\t\tmeshGeometryBoundingBoxMinx = newVertices[i].x;\n\t\t\t}\n\t\t\tif (newVertices[i].y > meshGeometryBoundingBoxMaxy) {\n\t\t\t\tmeshGeometryBoundingBoxMaxy = newVertices[i].y;\n\t\t\t}\n\t\t\tif (newVertices[i].y < meshGeometryBoundingBoxMiny) {\n\t\t\t\tmeshGeometryBoundingBoxMiny = newVertices[i].y;\n\t\t\t}\n\t\t}\n\n\t\tvar meshWidthold = meshGeometryBoundingBoxMaxx - meshGeometryBoundingBoxMinx;\n\t\tvar meshDepth = meshGeometryBoundingBoxMaxy - meshGeometryBoundingBoxMiny;\n\t\tvar ParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidthold;\n\t\tvar oldMiddlex = (meshGeometryBoundingBoxMaxx + meshGeometryBoundingBoxMinx) / 2;\n\t\tvar oldMiddley = (meshGeometryBoundingBoxMaxy + meshGeometryBoundingBoxMiny) / 2;\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\toldVertices[i] = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();oldVertices[i].copy(newVertices[i]);\n\t\t\tnewVertices[i].x = this._sign(newVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((newVertices[i].x - oldMiddlex) * ParamB);\n\t\t}\n\n\t\tvar meshWidth = 2 / ParamB * this._sinhInverse(meshWidthold / 2 * ParamB);\n\n\t\tvar NewParamB = 2 * this._sinhInverse(Math.tan(this.angle)) / meshWidth;\n\n\t\tvar rightEdgePos = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](meshWidth / 2, -meshDepth / 2, 0);\n\t\trightEdgePos.y = 1 / NewParamB * this._cosh(NewParamB * rightEdgePos.x) - 1 / NewParamB - meshDepth / 2;\n\n\t\tvar bendCenter = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, rightEdgePos.y + rightEdgePos.x / Math.tan(this.angle), 0);\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\tvar x0 = this._sign(oldVertices[i].x - oldMiddlex) * 1 / ParamB * this._sinhInverse((oldVertices[i].x - oldMiddlex) * ParamB);\n\t\t\tvar y0 = 1 / NewParamB * this._cosh(NewParamB * x0) - 1 / NewParamB;\n\n\t\t\tvar k = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](bendCenter.x - x0, bendCenter.y - (y0 - meshDepth / 2), bendCenter.z).normalize();\n\n\t\t\tvar Q = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();\n\t\t\tQ.addVectors(new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](x0, y0 - meshDepth / 2, oldVertices[i].z), k.multiplyScalar(oldVertices[i].y + meshDepth / 2));\n\t\t\tnewVertices[i].x = Q.x;newVertices[i].y = Q.y;\n\t\t}\n\n\t\tvar middle = oldMiddlex * meshWidth / meshWidthold;\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++) {\n\n\t\t\tvar O = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](oldMiddlex, oldMiddley, oldVertices[i].z);\n\t\t\tvar p = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();p.subVectors(oldVertices[i], O);\n\t\t\tvar q = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"]();q.subVectors(newVertices[i], O);\n\n\t\t\tanglesBetweenOldandNewVertices[i] = Math.acos(1 / this._cosh(ParamB * newVertices[i].x)) * this._sign(newVertices[i].x);\n\n\t\t\tnewVertices[i].x = newVertices[i].x + middle;\n\t\t\tgeometry.vertices[i].copy(newVertices[i].applyMatrix4(P));\n\t\t}\n\n\t\tgeometry.computeFaceNormals();\n\t\tgeometry.verticesNeedUpdate = true;\n\t\tgeometry.normalsNeedUpdate = true;\n\n\t\tvar fvNames = ['a', 'b', 'c', 'd'];\n\n\t\tfor (var f = 0, fl = geometry.faces.length; f < fl; f++) {\n\n\t\t\tvar face = geometry.faces[f];\n\t\t\tif (face.vertexNormals === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (var v = 0, vl = face.vertexNormals.length; v < vl; v++) {\n\n\t\t\t\tvar angle = anglesBetweenOldandNewVertices[face[fvNames[v]]];\n\t\t\t\tvar x = this.axis.x,\n\t\t\t\t    y = this.axis.y,\n\t\t\t\t    z = this.axis.z;\n\n\t\t\t\tvar rotateMatrix = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix3\"]();\n\t\t\t\trotateMatrix.set(Math.cos(angle) + (1 - Math.cos(angle)) * x * x, (1 - Math.cos(angle)) * x * y - Math.sin(angle) * z, (1 - Math.cos(angle)) * x * z + Math.sin(angle) * y, (1 - Math.cos(angle)) * y * x + Math.sin(angle) * z, Math.cos(angle) + (1 - Math.cos(angle)) * y * y, (1 - Math.cos(angle)) * y * z - Math.sin(angle) * x, (1 - Math.cos(angle)) * z * x - Math.sin(angle) * y, (1 - Math.cos(angle)) * z * y + Math.sin(angle) * x, Math.cos(angle) + (1 - Math.cos(angle)) * z * z);\n\n\t\t\t\tface.vertexNormals[v].applyMatrix3(rotateMatrix);\n\t\t\t}\n\t\t}\n\n\n\t\treturn this;\n\t}\n};\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"CardboardEffect\"] = function (renderer) {\n\n\tvar _camera = new __WEBPACK_IMPORTED_MODULE_8_three__[\"OrthographicCamera\"](-1, 1, 1, -1, 0, 1);\n\n\tvar _scene = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Scene\"]();\n\n\tvar _stereo = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoCamera\"]();\n\t_stereo.aspect = 0.5;\n\n\tvar _params = { minFilter: __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"], magFilter: __WEBPACK_IMPORTED_MODULE_8_three__[\"NearestFilter\"], format: __WEBPACK_IMPORTED_MODULE_8_three__[\"RGBAFormat\"] };\n\n\tvar _renderTarget = new __WEBPACK_IMPORTED_MODULE_8_three__[\"WebGLRenderTarget\"](512, 512, _params);\n\t_renderTarget.scissorTest = true;\n\t_renderTarget.texture.generateMipmaps = false;\n\n\tvar distortion = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"](0.441, 0.156);\n\n\tvar geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneBufferGeometry\"](1, 1, 10, 20).removeAttribute('normal').toNonIndexed();\n\n\tvar positions = geometry.attributes.position.array;\n\tvar uvs = geometry.attributes.uv.array;\n\n\tgeometry.attributes.position.count *= 2;\n\tgeometry.attributes.uv.count *= 2;\n\n\tvar positions2 = new Float32Array(positions.length * 2);\n\tpositions2.set(positions);\n\tpositions2.set(positions, positions.length);\n\n\tvar uvs2 = new Float32Array(uvs.length * 2);\n\tuvs2.set(uvs);\n\tuvs2.set(uvs, uvs.length);\n\n\tvar vector = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\tvar length = positions.length / 3;\n\n\tfor (var i = 0, l = positions2.length / 3; i < l; i++) {\n\n\t\tvector.x = positions2[i * 3 + 0];\n\t\tvector.y = positions2[i * 3 + 1];\n\n\t\tvar dot = vector.dot(vector);\n\t\tvar scalar = 1.5 + (distortion.x + distortion.y * dot) * dot;\n\n\t\tvar offset = i < length ? 0 : 1;\n\n\t\tpositions2[i * 3 + 0] = vector.x / scalar * 1.5 - 0.5 + offset;\n\t\tpositions2[i * 3 + 1] = vector.y / scalar * 3.0;\n\n\t\tuvs2[i * 2] = (uvs2[i * 2] + offset) * 0.5;\n\t}\n\n\tgeometry.attributes.position.array = positions2;\n\tgeometry.attributes.uv.array = uvs2;\n\n\tvar material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ map: _renderTarget.texture });\n\tvar mesh = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"](geometry, material);\n\t_scene.add(mesh);\n\n\tthis.setSize = function (width, height) {\n\n\t\trenderer.setSize(width, height);\n\n\t\tvar pixelRatio = renderer.getPixelRatio();\n\n\t\t_renderTarget.setSize(width * pixelRatio, height * pixelRatio);\n\t};\n\n\tthis.render = function (scene, camera) {\n\n\t\tscene.updateMatrixWorld();\n\n\t\tif (camera.parent === null) camera.updateMatrixWorld();\n\n\t\t_stereo.update(camera);\n\n\t\tvar width = _renderTarget.width / 2;\n\t\tvar height = _renderTarget.height;\n\n\t\t_renderTarget.scissor.set(0, 0, width, height);\n\t\t_renderTarget.viewport.set(0, 0, width, height);\n\t\trenderer.render(scene, _stereo.cameraL, _renderTarget);\n\n\t\t_renderTarget.scissor.set(width, 0, width, height);\n\t\t_renderTarget.viewport.set(width, 0, width, height);\n\t\trenderer.render(scene, _stereo.cameraR, _renderTarget);\n\n\t\trenderer.render(_scene, _camera);\n\t};\n};;\n\n__WEBPACK_IMPORTED_MODULE_8_three__[\"StereoEffect\"] = function (renderer) {\n\n\tvar _stereo = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoCamera\"]();\n\t_stereo.aspect = 0.5;\n\n\tthis.setEyeSeparation = function (eyeSep) {\n\n\t\t_stereo.eyeSep = eyeSep;\n\t};\n\n\tthis.setSize = function (width, height) {\n\n\t\trenderer.setSize(width, height);\n\t};\n\n\tthis.render = function (scene, camera) {\n\n\t\tscene.updateMatrixWorld();\n\n\t\tif (camera.parent === null) camera.updateMatrixWorld();\n\n\t\t_stereo.update(camera);\n\n\t\tvar size = renderer.getSize();\n\n\t\tif (renderer.autoClear) renderer.clear();\n\t\trenderer.setScissorTest(true);\n\n\t\trenderer.setScissor(0, 0, size.width / 2, size.height);\n\t\trenderer.setViewport(0, 0, size.width / 2, size.height);\n\t\trenderer.render(scene, _stereo.cameraL);\n\n\t\trenderer.setScissor(size.width / 2, 0, size.width / 2, size.height);\n\t\trenderer.setViewport(size.width / 2, 0, size.width / 2, size.height);\n\t\trenderer.render(scene, _stereo.cameraR);\n\n\t\trenderer.setScissorTest(false);\n\t};\n};\n;var GSVPANO = GSVPANO || {};\nGSVPANO.PanoLoader = function (parameters) {\n\n\t'use strict';\n\n\tvar _parameters = parameters || {},\n\t    _location,\n\t    _zoom,\n\t    _panoId,\n\t    _panoClient = new google.maps.StreetViewService(),\n\t    _count = 0,\n\t    _total = 0,\n\t    _canvas = [],\n\t    _ctx = [],\n\t    _wc = 0,\n\t    _hc = 0,\n\t    result = null,\n\t    rotation = 0,\n\t    copyright = '',\n\t    onSizeChange = null,\n\t    onPanoramaLoad = null;\n\n\tvar levelsW = [1, 2, 4, 7, 13, 26],\n\t    levelsH = [1, 1, 2, 4, 7, 13];\n\n\tvar widths = [416, 832, 1664, 3328, 6656, 13312],\n\t    heights = [416, 416, 832, 1664, 3328, 6656];\n\n\tvar gl = null;\n\ttry {\n\t\tvar canvas = document.createElement('canvas');\n\t\tgl = canvas.getContext('experimental-webgl');\n\t\tif (gl == null) {\n\t\t\tgl = canvas.getContext('webgl');\n\t\t}\n\t} catch (error) {}\n\n\tvar maxW = 1024,\n\t    maxH = 1024;\n\n\tif (gl) {\n\t\tvar maxTexSize = Math.max(gl.getParameter(gl.MAX_TEXTURE_SIZE), 6656);\n\n\t\tmaxW = maxH = maxTexSize;\n\t}\n\n\tthis.setProgress = function (loaded, total) {\n\n\t\tif (this.onProgress) {\n\t\t\tthis.onProgress({ loaded: loaded, total: total });\n\t\t}\n\t};\n\n\tthis.throwError = function (message) {\n\n\t\tif (this.onError) {\n\t\t\tthis.onError(message);\n\t\t} else {\n\t\t\tconsole.error(message);\n\t\t}\n\t};\n\n\tthis.adaptTextureToZoom = function () {\n\n\t\tvar w = levelsW[_zoom] * 416,\n\t\t    h = levelsH[_zoom] * 416;\n\n\t\tw = widths[_zoom];\n\t\th = heights[_zoom];\n\n\t\t_wc = Math.ceil(w / maxW);\n\t\t_hc = Math.ceil(h / maxH);\n\n\t\t_canvas = [];_ctx = [];\n\n\t\tvar ptr = 0;\n\t\tfor (var y = 0; y < _hc; y++) {\n\t\t\tfor (var x = 0; x < _wc; x++) {\n\t\t\t\tvar c = document.createElement('canvas');\n\t\t\t\tif (x < _wc - 1) c.width = maxW;else c.width = w - maxW * x;\n\t\t\t\tif (y < _hc - 1) c.height = maxH;else c.height = h - maxH * y;\n\t\t\t\t_canvas.push(c);\n\t\t\t\t_ctx.push(c.getContext('2d'));\n\t\t\t\tptr++;\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.composeFromTile = function (x, y, texture) {\n\n\t\tx *= 512;\n\t\ty *= 512;\n\t\tvar px = Math.floor(x / maxW),\n\t\t    py = Math.floor(y / maxH);\n\n\t\tx -= px * maxW;\n\t\ty -= py * maxH;\n\n\t\t_ctx[py * _wc + px].drawImage(texture, 0, 0, texture.width, texture.height, x, y, 512, 512);\n\t\tthis.progress();\n\t};\n\n\tthis.progress = function () {\n\n\t\t_count++;\n\n\t\tvar p = Math.round(_count * 100 / _total);\n\t\tthis.setProgress(_count, _total);\n\n\t\tif (_count === _total) {\n\t\t\tthis.canvas = _canvas;\n\t\t\tthis.panoId = _panoId;\n\t\t\tthis.zoom = _zoom;\n\t\t\tif (this.onPanoramaLoad) {\n\t\t\t\tthis.onPanoramaLoad(_canvas[0]);\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.loadFromId = function (id) {\n\n\t\t_panoId = id;\n\t\tthis.composePanorama();\n\t};\n\n\tthis.composePanorama = function () {\n\n\t\tthis.setProgress(0, 1);\n\n\t\tvar w = levelsW[_zoom],\n\t\t    h = levelsH[_zoom],\n\t\t    self = this,\n\t\t    url,\n\t\t    x,\n\t\t    y;\n\n\t\t_count = 0;\n\t\t_total = w * h;\n\n\t\tvar self = this;\n\t\tfor (var y = 0; y < h; y++) {\n\t\t\tfor (var x = 0; x < w; x++) {\n\t\t\t\tvar url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + _zoom + '&x=' + x + '&y=' + y + '&panoid=' + _panoId + '&nbt&fover=2';\n\t\t\t\t(function (x, y) {\n\t\t\t\t\tif (_parameters.useWebGL) {\n\t\t\t\t\t\tvar texture = __WEBPACK_IMPORTED_MODULE_8_three__[\"ImageUtils\"].loadTexture(url, null, function () {\n\t\t\t\t\t\t\tself.composeFromTile(x, y, texture);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar img = new Image();\n\t\t\t\t\t\timg.addEventListener('load', function () {\n\t\t\t\t\t\t\tself.composeFromTile(x, y, this);\n\t\t\t\t\t\t});\n\t\t\t\t\t\timg.crossOrigin = '';\n\t\t\t\t\t\timg.src = url;\n\t\t\t\t\t}\n\t\t\t\t})(x, y);\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.load = function (panoid) {\n\n\t\tthis.loadPano(panoid);\n\t};\n\n\tthis.loadPano = function (id) {\n\n\t\tvar self = this;\n\t\t_panoClient.getPanoramaById(id, function (result, status) {\n\t\t\tif (status === google.maps.StreetViewStatus.OK) {\n\t\t\t\tself.result = result;\n\t\t\t\tif (self.onPanoramaData) self.onPanoramaData(result);\n\n\t\t\t\tcopyright = result.copyright;\n\t\t\t\tself.copyright = result.copyright;\n\t\t\t\t_panoId = result.location.pano;\n\t\t\t\tself.location = location;\n\t\t\t\tself.composePanorama();\n\t\t\t} else {\n\t\t\t\tif (self.onNoPanoramaData) self.onNoPanoramaData(status);\n\t\t\t\tself.throwError('Could not retrieve panorama for the following reason: ' + status);\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.setZoom = function (z) {\n\t\t_zoom = z;\n\t\tthis.adaptTextureToZoom();\n\t};\n\n\tthis.setZoom(_parameters.zoom || 1);\n};;(function () {\n\n\t'use strict';\n\n\tPANOLENS.DataImageSource = 'https://pchen66.github.io/Panolens/asset/icon/';\n\n\tPANOLENS.DataImage = {\n\t\tInfo: PANOLENS.DataImageSource + 'information.png',\n\t\tArrow: PANOLENS.DataImageSource + 'arrow-up.png',\n\t\tFullscreenEnter: PANOLENS.DataImageSource + 'fullscreen.png',\n\t\tFullscreenLeave: PANOLENS.DataImageSource + 'fullscreen-exit.png',\n\t\tVideoPlay: PANOLENS.DataImageSource + 'video-play.png',\n\t\tVideoPause: PANOLENS.DataImageSource + 'pause.png',\n\t\tWhiteTile: PANOLENS.DataImageSource + 'tiles.png',\n\t\tReticleIdle: PANOLENS.DataImageSource + 'reticle-idle.png',\n\t\tSetting: PANOLENS.DataImageSource + 'setting.png',\n\t\tChevronRight: PANOLENS.DataImageSource + 'chevron-right.png',\n\t\tCheck: PANOLENS.DataImageSource + 'check.png',\n\t\tViewIndicator: PANOLENS.DataImageSource + 'view-indicator.svg',\n\t\tReticleDwell: PANOLENS.DataImageSource + 'reticle-animation.png'\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Controls = {\n\n\t\tORBIT: 0,\n\n\t\tDEVICEORIENTATION: 1\n\n\t};\n\n\tPANOLENS.Modes = {\n\t\tUNKNOWN: 0,\n\n\t\tNORMAL: 1,\n\n\t\tCARDBOARD: 2,\n\n\t\tSTEREO: 3\n\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Utils = {};\n\n\tPANOLENS.Utils.checkTouchSupported = function () {\n\n\t\treturn window ? 'ontouchstart' in window || window.navigator.msMaxTouchPoints : false;\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Utils.ImageLoader = {};\n\n\tPANOLENS.Utils.ImageLoader.load = function (url, onLoad, onProgress, onError) {\n\n\t\tvar cached, request, arrayBufferView, blob, urlCreator, image, reference;\n\n\t\tfor (var iconName in PANOLENS.DataImage) {\n\n\t\t\tif (PANOLENS.DataImage.hasOwnProperty(iconName) && url === PANOLENS.DataImage[iconName]) {\n\n\t\t\t\treference = iconName;\n\t\t\t}\n\t\t}\n\n\t\tcached = __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].get(reference ? reference : url);\n\n\t\tif (cached !== undefined) {\n\n\t\t\tif (onLoad) {\n\n\t\t\t\tsetTimeout(function () {\n\n\t\t\t\t\tif (onProgress) {\n\n\t\t\t\t\t\tonProgress({ loaded: 1, total: 1 });\n\t\t\t\t\t}\n\n\t\t\t\t\tonLoad(cached);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t\treturn cached;\n\t\t}\n\n\t\turlCreator = window.URL || window.webkitURL;\n\t\timage = document.createElementNS('http://www.w3.org/1999/xhtml', 'img');\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].add(reference ? reference : url, image);\n\n\t\tfunction onImageLoaded() {\n\n\t\t\turlCreator.revokeObjectURL(image.src);\n\t\t\tonLoad && onLoad(image);\n\t\t}\n\n\t\tif (url.indexOf('data:') === 0) {\n\n\t\t\timage.addEventListener('load', onImageLoaded, false);\n\t\t\timage.src = url;\n\t\t\treturn image;\n\t\t}\n\n\t\timage.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : '';\n\n\t\trequest = new XMLHttpRequest();\n\t\trequest.open('GET', url, true);\n\t\trequest.responseType = 'arraybuffer';\n\t\trequest.onprogress = function (event) {\n\n\t\t\tif (event.lengthComputable) {\n\n\t\t\t\tonProgress && onProgress({ loaded: event.loaded, total: event.total });\n\t\t\t}\n\t\t};\n\t\trequest.onloadend = function (event) {\n\n\t\t\tarrayBufferView = new Uint8Array(this.response);\n\t\t\tblob = new Blob([arrayBufferView]);\n\n\t\t\timage.addEventListener('load', onImageLoaded, false);\n\t\t\timage.src = urlCreator.createObjectURL(blob);\n\t\t};\n\n\t\trequest.send(null);\n\t};\n\n\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].enabled = true;\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Utils.TextureLoader = {};\n\n\tPANOLENS.Utils.TextureLoader.load = function (url, onLoad, onProgress, onError) {\n\n\t\tvar texture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\n\t\tPANOLENS.Utils.ImageLoader.load(url, function (image) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tonLoad && onLoad(texture);\n\t\t}, onProgress, onError);\n\n\t\treturn texture;\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Utils.CubeTextureLoader = {};\n\n\tPANOLENS.Utils.CubeTextureLoader.load = function (urls, onLoad, onProgress, onError) {\n\n\t\tvar texture, loaded, progress, all, loadings;\n\n\t\ttexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"CubeTexture\"]([]);\n\n\t\tloaded = 0;\n\t\tprogress = {};\n\t\tall = {};\n\n\t\turls.map(function (url, index) {\n\n\t\t\tPANOLENS.Utils.ImageLoader.load(url, function (image) {\n\n\t\t\t\ttexture.images[index] = image;\n\n\t\t\t\tloaded++;\n\n\t\t\t\tif (loaded === 6) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tonLoad && onLoad(texture);\n\t\t\t\t}\n\t\t\t}, function (event) {\n\n\t\t\t\tprogress[index] = { loaded: event.loaded, total: event.total };\n\n\t\t\t\tall.loaded = 0;\n\t\t\t\tall.total = 0;\n\t\t\t\tloadings = 0;\n\n\t\t\t\tfor (var i in progress) {\n\n\t\t\t\t\tloadings++;\n\t\t\t\t\tall.loaded += progress[i].loaded;\n\t\t\t\t\tall.total += progress[i].total;\n\t\t\t\t}\n\n\t\t\t\tif (loadings < 6) {\n\n\t\t\t\t\tall.total = all.total / loadings * 6;\n\t\t\t\t}\n\n\t\t\t\tonProgress && onProgress(all);\n\t\t\t}, onError);\n\t\t});\n\n\t\treturn texture;\n\t};\n})();;\n\nPANOLENS.StereographicShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]() },\n\t\t\"resolution\": { value: 1.0 },\n\t\t\"transform\": { value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]() },\n\t\t\"zoom\": { value: 1.0 }\n\n\t},\n\n\tvertexShader: [\"varying vec2 vUv;\", \"void main() {\", \"vUv = uv;\", \"gl_Position = vec4( position, 1.0 );\", \"}\"].join(\"\\n\"),\n\n\tfragmentShader: [\"uniform sampler2D tDiffuse;\", \"uniform float resolution;\", \"uniform mat4 transform;\", \"uniform float zoom;\", \"varying vec2 vUv;\", \"const float PI = 3.141592653589793;\", \"void main(){\", \"vec2 position = -1.0 +  2.0 * vUv;\", \"position *= vec2( zoom * resolution, zoom * 0.5 );\", \"float x2y2 = position.x * position.x + position.y * position.y;\", \"vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );\", \"sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );\", \"vec2 sampleUV = vec2(\", \"(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,\", \"(asin(sphere_pnt.z) / PI + 0.5)\", \");\", \"gl_FragColor = texture2D( tDiffuse, sampleUV );\", \"}\"].join(\"\\n\")\n\n};;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Panorama = function (geometry, material) {\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].call(this);\n\n\t\tthis.type = 'panorama';\n\n\t\tthis.ImageQualityLow = 1;\n\t\tthis.ImageQualityFair = 2;\n\t\tthis.ImageQualityMedium = 3;\n\t\tthis.ImageQualityHigh = 4;\n\t\tthis.ImageQualitySuperHigh = 5;\n\n\t\tthis.animationDuration = 1000;\n\n\t\tthis.defaultInfospotSize = 350;\n\n\t\tthis.container = undefined;\n\n\t\tthis.loaded = false;\n\n\t\tthis.linkedSpots = [];\n\n\t\tthis.isInfospotVisible = false;\n\n\t\tthis.linkingImageURL = undefined;\n\t\tthis.linkingImageScale = undefined;\n\n\t\tthis.geometry = geometry;\n\n\t\tthis.material = material;\n\t\tthis.material.side = __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"];\n\t\tthis.material.visible = false;\n\n\t\tthis.scale.x *= -1;\n\n\t\tthis.infospotAnimation = new TWEEN.Tween(this).to({}, this.animationDuration / 2);\n\n\t\tthis.addEventListener('load', this.fadeIn.bind(this));\n\t\tthis.addEventListener('panolens-container', this.setContainer.bind(this));\n\t\tthis.addEventListener('click', this.onClick.bind(this));\n\n\t\tthis.setupTransitions();\n\t};\n\n\tPANOLENS.Panorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].prototype);\n\n\tPANOLENS.Panorama.prototype.constructor = PANOLENS.Panorama;\n\n\tPANOLENS.Panorama.prototype.add = function (object) {\n\n\t\tvar scope, invertedObject;\n\n\t\tscope = this;\n\n\t\tif (arguments.length > 1) {\n\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\n\t\t\t\tthis.add(arguments[i]);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\n\t\tif (object instanceof PANOLENS.Infospot) {\n\n\t\t\tinvertedObject = object;\n\n\t\t\tif (object.dispatchEvent) {\n\n\t\t\t\tthis.container && object.dispatchEvent({ type: 'panolens-container', container: this.container });\n\n\t\t\t\tobject.dispatchEvent({ type: 'panolens-infospot-focus', method: function method(vector, duration, easing) {\n\t\t\t\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'tweenControlCenter', data: [vector, duration, easing] });\n\t\t\t\t\t} });\n\t\t\t}\n\t\t} else {\n\t\t\tinvertedObject = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"]();\n\t\t\tinvertedObject.scale.x = -1;\n\t\t\tinvertedObject.scalePlaceHolder = true;\n\t\t\tinvertedObject.add(object);\n\t\t}\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype.add.call(this, invertedObject);\n\t};\n\n\tPANOLENS.Panorama.prototype.load = function () {\n\n\t\tthis.onLoad();\n\t};\n\n\tPANOLENS.Panorama.prototype.onClick = function (event) {\n\n\t\tif (event.intersects && event.intersects.length === 0) {\n\n\t\t\tthis.traverse(function (object) {\n\t\t\t\tobject.dispatchEvent({ type: 'dismiss' });\n\t\t\t});\n\t\t}\n\t};\n\n\tPANOLENS.Panorama.prototype.setContainer = function (data) {\n\n\t\tvar container;\n\n\t\tif (data instanceof HTMLElement) {\n\n\t\t\tcontainer = data;\n\t\t} else if (data && data.container) {\n\n\t\t\tcontainer = data.container;\n\t\t}\n\n\t\tif (container) {\n\n\t\t\tthis.children.forEach(function (child) {\n\n\t\t\t\tif (child instanceof PANOLENS.Infospot && child.dispatchEvent) {\n\t\t\t\t\tchild.dispatchEvent({ type: 'panolens-container', container: container });\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.container = container;\n\t\t}\n\t};\n\n\tPANOLENS.Panorama.prototype.onLoad = function () {\n\n\t\tthis.loaded = true;\n\n\t\tthis.dispatchEvent({ type: 'load' });\n\t};\n\n\tPANOLENS.Panorama.prototype.onProgress = function (progress) {\n\t\tthis.dispatchEvent({ type: 'progress', progress: progress });\n\t};\n\n\tPANOLENS.Panorama.prototype.onError = function () {\n\t\tthis.dispatchEvent({ type: 'error' });\n\t};\n\n\tPANOLENS.Panorama.prototype.getZoomLevel = function () {\n\n\t\tvar zoomLevel;\n\n\t\tif (window.innerWidth <= 800) {\n\n\t\t\tzoomLevel = this.ImageQualityFair;\n\t\t} else if (window.innerWidth > 800 && window.innerWidth <= 1280) {\n\n\t\t\tzoomLevel = this.ImageQualityMedium;\n\t\t} else if (window.innerWidth > 1280 && window.innerWidth <= 1920) {\n\n\t\t\tzoomLevel = this.ImageQualityHigh;\n\t\t} else if (window.innerWidth > 1920) {\n\n\t\t\tzoomLevel = this.ImageQualitySuperHigh;\n\t\t} else {\n\n\t\t\tzoomLevel = this.ImageQualityLow;\n\t\t}\n\n\t\treturn zoomLevel;\n\t};\n\n\tPANOLENS.Panorama.prototype.updateTexture = function (texture) {\n\n\t\tthis.material.map = texture;\n\n\t\tthis.material.needsUpdate = true;\n\t};\n\n\tPANOLENS.Panorama.prototype.toggleInfospotVisibility = function (isVisible, delay) {\n\n\t\tdelay = delay !== undefined ? delay : 0;\n\n\t\tvar scope, visible;\n\n\t\tscope = this;\n\t\tvisible = isVisible !== undefined ? isVisible : this.isInfospotVisible ? false : true;\n\n\t\tthis.traverse(function (object) {\n\n\t\t\tif (object instanceof PANOLENS.Infospot) {\n\n\t\t\t\tvisible ? object.show(delay) : object.hide(delay);\n\t\t\t}\n\t\t});\n\n\t\tthis.isInfospotVisible = visible;\n\n\t\tthis.infospotAnimation.onComplete(function () {\n\t\t\tscope.dispatchEvent({ type: 'infospot-animation-complete', visible: visible });\n\t\t}).delay(delay).start();\n\t};\n\n\tPANOLENS.Panorama.prototype.setLinkingImage = function (url, scale) {\n\n\t\tthis.linkingImageURL = url;\n\t\tthis.linkingImageScale = scale;\n\t};\n\n\tPANOLENS.Panorama.prototype.link = function (pano, position, imageScale, imageSrc) {\n\n\t\tvar scope = this,\n\t\t    spot,\n\t\t    scale,\n\t\t    img;\n\n\t\tthis.visible = true;\n\n\t\tif (!position) {\n\n\t\t\tconsole.warn('Please specify infospot position for linking');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (imageScale !== undefined) {\n\n\t\t\tscale = imageScale;\n\t\t} else if (pano.linkingImageScale !== undefined) {\n\n\t\t\tscale = pano.linkingImageScale;\n\t\t} else {\n\n\t\t\tscale = 300;\n\t\t}\n\n\t\tif (imageSrc) {\n\n\t\t\timg = imageSrc;\n\t\t} else if (pano.linkingImageURL) {\n\n\t\t\timg = pano.linkingImageURL;\n\t\t} else {\n\n\t\t\timg = PANOLENS.DataImage.Arrow;\n\t\t}\n\n\t\tspot = new PANOLENS.Infospot(scale, img);\n\t\tspot.position.copy(position);\n\t\tspot.toPanorama = pano;\n\t\tspot.addEventListener('click', function () {\n\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setPanorama', data: pano });\n\t\t});\n\n\t\tthis.linkedSpots.push(spot);\n\n\t\tthis.add(spot);\n\n\t\tthis.visible = false;\n\t};\n\n\tPANOLENS.Panorama.prototype.reset = function () {\n\n\t\tthis.children.length = 0;\n\t};\n\n\tPANOLENS.Panorama.prototype.setupTransitions = function () {\n\n\t\tthis.fadeInAnimation = new TWEEN.Tween(this.material).easing(TWEEN.Easing.Quartic.Out).onStart(function () {\n\n\t\t\tthis.visible = true;\n\t\t\tthis.material.visible = true;\n\n\t\t\tthis.dispatchEvent({ type: 'enter-fade-start' });\n\t\t}.bind(this));\n\n\t\tthis.fadeOutAnimation = new TWEEN.Tween(this.material).easing(TWEEN.Easing.Quartic.Out).onComplete(function () {\n\n\t\t\tthis.visible = false;\n\t\t\tthis.material.visible = true;\n\n\t\t\tthis.dispatchEvent({ type: 'leave-complete' });\n\t\t}.bind(this));\n\n\t\tthis.enterTransition = new TWEEN.Tween(this).easing(TWEEN.Easing.Quartic.Out).onComplete(function () {\n\t\t\tthis.dispatchEvent({ type: 'enter-animation-complete' });\n\t\t}.bind(this)).start();\n\n\t\tthis.leaveTransition = new TWEEN.Tween(this).easing(TWEEN.Easing.Quartic.Out);\n\t};\n\n\tPANOLENS.Panorama.prototype.fadeIn = function (duration) {\n\n\t\tduration = duration >= 0 ? duration : this.animationDuration;\n\n\t\tthis.fadeOutAnimation.stop();\n\t\tthis.fadeInAnimation.to({ opacity: 1 }, duration).onComplete(function () {\n\n\t\t\tthis.toggleInfospotVisibility(true, duration / 2);\n\n\t\t\tthis.dispatchEvent({ type: 'enter-fade-complete' });\n\t\t}.bind(this)).start();\n\t};\n\n\tPANOLENS.Panorama.prototype.fadeOut = function (duration) {\n\n\t\tduration = duration >= 0 ? duration : this.animationDuration;\n\n\t\tthis.fadeInAnimation.stop();\n\t\tthis.fadeOutAnimation.to({ opacity: 0 }, duration).start();\n\t};\n\n\tPANOLENS.Panorama.prototype.onEnter = function () {\n\n\t\tvar duration = this.animationDuration;\n\n\t\tthis.leaveTransition.stop();\n\t\tthis.enterTransition.to({}, duration).onStart(function () {\n\t\t\tthis.dispatchEvent({ type: 'enter-animation-start' });\n\n\t\t\tif (this.loaded) {\n\n\t\t\t\tthis.fadeIn(duration);\n\t\t\t} else {\n\n\t\t\t\tthis.load();\n\t\t\t}\n\t\t}.bind(this)).start();\n\n\t\tthis.dispatchEvent({ type: 'enter' });\n\t};\n\n\tPANOLENS.Panorama.prototype.onLeave = function () {\n\n\t\tvar duration = this.animationDuration;\n\n\t\tthis.enterTransition.stop();\n\t\tthis.leaveTransition.to({}, duration).onStart(function () {\n\t\t\tthis.dispatchEvent({ type: 'leave-animation-start' });\n\n\t\t\tthis.fadeOut(duration);\n\t\t\tthis.toggleInfospotVisibility(false);\n\t\t}.bind(this)).start();\n\n\t\tthis.dispatchEvent({ type: 'leave' });\n\t};\n\n\tPANOLENS.Panorama.prototype.dispose = function () {\n\t\tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this });\n\n\t\tfunction recursiveDispose(object) {\n\n\t\t\tfor (var i = object.children.length - 1; i >= 0; i--) {\n\n\t\t\t\trecursiveDispose(object.children[i]);\n\t\t\t\tobject.remove(object.children[i]);\n\t\t\t}\n\n\t\t\tif (object instanceof PANOLENS.Infospot) {\n\n\t\t\t\tobject.dispose();\n\t\t\t}\n\n\t\t\tobject.geometry && object.geometry.dispose();\n\t\t\tobject.material && object.material.dispose();\n\t\t}\n\n\t\trecursiveDispose(this);\n\n\t\tif (this.parent) {\n\n\t\t\tthis.parent.remove(this);\n\t\t}\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.ImagePanorama = function (image, radius) {\n\n\t\tradius = radius || 5000;\n\n\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"SphereGeometry\"](radius, 60, 40),\n\t\t    material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ opacity: 0, transparent: true });\n\n\t\tPANOLENS.Panorama.call(this, geometry, material);\n\n\t\tthis.src = image;\n\t};\n\n\tPANOLENS.ImagePanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n\tPANOLENS.ImagePanorama.prototype.constructor = PANOLENS.ImagePanorama;\n\n\tPANOLENS.ImagePanorama.prototype.load = function (src) {\n\n\t\tsrc = src || this.src;\n\n\t\tif (!src) {\n\n\t\t\tconsole.warn('Image source undefined');\n\n\t\t\treturn;\n\t\t} else if (typeof src === 'string') {\n\n\t\t\tPANOLENS.Utils.TextureLoader.load(src, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this));\n\t\t} else if (src instanceof HTMLImageElement) {\n\n\t\t\tthis.onLoad(new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"](src));\n\t\t}\n\t};\n\n\tPANOLENS.ImagePanorama.prototype.onLoad = function (texture) {\n\n\t\ttexture.minFilter = texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\n\t\ttexture.needsUpdate = true;\n\n\t\tthis.updateTexture(texture);\n\n\t\twindow.requestAnimationFrame(function () {\n\n\t\t\twindow.requestAnimationFrame(function () {\n\n\t\t\t\tPANOLENS.Panorama.prototype.onLoad.call(this);\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t};\n\n\tPANOLENS.ImagePanorama.prototype.reset = function () {\n\n\t\tPANOLENS.Panorama.prototype.reset.call(this);\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.GoogleStreetviewPanorama = function (panoId, radius) {\n\n\t\tPANOLENS.ImagePanorama.call(this, undefined, radius);\n\n\t\tthis.panoId = panoId;\n\n\t\tthis.gsvLoader = undefined;\n\n\t\tthis.loadRequested = false;\n\n\t\tthis.setupGoogleMapAPI();\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.ImagePanorama.prototype);\n\n\tPANOLENS.GoogleStreetviewPanorama.constructor = PANOLENS.GoogleStreetviewPanorama;\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.load = function (panoId) {\n\n\t\tthis.loadRequested = true;\n\n\t\tpanoId = panoId || this.panoId || {};\n\n\t\tif (panoId && this.gsvLoader) {\n\n\t\t\tthis.loadGSVLoader(panoId);\n\t\t} else {\n\n\t\t\tthis.gsvLoader = {};\n\t\t}\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI = function () {\n\n\t\tvar script = document.createElement('script');\n\t\tscript.src = 'https://maps.googleapis.com/maps/api/js';\n\t\tscript.onreadystatechange = this.setGSVLoader.bind(this);\n\t\tscript.onload = this.setGSVLoader.bind(this);\n\n\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader = function () {\n\n\t\tthis.gsvLoader = new GSVPANO.PanoLoader();\n\n\t\tif (this.gsvLoader === {} || this.loadRequested) {\n\n\t\t\tthis.load();\n\t\t}\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader = function () {\n\n\t\treturn this.gsvLoader;\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader = function (panoId) {\n\n\t\tthis.loadRequested = false;\n\n\t\tthis.gsvLoader.onProgress = this.onProgress.bind(this);\n\n\t\tthis.gsvLoader.onPanoramaLoad = this.onLoad.bind(this);\n\n\t\tthis.gsvLoader.setZoom(this.getZoomLevel());\n\n\t\tthis.gsvLoader.load(panoId);\n\n\t\tthis.gsvLoader.loaded = true;\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.onLoad = function (canvas) {\n\n\t\tif (!this.gsvLoader) {\n\t\t\treturn;\n\t\t}\n\n\t\tPANOLENS.ImagePanorama.prototype.onLoad.call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"](canvas));\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.reset = function () {\n\n\t\tthis.gsvLoader = undefined;\n\n\t\tPANOLENS.ImagePanorama.prototype.reset.call(this);\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.CubePanorama = function (images, edgeLength) {\n\n\t\tvar shader, geometry, material;\n\n\t\tthis.images = images || [];\n\n\t\tedgeLength = edgeLength || 10000;\n\t\tshader = JSON.parse(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderLib\"]['cube']));\n\n\t\tgeometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BoxGeometry\"](edgeLength, edgeLength, edgeLength);\n\t\tmaterial = new __WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderMaterial\"]({\n\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tuniforms: shader.uniforms,\n\t\t\tside: __WEBPACK_IMPORTED_MODULE_8_three__[\"BackSide\"]\n\n\t\t});\n\n\t\tPANOLENS.Panorama.call(this, geometry, material);\n\t};\n\n\tPANOLENS.CubePanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n\tPANOLENS.CubePanorama.prototype.constructor = PANOLENS.CubePanorama;\n\n\tPANOLENS.CubePanorama.prototype.load = function () {\n\n\t\tPANOLENS.Utils.CubeTextureLoader.load(this.images, this.onLoad.bind(this), this.onProgress.bind(this), this.onError.bind(this));\n\t};\n\n\tPANOLENS.CubePanorama.prototype.onLoad = function (texture) {\n\n\t\tthis.material.uniforms['tCube'].value = texture;\n\n\t\tPANOLENS.Panorama.prototype.onLoad.call(this);\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.BasicPanorama = function (edgeLength) {\n\n\t\tvar tile = PANOLENS.DataImage.WhiteTile;\n\n\t\tPANOLENS.CubePanorama.call(this, [tile, tile, tile, tile, tile, tile], edgeLength);\n\t};\n\n\tPANOLENS.BasicPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.CubePanorama.prototype);\n\n\tPANOLENS.BasicPanorama.prototype.constructor = PANOLENS.BasicPanorama;\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.VideoPanorama = function (src, options, radius) {\n\n\t\tradius = radius || 5000;\n\n\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"SphereGeometry\"](radius, 60, 40),\n\t\t    material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ opacity: 0, transparent: true });\n\n\t\tPANOLENS.Panorama.call(this, geometry, material);\n\n\t\tthis.src = src;\n\t\tthis.options = options || {};\n\t\tthis.options.playsinline = this.options.playsinline !== false ? true : false;\n\n\t\tthis.videoElement = undefined;\n\t\tthis.videoRenderObject = undefined;\n\t\tthis.videoProgress = 0;\n\n\t\tthis.isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);\n\t\tthis.isMobile = this.isIOS || /Android|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent);\n\n\t\tthis.addEventListener('leave', this.pauseVideo.bind(this));\n\t\tthis.addEventListener('enter-fade-start', this.resumeVideoProgress.bind(this));\n\t\tthis.addEventListener('video-toggle', this.toggleVideo.bind(this));\n\t\tthis.addEventListener('video-time', this.setVideoCurrentTime.bind(this));\n\t};\n\n\tPANOLENS.VideoPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n\tPANOLENS.VideoPanorama.constructor = PANOLENS.VideoPanorama;\n\n\tPANOLENS.VideoPanorama.prototype.load = function (src, options) {\n\n\t\tvar scope = this;\n\n\t\tsrc = src || this.src || '';\n\t\toptions = options || this.options || {};\n\n\t\tthis.videoElement = options.videoElement || document.createElement('video');\n\n\t\tthis.videoElement.muted = options.muted || false;\n\t\tthis.videoElement.loop = options.loop !== undefined ? options.loop : true;\n\t\tthis.videoElement.autoplay = options.autoplay !== undefined ? options.autoplay : false;\n\t\tthis.videoElement.crossOrigin = options.crossOrigin !== undefined ? options.crossOrigin : \"anonymous\";\n\n\t\tif (options.playsinline) {\n\t\t\tthis.videoElement.setAttribute(\"playsinline\", \"\");\n\t\t\tthis.videoElement.setAttribute(\"webkit-playsinline\", \"\");\n\t\t}\n\n\t\tvar onloadeddata = function onloadeddata() {\n\n\t\t\tscope.onProgress({ loaded: 1, total: 1 });\n\t\t\tscope.setVideoTexture(scope.videoElement);\n\n\t\t\tif (scope.videoElement.autoplay) {\n\t\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n\t\t\t}\n\n\t\t\tif (scope.isMobile) {\n\n\t\t\t\tif (scope.videoElement.autoplay && scope.videoElement.muted) {\n\t\t\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n\t\t\t\t} else {\n\t\t\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tscope.onLoad();\n\t\t};\n\n\t\tif (this.videoElement.readyState > 2) {\n\n\t\t\tonloadeddata();\n\t\t} else {\n\n\t\t\tif (!this.videoElement.querySelectorAll('source').length || !this.videoElement.src) {\n\n\t\t\t\tthis.videoElement.src = src;\n\t\t\t}\n\n\t\t\tthis.videoElement.load();\n\t\t}\n\n\t\tthis.videoElement.onloadeddata = onloadeddata;\n\n\t\tthis.videoElement.ontimeupdate = function (event) {\n\n\t\t\tscope.videoProgress = this.duration >= 0 ? this.currentTime / this.duration : 0;\n\n\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: scope.videoProgress });\n\t\t};\n\n\t\tthis.videoElement.addEventListener('ended', function () {\n\n\t\t\tif (!scope.options.loop) {\n\n\t\t\t\tscope.resetVideo();\n\t\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n\t\t\t}\n\t\t}, false);\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.setVideoTexture = function (video) {\n\n\t\tvar videoTexture, videoRenderObject, scene;\n\n\t\tif (!video) return;\n\n\t\tvideoTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"VideoTexture\"](video);\n\t\tvideoTexture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\t\tvideoTexture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\t\tvideoTexture.format = __WEBPACK_IMPORTED_MODULE_8_three__[\"RGBFormat\"];\n\n\t\tvideoRenderObject = {\n\n\t\t\tvideo: video,\n\t\t\tvideoTexture: videoTexture\n\n\t\t};\n\n\t\tif (this.isIOS) {\n\n\t\t\tenableInlineVideo(video);\n\t\t}\n\n\t\tthis.updateTexture(videoTexture);\n\n\t\tthis.videoRenderObject = videoRenderObject;\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.reset = function () {\n\n\t\tthis.videoElement = undefined;\n\n\t\tPANOLENS.Panorama.prototype.reset.call(this);\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.isVideoPaused = function () {\n\n\t\treturn this.videoRenderObject.video.paused;\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.toggleVideo = function () {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video) {\n\n\t\t\tif (this.isVideoPaused()) {\n\n\t\t\t\tthis.videoRenderObject.video.play();\n\t\t\t} else {\n\n\t\t\t\tthis.videoRenderObject.video.pause();\n\t\t\t}\n\t\t}\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.setVideoCurrentTime = function (event) {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video && !__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_number_is_nan___default()(event.percentage) && event.percentage !== 1) {\n\n\t\t\tthis.videoRenderObject.video.currentTime = this.videoRenderObject.video.duration * event.percentage;\n\n\t\t\tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: event.percentage });\n\t\t}\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.playVideo = function () {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video && this.isVideoPaused()) {\n\n\t\t\tthis.videoRenderObject.video.play();\n\t\t}\n\n\t\tthis.dispatchEvent({ type: 'play' });\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.pauseVideo = function () {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoPaused()) {\n\n\t\t\tthis.videoRenderObject.video.pause();\n\t\t}\n\n\t\tthis.dispatchEvent({ type: 'pause' });\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.resumeVideoProgress = function () {\n\n\t\tif (this.videoElement.autoplay && !this.isMobile) {\n\n\t\t\tthis.playVideo();\n\n\t\t\tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false });\n\t\t} else {\n\n\t\t\tthis.pauseVideo();\n\n\t\t\tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true });\n\t\t}\n\n\t\tthis.setVideoCurrentTime({ percentage: this.videoProgress });\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.resetVideo = function () {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video) {\n\n\t\t\tthis.setVideoCurrentTime({ percentage: 0 });\n\t\t}\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.isVideoMuted = function () {\n\n\t\treturn this.videoRenderObject.video.muted;\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.muteVideo = function () {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video && !this.isVideoMuted()) {\n\n\t\t\tthis.videoRenderObject.video.muted = true;\n\t\t}\n\n\t\tthis.dispatchEvent({ type: 'volumechange' });\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.unmuteVideo = function () {\n\n\t\tif (this.videoRenderObject && this.videoRenderObject.video && this.isVideoMuted()) {\n\n\t\t\tthis.videoRenderObject.video.muted = false;\n\t\t}\n\n\t\tthis.dispatchEvent({ type: 'volumechange' });\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.getVideoElement = function () {\n\n\t\treturn this.videoRenderObject.video;\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.dispose = function () {\n\n\t\tthis.resetVideo();\n\t\tthis.pauseVideo();\n\n\t\tthis.removeEventListener('leave', this.pauseVideo.bind(this));\n\t\tthis.removeEventListener('enter-fade-start', this.resumeVideoProgress.bind(this));\n\t\tthis.removeEventListener('video-toggle', this.toggleVideo.bind(this));\n\t\tthis.removeEventListener('video-time', this.setVideoCurrentTime.bind(this));\n\n\t\tPANOLENS.Panorama.prototype.dispose.call(this);\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.EmptyPanorama = function (radius) {\n\n\t\tradius = radius || 5000;\n\n\t\tvar geometry = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Geometry\"](),\n\t\t    material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({\n\t\t\tcolor: 0x000000, opacity: 1, transparent: true\n\t\t});\n\n\t\tPANOLENS.Panorama.call(this, geometry, material);\n\t};\n\n\tPANOLENS.EmptyPanorama.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.Panorama.prototype);\n\n\tPANOLENS.EmptyPanorama.prototype.constructor = PANOLENS.EmptyPanorama;\n})();;(function () {\n\tPANOLENS.LittlePlanet = function (type, source, size, ratio) {\n\n\t\ttype = type || 'image';\n\n\t\ttype === 'image' && PANOLENS.ImagePanorama.call(this, source, size);\n\n\t\tthis.size = size || 10000;\n\t\tthis.ratio = ratio || 0.5;\n\t\tthis.EPS = 0.000001;\n\t\tthis.frameId;\n\n\t\tthis.geometry = this.createGeometry();\n\t\tthis.material = this.createMaterial(this.size);\n\n\t\tthis.dragging = false;\n\t\tthis.userMouse = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\n\t\tthis.quatA = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\t\tthis.quatB = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\t\tthis.quatCur = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\t\tthis.quatSlerp = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Quaternion\"]();\n\n\t\tthis.vectorX = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0, 0);\n\t\tthis.vectorY = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n\n\t\tthis.addEventListener('window-resize', this.onWindowResize);\n\t};\n\n\tPANOLENS.LittlePlanet.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.ImagePanorama.prototype);\n\n\tPANOLENS.LittlePlanet.prototype.constructor = PANOLENS.LittlePlanet;\n\n\tPANOLENS.LittlePlanet.prototype.createGeometry = function () {\n\n\t\treturn new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneGeometry\"](this.size, this.size * this.ratio);\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.createMaterial = function (size) {\n\n\t\tvar uniforms = PANOLENS.StereographicShader.uniforms;\n\t\tuniforms.zoom.value = size;\n\n\t\treturn new __WEBPACK_IMPORTED_MODULE_8_three__[\"ShaderMaterial\"]({\n\n\t\t\tuniforms: uniforms,\n\t\t\tvertexShader: PANOLENS.StereographicShader.vertexShader,\n\t\t\tfragmentShader: PANOLENS.StereographicShader.fragmentShader\n\n\t\t});\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.registerMouseEvents = function () {\n\n\t\tthis.container.addEventListener('mousedown', this.onMouseDown.bind(this), false);\n\t\tthis.container.addEventListener('mousemove', this.onMouseMove.bind(this), false);\n\t\tthis.container.addEventListener('mouseup', this.onMouseUp.bind(this), false);\n\t\tthis.container.addEventListener('touchstart', this.onMouseDown.bind(this), false);\n\t\tthis.container.addEventListener('touchmove', this.onMouseMove.bind(this), false);\n\t\tthis.container.addEventListener('touchend', this.onMouseUp.bind(this), false);\n\t\tthis.container.addEventListener('mousewheel', this.onMouseWheel.bind(this), false);\n\t\tthis.container.addEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false);\n\t\tthis.container.addEventListener('contextmenu', this.onContextMenu.bind(this), false);\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.unregisterMouseEvents = function () {\n\n\t\tthis.container.removeEventListener('mousedown', this.onMouseDown.bind(this), false);\n\t\tthis.container.removeEventListener('mousemove', this.onMouseMove.bind(this), false);\n\t\tthis.container.removeEventListener('mouseup', this.onMouseUp.bind(this), false);\n\t\tthis.container.removeEventListener('touchstart', this.onMouseDown.bind(this), false);\n\t\tthis.container.removeEventListener('touchmove', this.onMouseMove.bind(this), false);\n\t\tthis.container.removeEventListener('touchend', this.onMouseUp.bind(this), false);\n\t\tthis.container.removeEventListener('mousewheel', this.onMouseWheel.bind(this), false);\n\t\tthis.container.removeEventListener('DOMMouseScroll', this.onMouseWheel.bind(this), false);\n\t\tthis.container.removeEventListener('contextmenu', this.onContextMenu.bind(this), false);\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseDown = function (event) {\n\n\t\tvar x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n\t\tvar y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\n\t\tvar inputCount = event.touches && event.touches.length || 1;\n\n\t\tswitch (inputCount) {\n\n\t\t\tcase 1:\n\n\t\t\t\tthis.dragging = true;\n\t\t\t\tthis.userMouse.set(x, y);\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\t\t\t\tthis.userMouse.pinchDistance = distance;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tthis.onUpdateCallback();\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseMove = function (event) {\n\n\t\tvar x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n\t\tvar y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\n\t\tvar inputCount = event.touches && event.touches.length || 1;\n\n\t\tswitch (inputCount) {\n\n\t\t\tcase 1:\n\n\t\t\t\tvar angleX = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(x - this.userMouse.x) * 0.4;\n\t\t\t\tvar angleY = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(y - this.userMouse.y) * 0.4;\n\n\t\t\t\tif (this.dragging) {\n\t\t\t\t\tthis.quatA.setFromAxisAngle(this.vectorY, angleX);\n\t\t\t\t\tthis.quatB.setFromAxisAngle(this.vectorX, angleY);\n\t\t\t\t\tthis.quatCur.multiply(this.quatA).multiply(this.quatB);\n\t\t\t\t\tthis.userMouse.set(x, y);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tvar uniforms = this.material.uniforms;\n\t\t\t\tvar dx = event.touches[0].pageX - event.touches[1].pageX;\n\t\t\t\tvar dy = event.touches[0].pageY - event.touches[1].pageY;\n\t\t\t\tvar distance = Math.sqrt(dx * dx + dy * dy);\n\n\t\t\t\tthis.addZoomDelta(this.userMouse.pinchDistance - distance);\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tbreak;\n\n\t\t}\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseUp = function (event) {\n\n\t\tthis.dragging = false;\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseWheel = function (event) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar delta = 0;\n\n\t\tif (event.wheelDelta !== undefined) {\n\n\t\t\tdelta = event.wheelDelta;\n\t\t} else if (event.detail !== undefined) {\n\n\t\t\tdelta = -event.detail;\n\t\t}\n\n\t\tthis.addZoomDelta(delta);\n\t\tthis.onUpdateCallback();\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.addZoomDelta = function (delta) {\n\n\t\tvar uniforms = this.material.uniforms;\n\t\tvar lowerBound = this.size * 0.1;\n\t\tvar upperBound = this.size * 10;\n\n\t\tuniforms.zoom.value += delta;\n\n\t\tif (uniforms.zoom.value <= lowerBound) {\n\n\t\t\tuniforms.zoom.value = lowerBound;\n\t\t} else if (uniforms.zoom.value >= upperBound) {\n\n\t\t\tuniforms.zoom.value = upperBound;\n\t\t}\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onUpdateCallback = function () {\n\n\t\tthis.frameId = window.requestAnimationFrame(this.onUpdateCallback.bind(this));\n\n\t\tthis.quatSlerp.slerp(this.quatCur, 0.1);\n\t\tthis.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp);\n\n\t\tif (!this.dragging && 1.0 - this.quatSlerp.clone().dot(this.quatCur) < this.EPS) {\n\n\t\t\twindow.cancelAnimationFrame(this.frameId);\n\t\t}\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.reset = function () {\n\n\t\tthis.quatCur.set(0, 0, 0, 1);\n\t\tthis.quatSlerp.set(0, 0, 0, 1);\n\t\tthis.onUpdateCallback();\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onLoad = function () {\n\n\t\tthis.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\n\t\tthis.registerMouseEvents();\n\t\tthis.onUpdateCallback();\n\n\t\tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'disableControl' });\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onLeave = function () {\n\n\t\tthis.unregisterMouseEvents();\n\n\t\tthis.dispatchEvent({ type: 'panolens-viewer-handler', method: 'enableControl', data: PANOLENS.Controls.ORBIT });\n\n\t\twindow.cancelAnimationFrame(this.frameId);\n\n\t\tPANOLENS.Panorama.prototype.onLeave.call(this);\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onWindowResize = function () {\n\n\t\tthis.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onContextMenu = function () {\n\n\t\tthis.dragging = false;\n\t};\n})();;(function () {\n\tPANOLENS.ImageLittlePlanet = function (source, size, ratio) {\n\n\t\tPANOLENS.LittlePlanet.call(this, 'image', source, size, ratio);\n\t};\n\n\tPANOLENS.ImageLittlePlanet.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(PANOLENS.LittlePlanet.prototype);\n\n\tPANOLENS.ImageLittlePlanet.prototype.constructor = PANOLENS.ImageLittlePlanet;\n\n\tPANOLENS.ImageLittlePlanet.prototype.onLoad = function (texture) {\n\n\t\tthis.updateTexture(texture);\n\n\t\tPANOLENS.ImagePanorama.prototype.onLoad.call(this, texture);\n\t\tPANOLENS.LittlePlanet.prototype.onLoad.call(this);\n\t};\n\n\tPANOLENS.ImageLittlePlanet.prototype.updateTexture = function (texture) {\n\n\t\ttexture.minFilter = texture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\n\t\tthis.material.uniforms[\"tDiffuse\"].value = texture;\n\t};\n})();;(function () {\n\tPANOLENS.Reticle = function (color, autoSelect, idleImageUrl, dwellImageUrl, dwellTime, dwellSpriteAmount) {\n\n\t\tcolor = color || 0xffffff;\n\n\t\tthis.autoSelect = autoSelect != undefined ? autoSelect : true;\n\n\t\tthis.dwellTime = dwellTime || 1500;\n\t\tthis.dwellSpriteAmount = dwellSpriteAmount || 45;\n\t\tthis.dwellInterval = this.dwellTime / this.dwellSpriteAmount;\n\n\t\tthis.IDLE = 0;\n\t\tthis.DWELLING = 1;\n\t\tthis.status;\n\n\t\tthis.scaleIdle = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0.2, 0.2, 1);\n\t\tthis.scaleDwell = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](1, 0.8, 1);\n\n\t\tthis.textureLoaded = false;\n\t\tthis.idleImageUrl = idleImageUrl || PANOLENS.DataImage.ReticleIdle;\n\t\tthis.dwellImageUrl = dwellImageUrl || PANOLENS.DataImage.ReticleDwell;\n\t\tthis.idleTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\t\tthis.dwellTexture = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]();\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"SpriteMaterial\"]({ color: color, depthTest: false }));\n\n\t\tthis.currentTile = 0;\n\t\tthis.startTime = 0;\n\n\t\tthis.visible = false;\n\t\tthis.renderOrder = 10;\n\t\tthis.timerId;\n\n\t\tthis.updateStatus(this.IDLE);\n\t};\n\n\tPANOLENS.Reticle.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].prototype);\n\n\tPANOLENS.Reticle.prototype.constructor = PANOLENS.Reticle;\n\n\tPANOLENS.Reticle.prototype.show = function () {\n\n\t\tthis.visible = true;\n\t};\n\n\tPANOLENS.Reticle.prototype.hide = function () {\n\n\t\tthis.visible = false;\n\t};\n\n\tPANOLENS.Reticle.prototype.loadTextures = function () {\n\n\t\tthis.idleTexture = PANOLENS.Utils.TextureLoader.load(this.idleImageUrl);\n\t\tthis.dwellTexture = PANOLENS.Utils.TextureLoader.load(this.dwellImageUrl);\n\n\t\tthis.material.map = this.idleTexture;\n\t\tthis.setupDwellSprite(this.dwellTexture);\n\t\tthis.textureLoaded = true;\n\t};\n\n\tPANOLENS.Reticle.prototype.select = function (completeCallback) {\n\n\t\tif (performance.now() - this.startTime >= this.dwellTime) {\n\n\t\t\tthis.completeDwelling();\n\t\t\tcompleteCallback();\n\t\t} else if (this.autoSelect) {\n\n\t\t\tthis.updateDwelling(performance.now());\n\t\t\tthis.timerId = window.requestAnimationFrame(this.select.bind(this, completeCallback));\n\t\t}\n\t};\n\n\tPANOLENS.Reticle.prototype.clearTimer = function () {\n\n\t\twindow.cancelAnimationFrame(this.timerId);\n\t\tthis.timerId = null;\n\t};\n\n\tPANOLENS.Reticle.prototype.setupDwellSprite = function (texture) {\n\n\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_8_three__[\"RepeatWrapping\"];\n\t\ttexture.repeat.set(1 / this.dwellSpriteAmount, 1);\n\t};\n\n\tPANOLENS.Reticle.prototype.updateStatus = function (status) {\n\n\t\tthis.status = status;\n\n\t\tif (status === this.IDLE) {\n\t\t\tthis.scale.copy(this.scaleIdle);\n\t\t\tthis.material.map = this.idleTexture;\n\t\t} else if (status === this.DWELLING) {\n\t\t\tthis.scale.copy(this.scaleDwell);\n\t\t\tthis.material.map = this.dwellTexture;\n\t\t}\n\n\t\tthis.currentTile = 0;\n\t\tthis.material.map.offset.x = 0;\n\t};\n\n\tPANOLENS.Reticle.prototype.startDwelling = function (completeCallback) {\n\n\t\tif (!this.autoSelect) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.startTime = performance.now();\n\t\tthis.updateStatus(this.DWELLING);\n\t\tthis.select(completeCallback);\n\t};\n\n\tPANOLENS.Reticle.prototype.updateDwelling = function (time) {\n\n\t\tvar elasped = time - this.startTime;\n\n\t\tif (this.currentTile <= this.dwellSpriteAmount) {\n\t\t\tthis.currentTile = Math.floor(elasped / this.dwellTime * this.dwellSpriteAmount);\n\t\t\tthis.material.map.offset.x = this.currentTile / this.dwellSpriteAmount;\n\t\t} else {\n\t\t\tthis.updateStatus(this.IDLE);\n\t\t}\n\t};\n\n\tPANOLENS.Reticle.prototype.cancelDwelling = function () {\n\t\tthis.clearTimer();\n\t\tthis.updateStatus(this.IDLE);\n\t};\n\n\tPANOLENS.Reticle.prototype.completeDwelling = function () {\n\t\tthis.clearTimer();\n\t\tthis.updateStatus(this.IDLE);\n\t};\n})();;(function () {\n\tPANOLENS.Tile = function (width, height, widthSegments, heightSegments, forceDirection, forceAxis, forceAngle) {\n\n\t\tvar scope = this;\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tforceDirection: forceDirection,\n\t\t\tforceAxis: forceAxis,\n\t\t\tforceAngle: forceAngle\n\t\t};\n\n\t\twidth = width || 10;\n\t\theight = height || 5;\n\t\twidthSegments = widthSegments || 1;\n\t\theightSegments = heightSegments || 1;\n\t\tforceDirection = forceDirection || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 0, 1);\n\t\tforceAxis = forceAxis || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](0, 1, 0);\n\t\tforceAngle = forceAngle !== undefined ? forceAngle : 0;\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].call(this, new __WEBPACK_IMPORTED_MODULE_8_three__[\"PlaneGeometry\"](width, height, widthSegments, heightSegments), new __WEBPACK_IMPORTED_MODULE_8_three__[\"MeshBasicMaterial\"]({ color: 0xffffff, transparent: true }));\n\n\t\tthis.bendModifier = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BendModifier\"]();\n\n\t\tthis.entity = undefined;\n\n\t\tthis.animationDuration = 500;\n\t\tthis.animationFadeOut = undefined;\n\t\tthis.animationFadeIn = undefined;\n\t\tthis.animationTranslation = undefined;\n\t\tthis.tweens = {};\n\n\t\tif (forceAngle !== 0) {\n\n\t\t\tthis.bend(forceDirection, forceAxis, forceAngle);\n\t\t}\n\n\t\tthis.originalGeometry = this.geometry.clone();\n\t};\n\n\tPANOLENS.Tile.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"].prototype);\n\n\tPANOLENS.Tile.prototype.constructor = PANOLENS.Tile;\n\n\tPANOLENS.Tile.prototype.clone = function () {\n\n\t\tvar parameters = this.parameters,\n\t\t    tile;\n\n\t\ttile = new PANOLENS.Tile(parameters.width, parameters.height, parameters.widthSegments, parameters.heightSegments, parameters.forceDirection, parameters.forceAxis, parameters.forceAngle);\n\n\t\ttile.setEntity(this.entity);\n\t\ttile.material = this.material.clone();\n\n\t\treturn tile;\n\t};\n\n\tPANOLENS.Tile.prototype.bend = function (direction, axis, angle) {\n\n\t\tthis.bendModifier.set(direction, axis, angle).modify(this.geometry);\n\t};\n\n\tPANOLENS.Tile.prototype.unbend = function () {\n\n\t\tvar geometry = this.geometry;\n\n\t\tthis.geometry = this.originalGeometry;\n\t\tthis.originalGeometry = this.geometry.clone();\n\n\t\tgeometry.dispose();\n\t\tgeometry = null;\n\t};\n\n\tPANOLENS.Tile.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n\n\t\tobject = object || this;\n\t\ttoState = toState || {};\n\t\tduration = duration || this.animationDuration;\n\t\teasing = easing || TWEEN.Easing.Exponential.Out;\n\t\tdelay = delay !== undefined ? delay : 0;\n\t\tonStart = onStart ? onStart : null;\n\t\tonUpdate = onUpdate ? onUpdate : null;\n\t\tonComplete = onComplete ? onComplete : null;\n\n\t\tif (!this.tweens[name]) {\n\t\t\tthis.tweens[name] = new TWEEN.Tween(object).to(toState, duration).easing(easing).delay(delay).onStart(onStart).onUpdate(onUpdate).onComplete(onComplete);\n\t\t}\n\n\t\treturn this.tweens[name];\n\t};\n\n\tPANOLENS.Tile.prototype.ripple = function (scale, duration, easing) {\n\n\t\tscale = scale || 2;\n\t\tduration = duration || 200;\n\t\teasing = easing || TWEEN.Easing.Cubic.Out;\n\n\t\tvar scope = this,\n\t\t    ripple = this.clone();\n\n\t\tnew TWEEN.Tween(ripple.scale).to({ x: scale, y: scale }, duration).easing(easing).start();\n\n\t\tnew TWEEN.Tween(ripple.material).to({ opacity: 0 }, duration).easing(easing).onComplete(function () {\n\t\t\tscope.remove(ripple);\n\t\t\tripple.geometry.dispose();\n\t\t\tripple.material.dispose();\n\t\t}).start();\n\n\t\tthis.add(ripple);\n\t};\n\n\tPANOLENS.Tile.prototype.setEntity = function (entity) {\n\n\t\tthis.entity = entity;\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.TileGroup = function (tileArray, verticalGap, depthGap, animationDuration, offset) {\n\n\t\tvar scope = this,\n\t\t    textureLoader;\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].call(this);\n\n\t\tthis.tileArray = tileArray || [];\n\t\tthis.offset = offset !== undefined ? offset : 0;\n\t\tthis.v_gap = verticalGap !== undefined ? verticalGap : 6;\n\t\tthis.d_gap = depthGap !== undefined ? depthGap : 2;\n\t\tthis.animationDuration = animationDuration !== undefined ? animationDuration : 200;\n\t\tthis.animationEasing = TWEEN.Easing.Exponential.Out;\n\t\tthis.visibleDelta = 2;\n\n\t\tthis.tileArray.map(function (tile, index) {\n\n\t\t\tif (tile.image) {\n\n\t\t\t\tPANOLENS.Utils.TextureLoader.load(tile.image, scope.setTexture.bind(tile));\n\t\t\t}\n\n\t\t\ttile.position.set(0, index * -scope.v_gap, index * -scope.d_gap);\n\t\t\ttile.originalPosition = tile.position.clone();\n\t\t\ttile.setEntity(scope);\n\t\t\tscope.add(tile);\n\t\t});\n\n\t\tthis.updateVisbility();\n\t};\n\n\tPANOLENS.TileGroup.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype);\n\n\tPANOLENS.TileGroup.prototype.constructor = PANOLENS.TileGroup;\n\n\tPANOLENS.TileGroup.prototype.updateTexture = function (imageArray) {\n\n\t\tvar scope = this;\n\n\t\timageArray = imageArray || [];\n\t\tthis.children.map(function (child, index) {\n\t\t\tif (child instanceof PANOLENS.Tile && imageArray[index]) {\n\t\t\t\tPANOLENS.Utils.TextureLoader.load(imageArray[index], scope.setTexture.bind(child));\n\t\t\t\tif (child.outline) {\n\t\t\t\t\tchild.outline.material.visible = true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tPANOLENS.TileGroup.prototype.updateAllTexture = function (imageArray) {\n\n\t\tthis.updateTexture(imageArray);\n\n\t\tif (imageArray.length < this.children.length) {\n\t\t\tfor (var i = imageArray.length; i < this.children.length; i++) {\n\t\t\t\tif (this.children[i] instanceof PANOLENS.Tile) {\n\t\t\t\t\tthis.children[i].material.visible = false;\n\t\t\t\t\tif (this.children[i].outline) {\n\t\t\t\t\t\tthis.children[i].outline.material.visible = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tPANOLENS.TileGroup.prototype.setTexture = function (texture) {\n\n\t\ttexture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\t\ttexture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\t\tthis.material.visible = true;\n\t\tthis.material.map = texture;\n\t\tthis.material.needsUpdate = true;\n\t};\n\n\tPANOLENS.TileGroup.prototype.updateVisbility = function () {\n\n\t\tthis.children[this.offset].visible = true;\n\t\tnew TWEEN.Tween(this.children[this.offset].material).to({ opacity: 1 }, this.animationDuration).easing(this.animationEasing).start();\n\n\t\tif (this.children[this.offset].outline) {\n\n\t\t\tthis.children[this.offset].outline.visible = true;\n\t\t}\n\n\t\tfor (var i = this.offset - 1; i >= 0; i--) {\n\n\t\t\tif (this.tileArray.indexOf(this.children[i]) === -1) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (this.offset - i <= this.visibleDelta) {\n\n\t\t\t\tthis.children[i].visible = true;\n\t\t\t\tnew TWEEN.Tween(this.children[i].material).to({ opacity: 1 / (this.offset - i) * 0.5 }, this.animationDuration).easing(this.animationEasing).start();\n\t\t\t} else {\n\n\t\t\t\tthis.children[i].visible = false;\n\t\t\t}\n\n\t\t\tthis.children[i].outline && (this.children[i].outline.visible = false);\n\t\t}\n\n\t\tfor (var i = this.offset + 1; i < this.children.length; i++) {\n\n\t\t\tif (this.tileArray.indexOf(this.children[i]) === -1) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (i - this.offset <= this.visibleDelta) {\n\n\t\t\t\tthis.children[i].visible = true;\n\t\t\t\tnew TWEEN.Tween(this.children[i].material).to({ opacity: 1 / (i - this.offset) * 0.5 }, this.animationDuration).easing(this.animationEasing).start();\n\t\t\t} else {\n\n\t\t\t\tthis.children[i].visible = false;\n\t\t\t}\n\n\t\t\tthis.children[i].outline && (this.children[i].outline.visible = false);\n\t\t}\n\t};\n\n\tPANOLENS.TileGroup.prototype.scrollUp = function (duration) {\n\n\t\tvar tiles = this.tileArray,\n\t\t    offset;\n\n\t\tduration = duration !== undefined ? duration : this.animationDuration;\n\n\t\toffset = this.offset + 1;\n\n\t\tif (this.offset < tiles.length - 1 && tiles[this.offset + 1].material.visible) {\n\n\t\t\tfor (var i = tiles.length - 1; i >= 0; i--) {\n\n\t\t\t\tnew TWEEN.Tween(tiles[i].position).to({ y: (i - offset) * -this.v_gap,\n\t\t\t\t\tz: Math.abs(i - offset) * -this.d_gap }, duration).easing(this.animationEasing).start();\n\t\t\t}\n\n\t\t\tthis.offset++;\n\t\t\tthis.updateVisbility();\n\t\t\tthis.dispatchEvent({ type: 'scroll', direction: 'up' });\n\t\t}\n\t};\n\n\tPANOLENS.TileGroup.prototype.scrollDown = function (duration) {\n\n\t\tvar tiles = this.tileArray,\n\t\t    offset;\n\n\t\tduration = duration !== undefined ? duration : this.animationDuration;\n\n\t\toffset = this.offset - 1;\n\n\t\tif (this.offset > 0 && tiles[this.offset - 1].material.visible) {\n\n\t\t\tfor (var i = 0; i < tiles.length; i++) {\n\n\t\t\t\tnew TWEEN.Tween(tiles[i].position).to({ y: (i - offset) * -this.v_gap,\n\t\t\t\t\tz: Math.abs(i - offset) * -this.d_gap }, duration).easing(this.animationEasing).start();\n\t\t\t}\n\n\t\t\tthis.offset--;\n\t\t\tthis.updateVisbility();\n\t\t\tthis.dispatchEvent({ type: 'scroll', direction: 'down' });\n\t\t}\n\t};\n\n\tPANOLENS.TileGroup.prototype.reset = function () {\n\n\t\tthis.tileArray.map(function (child, index) {\n\n\t\t\tchild.position.copy(child.originalPosition);\n\t\t});\n\n\t\tthis.offset = 0;\n\t\tthis.updateVisbility();\n\t};\n\n\tPANOLENS.TileGroup.prototype.getIndex = function () {\n\n\t\treturn this.offset;\n\t};\n\n\tPANOLENS.TileGroup.prototype.getTileCount = function () {\n\n\t\tvar count = 0;\n\n\t\tthis.tileArray.map(function (tile) {\n\n\t\t\tif (tile.material.visible) {\n\n\t\t\t\tcount++;\n\t\t\t}\n\t\t});\n\n\t\treturn count;\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tvar sharedFont, sharedTexture;\n\tvar pendingQueue = [];\n\n\tPANOLENS.SpriteText = function (text, maxWidth, color, opacity, options) {\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].call(this);\n\n\t\tthis.text = text || '';\n\t\tthis.maxWidth = maxWidth || 2000;\n\t\tthis.color = color || 0xffffff;\n\t\tthis.opacity = opacity !== undefined ? opacity : 1;\n\t\tthis.options = options || {};\n\n\t\tthis.animationDuration = 500;\n\t\tthis.animationFadeOut = undefined;\n\t\tthis.animationFadeIn = undefined;\n\t\tthis.tweens = {};\n\n\t\tthis.addText(text);\n\t};\n\n\tPANOLENS.SpriteText.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"].prototype);\n\n\tPANOLENS.SpriteText.prototype.constructor = PANOLENS.SpriteText;\n\n\tPANOLENS.SpriteText.prototype.generateTextGeometry = function () {};\n\tPANOLENS.SpriteText.prototype.generateSDFShader = function () {};\n\n\tPANOLENS.SpriteText.prototype.setBMFont = function (callback, font, texture) {\n\n\t\ttexture.needsUpdate = true;\n\t\ttexture.minFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearMipMapLinearFilter\"];\n\t\ttexture.magFilter = __WEBPACK_IMPORTED_MODULE_8_three__[\"LinearFilter\"];\n\t\ttexture.generateMipmaps = true;\n\t\ttexture.anisotropy = 8;\n\n\t\tsharedFont = font;\n\t\tsharedTexture = texture;\n\n\t\tfor (var i = pendingQueue.length - 1; i >= 0; i--) {\n\t\t\tpendingQueue[i].target.addText(pendingQueue[i].text);\n\t\t}\n\n\t\twhile (pendingQueue.length > 0) {\n\t\t\tpendingQueue.pop();\n\t\t}\n\n\t\tcallback && callback();\n\t};\n\n\tPANOLENS.SpriteText.prototype.addText = function (text) {\n\n\t\tif (!sharedFont || !sharedTexture) {\n\t\t\tpendingQueue.push({ target: this, text: text });\n\t\t\treturn;\n\t\t}\n\n\t\tvar textAnchor = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Object3D\"]();\n\n\t\tthis.options.text = text;\n\t\tthis.options.font = sharedFont;\n\t\tthis.options.width = this.maxWidth;\n\n\t\tvar geometry = this.generateTextGeometry(this.options);\n\t\tgeometry.computeBoundingBox();\n\t\tgeometry.computeBoundingSphere();\n\n\t\tvar material = new __WEBPACK_IMPORTED_MODULE_8_three__[\"RawShaderMaterial\"](this.generateSDFShader({\n\t\t\tmap: sharedTexture,\n\t\t\tside: __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"],\n\t\t\ttransparent: true,\n\t\t\tcolor: this.color,\n\t\t\topacity: this.opacity\n\t\t}));\n\n\t\tvar layout = geometry.layout;\n\t\tvar textMesh = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Mesh\"](geometry, material);\n\n\t\ttextMesh.entity = this;\n\t\ttextMesh.position.x = -layout.width / 2;\n\t\ttextMesh.position.y = layout.height * 1.035;\n\n\t\ttextAnchor.scale.x = textAnchor.scale.y = -0.05;\n\t\ttextAnchor.add(textMesh);\n\n\t\tthis.mesh = textMesh;\n\t\tthis.add(textAnchor);\n\t};\n\n\tPANOLENS.SpriteText.prototype.update = function (options) {\n\n\t\tvar mesh;\n\n\t\toptions = options || {};\n\n\t\tmesh = this.mesh;\n\n\t\tmesh.geometry.update(options);\n\t\tmesh.position.x = -mesh.geometry.layout.width / 2;\n\t\tmesh.position.y = mesh.geometry.layout.height * 1.035;\n\t};\n\n\tPANOLENS.SpriteText.prototype.tween = function (name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete) {\n\n\t\tobject = object || this;\n\t\ttoState = toState || {};\n\t\tduration = duration || this.animationDuration;\n\t\teasing = easing || TWEEN.Easing.Exponential.Out;\n\t\tdelay = delay !== undefined ? delay : 0;\n\t\tonStart = onStart ? onStart : null;\n\t\tonUpdate = onUpdate ? onUpdate : null;\n\t\tonComplete = onComplete ? onComplete : null;\n\n\t\tif (!this.tweens[name]) {\n\t\t\tthis.tweens[name] = new TWEEN.Tween(object).to(toState, duration).easing(easing).delay(delay).onStart(onStart).onUpdate(onUpdate).onComplete(onComplete);\n\t\t}\n\n\t\treturn this.tweens[name];\n\t};\n\n\tPANOLENS.SpriteText.prototype.getLayout = function () {\n\n\t\treturn this.mesh && this.mesh.geometry && this.mesh.geometry.layout || {};\n\t};\n\n\tPANOLENS.SpriteText.prototype.setEntity = function (entity) {\n\n\t\tthis.entity = entity;\n\t};\n})();;(function () {\n\tPANOLENS.Widget = function (container) {\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].call(this);\n\n\t\tthis.DEFAULT_TRANSITION = 'all 0.27s ease';\n\t\tthis.TOUCH_ENABLED = PANOLENS.Utils.checkTouchSupported();\n\t\tthis.PREVENT_EVENT_HANDLER = function (event) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t};\n\n\t\tthis.container = container;\n\n\t\tthis.barElement;\n\t\tthis.fullscreenElement;\n\t\tthis.videoElement;\n\t\tthis.settingElement;\n\n\t\tthis.mainMenu;\n\n\t\tthis.activeMainItem;\n\t\tthis.activeSubMenu;\n\t\tthis.mask;\n\t};\n\n\tPANOLENS.Widget.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n\n\tPANOLENS.Widget.prototype.constructor = PANOLENS.Widget;\n\n\tPANOLENS.Widget.prototype.addControlBar = function () {\n\n\t\tif (!this.container) {\n\n\t\t\tconsole.warn('Widget container not set');\n\t\t\treturn;\n\t\t}\n\n\t\tvar scope = this,\n\t\t    bar,\n\t\t    styleTranslate,\n\t\t    styleOpacity,\n\t\t    gradientStyle;\n\n\t\tgradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))';\n\n\t\tbar = document.createElement('div');\n\t\tbar.style.width = '100%';\n\t\tbar.style.height = '44px';\n\t\tbar.style.float = 'left';\n\t\tbar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)';\n\t\tbar.style.background = '-webkit-' + gradientStyle;\n\t\tbar.style.background = '-moz-' + gradientStyle;\n\t\tbar.style.background = '-o-' + gradientStyle;\n\t\tbar.style.background = '-ms-' + gradientStyle;\n\t\tbar.style.background = gradientStyle;\n\t\tbar.style.transition = this.DEFAULT_TRANSITION;\n\t\tbar.style.pointerEvents = 'none';\n\t\tbar.isHidden = false;\n\t\tbar.toggle = function () {\n\t\t\tbar.isHidden = !bar.isHidden;\n\t\t\tstyleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)';\n\t\t\tstyleOpacity = bar.isHidden ? 0 : 1;\n\t\t\tbar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate;\n\t\t\tbar.style.opacity = styleOpacity;\n\t\t};\n\n\t\tvar menu = this.createDefaultMenu();\n\t\tthis.mainMenu = this.createMainMenu(menu);\n\t\tbar.appendChild(this.mainMenu);\n\n\t\tvar mask = this.createMask();\n\t\tthis.mask = mask;\n\t\tthis.container.appendChild(mask);\n\n\t\tbar.dispose = function () {\n\n\t\t\tif (scope.fullscreenElement) {\n\n\t\t\t\tbar.removeChild(scope.fullscreenElement);\n\t\t\t\tscope.fullscreenElement.dispose();\n\t\t\t\tscope.fullscreenElement = null;\n\t\t\t}\n\n\t\t\tif (scope.settingElement) {\n\n\t\t\t\tbar.removeChild(scope.settingElement);\n\t\t\t\tscope.settingElement.dispose();\n\t\t\t\tscope.settingElement = null;\n\t\t\t}\n\n\t\t\tif (scope.videoElement) {\n\n\t\t\t\tbar.removeChild(scope.videoElement);\n\t\t\t\tscope.videoElement.dispose();\n\t\t\t\tscope.videoElement = null;\n\t\t\t}\n\t\t};\n\n\t\tthis.container.appendChild(bar);\n\n\t\tthis.mask.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true);\n\t\tthis.mask.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true);\n\t\tthis.mask.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true);\n\t\tthis.mask.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', function (event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tscope.mask.hide();\n\t\t\tscope.settingElement.deactivate();\n\t\t}, false);\n\n\t\tthis.addEventListener('control-bar-toggle', bar.toggle);\n\n\t\tthis.barElement = bar;\n\t};\n\n\tPANOLENS.Widget.prototype.createDefaultMenu = function () {\n\n\t\tvar scope = this,\n\t\t    handler;\n\n\t\thandler = function handler(method, data) {\n\n\t\t\treturn function () {\n\n\t\t\t\tscope.dispatchEvent({\n\n\t\t\t\t\ttype: 'panolens-viewer-handler',\n\t\t\t\t\tmethod: method,\n\t\t\t\t\tdata: data\n\n\t\t\t\t});\n\t\t\t};\n\t\t};\n\n\t\treturn [{\n\t\t\ttitle: 'Control',\n\t\t\tsubMenu: [{\n\t\t\t\ttitle: this.TOUCH_ENABLED ? 'Touch' : 'Mouse',\n\t\t\t\thandler: handler('enableControl', PANOLENS.Controls.ORBIT)\n\t\t\t}, {\n\t\t\t\ttitle: 'Sensor',\n\t\t\t\thandler: handler('enableControl', PANOLENS.Controls.DEVICEORIENTATION)\n\t\t\t}]\n\t\t}, {\n\t\t\ttitle: 'Mode',\n\t\t\tsubMenu: [{\n\t\t\t\ttitle: 'Normal',\n\t\t\t\thandler: handler('disableEffect')\n\t\t\t}, {\n\t\t\t\ttitle: 'Cardboard',\n\t\t\t\thandler: handler('enableEffect', PANOLENS.Modes.CARDBOARD)\n\t\t\t}, {\n\t\t\t\ttitle: 'Stereoscopic',\n\t\t\t\thandler: handler('enableEffect', PANOLENS.Modes.STEREO)\n\t\t\t}]\n\t\t}];\n\t};\n\n\tPANOLENS.Widget.prototype.addControlButton = function (name) {\n\n\t\tvar element;\n\n\t\tswitch (name) {\n\n\t\t\tcase 'fullscreen':\n\n\t\t\t\telement = this.createFullscreenButton();\n\t\t\t\tthis.fullscreenElement = element;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'setting':\n\n\t\t\t\telement = this.createSettingButton();\n\t\t\t\tthis.settingElement = element;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'video':\n\n\t\t\t\telement = this.createVideoControl();\n\t\t\t\tthis.videoElement = element;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\treturn;\n\n\t\t}\n\n\t\tif (!element) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.barElement.appendChild(element);\n\t};\n\n\tPANOLENS.Widget.prototype.createMask = function () {\n\n\t\tvar element = document.createElement('div');\n\t\telement.style.position = 'absolute';\n\t\telement.style.top = 0;\n\t\telement.style.left = 0;\n\t\telement.style.width = '100%';\n\t\telement.style.height = '100%';\n\t\telement.style.background = 'transparent';\n\t\telement.style.display = 'none';\n\n\t\telement.show = function () {\n\n\t\t\tthis.style.display = 'block';\n\t\t};\n\n\t\telement.hide = function () {\n\n\t\t\tthis.style.display = 'none';\n\t\t};\n\n\t\treturn element;\n\t};\n\n\tPANOLENS.Widget.prototype.createSettingButton = function () {\n\n\t\tvar scope = this,\n\t\t    item;\n\n\t\tfunction onTap(event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tscope.mainMenu.toggle();\n\n\t\t\tif (this.activated) {\n\n\t\t\t\tthis.deactivate();\n\t\t\t} else {\n\n\t\t\t\tthis.activate();\n\t\t\t}\n\t\t}\n\n\t\titem = this.createCustomItem({\n\n\t\t\tstyle: {\n\n\t\t\t\tbackgroundImage: 'url(\"' + PANOLENS.DataImage.Setting + '\")',\n\t\t\t\twebkitTransition: this.DEFAULT_TRANSITION,\n\t\t\t\ttransition: this.DEFAULT_TRANSITION\n\n\t\t\t},\n\n\t\t\tonTap: onTap\n\n\t\t});\n\n\t\titem.activate = function () {\n\n\t\t\tthis.style.transform = 'rotate3d(0,0,1,90deg)';\n\t\t\tthis.activated = true;\n\t\t\tscope.mask.show();\n\t\t};\n\n\t\titem.deactivate = function () {\n\n\t\t\tthis.style.transform = 'rotate3d(0,0,0,0)';\n\t\t\tthis.activated = false;\n\t\t\tscope.mask.hide();\n\n\t\t\tif (scope.mainMenu && scope.mainMenu.visible) {\n\n\t\t\t\tscope.mainMenu.hide();\n\t\t\t}\n\n\t\t\tif (scope.activeSubMenu && scope.activeSubMenu.visible) {\n\n\t\t\t\tscope.activeSubMenu.hide();\n\t\t\t}\n\n\t\t\tif (scope.mainMenu && scope.mainMenu._width) {\n\n\t\t\t\tscope.mainMenu.changeSize(scope.mainMenu._width);\n\t\t\t\tscope.mainMenu.unslideAll();\n\t\t\t}\n\t\t};\n\n\t\titem.activated = false;\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.createFullscreenButton = function () {\n\n\t\tvar scope = this,\n\t\t    item,\n\t\t    isFullscreen = false,\n\t\t    tapSkipped = true,\n\t\t    stylesheetId;\n\n\t\tstylesheetId = 'panolens-style-addon';\n\n\t\tif (!document.fullscreenEnabled && !document.webkitFullscreenEnabled && !document.mozFullScreenEnabled && !document.msFullscreenEnabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction onTap(event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\ttapSkipped = false;\n\n\t\t\tif (!isFullscreen) {\n\t\t\t\tscope.container.requestFullscreen && scope.container.requestFullscreen();\n\t\t\t\tscope.container.msRequestFullscreen && scope.container.msRequestFullscreen();\n\t\t\t\tscope.container.mozRequestFullScreen && scope.container.mozRequestFullScreen();\n\t\t\t\tscope.container.webkitRequestFullscreen && scope.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n\t\t\t\tisFullscreen = true;\n\t\t\t} else {\n\t\t\t\tdocument.exitFullscreen && document.exitFullscreen();\n\t\t\t\tdocument.msExitFullscreen && document.msExitFullscreen();\n\t\t\t\tdocument.mozCancelFullScreen && document.mozCancelFullScreen();\n\t\t\t\tdocument.webkitExitFullscreen && document.webkitExitFullscreen();\n\t\t\t\tisFullscreen = false;\n\t\t\t}\n\n\t\t\tthis.style.backgroundImage = isFullscreen ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n\t\t}\n\n\t\tfunction onFullScreenChange(e) {\n\n\t\t\tif (tapSkipped) {\n\n\t\t\t\tisFullscreen = !isFullscreen;\n\n\t\t\t\titem.style.backgroundImage = isFullscreen ? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n\t\t\t}\n\n\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'onWindowResize', data: false });\n\n\t\t\ttapSkipped = true;\n\t\t}\n\n\t\tdocument.addEventListener('fullscreenchange', onFullScreenChange, false);\n\t\tdocument.addEventListener('webkitfullscreenchange', onFullScreenChange, false);\n\t\tdocument.addEventListener('mozfullscreenchange', onFullScreenChange, false);\n\t\tdocument.addEventListener('MSFullscreenChange', onFullScreenChange, false);\n\n\t\titem = this.createCustomItem({\n\n\t\t\tstyle: {\n\n\t\t\t\tbackgroundImage: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")'\n\n\t\t\t},\n\n\t\t\tonTap: onTap\n\n\t\t});\n\n\t\tif (!document.querySelector(stylesheetId)) {\n\t\t\tvar sheet = document.createElement('style');\n\t\t\tsheet.id = stylesheetId;\n\t\t\tsheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }';\n\t\t\tdocument.body.appendChild(sheet);\n\t\t}\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.createVideoControl = function () {\n\n\t\tvar item;\n\n\t\titem = document.createElement('span');\n\t\titem.style.display = 'none';\n\t\titem.show = function () {\n\n\t\t\titem.style.display = '';\n\t\t};\n\n\t\titem.hide = function () {\n\n\t\t\titem.style.display = 'none';\n\t\t\titem.controlButton.paused = true;\n\t\t\titem.controlButton.update();\n\t\t};\n\n\t\titem.controlButton = this.createVideoControlButton();\n\t\titem.seekBar = this.createVideoControlSeekbar();\n\n\t\titem.appendChild(item.controlButton);\n\t\titem.appendChild(item.seekBar);\n\n\t\titem.dispose = function () {\n\n\t\t\titem.removeChild(item.controlButton);\n\t\t\titem.removeChild(item.seekBar);\n\n\t\t\titem.controlButton.dispose();\n\t\t\titem.controlButton = null;\n\n\t\t\titem.seekBar.dispose();\n\t\t\titem.seekBar = null;\n\t\t};\n\n\t\tthis.addEventListener('video-control-show', item.show);\n\t\tthis.addEventListener('video-control-hide', item.hide);\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.createVideoControlButton = function () {\n\n\t\tvar scope = this,\n\t\t    item;\n\n\t\tfunction onTap(event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused });\n\n\t\t\tthis.paused = !this.paused;\n\n\t\t\titem.update();\n\t\t};\n\n\t\titem = this.createCustomItem({\n\n\t\t\tstyle: {\n\n\t\t\t\tfloat: 'left',\n\t\t\t\tbackgroundImage: 'url(\"' + PANOLENS.DataImage.VideoPlay + '\")'\n\n\t\t\t},\n\n\t\t\tonTap: onTap\n\n\t\t});\n\n\t\titem.paused = true;\n\n\t\titem.update = function (paused) {\n\n\t\t\tthis.paused = paused !== undefined ? paused : this.paused;\n\n\t\t\tthis.style.backgroundImage = 'url(\"' + (this.paused ? PANOLENS.DataImage.VideoPlay : PANOLENS.DataImage.VideoPause) + '\")';\n\t\t};\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.createVideoControlSeekbar = function () {\n\n\t\tvar scope = this,\n\t\t    item,\n\t\t    progressElement,\n\t\t    progressElementControl,\n\t\t    isDragging = false,\n\t\t    mouseX,\n\t\t    percentageNow,\n\t\t    percentageNext;\n\n\t\tprogressElement = document.createElement('div');\n\t\tprogressElement.style.width = '0%';\n\t\tprogressElement.style.height = '100%';\n\t\tprogressElement.style.backgroundColor = '#fff';\n\n\t\tprogressElementControl = document.createElement('div');\n\t\tprogressElementControl.style.float = 'right';\n\t\tprogressElementControl.style.width = '14px';\n\t\tprogressElementControl.style.height = '14px';\n\t\tprogressElementControl.style.transform = 'translate(7px, -5px)';\n\t\tprogressElementControl.style.borderRadius = '50%';\n\t\tprogressElementControl.style.backgroundColor = '#ddd';\n\n\t\tprogressElementControl.addEventListener('mousedown', onMouseDown, false);\n\t\tprogressElementControl.addEventListener('touchstart', onMouseDown, false);\n\n\t\tfunction onMouseDown(event) {\n\n\t\t\tevent.stopPropagation();\n\n\t\t\tisDragging = true;\n\n\t\t\tmouseX = event.clientX || event.changedTouches && event.changedTouches[0].clientX;\n\n\t\t\tpercentageNow = parseInt(progressElement.style.width) / 100;\n\n\t\t\taddControlListeners();\n\t\t}\n\n\t\tfunction onVideoControlDrag(event) {\n\n\t\t\tvar clientX;\n\n\t\t\tif (isDragging) {\n\n\t\t\t\tclientX = event.clientX || event.changedTouches && event.changedTouches[0].clientX;\n\n\t\t\t\tpercentageNext = (clientX - mouseX) / item.clientWidth;\n\n\t\t\t\tpercentageNext = percentageNow + percentageNext;\n\n\t\t\t\tpercentageNext = percentageNext > 1 ? 1 : percentageNext < 0 ? 0 : percentageNext;\n\n\t\t\t\titem.setProgress(percentageNext);\n\n\t\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext });\n\t\t\t}\n\t\t}\n\n\t\tfunction onVideoControlStop(event) {\n\n\t\t\tevent.stopPropagation();\n\n\t\t\tisDragging = false;\n\n\t\t\tremoveControlListeners();\n\t\t}\n\n\t\tfunction addControlListeners() {\n\n\t\t\tscope.container.addEventListener('mousemove', onVideoControlDrag, false);\n\t\t\tscope.container.addEventListener('mouseup', onVideoControlStop, false);\n\t\t\tscope.container.addEventListener('touchmove', onVideoControlDrag, false);\n\t\t\tscope.container.addEventListener('touchend', onVideoControlStop, false);\n\t\t}\n\n\t\tfunction removeControlListeners() {\n\n\t\t\tscope.container.removeEventListener('mousemove', onVideoControlDrag, false);\n\t\t\tscope.container.removeEventListener('mouseup', onVideoControlStop, false);\n\t\t\tscope.container.removeEventListener('touchmove', onVideoControlDrag, false);\n\t\t\tscope.container.removeEventListener('touchend', onVideoControlStop, false);\n\t\t}\n\n\t\tfunction onTap(event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar percentage;\n\n\t\t\tif (event.target === progressElementControl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tpercentage = event.changedTouches && event.changedTouches.length > 0 ? (event.changedTouches[0].pageX - event.target.getBoundingClientRect().left) / this.clientWidth : event.offsetX / this.clientWidth;\n\n\t\t\tscope.dispatchEvent({ type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage });\n\n\t\t\titem.setProgress(event.offsetX / this.clientWidth);\n\t\t};\n\n\t\tfunction onDispose() {\n\n\t\t\tremoveControlListeners();\n\t\t\tprogressElement = null;\n\t\t\tprogressElementControl = null;\n\t\t}\n\n\t\tprogressElement.appendChild(progressElementControl);\n\n\t\titem = this.createCustomItem({\n\n\t\t\tstyle: {\n\n\t\t\t\tfloat: 'left',\n\t\t\t\twidth: '30%',\n\t\t\t\theight: '4px',\n\t\t\t\tmarginTop: '20px',\n\t\t\t\tbackgroundColor: 'rgba(188,188,188,0.8)'\n\n\t\t\t},\n\n\t\t\tonTap: onTap,\n\t\t\tonDispose: onDispose\n\n\t\t});\n\n\t\titem.appendChild(progressElement);\n\n\t\titem.setProgress = function (percentage) {\n\n\t\t\tprogressElement.style.width = percentage * 100 + '%';\n\t\t};\n\n\t\tthis.addEventListener('video-update', function (event) {\n\n\t\t\titem.setProgress(event.percentage);\n\t\t});\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.createMenuItem = function (title) {\n\n\t\tvar scope = this,\n\t\t    item = document.createElement('a');\n\t\titem.textContent = title;\n\t\titem.style.display = 'block';\n\t\titem.style.padding = '10px';\n\t\titem.style.textDecoration = 'none';\n\t\titem.style.cursor = 'pointer';\n\t\titem.style.pointerEvents = 'auto';\n\t\titem.style.transition = this.DEFAULT_TRANSITION;\n\n\t\titem.slide = function (right) {\n\n\t\t\tthis.style.transform = 'translateX(' + (right ? '' : '-') + '100%)';\n\t\t};\n\n\t\titem.unslide = function () {\n\n\t\t\tthis.style.transform = 'translateX(0)';\n\t\t};\n\n\t\titem.setIcon = function (url) {\n\n\t\t\tif (this.icon) {\n\n\t\t\t\tthis.icon.style.backgroundImage = 'url(' + url + ')';\n\t\t\t}\n\t\t};\n\n\t\titem.setSelectionTitle = function (title) {\n\n\t\t\tif (this.selection) {\n\n\t\t\t\tthis.selection.textContent = title;\n\t\t\t}\n\t\t};\n\n\t\titem.addSelection = function (name) {\n\n\t\t\tvar selection = document.createElement('span');\n\t\t\tselection.style.fontSize = '13px';\n\t\t\tselection.style.fontWeight = '300';\n\t\t\tselection.style.float = 'right';\n\n\t\t\tthis.selection = selection;\n\t\t\tthis.setSelectionTitle(name);\n\t\t\tthis.appendChild(selection);\n\n\t\t\treturn this;\n\t\t};\n\n\t\titem.addIcon = function (url, left, flip) {\n\n\t\t\turl = url || PANOLENS.DataImage.ChevronRight;\n\t\t\tleft = left || false;\n\t\t\tflip = flip || false;\n\n\t\t\tvar element = document.createElement('span');\n\t\t\telement.style.float = left ? 'left' : 'right';\n\t\t\telement.style.width = '17px';\n\t\t\telement.style.height = '17px';\n\t\t\telement.style['margin' + (left ? 'Right' : 'Left')] = '12px';\n\t\t\telement.style.backgroundSize = 'cover';\n\n\t\t\tif (flip) {\n\n\t\t\t\telement.style.transform = 'rotateZ(180deg)';\n\t\t\t}\n\n\t\t\tthis.icon = element;\n\t\t\tthis.setIcon(url);\n\t\t\tthis.appendChild(element);\n\n\t\t\treturn this;\n\t\t};\n\n\t\titem.addSubMenu = function (title, items) {\n\n\t\t\tthis.subMenu = scope.createSubMenu(title, items);\n\n\t\t\treturn this;\n\t\t};\n\n\t\titem.addEventListener('mouseenter', function () {\n\n\t\t\tthis.style.backgroundColor = '#e0e0e0';\n\t\t}, false);\n\n\t\titem.addEventListener('mouseleave', function () {\n\n\t\t\tthis.style.backgroundColor = '#fafafa';\n\t\t}, false);\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.createMenuItemHeader = function (title) {\n\n\t\tvar header = this.createMenuItem(title);\n\n\t\theader.style.borderBottom = '1px solid #333';\n\t\theader.style.paddingBottom = '15px';\n\n\t\treturn header;\n\t};\n\n\tPANOLENS.Widget.prototype.createMainMenu = function (menus) {\n\n\t\tvar scope = this,\n\t\t    menu = this.createMenu(),\n\t\t    subMenu;\n\n\t\tmenu._width = 200;\n\t\tmenu.changeSize(menu._width);\n\n\t\tfunction onTap(event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar mainMenu = scope.mainMenu,\n\t\t\t    subMenu = this.subMenu;\n\n\t\t\tfunction onNextTick() {\n\n\t\t\t\tmainMenu.changeSize(subMenu.clientWidth);\n\t\t\t\tsubMenu.show();\n\t\t\t\tsubMenu.unslideAll();\n\t\t\t}\n\n\t\t\tmainMenu.hide();\n\t\t\tmainMenu.slideAll();\n\t\t\tmainMenu.parentElement.appendChild(subMenu);\n\n\t\t\tscope.activeMainItem = this;\n\t\t\tscope.activeSubMenu = subMenu;\n\n\t\t\twindow.requestAnimationFrame(onNextTick);\n\t\t};\n\n\t\tfor (var i = 0; i < menus.length; i++) {\n\n\t\t\tvar item = menu.addItem(menus[i].title);\n\n\t\t\titem.style.paddingLeft = '20px';\n\n\t\t\titem.addIcon().addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n\t\t\tif (menus[i].subMenu && menus[i].subMenu.length > 0) {\n\n\t\t\t\tvar title = menus[i].subMenu[0].title;\n\n\t\t\t\titem.addSelection(title).addSubMenu(menus[i].title, menus[i].subMenu);\n\t\t\t}\n\t\t}\n\n\t\treturn menu;\n\t};\n\n\tPANOLENS.Widget.prototype.createSubMenu = function (title, items) {\n\n\t\tvar scope = this,\n\t\t    menu,\n\t\t    subMenu = this.createMenu();\n\n\t\tsubMenu.items = items;\n\t\tsubMenu.activeItem;\n\n\t\tfunction onTap(event) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tmenu = scope.mainMenu;\n\t\t\tmenu.changeSize(menu._width);\n\t\t\tmenu.unslideAll();\n\t\t\tmenu.show();\n\t\t\tsubMenu.slideAll(true);\n\t\t\tsubMenu.hide();\n\n\t\t\tif (this.type !== 'header') {\n\n\t\t\t\tsubMenu.setActiveItem(this);\n\t\t\t\tscope.activeMainItem.setSelectionTitle(this.textContent);\n\n\t\t\t\tthis.handler && this.handler();\n\t\t\t}\n\t\t}\n\n\t\tsubMenu.addHeader(title).addIcon(undefined, true, true).addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n\t\tfor (var i = 0; i < items.length; i++) {\n\n\t\t\tvar item = subMenu.addItem(items[i].title);\n\n\t\t\titem.style.fontWeight = 300;\n\t\t\titem.handler = items[i].handler;\n\t\t\titem.addIcon(' ', true);\n\t\t\titem.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false);\n\n\t\t\tif (!subMenu.activeItem) {\n\n\t\t\t\tsubMenu.setActiveItem(item);\n\t\t\t}\n\t\t}\n\n\t\tsubMenu.slideAll(true);\n\n\t\treturn subMenu;\n\t};\n\n\tPANOLENS.Widget.prototype.createMenu = function () {\n\n\t\tvar scope = this,\n\t\t    menu = document.createElement('span'),\n\t\t    style;\n\n\t\tstyle = menu.style;\n\n\t\tstyle.padding = '5px 0';\n\t\tstyle.position = 'fixed';\n\t\tstyle.bottom = '100%';\n\t\tstyle.right = '14px';\n\t\tstyle.backgroundColor = '#fafafa';\n\t\tstyle.fontFamily = 'Helvetica Neue';\n\t\tstyle.fontSize = '14px';\n\t\tstyle.visibility = 'hidden';\n\t\tstyle.opacity = 0;\n\t\tstyle.boxShadow = '0 0 12pt rgba(0,0,0,0.25)';\n\t\tstyle.borderRadius = '2px';\n\t\tstyle.overflow = 'hidden';\n\t\tstyle.willChange = 'width, height, opacity';\n\t\tstyle.pointerEvents = 'auto';\n\t\tstyle.transition = this.DEFAULT_TRANSITION;\n\n\t\tmenu.visible = false;\n\n\t\tmenu.changeSize = function (width, height) {\n\n\t\t\tif (width) {\n\n\t\t\t\tthis.style.width = width + 'px';\n\t\t\t}\n\n\t\t\tif (height) {\n\n\t\t\t\tthis.style.height = height + 'px';\n\t\t\t}\n\t\t};\n\n\t\tmenu.show = function () {\n\n\t\t\tthis.style.opacity = 1;\n\t\t\tthis.style.visibility = 'visible';\n\t\t\tthis.visible = true;\n\t\t};\n\n\t\tmenu.hide = function () {\n\n\t\t\tthis.style.opacity = 0;\n\t\t\tthis.style.visibility = 'hidden';\n\t\t\tthis.visible = false;\n\t\t};\n\n\t\tmenu.toggle = function () {\n\n\t\t\tif (this.visible) {\n\n\t\t\t\tthis.hide();\n\t\t\t} else {\n\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t};\n\n\t\tmenu.slideAll = function (right) {\n\n\t\t\tfor (var i = 0; i < menu.children.length; i++) {\n\n\t\t\t\tif (menu.children[i].slide) {\n\n\t\t\t\t\tmenu.children[i].slide(right);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tmenu.unslideAll = function () {\n\n\t\t\tfor (var i = 0; i < menu.children.length; i++) {\n\n\t\t\t\tif (menu.children[i].unslide) {\n\n\t\t\t\t\tmenu.children[i].unslide();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tmenu.addHeader = function (title) {\n\n\t\t\tvar header = scope.createMenuItemHeader(title);\n\t\t\theader.type = 'header';\n\n\t\t\tthis.appendChild(header);\n\n\t\t\treturn header;\n\t\t};\n\n\t\tmenu.addItem = function (title) {\n\n\t\t\tvar item = scope.createMenuItem(title);\n\t\t\titem.type = 'item';\n\n\t\t\tthis.appendChild(item);\n\n\t\t\treturn item;\n\t\t};\n\n\t\tmenu.setActiveItem = function (item) {\n\n\t\t\tif (this.activeItem) {\n\n\t\t\t\tthis.activeItem.setIcon(' ');\n\t\t\t}\n\n\t\t\titem.setIcon(PANOLENS.DataImage.Check);\n\n\t\t\tthis.activeItem = item;\n\t\t};\n\n\t\tmenu.addEventListener('mousemove', this.PREVENT_EVENT_HANDLER, true);\n\t\tmenu.addEventListener('mouseup', this.PREVENT_EVENT_HANDLER, true);\n\t\tmenu.addEventListener('mousedown', this.PREVENT_EVENT_HANDLER, true);\n\n\t\treturn menu;\n\t};\n\n\tPANOLENS.Widget.prototype.createCustomItem = function (options) {\n\n\t\toptions = options || {};\n\n\t\tvar scope = this,\n\t\t    item = options.element || document.createElement('span');\n\n\t\titem.style.cursor = 'pointer';\n\t\titem.style.float = 'right';\n\t\titem.style.width = '44px';\n\t\titem.style.height = '100%';\n\t\titem.style.backgroundSize = '60%';\n\t\titem.style.backgroundRepeat = 'no-repeat';\n\t\titem.style.backgroundPosition = 'center';\n\t\titem.style.webkitUserSelect = item.style.MozUserSelect = item.style.userSelect = 'none';\n\t\titem.style.position = 'relative';\n\t\titem.style.pointerEvents = 'auto';\n\n\t\titem.addEventListener(scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function () {\n\t\t\titem.style.filter = item.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))';\n\t\t});\n\t\titem.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function () {\n\t\t\titem.style.filter = item.style.webkitFilter = '';\n\t\t});\n\n\t\titem = this.mergeStyleOptions(item, options.style);\n\n\t\tif (options.onTap) {\n\n\t\t\titem.addEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false);\n\t\t}\n\n\t\titem.dispose = function () {\n\n\t\t\titem.removeEventListener(scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false);\n\n\t\t\toptions.onDispose && options.onDispose();\n\t\t};\n\n\t\treturn item;\n\t};\n\n\tPANOLENS.Widget.prototype.mergeStyleOptions = function (element, options) {\n\n\t\toptions = options || {};\n\n\t\tfor (var property in options) {\n\n\t\t\tif (options.hasOwnProperty(property)) {\n\n\t\t\t\telement.style[property] = options[property];\n\t\t\t}\n\t\t}\n\n\t\treturn element;\n\t};\n\n\tPANOLENS.Widget.prototype.dispose = function () {\n\n\t\tif (this.barElement) {\n\t\t\tthis.container.removeChild(this.barElement);\n\t\t\tthis.barElement.dispose();\n\t\t\tthis.barElement = null;\n\t\t}\n\t};\n})();;(function () {\n\tPANOLENS.Infospot = function (scale, imageSrc, animated) {\n\n\t\tvar scope = this,\n\t\t    ratio,\n\t\t    startScale,\n\t\t    endScale,\n\t\t    duration;\n\n\t\tscale = scale || 300;\n\t\timageSrc = imageSrc || PANOLENS.DataImage.Info;\n\t\tduration = 500;\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].call(this);\n\n\t\tthis.type = 'infospot';\n\n\t\tthis.animated = animated !== undefined ? animated : true;\n\t\tthis.isHovering = false;\n\t\tthis.visible = false;\n\n\t\tthis.element;\n\t\tthis.toPanorama;\n\t\tthis.cursorStyle;\n\n\t\tthis.mode = PANOLENS.Modes.UNKNOWN;\n\n\t\tthis.scale.set(scale, scale, 1);\n\t\tthis.rotation.y = Math.PI;\n\t\tthis.scaleFactor = 1.3;\n\n\t\tthis.container;\n\n\t\tthis.HANDLER_FOCUS;\n\n\t\tPANOLENS.Utils.TextureLoader.load(imageSrc, postLoad);\n\n\t\tfunction postLoad(texture) {\n\n\t\t\ttexture.wrapS = __WEBPACK_IMPORTED_MODULE_8_three__[\"RepeatWrapping\"];\n\t\t\ttexture.repeat.x = -1;\n\n\t\t\ttexture.image.width = texture.image.naturalWidth || 64;\n\t\t\ttexture.image.height = texture.image.naturalHeight || 64;\n\n\t\t\tratio = texture.image.width / texture.image.height;\n\t\t\tscope.scale.set(ratio * scale, scale, 1);\n\n\t\t\tstartScale = scope.scale.clone();\n\n\t\t\tscope.scaleUpAnimation = new TWEEN.Tween(scope.scale).to({ x: startScale.x * scope.scaleFactor, y: startScale.y * scope.scaleFactor }, duration).easing(TWEEN.Easing.Elastic.Out);\n\n\t\t\tscope.scaleDownAnimation = new TWEEN.Tween(scope.scale).to({ x: startScale.x, y: startScale.y }, duration).easing(TWEEN.Easing.Elastic.Out);\n\n\t\t\tscope.material.side = __WEBPACK_IMPORTED_MODULE_8_three__[\"DoubleSide\"];\n\t\t\tscope.material.map = texture;\n\t\t\tscope.material.depthTest = false;\n\t\t\tscope.material.needsUpdate = true;\n\t\t}\n\n\t\tfunction show() {\n\n\t\t\tthis.visible = true;\n\t\t}\n\n\t\tfunction hide() {\n\n\t\t\tthis.visible = false;\n\t\t}\n\n\t\tthis.showAnimation = new TWEEN.Tween(this.material).to({ opacity: 1 }, duration).onStart(show.bind(this)).easing(TWEEN.Easing.Quartic.Out);\n\n\t\tthis.hideAnimation = new TWEEN.Tween(this.material).to({ opacity: 0 }, duration).onComplete(hide.bind(this)).easing(TWEEN.Easing.Quartic.Out);\n\n\t\tthis.addEventListener('click', this.onClick);\n\t\tthis.addEventListener('hover', this.onHover);\n\t\tthis.addEventListener('hoverenter', this.onHoverStart);\n\t\tthis.addEventListener('hoverleave', this.onHoverEnd);\n\t\tthis.addEventListener('panolens-dual-eye-effect', this.onDualEyeEffect);\n\t\tthis.addEventListener('panolens-container', this.setContainer.bind(this));\n\t\tthis.addEventListener('dismiss', this.onDismiss);\n\t\tthis.addEventListener('panolens-infospot-focus', this.setFocusMethod);\n\t};\n\n\tPANOLENS.Infospot.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"Sprite\"].prototype);\n\n\tPANOLENS.Infospot.prototype.setContainer = function (data) {\n\n\t\tvar container;\n\n\t\tif (data instanceof HTMLElement) {\n\n\t\t\tcontainer = data;\n\t\t} else if (data && data.container) {\n\n\t\t\tcontainer = data.container;\n\t\t}\n\n\t\tif (container && this.element) {\n\n\t\t\tcontainer.appendChild(this.element);\n\t\t}\n\n\t\tthis.container = container;\n\t};\n\n\tPANOLENS.Infospot.prototype.getContainer = function () {\n\n\t\treturn this.container;\n\t};\n\n\tPANOLENS.Infospot.prototype.onClick = function (event) {\n\n\t\tif (this.element && this.getContainer()) {\n\n\t\t\tthis.onHoverStart(event);\n\n\t\t\tthis.lockHoverElement();\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.onDismiss = function (event) {\n\n\t\tif (this.element) {\n\n\t\t\tthis.unlockHoverElement();\n\t\t\tthis.onHoverEnd();\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.onHover = function (event) {};\n\n\tPANOLENS.Infospot.prototype.onHoverStart = function (event) {\n\n\t\tif (!this.getContainer()) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar cursorStyle = this.cursorStyle || (this.mode === PANOLENS.Modes.NORMAL ? 'pointer' : 'default');\n\n\t\tthis.isHovering = true;\n\t\tthis.container.style.cursor = cursorStyle;\n\n\t\tif (this.animated) {\n\n\t\t\tthis.scaleDownAnimation && this.scaleDownAnimation.stop();\n\t\t\tthis.scaleUpAnimation && this.scaleUpAnimation.start();\n\t\t}\n\n\t\tif (this.element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0) {\n\n\t\t\tif (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n\n\t\t\t\tthis.element.style.display = 'none';\n\t\t\t\tthis.element.left && (this.element.left.style.display = 'block');\n\t\t\t\tthis.element.right && (this.element.right.style.display = 'block');\n\n\t\t\t\tthis.element._width = this.element.left.clientWidth;\n\t\t\t\tthis.element._height = this.element.left.clientHeight;\n\t\t\t} else {\n\n\t\t\t\tthis.element.style.display = 'block';\n\t\t\t\tthis.element.left && (this.element.left.style.display = 'none');\n\t\t\t\tthis.element.right && (this.element.right.style.display = 'none');\n\n\t\t\t\tthis.element._width = this.element.clientWidth;\n\t\t\t\tthis.element._height = this.element.clientHeight;\n\t\t\t}\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.onHoverEnd = function () {\n\n\t\tif (!this.getContainer()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isHovering = false;\n\t\tthis.container.style.cursor = 'default';\n\n\t\tif (this.animated) {\n\n\t\t\tthis.scaleUpAnimation && this.scaleUpAnimation.stop();\n\t\t\tthis.scaleDownAnimation && this.scaleDownAnimation.start();\n\t\t}\n\n\t\tif (this.element && !this.element.locked) {\n\n\t\t\tthis.element.style.display = 'none';\n\t\t\tthis.element.left && (this.element.left.style.display = 'none');\n\t\t\tthis.element.right && (this.element.right.style.display = 'none');\n\n\t\t\tthis.unlockHoverElement();\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.onDualEyeEffect = function (event) {\n\n\t\tif (!this.getContainer()) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar element, halfWidth, halfHeight;\n\n\t\tthis.mode = event.mode;\n\n\t\telement = this.element;\n\n\t\thalfWidth = this.container.clientWidth / 2;\n\t\thalfHeight = this.container.clientHeight / 2;\n\n\t\tif (!element) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!element.left || !element.right) {\n\n\t\t\telement.left = element.cloneNode(true);\n\t\t\telement.right = element.cloneNode(true);\n\t\t}\n\n\t\tif (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n\n\t\t\telement.left.style.display = element.style.display;\n\t\t\telement.right.style.display = element.style.display;\n\t\t\telement.style.display = 'none';\n\t\t} else {\n\n\t\t\telement.style.display = element.left.style.display;\n\t\t\telement.left.style.display = 'none';\n\t\t\telement.right.style.display = 'none';\n\t\t}\n\n\t\tthis.translateElement(halfWidth, halfHeight);\n\n\t\tthis.container.appendChild(element.left);\n\t\tthis.container.appendChild(element.right);\n\t};\n\n\tPANOLENS.Infospot.prototype.translateElement = function (x, y) {\n\n\t\tif (!this.element._width || !this.element._height || !this.getContainer()) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar left, top, element, width, height, delta, container;\n\n\t\tcontainer = this.container;\n\t\telement = this.element;\n\t\twidth = element._width / 2;\n\t\theight = element._height / 2;\n\t\tdelta = element.verticalDelta !== undefined ? element.verticalDelta : 40;\n\n\t\tleft = x - width;\n\t\ttop = y - height - delta;\n\n\t\tif ((this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) && element.left && element.right && !(x === container.clientWidth / 2 && y === container.clientHeight / 2)) {\n\n\t\t\tleft = container.clientWidth / 4 - width + (x - container.clientWidth / 2);\n\t\t\ttop = container.clientHeight / 2 - height - delta + (y - container.clientHeight / 2);\n\n\t\t\tthis.setElementStyle('transform', element.left, 'translate(' + left + 'px, ' + top + 'px)');\n\n\t\t\tleft += container.clientWidth / 2;\n\n\t\t\tthis.setElementStyle('transform', element.right, 'translate(' + left + 'px, ' + top + 'px)');\n\t\t} else {\n\n\t\t\tthis.setElementStyle('transform', element, 'translate(' + left + 'px, ' + top + 'px)');\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.setElementStyle = function (type, element, value) {\n\n\t\tvar style = element.style;\n\n\t\tif (type === 'transform') {\n\n\t\t\tstyle.webkitTransform = style.msTransform = style.transform = value;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.setText = function (text) {\n\n\t\tif (this.element) {\n\n\t\t\tthis.element.textContent = text;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.setCursorHoverStyle = function (style) {\n\n\t\tthis.cursorStyle = style;\n\t};\n\n\tPANOLENS.Infospot.prototype.addHoverText = function (text, delta) {\n\n\t\tif (!this.element) {\n\n\t\t\tthis.element = document.createElement('div');\n\t\t\tthis.element.style.display = 'none';\n\t\t\tthis.element.style.color = '#fff';\n\t\t\tthis.element.style.top = 0;\n\t\t\tthis.element.style.maxWidth = '50%';\n\t\t\tthis.element.style.maxHeight = '50%';\n\t\t\tthis.element.style.textShadow = '0 0 3px #000000';\n\t\t\tthis.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif';\n\t\t\tthis.element.style.position = 'absolute';\n\t\t\tthis.element.classList.add('panolens-infospot');\n\t\t\tthis.element.verticalDelta = delta !== undefined ? delta : 40;\n\t\t}\n\n\t\tthis.setText(text);\n\t};\n\n\tPANOLENS.Infospot.prototype.addHoverElement = function (el, delta) {\n\n\t\tif (!this.element) {\n\n\t\t\tthis.element = el.cloneNode(true);\n\t\t\tthis.element.style.display = 'none';\n\t\t\tthis.element.style.top = 0;\n\t\t\tthis.element.style.position = 'absolute';\n\t\t\tthis.element.classList.add('panolens-infospot');\n\t\t\tthis.element.verticalDelta = delta !== undefined ? delta : 40;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.removeHoverElement = function () {\n\n\t\tif (this.element) {\n\n\t\t\tif (this.element.left) {\n\n\t\t\t\tthis.container.removeChild(this.element.left);\n\t\t\t\tthis.element.left = null;\n\t\t\t}\n\n\t\t\tif (this.element.right) {\n\n\t\t\t\tthis.container.removeChild(this.element.right);\n\t\t\t\tthis.element.right = null;\n\t\t\t}\n\n\t\t\tthis.container.removeChild(this.element);\n\t\t\tthis.element = null;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.lockHoverElement = function () {\n\n\t\tif (this.element) {\n\n\t\t\tthis.element.locked = true;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.unlockHoverElement = function () {\n\n\t\tif (this.element) {\n\n\t\t\tthis.element.locked = false;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.show = function (delay) {\n\n\t\tdelay = delay || 0;\n\n\t\tif (this.animated) {\n\n\t\t\tthis.hideAnimation && this.hideAnimation.stop();\n\t\t\tthis.showAnimation && this.showAnimation.delay(delay).start();\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.hide = function (delay) {\n\n\t\tdelay = delay || 0;\n\n\t\tif (this.animated) {\n\n\t\t\tthis.showAnimation && this.showAnimation.stop();\n\t\t\tthis.hideAnimation && this.hideAnimation.delay(delay).start();\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.setFocusMethod = function (event) {\n\n\t\tif (event) {\n\n\t\t\tthis.HANDLER_FOCUS = event.method;\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.focus = function (duration, easing) {\n\n\t\tif (this.HANDLER_FOCUS) {\n\n\t\t\tthis.HANDLER_FOCUS(this.position, duration, easing);\n\t\t\tthis.onDismiss();\n\t\t}\n\t};\n\n\tPANOLENS.Infospot.prototype.dispose = function () {\n\n\t\tthis.removeHoverElement();\n\t\tthis.material.dispose();\n\n\t\tif (this.parent) {\n\n\t\t\tthis.parent.remove(this);\n\t\t}\n\t};\n})();;(function () {\n\n\t'use strict';\n\n\tPANOLENS.Viewer = function (options) {\n\n\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].call(this);\n\n\t\tif (!__WEBPACK_IMPORTED_MODULE_8_three__) {\n\n\t\t\tconsole.error('Three.JS not found');\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar container;\n\n\t\toptions = options || {};\n\t\toptions.controlBar = options.controlBar !== undefined ? options.controlBar : true;\n\t\toptions.controlButtons = options.controlButtons || ['fullscreen', 'setting', 'video'];\n\t\toptions.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false;\n\t\toptions.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true;\n\t\toptions.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false;\n\t\toptions.clickTolerance = options.clickTolerance || 10;\n\t\toptions.cameraFov = options.cameraFov || 60;\n\t\toptions.reverseDragging = options.reverseDragging || false;\n\t\toptions.enableReticle = options.enableReticle || false;\n\t\toptions.dwellTime = options.dwellTime || 1500;\n\t\toptions.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true;\n\t\toptions.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false;\n\t\toptions.indicatorSize = options.indicatorSize || 30;\n\t\toptions.output = options.output ? options.output : 'none';\n\n\t\tthis.options = options;\n\n\t\tif (options.container) {\n\n\t\t\tcontainer = options.container;\n\t\t\tcontainer._width = container.clientWidth;\n\t\t\tcontainer._height = container.clientHeight;\n\t\t} else {\n\n\t\t\tcontainer = document.createElement('div');\n\t\t\tcontainer.classList.add('panolens-container');\n\t\t\tcontainer.style.width = '100%';\n\t\t\tcontainer.style.height = '100%';\n\t\t\tcontainer._width = window.innerWidth;\n\t\t\tcontainer._height = window.innerHeight;\n\t\t\tdocument.body.appendChild(container);\n\t\t}\n\n\t\tthis.container = container;\n\n\t\tthis.camera = options.camera || new __WEBPACK_IMPORTED_MODULE_8_three__[\"PerspectiveCamera\"](this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 10000);\n\t\tthis.scene = options.scene || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Scene\"]();\n\t\tthis.renderer = options.renderer || new __WEBPACK_IMPORTED_MODULE_8_three__[\"WebGLRenderer\"]({ alpha: true, antialias: false });\n\n\t\tthis.viewIndicatorSize = options.indicatorSize;\n\n\t\tthis.reticle = {};\n\t\tthis.tempEnableReticle = this.options.enableReticle;\n\n\t\tthis.mode = PANOLENS.Modes.NORMAL;\n\n\t\tthis.OrbitControls;\n\t\tthis.DeviceOrientationControls;\n\n\t\tthis.CardboardEffect;\n\t\tthis.StereoEffect;\n\n\t\tthis.controls;\n\t\tthis.effect;\n\t\tthis.panorama;\n\t\tthis.widget;\n\n\t\tthis.hoverObject;\n\t\tthis.infospot;\n\t\tthis.pressEntityObject;\n\t\tthis.pressObject;\n\n\t\tthis.raycaster = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Raycaster\"]();\n\t\tthis.raycasterPoint = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\t\tthis.userMouse = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector2\"]();\n\t\tthis.updateCallbacks = [];\n\t\tthis.requestAnimationId;\n\n\t\tthis.cameraFrustum = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Frustum\"]();\n\t\tthis.cameraViewProjectionMatrix = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Matrix4\"]();\n\n\t\tthis.outputDivElement;\n\n\t\tthis.HANDLER_MOUSE_DOWN = this.onMouseDown.bind(this);\n\t\tthis.HANDLER_MOUSE_UP = this.onMouseUp.bind(this);\n\t\tthis.HANDLER_MOUSE_MOVE = this.onMouseMove.bind(this);\n\t\tthis.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind(this);\n\t\tthis.HANDLER_KEY_DOWN = this.onKeyDown.bind(this);\n\t\tthis.HANDLER_KEY_UP = this.onKeyUp.bind(this);\n\t\tthis.HANDLER_TAP = this.onTap.bind(this, {\n\t\t\tclientX: this.container.clientWidth / 2,\n\t\t\tclientY: this.container.clientHeight / 2\n\t\t});\n\n\t\tthis.OUTPUT_INFOSPOT = false;\n\n\t\tthis.tweenLeftAnimation = new TWEEN.Tween();\n\t\tthis.tweenUpAnimation = new TWEEN.Tween();\n\n\t\tthis.renderer.setPixelRatio(window.devicePixelRatio);\n\t\tthis.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n\t\tthis.renderer.setClearColor(0x000000, 1);\n\t\tthis.renderer.sortObjects = false;\n\n\t\tthis.renderer.domElement.classList.add('panolens-canvas');\n\t\tthis.renderer.domElement.style.display = 'block';\n\t\tthis.container.style.backgroundColor = '#000';\n\t\tthis.container.appendChild(this.renderer.domElement);\n\n\t\tthis.OrbitControls = new __WEBPACK_IMPORTED_MODULE_8_three__[\"OrbitControls\"](this.camera, this.container);\n\t\tthis.OrbitControls.name = 'orbit';\n\t\tthis.OrbitControls.minDistance = 1;\n\t\tthis.OrbitControls.noPan = true;\n\t\tthis.DeviceOrientationControls = new __WEBPACK_IMPORTED_MODULE_8_three__[\"DeviceOrientationControls\"](this.camera, this.container);\n\t\tthis.DeviceOrientationControls.name = 'device-orientation';\n\t\tthis.DeviceOrientationControls.enabled = false;\n\t\tthis.camera.position.z = 1;\n\n\t\tif (this.options.passiveRendering) {\n\n\t\t\tconsole.warn('passiveRendering is now deprecated');\n\t\t}\n\n\t\tthis.controls = [this.OrbitControls, this.DeviceOrientationControls];\n\t\tthis.control = this.OrbitControls;\n\n\t\tthis.CardboardEffect = new __WEBPACK_IMPORTED_MODULE_8_three__[\"CardboardEffect\"](this.renderer);\n\t\tthis.CardboardEffect.setSize(this.container.clientWidth, this.container.clientHeight);\n\n\t\tthis.StereoEffect = new __WEBPACK_IMPORTED_MODULE_8_three__[\"StereoEffect\"](this.renderer);\n\t\tthis.StereoEffect.setSize(this.container.clientWidth, this.container.clientHeight);\n\n\t\tthis.effect = this.CardboardEffect;\n\n\t\tthis.addReticle();\n\n\t\tif (this.options.horizontalView) {\n\t\t\tthis.OrbitControls.minPolarAngle = Math.PI / 2;\n\t\t\tthis.OrbitControls.maxPolarAngle = Math.PI / 2;\n\t\t}\n\n\t\tif (this.options.controlBar !== false) {\n\t\t\tthis.addDefaultControlBar(this.options.controlButtons);\n\t\t}\n\n\t\tif (this.options.viewIndicator) {\n\t\t\tthis.addViewIndicator();\n\t\t}\n\n\t\tif (this.options.reverseDragging) {\n\t\t\tthis.reverseDraggingDirection();\n\t\t}\n\n\t\tif (this.options.enableReticle) {\n\t\t\tthis.enableReticleControl();\n\t\t} else {\n\t\t\tthis.registerMouseAndTouchEvents();\n\t\t}\n\n\t\tif (this.options.output === 'overlay') {\n\t\t\tthis.addOutputElement();\n\t\t}\n\n\t\tthis.registerEventListeners();\n\n\t\tthis.animate.call(this);\n\t};\n\n\tPANOLENS.Viewer.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(__WEBPACK_IMPORTED_MODULE_8_three__[\"EventDispatcher\"].prototype);\n\n\tPANOLENS.Viewer.prototype.constructor = PANOLENS.Viewer;\n\n\tPANOLENS.Viewer.prototype.add = function (object) {\n\n\t\tif (arguments.length > 1) {\n\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\n\t\t\t\tthis.add(arguments[i]);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.scene.add(object);\n\n\t\tif (object.addEventListener) {\n\n\t\t\tobject.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n\t\t}\n\n\t\tif (object instanceof PANOLENS.Panorama && object.dispatchEvent) {\n\n\t\t\tobject.dispatchEvent({ type: 'panolens-container', container: this.container });\n\t\t}\n\n\t\tif (object.type === 'panorama') {\n\n\t\t\tthis.addPanoramaEventListener(object);\n\n\t\t\tif (!this.panorama) {\n\n\t\t\t\tthis.setPanorama(object);\n\t\t\t}\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.remove = function (object) {\n\n\t\tif (object.removeEventListener) {\n\n\t\t\tobject.removeEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n\t\t}\n\n\t\tthis.scene.remove(object);\n\t};\n\n\tPANOLENS.Viewer.prototype.addDefaultControlBar = function (array) {\n\n\t\tvar scope = this;\n\n\t\tif (this.widget) {\n\n\t\t\tconsole.warn('Default control bar exists');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.widget = new PANOLENS.Widget(this.container);\n\t\tthis.widget.addEventListener('panolens-viewer-handler', this.eventHandler.bind(this));\n\t\tthis.widget.addControlBar();\n\t\tarray.forEach(function (buttonName) {\n\n\t\t\tscope.widget.addControlButton(buttonName);\n\t\t});\n\t};\n\n\tPANOLENS.Viewer.prototype.setPanorama = function (pano) {\n\n\t\tvar scope = this,\n\t\t    leavingPanorama = this.panorama;\n\n\t\tif (pano.type === 'panorama' && leavingPanorama !== pano) {\n\t\t\tthis.hideInfospot();\n\n\t\t\tvar afterEnterComplete = function afterEnterComplete() {\n\n\t\t\t\tleavingPanorama && leavingPanorama.onLeave();\n\t\t\t\tpano.removeEventListener('enter-fade-start', afterEnterComplete);\n\t\t\t};\n\n\t\t\tpano.addEventListener('enter-fade-start', afterEnterComplete);\n\n\t\t\t(this.panorama = pano).onEnter();\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.eventHandler = function (event) {\n\n\t\tif (event.method && this[event.method]) {\n\n\t\t\tthis[event.method](event.data);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.dispatchEventToChildren = function (event) {\n\n\t\tthis.scene.traverse(function (object) {\n\n\t\t\tif (object.dispatchEvent) {\n\n\t\t\t\tobject.dispatchEvent(event);\n\t\t\t}\n\t\t});\n\t};\n\n\tPANOLENS.Viewer.prototype.activateWidgetItem = function (controlIndex, mode) {\n\n\t\tvar mainMenu = this.widget.mainMenu;\n\t\tvar ControlMenuItem = mainMenu.children[0];\n\t\tvar ModeMenuItem = mainMenu.children[1];\n\n\t\tvar item;\n\n\t\tif (controlIndex !== undefined) {\n\n\t\t\tswitch (controlIndex) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\titem = ControlMenuItem.subMenu.children[1];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\titem = ControlMenuItem.subMenu.children[2];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\titem = ControlMenuItem.subMenu.children[1];\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tControlMenuItem.subMenu.setActiveItem(item);\n\t\t\tControlMenuItem.setSelectionTitle(item.textContent);\n\t\t}\n\n\t\tif (mode !== undefined) {\n\n\t\t\tswitch (mode) {\n\n\t\t\t\tcase PANOLENS.Modes.CARDBOARD:\n\n\t\t\t\t\titem = ModeMenuItem.subMenu.children[2];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PANOLENS.Modes.STEREO:\n\n\t\t\t\t\titem = ModeMenuItem.subMenu.children[3];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\titem = ModeMenuItem.subMenu.children[1];\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tModeMenuItem.subMenu.setActiveItem(item);\n\t\t\tModeMenuItem.setSelectionTitle(item.textContent);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.enableEffect = function (mode) {\n\n\t\tif (this.mode === mode) {\n\t\t\treturn;\n\t\t}\n\t\tif (mode === PANOLENS.Modes.NORMAL) {\n\t\t\tthis.disableEffect();return;\n\t\t} else {\n\t\t\tthis.mode = mode;\n\t\t}\n\n\t\tvar fov = this.camera.fov;\n\n\t\tswitch (mode) {\n\n\t\t\tcase PANOLENS.Modes.CARDBOARD:\n\n\t\t\t\tthis.effect = this.CardboardEffect;\n\t\t\t\tthis.enableReticleControl();\n\n\t\t\t\tbreak;\n\n\t\t\tcase PANOLENS.Modes.STEREO:\n\n\t\t\t\tthis.effect = this.StereoEffect;\n\t\t\t\tthis.enableReticleControl();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tthis.effect = null;\n\t\t\t\tthis.disableReticleControl();\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tthis.activateWidgetItem(undefined, this.mode);\n\n\t\tthis.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode });\n\n\t\tthis.camera.fov = fov + 10e-3;\n\t\tthis.effect.setSize(this.container.clientWidth, this.container.clientHeight);\n\t\tthis.render();\n\t\tthis.camera.fov = fov;\n\t};\n\n\tPANOLENS.Viewer.prototype.disableEffect = function () {\n\n\t\tif (this.mode === PANOLENS.Modes.NORMAL) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.mode = PANOLENS.Modes.NORMAL;\n\t\tthis.disableReticleControl();\n\n\t\tthis.activateWidgetItem(undefined, this.mode);\n\n\t\tthis.dispatchEventToChildren({ type: 'panolens-dual-eye-effect', mode: this.mode });\n\n\t\tthis.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n\t\tthis.render();\n\t};\n\n\tPANOLENS.Viewer.prototype.enableReticleControl = function () {\n\n\t\tif (this.reticle.visible) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.reticle.textureLoaded) {\n\t\t\tthis.reticle.loadTextures();\n\t\t}\n\n\t\tthis.tempEnableReticle = true;\n\n\t\tthis.unregisterMouseAndTouchEvents();\n\t\tthis.reticle.show();\n\t\tthis.registerReticleEvent();\n\t\tthis.updateReticleEvent();\n\t};\n\n\tPANOLENS.Viewer.prototype.disableReticleControl = function () {\n\n\t\tthis.tempEnableReticle = false;\n\n\t\tif (!this.options.enableReticle) {\n\n\t\t\tthis.reticle.hide();\n\t\t\tthis.unregisterReticleEvent();\n\t\t\tthis.registerMouseAndTouchEvents();\n\t\t} else {\n\n\t\t\tthis.updateReticleEvent();\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.toggleVideoPlay = function (pause) {\n\n\t\tif (this.panorama instanceof PANOLENS.VideoPanorama) {\n\t\t\tthis.panorama.dispatchEvent({ type: 'video-toggle', pause: pause });\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.setVideoCurrentTime = function (percentage) {\n\n\t\tif (this.panorama instanceof PANOLENS.VideoPanorama) {\n\t\t\tthis.panorama.dispatchEvent({ type: 'video-time', percentage: percentage });\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.onVideoUpdate = function (percentage) {\n\t\tthis.widget && this.widget.dispatchEvent({ type: 'video-update', percentage: percentage });\n\t};\n\n\tPANOLENS.Viewer.prototype.addUpdateCallback = function (fn) {\n\n\t\tif (fn) {\n\n\t\t\tthis.updateCallbacks.push(fn);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.removeUpdateCallback = function (fn) {\n\n\t\tvar index = this.updateCallbacks.indexOf(fn);\n\n\t\tif (fn && index >= 0) {\n\n\t\t\tthis.updateCallbacks.splice(index, 1);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.showVideoWidget = function () {\n\t\tthis.widget && this.widget.dispatchEvent({ type: 'video-control-show' });\n\t};\n\n\tPANOLENS.Viewer.prototype.hideVideoWidget = function () {\n\t\tthis.widget && this.widget.dispatchEvent({ type: 'video-control-hide' });\n\t};\n\n\tPANOLENS.Viewer.prototype.updateVideoPlayButton = function (paused) {\n\n\t\tif (this.widget && this.widget.videoElement && this.widget.videoElement.controlButton) {\n\n\t\t\tthis.widget.videoElement.controlButton.update(paused);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.addPanoramaEventListener = function (pano) {\n\n\t\tvar scope = this;\n\n\t\tpano.addEventListener('enter-fade-start', this.setCameraControl.bind(this));\n\n\t\tif (pano instanceof PANOLENS.VideoPanorama) {\n\n\t\t\tpano.addEventListener('enter-fade-start', this.showVideoWidget.bind(this));\n\t\t\tpano.addEventListener('leave', function () {\n\n\t\t\t\tif (!(this.panorama instanceof PANOLENS.VideoPanorama)) {\n\n\t\t\t\t\tthis.hideVideoWidget.call(this);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.setCameraControl = function () {\n\n\t\tthis.OrbitControls.target.copy(this.panorama.position);\n\t};\n\n\tPANOLENS.Viewer.prototype.getControl = function () {\n\n\t\treturn this.control;\n\t}, PANOLENS.Viewer.prototype.getScene = function () {\n\n\t\treturn this.scene;\n\t};\n\n\tPANOLENS.Viewer.prototype.getCamera = function () {\n\n\t\treturn this.camera;\n\t}, PANOLENS.Viewer.prototype.getRenderer = function () {\n\n\t\treturn this.renderer;\n\t};\n\n\tPANOLENS.Viewer.prototype.getContainer = function () {\n\n\t\treturn this.container;\n\t};\n\n\tPANOLENS.Viewer.prototype.getControlName = function () {\n\n\t\treturn this.control.name;\n\t};\n\n\tPANOLENS.Viewer.prototype.getNextControlName = function () {\n\n\t\treturn this.controls[this.getNextControlIndex()].name;\n\t};\n\n\tPANOLENS.Viewer.prototype.getNextControlIndex = function () {\n\n\t\tvar controls, control, nextIndex;\n\n\t\tcontrols = this.controls;\n\t\tcontrol = this.control;\n\t\tnextIndex = controls.indexOf(control) + 1;\n\n\t\treturn nextIndex >= controls.length ? 0 : nextIndex;\n\t};\n\n\tPANOLENS.Viewer.prototype.setCameraFov = function (fov) {\n\n\t\tthis.camera.fov = fov;\n\t\tthis.camera.updateProjectionMatrix();\n\t};\n\n\tPANOLENS.Viewer.prototype.enableControl = function (index) {\n\n\t\tindex = index >= 0 && index < this.controls.length ? index : 0;\n\n\t\tthis.control.enabled = false;\n\n\t\tthis.control = this.controls[index];\n\n\t\tthis.control.enabled = true;\n\n\t\tswitch (index) {\n\n\t\t\tcase PANOLENS.Controls.ORBIT:\n\n\t\t\t\tthis.camera.position.copy(this.panorama.position);\n\t\t\t\tthis.camera.position.z += 1;\n\n\t\t\t\tbreak;\n\n\t\t\tcase PANOLENS.Controls.DEVICEORIENTATION:\n\n\t\t\t\tthis.camera.position.copy(this.panorama.position);\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.control.update();\n\n\t\tthis.activateWidgetItem(index, undefined);\n\t};\n\n\tPANOLENS.Viewer.prototype.disableControl = function () {\n\n\t\tthis.control.enabled = false;\n\t};\n\n\tPANOLENS.Viewer.prototype.toggleNextControl = function () {\n\n\t\tthis.enableControl(this.getNextControlIndex());\n\t};\n\n\tPANOLENS.Viewer.prototype.getScreenVector = function (worldVector) {\n\n\t\tvar vector = worldVector.clone();\n\t\tvar widthHalf = this.container.clientWidth / 2;\n\t\tvar heightHalf = this.container.clientHeight / 2;\n\n\t\tvector.project(this.camera);\n\n\t\tvector.x = vector.x * widthHalf + widthHalf;\n\t\tvector.y = -(vector.y * heightHalf) + heightHalf;\n\t\tvector.z = 0;\n\n\t\treturn vector;\n\t};\n\n\tPANOLENS.Viewer.prototype.checkSpriteInViewport = function (sprite) {\n\n\t\tthis.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld);\n\t\tthis.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse);\n\t\tthis.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix);\n\n\t\treturn sprite.visible && this.cameraFrustum.intersectsSprite(sprite);\n\t};\n\n\tPANOLENS.Viewer.prototype.reverseDraggingDirection = function () {\n\n\t\tthis.OrbitControls.rotateSpeed *= -1;\n\t\tthis.OrbitControls.momentumScalingFactor *= -1;\n\t};\n\n\tPANOLENS.Viewer.prototype.addReticle = function () {\n\n\t\tthis.reticle = new PANOLENS.Reticle(0xffffff, this.options.autoReticleSelect, PANOLENS.DataImage.ReticleIdle, PANOLENS.DataImage.ReticleDwell, this.options.dwellTime, 45);\n\t\tthis.reticle.position.z = -10;\n\t\tthis.camera.add(this.reticle);\n\t\tthis.scene.add(this.camera);\n\t};\n\n\tPANOLENS.Viewer.prototype.tweenControlCenter = function (vector, duration, easing) {\n\n\t\tif (this.control !== this.OrbitControls) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (vector instanceof Array) {\n\n\t\t\tduration = vector[1];\n\t\t\teasing = vector[2];\n\t\t\tvector = vector[0];\n\t\t}\n\n\t\tduration = duration !== undefined ? duration : 1000;\n\t\teasing = easing || TWEEN.Easing.Exponential.Out;\n\n\t\tvar scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv;\n\n\t\tscope = this;\n\n\t\tchv = this.camera.getWorldDirection();\n\t\tcvv = chv.clone();\n\n\t\tvptc = this.panorama.getWorldPosition().sub(this.camera.getWorldPosition());\n\n\t\thv = vector.clone();\n\n\t\thv.x *= -1;\n\t\thv.add(vptc).normalize();\n\t\tvv = hv.clone();\n\n\t\tchv.y = 0;\n\t\thv.y = 0;\n\n\t\tha = Math.atan2(hv.z, hv.x) - Math.atan2(chv.z, chv.x);\n\t\tha = ha > Math.PI ? ha - 2 * Math.PI : ha;\n\t\tha = ha < -Math.PI ? ha + 2 * Math.PI : ha;\n\t\tva = Math.abs(cvv.angleTo(chv) + (cvv.y * vv.y <= 0 ? vv.angleTo(hv) : -vv.angleTo(hv)));\n\t\tva *= vv.y < cvv.y ? 1 : -1;\n\n\t\tov = { left: 0, up: 0 };\n\t\tnv = { left: 0, up: 0 };\n\n\t\tthis.tweenLeftAnimation.stop();\n\t\tthis.tweenUpAnimation.stop();\n\n\t\tthis.tweenLeftAnimation = new TWEEN.Tween(ov).to({ left: ha }, duration).easing(easing).onUpdate(function () {\n\t\t\tscope.control.rotateLeft(this.left - nv.left);\n\t\t\tnv.left = this.left;\n\t\t}).start();\n\n\t\tthis.tweenUpAnimation = new TWEEN.Tween(ov).to({ up: va }, duration).easing(easing).onUpdate(function () {\n\t\t\tscope.control.rotateUp(this.up - nv.up);\n\t\t\tnv.up = this.up;\n\t\t}).start();\n\t};\n\n\tPANOLENS.Viewer.prototype.tweenControlCenterByObject = function (object, duration, easing) {\n\n\t\tvar isUnderScalePlaceHolder = false;\n\n\t\tobject.traverseAncestors(function (ancestor) {\n\n\t\t\tif (ancestor.scalePlaceHolder) {\n\n\t\t\t\tisUnderScalePlaceHolder = true;\n\t\t\t}\n\t\t});\n\n\t\tif (isUnderScalePlaceHolder) {\n\n\t\t\tvar invertXVector = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](-1, 1, 1);\n\n\t\t\tthis.tweenControlCenter(object.getWorldPosition().multiply(invertXVector), duration, easing);\n\t\t} else {\n\n\t\t\tthis.tweenControlCenter(object.getWorldPosition(), duration, easing);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.onWindowResize = function (windowWidth, windowHeight) {\n\n\t\tvar width, height, expand;\n\n\t\texpand = this.container.classList.contains('panolens-container') || this.container.isFullscreen;\n\n\t\tif (windowWidth !== undefined && windowHeight !== undefined) {\n\n\t\t\twidth = windowWidth;\n\t\t\theight = windowHeight;\n\t\t\tthis.container._width = windowWidth;\n\t\t\tthis.container._height = windowHeight;\n\t\t} else {\n\n\t\t\twidth = expand ? Math.max(document.documentElement.clientWidth, window.innerWidth || 0) : this.container.clientWidth;\n\t\t\theight = expand ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : this.container.clientHeight;\n\t\t\tthis.container._width = width;\n\t\t\tthis.container._height = height;\n\t\t}\n\n\t\tthis.camera.aspect = width / height;\n\t\tthis.camera.updateProjectionMatrix();\n\n\t\tthis.renderer.setSize(width, height);\n\n\t\tif (this.options.enableReticle || this.tempEnableReticle) {\n\n\t\t\tthis.updateReticleEvent();\n\t\t}\n\n\t\tthis.dispatchEvent({ type: 'window-resize', width: width, height: height });\n\t\tthis.scene.traverse(function (object) {\n\n\t\t\tif (object.dispatchEvent) {\n\n\t\t\t\tobject.dispatchEvent({ type: 'window-resize', width: width, height: height });\n\t\t\t}\n\t\t});\n\t};\n\n\tPANOLENS.Viewer.prototype.addOutputElement = function () {\n\n\t\tvar element = document.createElement('div');\n\t\telement.style.position = 'absolute';\n\t\telement.style.right = '10px';\n\t\telement.style.top = '10px';\n\t\telement.style.color = \"#fff\";\n\t\tthis.container.appendChild(element);\n\t\tthis.outputDivElement = element;\n\t};\n\n\tPANOLENS.Viewer.prototype.outputInfospotPosition = function () {\n\n\t\tvar intersects, point, panoramaWorldPosition, outputPosition;\n\n\t\tintersects = this.raycaster.intersectObject(this.panorama, true);\n\n\t\tif (intersects.length > 0) {\n\n\t\t\tpoint = intersects[0].point;\n\t\t\tpanoramaWorldPosition = this.panorama.getWorldPosition();\n\n\t\t\toutputPosition = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Vector3\"](-(point.x - panoramaWorldPosition.x).toFixed(2), (point.y - panoramaWorldPosition.y).toFixed(2), (point.z - panoramaWorldPosition.z).toFixed(2));\n\n\t\t\tswitch (this.options.output) {\n\n\t\t\t\tcase 'console':\n\t\t\t\t\tconsole.info(outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'overlay':\n\t\t\t\t\tthis.outputDivElement.textContent = outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.onMouseDown = function (event) {\n\n\t\tevent.preventDefault();\n\n\t\tthis.userMouse.x = event.clientX >= 0 ? event.clientX : event.touches[0].clientX;\n\t\tthis.userMouse.y = event.clientY >= 0 ? event.clientY : event.touches[0].clientY;\n\t\tthis.userMouse.type = 'mousedown';\n\t\tthis.onTap(event);\n\t};\n\n\tPANOLENS.Viewer.prototype.onMouseMove = function (event) {\n\n\t\tevent.preventDefault();\n\t\tthis.userMouse.type = 'mousemove';\n\t\tthis.onTap(event);\n\t};\n\n\tPANOLENS.Viewer.prototype.onMouseUp = function (event) {\n\n\t\tvar onTarget = false,\n\t\t    type;\n\n\t\tthis.userMouse.type = 'mouseup';\n\n\t\ttype = this.userMouse.x >= event.clientX - this.options.clickTolerance && this.userMouse.x <= event.clientX + this.options.clickTolerance && this.userMouse.y >= event.clientY - this.options.clickTolerance && this.userMouse.y <= event.clientY + this.options.clickTolerance || event.changedTouches && this.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance && this.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance && this.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance && this.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance ? 'click' : undefined;\n\n\t\tif (event && event.target && !event.target.classList.contains('panolens-canvas')) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\tif (event.changedTouches && event.changedTouches.length === 1) {\n\n\t\t\tonTarget = this.onTap({ clientX: event.changedTouches[0].clientX, clientY: event.changedTouches[0].clientY }, type);\n\t\t} else {\n\n\t\t\tonTarget = this.onTap(event, type);\n\t\t}\n\n\t\tthis.userMouse.type = 'none';\n\n\t\tif (onTarget) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (type === 'click') {\n\n\t\t\tthis.options.autoHideInfospot && this.panorama && this.panorama.toggleInfospotVisibility();\n\t\t\tthis.options.autoHideControlBar && this.toggleControlBar();\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.onTap = function (event, type) {\n\n\t\tvar intersects, intersect_entity, intersect;\n\n\t\tthis.raycasterPoint.x = (event.clientX - this.container.offsetLeft) / this.container.clientWidth * 2 - 1;\n\t\tthis.raycasterPoint.y = -((event.clientY - this.container.offsetTop) / this.container.clientHeight) * 2 + 1;\n\n\t\tthis.raycaster.setFromCamera(this.raycasterPoint, this.camera);\n\n\t\tif (!this.panorama) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.type !== 'mousedown' && PANOLENS.Utils.checkTouchSupported() || this.OUTPUT_INFOSPOT) {\n\n\t\t\tthis.outputInfospotPosition();\n\t\t}\n\n\t\tintersects = this.raycaster.intersectObjects(this.panorama.children, true);\n\n\t\tintersect_entity = this.getConvertedIntersect(intersects);\n\n\t\tintersect = intersects.length > 0 ? intersects[0].object : intersect;\n\n\t\tif (this.userMouse.type === 'mouseup') {\n\n\t\t\tif (intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent) {\n\n\t\t\t\tthis.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event });\n\t\t\t}\n\n\t\t\tthis.pressEntityObject = undefined;\n\t\t}\n\n\t\tif (this.userMouse.type === 'mouseup') {\n\n\t\t\tif (intersect && this.pressObject === intersect && this.pressObject.dispatchEvent) {\n\n\t\t\t\tthis.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event });\n\t\t\t}\n\n\t\t\tthis.pressObject = undefined;\n\t\t}\n\n\t\tif (type === 'click') {\n\n\t\t\tthis.panorama.dispatchEvent({ type: 'click', intersects: intersects, mouseEvent: event });\n\n\t\t\tif (intersect_entity && intersect_entity.dispatchEvent) {\n\n\t\t\t\tintersect_entity.dispatchEvent({ type: 'click-entity', mouseEvent: event });\n\t\t\t}\n\n\t\t\tif (intersect && intersect.dispatchEvent) {\n\n\t\t\t\tintersect.dispatchEvent({ type: 'click', mouseEvent: event });\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.panorama.dispatchEvent({ type: 'hover', intersects: intersects, mouseEvent: event });\n\n\t\t\tif (this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity || this.hoverObject && intersects.length === 0) {\n\n\t\t\t\tif (this.hoverObject.dispatchEvent) {\n\n\t\t\t\t\tthis.hoverObject.dispatchEvent({ type: 'hoverleave', mouseEvent: event });\n\n\t\t\t\t\tthis.reticle.cancelDwelling();\n\t\t\t\t}\n\n\t\t\t\tthis.hoverObject = undefined;\n\t\t\t}\n\n\t\t\tif (intersect_entity && intersects.length > 0) {\n\n\t\t\t\tif (this.hoverObject !== intersect_entity) {\n\n\t\t\t\t\tthis.hoverObject = intersect_entity;\n\n\t\t\t\t\tif (this.hoverObject.dispatchEvent) {\n\n\t\t\t\t\t\tthis.hoverObject.dispatchEvent({ type: 'hoverenter', mouseEvent: event });\n\n\t\t\t\t\t\tif (this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle) {\n\t\t\t\t\t\t\tthis.reticle.startDwelling(this.onTap.bind(this, event, 'click'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity) {\n\n\t\t\t\t\tthis.pressEntityObject = intersect_entity;\n\n\t\t\t\t\tif (this.pressEntityObject.dispatchEvent) {\n\n\t\t\t\t\t\tthis.pressEntityObject.dispatchEvent({ type: 'pressstart-entity', mouseEvent: event });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.userMouse.type === 'mousedown' && this.pressObject != intersect) {\n\n\t\t\t\t\tthis.pressObject = intersect;\n\n\t\t\t\t\tif (this.pressObject.dispatchEvent) {\n\n\t\t\t\t\t\tthis.pressObject.dispatchEvent({ type: 'pressstart', mouseEvent: event });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.userMouse.type === 'mousemove' || this.options.enableReticle) {\n\n\t\t\t\t\tif (intersect && intersect.dispatchEvent) {\n\n\t\t\t\t\t\tintersect.dispatchEvent({ type: 'hover', mouseEvent: event });\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n\n\t\t\t\t\t\tthis.pressEntityObject.dispatchEvent({ type: 'pressmove-entity', mouseEvent: event });\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.pressObject && this.pressObject.dispatchEvent) {\n\n\t\t\t\t\t\tthis.pressObject.dispatchEvent({ type: 'pressmove', mouseEvent: event });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent) {\n\n\t\t\t\tthis.pressEntityObject.dispatchEvent({ type: 'pressstop-entity', mouseEvent: event });\n\n\t\t\t\tthis.pressEntityObject = undefined;\n\t\t\t}\n\n\t\t\tif (!intersect && this.pressObject && this.pressObject.dispatchEvent) {\n\n\t\t\t\tthis.pressObject.dispatchEvent({ type: 'pressstop', mouseEvent: event });\n\n\t\t\t\tthis.pressObject = undefined;\n\t\t\t}\n\t\t}\n\n\t\tif (intersect && intersect instanceof PANOLENS.Infospot) {\n\n\t\t\tthis.infospot = intersect;\n\n\t\t\tif (type === 'click') {\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if (this.infospot) {\n\n\t\t\tthis.hideInfospot();\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.getConvertedIntersect = function (intersects) {\n\n\t\tvar intersect;\n\n\t\tfor (var i = 0; i < intersects.length; i++) {\n\n\t\t\tif (intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough) {\n\n\t\t\t\tif (intersects[i].object.entity && intersects[i].object.entity.passThrough) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if (intersects[i].object.entity && !intersects[i].object.entity.passThrough) {\n\t\t\t\t\tintersect = intersects[i].object.entity;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tintersect = intersects[i].object;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn intersect;\n\t};\n\n\tPANOLENS.Viewer.prototype.hideInfospot = function (intersects) {\n\n\t\tif (this.infospot) {\n\n\t\t\tthis.infospot.onHoverEnd();\n\n\t\t\tthis.infospot = undefined;\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.toggleControlBar = function () {\n\t\tthis.widget && this.widget.dispatchEvent({ type: 'control-bar-toggle' });\n\t};\n\n\tPANOLENS.Viewer.prototype.onKeyDown = function (event) {\n\n\t\tif (this.options.output && this.options.output !== 'none' && event.key === 'Control') {\n\n\t\t\tthis.OUTPUT_INFOSPOT = true;\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.onKeyUp = function (event) {\n\n\t\tthis.OUTPUT_INFOSPOT = false;\n\t};\n\n\tPANOLENS.Viewer.prototype.update = function () {\n\n\t\tTWEEN.update();\n\n\t\tthis.updateCallbacks.forEach(function (callback) {\n\t\t\tcallback();\n\t\t});\n\n\t\tthis.control.update();\n\n\t\tthis.scene.traverse(function (child) {\n\t\t\tif (child instanceof PANOLENS.Infospot && child.element && (this.hoverObject === child || child.element.style.display !== 'none' || child.element.left && child.element.left.style.display !== 'none' || child.element.right && child.element.right.style.display !== 'none')) {\n\t\t\t\tif (this.checkSpriteInViewport(child)) {\n\t\t\t\t\tvar vector = this.getScreenVector(child.getWorldPosition());\n\t\t\t\t\tchild.translateElement(vector.x, vector.y);\n\t\t\t\t} else {\n\t\t\t\t\tchild.onDismiss();\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this));\n\t};\n\n\tPANOLENS.Viewer.prototype.render = function () {\n\n\t\tif (this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO) {\n\n\t\t\tthis.effect.render(this.scene, this.camera);\n\t\t} else {\n\n\t\t\tthis.renderer.render(this.scene, this.camera);\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.animate = function () {\n\n\t\tthis.requestAnimationId = window.requestAnimationFrame(this.animate.bind(this));\n\n\t\tthis.onChange();\n\t};\n\n\tPANOLENS.Viewer.prototype.onChange = function () {\n\n\t\tthis.update();\n\t\tthis.render();\n\t};\n\n\tPANOLENS.Viewer.prototype.registerMouseAndTouchEvents = function () {\n\n\t\tthis.container.addEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false);\n\t\tthis.container.addEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false);\n\t\tthis.container.addEventListener('mouseup', this.HANDLER_MOUSE_UP, false);\n\t\tthis.container.addEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false);\n\t\tthis.container.addEventListener('touchend', this.HANDLER_MOUSE_UP, false);\n\t};\n\n\tPANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents = function () {\n\n\t\tthis.container.removeEventListener('mousedown', this.HANDLER_MOUSE_DOWN, false);\n\t\tthis.container.removeEventListener('mousemove', this.HANDLER_MOUSE_MOVE, false);\n\t\tthis.container.removeEventListener('mouseup', this.HANDLER_MOUSE_UP, false);\n\t\tthis.container.removeEventListener('touchstart', this.HANDLER_MOUSE_DOWN, false);\n\t\tthis.container.removeEventListener('touchend', this.HANDLER_MOUSE_UP, false);\n\t};\n\n\tPANOLENS.Viewer.prototype.registerReticleEvent = function () {\n\n\t\tthis.addUpdateCallback(this.HANDLER_TAP);\n\t};\n\n\tPANOLENS.Viewer.prototype.unregisterReticleEvent = function () {\n\n\t\tthis.removeUpdateCallback(this.HANDLER_TAP);\n\t};\n\n\tPANOLENS.Viewer.prototype.updateReticleEvent = function () {\n\n\t\tvar centerX, centerY;\n\n\t\tcenterX = this.container.clientWidth / 2 + this.container.offsetLeft;\n\t\tcenterY = this.container.clientHeight / 2;\n\n\t\tthis.removeUpdateCallback(this.HANDLER_TAP);\n\t\tthis.HANDLER_TAP = this.onTap.bind(this, { clientX: centerX, clientY: centerY });\n\t\tthis.addUpdateCallback(this.HANDLER_TAP);\n\t};\n\n\tPANOLENS.Viewer.prototype.registerEventListeners = function () {\n\t\twindow.addEventListener('resize', this.HANDLER_WINDOW_RESIZE, true);\n\n\t\twindow.addEventListener('keydown', this.HANDLER_KEY_DOWN, true);\n\t\twindow.addEventListener('keyup', this.HANDLER_KEY_UP, true);\n\t};\n\n\tPANOLENS.Viewer.prototype.unregisterEventListeners = function () {\n\t\twindow.removeEventListener('resize', this.HANDLER_WINDOW_RESIZE, true);\n\n\t\twindow.removeEventListener('keydown', this.HANDLER_KEY_DOWN, true);\n\t\twindow.removeEventListener('keyup', this.HANDLER_KEY_UP, true);\n\t};\n\n\tPANOLENS.Viewer.prototype.dispose = function () {\n\t\tthis.unregisterEventListeners();\n\n\t\tfunction recursiveDispose(object) {\n\n\t\t\tfor (var i = object.children.length - 1; i >= 0; i--) {\n\n\t\t\t\trecursiveDispose(object.children[i]);\n\t\t\t\tobject.remove(object.children[i]);\n\t\t\t}\n\n\t\t\tif (object instanceof PANOLENS.Infospot) {\n\n\t\t\t\tobject.dispose();\n\t\t\t}\n\n\t\t\tobject.geometry && object.geometry.dispose();\n\t\t\tobject.material && object.material.dispose();\n\t\t}\n\n\t\trecursiveDispose(this.scene);\n\n\t\tif (this.widget) {\n\n\t\t\tthis.widget.dispose();\n\t\t\tthis.widget = null;\n\t\t}\n\n\t\tif (__WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"] && __WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].enabled) {\n\n\t\t\t__WEBPACK_IMPORTED_MODULE_8_three__[\"Cache\"].clear();\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.destory = function () {\n\n\t\tthis.dispose();\n\t\tthis.render();\n\t\twindow.cancelAnimationFrame(this.requestAnimationId);\n\t};\n\n\tPANOLENS.Viewer.prototype.onPanoramaDispose = function (panorama) {\n\n\t\tif (panorama instanceof PANOLENS.VideoPanorama) {\n\n\t\t\tthis.hideVideoWidget();\n\t\t}\n\n\t\tif (panorama === this.panorama) {\n\n\t\t\tthis.panorama = null;\n\t\t}\n\t};\n\n\tPANOLENS.Viewer.prototype.loadAsyncRequest = function (url, callback) {\n\n\t\tvar request = new XMLHttpRequest();\n\t\trequest.onloadend = function (event) {\n\t\t\tcallback && callback(event);\n\t\t};\n\t\trequest.open(\"GET\", url, true);\n\t\trequest.send(null);\n\t};\n\n\tPANOLENS.Viewer.prototype.addViewIndicator = function () {\n\n\t\tvar scope = this;\n\n\t\tfunction loadViewIndicator(asyncEvent) {\n\n\t\t\tif (asyncEvent.loaded === 0) return;\n\n\t\t\tvar viewIndicatorDiv = asyncEvent.target.responseXML.documentElement;\n\t\t\tviewIndicatorDiv.style.width = scope.viewIndicatorSize + \"px\";\n\t\t\tviewIndicatorDiv.style.height = scope.viewIndicatorSize + \"px\";\n\t\t\tviewIndicatorDiv.style.position = \"absolute\";\n\t\t\tviewIndicatorDiv.style.top = \"10px\";\n\t\t\tviewIndicatorDiv.style.left = \"10px\";\n\t\t\tviewIndicatorDiv.style.opacity = \"0.5\";\n\t\t\tviewIndicatorDiv.style.cursor = \"pointer\";\n\t\t\tviewIndicatorDiv.id = \"panolens-view-indicator-container\";\n\n\t\t\tscope.container.appendChild(viewIndicatorDiv);\n\n\t\t\tvar indicator = viewIndicatorDiv.querySelector(\"#indicator\");\n\t\t\tvar setIndicatorD = function setIndicatorD() {\n\n\t\t\t\tscope.radius = scope.viewIndicatorSize * 0.225;\n\t\t\t\tscope.currentPanoAngle = scope.camera.rotation.y - __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(90);\n\t\t\t\tscope.fovAngle = __WEBPACK_IMPORTED_MODULE_8_three__[\"Math\"].degToRad(scope.camera.fov);\n\t\t\t\tscope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2;\n\t\t\t\tscope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2;\n\t\t\t\tscope.leftX = scope.radius * Math.cos(scope.leftAngle);\n\t\t\t\tscope.leftY = scope.radius * Math.sin(scope.leftAngle);\n\t\t\t\tscope.rightX = scope.radius * Math.cos(scope.rightAngle);\n\t\t\t\tscope.rightY = scope.radius * Math.sin(scope.rightAngle);\n\t\t\t\tscope.indicatorD = \"M \" + scope.leftX + \" \" + scope.leftY + \" A \" + scope.radius + \" \" + scope.radius + \" 0 0 1 \" + scope.rightX + \" \" + scope.rightY;\n\n\t\t\t\tif (scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius) {\n\n\t\t\t\t\tindicator.setAttribute(\"d\", scope.indicatorD);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tscope.addUpdateCallback(setIndicatorD);\n\n\t\t\tvar indicatorOnMouseEnter = function indicatorOnMouseEnter() {\n\n\t\t\t\tthis.style.opacity = \"1\";\n\t\t\t};\n\n\t\t\tvar indicatorOnMouseLeave = function indicatorOnMouseLeave() {\n\n\t\t\t\tthis.style.opacity = \"0.5\";\n\t\t\t};\n\n\t\t\tviewIndicatorDiv.addEventListener(\"mouseenter\", indicatorOnMouseEnter);\n\t\t\tviewIndicatorDiv.addEventListener(\"mouseleave\", indicatorOnMouseLeave);\n\t\t}\n\n\t\tthis.loadAsyncRequest(PANOLENS.DataImage.ViewIndicator, loadViewIndicator);\n\t};\n\n\tPANOLENS.Viewer.prototype.appendControlItem = function (option) {\n\n\t\tvar item = this.widget.createCustomItem(option);\n\n\t\tif (option.group === 'video') {\n\n\t\t\tthis.widget.videoElement.appendChild(item);\n\t\t} else {\n\n\t\t\tthis.widget.barElement.appendChild(item);\n\t\t}\n\n\t\treturn item;\n\t};\n})();\n;(function e(t, n, r) {\n\tfunction s(o, u) {\n\t\tif (!n[o]) {\n\t\t\tif (!t[o]) {\n\t\t\t\tvar a = typeof require == \"function\" && require;if (!u && a) return require(o, !0);if (i) return i(o, !0);var f = new Error(\"Cannot find module '\" + o + \"'\");throw f.code = \"MODULE_NOT_FOUND\", f;\n\t\t\t}var l = n[o] = { exports: {} };t[o][0].call(l.exports, function (e) {\n\t\t\t\tvar n = t[o][1][e];return s(n ? n : e);\n\t\t\t}, l, l.exports, e, t, n, r);\n\t\t}return n[o].exports;\n\t}var i = typeof require == \"function\" && require;for (var o = 0; o < r.length; o++) {\n\t\ts(r[o]);\n\t}return s;\n})({ 1: [function (require, module, exports) {\n\t\tvar createLayout = require('layout-bmfont-text');\n\t\tvar inherits = require('inherits');\n\t\tvar createIndices = require('quad-indices');\n\t\tvar buffer = require('three-buffer-vertex-data');\n\t\tvar assign = require('object-assign');\n\n\t\tvar vertices = require('./lib/vertices');\n\t\tvar utils = require('./lib/utils');\n\n\t\tvar Base = __WEBPACK_IMPORTED_MODULE_8_three__[\"BufferGeometry\"];\n\n\t\tmodule.exports = function createTextGeometry(opt) {\n\t\t\treturn new TextGeometry(opt);\n\t\t};\n\n\t\tfunction TextGeometry(opt) {\n\t\t\tBase.call(this);\n\n\t\t\tif (typeof opt === 'string') {\n\t\t\t\topt = { text: opt };\n\t\t\t}\n\n\t\t\tthis._opt = assign({}, opt);\n\n\t\t\tif (opt) this.update(opt);\n\t\t}\n\n\t\tinherits(TextGeometry, Base);\n\n\t\tTextGeometry.prototype.update = function (opt) {\n\t\t\tif (typeof opt === 'string') {\n\t\t\t\topt = { text: opt };\n\t\t\t}\n\n\t\t\topt = assign({}, this._opt, opt);\n\n\t\t\tif (!opt.font) {\n\t\t\t\tthrow new TypeError('must specify a { font } in options');\n\t\t\t}\n\n\t\t\tthis.layout = createLayout(opt);\n\n\t\t\tvar flipY = opt.flipY !== false;\n\n\t\t\tvar font = opt.font;\n\n\t\t\tvar texWidth = font.common.scaleW;\n\t\t\tvar texHeight = font.common.scaleH;\n\n\t\t\tvar glyphs = this.layout.glyphs.filter(function (glyph) {\n\t\t\t\tvar bitmap = glyph.data;\n\t\t\t\treturn bitmap.width * bitmap.height > 0;\n\t\t\t});\n\n\t\t\tthis.visibleGlyphs = glyphs;\n\n\t\t\tvar positions = vertices.positions(glyphs);\n\t\t\tvar uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY);\n\t\t\tvar indices = createIndices({\n\t\t\t\tclockwise: true,\n\t\t\t\ttype: 'uint16',\n\t\t\t\tcount: glyphs.length\n\t\t\t});\n\n\t\t\tbuffer.index(this, indices, 1, 'uint16');\n\t\t\tbuffer.attr(this, 'position', positions, 2);\n\t\t\tbuffer.attr(this, 'uv', uvs, 2);\n\n\t\t\tif (!opt.multipage && 'page' in this.attributes) {\n\t\t\t\tthis.removeAttribute('page');\n\t\t\t} else if (opt.multipage) {\n\t\t\t\tvar pages = vertices.pages(glyphs);\n\n\t\t\t\tbuffer.attr(this, 'page', pages, 1);\n\t\t\t}\n\t\t};\n\n\t\tTextGeometry.prototype.computeBoundingSphere = function () {\n\t\t\tif (this.boundingSphere === null) {\n\t\t\t\tthis.boundingSphere = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Sphere\"]();\n\t\t\t}\n\n\t\t\tvar positions = this.attributes.position.array;\n\t\t\tvar itemSize = this.attributes.position.itemSize;\n\t\t\tif (!positions || !itemSize || positions.length < 2) {\n\t\t\t\tthis.boundingSphere.radius = 0;\n\t\t\t\tthis.boundingSphere.center.set(0, 0, 0);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tutils.computeSphere(positions, this.boundingSphere);\n\t\t\tif (isNaN(this.boundingSphere.radius)) {\n\t\t\t\tconsole.error('THREE.BufferGeometry.computeBoundingSphere(): ' + 'Computed radius is NaN. The ' + '\"position\" attribute is likely to have NaN values.');\n\t\t\t}\n\t\t};\n\n\t\tTextGeometry.prototype.computeBoundingBox = function () {\n\t\t\tif (this.boundingBox === null) {\n\t\t\t\tthis.boundingBox = new __WEBPACK_IMPORTED_MODULE_8_three__[\"Box3\"]();\n\t\t\t}\n\n\t\t\tvar bbox = this.boundingBox;\n\t\t\tvar positions = this.attributes.position.array;\n\t\t\tvar itemSize = this.attributes.position.itemSize;\n\t\t\tif (!positions || !itemSize || positions.length < 2) {\n\t\t\t\tbbox.makeEmpty();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tutils.computeBox(positions, bbox);\n\t\t};\n\t}, { \"./lib/utils\": 2, \"./lib/vertices\": 3, \"inherits\": 4, \"layout-bmfont-text\": 5, \"object-assign\": 26, \"quad-indices\": 27, \"three-buffer-vertex-data\": 31 }], 2: [function (require, module, exports) {\n\t\tvar itemSize = 2;\n\t\tvar box = { min: [0, 0], max: [0, 0] };\n\n\t\tfunction bounds(positions) {\n\t\t\tvar count = positions.length / itemSize;\n\t\t\tbox.min[0] = positions[0];\n\t\t\tbox.min[1] = positions[1];\n\t\t\tbox.max[0] = positions[0];\n\t\t\tbox.max[1] = positions[1];\n\n\t\t\tfor (var i = 0; i < count; i++) {\n\t\t\t\tvar x = positions[i * itemSize + 0];\n\t\t\t\tvar y = positions[i * itemSize + 1];\n\t\t\t\tbox.min[0] = Math.min(x, box.min[0]);\n\t\t\t\tbox.min[1] = Math.min(y, box.min[1]);\n\t\t\t\tbox.max[0] = Math.max(x, box.max[0]);\n\t\t\t\tbox.max[1] = Math.max(y, box.max[1]);\n\t\t\t}\n\t\t}\n\n\t\tmodule.exports.computeBox = function (positions, output) {\n\t\t\tbounds(positions);\n\t\t\toutput.min.set(box.min[0], box.min[1], 0);\n\t\t\toutput.max.set(box.max[0], box.max[1], 0);\n\t\t};\n\n\t\tmodule.exports.computeSphere = function (positions, output) {\n\t\t\tbounds(positions);\n\t\t\tvar minX = box.min[0];\n\t\t\tvar minY = box.min[1];\n\t\t\tvar maxX = box.max[0];\n\t\t\tvar maxY = box.max[1];\n\t\t\tvar width = maxX - minX;\n\t\t\tvar height = maxY - minY;\n\t\t\tvar length = Math.sqrt(width * width + height * height);\n\t\t\toutput.center.set(minX + width / 2, minY + height / 2, 0);\n\t\t\toutput.radius = length / 2;\n\t\t};\n\t}, {}], 3: [function (require, module, exports) {\n\t\tmodule.exports.pages = function pages(glyphs) {\n\t\t\tvar pages = new Float32Array(glyphs.length * 4 * 1);\n\t\t\tvar i = 0;\n\t\t\tglyphs.forEach(function (glyph) {\n\t\t\t\tvar id = glyph.data.page || 0;\n\t\t\t\tpages[i++] = id;\n\t\t\t\tpages[i++] = id;\n\t\t\t\tpages[i++] = id;\n\t\t\t\tpages[i++] = id;\n\t\t\t});\n\t\t\treturn pages;\n\t\t};\n\n\t\tmodule.exports.uvs = function uvs(glyphs, texWidth, texHeight, flipY) {\n\t\t\tvar uvs = new Float32Array(glyphs.length * 4 * 2);\n\t\t\tvar i = 0;\n\t\t\tglyphs.forEach(function (glyph) {\n\t\t\t\tvar bitmap = glyph.data;\n\t\t\t\tvar bw = bitmap.x + bitmap.width;\n\t\t\t\tvar bh = bitmap.y + bitmap.height;\n\n\t\t\t\tvar u0 = bitmap.x / texWidth;\n\t\t\t\tvar v1 = bitmap.y / texHeight;\n\t\t\t\tvar u1 = bw / texWidth;\n\t\t\t\tvar v0 = bh / texHeight;\n\n\t\t\t\tif (flipY) {\n\t\t\t\t\tv1 = (texHeight - bitmap.y) / texHeight;\n\t\t\t\t\tv0 = (texHeight - bh) / texHeight;\n\t\t\t\t}\n\n\t\t\t\tuvs[i++] = u0;\n\t\t\t\tuvs[i++] = v1;\n\n\t\t\t\tuvs[i++] = u0;\n\t\t\t\tuvs[i++] = v0;\n\n\t\t\t\tuvs[i++] = u1;\n\t\t\t\tuvs[i++] = v0;\n\n\t\t\t\tuvs[i++] = u1;\n\t\t\t\tuvs[i++] = v1;\n\t\t\t});\n\t\t\treturn uvs;\n\t\t};\n\n\t\tmodule.exports.positions = function positions(glyphs) {\n\t\t\tvar positions = new Float32Array(glyphs.length * 4 * 2);\n\t\t\tvar i = 0;\n\t\t\tglyphs.forEach(function (glyph) {\n\t\t\t\tvar bitmap = glyph.data;\n\n\t\t\t\tvar x = glyph.position[0] + bitmap.xoffset;\n\t\t\t\tvar y = glyph.position[1] + bitmap.yoffset;\n\n\t\t\t\tvar w = bitmap.width;\n\t\t\t\tvar h = bitmap.height;\n\n\t\t\t\tpositions[i++] = x;\n\t\t\t\tpositions[i++] = y;\n\n\t\t\t\tpositions[i++] = x;\n\t\t\t\tpositions[i++] = y + h;\n\n\t\t\t\tpositions[i++] = x + w;\n\t\t\t\tpositions[i++] = y + h;\n\n\t\t\t\tpositions[i++] = x + w;\n\t\t\t\tpositions[i++] = y;\n\t\t\t});\n\t\t\treturn positions;\n\t\t};\n\t}, {}], 4: [function (require, module, exports) {\n\t\tif (typeof __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default.a === 'function') {\n\t\t\tmodule.exports = function inherits(ctor, superCtor) {\n\t\t\t\tctor.super_ = superCtor;\n\t\t\t\tctor.prototype = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_create___default()(superCtor.prototype, {\n\t\t\t\t\tconstructor: {\n\t\t\t\t\t\tvalue: ctor,\n\t\t\t\t\t\tenumerable: false,\n\t\t\t\t\t\twritable: true,\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t} else {\n\t\t\tmodule.exports = function inherits(ctor, superCtor) {\n\t\t\t\tctor.super_ = superCtor;\n\t\t\t\tvar TempCtor = function TempCtor() {};\n\t\t\t\tTempCtor.prototype = superCtor.prototype;\n\t\t\t\tctor.prototype = new TempCtor();\n\t\t\t\tctor.prototype.constructor = ctor;\n\t\t\t};\n\t\t}\n\t}, {}], 5: [function (require, module, exports) {\n\t\tvar wordWrap = require('word-wrapper');\n\t\tvar xtend = require('xtend');\n\t\tvar findChar = require('indexof-property')('id');\n\t\tvar number = require('as-number');\n\n\t\tvar X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z'];\n\t\tvar M_WIDTHS = ['m', 'w'];\n\t\tvar CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\n\n\t\tvar TAB_ID = '\\t'.charCodeAt(0);\n\t\tvar SPACE_ID = ' '.charCodeAt(0);\n\t\tvar ALIGN_LEFT = 0,\n\t\t    ALIGN_CENTER = 1,\n\t\t    ALIGN_RIGHT = 2;\n\n\t\tmodule.exports = function createLayout(opt) {\n\t\t\treturn new TextLayout(opt);\n\t\t};\n\n\t\tfunction TextLayout(opt) {\n\t\t\tthis.glyphs = [];\n\t\t\tthis._measure = this.computeMetrics.bind(this);\n\t\t\tthis.update(opt);\n\t\t}\n\n\t\tTextLayout.prototype.update = function (opt) {\n\t\t\topt = xtend({\n\t\t\t\tmeasure: this._measure\n\t\t\t}, opt);\n\t\t\tthis._opt = opt;\n\t\t\tthis._opt.tabSize = number(this._opt.tabSize, 4);\n\n\t\t\tif (!opt.font) throw new Error('must provide a valid bitmap font');\n\n\t\t\tvar glyphs = this.glyphs;\n\t\t\tvar text = opt.text || '';\n\t\t\tvar font = opt.font;\n\t\t\tthis._setupSpaceGlyphs(font);\n\n\t\t\tvar lines = wordWrap.lines(text, opt);\n\t\t\tvar minWidth = opt.width || 0;\n\n\t\t\tglyphs.length = 0;\n\n\t\t\tvar maxLineWidth = lines.reduce(function (prev, line) {\n\t\t\t\treturn Math.max(prev, line.width, minWidth);\n\t\t\t}, 0);\n\n\t\t\tvar x = 0;\n\t\t\tvar y = 0;\n\t\t\tvar lineHeight = number(opt.lineHeight, font.common.lineHeight);\n\t\t\tvar baseline = font.common.base;\n\t\t\tvar descender = lineHeight - baseline;\n\t\t\tvar letterSpacing = opt.letterSpacing || 0;\n\t\t\tvar height = lineHeight * lines.length - descender;\n\t\t\tvar align = getAlignType(this._opt.align);\n\n\t\t\ty -= height;\n\n\t\t\tthis._width = maxLineWidth;\n\t\t\tthis._height = height;\n\t\t\tthis._descender = lineHeight - baseline;\n\t\t\tthis._baseline = baseline;\n\t\t\tthis._xHeight = getXHeight(font);\n\t\t\tthis._capHeight = getCapHeight(font);\n\t\t\tthis._lineHeight = lineHeight;\n\t\t\tthis._ascender = lineHeight - descender - this._xHeight;\n\n\t\t\tvar self = this;\n\t\t\tlines.forEach(function (line, lineIndex) {\n\t\t\t\tvar start = line.start;\n\t\t\t\tvar end = line.end;\n\t\t\t\tvar lineWidth = line.width;\n\t\t\t\tvar lastGlyph;\n\n\t\t\t\tfor (var i = start; i < end; i++) {\n\t\t\t\t\tvar id = text.charCodeAt(i);\n\t\t\t\t\tvar glyph = self.getGlyph(font, id);\n\t\t\t\t\tif (glyph) {\n\t\t\t\t\t\tif (lastGlyph) x += getKerning(font, lastGlyph.id, glyph.id);\n\n\t\t\t\t\t\tvar tx = x;\n\t\t\t\t\t\tif (align === ALIGN_CENTER) tx += (maxLineWidth - lineWidth) / 2;else if (align === ALIGN_RIGHT) tx += maxLineWidth - lineWidth;\n\n\t\t\t\t\t\tglyphs.push({\n\t\t\t\t\t\t\tposition: [tx, y],\n\t\t\t\t\t\t\tdata: glyph,\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tline: lineIndex\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tx += glyph.xadvance + letterSpacing;\n\t\t\t\t\t\tlastGlyph = glyph;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ty += lineHeight;\n\t\t\t\tx = 0;\n\t\t\t});\n\t\t\tthis._linesTotal = lines.length;\n\t\t};\n\n\t\tTextLayout.prototype._setupSpaceGlyphs = function (font) {\n\t\t\tthis._fallbackSpaceGlyph = null;\n\t\t\tthis._fallbackTabGlyph = null;\n\n\t\t\tif (!font.chars || font.chars.length === 0) return;\n\n\t\t\tvar space = getGlyphById(font, SPACE_ID) || getMGlyph(font) || font.chars[0];\n\n\t\t\tvar tabWidth = this._opt.tabSize * space.xadvance;\n\t\t\tthis._fallbackSpaceGlyph = space;\n\t\t\tthis._fallbackTabGlyph = xtend(space, {\n\t\t\t\tx: 0, y: 0, xadvance: tabWidth, id: TAB_ID,\n\t\t\t\txoffset: 0, yoffset: 0, width: 0, height: 0\n\t\t\t});\n\t\t};\n\n\t\tTextLayout.prototype.getGlyph = function (font, id) {\n\t\t\tvar glyph = getGlyphById(font, id);\n\t\t\tif (glyph) return glyph;else if (id === TAB_ID) return this._fallbackTabGlyph;else if (id === SPACE_ID) return this._fallbackSpaceGlyph;\n\t\t\treturn null;\n\t\t};\n\n\t\tTextLayout.prototype.computeMetrics = function (text, start, end, width) {\n\t\t\tvar letterSpacing = this._opt.letterSpacing || 0;\n\t\t\tvar font = this._opt.font;\n\t\t\tvar curPen = 0;\n\t\t\tvar curWidth = 0;\n\t\t\tvar count = 0;\n\t\t\tvar glyph;\n\t\t\tvar lastGlyph;\n\n\t\t\tif (!font.chars || font.chars.length === 0) {\n\t\t\t\treturn {\n\t\t\t\t\tstart: start,\n\t\t\t\t\tend: start,\n\t\t\t\t\twidth: 0\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tend = Math.min(text.length, end);\n\t\t\tfor (var i = start; i < end; i++) {\n\t\t\t\tvar id = text.charCodeAt(i);\n\t\t\t\tvar glyph = this.getGlyph(font, id);\n\n\t\t\t\tif (glyph) {\n\t\t\t\t\tvar xoff = glyph.xoffset;\n\t\t\t\t\tvar kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0;\n\t\t\t\t\tcurPen += kern;\n\n\t\t\t\t\tvar nextPen = curPen + glyph.xadvance + letterSpacing;\n\t\t\t\t\tvar nextWidth = curPen + glyph.width;\n\n\t\t\t\t\tif (nextWidth >= width || nextPen >= width) break;\n\n\t\t\t\t\tcurPen = nextPen;\n\t\t\t\t\tcurWidth = nextWidth;\n\t\t\t\t\tlastGlyph = glyph;\n\t\t\t\t}\n\t\t\t\tcount++;\n\t\t\t}\n\n\t\t\tif (lastGlyph) curWidth += lastGlyph.xoffset;\n\n\t\t\treturn {\n\t\t\t\tstart: start,\n\t\t\t\tend: start + count,\n\t\t\t\twidth: curWidth\n\t\t\t};\n\t\t};['width', 'height', 'descender', 'ascender', 'xHeight', 'baseline', 'capHeight', 'lineHeight'].forEach(addGetter);\n\n\t\tfunction addGetter(name) {\n\t\t\t__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_object_define_property___default()(TextLayout.prototype, name, {\n\t\t\t\tget: wrapper(name),\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\n\t\tfunction wrapper(name) {\n\t\t\treturn new Function(['return function ' + name + '() {', '  return this._' + name, '}'].join('\\n'))();\n\t\t}\n\n\t\tfunction getGlyphById(font, id) {\n\t\t\tif (!font.chars || font.chars.length === 0) return null;\n\n\t\t\tvar glyphIdx = findChar(font.chars, id);\n\t\t\tif (glyphIdx >= 0) return font.chars[glyphIdx];\n\t\t\treturn null;\n\t\t}\n\n\t\tfunction getXHeight(font) {\n\t\t\tfor (var i = 0; i < X_HEIGHTS.length; i++) {\n\t\t\t\tvar id = X_HEIGHTS[i].charCodeAt(0);\n\t\t\t\tvar idx = findChar(font.chars, id);\n\t\t\t\tif (idx >= 0) return font.chars[idx].height;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\n\t\tfunction getMGlyph(font) {\n\t\t\tfor (var i = 0; i < M_WIDTHS.length; i++) {\n\t\t\t\tvar id = M_WIDTHS[i].charCodeAt(0);\n\t\t\t\tvar idx = findChar(font.chars, id);\n\t\t\t\tif (idx >= 0) return font.chars[idx];\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\n\t\tfunction getCapHeight(font) {\n\t\t\tfor (var i = 0; i < CAP_HEIGHTS.length; i++) {\n\t\t\t\tvar id = CAP_HEIGHTS[i].charCodeAt(0);\n\t\t\t\tvar idx = findChar(font.chars, id);\n\t\t\t\tif (idx >= 0) return font.chars[idx].height;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\n\t\tfunction getKerning(font, left, right) {\n\t\t\tif (!font.kernings || font.kernings.length === 0) return 0;\n\n\t\t\tvar table = font.kernings;\n\t\t\tfor (var i = 0; i < table.length; i++) {\n\t\t\t\tvar kern = table[i];\n\t\t\t\tif (kern.first === left && kern.second === right) return kern.amount;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\n\t\tfunction getAlignType(align) {\n\t\t\tif (align === 'center') return ALIGN_CENTER;else if (align === 'right') return ALIGN_RIGHT;\n\t\t\treturn ALIGN_LEFT;\n\t\t}\n\t}, { \"as-number\": 6, \"indexof-property\": 7, \"word-wrapper\": 8, \"xtend\": 9 }], 6: [function (require, module, exports) {\n\t\tmodule.exports = function numtype(num, def) {\n\t\t\treturn typeof num === 'number' ? num : typeof def === 'number' ? def : 0;\n\t\t};\n\t}, {}], 7: [function (require, module, exports) {\n\t\tmodule.exports = function compile(property) {\n\t\t\tif (!property || typeof property !== 'string') throw new Error('must specify property for indexof search');\n\n\t\t\treturn new Function('array', 'value', 'start', ['start = start || 0', 'for (var i=start; i<array.length; i++)', '  if (array[i][\"' + property + '\"] === value)', '      return i', 'return -1'].join('\\n'));\n\t\t};\n\t}, {}], 8: [function (require, module, exports) {\n\t\tvar newline = /\\n/;\n\t\tvar newlineChar = '\\n';\n\t\tvar whitespace = /\\s/;\n\n\t\tmodule.exports = function (text, opt) {\n\t\t\tvar lines = module.exports.lines(text, opt);\n\t\t\treturn lines.map(function (line) {\n\t\t\t\treturn text.substring(line.start, line.end);\n\t\t\t}).join('\\n');\n\t\t};\n\n\t\tmodule.exports.lines = function wordwrap(text, opt) {\n\t\t\topt = opt || {};\n\n\t\t\tif (opt.width === 0 && opt.mode !== 'nowrap') return [];\n\n\t\t\ttext = text || '';\n\t\t\tvar width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE;\n\t\t\tvar start = Math.max(0, opt.start || 0);\n\t\t\tvar end = typeof opt.end === 'number' ? opt.end : text.length;\n\t\t\tvar mode = opt.mode;\n\n\t\t\tvar measure = opt.measure || monospace;\n\t\t\tif (mode === 'pre') return pre(measure, text, start, end, width);else return greedy(measure, text, start, end, width, mode);\n\t\t};\n\n\t\tfunction idxOf(text, chr, start, end) {\n\t\t\tvar idx = text.indexOf(chr, start);\n\t\t\tif (idx === -1 || idx > end) return end;\n\t\t\treturn idx;\n\t\t}\n\n\t\tfunction isWhitespace(chr) {\n\t\t\treturn whitespace.test(chr);\n\t\t}\n\n\t\tfunction pre(measure, text, start, end, width) {\n\t\t\tvar lines = [];\n\t\t\tvar lineStart = start;\n\t\t\tfor (var i = start; i < end && i < text.length; i++) {\n\t\t\t\tvar chr = text.charAt(i);\n\t\t\t\tvar isNewline = newline.test(chr);\n\n\t\t\t\tif (isNewline || i === end - 1) {\n\t\t\t\t\tvar lineEnd = isNewline ? i : i + 1;\n\t\t\t\t\tvar measured = measure(text, lineStart, lineEnd, width);\n\t\t\t\t\tlines.push(measured);\n\n\t\t\t\t\tlineStart = i + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn lines;\n\t\t}\n\n\t\tfunction greedy(measure, text, start, end, width, mode) {\n\t\t\tvar lines = [];\n\n\t\t\tvar testWidth = width;\n\n\t\t\tif (mode === 'nowrap') testWidth = Number.MAX_VALUE;\n\n\t\t\twhile (start < end && start < text.length) {\n\t\t\t\tvar newLine = idxOf(text, newlineChar, start, end);\n\n\t\t\t\twhile (start < newLine) {\n\t\t\t\t\tif (!isWhitespace(text.charAt(start))) break;\n\t\t\t\t\tstart++;\n\t\t\t\t}\n\n\t\t\t\tvar measured = measure(text, start, newLine, testWidth);\n\n\t\t\t\tvar lineEnd = start + (measured.end - measured.start);\n\t\t\t\tvar nextStart = lineEnd + newlineChar.length;\n\n\t\t\t\tif (lineEnd < newLine) {\n\t\t\t\t\twhile (lineEnd > start) {\n\t\t\t\t\t\tif (isWhitespace(text.charAt(lineEnd))) break;\n\t\t\t\t\t\tlineEnd--;\n\t\t\t\t\t}\n\t\t\t\t\tif (lineEnd === start) {\n\t\t\t\t\t\tif (nextStart > start + newlineChar.length) nextStart--;\n\t\t\t\t\t\tlineEnd = nextStart;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnextStart = lineEnd;\n\n\t\t\t\t\t\twhile (lineEnd > start) {\n\t\t\t\t\t\t\tif (!isWhitespace(text.charAt(lineEnd - newlineChar.length))) break;\n\t\t\t\t\t\t\tlineEnd--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (lineEnd >= start) {\n\t\t\t\t\tvar result = measure(text, start, lineEnd, testWidth);\n\t\t\t\t\tlines.push(result);\n\t\t\t\t}\n\t\t\t\tstart = nextStart;\n\t\t\t}\n\t\t\treturn lines;\n\t\t}\n\n\t\tfunction monospace(text, start, end, width) {\n\t\t\tvar glyphs = Math.min(width, end - start);\n\t\t\treturn {\n\t\t\t\tstart: start,\n\t\t\t\tend: start + glyphs\n\t\t\t};\n\t\t}\n\t}, {}], 9: [function (require, module, exports) {\n\t\tmodule.exports = extend;\n\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n\t\tfunction extend() {\n\t\t\tvar target = {};\n\n\t\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\t\tvar source = arguments[i];\n\n\t\t\t\tfor (var key in source) {\n\t\t\t\t\tif (hasOwnProperty.call(source, key)) {\n\t\t\t\t\t\ttarget[key] = source[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn target;\n\t\t}\n\t}, {}], 10: [function (require, module, exports) {\n\t\t(function (Buffer) {\n\t\t\tvar xhr = require('xhr');\n\t\t\tvar noop = function noop() {};\n\t\t\tvar parseASCII = require('parse-bmfont-ascii');\n\t\t\tvar parseXML = require('parse-bmfont-xml');\n\t\t\tvar readBinary = require('parse-bmfont-binary');\n\t\t\tvar isBinaryFormat = require('./lib/is-binary');\n\t\t\tvar xtend = require('xtend');\n\n\t\t\tvar xml2 = function hasXML2() {\n\t\t\t\treturn window.XMLHttpRequest && \"withCredentials\" in new XMLHttpRequest();\n\t\t\t}();\n\n\t\t\tmodule.exports = function (opt, cb) {\n\t\t\t\tcb = typeof cb === 'function' ? cb : noop;\n\n\t\t\t\tif (typeof opt === 'string') opt = { uri: opt };else if (!opt) opt = {};\n\n\t\t\t\tvar expectBinary = opt.binary;\n\t\t\t\tif (expectBinary) opt = getBinaryOpts(opt);\n\n\t\t\t\txhr(opt, function (err, res, body) {\n\t\t\t\t\tif (err) return cb(err);\n\t\t\t\t\tif (!/^2/.test(res.statusCode)) return cb(new Error('http status code: ' + res.statusCode));\n\t\t\t\t\tif (!body) return cb(new Error('no body result'));\n\n\t\t\t\t\tvar binary = false;\n\n\t\t\t\t\tif (isArrayBuffer(body)) {\n\t\t\t\t\t\tvar array = new Uint8Array(body);\n\t\t\t\t\t\tbody = new Buffer(array, 'binary');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isBinaryFormat(body)) {\n\t\t\t\t\t\tbinary = true;\n\n\t\t\t\t\t\tif (typeof body === 'string') body = new Buffer(body, 'binary');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!binary) {\n\t\t\t\t\t\tif (Buffer.isBuffer(body)) body = body.toString(opt.encoding);\n\t\t\t\t\t\tbody = body.trim();\n\t\t\t\t\t}\n\n\t\t\t\t\tvar result;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar type = res.headers['content-type'];\n\t\t\t\t\t\tif (binary) result = readBinary(body);else if (/json/.test(type) || body.charAt(0) === '{') result = JSON.parse(body);else if (/xml/.test(type) || body.charAt(0) === '<') result = parseXML(body);else result = parseASCII(body);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tcb(new Error('error parsing font ' + e.message));\n\t\t\t\t\t\tcb = noop;\n\t\t\t\t\t}\n\t\t\t\t\tcb(null, result);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tfunction isArrayBuffer(arr) {\n\t\t\t\tvar str = Object.prototype.toString;\n\t\t\t\treturn str.call(arr) === '[object ArrayBuffer]';\n\t\t\t}\n\n\t\t\tfunction getBinaryOpts(opt) {\n\t\t\t\tif (xml2) return xtend(opt, { responseType: 'arraybuffer' });\n\n\t\t\t\tif (typeof window.XMLHttpRequest === 'undefined') throw new Error('your browser does not support XHR loading');\n\n\t\t\t\tvar req = new window.XMLHttpRequest();\n\t\t\t\treq.overrideMimeType('text/plain; charset=x-user-defined');\n\t\t\t\treturn xtend({\n\t\t\t\t\txhr: req\n\t\t\t\t}, opt);\n\t\t\t}\n\t\t}).call(this, require(\"buffer\").Buffer);\n\t}, { \"./lib/is-binary\": 11, \"buffer\": 37, \"parse-bmfont-ascii\": 13, \"parse-bmfont-binary\": 14, \"parse-bmfont-xml\": 15, \"xhr\": 18, \"xtend\": 25 }], 11: [function (require, module, exports) {\n\t\t(function (Buffer) {\n\t\t\tvar equal = require('buffer-equal');\n\t\t\tvar HEADER = new Buffer([66, 77, 70, 3]);\n\n\t\t\tmodule.exports = function (buf) {\n\t\t\t\tif (typeof buf === 'string') return buf.substring(0, 3) === 'BMF';\n\t\t\t\treturn buf.length > 4 && equal(buf.slice(0, 4), HEADER);\n\t\t\t};\n\t\t}).call(this, require(\"buffer\").Buffer);\n\t}, { \"buffer\": 37, \"buffer-equal\": 12 }], 12: [function (require, module, exports) {\n\t\tvar Buffer = require('buffer').Buffer;\n\n\t\tmodule.exports = function (a, b) {\n\t\t\tif (!Buffer.isBuffer(a)) return undefined;\n\t\t\tif (!Buffer.isBuffer(b)) return undefined;\n\t\t\tif (typeof a.equals === 'function') return a.equals(b);\n\t\t\tif (a.length !== b.length) return false;\n\n\t\t\tfor (var i = 0; i < a.length; i++) {\n\t\t\t\tif (a[i] !== b[i]) return false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\t}, { \"buffer\": 37 }], 13: [function (require, module, exports) {\n\t\tmodule.exports = function parseBMFontAscii(data) {\n\t\t\tif (!data) throw new Error('no data provided');\n\t\t\tdata = data.toString().trim();\n\n\t\t\tvar output = {\n\t\t\t\tpages: [],\n\t\t\t\tchars: [],\n\t\t\t\tkernings: []\n\t\t\t};\n\n\t\t\tvar lines = data.split(/\\r\\n?|\\n/g);\n\n\t\t\tif (lines.length === 0) throw new Error('no data in BMFont file');\n\n\t\t\tfor (var i = 0; i < lines.length; i++) {\n\t\t\t\tvar lineData = splitLine(lines[i], i);\n\t\t\t\tif (!lineData) continue;\n\n\t\t\t\tif (lineData.key === 'page') {\n\t\t\t\t\tif (typeof lineData.data.id !== 'number') throw new Error('malformed file at line ' + i + ' -- needs page id=N');\n\t\t\t\t\tif (typeof lineData.data.file !== 'string') throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"');\n\t\t\t\t\toutput.pages[lineData.data.id] = lineData.data.file;\n\t\t\t\t} else if (lineData.key === 'chars' || lineData.key === 'kernings') {} else if (lineData.key === 'char') {\n\t\t\t\t\toutput.chars.push(lineData.data);\n\t\t\t\t} else if (lineData.key === 'kerning') {\n\t\t\t\t\toutput.kernings.push(lineData.data);\n\t\t\t\t} else {\n\t\t\t\t\toutput[lineData.key] = lineData.data;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn output;\n\t\t};\n\n\t\tfunction splitLine(line, idx) {\n\t\t\tline = line.replace(/\\t+/g, ' ').trim();\n\t\t\tif (!line) return null;\n\n\t\t\tvar space = line.indexOf(' ');\n\t\t\tif (space === -1) throw new Error(\"no named row at line \" + idx);\n\n\t\t\tvar key = line.substring(0, space);\n\n\t\t\tline = line.substring(space + 1);\n\n\t\t\tline = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '');\n\t\t\tline = line.split(\"=\");\n\t\t\tline = line.map(function (str) {\n\t\t\t\treturn str.trim().match(/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g);\n\t\t\t});\n\n\t\t\tvar data = [];\n\t\t\tfor (var i = 0; i < line.length; i++) {\n\t\t\t\tvar dt = line[i];\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tkey: dt[0],\n\t\t\t\t\t\tdata: \"\"\n\t\t\t\t\t});\n\t\t\t\t} else if (i === line.length - 1) {\n\t\t\t\t\tdata[data.length - 1].data = parseData(dt[0]);\n\t\t\t\t} else {\n\t\t\t\t\tdata[data.length - 1].data = parseData(dt[0]);\n\t\t\t\t\tdata.push({\n\t\t\t\t\t\tkey: dt[1],\n\t\t\t\t\t\tdata: \"\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar out = {\n\t\t\t\tkey: key,\n\t\t\t\tdata: {}\n\t\t\t};\n\n\t\t\tdata.forEach(function (v) {\n\t\t\t\tout.data[v.key] = v.data;\n\t\t\t});\n\n\t\t\treturn out;\n\t\t}\n\n\t\tfunction parseData(data) {\n\t\t\tif (!data || data.length === 0) return \"\";\n\n\t\t\tif (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0) return data.substring(1, data.length - 1);\n\t\t\tif (data.indexOf(',') !== -1) return parseIntList(data);\n\t\t\treturn parseInt(data, 10);\n\t\t}\n\n\t\tfunction parseIntList(data) {\n\t\t\treturn data.split(',').map(function (val) {\n\t\t\t\treturn parseInt(val, 10);\n\t\t\t});\n\t\t}\n\t}, {}], 14: [function (require, module, exports) {\n\t\tvar HEADER = [66, 77, 70];\n\n\t\tmodule.exports = function readBMFontBinary(buf) {\n\t\t\tif (buf.length < 6) throw new Error('invalid buffer length for BMFont');\n\n\t\t\tvar header = HEADER.every(function (byte, i) {\n\t\t\t\treturn buf.readUInt8(i) === byte;\n\t\t\t});\n\n\t\t\tif (!header) throw new Error('BMFont missing BMF byte header');\n\n\t\t\tvar i = 3;\n\t\t\tvar vers = buf.readUInt8(i++);\n\t\t\tif (vers > 3) throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)');\n\n\t\t\tvar target = { kernings: [], chars: [] };\n\t\t\tfor (var b = 0; b < 5; b++) {\n\t\t\t\ti += readBlock(target, buf, i);\n\t\t\t}return target;\n\t\t};\n\n\t\tfunction readBlock(target, buf, i) {\n\t\t\tif (i > buf.length - 1) return 0;\n\n\t\t\tvar blockID = buf.readUInt8(i++);\n\t\t\tvar blockSize = buf.readInt32LE(i);\n\t\t\ti += 4;\n\n\t\t\tswitch (blockID) {\n\t\t\t\tcase 1:\n\t\t\t\t\ttarget.info = readInfo(buf, i);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\ttarget.common = readCommon(buf, i);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\ttarget.pages = readPages(buf, i, blockSize);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\ttarget.chars = readChars(buf, i, blockSize);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\ttarget.kernings = readKernings(buf, i, blockSize);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn 5 + blockSize;\n\t\t}\n\n\t\tfunction readInfo(buf, i) {\n\t\t\tvar info = {};\n\t\t\tinfo.size = buf.readInt16LE(i);\n\n\t\t\tvar bitField = buf.readUInt8(i + 2);\n\t\t\tinfo.smooth = bitField >> 7 & 1;\n\t\t\tinfo.unicode = bitField >> 6 & 1;\n\t\t\tinfo.italic = bitField >> 5 & 1;\n\t\t\tinfo.bold = bitField >> 4 & 1;\n\n\t\t\tif (bitField >> 3 & 1) info.fixedHeight = 1;\n\n\t\t\tinfo.charset = buf.readUInt8(i + 3) || '';\n\t\t\tinfo.stretchH = buf.readUInt16LE(i + 4);\n\t\t\tinfo.aa = buf.readUInt8(i + 6);\n\t\t\tinfo.padding = [buf.readInt8(i + 7), buf.readInt8(i + 8), buf.readInt8(i + 9), buf.readInt8(i + 10)];\n\t\t\tinfo.spacing = [buf.readInt8(i + 11), buf.readInt8(i + 12)];\n\t\t\tinfo.outline = buf.readUInt8(i + 13);\n\t\t\tinfo.face = readStringNT(buf, i + 14);\n\t\t\treturn info;\n\t\t}\n\n\t\tfunction readCommon(buf, i) {\n\t\t\tvar common = {};\n\t\t\tcommon.lineHeight = buf.readUInt16LE(i);\n\t\t\tcommon.base = buf.readUInt16LE(i + 2);\n\t\t\tcommon.scaleW = buf.readUInt16LE(i + 4);\n\t\t\tcommon.scaleH = buf.readUInt16LE(i + 6);\n\t\t\tcommon.pages = buf.readUInt16LE(i + 8);\n\t\t\tvar bitField = buf.readUInt8(i + 10);\n\t\t\tcommon.packed = 0;\n\t\t\tcommon.alphaChnl = buf.readUInt8(i + 11);\n\t\t\tcommon.redChnl = buf.readUInt8(i + 12);\n\t\t\tcommon.greenChnl = buf.readUInt8(i + 13);\n\t\t\tcommon.blueChnl = buf.readUInt8(i + 14);\n\t\t\treturn common;\n\t\t}\n\n\t\tfunction readPages(buf, i, size) {\n\t\t\tvar pages = [];\n\t\t\tvar text = readNameNT(buf, i);\n\t\t\tvar len = text.length + 1;\n\t\t\tvar count = size / len;\n\t\t\tfor (var c = 0; c < count; c++) {\n\t\t\t\tpages[c] = buf.slice(i, i + text.length).toString('utf8');\n\t\t\t\ti += len;\n\t\t\t}\n\t\t\treturn pages;\n\t\t}\n\n\t\tfunction readChars(buf, i, blockSize) {\n\t\t\tvar chars = [];\n\n\t\t\tvar count = blockSize / 20;\n\t\t\tfor (var c = 0; c < count; c++) {\n\t\t\t\tvar char = {};\n\t\t\t\tvar off = c * 20;\n\t\t\t\tchar.id = buf.readUInt32LE(i + 0 + off);\n\t\t\t\tchar.x = buf.readUInt16LE(i + 4 + off);\n\t\t\t\tchar.y = buf.readUInt16LE(i + 6 + off);\n\t\t\t\tchar.width = buf.readUInt16LE(i + 8 + off);\n\t\t\t\tchar.height = buf.readUInt16LE(i + 10 + off);\n\t\t\t\tchar.xoffset = buf.readInt16LE(i + 12 + off);\n\t\t\t\tchar.yoffset = buf.readInt16LE(i + 14 + off);\n\t\t\t\tchar.xadvance = buf.readInt16LE(i + 16 + off);\n\t\t\t\tchar.page = buf.readUInt8(i + 18 + off);\n\t\t\t\tchar.chnl = buf.readUInt8(i + 19 + off);\n\t\t\t\tchars[c] = char;\n\t\t\t}\n\t\t\treturn chars;\n\t\t}\n\n\t\tfunction readKernings(buf, i, blockSize) {\n\t\t\tvar kernings = [];\n\t\t\tvar count = blockSize / 10;\n\t\t\tfor (var c = 0; c < count; c++) {\n\t\t\t\tvar kern = {};\n\t\t\t\tvar off = c * 10;\n\t\t\t\tkern.first = buf.readUInt32LE(i + 0 + off);\n\t\t\t\tkern.second = buf.readUInt32LE(i + 4 + off);\n\t\t\t\tkern.amount = buf.readInt16LE(i + 8 + off);\n\t\t\t\tkernings[c] = kern;\n\t\t\t}\n\t\t\treturn kernings;\n\t\t}\n\n\t\tfunction readNameNT(buf, offset) {\n\t\t\tvar pos = offset;\n\t\t\tfor (; pos < buf.length; pos++) {\n\t\t\t\tif (buf[pos] === 0x00) break;\n\t\t\t}\n\t\t\treturn buf.slice(offset, pos);\n\t\t}\n\n\t\tfunction readStringNT(buf, offset) {\n\t\t\treturn readNameNT(buf, offset).toString('utf8');\n\t\t}\n\t}, {}], 15: [function (require, module, exports) {\n\t\tvar parseAttributes = require('./parse-attribs');\n\t\tvar parseFromString = require('xml-parse-from-string');\n\n\t\tvar NAME_MAP = {\n\t\t\tscaleh: 'scaleH',\n\t\t\tscalew: 'scaleW',\n\t\t\tstretchh: 'stretchH',\n\t\t\tlineheight: 'lineHeight',\n\t\t\talphachnl: 'alphaChnl',\n\t\t\tredchnl: 'redChnl',\n\t\t\tgreenchnl: 'greenChnl',\n\t\t\tbluechnl: 'blueChnl'\n\t\t};\n\n\t\tmodule.exports = function parse(data) {\n\t\t\tdata = data.toString();\n\n\t\t\tvar xmlRoot = parseFromString(data);\n\t\t\tvar output = {\n\t\t\t\tpages: [],\n\t\t\t\tchars: [],\n\t\t\t\tkernings: []\n\t\t\t};['info', 'common'].forEach(function (key) {\n\t\t\t\tvar element = xmlRoot.getElementsByTagName(key)[0];\n\t\t\t\tif (element) output[key] = parseAttributes(getAttribs(element));\n\t\t\t});\n\n\t\t\tvar pageRoot = xmlRoot.getElementsByTagName('pages')[0];\n\t\t\tif (!pageRoot) throw new Error('malformed file -- no <pages> element');\n\t\t\tvar pages = pageRoot.getElementsByTagName('page');\n\t\t\tfor (var i = 0; i < pages.length; i++) {\n\t\t\t\tvar p = pages[i];\n\t\t\t\tvar id = parseInt(p.getAttribute('id'), 10);\n\t\t\t\tvar file = p.getAttribute('file');\n\t\t\t\tif (isNaN(id)) throw new Error('malformed file -- page \"id\" attribute is NaN');\n\t\t\t\tif (!file) throw new Error('malformed file -- needs page \"file\" attribute');\n\t\t\t\toutput.pages[parseInt(id, 10)] = file;\n\t\t\t}\n\n\t\t\t;['chars', 'kernings'].forEach(function (key) {\n\t\t\t\tvar element = xmlRoot.getElementsByTagName(key)[0];\n\t\t\t\tif (!element) return;\n\t\t\t\tvar childTag = key.substring(0, key.length - 1);\n\t\t\t\tvar children = element.getElementsByTagName(childTag);\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i];\n\t\t\t\t\toutput[key].push(parseAttributes(getAttribs(child)));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn output;\n\t\t};\n\n\t\tfunction getAttribs(element) {\n\t\t\tvar attribs = getAttribList(element);\n\t\t\treturn attribs.reduce(function (dict, attrib) {\n\t\t\t\tvar key = mapName(attrib.nodeName);\n\t\t\t\tdict[key] = attrib.nodeValue;\n\t\t\t\treturn dict;\n\t\t\t}, {});\n\t\t}\n\n\t\tfunction getAttribList(element) {\n\t\t\tvar attribs = [];\n\t\t\tfor (var i = 0; i < element.attributes.length; i++) {\n\t\t\t\tattribs.push(element.attributes[i]);\n\t\t\t}return attribs;\n\t\t}\n\n\t\tfunction mapName(nodeName) {\n\t\t\treturn NAME_MAP[nodeName.toLowerCase()] || nodeName;\n\t\t}\n\t}, { \"./parse-attribs\": 16, \"xml-parse-from-string\": 17 }], 16: [function (require, module, exports) {\n\t\tvar GLYPH_DESIGNER_ERROR = 'chasrset';\n\n\t\tmodule.exports = function parseAttributes(obj) {\n\t\t\tif (GLYPH_DESIGNER_ERROR in obj) {\n\t\t\t\tobj['charset'] = obj[GLYPH_DESIGNER_ERROR];\n\t\t\t\tdelete obj[GLYPH_DESIGNER_ERROR];\n\t\t\t}\n\n\t\t\tfor (var k in obj) {\n\t\t\t\tif (k === 'face' || k === 'charset') continue;else if (k === 'padding' || k === 'spacing') obj[k] = parseIntList(obj[k]);else obj[k] = parseInt(obj[k], 10);\n\t\t\t}\n\t\t\treturn obj;\n\t\t};\n\n\t\tfunction parseIntList(data) {\n\t\t\treturn data.split(',').map(function (val) {\n\t\t\t\treturn parseInt(val, 10);\n\t\t\t});\n\t\t}\n\t}, {}], 17: [function (require, module, exports) {\n\t\tmodule.exports = function xmlparser() {\n\t\t\tif (typeof window.DOMParser !== 'undefined') {\n\t\t\t\treturn function (str) {\n\t\t\t\t\tvar parser = new window.DOMParser();\n\t\t\t\t\treturn parser.parseFromString(str, 'application/xml');\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (typeof window.ActiveXObject !== 'undefined' && new window.ActiveXObject('Microsoft.XMLDOM')) {\n\t\t\t\treturn function (str) {\n\t\t\t\t\tvar xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\t\t\txmlDoc.async = \"false\";\n\t\t\t\t\txmlDoc.loadXML(str);\n\t\t\t\t\treturn xmlDoc;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn function (str) {\n\t\t\t\tvar div = document.createElement('div');\n\t\t\t\tdiv.innerHTML = str;\n\t\t\t\treturn div;\n\t\t\t};\n\t\t}();\n\t}, {}], 18: [function (require, module, exports) {\n\t\t\"use strict\";\n\n\t\tvar window = require(\"global/window\");\n\t\tvar once = require(\"once\");\n\t\tvar isFunction = require(\"is-function\");\n\t\tvar parseHeaders = require(\"parse-headers\");\n\t\tvar xtend = require(\"xtend\");\n\n\t\tmodule.exports = createXHR;\n\t\tcreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop;\n\t\tcreateXHR.XDomainRequest = \"withCredentials\" in new createXHR.XMLHttpRequest() ? createXHR.XMLHttpRequest : window.XDomainRequest;\n\n\t\tforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function (method) {\n\t\t\tcreateXHR[method === \"delete\" ? \"del\" : method] = function (uri, options, callback) {\n\t\t\t\toptions = initParams(uri, options, callback);\n\t\t\t\toptions.method = method.toUpperCase();\n\t\t\t\treturn _createXHR(options);\n\t\t\t};\n\t\t});\n\n\t\tfunction forEachArray(array, iterator) {\n\t\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\t\titerator(array[i]);\n\t\t\t}\n\t\t}\n\n\t\tfunction isEmpty(obj) {\n\t\t\tfor (var i in obj) {\n\t\t\t\tif (obj.hasOwnProperty(i)) return false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tfunction initParams(uri, options, callback) {\n\t\t\tvar params = uri;\n\n\t\t\tif (isFunction(options)) {\n\t\t\t\tcallback = options;\n\t\t\t\tif (typeof uri === \"string\") {\n\t\t\t\t\tparams = { uri: uri };\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tparams = xtend(options, { uri: uri });\n\t\t\t}\n\n\t\t\tparams.callback = callback;\n\t\t\treturn params;\n\t\t}\n\n\t\tfunction createXHR(uri, options, callback) {\n\t\t\toptions = initParams(uri, options, callback);\n\t\t\treturn _createXHR(options);\n\t\t}\n\n\t\tfunction _createXHR(options) {\n\t\t\tvar callback = options.callback;\n\t\t\tif (typeof callback === \"undefined\") {\n\t\t\t\tthrow new Error(\"callback argument missing\");\n\t\t\t}\n\t\t\tcallback = once(callback);\n\n\t\t\tfunction readystatechange() {\n\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\tloadFunc();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction getBody() {\n\t\t\t\tvar body = undefined;\n\n\t\t\t\tif (xhr.response) {\n\t\t\t\t\tbody = xhr.response;\n\t\t\t\t} else if (xhr.responseType === \"text\" || !xhr.responseType) {\n\t\t\t\t\tbody = xhr.responseText || xhr.responseXML;\n\t\t\t\t}\n\n\t\t\t\tif (isJson) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tbody = JSON.parse(body);\n\t\t\t\t\t} catch (e) {}\n\t\t\t\t}\n\n\t\t\t\treturn body;\n\t\t\t}\n\n\t\t\tvar failureResponse = {\n\t\t\t\tbody: undefined,\n\t\t\t\theaders: {},\n\t\t\t\tstatusCode: 0,\n\t\t\t\tmethod: method,\n\t\t\t\turl: uri,\n\t\t\t\trawRequest: xhr\n\t\t\t};\n\n\t\t\tfunction errorFunc(evt) {\n\t\t\t\tclearTimeout(timeoutTimer);\n\t\t\t\tif (!(evt instanceof Error)) {\n\t\t\t\t\tevt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\"));\n\t\t\t\t}\n\t\t\t\tevt.statusCode = 0;\n\t\t\t\tcallback(evt, failureResponse);\n\t\t\t}\n\n\t\t\tfunction loadFunc() {\n\t\t\t\tif (aborted) return;\n\t\t\t\tvar status;\n\t\t\t\tclearTimeout(timeoutTimer);\n\t\t\t\tif (options.useXDR && xhr.status === undefined) {\n\t\t\t\t\tstatus = 200;\n\t\t\t\t} else {\n\t\t\t\t\tstatus = xhr.status === 1223 ? 204 : xhr.status;\n\t\t\t\t}\n\t\t\t\tvar response = failureResponse;\n\t\t\t\tvar err = null;\n\n\t\t\t\tif (status !== 0) {\n\t\t\t\t\tresponse = {\n\t\t\t\t\t\tbody: getBody(),\n\t\t\t\t\t\tstatusCode: status,\n\t\t\t\t\t\tmethod: method,\n\t\t\t\t\t\theaders: {},\n\t\t\t\t\t\turl: uri,\n\t\t\t\t\t\trawRequest: xhr\n\t\t\t\t\t};\n\t\t\t\t\tif (xhr.getAllResponseHeaders) {\n\t\t\t\t\t\tresponse.headers = parseHeaders(xhr.getAllResponseHeaders());\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\terr = new Error(\"Internal XMLHttpRequest Error\");\n\t\t\t\t}\n\t\t\t\tcallback(err, response, response.body);\n\t\t\t}\n\n\t\t\tvar xhr = options.xhr || null;\n\n\t\t\tif (!xhr) {\n\t\t\t\tif (options.cors || options.useXDR) {\n\t\t\t\t\txhr = new createXHR.XDomainRequest();\n\t\t\t\t} else {\n\t\t\t\t\txhr = new createXHR.XMLHttpRequest();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar key;\n\t\t\tvar aborted;\n\t\t\tvar uri = xhr.url = options.uri || options.url;\n\t\t\tvar method = xhr.method = options.method || \"GET\";\n\t\t\tvar body = options.body || options.data || null;\n\t\t\tvar headers = xhr.headers = options.headers || {};\n\t\t\tvar sync = !!options.sync;\n\t\t\tvar isJson = false;\n\t\t\tvar timeoutTimer;\n\n\t\t\tif (\"json\" in options) {\n\t\t\t\tisJson = true;\n\t\t\t\theaders[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\");\n\t\t\t\tif (method !== \"GET\" && method !== \"HEAD\") {\n\t\t\t\t\theaders[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\");\n\t\t\t\t\tbody = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_json_stringify___default()(options.json);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.onreadystatechange = readystatechange;\n\t\t\txhr.onload = loadFunc;\n\t\t\txhr.onerror = errorFunc;\n\n\t\t\txhr.onprogress = function () {};\n\t\t\txhr.ontimeout = errorFunc;\n\t\t\txhr.open(method, uri, !sync, options.username, options.password);\n\n\t\t\tif (!sync) {\n\t\t\t\txhr.withCredentials = !!options.withCredentials;\n\t\t\t}\n\n\t\t\tif (!sync && options.timeout > 0) {\n\t\t\t\ttimeoutTimer = setTimeout(function () {\n\t\t\t\t\taborted = true;\n\t\t\t\t\txhr.abort(\"timeout\");\n\t\t\t\t\tvar e = new Error(\"XMLHttpRequest timeout\");\n\t\t\t\t\te.code = \"ETIMEDOUT\";\n\t\t\t\t\terrorFunc(e);\n\t\t\t\t}, options.timeout);\n\t\t\t}\n\n\t\t\tif (xhr.setRequestHeader) {\n\t\t\t\tfor (key in headers) {\n\t\t\t\t\tif (headers.hasOwnProperty(key)) {\n\t\t\t\t\t\txhr.setRequestHeader(key, headers[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (options.headers && !isEmpty(options.headers)) {\n\t\t\t\tthrow new Error(\"Headers cannot be set on an XDomainRequest object\");\n\t\t\t}\n\n\t\t\tif (\"responseType\" in options) {\n\t\t\t\txhr.responseType = options.responseType;\n\t\t\t}\n\n\t\t\tif (\"beforeSend\" in options && typeof options.beforeSend === \"function\") {\n\t\t\t\toptions.beforeSend(xhr);\n\t\t\t}\n\n\t\t\txhr.send(body);\n\n\t\t\treturn xhr;\n\t\t}\n\n\t\tfunction noop() {}\n\t}, { \"global/window\": 19, \"is-function\": 20, \"once\": 21, \"parse-headers\": 24, \"xtend\": 25 }], 19: [function (require, module, exports) {\n\t\t(function (global) {\n\t\t\tif (typeof window !== \"undefined\") {\n\t\t\t\tmodule.exports = window;\n\t\t\t} else if (typeof global !== \"undefined\") {\n\t\t\t\tmodule.exports = global;\n\t\t\t} else if (typeof self !== \"undefined\") {\n\t\t\t\tmodule.exports = self;\n\t\t\t} else {\n\t\t\t\tmodule.exports = {};\n\t\t\t}\n\t\t}).call(this, typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n\t}, {}], 20: [function (require, module, exports) {\n\t\tmodule.exports = isFunction;\n\n\t\tvar toString = Object.prototype.toString;\n\n\t\tfunction isFunction(fn) {\n\t\t\tvar string = toString.call(fn);\n\t\t\treturn string === '[object Function]' || typeof fn === 'function' && string !== '[object RegExp]' || typeof window !== 'undefined' && (fn === window.setTimeout || fn === window.alert || fn === window.confirm || fn === window.prompt);\n\t\t};\n\t}, {}], 21: [function (require, module, exports) {\n\t\tmodule.exports = once;\n\n\t\tonce.proto = once(function () {\n\t\t\tObject.defineProperty(Function.prototype, 'once', {\n\t\t\t\tvalue: function value() {\n\t\t\t\t\treturn once(this);\n\t\t\t\t},\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t});\n\n\t\tfunction once(fn) {\n\t\t\tvar called = false;\n\t\t\treturn function () {\n\t\t\t\tif (called) return;\n\t\t\t\tcalled = true;\n\t\t\t\treturn fn.apply(this, arguments);\n\t\t\t};\n\t\t}\n\t}, {}], 22: [function (require, module, exports) {\n\t\tvar isFunction = require('is-function');\n\n\t\tmodule.exports = forEach;\n\n\t\tvar toString = Object.prototype.toString;\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n\t\tfunction forEach(list, iterator, context) {\n\t\t\tif (!isFunction(iterator)) {\n\t\t\t\tthrow new TypeError('iterator must be a function');\n\t\t\t}\n\n\t\t\tif (arguments.length < 3) {\n\t\t\t\tcontext = this;\n\t\t\t}\n\n\t\t\tif (toString.call(list) === '[object Array]') forEachArray(list, iterator, context);else if (typeof list === 'string') forEachString(list, iterator, context);else forEachObject(list, iterator, context);\n\t\t}\n\n\t\tfunction forEachArray(array, iterator, context) {\n\t\t\tfor (var i = 0, len = array.length; i < len; i++) {\n\t\t\t\tif (hasOwnProperty.call(array, i)) {\n\t\t\t\t\titerator.call(context, array[i], i, array);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction forEachString(string, iterator, context) {\n\t\t\tfor (var i = 0, len = string.length; i < len; i++) {\n\t\t\t\titerator.call(context, string.charAt(i), i, string);\n\t\t\t}\n\t\t}\n\n\t\tfunction forEachObject(object, iterator, context) {\n\t\t\tfor (var k in object) {\n\t\t\t\tif (hasOwnProperty.call(object, k)) {\n\t\t\t\t\titerator.call(context, object[k], k, object);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, { \"is-function\": 20 }], 23: [function (require, module, exports) {\n\n\t\texports = module.exports = trim;\n\n\t\tfunction trim(str) {\n\t\t\treturn str.replace(/^\\s*|\\s*$/g, '');\n\t\t}\n\n\t\texports.left = function (str) {\n\t\t\treturn str.replace(/^\\s*/, '');\n\t\t};\n\n\t\texports.right = function (str) {\n\t\t\treturn str.replace(/\\s*$/, '');\n\t\t};\n\t}, {}], 24: [function (require, module, exports) {\n\t\tvar trim = require('trim'),\n\t\t    forEach = require('for-each'),\n\t\t    isArray = function isArray(arg) {\n\t\t\treturn Object.prototype.toString.call(arg) === '[object Array]';\n\t\t};\n\n\t\tmodule.exports = function (headers) {\n\t\t\tif (!headers) return {};\n\n\t\t\tvar result = {};\n\n\t\t\tforEach(trim(headers).split('\\n'), function (row) {\n\t\t\t\tvar index = row.indexOf(':'),\n\t\t\t\t    key = trim(row.slice(0, index)).toLowerCase(),\n\t\t\t\t    value = trim(row.slice(index + 1));\n\n\t\t\t\tif (typeof result[key] === 'undefined') {\n\t\t\t\t\tresult[key] = value;\n\t\t\t\t} else if (isArray(result[key])) {\n\t\t\t\t\tresult[key].push(value);\n\t\t\t\t} else {\n\t\t\t\t\tresult[key] = [result[key], value];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t};\n\t}, { \"for-each\": 22, \"trim\": 23 }], 25: [function (require, module, exports) {\n\t\targuments[4][9][0].apply(exports, arguments);\n\t}, { \"dup\": 9 }], 26: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\t\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n\t\tfunction toObject(val) {\n\t\t\tif (val === null || val === undefined) {\n\t\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t\t}\n\n\t\t\treturn Object(val);\n\t\t}\n\n\t\tmodule.exports = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default.a || function (target, source) {\n\t\t\tvar from;\n\t\t\tvar to = toObject(target);\n\t\t\tvar symbols;\n\n\t\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\t\tfrom = Object(arguments[s]);\n\n\t\t\t\tfor (var key in from) {\n\t\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\t\tto[key] = from[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default.a) {\n\t\t\t\t\tsymbols = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_own_property_symbols___default()(from);\n\t\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn to;\n\t\t};\n\t}, {}], 27: [function (require, module, exports) {\n\t\tvar dtype = require('dtype');\n\t\tvar anArray = require('an-array');\n\t\tvar isBuffer = require('is-buffer');\n\n\t\tvar CW = [0, 2, 3];\n\t\tvar CCW = [2, 1, 3];\n\n\t\tmodule.exports = function createQuadElements(array, opt) {\n\t\t\tif (!array || !(anArray(array) || isBuffer(array))) {\n\t\t\t\topt = array || {};\n\t\t\t\tarray = null;\n\t\t\t}\n\n\t\t\tif (typeof opt === 'number') opt = { count: opt };else opt = opt || {};\n\n\t\t\tvar type = typeof opt.type === 'string' ? opt.type : 'uint16';\n\t\t\tvar count = typeof opt.count === 'number' ? opt.count : 1;\n\t\t\tvar start = opt.start || 0;\n\n\t\t\tvar dir = opt.clockwise !== false ? CW : CCW,\n\t\t\t    a = dir[0],\n\t\t\t    b = dir[1],\n\t\t\t    c = dir[2];\n\n\t\t\tvar numIndices = count * 6;\n\n\t\t\tvar indices = array || new (dtype(type))(numIndices);\n\t\t\tfor (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n\t\t\t\tvar x = i + start;\n\t\t\t\tindices[x + 0] = j + 0;\n\t\t\t\tindices[x + 1] = j + 1;\n\t\t\t\tindices[x + 2] = j + 2;\n\t\t\t\tindices[x + 3] = j + a;\n\t\t\t\tindices[x + 4] = j + b;\n\t\t\t\tindices[x + 5] = j + c;\n\t\t\t}\n\t\t\treturn indices;\n\t\t};\n\t}, { \"an-array\": 28, \"dtype\": 29, \"is-buffer\": 30 }], 28: [function (require, module, exports) {\n\t\tvar str = Object.prototype.toString;\n\n\t\tmodule.exports = anArray;\n\n\t\tfunction anArray(arr) {\n\t\t\treturn arr.BYTES_PER_ELEMENT && str.call(arr.buffer) === '[object ArrayBuffer]' || Array.isArray(arr);\n\t\t}\n\t}, {}], 29: [function (require, module, exports) {\n\t\tmodule.exports = function (dtype) {\n\t\t\tswitch (dtype) {\n\t\t\t\tcase 'int8':\n\t\t\t\t\treturn Int8Array;\n\t\t\t\tcase 'int16':\n\t\t\t\t\treturn Int16Array;\n\t\t\t\tcase 'int32':\n\t\t\t\t\treturn Int32Array;\n\t\t\t\tcase 'uint8':\n\t\t\t\t\treturn Uint8Array;\n\t\t\t\tcase 'uint16':\n\t\t\t\t\treturn Uint16Array;\n\t\t\t\tcase 'uint32':\n\t\t\t\t\treturn Uint32Array;\n\t\t\t\tcase 'float32':\n\t\t\t\t\treturn Float32Array;\n\t\t\t\tcase 'float64':\n\t\t\t\t\treturn Float64Array;\n\t\t\t\tcase 'array':\n\t\t\t\t\treturn Array;\n\t\t\t\tcase 'uint8_clamped':\n\t\t\t\t\treturn Uint8ClampedArray;\n\t\t\t}\n\t\t};\n\t}, {}], 30: [function (require, module, exports) {\n\n\t\tmodule.exports = function (obj) {\n\t\t\treturn !!(obj != null && (obj._isBuffer || obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)));\n\t\t};\n\t}, {}], 31: [function (require, module, exports) {\n\t\tvar flatten = require('flatten-vertex-data');\n\n\t\tmodule.exports.attr = setAttribute;\n\t\tmodule.exports.index = setIndex;\n\n\t\tfunction setIndex(geometry, data, itemSize, dtype) {\n\t\t\tif (typeof itemSize !== 'number') itemSize = 1;\n\t\t\tif (typeof dtype !== 'number') dtype = 'uint16';\n\n\t\t\tvar isR69 = !geometry.index && typeof geometry.setIndex !== 'function';\n\t\t\tvar attrib = isR69 ? geometry.getAttribute('index') : geometry.index;\n\t\t\tvar newAttrib = updateAttribute(attrib, data, itemSize, dtype);\n\t\t\tif (newAttrib) {\n\t\t\t\tif (isR69) geometry.addAttribute('index', newAttrib);else geometry.index = newAttrib;\n\t\t\t}\n\t\t}\n\n\t\tfunction setAttribute(geometry, key, data, itemSize, dtype) {\n\t\t\tif (typeof itemSize !== 'number') itemSize = 3;\n\t\t\tif (typeof dtype !== 'number') dtype = 'float32';\n\t\t\tif (Array.isArray(data) && Array.isArray(data[0]) && data[0].length !== itemSize) {\n\t\t\t\tthrow new Error('Nested vertex array has unexpected size; expected ' + itemSize + ' but found ' + data[0].length);\n\t\t\t}\n\n\t\t\tvar attrib = geometry.getAttribute(key);\n\t\t\tvar newAttrib = updateAttribute(attrib, data, itemSize, dtype);\n\t\t\tif (newAttrib) {\n\t\t\t\tgeometry.addAttribute(key, newAttrib);\n\t\t\t}\n\t\t}\n\n\t\tfunction updateAttribute(attrib, data, itemSize, dtype) {\n\t\t\tdata = data || [];\n\t\t\tif (!attrib || rebuildAttribute(attrib, data, itemSize)) {\n\t\t\t\tdata = flatten(data, dtype);\n\t\t\t\tattrib = new __WEBPACK_IMPORTED_MODULE_8_three__[\"BufferAttribute\"](data, itemSize);\n\t\t\t\tattrib.needsUpdate = true;\n\t\t\t\treturn attrib;\n\t\t\t} else {\n\t\t\t\tflatten(data, attrib.array);\n\t\t\t\tattrib.needsUpdate = true;\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\tfunction rebuildAttribute(attrib, data, itemSize) {\n\t\t\tif (attrib.itemSize !== itemSize) return true;\n\t\t\tif (!attrib.array) return true;\n\t\t\tvar attribLength = attrib.array.length;\n\t\t\tif (Array.isArray(data) && Array.isArray(data[0])) {\n\t\t\t\treturn attribLength !== data.length * itemSize;\n\t\t\t} else {\n\t\t\t\treturn attribLength !== data.length;\n\t\t\t}\n\t\t}\n\t}, { \"flatten-vertex-data\": 32 }], 32: [function (require, module, exports) {\n\t\tvar dtype = require('dtype');\n\t\tmodule.exports = flattenVertexData;\n\t\tfunction flattenVertexData(data, output, offset) {\n\t\t\tif (!data) throw new TypeError('must specify data as first parameter');\n\t\t\toffset = +(offset || 0) | 0;\n\n\t\t\tif (Array.isArray(data) && Array.isArray(data[0])) {\n\t\t\t\tvar dim = data[0].length;\n\t\t\t\tvar length = data.length * dim;\n\n\t\t\t\tif (!output || typeof output === 'string') {\n\t\t\t\t\toutput = new (dtype(output || 'float32'))(length + offset);\n\t\t\t\t}\n\n\t\t\t\tvar dstLength = output.length - offset;\n\t\t\t\tif (length !== dstLength) {\n\t\t\t\t\tthrow new Error('source length ' + length + ' (' + dim + 'x' + data.length + ')' + ' does not match destination length ' + dstLength);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, k = offset; i < data.length; i++) {\n\t\t\t\t\tfor (var j = 0; j < dim; j++) {\n\t\t\t\t\t\toutput[k++] = data[i][j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!output || typeof output === 'string') {\n\t\t\t\t\tvar Ctor = dtype(output || 'float32');\n\t\t\t\t\tif (offset === 0) {\n\t\t\t\t\t\toutput = new Ctor(data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput = new Ctor(data.length + offset);\n\t\t\t\t\t\toutput.set(data, offset);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\toutput.set(data, offset);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn output;\n\t\t}\n\t}, { \"dtype\": 33 }], 33: [function (require, module, exports) {\n\t\targuments[4][29][0].apply(exports, arguments);\n\t}, { \"dup\": 29 }], 34: [function (require, module, exports) {\n\t\tvar assign = require('object-assign');\n\n\t\tmodule.exports = function createSDFShader(opt) {\n\t\t\topt = opt || {};\n\t\t\tvar opacity = typeof opt.opacity === 'number' ? opt.opacity : 1;\n\t\t\tvar alphaTest = typeof opt.alphaTest === 'number' ? opt.alphaTest : 0.0001;\n\t\t\tvar precision = opt.precision || 'highp';\n\t\t\tvar color = opt.color;\n\t\t\tvar map = opt.map;\n\n\t\t\tdelete opt.map;\n\t\t\tdelete opt.color;\n\t\t\tdelete opt.precision;\n\t\t\tdelete opt.opacity;\n\n\t\t\treturn assign({\n\t\t\t\tuniforms: {\n\t\t\t\t\topacity: { type: 'f', value: opacity },\n\t\t\t\t\tmap: { type: 't', value: map || new __WEBPACK_IMPORTED_MODULE_8_three__[\"Texture\"]() },\n\t\t\t\t\tcolor: { type: 'c', value: new __WEBPACK_IMPORTED_MODULE_8_three__[\"Color\"](color) }\n\t\t\t\t},\n\t\t\t\tvertexShader: ['attribute vec2 uv;', 'attribute vec4 position;', 'uniform mat4 projectionMatrix;', 'uniform mat4 modelViewMatrix;', 'varying vec2 vUv;', 'void main() {', 'vUv = uv;', 'gl_Position = projectionMatrix * modelViewMatrix * position;', '}'].join('\\n'),\n\t\t\t\tfragmentShader: ['#ifdef GL_OES_standard_derivatives', '#extension GL_OES_standard_derivatives : enable', '#endif', 'precision ' + precision + ' float;', 'uniform float opacity;', 'uniform vec3 color;', 'uniform sampler2D map;', 'varying vec2 vUv;', 'float aastep(float value) {', '  #ifdef GL_OES_standard_derivatives', '    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;', '  #else', '    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));', '  #endif', '  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);', '}', 'void main() {', '  vec4 texColor = texture2D(map, vUv);', '  float alpha = aastep(texColor.a);', '  gl_FragColor = vec4(color, opacity * alpha);', alphaTest === 0 ? '' : '  if (gl_FragColor.a < ' + alphaTest + ') discard;', '}'].join('\\n')\n\t\t\t}, opt);\n\t\t};\n\t}, { \"object-assign\": 26 }], 35: [function (require, module, exports) {\n\t\tvar loadFont = require('load-bmfont');\n\n\t\tmodule.exports = function (opt, cb) {\n\t\t\tloadFont(opt.font, function (err, font) {\n\t\t\t\tif (err) throw err;\n\t\t\t\tPANOLENS.Utils.TextureLoader.load(opt.image, function (tex) {\n\t\t\t\t\tcb(font, tex);\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\t}, { \"load-bmfont\": 10 }], 36: [function (require, module, exports) {\n\n\t\tvar createText = require('../');\n\t\tvar SDFShader = require('../shaders/sdf');\n\n\t\tif (PANOLENS && PANOLENS.Utils && PANOLENS.SpriteText) {\n\t\t\tPANOLENS.Utils.loadBMFont = function (fontObject, callback) {\n\t\t\t\trequire('./load')(fontObject, PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype, callback));\n\t\t\t};\n\t\t\tPANOLENS.SpriteText.prototype.generateTextGeometry = createText;\n\t\t\tPANOLENS.SpriteText.prototype.generateSDFShader = SDFShader;\n\t\t}\n\t}, { \"../\": 1, \"../shaders/sdf\": 34, \"./load\": 35 }], 37: [function (require, module, exports) {\n\t\t(function (global) {\n\t\t\t/*!\n    * The buffer module from node.js, for the browser.\n    *\n    * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n    * @license  MIT\n    */\n\t\t\t'use strict';\n\n\t\t\tvar base64 = require('base64-js');\n\t\t\tvar ieee754 = require('ieee754');\n\t\t\tvar isArray = require('isarray');\n\n\t\t\texports.Buffer = Buffer;\n\t\t\texports.SlowBuffer = SlowBuffer;\n\t\t\texports.INSPECT_MAX_BYTES = 50;\n\t\t\tBuffer.poolSize = 8192;\n\n\t\t\tvar rootParent = {};\n\n\t\t\tBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n\n\t\t\tfunction typedArraySupport() {\n\t\t\t\ttry {\n\t\t\t\t\tvar arr = new Uint8Array(1);\n\t\t\t\t\tarr.foo = function () {\n\t\t\t\t\t\treturn 42;\n\t\t\t\t\t};\n\t\t\t\t\treturn arr.foo() === 42 && typeof arr.subarray === 'function' && arr.subarray(1, 1).byteLength === 0;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction kMaxLength() {\n\t\t\t\treturn Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n\t\t\t}\n\n\t\t\tfunction Buffer(arg) {\n\t\t\t\tif (!(this instanceof Buffer)) {\n\t\t\t\t\tif (arguments.length > 1) return new Buffer(arg, arguments[1]);\n\t\t\t\t\treturn new Buffer(arg);\n\t\t\t\t}\n\n\t\t\t\tif (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis.length = 0;\n\t\t\t\t\tthis.parent = undefined;\n\t\t\t\t}\n\n\t\t\t\tif (typeof arg === 'number') {\n\t\t\t\t\treturn fromNumber(this, arg);\n\t\t\t\t}\n\n\t\t\t\tif (typeof arg === 'string') {\n\t\t\t\t\treturn fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8');\n\t\t\t\t}\n\n\t\t\t\treturn fromObject(this, arg);\n\t\t\t}\n\n\t\t\tfunction fromNumber(that, length) {\n\t\t\t\tthat = allocate(that, length < 0 ? 0 : checked(length) | 0);\n\t\t\t\tif (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\t\tthat[i] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromString(that, string, encoding) {\n\t\t\t\tif (typeof encoding !== 'string' || encoding === '') encoding = 'utf8';\n\n\t\t\t\tvar length = byteLength(string, encoding) | 0;\n\t\t\t\tthat = allocate(that, length);\n\n\t\t\t\tthat.write(string, encoding);\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromObject(that, object) {\n\t\t\t\tif (Buffer.isBuffer(object)) return fromBuffer(that, object);\n\n\t\t\t\tif (isArray(object)) return fromArray(that, object);\n\n\t\t\t\tif (object == null) {\n\t\t\t\t\tthrow new TypeError('must start with number, buffer, array or string');\n\t\t\t\t}\n\n\t\t\t\tif (typeof ArrayBuffer !== 'undefined') {\n\t\t\t\t\tif (object.buffer instanceof ArrayBuffer) {\n\t\t\t\t\t\treturn fromTypedArray(that, object);\n\t\t\t\t\t}\n\t\t\t\t\tif (object instanceof ArrayBuffer) {\n\t\t\t\t\t\treturn fromArrayBuffer(that, object);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (object.length) return fromArrayLike(that, object);\n\n\t\t\t\treturn fromJsonObject(that, object);\n\t\t\t}\n\n\t\t\tfunction fromBuffer(that, buffer) {\n\t\t\t\tvar length = checked(buffer.length) | 0;\n\t\t\t\tthat = allocate(that, length);\n\t\t\t\tbuffer.copy(that, 0, 0, length);\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromArray(that, array) {\n\t\t\t\tvar length = checked(array.length) | 0;\n\t\t\t\tthat = allocate(that, length);\n\t\t\t\tfor (var i = 0; i < length; i += 1) {\n\t\t\t\t\tthat[i] = array[i] & 255;\n\t\t\t\t}\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromTypedArray(that, array) {\n\t\t\t\tvar length = checked(array.length) | 0;\n\t\t\t\tthat = allocate(that, length);\n\n\t\t\t\tfor (var i = 0; i < length; i += 1) {\n\t\t\t\t\tthat[i] = array[i] & 255;\n\t\t\t\t}\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromArrayBuffer(that, array) {\n\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthat = new Uint8Array(array);\n\t\t\t\t\tthat.__proto__ = Buffer.prototype;\n\t\t\t\t} else {\n\t\t\t\t\tthat = fromTypedArray(that, new Uint8Array(array));\n\t\t\t\t}\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromArrayLike(that, array) {\n\t\t\t\tvar length = checked(array.length) | 0;\n\t\t\t\tthat = allocate(that, length);\n\t\t\t\tfor (var i = 0; i < length; i += 1) {\n\t\t\t\t\tthat[i] = array[i] & 255;\n\t\t\t\t}\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction fromJsonObject(that, object) {\n\t\t\t\tvar array;\n\t\t\t\tvar length = 0;\n\n\t\t\t\tif (object.type === 'Buffer' && isArray(object.data)) {\n\t\t\t\t\tarray = object.data;\n\t\t\t\t\tlength = checked(array.length) | 0;\n\t\t\t\t}\n\t\t\t\tthat = allocate(that, length);\n\n\t\t\t\tfor (var i = 0; i < length; i += 1) {\n\t\t\t\t\tthat[i] = array[i] & 255;\n\t\t\t\t}\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\tBuffer.prototype.__proto__ = Uint8Array.prototype;\n\t\t\t\tBuffer.__proto__ = Uint8Array;\n\t\t\t} else {\n\t\t\t\tBuffer.prototype.length = undefined;\n\t\t\t\tBuffer.prototype.parent = undefined;\n\t\t\t}\n\n\t\t\tfunction allocate(that, length) {\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthat = new Uint8Array(length);\n\t\t\t\t\tthat.__proto__ = Buffer.prototype;\n\t\t\t\t} else {\n\t\t\t\t\tthat.length = length;\n\t\t\t\t}\n\n\t\t\t\tvar fromPool = length !== 0 && length <= Buffer.poolSize >>> 1;\n\t\t\t\tif (fromPool) that.parent = rootParent;\n\n\t\t\t\treturn that;\n\t\t\t}\n\n\t\t\tfunction checked(length) {\n\t\t\t\tif (length >= kMaxLength()) {\n\t\t\t\t\tthrow new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n\t\t\t\t}\n\t\t\t\treturn length | 0;\n\t\t\t}\n\n\t\t\tfunction SlowBuffer(subject, encoding) {\n\t\t\t\tif (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding);\n\n\t\t\t\tvar buf = new Buffer(subject, encoding);\n\t\t\t\tdelete buf.parent;\n\t\t\t\treturn buf;\n\t\t\t}\n\n\t\t\tBuffer.isBuffer = function isBuffer(b) {\n\t\t\t\treturn !!(b != null && b._isBuffer);\n\t\t\t};\n\n\t\t\tBuffer.compare = function compare(a, b) {\n\t\t\t\tif (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n\t\t\t\t\tthrow new TypeError('Arguments must be Buffers');\n\t\t\t\t}\n\n\t\t\t\tif (a === b) return 0;\n\n\t\t\t\tvar x = a.length;\n\t\t\t\tvar y = b.length;\n\n\t\t\t\tvar i = 0;\n\t\t\t\tvar len = Math.min(x, y);\n\t\t\t\twhile (i < len) {\n\t\t\t\t\tif (a[i] !== b[i]) break;\n\n\t\t\t\t\t++i;\n\t\t\t\t}\n\n\t\t\t\tif (i !== len) {\n\t\t\t\t\tx = a[i];\n\t\t\t\t\ty = b[i];\n\t\t\t\t}\n\n\t\t\t\tif (x < y) return -1;\n\t\t\t\tif (y < x) return 1;\n\t\t\t\treturn 0;\n\t\t\t};\n\n\t\t\tBuffer.isEncoding = function isEncoding(encoding) {\n\t\t\t\tswitch (String(encoding).toLowerCase()) {\n\t\t\t\t\tcase 'hex':\n\t\t\t\t\tcase 'utf8':\n\t\t\t\t\tcase 'utf-8':\n\t\t\t\t\tcase 'ascii':\n\t\t\t\t\tcase 'binary':\n\t\t\t\t\tcase 'base64':\n\t\t\t\t\tcase 'raw':\n\t\t\t\t\tcase 'ucs2':\n\t\t\t\t\tcase 'ucs-2':\n\t\t\t\t\tcase 'utf16le':\n\t\t\t\t\tcase 'utf-16le':\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tBuffer.concat = function concat(list, length) {\n\t\t\t\tif (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.');\n\n\t\t\t\tif (list.length === 0) {\n\t\t\t\t\treturn new Buffer(0);\n\t\t\t\t}\n\n\t\t\t\tvar i;\n\t\t\t\tif (length === undefined) {\n\t\t\t\t\tlength = 0;\n\t\t\t\t\tfor (i = 0; i < list.length; i++) {\n\t\t\t\t\t\tlength += list[i].length;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar buf = new Buffer(length);\n\t\t\t\tvar pos = 0;\n\t\t\t\tfor (i = 0; i < list.length; i++) {\n\t\t\t\t\tvar item = list[i];\n\t\t\t\t\titem.copy(buf, pos);\n\t\t\t\t\tpos += item.length;\n\t\t\t\t}\n\t\t\t\treturn buf;\n\t\t\t};\n\n\t\t\tfunction byteLength(string, encoding) {\n\t\t\t\tif (typeof string !== 'string') string = '' + string;\n\n\t\t\t\tvar len = string.length;\n\t\t\t\tif (len === 0) return 0;\n\n\t\t\t\tvar loweredCase = false;\n\t\t\t\tfor (;;) {\n\t\t\t\t\tswitch (encoding) {\n\t\t\t\t\t\tcase 'ascii':\n\t\t\t\t\t\tcase 'binary':\n\t\t\t\t\t\tcase 'raw':\n\t\t\t\t\t\tcase 'raws':\n\t\t\t\t\t\t\treturn len;\n\t\t\t\t\t\tcase 'utf8':\n\t\t\t\t\t\tcase 'utf-8':\n\t\t\t\t\t\t\treturn utf8ToBytes(string).length;\n\t\t\t\t\t\tcase 'ucs2':\n\t\t\t\t\t\tcase 'ucs-2':\n\t\t\t\t\t\tcase 'utf16le':\n\t\t\t\t\t\tcase 'utf-16le':\n\t\t\t\t\t\t\treturn len * 2;\n\t\t\t\t\t\tcase 'hex':\n\t\t\t\t\t\t\treturn len >>> 1;\n\t\t\t\t\t\tcase 'base64':\n\t\t\t\t\t\t\treturn base64ToBytes(string).length;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif (loweredCase) return utf8ToBytes(string).length;\n\t\t\t\t\t\t\tencoding = ('' + encoding).toLowerCase();\n\t\t\t\t\t\t\tloweredCase = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tBuffer.byteLength = byteLength;\n\n\t\t\tfunction slowToString(encoding, start, end) {\n\t\t\t\tvar loweredCase = false;\n\n\t\t\t\tstart = start | 0;\n\t\t\t\tend = end === undefined || end === Infinity ? this.length : end | 0;\n\n\t\t\t\tif (!encoding) encoding = 'utf8';\n\t\t\t\tif (start < 0) start = 0;\n\t\t\t\tif (end > this.length) end = this.length;\n\t\t\t\tif (end <= start) return '';\n\n\t\t\t\twhile (true) {\n\t\t\t\t\tswitch (encoding) {\n\t\t\t\t\t\tcase 'hex':\n\t\t\t\t\t\t\treturn hexSlice(this, start, end);\n\n\t\t\t\t\t\tcase 'utf8':\n\t\t\t\t\t\tcase 'utf-8':\n\t\t\t\t\t\t\treturn utf8Slice(this, start, end);\n\n\t\t\t\t\t\tcase 'ascii':\n\t\t\t\t\t\t\treturn asciiSlice(this, start, end);\n\n\t\t\t\t\t\tcase 'binary':\n\t\t\t\t\t\t\treturn binarySlice(this, start, end);\n\n\t\t\t\t\t\tcase 'base64':\n\t\t\t\t\t\t\treturn base64Slice(this, start, end);\n\n\t\t\t\t\t\tcase 'ucs2':\n\t\t\t\t\t\tcase 'ucs-2':\n\t\t\t\t\t\tcase 'utf16le':\n\t\t\t\t\t\tcase 'utf-16le':\n\t\t\t\t\t\t\treturn utf16leSlice(this, start, end);\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n\t\t\t\t\t\t\tencoding = (encoding + '').toLowerCase();\n\t\t\t\t\t\t\tloweredCase = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBuffer.prototype._isBuffer = true;\n\n\t\t\tBuffer.prototype.toString = function toString() {\n\t\t\t\tvar length = this.length | 0;\n\t\t\t\tif (length === 0) return '';\n\t\t\t\tif (arguments.length === 0) return utf8Slice(this, 0, length);\n\t\t\t\treturn slowToString.apply(this, arguments);\n\t\t\t};\n\n\t\t\tBuffer.prototype.equals = function equals(b) {\n\t\t\t\tif (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n\t\t\t\tif (this === b) return true;\n\t\t\t\treturn Buffer.compare(this, b) === 0;\n\t\t\t};\n\n\t\t\tBuffer.prototype.inspect = function inspect() {\n\t\t\t\tvar str = '';\n\t\t\t\tvar max = exports.INSPECT_MAX_BYTES;\n\t\t\t\tif (this.length > 0) {\n\t\t\t\t\tstr = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n\t\t\t\t\tif (this.length > max) str += ' ... ';\n\t\t\t\t}\n\t\t\t\treturn '<Buffer ' + str + '>';\n\t\t\t};\n\n\t\t\tBuffer.prototype.compare = function compare(b) {\n\t\t\t\tif (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n\t\t\t\tif (this === b) return 0;\n\t\t\t\treturn Buffer.compare(this, b);\n\t\t\t};\n\n\t\t\tBuffer.prototype.indexOf = function indexOf(val, byteOffset) {\n\t\t\t\tif (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff;else if (byteOffset < -0x80000000) byteOffset = -0x80000000;\n\t\t\t\tbyteOffset >>= 0;\n\n\t\t\t\tif (this.length === 0) return -1;\n\t\t\t\tif (byteOffset >= this.length) return -1;\n\n\t\t\t\tif (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0);\n\n\t\t\t\tif (typeof val === 'string') {\n\t\t\t\t\tif (val.length === 0) return -1;\n\t\t\t\t\treturn String.prototype.indexOf.call(this, val, byteOffset);\n\t\t\t\t}\n\t\t\t\tif (Buffer.isBuffer(val)) {\n\t\t\t\t\treturn arrayIndexOf(this, val, byteOffset);\n\t\t\t\t}\n\t\t\t\tif (typeof val === 'number') {\n\t\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n\t\t\t\t\t\treturn Uint8Array.prototype.indexOf.call(this, val, byteOffset);\n\t\t\t\t\t}\n\t\t\t\t\treturn arrayIndexOf(this, [val], byteOffset);\n\t\t\t\t}\n\n\t\t\t\tfunction arrayIndexOf(arr, val, byteOffset) {\n\t\t\t\t\tvar foundIndex = -1;\n\t\t\t\t\tfor (var i = 0; byteOffset + i < arr.length; i++) {\n\t\t\t\t\t\tif (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n\t\t\t\t\t\t\tif (foundIndex === -1) foundIndex = i;\n\t\t\t\t\t\t\tif (i - foundIndex + 1 === val.length) return byteOffset + foundIndex;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfoundIndex = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\tthrow new TypeError('val must be string, number or Buffer');\n\t\t\t};\n\n\t\t\tfunction hexWrite(buf, string, offset, length) {\n\t\t\t\toffset = Number(offset) || 0;\n\t\t\t\tvar remaining = buf.length - offset;\n\t\t\t\tif (!length) {\n\t\t\t\t\tlength = remaining;\n\t\t\t\t} else {\n\t\t\t\t\tlength = Number(length);\n\t\t\t\t\tif (length > remaining) {\n\t\t\t\t\t\tlength = remaining;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar strLen = string.length;\n\t\t\t\tif (strLen % 2 !== 0) throw new Error('Invalid hex string');\n\n\t\t\t\tif (length > strLen / 2) {\n\t\t\t\t\tlength = strLen / 2;\n\t\t\t\t}\n\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\tvar parsed = parseInt(string.substr(i * 2, 2), 16);\n\t\t\t\t\tif (isNaN(parsed)) throw new Error('Invalid hex string');\n\t\t\t\t\tbuf[offset + i] = parsed;\n\t\t\t\t}\n\t\t\t\treturn i;\n\t\t\t}\n\n\t\t\tfunction utf8Write(buf, string, offset, length) {\n\t\t\t\treturn blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n\t\t\t}\n\n\t\t\tfunction asciiWrite(buf, string, offset, length) {\n\t\t\t\treturn blitBuffer(asciiToBytes(string), buf, offset, length);\n\t\t\t}\n\n\t\t\tfunction binaryWrite(buf, string, offset, length) {\n\t\t\t\treturn asciiWrite(buf, string, offset, length);\n\t\t\t}\n\n\t\t\tfunction base64Write(buf, string, offset, length) {\n\t\t\t\treturn blitBuffer(base64ToBytes(string), buf, offset, length);\n\t\t\t}\n\n\t\t\tfunction ucs2Write(buf, string, offset, length) {\n\t\t\t\treturn blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n\t\t\t}\n\n\t\t\tBuffer.prototype.write = function write(string, offset, length, encoding) {\n\t\t\t\tif (offset === undefined) {\n\t\t\t\t\tencoding = 'utf8';\n\t\t\t\t\tlength = this.length;\n\t\t\t\t\toffset = 0;\n\t\t\t\t} else if (length === undefined && typeof offset === 'string') {\n\t\t\t\t\tencoding = offset;\n\t\t\t\t\tlength = this.length;\n\t\t\t\t\toffset = 0;\n\t\t\t\t} else if (isFinite(offset)) {\n\t\t\t\t\toffset = offset | 0;\n\t\t\t\t\tif (isFinite(length)) {\n\t\t\t\t\t\tlength = length | 0;\n\t\t\t\t\t\tif (encoding === undefined) encoding = 'utf8';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tencoding = length;\n\t\t\t\t\t\tlength = undefined;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar swap = encoding;\n\t\t\t\t\tencoding = offset;\n\t\t\t\t\toffset = length | 0;\n\t\t\t\t\tlength = swap;\n\t\t\t\t}\n\n\t\t\t\tvar remaining = this.length - offset;\n\t\t\t\tif (length === undefined || length > remaining) length = remaining;\n\n\t\t\t\tif (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n\t\t\t\t\tthrow new RangeError('attempt to write outside buffer bounds');\n\t\t\t\t}\n\n\t\t\t\tif (!encoding) encoding = 'utf8';\n\n\t\t\t\tvar loweredCase = false;\n\t\t\t\tfor (;;) {\n\t\t\t\t\tswitch (encoding) {\n\t\t\t\t\t\tcase 'hex':\n\t\t\t\t\t\t\treturn hexWrite(this, string, offset, length);\n\n\t\t\t\t\t\tcase 'utf8':\n\t\t\t\t\t\tcase 'utf-8':\n\t\t\t\t\t\t\treturn utf8Write(this, string, offset, length);\n\n\t\t\t\t\t\tcase 'ascii':\n\t\t\t\t\t\t\treturn asciiWrite(this, string, offset, length);\n\n\t\t\t\t\t\tcase 'binary':\n\t\t\t\t\t\t\treturn binaryWrite(this, string, offset, length);\n\n\t\t\t\t\t\tcase 'base64':\n\t\t\t\t\t\t\treturn base64Write(this, string, offset, length);\n\n\t\t\t\t\t\tcase 'ucs2':\n\t\t\t\t\t\tcase 'ucs-2':\n\t\t\t\t\t\tcase 'utf16le':\n\t\t\t\t\t\tcase 'utf-16le':\n\t\t\t\t\t\t\treturn ucs2Write(this, string, offset, length);\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n\t\t\t\t\t\t\tencoding = ('' + encoding).toLowerCase();\n\t\t\t\t\t\t\tloweredCase = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tBuffer.prototype.toJSON = function toJSON() {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'Buffer',\n\t\t\t\t\tdata: Array.prototype.slice.call(this._arr || this, 0)\n\t\t\t\t};\n\t\t\t};\n\n\t\t\tfunction base64Slice(buf, start, end) {\n\t\t\t\tif (start === 0 && end === buf.length) {\n\t\t\t\t\treturn base64.fromByteArray(buf);\n\t\t\t\t} else {\n\t\t\t\t\treturn base64.fromByteArray(buf.slice(start, end));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction utf8Slice(buf, start, end) {\n\t\t\t\tend = Math.min(buf.length, end);\n\t\t\t\tvar res = [];\n\n\t\t\t\tvar i = start;\n\t\t\t\twhile (i < end) {\n\t\t\t\t\tvar firstByte = buf[i];\n\t\t\t\t\tvar codePoint = null;\n\t\t\t\t\tvar bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n\t\t\t\t\tif (i + bytesPerSequence <= end) {\n\t\t\t\t\t\tvar secondByte, thirdByte, fourthByte, tempCodePoint;\n\n\t\t\t\t\t\tswitch (bytesPerSequence) {\n\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\tif (firstByte < 0x80) {\n\t\t\t\t\t\t\t\t\tcodePoint = firstByte;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tsecondByte = buf[i + 1];\n\t\t\t\t\t\t\t\tif ((secondByte & 0xC0) === 0x80) {\n\t\t\t\t\t\t\t\t\ttempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n\t\t\t\t\t\t\t\t\tif (tempCodePoint > 0x7F) {\n\t\t\t\t\t\t\t\t\t\tcodePoint = tempCodePoint;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tsecondByte = buf[i + 1];\n\t\t\t\t\t\t\t\tthirdByte = buf[i + 2];\n\t\t\t\t\t\t\t\tif ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n\t\t\t\t\t\t\t\t\ttempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n\t\t\t\t\t\t\t\t\tif (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n\t\t\t\t\t\t\t\t\t\tcodePoint = tempCodePoint;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tsecondByte = buf[i + 1];\n\t\t\t\t\t\t\t\tthirdByte = buf[i + 2];\n\t\t\t\t\t\t\t\tfourthByte = buf[i + 3];\n\t\t\t\t\t\t\t\tif ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n\t\t\t\t\t\t\t\t\ttempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n\t\t\t\t\t\t\t\t\tif (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n\t\t\t\t\t\t\t\t\t\tcodePoint = tempCodePoint;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (codePoint === null) {\n\t\t\t\t\t\tcodePoint = 0xFFFD;\n\t\t\t\t\t\tbytesPerSequence = 1;\n\t\t\t\t\t} else if (codePoint > 0xFFFF) {\n\t\t\t\t\t\tcodePoint -= 0x10000;\n\t\t\t\t\t\tres.push(codePoint >>> 10 & 0x3FF | 0xD800);\n\t\t\t\t\t\tcodePoint = 0xDC00 | codePoint & 0x3FF;\n\t\t\t\t\t}\n\n\t\t\t\t\tres.push(codePoint);\n\t\t\t\t\ti += bytesPerSequence;\n\t\t\t\t}\n\n\t\t\t\treturn decodeCodePointsArray(res);\n\t\t\t}\n\n\t\t\tvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\n\t\t\tfunction decodeCodePointsArray(codePoints) {\n\t\t\t\tvar len = codePoints.length;\n\t\t\t\tif (len <= MAX_ARGUMENTS_LENGTH) {\n\t\t\t\t\treturn String.fromCharCode.apply(String, codePoints);\n\t\t\t\t}\n\n\t\t\t\tvar res = '';\n\t\t\t\tvar i = 0;\n\t\t\t\twhile (i < len) {\n\t\t\t\t\tres += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n\t\t\t\t}\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tfunction asciiSlice(buf, start, end) {\n\t\t\t\tvar ret = '';\n\t\t\t\tend = Math.min(buf.length, end);\n\n\t\t\t\tfor (var i = start; i < end; i++) {\n\t\t\t\t\tret += String.fromCharCode(buf[i] & 0x7F);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\tfunction binarySlice(buf, start, end) {\n\t\t\t\tvar ret = '';\n\t\t\t\tend = Math.min(buf.length, end);\n\n\t\t\t\tfor (var i = start; i < end; i++) {\n\t\t\t\t\tret += String.fromCharCode(buf[i]);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\tfunction hexSlice(buf, start, end) {\n\t\t\t\tvar len = buf.length;\n\n\t\t\t\tif (!start || start < 0) start = 0;\n\t\t\t\tif (!end || end < 0 || end > len) end = len;\n\n\t\t\t\tvar out = '';\n\t\t\t\tfor (var i = start; i < end; i++) {\n\t\t\t\t\tout += toHex(buf[i]);\n\t\t\t\t}\n\t\t\t\treturn out;\n\t\t\t}\n\n\t\t\tfunction utf16leSlice(buf, start, end) {\n\t\t\t\tvar bytes = buf.slice(start, end);\n\t\t\t\tvar res = '';\n\t\t\t\tfor (var i = 0; i < bytes.length; i += 2) {\n\t\t\t\t\tres += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n\t\t\t\t}\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tBuffer.prototype.slice = function slice(start, end) {\n\t\t\t\tvar len = this.length;\n\t\t\t\tstart = ~~start;\n\t\t\t\tend = end === undefined ? len : ~~end;\n\n\t\t\t\tif (start < 0) {\n\t\t\t\t\tstart += len;\n\t\t\t\t\tif (start < 0) start = 0;\n\t\t\t\t} else if (start > len) {\n\t\t\t\t\tstart = len;\n\t\t\t\t}\n\n\t\t\t\tif (end < 0) {\n\t\t\t\t\tend += len;\n\t\t\t\t\tif (end < 0) end = 0;\n\t\t\t\t} else if (end > len) {\n\t\t\t\t\tend = len;\n\t\t\t\t}\n\n\t\t\t\tif (end < start) end = start;\n\n\t\t\t\tvar newBuf;\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tnewBuf = this.subarray(start, end);\n\t\t\t\t\tnewBuf.__proto__ = Buffer.prototype;\n\t\t\t\t} else {\n\t\t\t\t\tvar sliceLen = end - start;\n\t\t\t\t\tnewBuf = new Buffer(sliceLen, undefined);\n\t\t\t\t\tfor (var i = 0; i < sliceLen; i++) {\n\t\t\t\t\t\tnewBuf[i] = this[i + start];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (newBuf.length) newBuf.parent = this.parent || this;\n\n\t\t\t\treturn newBuf;\n\t\t\t};\n\n\t\t\tfunction checkOffset(offset, ext, length) {\n\t\t\t\tif (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n\t\t\t\tif (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n\t\t\t}\n\n\t\t\tBuffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n\t\t\t\toffset = offset | 0;\n\t\t\t\tbyteLength = byteLength | 0;\n\t\t\t\tif (!noAssert) checkOffset(offset, byteLength, this.length);\n\n\t\t\t\tvar val = this[offset];\n\t\t\t\tvar mul = 1;\n\t\t\t\tvar i = 0;\n\t\t\t\twhile (++i < byteLength && (mul *= 0x100)) {\n\t\t\t\t\tval += this[offset + i] * mul;\n\t\t\t\t}\n\n\t\t\t\treturn val;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n\t\t\t\toffset = offset | 0;\n\t\t\t\tbyteLength = byteLength | 0;\n\t\t\t\tif (!noAssert) {\n\t\t\t\t\tcheckOffset(offset, byteLength, this.length);\n\t\t\t\t}\n\n\t\t\t\tvar val = this[offset + --byteLength];\n\t\t\t\tvar mul = 1;\n\t\t\t\twhile (byteLength > 0 && (mul *= 0x100)) {\n\t\t\t\t\tval += this[offset + --byteLength] * mul;\n\t\t\t\t}\n\n\t\t\t\treturn val;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 1, this.length);\n\t\t\t\treturn this[offset];\n\t\t\t};\n\n\t\t\tBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 2, this.length);\n\t\t\t\treturn this[offset] | this[offset + 1] << 8;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 2, this.length);\n\t\t\t\treturn this[offset] << 8 | this[offset + 1];\n\t\t\t};\n\n\t\t\tBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 4, this.length);\n\n\t\t\t\treturn (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 4, this.length);\n\n\t\t\t\treturn this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n\t\t\t};\n\n\t\t\tBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n\t\t\t\toffset = offset | 0;\n\t\t\t\tbyteLength = byteLength | 0;\n\t\t\t\tif (!noAssert) checkOffset(offset, byteLength, this.length);\n\n\t\t\t\tvar val = this[offset];\n\t\t\t\tvar mul = 1;\n\t\t\t\tvar i = 0;\n\t\t\t\twhile (++i < byteLength && (mul *= 0x100)) {\n\t\t\t\t\tval += this[offset + i] * mul;\n\t\t\t\t}\n\t\t\t\tmul *= 0x80;\n\n\t\t\t\tif (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n\t\t\t\treturn val;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n\t\t\t\toffset = offset | 0;\n\t\t\t\tbyteLength = byteLength | 0;\n\t\t\t\tif (!noAssert) checkOffset(offset, byteLength, this.length);\n\n\t\t\t\tvar i = byteLength;\n\t\t\t\tvar mul = 1;\n\t\t\t\tvar val = this[offset + --i];\n\t\t\t\twhile (i > 0 && (mul *= 0x100)) {\n\t\t\t\t\tval += this[offset + --i] * mul;\n\t\t\t\t}\n\t\t\t\tmul *= 0x80;\n\n\t\t\t\tif (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n\t\t\t\treturn val;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 1, this.length);\n\t\t\t\tif (!(this[offset] & 0x80)) return this[offset];\n\t\t\t\treturn (0xff - this[offset] + 1) * -1;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 2, this.length);\n\t\t\t\tvar val = this[offset] | this[offset + 1] << 8;\n\t\t\t\treturn val & 0x8000 ? val | 0xFFFF0000 : val;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 2, this.length);\n\t\t\t\tvar val = this[offset + 1] | this[offset] << 8;\n\t\t\t\treturn val & 0x8000 ? val | 0xFFFF0000 : val;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 4, this.length);\n\n\t\t\t\treturn this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n\t\t\t};\n\n\t\t\tBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 4, this.length);\n\n\t\t\t\treturn this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n\t\t\t};\n\n\t\t\tBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 4, this.length);\n\t\t\t\treturn ieee754.read(this, offset, true, 23, 4);\n\t\t\t};\n\n\t\t\tBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 4, this.length);\n\t\t\t\treturn ieee754.read(this, offset, false, 23, 4);\n\t\t\t};\n\n\t\t\tBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 8, this.length);\n\t\t\t\treturn ieee754.read(this, offset, true, 52, 8);\n\t\t\t};\n\n\t\t\tBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n\t\t\t\tif (!noAssert) checkOffset(offset, 8, this.length);\n\t\t\t\treturn ieee754.read(this, offset, false, 52, 8);\n\t\t\t};\n\n\t\t\tfunction checkInt(buf, value, offset, ext, max, min) {\n\t\t\t\tif (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance');\n\t\t\t\tif (value > max || value < min) throw new RangeError('value is out of bounds');\n\t\t\t\tif (offset + ext > buf.length) throw new RangeError('index out of range');\n\t\t\t}\n\n\t\t\tBuffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tbyteLength = byteLength | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0);\n\n\t\t\t\tvar mul = 1;\n\t\t\t\tvar i = 0;\n\t\t\t\tthis[offset] = value & 0xFF;\n\t\t\t\twhile (++i < byteLength && (mul *= 0x100)) {\n\t\t\t\t\tthis[offset + i] = value / mul & 0xFF;\n\t\t\t\t}\n\n\t\t\t\treturn offset + byteLength;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tbyteLength = byteLength | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0);\n\n\t\t\t\tvar i = byteLength - 1;\n\t\t\t\tvar mul = 1;\n\t\t\t\tthis[offset + i] = value & 0xFF;\n\t\t\t\twhile (--i >= 0 && (mul *= 0x100)) {\n\t\t\t\t\tthis[offset + i] = value / mul & 0xFF;\n\t\t\t\t}\n\n\t\t\t\treturn offset + byteLength;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n\t\t\t\tif (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n\t\t\t\tthis[offset] = value & 0xff;\n\t\t\t\treturn offset + 1;\n\t\t\t};\n\n\t\t\tfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n\t\t\t\tif (value < 0) value = 0xffff + value + 1;\n\t\t\t\tfor (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n\t\t\t\t\tbuf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBuffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value & 0xff;\n\t\t\t\t\tthis[offset + 1] = value >>> 8;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt16(this, value, offset, true);\n\t\t\t\t}\n\t\t\t\treturn offset + 2;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value >>> 8;\n\t\t\t\t\tthis[offset + 1] = value & 0xff;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt16(this, value, offset, false);\n\t\t\t\t}\n\t\t\t\treturn offset + 2;\n\t\t\t};\n\n\t\t\tfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n\t\t\t\tif (value < 0) value = 0xffffffff + value + 1;\n\t\t\t\tfor (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n\t\t\t\t\tbuf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBuffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset + 3] = value >>> 24;\n\t\t\t\t\tthis[offset + 2] = value >>> 16;\n\t\t\t\t\tthis[offset + 1] = value >>> 8;\n\t\t\t\t\tthis[offset] = value & 0xff;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt32(this, value, offset, true);\n\t\t\t\t}\n\t\t\t\treturn offset + 4;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value >>> 24;\n\t\t\t\t\tthis[offset + 1] = value >>> 16;\n\t\t\t\t\tthis[offset + 2] = value >>> 8;\n\t\t\t\t\tthis[offset + 3] = value & 0xff;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt32(this, value, offset, false);\n\t\t\t\t}\n\t\t\t\treturn offset + 4;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) {\n\t\t\t\t\tvar limit = Math.pow(2, 8 * byteLength - 1);\n\n\t\t\t\t\tcheckInt(this, value, offset, byteLength, limit - 1, -limit);\n\t\t\t\t}\n\n\t\t\t\tvar i = 0;\n\t\t\t\tvar mul = 1;\n\t\t\t\tvar sub = value < 0 ? 1 : 0;\n\t\t\t\tthis[offset] = value & 0xFF;\n\t\t\t\twhile (++i < byteLength && (mul *= 0x100)) {\n\t\t\t\t\tthis[offset + i] = (value / mul >> 0) - sub & 0xFF;\n\t\t\t\t}\n\n\t\t\t\treturn offset + byteLength;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) {\n\t\t\t\t\tvar limit = Math.pow(2, 8 * byteLength - 1);\n\n\t\t\t\t\tcheckInt(this, value, offset, byteLength, limit - 1, -limit);\n\t\t\t\t}\n\n\t\t\t\tvar i = byteLength - 1;\n\t\t\t\tvar mul = 1;\n\t\t\t\tvar sub = value < 0 ? 1 : 0;\n\t\t\t\tthis[offset + i] = value & 0xFF;\n\t\t\t\twhile (--i >= 0 && (mul *= 0x100)) {\n\t\t\t\t\tthis[offset + i] = (value / mul >> 0) - sub & 0xFF;\n\t\t\t\t}\n\n\t\t\t\treturn offset + byteLength;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n\t\t\t\tif (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n\t\t\t\tif (value < 0) value = 0xff + value + 1;\n\t\t\t\tthis[offset] = value & 0xff;\n\t\t\t\treturn offset + 1;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value & 0xff;\n\t\t\t\t\tthis[offset + 1] = value >>> 8;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt16(this, value, offset, true);\n\t\t\t\t}\n\t\t\t\treturn offset + 2;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value >>> 8;\n\t\t\t\t\tthis[offset + 1] = value & 0xff;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt16(this, value, offset, false);\n\t\t\t\t}\n\t\t\t\treturn offset + 2;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value & 0xff;\n\t\t\t\t\tthis[offset + 1] = value >>> 8;\n\t\t\t\t\tthis[offset + 2] = value >>> 16;\n\t\t\t\t\tthis[offset + 3] = value >>> 24;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt32(this, value, offset, true);\n\t\t\t\t}\n\t\t\t\treturn offset + 4;\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n\t\t\t\tvalue = +value;\n\t\t\t\toffset = offset | 0;\n\t\t\t\tif (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\t\t\t\tif (value < 0) value = 0xffffffff + value + 1;\n\t\t\t\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tthis[offset] = value >>> 24;\n\t\t\t\t\tthis[offset + 1] = value >>> 16;\n\t\t\t\t\tthis[offset + 2] = value >>> 8;\n\t\t\t\t\tthis[offset + 3] = value & 0xff;\n\t\t\t\t} else {\n\t\t\t\t\tobjectWriteUInt32(this, value, offset, false);\n\t\t\t\t}\n\t\t\t\treturn offset + 4;\n\t\t\t};\n\n\t\t\tfunction checkIEEE754(buf, value, offset, ext, max, min) {\n\t\t\t\tif (value > max || value < min) throw new RangeError('value is out of bounds');\n\t\t\t\tif (offset + ext > buf.length) throw new RangeError('index out of range');\n\t\t\t\tif (offset < 0) throw new RangeError('index out of range');\n\t\t\t}\n\n\t\t\tfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n\t\t\t\tif (!noAssert) {\n\t\t\t\t\tcheckIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n\t\t\t\t}\n\t\t\t\tieee754.write(buf, value, offset, littleEndian, 23, 4);\n\t\t\t\treturn offset + 4;\n\t\t\t}\n\n\t\t\tBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n\t\t\t\treturn writeFloat(this, value, offset, true, noAssert);\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n\t\t\t\treturn writeFloat(this, value, offset, false, noAssert);\n\t\t\t};\n\n\t\t\tfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n\t\t\t\tif (!noAssert) {\n\t\t\t\t\tcheckIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n\t\t\t\t}\n\t\t\t\tieee754.write(buf, value, offset, littleEndian, 52, 8);\n\t\t\t\treturn offset + 8;\n\t\t\t}\n\n\t\t\tBuffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n\t\t\t\treturn writeDouble(this, value, offset, true, noAssert);\n\t\t\t};\n\n\t\t\tBuffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n\t\t\t\treturn writeDouble(this, value, offset, false, noAssert);\n\t\t\t};\n\n\t\t\tBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n\t\t\t\tif (!start) start = 0;\n\t\t\t\tif (!end && end !== 0) end = this.length;\n\t\t\t\tif (targetStart >= target.length) targetStart = target.length;\n\t\t\t\tif (!targetStart) targetStart = 0;\n\t\t\t\tif (end > 0 && end < start) end = start;\n\n\t\t\t\tif (end === start) return 0;\n\t\t\t\tif (target.length === 0 || this.length === 0) return 0;\n\n\t\t\t\tif (targetStart < 0) {\n\t\t\t\t\tthrow new RangeError('targetStart out of bounds');\n\t\t\t\t}\n\t\t\t\tif (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n\t\t\t\tif (end < 0) throw new RangeError('sourceEnd out of bounds');\n\n\t\t\t\tif (end > this.length) end = this.length;\n\t\t\t\tif (target.length - targetStart < end - start) {\n\t\t\t\t\tend = target.length - targetStart + start;\n\t\t\t\t}\n\n\t\t\t\tvar len = end - start;\n\t\t\t\tvar i;\n\n\t\t\t\tif (this === target && start < targetStart && targetStart < end) {\n\t\t\t\t\tfor (i = len - 1; i >= 0; i--) {\n\t\t\t\t\t\ttarget[i + targetStart] = this[i + start];\n\t\t\t\t\t}\n\t\t\t\t} else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n\t\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\t\ttarget[i + targetStart] = this[i + start];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tUint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n\t\t\t\t}\n\n\t\t\t\treturn len;\n\t\t\t};\n\n\t\t\tBuffer.prototype.fill = function fill(value, start, end) {\n\t\t\t\tif (!value) value = 0;\n\t\t\t\tif (!start) start = 0;\n\t\t\t\tif (!end) end = this.length;\n\n\t\t\t\tif (end < start) throw new RangeError('end < start');\n\n\t\t\t\tif (end === start) return;\n\t\t\t\tif (this.length === 0) return;\n\n\t\t\t\tif (start < 0 || start >= this.length) throw new RangeError('start out of bounds');\n\t\t\t\tif (end < 0 || end > this.length) throw new RangeError('end out of bounds');\n\n\t\t\t\tvar i;\n\t\t\t\tif (typeof value === 'number') {\n\t\t\t\t\tfor (i = start; i < end; i++) {\n\t\t\t\t\t\tthis[i] = value;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar bytes = utf8ToBytes(value.toString());\n\t\t\t\t\tvar len = bytes.length;\n\t\t\t\t\tfor (i = start; i < end; i++) {\n\t\t\t\t\t\tthis[i] = bytes[i % len];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn this;\n\t\t\t};\n\n\t\t\tvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\n\t\t\tfunction base64clean(str) {\n\t\t\t\tstr = stringtrim(str).replace(INVALID_BASE64_RE, '');\n\n\t\t\t\tif (str.length < 2) return '';\n\n\t\t\t\twhile (str.length % 4 !== 0) {\n\t\t\t\t\tstr = str + '=';\n\t\t\t\t}\n\t\t\t\treturn str;\n\t\t\t}\n\n\t\t\tfunction stringtrim(str) {\n\t\t\t\tif (str.trim) return str.trim();\n\t\t\t\treturn str.replace(/^\\s+|\\s+$/g, '');\n\t\t\t}\n\n\t\t\tfunction toHex(n) {\n\t\t\t\tif (n < 16) return '0' + n.toString(16);\n\t\t\t\treturn n.toString(16);\n\t\t\t}\n\n\t\t\tfunction utf8ToBytes(string, units) {\n\t\t\t\tunits = units || Infinity;\n\t\t\t\tvar codePoint;\n\t\t\t\tvar length = string.length;\n\t\t\t\tvar leadSurrogate = null;\n\t\t\t\tvar bytes = [];\n\n\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\tcodePoint = string.charCodeAt(i);\n\n\t\t\t\t\tif (codePoint > 0xD7FF && codePoint < 0xE000) {\n\t\t\t\t\t\tif (!leadSurrogate) {\n\t\t\t\t\t\t\tif (codePoint > 0xDBFF) {\n\t\t\t\t\t\t\t\tif ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t} else if (i + 1 === length) {\n\t\t\t\t\t\t\t\tif ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tleadSurrogate = codePoint;\n\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (codePoint < 0xDC00) {\n\t\t\t\t\t\t\tif ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n\t\t\t\t\t\t\tleadSurrogate = codePoint;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcodePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n\t\t\t\t\t} else if (leadSurrogate) {\n\t\t\t\t\t\tif ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n\t\t\t\t\t}\n\n\t\t\t\t\tleadSurrogate = null;\n\n\t\t\t\t\tif (codePoint < 0x80) {\n\t\t\t\t\t\tif ((units -= 1) < 0) break;\n\t\t\t\t\t\tbytes.push(codePoint);\n\t\t\t\t\t} else if (codePoint < 0x800) {\n\t\t\t\t\t\tif ((units -= 2) < 0) break;\n\t\t\t\t\t\tbytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n\t\t\t\t\t} else if (codePoint < 0x10000) {\n\t\t\t\t\t\tif ((units -= 3) < 0) break;\n\t\t\t\t\t\tbytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n\t\t\t\t\t} else if (codePoint < 0x110000) {\n\t\t\t\t\t\tif ((units -= 4) < 0) break;\n\t\t\t\t\t\tbytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('Invalid code point');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn bytes;\n\t\t\t}\n\n\t\t\tfunction asciiToBytes(str) {\n\t\t\t\tvar byteArray = [];\n\t\t\t\tfor (var i = 0; i < str.length; i++) {\n\t\t\t\t\tbyteArray.push(str.charCodeAt(i) & 0xFF);\n\t\t\t\t}\n\t\t\t\treturn byteArray;\n\t\t\t}\n\n\t\t\tfunction utf16leToBytes(str, units) {\n\t\t\t\tvar c, hi, lo;\n\t\t\t\tvar byteArray = [];\n\t\t\t\tfor (var i = 0; i < str.length; i++) {\n\t\t\t\t\tif ((units -= 2) < 0) break;\n\n\t\t\t\t\tc = str.charCodeAt(i);\n\t\t\t\t\thi = c >> 8;\n\t\t\t\t\tlo = c % 256;\n\t\t\t\t\tbyteArray.push(lo);\n\t\t\t\t\tbyteArray.push(hi);\n\t\t\t\t}\n\n\t\t\t\treturn byteArray;\n\t\t\t}\n\n\t\t\tfunction base64ToBytes(str) {\n\t\t\t\treturn base64.toByteArray(base64clean(str));\n\t\t\t}\n\n\t\t\tfunction blitBuffer(src, dst, offset, length) {\n\t\t\t\tfor (var i = 0; i < length; i++) {\n\t\t\t\t\tif (i + offset >= dst.length || i >= src.length) break;\n\t\t\t\t\tdst[i + offset] = src[i];\n\t\t\t\t}\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}).call(this, typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n\t}, { \"base64-js\": 38, \"ieee754\": 39, \"isarray\": 40 }], 38: [function (require, module, exports) {\n\t\t;(function (exports) {\n\t\t\t'use strict';\n\n\t\t\tvar lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n\t\t\tvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\n\n\t\t\tvar PLUS = '+'.charCodeAt(0);\n\t\t\tvar SLASH = '/'.charCodeAt(0);\n\t\t\tvar NUMBER = '0'.charCodeAt(0);\n\t\t\tvar LOWER = 'a'.charCodeAt(0);\n\t\t\tvar UPPER = 'A'.charCodeAt(0);\n\t\t\tvar PLUS_URL_SAFE = '-'.charCodeAt(0);\n\t\t\tvar SLASH_URL_SAFE = '_'.charCodeAt(0);\n\n\t\t\tfunction decode(elt) {\n\t\t\t\tvar code = elt.charCodeAt(0);\n\t\t\t\tif (code === PLUS || code === PLUS_URL_SAFE) return 62;\n\t\t\t\tif (code === SLASH || code === SLASH_URL_SAFE) return 63;\n\t\t\t\tif (code < NUMBER) return -1;\n\t\t\t\tif (code < NUMBER + 10) return code - NUMBER + 26 + 26;\n\t\t\t\tif (code < UPPER + 26) return code - UPPER;\n\t\t\t\tif (code < LOWER + 26) return code - LOWER + 26;\n\t\t\t}\n\n\t\t\tfunction b64ToByteArray(b64) {\n\t\t\t\tvar i, j, l, tmp, placeHolders, arr;\n\n\t\t\t\tif (b64.length % 4 > 0) {\n\t\t\t\t\tthrow new Error('Invalid string. Length must be a multiple of 4');\n\t\t\t\t}\n\n\t\t\t\tvar len = b64.length;\n\t\t\t\tplaceHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0;\n\n\t\t\t\tarr = new Arr(b64.length * 3 / 4 - placeHolders);\n\n\t\t\t\tl = placeHolders > 0 ? b64.length - 4 : b64.length;\n\n\t\t\t\tvar L = 0;\n\n\t\t\t\tfunction push(v) {\n\t\t\t\t\tarr[L++] = v;\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t\t\t\t\ttmp = decode(b64.charAt(i)) << 18 | decode(b64.charAt(i + 1)) << 12 | decode(b64.charAt(i + 2)) << 6 | decode(b64.charAt(i + 3));\n\t\t\t\t\tpush((tmp & 0xFF0000) >> 16);\n\t\t\t\t\tpush((tmp & 0xFF00) >> 8);\n\t\t\t\t\tpush(tmp & 0xFF);\n\t\t\t\t}\n\n\t\t\t\tif (placeHolders === 2) {\n\t\t\t\t\ttmp = decode(b64.charAt(i)) << 2 | decode(b64.charAt(i + 1)) >> 4;\n\t\t\t\t\tpush(tmp & 0xFF);\n\t\t\t\t} else if (placeHolders === 1) {\n\t\t\t\t\ttmp = decode(b64.charAt(i)) << 10 | decode(b64.charAt(i + 1)) << 4 | decode(b64.charAt(i + 2)) >> 2;\n\t\t\t\t\tpush(tmp >> 8 & 0xFF);\n\t\t\t\t\tpush(tmp & 0xFF);\n\t\t\t\t}\n\n\t\t\t\treturn arr;\n\t\t\t}\n\n\t\t\tfunction uint8ToBase64(uint8) {\n\t\t\t\tvar i;\n\t\t\t\tvar extraBytes = uint8.length % 3;\n\t\t\t\tvar output = '';\n\t\t\t\tvar temp, length;\n\n\t\t\t\tfunction encode(num) {\n\t\t\t\t\treturn lookup.charAt(num);\n\t\t\t\t}\n\n\t\t\t\tfunction tripletToBase64(num) {\n\t\t\t\t\treturn encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F);\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t\t\t\t\ttemp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2];\n\t\t\t\t\toutput += tripletToBase64(temp);\n\t\t\t\t}\n\n\t\t\t\tswitch (extraBytes) {\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\ttemp = uint8[uint8.length - 1];\n\t\t\t\t\t\toutput += encode(temp >> 2);\n\t\t\t\t\t\toutput += encode(temp << 4 & 0x3F);\n\t\t\t\t\t\toutput += '==';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\ttemp = (uint8[uint8.length - 2] << 8) + uint8[uint8.length - 1];\n\t\t\t\t\t\toutput += encode(temp >> 10);\n\t\t\t\t\t\toutput += encode(temp >> 4 & 0x3F);\n\t\t\t\t\t\toutput += encode(temp << 2 & 0x3F);\n\t\t\t\t\t\toutput += '=';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn output;\n\t\t\t}\n\n\t\t\texports.toByteArray = b64ToByteArray;\n\t\t\texports.fromByteArray = uint8ToBase64;\n\t\t})(typeof exports === 'undefined' ? this.base64js = {} : exports);\n\t}, {}], 39: [function (require, module, exports) {\n\t\texports.read = function (buffer, offset, isLE, mLen, nBytes) {\n\t\t\tvar e, m;\n\t\t\tvar eLen = nBytes * 8 - mLen - 1;\n\t\t\tvar eMax = (1 << eLen) - 1;\n\t\t\tvar eBias = eMax >> 1;\n\t\t\tvar nBits = -7;\n\t\t\tvar i = isLE ? nBytes - 1 : 0;\n\t\t\tvar d = isLE ? -1 : 1;\n\t\t\tvar s = buffer[offset + i];\n\n\t\t\ti += d;\n\n\t\t\te = s & (1 << -nBits) - 1;\n\t\t\ts >>= -nBits;\n\t\t\tnBits += eLen;\n\t\t\tfor (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t\t\tm = e & (1 << -nBits) - 1;\n\t\t\te >>= -nBits;\n\t\t\tnBits += mLen;\n\t\t\tfor (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t\t\tif (e === 0) {\n\t\t\t\te = 1 - eBias;\n\t\t\t} else if (e === eMax) {\n\t\t\t\treturn m ? NaN : (s ? -1 : 1) * Infinity;\n\t\t\t} else {\n\t\t\t\tm = m + Math.pow(2, mLen);\n\t\t\t\te = e - eBias;\n\t\t\t}\n\t\t\treturn (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n\t\t};\n\n\t\texports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n\t\t\tvar e, m, c;\n\t\t\tvar eLen = nBytes * 8 - mLen - 1;\n\t\t\tvar eMax = (1 << eLen) - 1;\n\t\t\tvar eBias = eMax >> 1;\n\t\t\tvar rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n\t\t\tvar i = isLE ? 0 : nBytes - 1;\n\t\t\tvar d = isLE ? 1 : -1;\n\t\t\tvar s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n\n\t\t\tvalue = Math.abs(value);\n\n\t\t\tif (isNaN(value) || value === Infinity) {\n\t\t\t\tm = isNaN(value) ? 1 : 0;\n\t\t\t\te = eMax;\n\t\t\t} else {\n\t\t\t\te = Math.floor(Math.log(value) / Math.LN2);\n\t\t\t\tif (value * (c = Math.pow(2, -e)) < 1) {\n\t\t\t\t\te--;\n\t\t\t\t\tc *= 2;\n\t\t\t\t}\n\t\t\t\tif (e + eBias >= 1) {\n\t\t\t\t\tvalue += rt / c;\n\t\t\t\t} else {\n\t\t\t\t\tvalue += rt * Math.pow(2, 1 - eBias);\n\t\t\t\t}\n\t\t\t\tif (value * c >= 2) {\n\t\t\t\t\te++;\n\t\t\t\t\tc /= 2;\n\t\t\t\t}\n\n\t\t\t\tif (e + eBias >= eMax) {\n\t\t\t\t\tm = 0;\n\t\t\t\t\te = eMax;\n\t\t\t\t} else if (e + eBias >= 1) {\n\t\t\t\t\tm = (value * c - 1) * Math.pow(2, mLen);\n\t\t\t\t\te = e + eBias;\n\t\t\t\t} else {\n\t\t\t\t\tm = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n\t\t\t\t\te = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n\t\t\te = e << mLen | m;\n\t\t\teLen += mLen;\n\t\t\tfor (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n\t\t\tbuffer[offset + i - d] |= s * 128;\n\t\t};\n\t}, {}], 40: [function (require, module, exports) {\n\t\tvar toString = {}.toString;\n\n\t\tmodule.exports = Array.isArray || function (arr) {\n\t\t\treturn toString.call(arr) == '[object Array]';\n\t\t};\n\t}, {}] }, {}, [36]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PANOLENS);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(58), __webpack_require__(323)(module), __webpack_require__(23)))\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export getSize */\n/* unused harmony export getCenter */\n/* unused harmony export toIndexed */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_three__ = __webpack_require__(59);\n\n\nvar box = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Box3\"]();\n\nfunction getSize(object) {\n\n    box.setFromObject(object);\n\n    return box.getSize();\n}\n\nfunction getCenter(object) {\n\n    box.setFromObject(object);\n\n    return box.getCenter();\n}\n\nfunction lightsDiff(lights, oldLights) {}\n\nfunction toIndexed(bufferGeometry) {\n\n    var raw_positions = bufferGeometry.getAttribute('position').array;\n\n    var raw_uvs;\n    var hasUV = bufferGeometry.getAttribute('uv') !== undefined;\n    if (hasUV) raw_uvs = bufferGeometry.getAttribute('uv').array;\n\n    var raw_normals;\n    var hasNormal = bufferGeometry.getAttribute('normal') !== undefined;\n    if (hasNormal) raw_normals = bufferGeometry.getAttribute('normal').array;\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = [];\n\n    var face, face_normalss, face_uvs, tmp_indices;\n\n    var v0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector3\"]();\n    var v1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector3\"]();\n    var v2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector3\"]();\n\n    var n0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector3\"]();\n    var n1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector3\"]();\n    var n2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector3\"]();\n\n    var uv0 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector2\"]();\n    var uv1 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector2\"]();\n    var uv2 = new __WEBPACK_IMPORTED_MODULE_0_three__[\"Vector2\"]();\n\n    for (var i = 0; i < raw_positions.length; i += 9) {\n\n        v0.x = raw_positions[i];\n        v0.y = raw_positions[i + 1];\n        v0.z = raw_positions[i + 2];\n\n        v1.x = raw_positions[i + 3];\n        v1.y = raw_positions[i + 4];\n        v1.z = raw_positions[i + 5];\n\n        v2.x = raw_positions[i + 6];\n        v2.y = raw_positions[i + 7];\n        v2.z = raw_positions[i + 8];\n\n        face = [v0, v1, v2];\n\n        if (hasNormal) {\n\n            n0.x = raw_normals[i];\n            n0.y = raw_normals[i + 1];\n            n0.z = raw_normals[i + 2];\n\n            n1.x = raw_normals[i + 3];\n            n1.y = raw_normals[i + 4];\n            n1.z = raw_normals[i + 5];\n\n            n2.x = raw_normals[i + 6];\n            n2.y = raw_normals[i + 7];\n            n2.z = raw_normals[i + 8];\n\n            face_normalss = [n0, n1, n2];\n        }\n\n        if (hasUV) {\n\n            uv0.x = raw_uvs[i];\n            uv0.y = raw_uvs[i + 1];\n\n            uv1.x = raw_uvs[i + 2];\n            uv1.y = raw_uvs[i + 3];\n\n            uv2.x = raw_uvs[i + 4];\n            uv2.y = raw_uvs[i + 5];\n\n            face_uvs = [uv0, uv1, uv2];\n        }\n\n        tmp_indices = [];\n\n        face.forEach(function (v, i) {\n\n            var id = exists(v, vertices);\n            if (id == -1) {\n\n                id = vertices.length;\n                vertices.push(v.clone());\n\n                if (hasNormal) normals.push(face_normalss[i].clone());\n                if (hasUV) uvs.push(face_uvs[i].clone());\n            }\n            tmp_indices.push(id);\n        });\n\n        indices.push(tmp_indices[0], tmp_indices[1], tmp_indices[2]);\n    }\n\n    var positionBuffer = new Float32Array(vertices.length * 3);\n    if (hasNormal) var normalBuffer = new Float32Array(vertices.length * 3);\n    if (hasUV) var uvBuffer = new Float32Array(vertices.length * 2);\n\n    var i2 = 0;\n    var i3 = 0;\n    for (i = 0; i < vertices.length; i++) {\n\n        i3 = i * 3;\n\n        positionBuffer[i3] = vertices[i].x;\n        positionBuffer[i3 + 1] = vertices[i].y;\n        positionBuffer[i3 + 2] = vertices[i].z;\n\n        if (hasNormal) {\n\n            normalBuffer[i3] = normals[i].x;\n            normalBuffer[i3 + 1] = normals[i].y;\n            normalBuffer[i3 + 2] = normals[i].z;\n        }\n\n        if (hasUV) {\n\n            i2 = i * 2;\n            uvBuffer[i2] = uvs[i].x;\n            uvBuffer[i2 + 1] = uvs[i].y;\n        }\n    }\n\n    bufferGeometry.addAttribute('position', new __WEBPACK_IMPORTED_MODULE_0_three__[\"BufferAttribute\"](positionBuffer, 3));\n    if (hasNormal) bufferGeometry.addAttribute('normal', new __WEBPACK_IMPORTED_MODULE_0_three__[\"BufferAttribute\"](normalBuffer, 3));\n    if (hasUV) bufferGeometry.addAttribute('uv', new __WEBPACK_IMPORTED_MODULE_0_three__[\"BufferAttribute\"](uvBuffer, 2));\n    bufferGeometry.setIndex(new __WEBPACK_IMPORTED_MODULE_0_three__[\"BufferAttribute\"](new Uint32Array(indices), 1));\n    return bufferGeometry;\n\n    function exists(v, vertices) {\n        for (var i = 0; i < vertices.length; i++) {\n            if (v.equals(vertices[i])) return i;\n        }\n        return -1;\n    }\n}\n\n\n\n/***/ })\n\n},[63]);\n\n\n// WEBPACK FOOTER //\n// assets/js/app.03b1e6cb198f35a537f8.js","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".demo-block{width:100%;height:100%;background-color:#fff;border-radius:3px}.demo-block .demo-block-preview{width:70%;height:100%;float:left;position:relative}.demo-block .demo-block-code{width:30%;height:100%;background:#f9fafc;border-left:1px solid #dfe2e7;font-size:13px;float:left}.demo-block .demo-block-code pre code{font:normal 10pt Consolas,Monaco,monospace}.demo-block .demo-block-code .demo-block-code-box{width:100%;height:50%;position:relative;overflow:hidden}.demo-block .demo-block-code-box:after{content:\\\"\\\";display:block;position:absolute;bottom:0;left:0;width:90%;height:1px;background:-webkit-linear-gradient(left,#dfe2e7 80%,rgba(223,226,231,0))}.demo-block .demo-block-code-box h3{width:100%;padding:10px 20px;font-size:16px;font-weight:700;position:absolute}.demo-block .demo-block-code-box-content{position:absolute;top:40px;bottom:10px;left:20px;right:20px;overflow:auto}.demo-block .hljs{background:transparent}.demo-block .demo-block-code code{position:absolute;top:0;left:0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-213df8bf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/components/demo-block.vue\n// module id = 126\n// module chunks = 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"*{margin:0;border:0;padding:0;box-sizing:border-box}li,ol,ul{list-style:none}a{color:#657180;text-decoration:none}.demos,body,html{width:100%;height:100%;color:#657180}body{background:#eee;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background:#fff}.demos-header{position:absolute;top:0;width:100%;background:#f3f6fb;text-shadow:0 1px 0 hsla(0,0%,100%,.5);border-bottom:1px solid #dfe2e7;padding:15px 15px 15px 30px;line-height:20px}.demos-header .title{font-weight:700;font-size:18px;display:inline-block}.demos-header .github{color:#39f;display:inline-block;font-size:12px;float:right}.demos-content{width:100%;height:100%;padding-top:52px;overflow:hidden}.demos-menu{float:left;width:230px;height:100%;border-right:1px solid #dfe2e7;padding:10px 30px}.demos-menu .demos-menu-item{display:block;width:100%;height:30px;line-height:30px;font-size:14px;cursor:pointer}.demos-menu .demos-menu-item>a{display:block;width:100%;height:100%}.demos-menu .demos-menu-title{display:block;width:100%;padding:6px 0;margin-top:10px;font-size:14px;font-weight:700}.demos-menu .demos-menu-item:hover>a{color:#39f}.demos-pages{height:100%;overflow:hidden}.demo-loading{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center}.demo-loading:before{border-radius:100%;margin:2px;border:3px solid #20a0ff;border-bottom-color:transparent;height:36px;width:36px;animation:loading-rotate .75s 0s linear infinite}.demo-loading:after,.demo-loading:before{content:\\\"\\\";display:inline-block;vertical-align:middle}.demo-loading:after{height:100%;width:0}@keyframes loading-rotate{0%{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(.6)}to{transform:rotate(1turn) scale(1)}}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-223dbf78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/App.vue\n// module id = 127\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-cube-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29108898\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-cube-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-cube-pano.vue\n// module id = 309\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a5bfa54\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-pano.vue\n// module id = 310\n// module chunks = 1","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-video-pano.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-32faa3e6\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-video-pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/pages/demo-video-pano.vue\n// module id = 311\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demo-block\"\n  }, [_c('div', {\n    staticClass: \"demo-block-preview\"\n  }, [_vm._t(\"preview\")], 2), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code\"\n  }, [_c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"Vue Component & Webpack\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"vueCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.vueCode)))]), _vm._v(\"\\n                \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box\"\n  }, [_c('h3', [_vm._v(\"HTML & JS\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demo-block-code-box-content\"\n  }, [_c('pre', [_vm._v(\"                    \"), _c('code', {\n    ref: \"htmlCode\",\n    staticClass: \"html\"\n  }, [_vm._v(_vm._s(_vm._f(\"code\")(_vm.htmlCode)))]), _vm._v(\"\\n                \")])])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-213df8bf\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/components/demo-block.vue\n// module id = 312\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"demos\"\n  }, [_c('div', {\n    staticClass: \"demos-content\"\n  }, [_c('ul', {\n    staticClass: \"demos-menu\"\n  }, [_c('li', {\n    staticClass: \"demos-menu-title\"\n  }, [_vm._v(\"demos\")]), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-pano\"\n    }\n  }, [_vm._v(\"basic panorama\")])], 1), _vm._v(\" \"), _c('li', {\n    staticClass: \"demos-menu-item\"\n  }, [_c('router-link', {\n    attrs: {\n      \"to\": \"demo-cube-pano\"\n    }\n  }, [_vm._v(\"Cube Faces\")])], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"demos-pages\"\n  }, [_c('router-view')], 1)])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-223dbf78\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/App.vue\n// module id = 313\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"type\": \"cube\",\n      \"source\": \"assets/faces/pano_%s.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-29108898\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-cube-pano.vue\n// module id = 314\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"source\": \"assets/equirectangular.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a5bfa54\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-pano.vue\n// module id = 315\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('demo-block', {\n    attrs: {\n      \"vue-code\": _vm.code,\n      \"html-code\": _vm.htmlCode\n    }\n  }, [_c('template', {\n    slot: \"preview\"\n  }, [_c('Pano', {\n    attrs: {\n      \"src\": \"./../assets/equirectangular.jpg\"\n    },\n    on: {\n      \"on-load\": _vm.onLoad\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"demo-loading\"\n  })], 1)], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-32faa3e6\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./demos/pages/demo-video-pano.vue\n// module id = 316\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"border\": \"0\",\n      \"padding\": \"0\"\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-7974fb6b\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/Pano.vue\n// module id = 317\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-213df8bf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./demo-block.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"56304fc1\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-213df8bf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/components/demo-block.vue\n// module id = 319\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-223dbf78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./App.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"48e2ad6a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-style-loader!./~/css-loader?{\"minimize\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-223dbf78\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./demos/App.vue\n// module id = 320\n// module chunks = 1","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-213df8bf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./demo-block.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./demo-block.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-213df8bf\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./demo-block.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/components/demo-block.vue\n// module id = 36\n// module chunks = 1","var Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./Pano.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7974fb6b\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./Pano.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Pano.vue\n// module id = 37\n// module chunks = 1","import Vue from 'vue'\nimport Router from 'vue-router'\n\nimport { pages } from '../pages'\n\nVue.use( Router )\n\nconst routes = pages.map( page => {\n    \n    const name = page.name;\n\n    return {\n        path: `/${ name }`,\n        name,\n        component: page\n    }\n} )\n\nconsole.log(routes);\n\nroutes.push( {\n    path: '*',\n    redirect: '/demo-pano'\n} )\n\nexport default new Router( { routes } )\n\n\n// WEBPACK FOOTER //\n// ./demos/router/index.js","\n/* styles */\nrequire(\"!!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-223dbf78\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-223dbf78\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/App.vue\n// module id = 62\n// module chunks = 1","import Vue from 'vue'\nimport App from './App.vue'\nimport router from './router'\n\nnew Vue({\n  el: '#app',\n  router,\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./demos/index.js","import DemoPano from './demo-pano'\nimport DemoCubePano from './demo-cube-pano'\nimport DemoVideoPano from './demo-video-pano'\n\nconst pages = [\n    DemoPano,\n    DemoCubePano,\n    DemoVideoPano\n]\n\nexport { pages };\n\n\n\n// WEBPACK FOOTER //\n// ./demos/pages/index.js","<template>\n    <div class=\"demos\">\n        <div class=\"demos-content\"> \n            <ul class=\"demos-menu\">\n                <li class=\"demos-menu-title\">demos</li>\n                <li class=\"demos-menu-item\">\n                    <router-link to=\"demo-pano\">basic panorama</router-link>\n                </li>\n                <li class=\"demos-menu-item\">\n                    <router-link to=\"demo-cube-pano\">Cube Faces</router-link>\n                </li>\n            </ul>\n   \n            <div class=\"demos-pages\">\n                <router-view></router-view>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    name: 'app'\n}\n</script>\n<style>\n* {\n    margin: 0;\n    border: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nul, ol, li {\n    list-style: none;\n}\n\na {\n    color: #657180;\n    text-decoration: none;\n}\n\nhtml, body, .demos {\n    width: 100%;\n    height: 100%;\n    color: #657180;\n}\n\nbody {\n    background: #eee;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto,\n                 \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\",\n                 SimSun, sans-serif;\n    background: #fff;\n}\n\n.demos-header {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    background: #f3f6fb;\n    text-shadow: 0 1px 0 rgba(255,255,255,0.5);\n    border-bottom: solid 1px #dfe2e7;\n    padding: 15px 15px 15px 30px;\n    line-height: 20px;\n}\n\n.demos-header .title {\n    font-weight: bold;\n    font-size: 18px;\n    display: inline-block;\n}\n\n.demos-header .github {\n    color: #39f;\n    display: inline-block;\n    font-size: 12px;\n    float: right;\n}\n\n.demos-content {\n    width: 100%;\n    height: 100%;\n    padding-top: 52px;\n    overflow: hidden;\n}\n\n.demos-menu {\n    float: left;\n    width: 230px;\n    height: 100%;\n    border-right: solid 1px #dfe2e7;\n    padding: 10px 30px;\n}\n\n.demos-menu .demos-menu-item {\n    display: block;\n    width: 100%;\n    height: 30px;\n    line-height: 30px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.demos-menu .demos-menu-item > a {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.demos-menu .demos-menu-title {\n    display: block;\n    width: 100%;\n    padding: 6px 0;\n    margin-top: 10px;\n    font-size: 14px;\n    font-weight: bold;\n}\n\n.demos-menu .demos-menu-item:hover > a {\n    color: #39f;\n}\n\n.demos-pages {\n    height: 100%;\n    overflow: hidden;\n}\n\n.demo-loading {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n}\n.demo-loading::before {\n    content: '';\n    border-radius: 100%;\n    margin: 2px;\n    border: 3px solid #20a0ff;\n    border-bottom-color: transparent;\n    height: 36px;\n    width: 36px;\n    display: inline-block;\n    animation: loading-rotate .75s 0s linear infinite;\n    vertical-align: middle;\n}\n\n.demo-loading::after {\n    content: '';\n    display: inline-block;\n    height: 100%;\n    width: 0;\n    vertical-align: middle;\n}\n\n@keyframes loading-rotate{\n    0% {\n        transform: rotate(0) scale(1);\n    }\n    50% {\n        transform: rotate(180deg) scale(.6);\n    }\n    100% {\n        transform: rotate(360deg) scale(1);\n    }\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?8e9729ac","<template>\n    <div class=\"demo-block\">\n        <div class=\"demo-block-preview\">\n            <slot name=\"preview\"></slot>\n        </div>\n        <div class=\"demo-block-code\">\n            <div class=\"demo-block-code-box\">\n                <h3>Vue Component & Webpack</h3>\n                <div class=\"demo-block-code-box-content\">\n                    <pre>\n                        <code ref=\"vueCode\" class=\"html\">{{ vueCode | code }}</code>\n                    </pre>\n                </div>\n            </div>\n            <div class=\"demo-block-code-box\">\n                <h3>HTML & JS</h3>\n                <div class=\"demo-block-code-box-content\">\n                    <pre>\n                        <code ref=\"htmlCode\" class=\"html\">{{ htmlCode | code }}</code>\n                    </pre>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport 'highlight.js/styles/github.css';\nimport hljs from 'highlight.js'\n\nconst codeHandler = code => {\n    const scripts = `<script src=\"vue.js\"><\\/script>\n    <script src=\"vue-vr.min.js\"><\\/script>`;\n\n    return code.replace( /#scripts#/ig, scripts );\n}\n\nexport default {\n    name: 'app',\n    props: {\n        vueCode: String,\n        htmlCode: {\n            type: String,\n            default: '// TODO'\n        }\n    },\n    mounted () {\n        hljs.highlightBlock( this.$refs.vueCode );\n        hljs.highlightBlock( this.$refs.htmlCode );\n    },\n    data () {\n    \treturn {}\n    },\n    filters: {\n        code ( val ) {\n            return codeHandler( val );\n        }\n    },\n    components: {\n\n    }\n}\n</script>\n<style>\n    .demo-block {\n        width: 100%;\n        height: 100%;\n        background-color: #fff;\n        border-radius: 3px;\n    }\n\n    .demo-block .demo-block-preview {\n        width: 70%;\n        height: 100%;\n        float: left;\n        position: relative;\n    }\n\n    .demo-block .demo-block-code {\n        width: 30%;\n        height: 100%;\n        background: #f9fafc;\n        border-left: solid 1px #dfe2e7;\n        font-size: 13px;\n        float: left;\n    }\n\n\n    .demo-block .demo-block-code pre code {\n        font: normal 10pt Consolas, Monaco, monospace;\n    }\n\n\n    .demo-block .demo-block-code .demo-block-code-box {\n        width: 100%;\n        height: 50%;\n        position: relative;\n        overflow: hidden;\n    }\n\n    .demo-block .demo-block-code-box::after {\n        content: '';\n        display: block;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        width: 90%;\n        height: 1px;\n        background: -webkit-linear-gradient(left, #dfe2e7 80%, rgba(223,226,231,0) 100%);\n    }\n\n    .demo-block .demo-block-code-box h3 {\n        width: 100%;\n        padding: 10px 20px;\n        font-size: 16px;\n        font-weight: bold;\n        position: absolute;\n    }\n\n    .demo-block .demo-block-code-box-content {\n        position: absolute;\n        top: 40px;\n        bottom: 10px;\n        left: 20px;\n        right: 20px;\n        overflow: auto;\n    }\n\n    .demo-block .hljs {\n        background: transparent;\n    }\n\n    .demo-block .demo-block-code code {\n        position: absolute;\n        top: 0;\n        left: 0;\n    }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// demo-block.vue?7b216aa6","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <Pano\n                @on-load=\"onLoad\"\n                type='cube'\n                source=\"assets/faces/pano_%s.jpg\"></Pano>\n            <div class=\"demo-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport Pano from '../../src/Pano.vue'\n\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        type='cube'\n        source=\"assets/faces/pano_%s.jpg\"></Pano>\n</template>\n<script>\n    import { Pano } from 'vuejs-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='cube'\n            source=\"assets/faces/pano_%s.jpg\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-cube-pano',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano,\n        DemoBlock\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-cube-pano.vue?0ece2525","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <Pano\n                @on-load=\"onLoad\"\n                source=\"assets/equirectangular.jpg\"></Pano>\n            <div class=\"demo-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport Pano from '../../src/Pano.vue'\n\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        src=\"assets/equirectangular.jpg\">\n    </Pano>\n</template>\n\n<script>\n    import { Pano } from 'vue-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='cube'\n            source=\"assets/equirectangular.jpg\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-pano',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano,\n        DemoBlock\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-pano.vue?6898858d","<template>\n    <demo-block :vue-code=\"code\" :html-code=\"htmlCode\">\n        <template slot=\"preview\">\n            <Pano\n                @on-load=\"onLoad\"\n                src=\"./../assets/equirectangular.jpg\"></Pano>\n            <div class=\"demo-loading\" v-show=\"loading\"></div>\n        </template>\n    </demo-block>\n</template>\n\n<script>\nimport DemoBlock from '../components/demo-block';\nimport Pano from '../../src/Pano.vue'\n\nconst code = `\n<template>\n    <Pano\n        @on-load=\"onLoad\"\n        src=\"./../assets/equirectangular.jpg\">\n    </Pano>\n</template>\n\n<script>\n    import { Pano } from 'vue-vr'\n\n    export default {\n        components: {\n            Pano\n        }\n    }\n<\\/script>\n`\n\nconst htmlCode = `\n<body>\n    <div id=\"app\">\n        <Pano\n            @on-load=\"onLoad\"\n            type='cube'\n            source=\"./../assets/equirectangular.jpg\">\n        </Pano>\n    </div>\n    #scripts#\n    <script>\n        new Vue({\n            el: '#app'\n        })\n    <\\/script>\n</body>\n`\n\nexport default {\n    name: 'demo-video-pano',\n    data () {\n    \treturn {\n            code,\n            htmlCode,\n            loading: true\n    \t}\n    },\n    methods: {\n        onLoad () {\n            this.loading = false;\n        }\n    },\n    components: {\n        Pano,\n        DemoBlock\n    }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// demo-video-pano.vue?58b12380","<template>\n    <div style=\"width: 100%; height: 100%; margin: 0; border: 0; padding: 0;\">    \n    </div>\n</template>\n\n<script>\nimport { getSize, getCenter } from \"./util\";\nimport PanoLens from \"./lib/panolens\";\n\nexport default {\n  props: {\n    source: {\n      type: String\n    },\n    type:{\n        type:String\n    },\n    width: {\n      type: Number\n    },\n    height: {\n      type: Number\n    }\n  },\n  data() {\n    return {\n      size: {\n        width: this.width,\n        height: this.height\n      },\n      viewer: null,\n      panorama:null\n    };\n  },\n  created() {\n    window.addEventListener(\"resize\", this.onResize, false);\n  },\n  mounted() {\n    if (this.width === undefined || this.height === undefined) {\n      this.size = {\n        width: this.$el.offsetWidth,\n        height: this.$el.offsetHeight\n      };\n    }\n\n    this.viewer = new PanoLens.Viewer({\n      container: this.$el,\n      cameraFov:100\n    });\n\n    console.log(this.source);\n    this.loadPano();\n  },\n  watch: {\n    source() {\n      if (!this.viewer) return;\n      if (!this.panorama) return;\n      this.loadPano();\n    }\n  },\n  methods: {\n    onResize() {\n      if (this.width === undefined || this.height === undefined) {\n        this.$nextTick(() => {\n          this.size = {\n            width: this.$el.offsetWidth,\n            height: this.$el.offsetHeight\n          };\n        });\n      }\n    },\n    loadPano(){\n        if(!this.source) return;\n\n        switch(this.type){\n            case 'cube':\n                var l = this.source.replace('%s','l');\n                var f = this.source.replace('%s','f');\n                var r = this.source.replace('%s','r');\n                var b = this.source.replace('%s','b');\n                var u = this.source.replace('%s','u');\n                var d = this.source.replace('%s','d');\n                this.panorama = new PanoLens.CubePanorama([r,l,u,d,f,b]);\n                break;\n            default:\n                this.panorama = new PanoLens.ImagePanorama(this.source);\n                break;\n        }\n        \n        \n        this.viewer.add(this.panorama);\n\n        var that = this;\n        this.panorama.addEventListener('load', function () {\n          that.$emit(\"on-load\");\n        });\n    }\n  }\n};\n</script>\n\n\n// WEBPACK FOOTER //\n// Pano.vue?02b22e62","import * as THREE from 'three';\n\n/**\n * Panolens.js\n * @author pchen66\n * @namespace PANOLENS\n */\n\nvar PANOLENS = { REVISION: '9' };\n;/*! npm.im/iphone-inline-video 2.2.2 */\nvar enableInlineVideo=function(){\"use strict\";/*! npm.im/intervalometer */\nfunction e(e,i,n,r){function t(n){d=i(t,r),e(n-(a||n)),a=n}var d,a;return{start:function(){d||t(0)},stop:function(){n(d),d=null,a=0}}}function i(i){return e(i,requestAnimationFrame,cancelAnimationFrame)}function n(e,i,n){function r(r){n&&!n(e,i)||r.stopImmediatePropagation()}return e.addEventListener(i,r),r}function r(e,i,n,r){function t(){return n[i]}function d(e){n[i]=e}r&&d(e[i]),Object.defineProperty(e,i,{get:t,set:d})}function t(e,i,n){n.addEventListener(i,function(){return e.dispatchEvent(new Event(i))})}function d(e,i){Promise.resolve().then(function(){e.dispatchEvent(new Event(i))})}function a(e){var i=new Audio;return t(e,\"play\",i),t(e,\"playing\",i),t(e,\"pause\",i),i.crossOrigin=e.crossOrigin,i.src=e.src||e.currentSrc||\"data:\",i}function u(e,i,n){(m||0)+200<Date.now()&&(e[h]=!0,m=Date.now()),n||(e.currentTime=i),k[++T%3]=100*i|0}function o(e){return e.driver.currentTime>=e.video.duration}function s(e){var i=this;i.video.readyState>=i.video.HAVE_FUTURE_DATA?(i.hasAudio||(i.driver.currentTime=i.video.currentTime+e*i.video.playbackRate/1e3,i.video.loop&&o(i)&&(i.driver.currentTime=0)),u(i.video,i.driver.currentTime)):i.video.networkState===i.video.NETWORK_IDLE&&0===i.video.buffered.length&&i.video.load(),i.video.ended&&(delete i.video[h],i.video.pause(!0))}function c(){var e=this,i=e[g];if(e.webkitDisplayingFullscreen)return void e[E]();\"data:\"!==i.driver.src&&i.driver.src!==e.src&&(u(e,0,!0),i.driver.src=e.src),e.paused&&(i.paused=!1,0===e.buffered.length&&e.load(),i.driver.play(),i.updater.start(),i.hasAudio||(d(e,\"play\"),i.video.readyState>=i.video.HAVE_ENOUGH_DATA&&d(e,\"playing\")))}function v(e){var i=this,n=i[g];n.driver.pause(),n.updater.stop(),i.webkitDisplayingFullscreen&&i[w](),n.paused&&!e||(n.paused=!0,n.hasAudio||d(i,\"pause\"),i.ended&&!i.webkitDisplayingFullscreen&&(i[h]=!0,d(i,\"ended\")))}function p(e,n){var r={};e[g]=r,r.paused=!0,r.hasAudio=n,r.video=e,r.updater=i(s.bind(r)),n?r.driver=a(e):(e.addEventListener(\"canplay\",function(){e.paused||d(e,\"playing\")}),r.driver={src:e.src||e.currentSrc||\"data:\",muted:!0,paused:!0,pause:function(){r.driver.paused=!0},play:function(){r.driver.paused=!1,o(r)&&u(e,0)},get ended(){return o(r)}}),e.addEventListener(\"emptied\",function(){var i=!r.driver.src||\"data:\"===r.driver.src;r.driver.src&&r.driver.src!==e.src&&(u(e,0,!0),r.driver.src=e.src,i||!n&&e.autoplay?r.driver.play():r.updater.stop())},!1),e.addEventListener(\"webkitbeginfullscreen\",function(){e.paused?n&&0===r.driver.buffered.length&&r.driver.load():(e.pause(),e[E]())}),n&&(e.addEventListener(\"webkitendfullscreen\",function(){r.driver.currentTime=e.currentTime}),e.addEventListener(\"seeking\",function(){k.indexOf(100*e.currentTime|0)<0&&(r.driver.currentTime=e.currentTime)}))}function l(e){var i=e[h];return delete e[h],!e.webkitDisplayingFullscreen&&!i}function f(e){var i=e[g];e[E]=e.play,e[w]=e.pause,e.play=c,e.pause=v,r(e,\"paused\",i.driver),r(e,\"muted\",i.driver,!0),r(e,\"playbackRate\",i.driver,!0),r(e,\"ended\",i.driver),r(e,\"loop\",i.driver,!0),n(e,\"seeking\",function(e){return!e.webkitDisplayingFullscreen}),n(e,\"seeked\",function(e){return!e.webkitDisplayingFullscreen}),n(e,\"timeupdate\",l),n(e,\"ended\",l)}function y(e,i){if(void 0===i&&(i={}),!e[g]){if(!i.everywhere){if(!b)return;if(!(i.iPad||i.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}e.pause();var n=e.autoplay;e.autoplay=!1,p(e,!e.muted),f(e),e.classList.add(\"IIV\"),e.muted&&n&&(e.play(),e.addEventListener(\"playing\",function i(){e.autoplay=!0,e.removeEventListener(\"playing\",i)})),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn(\"iphone-inline-video is not guaranteed to work in emulated environments\")}}var m,b=\"object\"==typeof document&&\"object-fit\"in document.head.style&&!matchMedia(\"(-webkit-video-playable-inline)\").matches,g=\"bfred-it:iphone-inline-video\",h=\"bfred-it:iphone-inline-video:event\",E=\"bfred-it:iphone-inline-video:nativeplay\",w=\"bfred-it:iphone-inline-video:nativepause\",k=[],T=0;return y}();\n;/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\nvar TWEEN = TWEEN || (function () {\n\n\tvar _tweens = [];\n\n\treturn {\n\n\t\tgetAll: function () {\n\n\t\t\treturn _tweens;\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\t_tweens = [];\n\n\t\t},\n\n\t\tadd: function (tween) {\n\n\t\t\t_tweens.push(tween);\n\n\t\t},\n\n\t\tremove: function (tween) {\n\n\t\t\tvar i = _tweens.indexOf(tween);\n\n\t\t\tif (i !== -1) {\n\t\t\t\t_tweens.splice(i, 1);\n\t\t\t}\n\n\t\t},\n\n\t\tupdate: function (time, preserve) {\n\n\t\t\tif (_tweens.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar i = 0;\n\n\t\t\ttime = time !== undefined ? time : TWEEN.now();\n\n\t\t\twhile (i < _tweens.length) {\n\n\t\t\t\tif (_tweens[i].update(time) || preserve) {\n\t\t\t\t\ti++;\n\t\t\t\t} else {\n\t\t\t\t\t_tweens.splice(i, 1);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\t};\n\n})();\n\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {\n\tTWEEN.now = function () {\n\t\tvar time = process.hrtime();\n\n\t\t// Convert [seconds, nanoseconds] to milliseconds.\n\t\treturn time[0] * 1000 + time[1] / 1000000;\n\t};\n}\n// In a browser, use window.performance.now if it is available.\nelse if (typeof (window) !== 'undefined' &&\n         window.performance !== undefined &&\n\t\t window.performance.now !== undefined) {\n\t// This must be bound, because directly assigning this function\n\t// leads to an invocation exception in Chrome.\n\tTWEEN.now = window.performance.now.bind(window.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n\tTWEEN.now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n\tTWEEN.now = function () {\n\t\treturn new Date().getTime();\n\t};\n}\n\n\nTWEEN.Tween = function (object) {\n\n\tvar _object = object;\n\tvar _valuesStart = {};\n\tvar _valuesEnd = {};\n\tvar _valuesStartRepeat = {};\n\tvar _duration = 1000;\n\tvar _repeat = 0;\n\tvar _repeatDelayTime;\n\tvar _yoyo = false;\n\tvar _isPlaying = false;\n\tvar _reversed = false;\n\tvar _delayTime = 0;\n\tvar _startTime = null;\n\tvar _easingFunction = TWEEN.Easing.Linear.None;\n\tvar _interpolationFunction = TWEEN.Interpolation.Linear;\n\tvar _chainedTweens = [];\n\tvar _onStartCallback = null;\n\tvar _onStartCallbackFired = false;\n\tvar _onUpdateCallback = null;\n\tvar _onCompleteCallback = null;\n\tvar _onStopCallback = null;\n\n\tthis.to = function (properties, duration) {\n\n\t\t_valuesEnd = properties;\n\n\t\tif (duration !== undefined) {\n\t\t\t_duration = duration;\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.start = function (time) {\n\n\t\tTWEEN.add(this);\n\n\t\t_isPlaying = true;\n\n\t\t_onStartCallbackFired = false;\n\n\t\t_startTime = time !== undefined ? time : TWEEN.now();\n\t\t_startTime += _delayTime;\n\n\t\tfor (var property in _valuesEnd) {\n\n\t\t\t// Check if an Array was provided as property value\n\t\t\tif (_valuesEnd[property] instanceof Array) {\n\n\t\t\t\tif (_valuesEnd[property].length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Create a local copy of the Array with the start value at the front\n\t\t\t\t_valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n\n\t\t\t}\n\n\t\t\t// If `to()` specifies a property that doesn't exist in the source object,\n\t\t\t// we should not set that property in the object\n\t\t\tif (_object[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Save the starting value.\n\t\t\t_valuesStart[property] = _object[property];\n\n\t\t\tif ((_valuesStart[property] instanceof Array) === false) {\n\t\t\t\t_valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n\t\t\t}\n\n\t\t\t_valuesStartRepeat[property] = _valuesStart[property] || 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.stop = function () {\n\n\t\tif (!_isPlaying) {\n\t\t\treturn this;\n\t\t}\n\n\t\tTWEEN.remove(this);\n\t\t_isPlaying = false;\n\n\t\tif (_onStopCallback !== null) {\n\t\t\t_onStopCallback.call(_object, _object);\n\t\t}\n\n\t\tthis.stopChainedTweens();\n\t\treturn this;\n\n\t};\n\n\tthis.end = function () {\n\n\t\tthis.update(_startTime + _duration);\n\t\treturn this;\n\n\t};\n\n\tthis.stopChainedTweens = function () {\n\n\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t_chainedTweens[i].stop();\n\t\t}\n\n\t};\n\n\tthis.delay = function (amount) {\n\n\t\t_delayTime = amount;\n\t\treturn this;\n\n\t};\n\n\tthis.repeat = function (times) {\n\n\t\t_repeat = times;\n\t\treturn this;\n\n\t};\n\n\tthis.repeatDelay = function (amount) {\n\n\t\t_repeatDelayTime = amount;\n\t\treturn this;\n\n\t};\n\n\tthis.yoyo = function (yoyo) {\n\n\t\t_yoyo = yoyo;\n\t\treturn this;\n\n\t};\n\n\n\tthis.easing = function (easing) {\n\n\t\t_easingFunction = easing;\n\t\treturn this;\n\n\t};\n\n\tthis.interpolation = function (interpolation) {\n\n\t\t_interpolationFunction = interpolation;\n\t\treturn this;\n\n\t};\n\n\tthis.chain = function () {\n\n\t\t_chainedTweens = arguments;\n\t\treturn this;\n\n\t};\n\n\tthis.onStart = function (callback) {\n\n\t\t_onStartCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onUpdate = function (callback) {\n\n\t\t_onUpdateCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onComplete = function (callback) {\n\n\t\t_onCompleteCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.onStop = function (callback) {\n\n\t\t_onStopCallback = callback;\n\t\treturn this;\n\n\t};\n\n\tthis.update = function (time) {\n\n\t\tvar property;\n\t\tvar elapsed;\n\t\tvar value;\n\n\t\tif (time < _startTime) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (_onStartCallbackFired === false) {\n\n\t\t\tif (_onStartCallback !== null) {\n\t\t\t\t_onStartCallback.call(_object, _object);\n\t\t\t}\n\n\t\t\t_onStartCallbackFired = true;\n\t\t}\n\n\t\telapsed = (time - _startTime) / _duration;\n\t\telapsed = elapsed > 1 ? 1 : elapsed;\n\n\t\tvalue = _easingFunction(elapsed);\n\n\t\tfor (property in _valuesEnd) {\n\n\t\t\t// Don't update properties that do not exist in the source object\n\t\t\tif (_valuesStart[property] === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar start = _valuesStart[property] || 0;\n\t\t\tvar end = _valuesEnd[property];\n\n\t\t\tif (end instanceof Array) {\n\n\t\t\t\t_object[property] = _interpolationFunction(end, value);\n\n\t\t\t} else {\n\n\t\t\t\t// Parses relative end values with start as base (e.g.: +10, -3)\n\t\t\t\tif (typeof (end) === 'string') {\n\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\n\t\t\t\t\t\tend = start + parseFloat(end);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tend = parseFloat(end);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Protect against non numeric properties.\n\t\t\t\tif (typeof (end) === 'number') {\n\t\t\t\t\t_object[property] = start + (end - start) * value;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (_onUpdateCallback !== null) {\n\t\t\t_onUpdateCallback.call(_object, value);\n\t\t}\n\n\t\tif (elapsed === 1) {\n\n\t\t\tif (_repeat > 0) {\n\n\t\t\t\tif (isFinite(_repeat)) {\n\t\t\t\t\t_repeat--;\n\t\t\t\t}\n\n\t\t\t\t// Reassign starting values, restart by making startTime = now\n\t\t\t\tfor (property in _valuesStartRepeat) {\n\n\t\t\t\t\tif (typeof (_valuesEnd[property]) === 'string') {\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_yoyo) {\n\t\t\t\t\t\tvar tmp = _valuesStartRepeat[property];\n\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesEnd[property];\n\t\t\t\t\t\t_valuesEnd[property] = tmp;\n\t\t\t\t\t}\n\n\t\t\t\t\t_valuesStart[property] = _valuesStartRepeat[property];\n\n\t\t\t\t}\n\n\t\t\t\tif (_yoyo) {\n\t\t\t\t\t_reversed = !_reversed;\n\t\t\t\t}\n\n\t\t\t\tif (_repeatDelayTime !== undefined) {\n\t\t\t\t\t_startTime = time + _repeatDelayTime;\n\t\t\t\t} else {\n\t\t\t\t\t_startTime = time + _delayTime;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\tif (_onCompleteCallback !== null) {\n\n\t\t\t\t\t_onCompleteCallback.call(_object, _object);\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n\t\t\t\t\t// Make the chained tweens start exactly at the time they should,\n\t\t\t\t\t// even if the `update()` method was called way past the duration of the tween\n\t\t\t\t\t_chainedTweens[i].start(_startTime + _duration);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n};\n\n\nTWEEN.Easing = {\n\n\tLinear: {\n\n\t\tNone: function (k) {\n\n\t\t\treturn k;\n\n\t\t}\n\n\t},\n\n\tQuadratic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k * (2 - k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * (--k * (k - 2) - 1);\n\n\t\t}\n\n\t},\n\n\tCubic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tQuartic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn 1 - (--k * k * k * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn - 0.5 * ((k -= 2) * k * k * k - 2);\n\n\t\t}\n\n\t},\n\n\tQuintic: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k * k * k * k * k;\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn --k * k * k * k * k + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * k * k * k * k * k;\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\n\n\t\t}\n\n\t},\n\n\tSinusoidal: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sin(k * Math.PI / 2);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\n\n\t\t}\n\n\t},\n\n\tExponential: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n\n\t\t}\n\n\t},\n\n\tCircular: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\treturn Math.sqrt(1 - (--k * k));\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn - 0.5 * (Math.sqrt(1 - k * k) - 1);\n\t\t\t}\n\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n\n\t\t}\n\n\t},\n\n\tElastic: {\n\n\t\tIn: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif (k === 1) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tk *= 2;\n\n\t\t\tif (k < 1) {\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n\t\t\t}\n\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n\n\t\t}\n\n\t},\n\n\tBack: {\n\n\t\tIn: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn k * k * ((s + 1) * k - s);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tvar s = 1.70158;\n\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tvar s = 1.70158 * 1.525;\n\n\t\t\tif ((k *= 2) < 1) {\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\n\t\t\t}\n\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n\n\t\t}\n\n\t},\n\n\tBounce: {\n\n\t\tIn: function (k) {\n\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\n\n\t\t},\n\n\t\tOut: function (k) {\n\n\t\t\tif (k < (1 / 2.75)) {\n\t\t\t\treturn 7.5625 * k * k;\n\t\t\t} else if (k < (2 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n\t\t\t} else if (k < (2.5 / 2.75)) {\n\t\t\t\treturn 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n\t\t\t} else {\n\t\t\t\treturn 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n\t\t\t}\n\n\t\t},\n\n\t\tInOut: function (k) {\n\n\t\t\tif (k < 0.5) {\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n\t\t\t}\n\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n\n\t\t}\n\n\t}\n\n};\n\nTWEEN.Interpolation = {\n\n\tLinear: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\n\n\t\tif (k < 0) {\n\t\t\treturn fn(v[0], v[1], f);\n\t\t}\n\n\t\tif (k > 1) {\n\t\t\treturn fn(v[m], v[m - 1], m - f);\n\t\t}\n\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n\n\t},\n\n\tBezier: function (v, k) {\n\n\t\tvar b = 0;\n\t\tvar n = v.length - 1;\n\t\tvar pw = Math.pow;\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\n\n\t\tfor (var i = 0; i <= n; i++) {\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n\t\t}\n\n\t\treturn b;\n\n\t},\n\n\tCatmullRom: function (v, k) {\n\n\t\tvar m = v.length - 1;\n\t\tvar f = m * k;\n\t\tvar i = Math.floor(f);\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n\t\tif (v[0] === v[m]) {\n\n\t\t\tif (k < 0) {\n\t\t\t\ti = Math.floor(f = m * (1 + k));\n\t\t\t}\n\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n\n\t\t} else {\n\n\t\t\tif (k < 0) {\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n\t\t\t}\n\n\t\t\tif (k > 1) {\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n\t\t\t}\n\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n\n\t\t}\n\n\t},\n\n\tUtils: {\n\n\t\tLinear: function (p0, p1, t) {\n\n\t\t\treturn (p1 - p0) * t + p0;\n\n\t\t},\n\n\t\tBernstein: function (n, i) {\n\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\n\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\n\n\t\t},\n\n\t\tFactorial: (function () {\n\n\t\t\tvar a = [1];\n\n\t\t\treturn function (n) {\n\n\t\t\t\tvar s = 1;\n\n\t\t\t\tif (a[n]) {\n\t\t\t\t\treturn a[n];\n\t\t\t\t}\n\n\t\t\t\tfor (var i = n; i > 1; i--) {\n\t\t\t\t\ts *= i;\n\t\t\t\t}\n\n\t\t\t\ta[n] = s;\n\t\t\t\treturn s;\n\n\t\t\t};\n\n\t\t})(),\n\n\t\tCatmullRom: function (p0, p1, p2, p3, t) {\n\n\t\t\tvar v0 = (p2 - p0) * 0.5;\n\t\t\tvar v1 = (p3 - p1) * 0.5;\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t * t2;\n\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n\n\t\t}\n\n\t}\n\n};\n\n// UMD (Universal Module Definition)\n(function (root) {\n\n\tif (typeof define === 'function' && define.amd) {\n\n\t\t// AMD\n\t\tdefine([], function () {\n\t\t\treturn TWEEN;\n\t\t});\n\n\t} else if (typeof module !== 'undefined' && typeof exports === 'object') {\n\n\t\t// Node.js\n\t\tmodule.exports = TWEEN;\n\n\t} else if (root !== undefined) {\n\n\t\t// Global variable\n\t\troot.TWEEN = TWEEN;\n\n\t}\n\n})(this);\n;/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n/*global THREE, console */\n\n// This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n// the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n// supported.\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\nTHREE.OrbitControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\tthis.frameId;\n\n\t// API\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the control orbits around\n\t// and where it pans with respect to.\n\tthis.target = new THREE.Vector3();\n\n\t// center is old, deprecated; use \"target\" instead\n\tthis.center = this.target;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for\n\t// backwards compatibility\n\tthis.noZoom = false;\n\tthis.zoomSpeed = 1.0;\n\n\t// Limits to how far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// Limits to how far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// Set to true to disable this control\n\tthis.noRotate = false;\n\tthis.rotateSpeed = -0.15;\n\n\t// Set to true to disable this control\n\tthis.noPan = true;\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// Momentum\n  \tthis.momentumDampingFactor = 0.90;\n  \tthis.momentumScalingFactor = -0.005;\n  \tthis.momentumKeydownFactor = 20;\n\n  \t// Fov\n  \tthis.minFov = 30;\n  \tthis.maxFov = 120;\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to disable use of the keys\n\tthis.noKeys = false;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t////////////\n\t// internals\n\n\tvar scope = this;\n\n\tvar EPS = 10e-8;\n\tvar MEPS = 10e-5;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\tvar panOffset = new THREE.Vector3();\n\n\tvar offset = new THREE.Vector3();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tvar theta;\n\tvar phi;\n\tvar phiDelta = 0;\n\tvar thetaDelta = 0;\n\tvar scale = 1;\n\tvar pan = new THREE.Vector3();\n\n\tvar lastPosition = new THREE.Vector3();\n\tvar lastQuaternion = new THREE.Quaternion();\n\n\tvar momentumLeft = 0, momentumUp = 0;\n\tvar eventCurrent, eventPrevious;\n\tvar momentumOn = false;\n\n\tvar keyUp, keyBottom, keyLeft, keyRight;\n\n\tvar STATE = { NONE : -1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n\n\tvar state = STATE.NONE;\n\n\t// for reset\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t// so camera.up is the orbit axis\n\n\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\tvar quatInverse = quat.clone().inverse();\n\n\t// events\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tthis.setLastQuaternion = function ( quaternion ) {\n\t\tlastQuaternion.copy( quaternion );\n\t\tscope.object.quaternion.copy( quaternion );\n\t};\n\n\tthis.getLastPosition = function () {\n\t\treturn lastPosition;\n\t}\n\n\tthis.rotateLeft = function ( angle ) {\n\n\t\tif ( angle === undefined ) {\n\n\t\t\tangle = getAutoRotationAngle();\n\n\t\t}\n\n\t\tthetaDelta -= angle;\n\n\n\t};\n\n\tthis.rotateUp = function ( angle ) {\n\n\t\tif ( angle === undefined ) {\n\n\t\t\tangle = getAutoRotationAngle();\n\n\t\t}\n\n\t\tphiDelta -= angle;\n\n\t};\n\n\t// pass in distance in world space to move left\n\tthis.panLeft = function ( distance ) {\n\n\t\tvar te = this.object.matrix.elements;\n\n\t\t// get X column of matrix\n\t\tpanOffset.set( te[ 0 ], te[ 1 ], te[ 2 ] );\n\t\tpanOffset.multiplyScalar( - distance );\n\n\t\tpan.add( panOffset );\n\n\t};\n\n\t// pass in distance in world space to move up\n\tthis.panUp = function ( distance ) {\n\n\t\tvar te = this.object.matrix.elements;\n\n\t\t// get Y column of matrix\n\t\tpanOffset.set( te[ 4 ], te[ 5 ], te[ 6 ] );\n\t\tpanOffset.multiplyScalar( distance );\n\n\t\tpan.add( panOffset );\n\n\t};\n\n\t// pass in x,y of change desired in pixel space,\n\t// right and down are positive\n\tthis.pan = function ( deltaX, deltaY ) {\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t// perspective\n\t\t\tvar position = scope.object.position;\n\t\t\tvar offset = position.clone().sub( scope.target );\n\t\t\tvar targetDistance = offset.length();\n\n\t\t\t// half of the fov is center to top of screen\n\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\tscope.panLeft( 2 * deltaX * targetDistance / element.clientHeight );\n\t\t\tscope.panUp( 2 * deltaY * targetDistance / element.clientHeight );\n\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t// orthographic\n\t\t\tscope.panLeft( deltaX * (scope.object.right - scope.object.left) / element.clientWidth );\n\t\t\tscope.panUp( deltaY * (scope.object.top - scope.object.bottom) / element.clientHeight );\n\n\t\t} else {\n\n\t\t\t// camera neither orthographic or perspective\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\n\t\t}\n\n\t};\n\n\tthis.momentum = function(){\n\t\t\n\t\tif ( !momentumOn ) return;\n\n\t\tif ( Math.abs( momentumLeft ) < MEPS && Math.abs( momentumUp ) < MEPS ) { \n\n\t\t\tmomentumOn = false; \n\t\t\treturn;\n\t\t}\n\n\t\tmomentumUp   *= this.momentumDampingFactor;\n\t\tmomentumLeft *= this.momentumDampingFactor;\n\n\t\tthetaDelta -= this.momentumScalingFactor * momentumLeft;\n\t\tphiDelta   -= this.momentumScalingFactor * momentumUp;\n\n\t};\n\n\tthis.dollyIn = function ( dollyScale ) {\n\n\t\tif ( dollyScale === undefined ) {\n\n\t\t\tdollyScale = getZoomScale();\n\n\t\t}\n\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\n\t\t}\n\n\t};\n\n\tthis.dollyOut = function ( dollyScale ) {\n\n\t\tif ( dollyScale === undefined ) {\n\n\t\t\tdollyScale = getZoomScale();\n\n\t\t}\n\n\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\n\t\t}\n\n\t};\n\n\tthis.update = function ( ignoreUpdate ) {\n\n\t\tvar position = this.object.position;\n\n\t\toffset.copy( position ).sub( this.target );\n\n\t\t// rotate offset to \"y-axis-is-up\" space\n\t\toffset.applyQuaternion( quat );\n\n\t\t// angle from z-axis around y-axis\n\n\t\ttheta = Math.atan2( offset.x, offset.z );\n\n\t\t// angle from y-axis\n\n\t\tphi = Math.atan2( Math.sqrt( offset.x * offset.x + offset.z * offset.z ), offset.y );\n\n\t\tif ( this.autoRotate && state === STATE.NONE ) {\n\n\t\t\tthis.rotateLeft( getAutoRotationAngle() );\n\n\t\t}\n\n\t\tthis.momentum();\n\n\t\ttheta += thetaDelta;\n\t\tphi += phiDelta;\n\n\t\t// restrict theta to be between desired limits\n\t\ttheta = Math.max( this.minAzimuthAngle, Math.min( this.maxAzimuthAngle, theta ) );\n\n\t\t// restrict phi to be between desired limits\n\t\tphi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, phi ) );\n\n\t\t// restrict phi to be betwee EPS and PI-EPS\n\t\tphi = Math.max( EPS, Math.min( Math.PI - EPS, phi ) );\n\n\t\tvar radius = offset.length() * scale;\n\n\t\t// restrict radius to be between desired limits\n\t\tradius = Math.max( this.minDistance, Math.min( this.maxDistance, radius ) );\n\n\t\t// move target to panned location\n\t\tthis.target.add( pan );\n\n\t\toffset.x = radius * Math.sin( phi ) * Math.sin( theta );\n\t\toffset.y = radius * Math.cos( phi );\n\t\toffset.z = radius * Math.sin( phi ) * Math.cos( theta );\n\n\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\toffset.applyQuaternion( quatInverse );\n\n\t\tposition.copy( this.target ).add( offset );\n\n\t\tthis.object.lookAt( this.target );\n\n\t\tthetaDelta = 0;\n\t\tphiDelta = 0;\n\t\tscale = 1;\n\t\tpan.set( 0, 0, 0 );\n\n\t\t// update condition is:\n\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\t\tif ( lastPosition.distanceToSquared( this.object.position ) > EPS\n\t\t    || 8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS ) {\n\n\t\t\tignoreUpdate !== true && this.dispatchEvent( changeEvent );\n\n\t\t\tlastPosition.copy( this.object.position );\n\t\t\tlastQuaternion.copy (this.object.quaternion );\n\n\t\t}\n\n\t};\n\n\n\tthis.reset = function () {\n\n\t\tstate = STATE.NONE;\n\n\t\tthis.target.copy( this.target0 );\n\t\tthis.object.position.copy( this.position0 );\n\t\tthis.object.zoom = this.zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\t\tthis.dispatchEvent( changeEvent );\n\n\t\tthis.update();\n\n\t};\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn theta\n\n\t};\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction onMouseDown( event ) {\n\n\t\tmomentumOn = false;\n\n   \t\tmomentumLeft = momentumUp = 0;\n\n\t\tif ( scope.enabled === false ) return;\n\t\tevent.preventDefault();\n\n\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\n\t\t\tif ( scope.noRotate === true ) return;\n\n\t\t\tstate = STATE.ROTATE;\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\n\t\t\tif ( scope.noZoom === true ) return;\n\n\t\t\tstate = STATE.DOLLY;\n\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\n\t\t\tif ( scope.noPan === true ) return;\n\n\t\t\tstate = STATE.PAN;\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\t\t\tscope.dispatchEvent( startEvent );\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\tif ( state === STATE.ROTATE ) {\n\n\t\t\tif ( scope.noRotate === true ) return;\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\tscope.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\tscope.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tif( eventPrevious ){\n\t\t\t\tmomentumLeft = event.clientX - eventPrevious.clientX;\n\t\t\t\tmomentumUp = event.clientY - eventPrevious.clientY;\n\t\t\t}\n\n\t\t\teventPrevious = event;\n\n\t\t} else if ( state === STATE.DOLLY ) {\n\n\t\t\tif ( scope.noZoom === true ) return;\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tscope.dollyIn();\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tscope.dollyOut();\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t} else if ( state === STATE.PAN ) {\n\n\t\t\tif ( scope.noPan === true ) return;\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\tscope.pan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) scope.update();\n\n\t}\n\n\tfunction onMouseUp( /* event */ ) {\n\n\t\tmomentumOn = true;\n\n\t\teventPrevious = undefined;\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\tscope.dispatchEvent( endEvent );\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.noZoom === true || state !== STATE.NONE ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar delta = 0;\n\n\t\tif ( event.wheelDelta !== undefined ) { // WebKit / Opera / Explorer 9\n\n\t\t\tdelta = event.wheelDelta;\n\n\t\t} else if ( event.detail !== undefined ) { // Firefox\n\n\t\t\tdelta = - event.detail;\n\n\t\t}\n\n\t\tif ( delta > 0 ) {\n\n\t\t\t//scope.dollyOut();\n\t\t\tscope.object.fov = ( scope.object.fov < scope.maxFov ) \n\t\t\t\t? scope.object.fov + 1\n\t\t\t\t: scope.maxFov;\n\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t} else if ( delta < 0 ) {\n\n\t\t\t//scope.dollyIn();\n\t\t\tscope.object.fov = ( scope.object.fov > scope.minFov ) \n\t\t\t\t? scope.object.fov - 1\n\t\t\t\t: scope.minFov;\n\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t}\n\n\t\tscope.update();\n\t\tscope.dispatchEvent( changeEvent );\n\t\tscope.dispatchEvent( startEvent );\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyUp ( event ) {\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tkeyUp = false;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tkeyBottom = false;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tkeyLeft = false;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tkeyRight = false;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.noKeys === true || scope.noRotate === true ) return;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tkeyUp = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tkeyBottom = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tkeyLeft = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tkeyRight = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif (keyUp || keyBottom || keyLeft || keyRight) {\n\n\t\t\tmomentumOn = true;\n\n\t\t\tif (keyUp) momentumUp = - scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t\tif (keyBottom) momentumUp = scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t\tif (keyLeft) momentumLeft = - scope.rotateSpeed * scope.momentumKeydownFactor;\n\t\t\tif (keyRight) momentumLeft = scope.rotateSpeed * scope.momentumKeydownFactor;\n\n\t\t}\n\n\t}\n\n\tfunction touchstart( event ) {\n\n\t\tmomentumOn = false;\n\n\t\tmomentumLeft = momentumUp = 0;\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.noRotate === true ) return;\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly\n\n\t\t\t\tif ( scope.noZoom === true ) return;\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\tif ( scope.noPan === true ) return;\n\n\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) scope.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction touchmove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.noRotate === true ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return;\n\n\t\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\tscope.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\tscope.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\t\tif( eventPrevious ){\n\t\t\t\t\tmomentumLeft = event.touches[ 0 ].pageX - eventPrevious.pageX;\n\t\t\t\t\tmomentumUp = event.touches[ 0 ].pageY - eventPrevious.pageY;\n\t\t\t\t}\n\n\t\t\t\teventPrevious = {\n\t\t\t\t\tpageX: event.touches[ 0 ].pageX,\n\t\t\t\t\tpageY: event.touches[ 0 ].pageY,\n\t\t\t\t};\n\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly\n\n\t\t\t\tif ( scope.noZoom === true ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return;\n\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tif ( event.scale < 1 ) {\n\n\t\t\t\t\tscope.object.fov = ( scope.object.fov < scope.maxFov ) \n\t\t\t\t\t\t? scope.object.fov + 1\n\t\t\t\t\t\t: scope.maxFov;\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t} else if ( event.scale > 1 ) {\n\n\t\t\t\t\tscope.object.fov = ( scope.object.fov > scope.minFov ) \n\t\t\t\t\t\t? scope.object.fov - 1\n\t\t\t\t\t\t: scope.minFov;\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tscope.update();\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\t\t\t\tbreak;\n\n\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\tif ( scope.noPan === true ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return;\n\n\t\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\t\tscope.pan( panDelta.x, panDelta.y );\n\n\t\t\t\tpanStart.copy( panEnd );\n\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction touchend( /* event */ ) {\n\n\t\tmomentumOn = true;\n\n\t\teventPrevious = undefined;\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tscope.dispatchEvent( endEvent );\n\t\tstate = STATE.NONE;\n\n\t}\n\n\t//this.domElement.addEventListener( 'contextmenu', function ( event ) { event.preventDefault(); }, false );\n\tthis.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tthis.domElement.addEventListener( 'mousewheel', onMouseWheel, false );\n\tthis.domElement.addEventListener( 'DOMMouseScroll', onMouseWheel, false ); // firefox\n\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\twindow.addEventListener( 'keyup', onKeyUp, false );\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\tthis.update();\n\n};\n\nTHREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;;/**\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n *\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\n\nTHREE.DeviceOrientationControls = function( camera, domElement ) {\n\n\tvar scope = this;\n\tvar changeEvent = { type: 'change' };\n\n\tvar rotY = 0;\n\tvar rotX = 0;\n\tvar tempX = 0;\n\tvar tempY = 0;\n\n\tthis.camera = camera;\n\tthis.camera.rotation.reorder( \"YXZ\" );\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\tthis.enabled = true;\n\n\tthis.deviceOrientation = {};\n\tthis.screenOrientation = 0;\n\n\tthis.alpha = 0;\n\tthis.alphaOffsetAngle = 0;\n\n\n\tvar onDeviceOrientationChangeEvent = function( event ) {\n\n\t\tscope.deviceOrientation = event;\n\n\t};\n\n\tvar onScreenOrientationChangeEvent = function() {\n\n\t\tscope.screenOrientation = window.orientation || 0;\n\n\t};\n\n\tvar onTouchStartEvent = function (event) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\ttempX = event.touches[ 0 ].pageX;\n\t\ttempY = event.touches[ 0 ].pageY;\n\n\t};\n\n\tvar onTouchMoveEvent = function (event) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\trotY += THREE.Math.degToRad( ( event.touches[ 0 ].pageX - tempX ) / 4 );\n\t\trotX += THREE.Math.degToRad( ( tempY - event.touches[ 0 ].pageY ) / 4 );\n\n\t\tscope.updateAlphaOffsetAngle( rotY );\n\n\t\ttempX = event.touches[ 0 ].pageX;\n\t\ttempY = event.touches[ 0 ].pageY;\n\n\t};\n\n\t// The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n\tvar setCameraQuaternion = function( quaternion, alpha, beta, gamma, orient ) {\n\n\t\tvar zee = new THREE.Vector3( 0, 0, 1 );\n\n\t\tvar euler = new THREE.Euler();\n\n\t\tvar q0 = new THREE.Quaternion();\n\n\t\tvar q1 = new THREE.Quaternion( - Math.sqrt( 0.5 ), 0, 0, Math.sqrt( 0.5 ) ); // - PI/2 around the x-axis\n\n\t\tvar vectorFingerY;\n\t\tvar fingerQY = new THREE.Quaternion();\n\t\tvar fingerQX = new THREE.Quaternion();\n\n\t\tif ( scope.screenOrientation == 0 ) {\n\n\t\t\tvectorFingerY = new THREE.Vector3( 1, 0, 0 );\n\t\t\tfingerQY.setFromAxisAngle( vectorFingerY, -rotX );\n\n\t\t} else if ( scope.screenOrientation == 180 ) {\n\n\t\t\tvectorFingerY = new THREE.Vector3( 1, 0, 0 );\n\t\t\tfingerQY.setFromAxisAngle( vectorFingerY, rotX );\n\n\t\t} else if ( scope.screenOrientation == 90 ) {\n\n\t\t\tvectorFingerY = new THREE.Vector3( 0, 1, 0 );\n\t\t\tfingerQY.setFromAxisAngle( vectorFingerY, rotX );\n\n\t\t} else if ( scope.screenOrientation == - 90) {\n\n\t\t\tvectorFingerY = new THREE.Vector3( 0, 1, 0 );\n\t\t\tfingerQY.setFromAxisAngle( vectorFingerY, -rotX );\n\n\t\t}\n\n\t\tq1.multiply( fingerQY );\n\t\tq1.multiply( fingerQX );\n\n\t\teuler.set( beta, alpha, - gamma, 'YXZ' ); // 'ZXY' for the device, but 'YXZ' for us\n\n\t\tquaternion.setFromEuler( euler ); // orient the device\n\n\t\tquaternion.multiply( q1 ); // camera looks out the back of the device, not the top\n\n\t\tquaternion.multiply( q0.setFromAxisAngle( zee, - orient ) ); // adjust for screen orientation\n\n\t};\n\n\tthis.connect = function() {\n\n\t\tonScreenOrientationChangeEvent(); // run once on load\n\n\t\twindow.addEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n\t\twindow.addEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\t\twindow.addEventListener( 'deviceorientation', this.update.bind( this ), false );\n\n\t\tscope.domElement.addEventListener( \"touchstart\", onTouchStartEvent, false );\n\t\tscope.domElement.addEventListener( \"touchmove\", onTouchMoveEvent, false );\n\n\t\tscope.enabled = true;\n\n\t};\n\n\tthis.disconnect = function() {\n\n\t\twindow.removeEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );\n\t\twindow.removeEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );\n\t\twindow.removeEventListener( 'deviceorientation', this.update.bind( this ), false );\n\n\t\tscope.domElement.removeEventListener( \"touchstart\", onTouchStartEvent, false );\n\t\tscope.domElement.removeEventListener( \"touchmove\", onTouchMoveEvent, false );\n\n\t\tscope.enabled = false;\n\n\t};\n\n\tthis.update = function( ignoreUpdate ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tvar alpha = scope.deviceOrientation.alpha ? THREE.Math.degToRad( scope.deviceOrientation.alpha ) + this.alphaOffsetAngle : 0; // Z\n\t\tvar beta = scope.deviceOrientation.beta ? THREE.Math.degToRad( scope.deviceOrientation.beta ) : 0; // X'\n\t\tvar gamma = scope.deviceOrientation.gamma ? THREE.Math.degToRad( scope.deviceOrientation.gamma ) : 0; // Y''\n\t\tvar orient = scope.screenOrientation ? THREE.Math.degToRad( scope.screenOrientation ) : 0; // O\n\n\t\tsetCameraQuaternion( scope.camera.quaternion, alpha, beta, gamma, orient );\n\t\tthis.alpha = alpha;\n\n\t\tignoreUpdate !== true && this.dispatchEvent( changeEvent );\n\n\t};\n\n\tthis.updateAlphaOffsetAngle = function( angle ) {\n\n\t\tthis.alphaOffsetAngle = angle;\n\t\tthis.update();\n\n\t};\n\n\tthis.dispose = function() {\n\n\t\tthis.disconnect();\n\n\t};\n\n\tthis.connect();\n\n};\n\nTHREE.DeviceOrientationControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.DeviceOrientationControls.prototype.constructor = THREE.DeviceOrientationControls;; /** The Bend modifier lets you bend the current selection up to 90 degrees about a single axis,\n * producing a uniform bend in an object's geometry.\n * You can control the angle and direction of the bend on any of three axes.\n * The geometry has to have rather large number of polygons!\n * options:\n * \t direction - deformation direction (in local coordinates!). \n * \t axis - deformation axis (in local coordinates!). Vector of direction and axis are perpendicular.\n * \t angle - deformation angle.\n * @author Vildanov Almaz / alvild@gmail.com\n * The algorithm of a bend is based on the chain line cosh: y = 1/b * cosh(b*x) - 1/b. It can be used only in three.js.\n */\n\nTHREE.BendModifier = function () {\n\n};\n\nTHREE.BendModifier.prototype = {\n\n    constructor: THREE.BendModifier,\n\n    set: function ( direction, axis, angle ) {\n        this.direction = new THREE.Vector3(); this.direction.copy( direction );\n\t\tthis.axis = new THREE.Vector3(); this.axis.copy( axis );\n        this.angle = angle;\n        return this\n    },\n\n\t_sign: function (a) {\n        return 0 > a ? -1 : 0 < a ? 1 : 0\n    },\n\n\t_cosh: function( x )  {\n\t\treturn ( Math.exp( x ) + Math.exp( -x ) ) / 2;\n\t},\n\n\t_sinhInverse: function( x )  {\n\t\t\treturn  Math.log( Math.abs( x ) + Math.sqrt( x * x + 1 ) );\n\t},\n\n    modify: function ( geometry ) {\n\n\t\tvar thirdAxis = new THREE.Vector3();  thirdAxis.crossVectors( this.direction, this.axis );\n\n\t\t// P - matrices of the change-of-coordinates\n\t\tvar P = new THREE.Matrix4();\n\t\tP.set ( thirdAxis.x, thirdAxis.y, thirdAxis.z, 0, \n\t\t\tthis.direction.x, this.direction.y, this.direction.z, 0, \n\t\t\tthis.axis.x, this.axis.y, this.axis.z, 0, \n\t\t\t0, 0, 0, 1 ).transpose();\n\n\t\tvar InverseP =  new THREE.Matrix4().getInverse( P );\n\t\tvar newVertices = []; var oldVertices = []; var anglesBetweenOldandNewVertices = [];\n\n\t\tvar meshGeometryBoundingBoxMaxx = 0; var meshGeometryBoundingBoxMinx = 0;\n\t\tvar meshGeometryBoundingBoxMaxy = 0; var meshGeometryBoundingBoxMiny = 0;\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++)  {\n\n\t\t\tnewVertices[i] = new THREE.Vector3(); newVertices[i].copy( geometry.vertices[i] ).applyMatrix4( InverseP );\n\t\t\tif ( newVertices[i].x > meshGeometryBoundingBoxMaxx ) { meshGeometryBoundingBoxMaxx = newVertices[i].x; }\n\t\t\tif ( newVertices[i].x < meshGeometryBoundingBoxMinx ) { meshGeometryBoundingBoxMinx = newVertices[i].x; }\n\t\t\tif ( newVertices[i].y > meshGeometryBoundingBoxMaxy ) { meshGeometryBoundingBoxMaxy = newVertices[i].y; }\n\t\t\tif ( newVertices[i].y < meshGeometryBoundingBoxMiny ) { meshGeometryBoundingBoxMiny = newVertices[i].y; }\n\n\t\t}\n\n\t\tvar meshWidthold =  meshGeometryBoundingBoxMaxx - meshGeometryBoundingBoxMinx;\n\t\tvar meshDepth =  meshGeometryBoundingBoxMaxy - meshGeometryBoundingBoxMiny;\n\t\tvar ParamB = 2 * this._sinhInverse( Math.tan( this.angle ) ) / meshWidthold;\n\t\tvar oldMiddlex = (meshGeometryBoundingBoxMaxx + meshGeometryBoundingBoxMinx) / 2;\n\t\tvar oldMiddley = (meshGeometryBoundingBoxMaxy + meshGeometryBoundingBoxMiny) / 2;\n\n\t\tfor (var i = 0; i < geometry.vertices.length; i++ )  {\n\n\t\t\toldVertices[i] = new THREE.Vector3(); oldVertices[i].copy( newVertices[i] );\n\t\t\tnewVertices[i].x = this._sign( newVertices[i].x - oldMiddlex ) * 1 / ParamB * this._sinhInverse( ( newVertices[i].x - oldMiddlex ) * ParamB );\n\n\t\t}\n\n\t\tvar meshWidth = 2 / ParamB * this._sinhInverse( meshWidthold / 2 * ParamB );\n\n\t\tvar NewParamB = 2 * this._sinhInverse( Math.tan( this.angle ) ) / meshWidth;\n\n\t\tvar rightEdgePos = new THREE.Vector3( meshWidth / 2, -meshDepth / 2, 0 );\n\t\trightEdgePos.y = 1 / NewParamB * this._cosh( NewParamB * rightEdgePos.x ) - 1 / NewParamB - meshDepth / 2;\n\n\t\tvar bendCenter = new THREE.Vector3( 0, rightEdgePos.y  + rightEdgePos.x / Math.tan( this.angle ), 0 );\n\n\t\tfor ( var i = 0; i < geometry.vertices.length; i++ )  {\n\n\t\t\tvar x0 = this._sign( oldVertices[i].x - oldMiddlex ) * 1 / ParamB * this._sinhInverse( ( oldVertices[i].x - oldMiddlex ) * ParamB );\n\t\t\tvar y0 = 1 / NewParamB * this._cosh( NewParamB * x0 ) - 1 / NewParamB;\n\n\t\t\tvar k = new THREE.Vector3( bendCenter.x - x0, bendCenter.y - ( y0 - meshDepth / 2 ), bendCenter.z ).normalize();\n\n\t\t\tvar Q = new THREE.Vector3();\n\t\t\tQ.addVectors( new THREE.Vector3( x0, y0 - meshDepth / 2, oldVertices[i].z ), k.multiplyScalar( oldVertices[i].y + meshDepth / 2 ) );\n\t\t\tnewVertices[i].x = Q.x;  newVertices[i].y = Q.y;\n\n\t\t}\t\n\n\t\tvar middle = oldMiddlex * meshWidth / meshWidthold;\n\n\t\tfor ( var i = 0; i < geometry.vertices.length; i++ )  {\n\n\t\t\tvar O = new THREE.Vector3( oldMiddlex, oldMiddley, oldVertices[i].z );\n\t\t\tvar p = new THREE.Vector3(); p.subVectors( oldVertices[i], O );\n\t\t\tvar q = new THREE.Vector3(); q.subVectors( newVertices[i], O );\n\n\t\t\tanglesBetweenOldandNewVertices[i] = Math.acos( 1 / this._cosh( ParamB * newVertices[i].x ) )  * this._sign( newVertices[i].x );\n\n\t\t\tnewVertices[i].x = newVertices[i].x + middle;\n\t\t\tgeometry.vertices[i].copy( newVertices[i].applyMatrix4( P ) );\n\n\t\t}\n\n\t\tgeometry.computeFaceNormals();\n\t\tgeometry.verticesNeedUpdate = true;\n\t\tgeometry.normalsNeedUpdate = true;\n\n\t\t// compute Vertex Normals\n\t\tvar fvNames = [ 'a', 'b', 'c', 'd' ];\n\n\t\tfor ( var f = 0, fl = geometry.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = geometry.faces[ f ];\n\t\t\tif ( face.vertexNormals === undefined ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor ( var v = 0, vl = face.vertexNormals.length; v < vl; v ++ ) {\n\n\t\t\t\tvar angle = anglesBetweenOldandNewVertices[ face[ fvNames[ v ] ] ];\n\t\t\t\tvar x = this.axis.x,\n\t\t\t\t\ty = this.axis.y,\n\t\t\t\t\tz = this.axis.z;\n\n\t\t\t\tvar rotateMatrix = new THREE.Matrix3();\n\t\t\t\trotateMatrix.set ( Math.cos(angle) + (1-Math.cos(angle))*x*x, (1-Math.cos(angle))*x*y - Math.sin(angle)*z, (1-Math.cos(angle))*x*z + Math.sin(angle)*y,\n\t\t\t\t\t\t\t\t(1-Math.cos(angle))*y*x + Math.sin(angle)*z, Math.cos(angle) + (1-Math.cos(angle))*y*y, (1-Math.cos(angle))*y*z - Math.sin(angle)*x,\n\t\t\t\t\t\t\t\t(1-Math.cos(angle))*z*x - Math.sin(angle)*y, (1-Math.cos(angle))*z*y + Math.sin(angle)*x, Math.cos(angle) + (1-Math.cos(angle))*z*z );\n\n\t\t\t\tface.vertexNormals[ v ].applyMatrix3( rotateMatrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t// end compute Vertex Normals\t\t\t\n\n\t\treturn this\t\t\t\n    }\t\n};/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CardboardEffect = function ( renderer ) {\n\n\tvar _camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n\tvar _scene = new THREE.Scene();\n\n\tvar _stereo = new THREE.StereoCamera();\n\t_stereo.aspect = 0.5;\n\n\tvar _params = { minFilter: THREE.LinearFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat };\n\n\tvar _renderTarget = new THREE.WebGLRenderTarget( 512, 512, _params );\n\t_renderTarget.scissorTest = true;\n\t_renderTarget.texture.generateMipmaps = false;\n\n\t// Distortion Mesh ported from:\n\t// https://github.com/borismus/webvr-boilerplate/blob/master/src/distortion/barrel-distortion-fragment.js\n\n\tvar distortion = new THREE.Vector2( 0.441, 0.156 );\n\n\tvar geometry = new THREE.PlaneBufferGeometry( 1, 1, 10, 20 ).removeAttribute( 'normal' ).toNonIndexed();\n\n\tvar positions = geometry.attributes.position.array;\n\tvar uvs = geometry.attributes.uv.array;\n\n\t// duplicate\n\tgeometry.attributes.position.count *= 2;\n\tgeometry.attributes.uv.count *= 2;\n\n\tvar positions2 = new Float32Array( positions.length * 2 );\n\tpositions2.set( positions );\n\tpositions2.set( positions, positions.length );\n\n\tvar uvs2 = new Float32Array( uvs.length * 2 );\n\tuvs2.set( uvs );\n\tuvs2.set( uvs, uvs.length );\n\n\tvar vector = new THREE.Vector2();\n\tvar length = positions.length / 3;\n\n\tfor ( var i = 0, l = positions2.length / 3; i < l; i ++ ) {\n\n\t\tvector.x = positions2[ i * 3 + 0 ];\n\t\tvector.y = positions2[ i * 3 + 1 ];\n\n\t\tvar dot = vector.dot( vector );\n\t\tvar scalar = 1.5 + ( distortion.x + distortion.y * dot ) * dot;\n\n\t\tvar offset = i < length ? 0 : 1;\n\n\t\tpositions2[ i * 3 + 0 ] = ( vector.x / scalar ) * 1.5 - 0.5 + offset;\n\t\tpositions2[ i * 3 + 1 ] = ( vector.y / scalar ) * 3.0;\n\n\t\tuvs2[ i * 2 ] = ( uvs2[ i * 2 ] + offset ) * 0.5;\n\n\t}\n\n\tgeometry.attributes.position.array = positions2;\n\tgeometry.attributes.uv.array = uvs2;\n\n\t//\n\n\t// var material = new THREE.MeshBasicMaterial( { wireframe: true } );\n\tvar material = new THREE.MeshBasicMaterial( { map: _renderTarget.texture } );\n\tvar mesh = new THREE.Mesh( geometry, material );\n\t_scene.add( mesh );\n\n\t//\n\n\tthis.setSize = function ( width, height ) {\n\n\t\trenderer.setSize( width, height );\n\n\t\tvar pixelRatio = renderer.getPixelRatio();\n\n\t\t_renderTarget.setSize( width * pixelRatio, height * pixelRatio );\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tscene.updateMatrixWorld();\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t_stereo.update( camera );\n\n\t\tvar width = _renderTarget.width / 2;\n\t\tvar height = _renderTarget.height;\n\n\t\t_renderTarget.scissor.set( 0, 0, width, height );\n\t\t_renderTarget.viewport.set( 0, 0, width, height );\n\t\trenderer.render( scene, _stereo.cameraL, _renderTarget );\n\n\t\t_renderTarget.scissor.set( width, 0, width, height );\n\t\t_renderTarget.viewport.set( width, 0, width, height );\n\t\trenderer.render( scene, _stereo.cameraR, _renderTarget );\n\n\t\trenderer.render( _scene, _camera );\n\n\t};\n\n};;/**\n * @author alteredq / http://alteredqualia.com/\n * @authod mrdoob / http://mrdoob.com/\n * @authod arodic / http://aleksandarrodic.com/\n * @authod fonserbc / http://fonserbc.github.io/\n*/\n\nTHREE.StereoEffect = function ( renderer ) {\n\n\tvar _stereo = new THREE.StereoCamera();\n\t_stereo.aspect = 0.5;\n\n\tthis.setEyeSeparation = function ( eyeSep ) {\n\n\t\t_stereo.eyeSep = eyeSep;\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\trenderer.setSize( width, height );\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tscene.updateMatrixWorld();\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t_stereo.update( camera );\n\n\t\tvar size = renderer.getSize();\n\n\t\tif ( renderer.autoClear ) renderer.clear();\n\t\trenderer.setScissorTest( true );\n\n\t\trenderer.setScissor( 0, 0, size.width / 2, size.height );\n\t\trenderer.setViewport( 0, 0, size.width / 2, size.height );\n\t\trenderer.render( scene, _stereo.cameraL );\n\n\t\trenderer.setScissor( size.width / 2, 0, size.width / 2, size.height );\n\t\trenderer.setViewport( size.width / 2, 0, size.width / 2, size.height );\n\t\trenderer.render( scene, _stereo.cameraR );\n\n\t\trenderer.setScissorTest( false );\n\n\t};\n\n};\n;var GSVPANO = GSVPANO || {};\nGSVPANO.PanoLoader = function (parameters) {\n\n\t'use strict';\n\n\tvar _parameters = parameters || {},\n\t\t_location,\n\t\t_zoom,\n\t\t_panoId,\n\t\t_panoClient = new google.maps.StreetViewService(),\n\t\t_count = 0,\n\t\t_total = 0,\n\t\t_canvas = [],\n\t\t_ctx = [],\n\t\t_wc = 0,\n\t\t_hc = 0,\n\t\tresult = null,\n\t\trotation = 0,\n\t\tcopyright = '',\n\t\tonSizeChange = null,\n\t\tonPanoramaLoad = null;\n\n\tvar levelsW = [ 1, 2, 4, 7, 13, 26 ],\n\t\tlevelsH = [ 1, 1, 2, 4, 7, 13 ];\n\n\tvar widths = [ 416, 832, 1664, 3328, 6656, 13312 ],\n\t\theights = [ 416, 416, 832, 1664, 3328, 6656 ];\n\n\tvar gl = null;\n\ttry{\n\t\tvar canvas = document.createElement( 'canvas' );\n\t    gl = canvas.getContext('experimental-webgl');\n\t    if(gl == null){\n\t        gl = canvas.getContext('webgl');\n\t    }\n\t}\n\tcatch(error){}\n\n\tvar maxW = 1024,\n\t\tmaxH = 1024;\n\n\tif( gl ) {\n\t\tvar maxTexSize = Math.max( gl.getParameter(gl.MAX_TEXTURE_SIZE), 6656 );\n\t\t//alert( 'MAX_TEXTURE_SIZE ' + maxTexSize );\n\t\tmaxW = maxH = maxTexSize;\n\t}\n\t\t\n\tthis.setProgress = function (loaded, total) {\n\t\n\t\tif (this.onProgress) {\n\t\t\tthis.onProgress({loaded: loaded, total: total});\n\t\t}\n\t\t\n\t};\n\n\tthis.throwError = function (message) {\n\t\n\t\tif (this.onError) {\n\t\t\tthis.onError(message);\n\t\t} else {\n\t\t\tconsole.error(message);\n\t\t}\n\t\t\n\t};\n\n\tthis.adaptTextureToZoom = function () {\n\t\n\t\tvar w = levelsW[ _zoom ] * 416,\n\t\t\th = levelsH[ _zoom ] * 416;\n\n\t\tw = widths [ _zoom ];\n\t\th = heights[ _zoom ];\n\n\t\t_wc = Math.ceil( w / maxW );\n\t\t_hc = Math.ceil( h / maxH );\n\n\t\t_canvas = []; _ctx = [];\n\n\t\tvar ptr = 0;\n\t\tfor( var y = 0; y < _hc; y++ ) {\n\t\t\tfor( var x = 0; x < _wc; x++ ) {\n\t\t\t\tvar c = document.createElement('canvas');\n\t\t\t\tif( x < ( _wc - 1 ) ) c.width = maxW; else c.width = w - ( maxW * x );\n\t\t\t\tif( y < ( _hc - 1 ) ) c.height = maxH; else c.height = h - ( maxH * y );\n\t\t\t\t_canvas.push( c );\n\t\t\t\t_ctx.push( c.getContext('2d') );\n\t\t\t\tptr++;\n\t\t\t}\n\t\t}\n\n\t};\n\n\tthis.composeFromTile = function (x, y, texture) {\n\t\n\t\tx *= 512;\n\t\ty *= 512;\n\t\tvar px = Math.floor( x / maxW ), py = Math.floor( y / maxH );\n\n\t\tx -= px * maxW;\n\t\ty -= py * maxH;\n\n\t\t_ctx[ py * _wc + px ].drawImage(texture, 0, 0, texture.width, texture.height, x, y, 512, 512 );\n\t\tthis.progress();\n\t\t\n\t}; \n\n\tthis.progress = function() {\n\n\t\t_count++;\n\t\t\n\t\tvar p = Math.round(_count * 100 / _total);\n\t\tthis.setProgress(_count, _total);\n\t\t\n\t\tif (_count === _total) {\n\t\t\tthis.canvas = _canvas;\n\t\t\tthis.panoId = _panoId;\n\t\t\tthis.zoom = _zoom;\n\t\t\tif (this.onPanoramaLoad) {\n\t\t\t\tthis.onPanoramaLoad(_canvas[0]);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.loadFromId = function( id ) {\n\n\t\t_panoId = id;\n\t\tthis.composePanorama();\n\n\t};\n\n\tthis.composePanorama = function () {\n\t\n\t\tthis.setProgress(0, 1);\n\t\t\n\t\tvar w = levelsW[ _zoom ],\n\t\t\th = levelsH[ _zoom ],\n\t\t\tself = this,\n\t\t\turl,\n\t\t\tx,\n\t\t\ty;\n\t\t\t\n\t\t_count = 0;\n\t\t_total = w * h;\n\n\t\tvar self = this;\n\t\tfor( var y = 0; y < h; y++ ) {\n\t\t\tfor( var x = 0; x < w; x++ ) {\n\t\t\t\tvar url = 'https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom=' + _zoom + '&x=' + x + '&y=' + y + '&panoid=' + _panoId + '&nbt&fover=2';\n\t\t\t\t( function( x, y ) { \n\t\t\t\t\tif( _parameters.useWebGL ) {\n\t\t\t\t\t\tvar texture = THREE.ImageUtils.loadTexture( url, null, function() {\n\t\t\t\t\t\t\tself.composeFromTile( x, y, texture );\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar img = new Image();\n\t\t\t\t\t\timg.addEventListener( 'load', function() {\n\t\t\t\t\t\t\tself.composeFromTile( x, y, this );\t\t\t\n\t\t\t\t\t\t} );\n\t\t\t\t\t\timg.crossOrigin = '';\n\t\t\t\t\t\timg.src = url;\n\t\t\t\t\t}\n\t\t\t\t} )( x, y );\n\t\t\t}\n\t\t}\n\t\t\n\t};\n\t\n\tthis.load = function ( panoid ) {\n\t\n\t\tthis.loadPano( panoid );\n\n\t};\n\n\tthis.loadPano = function( id ) {\n\n\t\tvar self = this;\n\t\t_panoClient.getPanoramaById( id, function (result, status) {\n\t\t\tif (status === google.maps.StreetViewStatus.OK) {\n\t\t\t\tself.result = result;\n\t\t\t\tif( self.onPanoramaData ) self.onPanoramaData( result );\n\t\t\t\t//var h = google.maps.geometry.spherical.computeHeading(location, result.location.latLng);\n\t\t\t\t//rotation = (result.tiles.centerHeading - h) * Math.PI / 180.0;\n\t\t\t\tcopyright = result.copyright;\n\t\t\t\tself.copyright = result.copyright;\n\t\t\t\t_panoId = result.location.pano;\n\t\t\t\tself.location = location;\n\t\t\t\tself.composePanorama();\n\t\t\t} else {\n\t\t\t\tif( self.onNoPanoramaData ) self.onNoPanoramaData( status );\n\t\t\t\tself.throwError('Could not retrieve panorama for the following reason: ' + status);\n\t\t\t}\n\t\t});\n\t\t\n\t};\n\t\n\tthis.setZoom = function( z ) {\n\t\t_zoom = z;\n\t\tthis.adaptTextureToZoom();\n\t};\n\n\tthis.setZoom( _parameters.zoom || 1 );\n\n};;(function(){\n\n    'use strict';\n\n    /**\n     * Data Image Source\n     * @type {String}\n     */\n    PANOLENS.DataImageSource = 'https://pchen66.github.io/Panolens/asset/icon/';\n\n    /**\n     * Data Image\n     * @memberOf PANOLENS\n     * @enum {string}\n     */\n    PANOLENS.DataImage = {\n        Info:               PANOLENS.DataImageSource + 'information.png',\n        Arrow:              PANOLENS.DataImageSource + 'arrow-up.png',\n        FullscreenEnter:    PANOLENS.DataImageSource + 'fullscreen.png',\n        FullscreenLeave:    PANOLENS.DataImageSource + 'fullscreen-exit.png',\n        VideoPlay:          PANOLENS.DataImageSource + 'video-play.png',\n        VideoPause:         PANOLENS.DataImageSource + 'pause.png',\n        WhiteTile:          PANOLENS.DataImageSource + 'tiles.png',\n        ReticleIdle:        PANOLENS.DataImageSource + 'reticle-idle.png',\n        Setting:            PANOLENS.DataImageSource + 'setting.png',\n        ChevronRight:       PANOLENS.DataImageSource + 'chevron-right.png',\n        Check:              PANOLENS.DataImageSource + 'check.png',\n        ViewIndicator:      PANOLENS.DataImageSource + 'view-indicator.svg',\n        ReticleDwell:       PANOLENS.DataImageSource + 'reticle-animation.png'\n    };\n\n})();;(function(){\n\n\t'use strict';\n\t\n\t/**\n\t * Control Index Enum\n\t * @memberOf PANOLENS\n\t * @enum {number}\n\t */\n\t\n\tPANOLENS.Controls = {\n\n\t\tORBIT: 0,\n\n\t\tDEVICEORIENTATION: 1\n\n\t};\n\n\t/**\n\t * Effect Mode Enum\n\t * @memberOf PANOLENS\n\t * @enum {number}\n\t */\n\tPANOLENS.Modes = {\n\n\t\t/** Unknown */\n\t\tUNKNOWN: 0,\n\n\t\t/** Normal */\n\t\tNORMAL: 1,\n\n\t\t/** Google Cardboard*/\n\t\tCARDBOARD: 2,\n\n\t\t/** Stereoscopic **/\n\t\tSTEREO: 3\n\n\t};\n\n})();;(function(){\n\t\n\t'use strict';\n\n\t/**\n\t * Utility\n\t * @namespace PANOLENS.Utils\n\t * @memberOf PANOLENS\n\t * @type {object}\n\t */\n\tPANOLENS.Utils = {};\n\n\tPANOLENS.Utils.checkTouchSupported = function () {\n\n\t\treturn window ? 'ontouchstart' in window || window.navigator.msMaxTouchPoints : false;\n\n\t};\n\n})();;(function(){\n\t\n\t'use strict';\n\n\t/**\n\t * Image loader with progress based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/ImageLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n\tPANOLENS.Utils.ImageLoader = {};\n\n\t/**\n\t * Load an image with XMLHttpRequest to provide progress checking\n\t * @param  {string}   url        - An image url\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {HTMLImageElement}    - DOM image element\n\t */\n\n\tPANOLENS.Utils.ImageLoader.load = function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar cached, request, arrayBufferView, blob, urlCreator, image, reference;\n\n\t\t// Reference key\n\t\tfor ( var iconName in PANOLENS.DataImage ) {\n\n\t\t\tif ( PANOLENS.DataImage.hasOwnProperty( iconName ) \n\t\t\t\t&& url === PANOLENS.DataImage[ iconName ] ) {\n\n\t\t\t\treference = iconName;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Cached\n\t\tcached = THREE.Cache.get( reference ? reference : url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tif ( onLoad ) {\n\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onProgress ) {\n\n\t\t\t\t\t\tonProgress( { loaded: 1, total: 1 } );\n\n\t\t\t\t\t} \n\t\t\t\t\t\n\t\t\t\t\tonLoad( cached );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t\treturn cached;\n\n\t\t}\n\t\t\n\t\t// Construct a new XMLHttpRequest\n\t\turlCreator = window.URL || window.webkitURL;\n\t\timage = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\t// Add to cache\n\t\tTHREE.Cache.add( reference ? reference : url, image );\n\n\t\tfunction onImageLoaded () {\n\n\t\t\turlCreator.revokeObjectURL( image.src );\n\t\t\tonLoad && onLoad( image );\n\n\t\t}\n\n\t\tif ( url.indexOf( 'data:' ) === 0 ) {\n\n\t\t\timage.addEventListener( 'load', onImageLoaded, false );\n\t\t\timage.src = url;\n\t\t\treturn image;\n\t\t}\n\n\t\timage.crossOrigin = this.crossOrigin !== undefined ? this.crossOrigin : '';\n\n\t\trequest = new XMLHttpRequest();\n\t\trequest.open( 'GET', url, true );\n\t\trequest.responseType = 'arraybuffer';\n\t\trequest.onprogress = function ( event ) {\n\n\t\t    if ( event.lengthComputable ) {\n\n\t\t      onProgress && onProgress( { loaded: event.loaded, total: event.total } );\n\n\t\t    }\n\n\t\t};\n\t\trequest.onloadend = function( event ) {\n\n\t\t    arrayBufferView = new Uint8Array( this.response );\n\t\t    blob = new Blob( [ arrayBufferView ] );\n\t\t    \n\t\t    image.addEventListener( 'load', onImageLoaded, false );\n\t\t\timage.src = urlCreator.createObjectURL( blob );\n\n\t\t};\n\n\t\trequest.send(null);\n\n\t};\n\n\t// Enable cache\n\tTHREE.Cache.enabled = true;\n\n})();;(function(){\n\t\n\t'use strict';\n\n\t/**\n\t * Texture loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/TextureLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n\tPANOLENS.Utils.TextureLoader = {};\n\n\t/**\n\t * Load image texture\n\t * @param  {string}   url        - An image url\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {THREE.Texture}   \t - Image texture\n\t */\n\tPANOLENS.Utils.TextureLoader.load = function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new THREE.Texture(); \n\n\t\tPANOLENS.Utils.ImageLoader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tonLoad && onLoad( texture );\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t};\n\n})();;(function(){\n\t\n\t'use strict';\n\n\t/**\n\t * Cube Texture Loader based on {@link https://github.com/mrdoob/three.js/blob/master/src/loaders/CubeTextureLoader.js}\n\t * @memberOf PANOLENS.Utils\n\t * @namespace\n\t */\n\tPANOLENS.Utils.CubeTextureLoader = {};\n\n\t/**\n\t * Load 6 images as a cube texture\n\t * @param  {array}   urls        - Array with 6 image urls\n\t * @param  {function} onLoad     - On load callback\n\t * @param  {function} onProgress - In progress callback\n\t * @param  {function} onError    - On error callback\n\t * @return {THREE.CubeTexture}   - Cube texture\n\t */\n\tPANOLENS.Utils.CubeTextureLoader.load = function ( urls, onLoad, onProgress, onError ) {\n\n\t\tvar texture, loaded, progress, all, loadings;\n\n\t\ttexture = new THREE.CubeTexture( [] );\n\n\t\tloaded = 0;\n\t\tprogress = {};\n\t\tall = {};\n\n\t\turls.map( function ( url, index ) {\n\n\t\t\tPANOLENS.Utils.ImageLoader.load( url, function ( image ) {\n\n\t\t\t\ttexture.images[ index ] = image;\n\n\t\t\t\tloaded++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tonLoad && onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, function ( event ) {\n\n\t\t\t\tprogress[ index ] = { loaded: event.loaded, total: event.total };\n\n\t\t\t\tall.loaded = 0;\n\t\t\t\tall.total = 0;\n\t\t\t\tloadings = 0;\n\n\t\t\t\tfor ( var i in progress ) {\n\n\t\t\t\t\tloadings++;\n\t\t\t\t\tall.loaded += progress[ i ].loaded;\n\t\t\t\t\tall.total += progress[ i ].total;\n\n\t\t\t\t}\n\n\t\t\t\tif ( loadings < 6 ) {\n\n\t\t\t\t\tall.total = all.total / loadings * 6;\n\n\t\t\t\t}\n\n\t\t\t\tonProgress && onProgress( all );\n\n\t\t\t}, onError );\n\n\t\t} );\n\n\t\treturn texture;\n\n\t};\n\n})();;/**\n * Stereographic projection shader\n * based on http://notlion.github.io/streetview-stereographic\n * @author pchen66\n */\n\nPANOLENS.StereographicShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\":   { value: new THREE.Texture() },\n\t\t\"resolution\": { value: 1.0 },\n\t\t\"transform\":  { value: new THREE.Matrix4() },\n\t\t\"zoom\": \t  { value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = vec4( position, 1.0 );\",\n\n\t\t\"}\" \n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"uniform float resolution;\",\n\t\t\"uniform mat4 transform;\",\n\t\t\"uniform float zoom;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"const float PI = 3.141592653589793;\",\n\n\t\t\"void main(){\",\n\n\t\t\t\"vec2 position = -1.0 +  2.0 * vUv;\",\n\n\t\t\t\"position *= vec2( zoom * resolution, zoom * 0.5 );\",\n\n\t\t\t\"float x2y2 = position.x * position.x + position.y * position.y;\",\n\t\t\t\"vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );\",\n\n\t\t\t\"sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );\",\n\n\t\t\t\"vec2 sampleUV = vec2(\",\n\t\t\t\t\"(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,\",\n\t\t\t\t\"(asin(sphere_pnt.z) / PI + 0.5)\",\n\t\t\t\");\",\n\n\t\t\t\"gl_FragColor = texture2D( tDiffuse, sampleUV );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};;( function () {\n\n\t'use strict';\n\n\t/**\n\t * Skeleton panorama derived from THREE.Mesh\n\t * @constructor\n\t * @param {THREE.Geometry} geometry - The geometry for this panorama\n\t * @param {THREE.Material} material - The material for this panorama\n\t */\n\tPANOLENS.Panorama = function ( geometry, material ) {\n\n\t\tTHREE.Mesh.call( this );\n\n\t\tthis.type = 'panorama';\n\n\t\tthis.ImageQualityLow = 1;\n\t\tthis.ImageQualityFair = 2;\n\t\tthis.ImageQualityMedium = 3;\n\t\tthis.ImageQualityHigh = 4;\n\t\tthis.ImageQualitySuperHigh = 5;\n\n\t\tthis.animationDuration = 1000;\n\n\t\tthis.defaultInfospotSize = 350;\n\n\t\tthis.container = undefined;\n\n\t\tthis.loaded = false;\n\n\t\tthis.linkedSpots = [];\n\n\t\tthis.isInfospotVisible = false;\n\t\t\n\t\tthis.linkingImageURL = undefined;\n\t\tthis.linkingImageScale = undefined;\n\n\t\tthis.geometry = geometry;\n\n\t\tthis.material = material;\n\t\tthis.material.side = THREE.DoubleSide;\n\t\tthis.material.visible = false;\n\n\t\tthis.scale.x *= -1;\n\n\t\tthis.infospotAnimation = new TWEEN.Tween( this ).to( {}, this.animationDuration / 2 );\n\n\t\tthis.addEventListener( 'load', this.fadeIn.bind( this ) );\n\t\tthis.addEventListener( 'panolens-container', this.setContainer.bind( this ) );\n\t\tthis.addEventListener( 'click', this.onClick.bind( this ) );\n\n\t\tthis.setupTransitions();\n\n\t}\n\n\tPANOLENS.Panorama.prototype = Object.create( THREE.Mesh.prototype );\n\n\tPANOLENS.Panorama.prototype.constructor = PANOLENS.Panorama;\n\n\t/**\n\t * Adding an object\n\t * To counter the scale.x = -1, it will automatically add an \n\t * empty object with inverted scale on x\n\t * @param {THREE.Object3D} object - The object to be added\n\t */\n\tPANOLENS.Panorama.prototype.add = function ( object ) {\n\n\t\tvar scope, invertedObject;\n\n\t\tscope = this;\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t// In case of infospots\n\t\tif ( object instanceof PANOLENS.Infospot ) {\n\n\t\t\tinvertedObject = object;\n\n\t\t\tif ( object.dispatchEvent ) {\n\n\t\t\t\tthis.container && object.dispatchEvent( { type: 'panolens-container', container: this.container } );\n\t\t\t\t\n\t\t\t\tobject.dispatchEvent( { type: 'panolens-infospot-focus', method: function ( vector, duration, easing ) {\n\n\t\t\t\t\t/**\n\t\t        \t * Infospot focus handler event\n\t\t        \t * @type {object}\n\t\t        \t * @event PANOLENS.Panorama#panolens-viewer-handler\n\t\t        \t * @property {string} method - Viewer function name\n\t\t        \t * @property {*} data - The argument to be passed into the method\n\t\t        \t */\n\t\t        \tscope.dispatchEvent( { type : 'panolens-viewer-handler', method: 'tweenControlCenter', data: [ vector, duration, easing ] } );\n\n\n\t\t\t\t} } );\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Counter scale.x = -1 effect\n\t\t\tinvertedObject = new THREE.Object3D();\n\t\t\tinvertedObject.scale.x = -1;\n\t\t\tinvertedObject.scalePlaceHolder = true;\n\t\t\tinvertedObject.add( object );\n\n\t\t}\n\n\t\tTHREE.Object3D.prototype.add.call( this, invertedObject );\n\n\t};\n\n\tPANOLENS.Panorama.prototype.load = function () {\n\n\t\tthis.onLoad();\n\t\t\n\t};\n\n\t/**\n\t * Click event handler\n\t * @param  {object} event - Click event\n\t * @fires PANOLENS.Infospot#dismiss\n\t */\n\tPANOLENS.Panorama.prototype.onClick = function ( event ) {\n\n\t\tif ( event.intersects && event.intersects.length === 0 ) {\n\n\t\t\tthis.traverse( function ( object ) {\n\n\t\t\t\t/**\n\t\t\t\t * Dimiss event\n\t\t\t\t * @type {object}\n\t\t\t\t * @event PANOLENS.Infospot#dismiss\n\t\t\t\t */\n\t\t\t\tobject.dispatchEvent( { type: 'dismiss' } );\n\n\t\t\t} );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set container of this panorama \n\t * @param {HTMLElement|object} data - Data with container information\n\t * @fires PANOLENS.Infospot#panolens-container\n\t */\n\tPANOLENS.Panorama.prototype.setContainer = function ( data ) {\n\n\t\tvar container;\n\n\t\tif ( data instanceof HTMLElement ) {\n\n\t\t\tcontainer = data;\n\n\t\t} else if ( data && data.container ) {\n\n\t\t\tcontainer = data.container;\n\n\t\t}\n\n\t\tif ( container ) {\n\n\t\t\tthis.children.forEach( function ( child ) {\n\n\t\t\t\tif ( child instanceof PANOLENS.Infospot && child.dispatchEvent ) {\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Set container event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @event PANOLENS.Infospot#panolens-container\n\t\t\t\t\t * @property {HTMLElement} container - The container of this panorama\n\t\t\t\t\t */\n\t\t\t\t\tchild.dispatchEvent( { type: 'panolens-container', container: container } );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tthis.container = container;\n\n\t\t}\n\t\t\n\n\t};\n\n\t/**\n\t * This will be called when panorama is loaded\n\t * @fires PANOLENS.Panorama#load\n\t */\n\tPANOLENS.Panorama.prototype.onLoad = function () {\n\n\t\tthis.loaded = true;\n\n\t\t/**\n\t\t * Load panorama event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#load\n\t\t */\n\t\tthis.dispatchEvent( { type: 'load' } );\n\n\t};\n\n\t/**\n\t * This will be called when panorama is in progress\n\t * @fires PANOLENS.Panorama#progress\n\t */\n\tPANOLENS.Panorama.prototype.onProgress = function ( progress ) {\n\n\t\t/**\n\t\t * Loading panorama progress event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#progress\n\t \t * @property {object} progress - The progress object containing loaded and total amount\n\t\t */\n\t\tthis.dispatchEvent( { type: 'progress', progress: progress } );\n\n\t};\n\n\t/**\n\t * This will be called when panorama loading has error\n\t * @fires PANOLENS.Panorama#error\n\t */\n\tPANOLENS.Panorama.prototype.onError = function () {\n\n\t\t/**\n\t\t * Loading panorama error event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Panorama#error\n\t\t */\n\t\tthis.dispatchEvent( { type: 'error' } );\n\n\t};\n\n\t/**\n\t * Get zoom level based on window width\n\t * @return {number} zoom level indicating image quality\n\t */\n\tPANOLENS.Panorama.prototype.getZoomLevel = function () {\n\n\t\tvar zoomLevel;\n\n\t\tif ( window.innerWidth <= 800 ) {\n\n\t\t\tzoomLevel = this.ImageQualityFair;\n\n\t\t} else if ( window.innerWidth > 800 &&  window.innerWidth <= 1280 ) {\n\n\t\t\tzoomLevel = this.ImageQualityMedium;\n\n\t\t} else if ( window.innerWidth > 1280 && window.innerWidth <= 1920 ) {\n\n\t\t\tzoomLevel = this.ImageQualityHigh;\n\n\t\t} else if ( window.innerWidth > 1920 ) {\n\n\t\t\tzoomLevel = this.ImageQualitySuperHigh;\n\n\t\t} else {\n\n\t\t\tzoomLevel = this.ImageQualityLow;\n\n\t\t}\n\n\t\treturn zoomLevel;\n\n\t};\n\n\t/**\n\t * Update texture of a panorama\n\t * @param {THREE.Texture} texture - Texture to be updated\n\t */\n\tPANOLENS.Panorama.prototype.updateTexture = function ( texture ) {\n\n\t\tthis.material.map = texture;\n\n\t\tthis.material.needsUpdate = true;\n\n\t};\n\n\t/**\n\t * Toggle visibility of infospots in this panorama\n\t * @param  {boolean} isVisible - Visibility of infospots\n\t * @param  {number} delay - Delay in milliseconds to change visibility\n\t * @fires PANOLENS.Panorama#infospot-animation-complete\n\t */\n\tPANOLENS.Panorama.prototype.toggleInfospotVisibility = function ( isVisible, delay ) {\n\n\t\tdelay = ( delay !== undefined ) ? delay : 0;\n\n\t\tvar scope, visible;\n\n\t\tscope = this;\n\t\tvisible = ( isVisible !== undefined ) ? isVisible : ( this.isInfospotVisible ? false : true );\n\n\t\tthis.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof PANOLENS.Infospot ) {\n\n\t\t\t\tvisible ? object.show( delay ) : object.hide( delay );\n\n\t\t\t}\n\n\t\t} );\n\n\t\tthis.isInfospotVisible = visible;\n\n\t\t// Animation complete event\n\t\tthis.infospotAnimation.onComplete( function () {\n\n\t\t\t/**\n\t\t\t * Complete toggling infospot visibility\n\t\t\t * @event PANOLENS.Panorama#infospot-animation-complete\n\t\t\t * @type {object} \n\t\t\t */\n\t\t\tscope.dispatchEvent( { type : 'infospot-animation-complete', visible: visible } );\n\n\t\t} ).delay( delay ).start();\n\n\t};\n\n\t/**\n\t * Set image of this panorama's linking infospot\n\t * @param {string} url   - Url to the image asset\n\t * @param {number} scale - Scale factor of the infospot\n\t */\n\tPANOLENS.Panorama.prototype.setLinkingImage = function ( url, scale ) {\n\n\t\tthis.linkingImageURL = url;\n\t\tthis.linkingImageScale = scale;\n\n\t};\n\n\t/**\n\t * Link one-way panorama\n\t * @param  {PANOLENS.Panorama} pano  - The panorama to be linked to\n\t * @param  {THREE.Vector3} position - The position of infospot which navigates to the pano\n\t * @param  {number} [imageScale=300] - Image scale of linked infospot\n\t * @param  {string} [imageSrc=PANOLENS.DataImage.Arrow] - The image source of linked infospot\n\t */\n\tPANOLENS.Panorama.prototype.link = function ( pano, position, imageScale, imageSrc ) {\n\n\t\tvar scope = this, spot, scale, img;\n\n\t\tthis.visible = true;\n\n\t\tif ( !position ) {\n\n\t\t\tconsole.warn( 'Please specify infospot position for linking' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Infospot scale\n\t\tif ( imageScale !== undefined ) {\n\n\t\t\tscale = imageScale;\n\n\t\t} else if ( pano.linkingImageScale !== undefined ) {\n\n\t\t\tscale = pano.linkingImageScale;\n\n\t\t} else {\n\n\t\t\tscale = 300;\n\n\t\t}\n\n\n\t\t// Infospot image\n\t\tif ( imageSrc ) {\n\n\t\t\timg = imageSrc\n\n\t\t} else if ( pano.linkingImageURL ) {\n\n\t\t\timg = pano.linkingImageURL;\n\n\t\t} else {\n\n\t\t\timg = PANOLENS.DataImage.Arrow;\n\n\t\t}\n\n\t\t// Creates a new infospot\n\t\tspot = new PANOLENS.Infospot( scale, img );\n        spot.position.copy( position );\n        spot.toPanorama = pano;\n        spot.addEventListener( 'click', function () {\n\n        \t/**\n        \t * Viewer handler event\n        \t * @type {object}\n        \t * @event PANOLENS.Panorama#panolens-viewer-handler\n        \t * @property {string} method - Viewer function name\n        \t * @property {*} data - The argument to be passed into the method\n        \t */\n        \tscope.dispatchEvent( { type : 'panolens-viewer-handler', method: 'setPanorama', data: pano } );\n\n        } );\n\n        this.linkedSpots.push( spot );\n\n        this.add( spot );\n\n        this.visible = false;\n\n\t};\n\n\tPANOLENS.Panorama.prototype.reset = function () {\n\n\t\tthis.children.length = 0;\t\n\n\t};\n\n\tPANOLENS.Panorama.prototype.setupTransitions = function () {\n\n\t\tthis.fadeInAnimation = new TWEEN.Tween( this.material )\n\t\t\t.easing( TWEEN.Easing.Quartic.Out )\n\t\t\t.onStart( function () {\n\n\t\t\t\tthis.visible = true;\n\t\t\t\tthis.material.visible = true;\n\n\t\t\t\t/**\n\t\t\t\t * Enter panorama fade in start event\n\t\t\t\t * @event PANOLENS.Panorama#enter-fade-start\n\t\t\t\t * @type {object} \n\t\t\t\t */\n\t\t\t\tthis.dispatchEvent( { type: 'enter-fade-start' } );\n\n\t\t\t}.bind( this ) );\n\n\t\tthis.fadeOutAnimation = new TWEEN.Tween( this.material )\n\t\t\t.easing( TWEEN.Easing.Quartic.Out )\n\t\t\t.onComplete( function () {\n\n\t\t\t\tthis.visible = false;\n\t\t\t\tthis.material.visible = true;\n\n\t\t\t\t/**\n\t\t\t\t * Leave panorama complete event\n\t\t\t\t * @event PANOLENS.Panorama#leave-complete\n\t\t\t\t * @type {object} \n\t\t\t\t */\n\t\t\t\tthis.dispatchEvent( { type: 'leave-complete' } );\n\n\t\t\t}.bind( this ) );\n\n\t\tthis.enterTransition = new TWEEN.Tween( this )\n\t\t\t.easing( TWEEN.Easing.Quartic.Out )\n\t\t\t.onComplete( function () {\n\n\t\t\t\t/**\n\t\t\t\t * Enter panorama and animation complete event\n\t\t\t\t * @event PANOLENS.Panorama#enter-animation-complete\n\t\t\t\t * @type {object} \n\t\t\t\t */\n\t\t\t\tthis.dispatchEvent( { type: 'enter-animation-complete' } );\n\n\t\t\t}.bind ( this ) )\n\t\t\t.start();\n\n\t\tthis.leaveTransition = new TWEEN.Tween( this )\n\t\t\t.easing( TWEEN.Easing.Quartic.Out );\n\n\t};\n\n\t/**\n\t * Start fading in animation\n\t * @fires PANOLENS.Panorama#enter-fade-complete\n\t */\n\tPANOLENS.Panorama.prototype.fadeIn = function ( duration ) {\n\n\t\tduration = duration >= 0 ? duration : this.animationDuration;\n\n\t\tthis.fadeOutAnimation.stop();\n\t\tthis.fadeInAnimation\n\t\t.to( { opacity: 1 }, duration )\n\t\t.onComplete( function () {\n\n\t\t\t\tthis.toggleInfospotVisibility( true, duration / 2 );\n\n\t\t\t\t/**\n\t\t\t\t * Enter panorama fade complete event\n\t\t\t\t * @event PANOLENS.Panorama#enter-fade-complete\n\t\t\t\t * @type {object} \n\t\t\t\t */\n\t\t\t\tthis.dispatchEvent( { type: 'enter-fade-complete' } );\t\t\t\n\n\t\t\t}.bind( this ) )\n\t\t.start();\n\n\t};\n\n\t/**\n\t * Start fading out animation\n\t */\n\tPANOLENS.Panorama.prototype.fadeOut = function ( duration ) {\n\n\t\tduration = duration >= 0 ? duration : this.animationDuration;\n\n\t\tthis.fadeInAnimation.stop();\n\t\tthis.fadeOutAnimation.to( { opacity: 0 }, duration ).start();\n\n\t};\n\n\t/**\n\t * This will be called when entering a panorama \n\t * @fires PANOLENS.Panorama#enter\n\t * @fires PANOLENS.Panorama#enter-animation-start\n\t */\n\tPANOLENS.Panorama.prototype.onEnter = function () {\n\n\t\tvar duration = this.animationDuration;\n\n\t\tthis.leaveTransition.stop();\n\t\tthis.enterTransition\n\t\t\t.to( {}, duration )\n\t\t\t.onStart( function () {\n\n\t\t\t\t/**\n\t\t\t\t * Enter panorama and animation starting event\n\t\t\t\t * @event PANOLENS.Panorama#enter-animation-start\n\t\t\t\t * @type {object} \n\t\t\t\t */\n\t\t\t\tthis.dispatchEvent( { type: 'enter-animation-start' } );\n\t\t\t\t\n\t\t\t\tif ( this.loaded ) {\n\n\t\t\t\t\tthis.fadeIn( duration );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.load();\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}.bind( this ) )\n\t\t\t.start();\n\n\t\t/**\n\t\t * Enter panorama event\n\t\t * @event PANOLENS.Panorama#enter\n\t\t * @type {object} \n\t\t */\n\t\tthis.dispatchEvent( { type: 'enter' } );\n\n\t};\n\n\t/**\n\t * This will be called when leaving a panorama\n\t * @fires PANOLENS.Panorama#leave\n\t */\n\tPANOLENS.Panorama.prototype.onLeave = function () {\n\n\t\tvar duration = this.animationDuration;\n\n\t\tthis.enterTransition.stop();\n\t\tthis.leaveTransition\n\t\t\t.to( {}, duration )\n\t\t\t.onStart( function () {\n\n\t\t\t\t/**\n\t\t\t\t * Leave panorama and animation starting event\n\t\t\t\t * @event PANOLENS.Panorama#leave-animation-start\n\t\t\t\t * @type {object} \n\t\t\t\t */\n\t\t\t\tthis.dispatchEvent( { type: 'leave-animation-start' } );\n\n\t\t\t\tthis.fadeOut( duration );\n\t\t\t\tthis.toggleInfospotVisibility( false );\n\n\t\t\t}.bind( this ) )\n\t\t\t.start();\n\n\t\t/**\n\t\t * Leave panorama event\n\t\t * @event PANOLENS.Panorama#leave\n\t\t * @type {object} \n\t\t */\n\t\tthis.dispatchEvent( { type: 'leave' } );\n\n\t};\n\n\t/**\n\t * Dispose panorama\n\t */\n\tPANOLENS.Panorama.prototype.dispose = function () {\n\n\t\t/**\n    \t * On panorama dispose handler\n    \t * @type {object}\n    \t * @event PANOLENS.Panorama#panolens-viewer-handler\n    \t * @property {string} method - Viewer function name\n    \t * @property {*} data - The argument to be passed into the method\n    \t */\n    \tthis.dispatchEvent( { type : 'panolens-viewer-handler', method: 'onPanoramaDispose', data: this } );\n\n\t\t// recursive disposal on 3d objects\n\t\tfunction recursiveDispose ( object ) {\n\n\t\t\tfor ( var i = object.children.length - 1; i >= 0; i-- ) {\n\n\t\t\t\trecursiveDispose( object.children[i] );\n\t\t\t\tobject.remove( object.children[i] );\n\n\t\t\t}\n\n\t\t\tif ( object instanceof PANOLENS.Infospot ) {\n\n\t\t\t\tobject.dispose();\n\n\t\t\t}\n\t\t\t\n\t\t\tobject.geometry && object.geometry.dispose();\n\t\t\tobject.material && object.material.dispose();\n\t\t}\n\n\t\trecursiveDispose( this );\n\n\t\tif ( this.parent ) {\n\n\t\t\tthis.parent.remove( this );\n\n\t\t}\n\n\t};\n\n} )();;(function(){\n\t\n\t'use strict';\n\t\n\t/**\n\t * Equirectangular based image panorama\n\t * @constructor\n\t * @param {string} image - Image url or HTMLImageElement\n\t * @param {number} [radius=5000] - Radius of panorama\n\t */\n\tPANOLENS.ImagePanorama = function ( image, radius ) {\n\n\t\tradius = radius || 5000;\n\n\t\tvar geometry = new THREE.SphereGeometry( radius, 60, 40 ),\n\t\t\tmaterial = new THREE.MeshBasicMaterial( { opacity: 0, transparent: true } );\n\n\t\tPANOLENS.Panorama.call( this, geometry, material );\n\n\t\tthis.src = image;\n\n\t}\n\n\tPANOLENS.ImagePanorama.prototype = Object.create( PANOLENS.Panorama.prototype );\n\n\tPANOLENS.ImagePanorama.prototype.constructor = PANOLENS.ImagePanorama;\n\n\t/**\n\t * Load image asset\n\t * @param  {*} src - Url or image element\n\t */\n\tPANOLENS.ImagePanorama.prototype.load = function ( src ) {\n\n\t\tsrc = src || this.src;\n\n\t\tif ( !src ) { \n\n\t\t\tconsole.warn( 'Image source undefined' );\n\n\t\t\treturn; \n\n\t\t} else if ( typeof src === 'string' ) {\n\n\t\t\tPANOLENS.Utils.TextureLoader.load( src, this.onLoad.bind( this ), this.onProgress.bind( this ), this.onError.bind( this ) );\n\n\t\t} else if ( src instanceof HTMLImageElement ) {\n\n\t\t\tthis.onLoad( new THREE.Texture( src ) );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * This will be called when image is loaded\n\t * @param  {THREE.Texture} texture - Texture to be updated\n\t */\n\tPANOLENS.ImagePanorama.prototype.onLoad = function ( texture ) {\n\n\t\ttexture.minFilter = texture.magFilter = THREE.LinearFilter;\n\n\t\ttexture.needsUpdate = true;\n\n\t\tthis.updateTexture( texture );\n\n\t\t// Call onLoad after second frame being painted\n\t\twindow.requestAnimationFrame(function(){\n\n\t\t\twindow.requestAnimationFrame(function(){\n\n\t\t\t\tPANOLENS.Panorama.prototype.onLoad.call( this );\n\t\t\t\t\n\n\t\t\t}.bind(this));\n\n\t\t}.bind(this));\n\n\t\t\n\n\t};\n\n\tPANOLENS.ImagePanorama.prototype.reset = function () {\n\n\t\tPANOLENS.Panorama.prototype.reset.call( this );\n\n\t};\n\n})();;(function(){\n\n\t'use strict';\n\t\n\t/**\n\t * Google streetview panorama\n\t * \n\t * [How to get Panorama ID]{@link http://stackoverflow.com/questions/29916149/google-maps-streetview-how-to-get-panorama-id}\n\t * @constructor\n\t * @param {string} panoId - Panorama id from Google Streetview \n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n\tPANOLENS.GoogleStreetviewPanorama = function ( panoId, radius ) {\n\n\t\tPANOLENS.ImagePanorama.call( this, undefined, radius );\n\n\t\tthis.panoId = panoId;\n\n\t\tthis.gsvLoader = undefined;\n\n\t\tthis.loadRequested = false;\n\n\t\tthis.setupGoogleMapAPI();\n\n\t}\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype = Object.create( PANOLENS.ImagePanorama.prototype );\n\n\tPANOLENS.GoogleStreetviewPanorama.constructor = PANOLENS.GoogleStreetviewPanorama;\n\n\t/**\n\t * Load Google Street View by panorama id\n\t * @param {string} panoId - Gogogle Street View panorama id\n\t */\n\tPANOLENS.GoogleStreetviewPanorama.prototype.load = function ( panoId ) {\n\n\t\tthis.loadRequested = true;\n\n\t\tpanoId = ( panoId || this.panoId ) || {};\n\n\t\tif ( panoId && this.gsvLoader ) {\n\n\t\t\tthis.loadGSVLoader( panoId );\n\n\t\t} else {\n\n\t\t\tthis.gsvLoader = {};\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Setup Google Map API\n\t */\n\tPANOLENS.GoogleStreetviewPanorama.prototype.setupGoogleMapAPI = function () {\n\n\t\tvar script = document.createElement( 'script' );\n\t\tscript.src = 'https://maps.googleapis.com/maps/api/js';\n\t\tscript.onreadystatechange = this.setGSVLoader.bind( this );\n    \tscript.onload = this.setGSVLoader.bind( this );\n\n\t\tdocument.getElementsByTagName('head')[0].appendChild( script );\n\n\t};\n\n\t/**\n\t * Set GSV Loader\n\t */\n\tPANOLENS.GoogleStreetviewPanorama.prototype.setGSVLoader = function () {\n\n\t\tthis.gsvLoader = new GSVPANO.PanoLoader();\n\n\t\tif ( this.gsvLoader === {} || this.loadRequested ) {\n\n\t\t\tthis.load();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Get GSV Loader\n\t * @return {object} GSV Loader instance\n\t */\n\tPANOLENS.GoogleStreetviewPanorama.prototype.getGSVLoader = function () {\n\n\t\treturn this.gsvLoader;\n\n\t};\n\n\t/**\n\t * Load GSV Loader\n\t * @param  {string} panoId - Gogogle Street View panorama id\n\t */\n\tPANOLENS.GoogleStreetviewPanorama.prototype.loadGSVLoader = function ( panoId ) {\n\n\t\tthis.loadRequested = false;\n\n\t\tthis.gsvLoader.onProgress = this.onProgress.bind( this );\n\n\t\tthis.gsvLoader.onPanoramaLoad = this.onLoad.bind( this );\n\n\t\tthis.gsvLoader.setZoom( this.getZoomLevel() );\n\n\t\tthis.gsvLoader.load( panoId );\n\n\t\tthis.gsvLoader.loaded = true;\n\t};\n\n\t/**\n\t * This will be called when panorama is loaded\n\t * @param  {HTMLCanvasElement} canvas - Canvas where the tiles have been drawn\n\t */\n\tPANOLENS.GoogleStreetviewPanorama.prototype.onLoad = function ( canvas ) {\n\n\t\tif ( !this.gsvLoader ) { return; }\n\n\t\tPANOLENS.ImagePanorama.prototype.onLoad.call( this, new THREE.Texture( canvas ) );\n\n\t};\n\n\tPANOLENS.GoogleStreetviewPanorama.prototype.reset = function () {\n\n\t\tthis.gsvLoader = undefined;\n\n\t\tPANOLENS.ImagePanorama.prototype.reset.call( this );\n\n\t};\n\n})();;(function(){\n\t\n\t'use strict';\n\t\n\t/**\n\t * Cubemap-based panorama\n\t * @constructor\n\t * @param {array} images - An array of cubetexture containing six images\n\t * @param {number} [edgeLength=10000] - The length of cube's edge\n\t */\n\tPANOLENS.CubePanorama = function ( images, edgeLength ){\n\n\t\tvar shader, geometry, material;\n\n\t\tthis.images = images || [];\n\n\t\tedgeLength = edgeLength || 10000;\n\t\tshader = JSON.parse( JSON.stringify( THREE.ShaderLib[ 'cube' ] ) );\n\n\t\tgeometry = new THREE.BoxGeometry( edgeLength, edgeLength, edgeLength );\n\t\tmaterial = new THREE.ShaderMaterial( {\n\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tuniforms: shader.uniforms,\n\t\t\tside: THREE.BackSide\n\n\t\t} );\n\n\t\tPANOLENS.Panorama.call( this, geometry, material );\n\n\t}\n\n\tPANOLENS.CubePanorama.prototype = Object.create( PANOLENS.Panorama.prototype );\n\n\tPANOLENS.CubePanorama.prototype.constructor = PANOLENS.CubePanorama;\n\n\t/**\n\t * Load 6 images and bind listeners\n\t */\n\tPANOLENS.CubePanorama.prototype.load = function () {\n\n\t\tPANOLENS.Utils.CubeTextureLoader.load( \t\n\n\t\t\tthis.images, \n\n\t\t\tthis.onLoad.bind( this ), \n\t\t\tthis.onProgress.bind( this ), \n\t\t\tthis.onError.bind( this ) \n\n\t\t);\n\n\t};\n\n\t/**\n\t * This will be called when 6 textures are ready\n\t * @param  {THREE.CubeTexture} texture - Cube texture\n\t */\n\tPANOLENS.CubePanorama.prototype.onLoad = function ( texture ) {\n\t\t\n\t\tthis.material.uniforms[ 'tCube' ].value = texture;\n\n\t\tPANOLENS.Panorama.prototype.onLoad.call( this );\n\n\t};\n\n})();;(function(){\n\n\t'use strict';\n\n\t/**\n\t * Basic panorama with 6 faces tile images\n\t * @constructor\n\t * @param {number} [edgeLength=10000] - The length of cube's edge\n\t */\n\tPANOLENS.BasicPanorama = function ( edgeLength ) {\n\t\t\n\t\tvar tile = PANOLENS.DataImage.WhiteTile;\n\n\t\tPANOLENS.CubePanorama.call( this, [ tile, tile, tile, tile, tile, tile ], edgeLength );\n\n\t}\n\n\tPANOLENS.BasicPanorama.prototype = Object.create( PANOLENS.CubePanorama.prototype );\n\n\tPANOLENS.BasicPanorama.prototype.constructor = PANOLENS.BasicPanorama;\n\n})();;(function(){\n\n\t'use strict';\n\n\t/**\n\t * Video Panorama\n\t * @constructor\n\t * @param {string} src - Equirectangular video url\n\t * @param {object} [options] - Option for video settings\n\t * @param {HTMLElement} [options.videoElement] - HTML5 video element contains the video\n\t * @param {boolean} [options.loop=true] - Specify if the video should loop in the end\n\t * @param {boolean} [options.muted=false] - Mute the video or not\n\t * @param {boolean} [options.autoplay=false] - Specify if the video should auto play\n\t * @param {boolean} [options.playsinline=true] - Specify if video should play inline for iOS. If you want it to auto play inline, set both autoplay and muted options to true\n\t * @param {string} [options.crossOrigin=\"anonymous\"] - Sets the cross-origin attribute for the video, which allows for cross-origin videos in some browsers (Firefox, Chrome). Set to either \"anonymous\" or \"use-credentials\".\n\t * @param {number} [radius=5000] - The minimum radius for this panoram\n\t */\n\tPANOLENS.VideoPanorama = function ( src, options, radius ) {\n\n\t\tradius = radius || 5000;\n\n\t\tvar geometry = new THREE.SphereGeometry( radius, 60, 40 ),\n\t\t\tmaterial = new THREE.MeshBasicMaterial( { opacity: 0, transparent: true } );\n\n\t\tPANOLENS.Panorama.call( this, geometry, material );\n\n\t\tthis.src = src;\n\t\tthis.options = options || {};\n\t\tthis.options.playsinline = this.options.playsinline !== false ? true : false;\n\n\t\tthis.videoElement = undefined;\n\t\tthis.videoRenderObject = undefined;\n\t\tthis.videoProgress = 0;\n\n\t\tthis.isIOS = /iPhone|iPad|iPod/i.test( navigator.userAgent );\n\t\tthis.isMobile = this.isIOS || /Android|BlackBerry|Opera Mini|IEMobile/i.test( navigator.userAgent );\n\n\t\tthis.addEventListener( 'leave', this.pauseVideo.bind( this ) );\n\t\tthis.addEventListener( 'enter-fade-start', this.resumeVideoProgress.bind( this ) );\n\t\tthis.addEventListener( 'video-toggle', this.toggleVideo.bind( this ) );\n\t\tthis.addEventListener( 'video-time', this.setVideoCurrentTime.bind( this ) );\n\n\t};\n\n\tPANOLENS.VideoPanorama.prototype = Object.create( PANOLENS.Panorama.prototype );\n\n\tPANOLENS.VideoPanorama.constructor = PANOLENS.VideoPanorama;\n\n\t/**\n\t * Load video panorama\n\t * @param  {string} src     - The video url\n\t * @param  {object} options - Option object containing videoElement\n\t * @fires  PANOLENS.Panorama#panolens-viewer-handler\n\t */\n\tPANOLENS.VideoPanorama.prototype.load = function ( src, options ) {\n\n\t\tvar scope = this;\n\n\t\tsrc = ( src || this.src ) || '';\n\t\toptions = ( options || this.options ) || {};\n\n\t\tthis.videoElement = options.videoElement || document.createElement( 'video' );\n\n\t\tthis.videoElement.muted = options.muted || false;\n\t\tthis.videoElement.loop = ( options.loop !== undefined ) ? options.loop : true;\n\t\tthis.videoElement.autoplay = ( options.autoplay !== undefined ) ? options.autoplay : false;\n\t\tthis.videoElement.crossOrigin = ( options.crossOrigin !== undefined ) ? options.crossOrigin : \"anonymous\";\n\t\t\n\t\t// iphone inline player\n\t\tif (options.playsinline) {\n\t\t\tthis.videoElement.setAttribute( \"playsinline\", \"\" );\n\t\t\tthis.videoElement.setAttribute( \"webkit-playsinline\", \"\" );\n\t\t} \n\n\t\tvar onloadeddata = function(){\n\n\t\t\tscope.onProgress( { loaded: 1, total: 1 } );\n\t\t\tscope.setVideoTexture( scope.videoElement );\n\n\t\t\tif ( scope.videoElement.autoplay ) {\n\n\t\t\t\t/**\n\t\t\t\t * Viewer handler event\n\t\t\t\t * @type {object}\n\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t */\n\t\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false } );\n\n\t\t\t}\n\n\t\t\t// For mobile silent autoplay\n\t\t\tif ( scope.isMobile ) {\n\n\t\t\t\tif ( scope.videoElement.autoplay && scope.videoElement.muted ) {\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Viewer handler event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t\t */\n\t\t\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false } );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t/**\n\t\t\t\t\t * Viewer handler event\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t\t\t */\n\t\t\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true } );\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\n\t\t\tscope.onLoad();\n\t\t};\n\n\t\t/**\n\t\t * Ready state of the audio/video element\n\t\t * 0 = HAVE_NOTHING - no information whether or not the audio/video is ready\n\t\t * 1 = HAVE_METADATA - metadata for the audio/video is ready\n\t\t * 2 = HAVE_CURRENT_DATA - data for the current playback position is available, but not enough data to play next frame/millisecond\n\t\t * 3 = HAVE_FUTURE_DATA - data for the current and at least the next frame is available\n\t\t * 4 = HAVE_ENOUGH_DATA - enough data available to start playing\n\t\t */\n\t\tif ( this.videoElement.readyState > 2 ) {\n\n\t\t\tonloadeddata();\n\n\t\t} else {\n\n\t\t\tif ( !this.videoElement.querySelectorAll('source').length || !this.videoElement.src ) {\n\n\t\t\t\tthis.videoElement.src =  src;\n\n\t\t\t}\n\n\t\t\tthis.videoElement.load();\n\t\t}\n\n\t\tthis.videoElement.onloadeddata = onloadeddata;\n\t\t\n\n\t\tthis.videoElement.ontimeupdate = function ( event ) {\n\n\t\t\tscope.videoProgress = this.duration >= 0 ? this.currentTime / this.duration : 0;\n\n\t\t\t/**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'onVideoUpdate'\n\t\t\t * @property {number} data - The percentage of video progress. Range from 0.0 to 1.0\n\t\t\t */\n\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: scope.videoProgress } );\n\n\t\t};\n\n\t\tthis.videoElement.addEventListener( 'ended', function () {\n\t\t\t\n\t\t\tif ( !scope.options.loop ) {\n\n\t\t\t\tscope.resetVideo();\n\t\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true } );\n\n\t\t\t}\n\n\t\t}, false ); \n\n\t};\n\n\t/**\n\t * Set video texture\n\t * @param {HTMLVideoElement} video  - The html5 video element\n\t * @fires PANOLENS.Panorama#panolens-viewer-handler\n\t */\n\tPANOLENS.VideoPanorama.prototype.setVideoTexture = function ( video ) {\n\n\t\tvar videoTexture, videoRenderObject, scene;\n\n\t\tif ( !video ) return;\n\n\t\tvideoTexture = new THREE.VideoTexture( video );\n\t\tvideoTexture.minFilter = THREE.LinearFilter;\n\t\tvideoTexture.magFilter = THREE.LinearFilter;\n\t\tvideoTexture.format = THREE.RGBFormat;\n\n\t\tvideoRenderObject = {\n\n\t\t\tvideo : video,\n\t\t\tvideoTexture: videoTexture\n\n\t\t};\n\n\t\tif ( this.isIOS ){\n\n\t\t\tenableInlineVideo( video );\n\n\t\t}\n\n\t\tthis.updateTexture( videoTexture );\n\n\t\tthis.videoRenderObject = videoRenderObject;\n\t\n\t};\n\n\tPANOLENS.VideoPanorama.prototype.reset = function () {\n\n\t\tthis.videoElement = undefined;\t\n\n\t\tPANOLENS.Panorama.prototype.reset.call( this );\n\n\t};\n\n\t/**\n\t * Check if video is paused\n\t * @return {boolean} - is video paused or not\n\t */\n\tPANOLENS.VideoPanorama.prototype.isVideoPaused = function () {\n\n\t\treturn this.videoRenderObject.video.paused;\n\n\t};\n\n\t/**\n\t * Toggle video to play or pause\n\t */\n\tPANOLENS.VideoPanorama.prototype.toggleVideo = function () {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video ) {\n\n\t\t\tif ( this.isVideoPaused() ) {\n\n\t\t\t\tthis.videoRenderObject.video.play();\n\n\n\t\t\t} else {\n\n\t\t\t\tthis.videoRenderObject.video.pause();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set video currentTime\n\t * @param {object} event - Event contains percentage. Range from 0.0 to 1.0\n\t */\n\tPANOLENS.VideoPanorama.prototype.setVideoCurrentTime = function ( event ) {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video && !Number.isNaN(event.percentage) && event.percentage !== 1 ) {\n\n\t\t\tthis.videoRenderObject.video.currentTime = this.videoRenderObject.video.duration * event.percentage;\n\n\t\t\tthis.dispatchEvent( { type: 'panolens-viewer-handler', method: 'onVideoUpdate', data: event.percentage } );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Play video\n\t */\n\tPANOLENS.VideoPanorama.prototype.playVideo = function () {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video && this.isVideoPaused() ) {\n\n\t\t\tthis.videoRenderObject.video.play();\n\n\t\t}\n\n\t\t/**\n\t\t * Play event\n\t\t * @type {object}\n\t\t * @event 'play'\n\t\t * */\n\t\tthis.dispatchEvent( { type: 'play' } );\n\n\t};\n\n\t/**\n\t * Pause video\n\t */\n\tPANOLENS.VideoPanorama.prototype.pauseVideo = function () {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video && !this.isVideoPaused() ) {\n\n\t\t\tthis.videoRenderObject.video.pause();\n\n\t\t}\n\n\t\t/**\n\t\t * Pause event\n\t\t * @type {object}\n\t\t * @event 'pause'\n\t\t * */\n\t\tthis.dispatchEvent( { type: 'pause' } );\n\n\t};\n\n\t/**\n\t * Resume video\n\t */\n\tPANOLENS.VideoPanorama.prototype.resumeVideoProgress = function () {\n\n\t\tif ( this.videoElement.autoplay && !this.isMobile ) {\n\n\t\t\tthis.playVideo();\n\n\t\t\t/**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t */\n\t\t\tthis.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: false } );\n\n\t\t} else {\n\n\t\t\tthis.pauseVideo();\n\n\t\t\t/**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'updateVideoPlayButton'\n\t\t\t * @property {boolean} data - Pause video or not\n\t\t\t */\n\t\t\tthis.dispatchEvent( { type: 'panolens-viewer-handler', method: 'updateVideoPlayButton', data: true } );\n\n\t\t}\n\n\t\tthis.setVideoCurrentTime( { percentage: this.videoProgress } );\n\n\t};\n\n\t/**\n\t * Reset video at stating point\n\t */\n\tPANOLENS.VideoPanorama.prototype.resetVideo = function () {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video ) {\n\n\t\t\tthis.setVideoCurrentTime( { percentage: 0 } );\n\n\t\t}\n\n\t};\n\n\t/**\n\t* Check if video is muted\n\t* @return {boolean} - is video muted or not\n\t*/\n\tPANOLENS.VideoPanorama.prototype.isVideoMuted = function () {\n\n\t\treturn this.videoRenderObject.video.muted;\n\n\t};\n\n\t/**\n\t * Mute video\n\t */\n\tPANOLENS.VideoPanorama.prototype.muteVideo = function () {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video && !this.isVideoMuted() ) {\n\n\t\t\tthis.videoRenderObject.video.muted = true;\n\n\t\t}\n\n\t\tthis.dispatchEvent( { type: 'volumechange' } );\n\n\t};\n\n\t/**\n\t * Unmute video\n\t */\n\tPANOLENS.VideoPanorama.prototype.unmuteVideo = function () {\n\n\t\tif ( this.videoRenderObject && this.videoRenderObject.video && this.isVideoMuted() ) {\n\n\t\t\tthis.videoRenderObject.video.muted = false;\n\n\t\t}\n\n\t\tthis.dispatchEvent( { type: 'volumechange' } );\n\n\t};\n\n\t/**\n\t * Returns the video element\n\t */\n\tPANOLENS.VideoPanorama.prototype.getVideoElement = function () {\n\n\t\treturn this.videoRenderObject.video;\n\n\t};\n\n\t/**\n\t * Dispose video panorama\n\t */\n\tPANOLENS.VideoPanorama.prototype.dispose = function () {\n\n\t\tthis.resetVideo();\n\t\tthis.pauseVideo();\n\t\t\n\t\tthis.removeEventListener( 'leave', this.pauseVideo.bind( this ) );\n\t\tthis.removeEventListener( 'enter-fade-start', this.resumeVideoProgress.bind( this ) );\n\t\tthis.removeEventListener( 'video-toggle', this.toggleVideo.bind( this ) );\n\t\tthis.removeEventListener( 'video-time', this.setVideoCurrentTime.bind( this ) );\n\n\t\tPANOLENS.Panorama.prototype.dispose.call( this );\n\n\t};\n\n})();;(function(){\n\n\t'use strict';\n\n\t/**\n\t * Empty panorama\n\t * @constructor\n\t * @param {number} [radius=5000] - Radius of panorama\n\t */\n\tPANOLENS.EmptyPanorama = function ( radius ) {\n\n\t\tradius = radius || 5000;\n\n\t\tvar geometry = new THREE.Geometry(),\n\t\t\tmaterial = new THREE.MeshBasicMaterial( { \n\t\t\t\tcolor: 0x000000, opacity: 1, transparent: true \n\t\t\t} );\n\n\t\tPANOLENS.Panorama.call( this, geometry, material );\n\n\t}\n\n\tPANOLENS.EmptyPanorama.prototype = Object.create( PANOLENS.Panorama.prototype );\n\n\tPANOLENS.EmptyPanorama.prototype.constructor = PANOLENS.EmptyPanorama;\n\n})();;( function () {\n\n\t/**\n\t * Little Planet\n\t * @constructor\n\t * @param {string} type \t\t- Type of little planet basic class\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n\tPANOLENS.LittlePlanet = function ( type, source, size, ratio ) {\n\n\t\ttype = type || 'image';\n\n\t\ttype === 'image' && PANOLENS.ImagePanorama.call( this, source, size );\n\n\t\tthis.size = size || 10000;\n\t\tthis.ratio = ratio || 0.5;\n\t\tthis.EPS = 0.000001;\n\t\tthis.frameId;\n\n\t\tthis.geometry = this.createGeometry();\n\t\tthis.material = this.createMaterial( this.size );\n\n\t\tthis.dragging = false;\n\t\tthis.userMouse = new THREE.Vector2();\n\n\t\tthis.quatA = new THREE.Quaternion();\n\t\tthis.quatB = new THREE.Quaternion();\n\t\tthis.quatCur = new THREE.Quaternion();\n\t\tthis.quatSlerp = new THREE.Quaternion();\n\n\t\tthis.vectorX = new THREE.Vector3( 1, 0, 0 );\n\t\tthis.vectorY = new THREE.Vector3( 0, 1, 0 );\n\n\t\tthis.addEventListener( 'window-resize', this.onWindowResize );\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype = Object.create( PANOLENS.ImagePanorama.prototype );\n\n\tPANOLENS.LittlePlanet.prototype.constructor = PANOLENS.LittlePlanet;\n\n\tPANOLENS.LittlePlanet.prototype.createGeometry = function () {\n\n\t\treturn new THREE.PlaneGeometry( this.size, this.size * this.ratio );\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.createMaterial = function ( size ) {\n\n\t\tvar uniforms = PANOLENS.StereographicShader.uniforms;\n\t\tuniforms.zoom.value = size;\n\n\t\treturn new THREE.ShaderMaterial( {\n\n\t\t\tuniforms: uniforms,\n\t\t\tvertexShader: PANOLENS.StereographicShader.vertexShader,\n\t\t\tfragmentShader: PANOLENS.StereographicShader.fragmentShader\n\n\t\t} );\n\t\t\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.registerMouseEvents = function () {\n\n\t\tthis.container.addEventListener( 'mousedown', this.onMouseDown.bind( this ), false );\n\t\tthis.container.addEventListener( 'mousemove', this.onMouseMove.bind( this ), false );\n\t\tthis.container.addEventListener( 'mouseup', this.onMouseUp.bind( this ), false );\n\t\tthis.container.addEventListener( 'touchstart', this.onMouseDown.bind( this ), false );\n\t\tthis.container.addEventListener( 'touchmove', this.onMouseMove.bind( this ), false );\n\t\tthis.container.addEventListener( 'touchend', this.onMouseUp.bind( this ), false );\n\t\tthis.container.addEventListener( 'mousewheel', this.onMouseWheel.bind( this ), false );\n\t\tthis.container.addEventListener( 'DOMMouseScroll', this.onMouseWheel.bind( this ), false );\n\t\tthis.container.addEventListener( 'contextmenu', this.onContextMenu.bind( this ), false );\n\t\t\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.unregisterMouseEvents = function () {\n\n\t\tthis.container.removeEventListener( 'mousedown', this.onMouseDown.bind( this ), false );\n\t\tthis.container.removeEventListener( 'mousemove', this.onMouseMove.bind( this ), false );\n\t\tthis.container.removeEventListener( 'mouseup', this.onMouseUp.bind( this ), false );\n\t\tthis.container.removeEventListener( 'touchstart', this.onMouseDown.bind( this ), false );\n\t\tthis.container.removeEventListener( 'touchmove', this.onMouseMove.bind( this ), false );\n\t\tthis.container.removeEventListener( 'touchend', this.onMouseUp.bind( this ), false );\n\t\tthis.container.removeEventListener( 'mousewheel', this.onMouseWheel.bind( this ), false );\n\t\tthis.container.removeEventListener( 'DOMMouseScroll', this.onMouseWheel.bind( this ), false );\n\t\tthis.container.removeEventListener( 'contextmenu', this.onContextMenu.bind( this ), false );\n\t\t\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseDown = function ( event ) {\n\n\t\tvar x = ( event.clientX >= 0 ) ? event.clientX : event.touches[ 0 ].clientX;\n\t\tvar y = ( event.clientY >= 0 ) ? event.clientY : event.touches[ 0 ].clientY;\n\n\t\tvar inputCount = ( event.touches && event.touches.length ) || 1 ;\n\n\t\tswitch ( inputCount ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tthis.dragging = true;\n\t\t\t\tthis.userMouse.set( x, y );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\tthis.userMouse.pinchDistance = distance;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tthis.onUpdateCallback();\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseMove = function ( event ) {\n\n\t\tvar x = ( event.clientX >= 0 ) ? event.clientX : event.touches[ 0 ].clientX;\n\t\tvar y = ( event.clientY >= 0 ) ? event.clientY : event.touches[ 0 ].clientY;\n\n\t\tvar inputCount = ( event.touches && event.touches.length ) || 1 ;\n\n\t\tswitch ( inputCount ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tvar angleX = THREE.Math.degToRad( x - this.userMouse.x ) * 0.4;\n\t\t\t\tvar angleY = THREE.Math.degToRad( y - this.userMouse.y ) * 0.4;\n\n\t\t\t\tif ( this.dragging ) {\n\t\t\t\t\tthis.quatA.setFromAxisAngle( this.vectorY, angleX );\n\t\t\t\t\tthis.quatB.setFromAxisAngle( this.vectorX, angleY );\n\t\t\t\t\tthis.quatCur.multiply( this.quatA ).multiply( this.quatB );\n\t\t\t\t\tthis.userMouse.set( x, y );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tvar uniforms = this.material.uniforms;\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tthis.addZoomDelta( this.userMouse.pinchDistance - distance );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseUp = function ( event ) {\n\n\t\tthis.dragging = false;\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onMouseWheel = function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar delta = 0;\n\n\t\tif ( event.wheelDelta !== undefined ) { // WebKit / Opera / Explorer 9\n\n\t\t\tdelta = event.wheelDelta;\n\n\t\t} else if ( event.detail !== undefined ) { // Firefox\n\n\t\t\tdelta = - event.detail;\n\n\t\t}\n\n\t\tthis.addZoomDelta( delta );\n\t\tthis.onUpdateCallback();\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.addZoomDelta = function ( delta ) {\n\n\t\tvar uniforms = this.material.uniforms;\n\t\tvar lowerBound = this.size * 0.1;\n\t\tvar upperBound = this.size * 10;\n\n\t\tuniforms.zoom.value += delta;\n\n\t\tif ( uniforms.zoom.value <= lowerBound ) {\n\n\t\t\tuniforms.zoom.value = lowerBound;\n\n\t\t} else if ( uniforms.zoom.value >= upperBound ) {\n\n\t\t\tuniforms.zoom.value = upperBound;\n\n\t\t}\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onUpdateCallback = function () {\n\n\t\tthis.frameId = window.requestAnimationFrame( this.onUpdateCallback.bind( this ) );\n\t\t\n\t\tthis.quatSlerp.slerp( this.quatCur, 0.1 );\n\t\tthis.material.uniforms.transform.value.makeRotationFromQuaternion( this.quatSlerp );\n\t\t\n\t\tif ( !this.dragging && 1.0 - this.quatSlerp.clone().dot( this.quatCur ) < this.EPS ) {\n\t\t\t\n\t\t\twindow.cancelAnimationFrame( this.frameId );\n\n\t\t}\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.reset = function () {\n\n\t\tthis.quatCur.set( 0, 0, 0, 1 );\n\t\tthis.quatSlerp.set( 0, 0, 0, 1 );\n\t\tthis.onUpdateCallback();\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onLoad = function () {\n\n\t\tthis.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\n\t\tthis.registerMouseEvents();\n\t\tthis.onUpdateCallback();\n\t\t\n\t\tthis.dispatchEvent( { type: 'panolens-viewer-handler', method: 'disableControl' } );\n\t\t\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onLeave = function () {\n\n\t\tthis.unregisterMouseEvents();\n\n\t\tthis.dispatchEvent( { type: 'panolens-viewer-handler', method: 'enableControl', data: PANOLENS.Controls.ORBIT } );\n\n\t\twindow.cancelAnimationFrame( this.frameId );\n\n\t\tPANOLENS.Panorama.prototype.onLeave.call( this );\n\t\t\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onWindowResize = function () {\n\n\t\tthis.material.uniforms.resolution.value = this.container.clientWidth / this.container.clientHeight;\n\n\t};\n\n\tPANOLENS.LittlePlanet.prototype.onContextMenu = function () {\n\n\t\tthis.dragging = false;\n\n\t};\n\n})();;( function () {\n\n\t/**\n\t * Image Little Planet\n\t * @constructor\n\t * @param {string} source \t\t- URL for the image source\n\t * @param {number} [size=10000] - Size of plane geometry\n\t * @param {number} [ratio=0.5]  - Ratio of plane geometry's height against width\n\t */\n\tPANOLENS.ImageLittlePlanet = function ( source, size, ratio ) {\n\n\t\tPANOLENS.LittlePlanet.call( this, 'image', source, size, ratio );\n\n\t};\n\n\tPANOLENS.ImageLittlePlanet.prototype = Object.create( PANOLENS.LittlePlanet.prototype );\n\t\n\tPANOLENS.ImageLittlePlanet.prototype.constructor = PANOLENS.ImageLittlePlanet;\n\n\tPANOLENS.ImageLittlePlanet.prototype.onLoad = function ( texture ) {\n\n\t\tthis.updateTexture( texture );\n\n\t\tPANOLENS.ImagePanorama.prototype.onLoad.call( this, texture );\n\t\tPANOLENS.LittlePlanet.prototype.onLoad.call( this );\n\n\t};\n\n\tPANOLENS.ImageLittlePlanet.prototype.updateTexture = function ( texture ) {\n\n\t\ttexture.minFilter = texture.magFilter = THREE.LinearFilter;\n\t\t\n\t\tthis.material.uniforms[ \"tDiffuse\" ].value = texture;\n\n\t};\n\n} )();;(function(){\n\t\n\t/**\n\t * Reticle 3D Sprite\n\t * @constructor\n\t * @param {THREE.Color} [color=0xfffff] - Color of the reticle sprite\n\t * @param {boolean} [autoSelect=true] - Auto selection\n\t * @param {string} [idleImageUrl=PANOLENS.DataImage.ReticleIdle] - Image asset url\n\t * @param {string} [dwellImageUrl=PANOLENS.DataImage.ReticleDwell] - Image asset url\n\t * @param {number} [dwellTime=1500] - Duration for dwelling sequence to complete\n\t * @param {number} [dwellSpriteAmount=45] - Number of dwelling sprite sequence\n\t */\n\tPANOLENS.Reticle = function ( color, autoSelect, idleImageUrl, dwellImageUrl, dwellTime, dwellSpriteAmount ) {\n\n\t\tcolor = color || 0xffffff;\n\n\t\tthis.autoSelect = autoSelect != undefined ? autoSelect : true;\n\n\t\tthis.dwellTime = dwellTime || 1500;\n\t\tthis.dwellSpriteAmount = dwellSpriteAmount || 45;\n\t\tthis.dwellInterval = this.dwellTime / this.dwellSpriteAmount;\n\n\t\tthis.IDLE = 0;\n\t\tthis.DWELLING = 1;\n\t\tthis.status;\n\n\t\tthis.scaleIdle = new THREE.Vector3( 0.2, 0.2, 1 );\n\t\tthis.scaleDwell = new THREE.Vector3( 1, 0.8, 1 );\n\n\t\tthis.textureLoaded = false;\n\t\tthis.idleImageUrl = idleImageUrl || PANOLENS.DataImage.ReticleIdle;\n\t\tthis.dwellImageUrl = dwellImageUrl || PANOLENS.DataImage.ReticleDwell;\n\t\tthis.idleTexture = new THREE.Texture();\n\t\tthis.dwellTexture = new THREE.Texture();\n\n\t\tTHREE.Sprite.call( this, new THREE.SpriteMaterial( { color: color, depthTest: false } ) );\n\n\t\tthis.currentTile = 0;\n\t\tthis.startTime = 0;\n\n\t\tthis.visible = false;\n\t\tthis.renderOrder = 10;\n\t\tthis.timerId;\n\n\t\t// initial update\n\t\tthis.updateStatus( this.IDLE );\n\n\t};\n\n\tPANOLENS.Reticle.prototype = Object.create( THREE.Sprite.prototype );\n\n\tPANOLENS.Reticle.prototype.constructor = PANOLENS.Reticle;\n\n\t/**\n\t * Make reticle visible\n\t */\n\tPANOLENS.Reticle.prototype.show = function () {\n\n\t\tthis.visible = true;\n\n\t};\n\n\t/**\n\t * Make reticle invisible\n\t */\n\tPANOLENS.Reticle.prototype.hide = function () {\n\n\t\tthis.visible = false;\n\n\t};\n\n\t/**\n\t * Load reticle textures\n\t */\n\tPANOLENS.Reticle.prototype.loadTextures = function () {\n\n\t\tthis.idleTexture = PANOLENS.Utils.TextureLoader.load( this.idleImageUrl );\n\t\tthis.dwellTexture = PANOLENS.Utils.TextureLoader.load( this.dwellImageUrl );\n\n\t\tthis.material.map = this.idleTexture;\n\t\tthis.setupDwellSprite( this.dwellTexture );\n\t\tthis.textureLoaded = true;\n\n\t};\n\n\t/**\n\t * Start reticle timer selection\n\t * @param  {function} completeCallback - Callback after dwell completes\n\t */\n\tPANOLENS.Reticle.prototype.select = function ( completeCallback ) {\n\n\t\tif ( performance.now() - this.startTime >= this.dwellTime ) {\n\n\t\t\tthis.completeDwelling();\n\t\t\tcompleteCallback();\n\n\t\t} else if ( this.autoSelect ){\n\n\t\t\tthis.updateDwelling( performance.now() );\n\t\t\tthis.timerId = window.requestAnimationFrame( this.select.bind( this, completeCallback ) );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Clear and reset reticle timer\n\t */\n\tPANOLENS.Reticle.prototype.clearTimer = function () {\n\n\t\twindow.cancelAnimationFrame( this.timerId );\n\t\tthis.timerId = null;\n\n\t};\n\n\t/**\n\t * Setup dwell sprite animation\n\t */\n\tPANOLENS.Reticle.prototype.setupDwellSprite = function ( texture ) {\n\n\t\ttexture.wrapS = THREE.RepeatWrapping;\n\t\ttexture.repeat.set( 1 / this.dwellSpriteAmount, 1 );\n\n\t}\n\n\t/**\n\t * Update reticle status\n\t * @param {number} status - Reticle status\n\t */\n\tPANOLENS.Reticle.prototype.updateStatus = function ( status ) {\n\n\t\tthis.status = status;\n\n\t\tif ( status === this.IDLE ) {\n\t\t\tthis.scale.copy( this.scaleIdle );\n\t\t\tthis.material.map = this.idleTexture;\n\t\t} else if ( status === this.DWELLING ) {\n\t\t\tthis.scale.copy( this.scaleDwell );\n\t\t\tthis.material.map = this.dwellTexture;\n\t\t}\n\n\t\tthis.currentTile = 0;\n\t\tthis.material.map.offset.x = 0;\n\n\t};\n\n\t/**\n\t * Start dwelling sequence\n\t */\n\tPANOLENS.Reticle.prototype.startDwelling = function ( completeCallback ) {\n\n\t\tif ( !this.autoSelect ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.startTime = performance.now();\n\t\tthis.updateStatus( this.DWELLING );\n\t\tthis.select( completeCallback );\n\n\t};\n\n\t/**\n\t * Update dwelling sequence\n\t * @param  {number} time - Timestamp for elasped time\n\t */\n\tPANOLENS.Reticle.prototype.updateDwelling = function ( time ) {\n\n\t\tvar elasped = time - this.startTime;\n\n\t\tif ( this.currentTile <= this.dwellSpriteAmount ) {\n\t\t\tthis.currentTile = Math.floor( elasped / this.dwellTime * this.dwellSpriteAmount );\n\t\t\tthis.material.map.offset.x = this.currentTile / this.dwellSpriteAmount;\n\t\t} else {\n\t\t\tthis.updateStatus( this.IDLE );\n\t\t}\n\n\t};\n\n\t/**\n\t * Cancel dwelling\n\t */\n\tPANOLENS.Reticle.prototype.cancelDwelling = function () {\n\t\tthis.clearTimer();\n\t\tthis.updateStatus( this.IDLE );\n\n\t};\n\n\t/**\n\t * Complete dwelling\n\t */\n\tPANOLENS.Reticle.prototype.completeDwelling = function () {\n\t\tthis.clearTimer();\t\n\t\tthis.updateStatus( this.IDLE );\n\t};\n\n})();;( function () {\n\t\n\t/**\n\t * Creates a tile with bent capability\n\t * @constructor\n\t * @param {number}  [width=10]                      \t\t\t\t- Width along the X axis\n\t * @param {number}  [height=5]                      \t\t\t\t- Height along the Y axis\n\t * @param {number}  [widthSegments=20]              \t\t\t\t- Width segments\n\t * @param {number}  [heightSegments=20]             \t\t\t\t- Height segments\n\t * @param {THREE.Vector3} [forceDirection=THREE.Vector3( 0, 0, 1 )] - Force direction\n\t * @param {THREE.Vector3} [forceAxis=THREE.Vector3( 0, 1, 0 )] \t\t- Along this axis\n\t * @param {number} [forceAngle=Math.PI/12] \t\t\t\t\t\t\t- Angle to bend in radians\n\t */\n\tPANOLENS.Tile = function ( width, height, widthSegments, heightSegments, forceDirection, forceAxis, forceAngle ) {\n\n\t\tvar scope = this;\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tforceDirection: forceDirection,\n\t\t\tforceAxis: forceAxis,\n\t\t\tforceAngle: forceAngle\n\t\t};\n\n\t\twidth = width || 10;\n\t\theight = height || 5;\n\t\twidthSegments = widthSegments || 1;\n\t\theightSegments = heightSegments || 1;\n\t\tforceDirection = forceDirection || new THREE.Vector3( 0, 0, 1 );\n\t\tforceAxis = forceAxis || new THREE.Vector3( 0, 1, 0 );\n\t\tforceAngle = forceAngle !== undefined ? forceAngle : 0;\n\n\t\tTHREE.Mesh.call( this, \n\t\t\tnew THREE.PlaneGeometry( width, height, widthSegments, heightSegments ),\n\t\t\tnew THREE.MeshBasicMaterial( { color: 0xffffff, transparent: true } )\n\t\t);\n\n\t\tthis.bendModifier = new THREE.BendModifier();\n\n\t\tthis.entity = undefined;\n\n\t\tthis.animationDuration = 500;\n\t\tthis.animationFadeOut = undefined;\n\t\tthis.animationFadeIn = undefined;\n\t\tthis.animationTranslation = undefined;\n\t\tthis.tweens = {};\n\n\t\tif ( forceAngle !== 0 ) {\n\n\t\t\tthis.bend( forceDirection, forceAxis, forceAngle );\n\n\t\t}\n\t\t\n\t\tthis.originalGeometry = this.geometry.clone();\n\t}\n\n\tPANOLENS.Tile.prototype = Object.create( THREE.Mesh.prototype );\n\n\tPANOLENS.Tile.prototype.constructor = PANOLENS.Tile;\n\n\tPANOLENS.Tile.prototype.clone = function (){\n\n\t\tvar parameters = this.parameters, tile;\n\n\t\ttile = new PANOLENS.Tile(\n\t\t\tparameters.width,\n\t\t\tparameters.height,\n\t\t\tparameters.widthSegments,\n\t\t\tparameters.heightSegments,\n\t\t\tparameters.forceDirection,\n\t\t\tparameters.forceAxis,\n\t\t\tparameters.forceAngle\n\t\t);\n\n\t\ttile.setEntity( this.entity );\n\t\ttile.material = this.material.clone();\n\n\t\treturn tile;\n\n\t};\n\n\t/**\n\t * Bend panel with direction, axis, and angle\n\t * @param  {THREE.Vector3} direction - Force direction\n\t * @param  {THREE.Vector3} axis - Along this axis\n\t * @param  {number} angle - Angle to bend in radians\n\t */\n\tPANOLENS.Tile.prototype.bend = function ( direction, axis, angle ) {\n\n\t\tthis.bendModifier.set( direction, axis, angle ).modify( this.geometry );\n\n\t};\n\n\t/**\n\t * Restore geometry back to initial state \n\t */\n\tPANOLENS.Tile.prototype.unbend = function () {\n\n\t\tvar geometry = this.geometry;\n\n\t\tthis.geometry = this.originalGeometry;\n\t\tthis.originalGeometry = this.geometry.clone();\n\n\t\tgeometry.dispose();\n\t\tgeometry = null;\n\n\t};\n\n\t/**\n\t * Create a tween object for animation\n\t * based on - {@link https://github.com/tweenjs/tween.js}\n\t * @param  {string} name       - Name of the tween animation\n\t * @param  {object} object     - Object to be tweened\n\t * @param  {object} toState    - Final state of the object's properties\n\t * @param  {number} duration   - Tweening duration\n\t * @param  {TWEEN.Easing} easing     - Easing function\n\t * @param  {number} delay      - Animation delay time\n\t * @param  {Function} onStart    - On start function\n\t * @param  {Function} onUpdate   - On update function\n\t * @param  {Function} onComplete - On complete function\n\t * @return {TWEEN.Tween}         - Tween object\n\t */\n\tPANOLENS.Tile.prototype.tween = function ( name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete ) {\n\n\t\tobject = object || this;\n    \ttoState = toState || {};\n    \tduration = duration || this.animationDuration;\n    \teasing = easing || TWEEN.Easing.Exponential.Out;\n    \tdelay = delay !== undefined ? delay : 0;\n    \tonStart = onStart ? onStart : null;\n    \tonUpdate = onUpdate ? onUpdate : null;\n    \tonComplete = onComplete ? onComplete : null;\n\n    \tif ( !this.tweens[name] ) {\n    \t\tthis.tweens[name] = new TWEEN.Tween( object )\n    \t\t\t.to( toState, duration )\n\t        \t.easing( easing )\n\t        \t.delay( delay )\n\t        \t.onStart( onStart )\n\t        \t.onUpdate( onUpdate )\n\t        \t.onComplete( onComplete );\n    \t}\n\n    \treturn this.tweens[name];\n\n    };\n\n    /**\n     * Short-hand for displaying a single ripple effect\n     * by duplicating itself and fadeout\n     * @param  {number} scale    - The duplicated self fadeout scale\n     * @param  {number} duration - Effect duration\n     * @param  {TWEEN.Easing} easing   - Easing function\n     */\n    PANOLENS.Tile.prototype.ripple = function ( scale, duration, easing ) {\n\n    \tscale = scale || 2;\n    \tduration = duration || 200;\n    \teasing = easing || TWEEN.Easing.Cubic.Out;\n\n    \tvar scope = this, ripple = this.clone();\n\n        new TWEEN.Tween( ripple.scale )\n        .to({x: scale, y: scale}, duration )\n        .easing( easing )\n        .start();\n\n        new TWEEN.Tween( ripple.material )\n        .to({opacity: 0}, duration )\n        .easing( easing )\n        .onComplete(function(){\n            scope.remove( ripple );\n            ripple.geometry.dispose();\n            ripple.material.dispose();\n        })\n        .start();\n\n        this.add( ripple );\n\n    };\n\n    /**\n\t * Set entity if multiple objects are considered as one entity\n\t * @param {object} entity - Entity represents whole group structure\n\t */\n\tPANOLENS.Tile.prototype.setEntity = function ( entity ) {\n\n\t\tthis.entity = entity;\n\n\t};\n\n} )();;(function(){\n\t\n\t'use strict';\n\n    /**\n     * Group consists of tile array\n     * @constructor\n     * @param {array}  tileArray         - Tile array of PANOLENS.Tile \n     * @param {number} verticalGap       - Vertical gap between each tile\n     * @param {number} depthGap          - Depth gap between each tile\n     * @param {number} animationDuration - Animation duration\n     * @param {number} offset            - Offset index\n     */\n\tPANOLENS.TileGroup = function ( tileArray, verticalGap, depthGap, animationDuration, offset ) {\n\n\t\tvar scope = this, textureLoader;\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tthis.tileArray = tileArray || [];\n\t\tthis.offset = offset !== undefined ? offset : 0;\n\t\tthis.v_gap = verticalGap !== undefined ? verticalGap : 6;\n\t\tthis.d_gap = depthGap !== undefined ? depthGap : 2;\n\t\tthis.animationDuration = animationDuration !== undefined ? animationDuration : 200;\n\t\tthis.animationEasing = TWEEN.Easing.Exponential.Out;\n\t\tthis.visibleDelta = 2;\n\n\t\tthis.tileArray.map( function ( tile, index ) {\n\n\t\t\tif ( tile.image ) {\n\n\t\t\t\tPANOLENS.Utils.TextureLoader.load( tile.image, scope.setTexture.bind( tile ) );\n\n\t\t\t}\n\n\t\t\ttile.position.set( 0, index * -scope.v_gap, index * -scope.d_gap );\n\t\t\ttile.originalPosition = tile.position.clone();\n\t\t\ttile.setEntity( scope );\n\t\t\tscope.add( tile );\n\n\t\t} );\n\n\t\tthis.updateVisbility();\n\n\t}\n\n\tPANOLENS.TileGroup.prototype = Object.create( THREE.Object3D.prototype );\n\n\tPANOLENS.TileGroup.prototype.constructor = PANOLENS.TileGroup;\n\n    /**\n     * Update corresponding tile textures\n     * @param  {array} imageArray - Image array with index to index image update\n     */\n\tPANOLENS.TileGroup.prototype.updateTexture = function ( imageArray ) {\n\n\t\tvar scope = this;\n\n\t\timageArray = imageArray || [];\n\t\tthis.children.map( function ( child, index ) {\n\t\t\tif ( child instanceof PANOLENS.Tile && imageArray[index] ) {\n\t\t\t\tPANOLENS.Utils.TextureLoader.load( imageArray[index], scope.setTexture.bind( child ) );\n\t    \t\tif ( child.outline ) {\n\t    \t\t\tchild.outline.material.visible = true;\n\t    \t\t}\n\t\t\t}\n\t\t} );\n\n\t};\n\n    /**\n     * Update all tile textures and hide the remaining ones\n     * @param  {array} imageArray - Image array with index to index image update\n     */\n\tPANOLENS.TileGroup.prototype.updateAllTexture = function ( imageArray ) {\n\n\t\tthis.updateTexture( imageArray );\n\n\t\tif ( imageArray.length < this.children.length ) {\n\t\t\tfor ( var i = imageArray.length; i < this.children.length; i++ ) {\n\t\t\t\tif ( this.children[i] instanceof PANOLENS.Tile ) {\n\t\t\t\t\tthis.children[i].material.visible = false;\n\t\t\t\t\tif ( this.children[i].outline ) {\n\t\t\t\t\t\tthis.children[i].outline.material.visible = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n    /**\n     * Set individual texture\n     * @param {THREE.Texture} texture - Texture to be updated\n     */\n\tPANOLENS.TileGroup.prototype.setTexture = function ( texture ) {\n\n        texture.minFilter = THREE.LinearFilter;\n        texture.magFilter = THREE.LinearFilter;\n        this.material.visible = true;\n        this.material.map = texture;\n        this.material.needsUpdate = true;\n\n    };\n\n    /**\n     * Update visibility\n     */\n    PANOLENS.TileGroup.prototype.updateVisbility = function () {\n\n    \tthis.children[this.offset].visible = true;\n    \tnew TWEEN.Tween( this.children[this.offset].material )\n\t\t.to( { opacity: 1 }, this.animationDuration )\n\t\t.easing( this.animationEasing )\n\t\t.start();\n    \t\n    \tif ( this.children[this.offset].outline ) {\n\n    \t\tthis.children[this.offset].outline.visible = true;\n\n    \t}\n\n    \t// Backward\n    \tfor ( var i = this.offset - 1; i >= 0 ; i-- ) {\n\n    \t\tif ( this.tileArray.indexOf(this.children[i]) === -1 ) { continue; }\n\n    \t\tif ( this.offset - i <= this.visibleDelta ) {\n\n    \t\t\tthis.children[i].visible = true;\n    \t\t\tnew TWEEN.Tween( this.children[i].material )\n    \t\t\t.to( { opacity: 1 / ( this.offset - i ) * 0.5 }, this.animationDuration )\n    \t\t\t.easing( this.animationEasing )\n    \t\t\t.start();\n\n    \t\t} else {\n\n    \t\t\tthis.children[i].visible = false;\n\n    \t\t}\n\n    \t\tthis.children[i].outline && (this.children[i].outline.visible = false);\n\n    \t}\n\n    \t// Forward\n    \tfor ( var i = this.offset + 1; i < this.children.length ; i++ ) {\n\n    \t\tif ( this.tileArray.indexOf(this.children[i]) === -1 ) { continue; }\n\n    \t\tif ( i - this.offset <= this.visibleDelta ) {\n\n    \t\t\tthis.children[i].visible = true;\n    \t\t\tnew TWEEN.Tween( this.children[i].material )\n    \t\t\t.to( { opacity: 1 / ( i - this.offset ) * 0.5 }, this.animationDuration )\n    \t\t\t.easing( this.animationEasing )\n    \t\t\t.start();\n\n    \t\t} else {\n\n    \t\t\tthis.children[i].visible = false;\n\n    \t\t}\n\n    \t\tthis.children[i].outline && (this.children[i].outline.visible = false);\n\n    \t}\n\n    };\n\n    /**\n     * Scroll up\n     * @param  {number} duration - Scroll up duration\n     */\n    PANOLENS.TileGroup.prototype.scrollUp = function ( duration ) {\n\n    \tvar tiles = this.tileArray, offset;\n\n    \tduration = duration !== undefined ? duration : this.animationDuration;\n\n    \toffset = this.offset + 1;\n\n    \tif ( this.offset < tiles.length - 1 && tiles[ this.offset + 1 ].material.visible ) {\n\n    \t\tfor ( var i = tiles.length - 1; i >= 0; i-- ) {\n\t    \t\t\n    \t\t\tnew TWEEN.Tween( tiles[i].position )\n    \t\t\t.to({ y: ( i - offset ) * -this.v_gap,\n    \t\t\t\t  z: Math.abs( i - offset ) * -this.d_gap }, duration )\n    \t\t\t.easing( this.animationEasing )\n    \t\t\t.start();\n\t    \t\t\n\t    \t}\n\n\t    \tthis.offset ++;\n\t    \tthis.updateVisbility();\n\t    \tthis.dispatchEvent( { type: 'scroll', direction: 'up' } );\n\n    \t}\n\n    };\n\n    /**\n     * Scroll down \n     * @param  {number} duration - Scroll up duration\n     */\n    PANOLENS.TileGroup.prototype.scrollDown = function ( duration ) {\n\n    \tvar tiles = this.tileArray, offset;\n\n    \tduration = duration !== undefined ? duration : this.animationDuration;\n\n    \toffset = this.offset - 1;\n\n    \tif ( this.offset > 0 && tiles[ this.offset - 1 ].material.visible ) {\n\n    \t\tfor ( var i = 0; i < tiles.length; i++ ) {\n\n\t    \t\tnew TWEEN.Tween( tiles[i].position )\n    \t\t\t.to({ y: ( i - offset ) * -this.v_gap,\n    \t\t\t\t  z: Math.abs( i - offset ) * -this.d_gap }, duration )\n    \t\t\t.easing( this.animationEasing )\n    \t\t\t.start();\n\t    \t\t\n\t    \t}\n\n\t    \tthis.offset --;\n\t    \tthis.updateVisbility();\n\t    \tthis.dispatchEvent( { type: 'scroll', direction: 'down' } );\n\n    \t}\n\n    };\n\n    PANOLENS.TileGroup.prototype.reset = function () {\n\n    \tthis.tileArray.map( function ( child, index ) {\n\n    \t\tchild.position.copy( child.originalPosition );\n\n    \t} );\n\n    \tthis.offset = 0;\n    \tthis.updateVisbility();\n\n    };\n\n    /**\n     * Get current index\n     * @return {number} Index of the group. Range from 0 to this.tileArray.length\n     */\n    PANOLENS.TileGroup.prototype.getIndex = function () {\n\n    \treturn this.offset;\n\n    };\n\n    /**\n     * Get visible tile counts\n     * @return {number} Number of visible tiles\n     */\n    PANOLENS.TileGroup.prototype.getTileCount = function () {\n\n    \tvar count = 0;\n\n    \tthis.tileArray.map( function ( tile ) {\n\n    \t\tif ( tile.material.visible ) {\n\n    \t\t\tcount ++;\n\n    \t\t}\n\n    \t} );\n\n    \treturn count;\n\n    };\n\n})();;(function(){\n\t\n\t'use strict';\n\n\tvar sharedFont, sharedTexture;\n\tvar pendingQueue = [];\n\n\t/**\n\t * Sprite text based on {@link https://github.com/Jam3/three-bmfont-text}\n\t * @constructor\n\t * @param {string} text     - Text to be displayed\n\t * @param {number} maxWidth\t- Max width\n\t * @param {number} color    - Color in hexadecimal\n\t * @param {number} opacity  - Text opacity\n\t * @param {object} options  - Options to create text geometry\n\t */\n\tPANOLENS.SpriteText = function ( text, maxWidth, color, opacity, options ) {\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tthis.text = text || '';\n\t\tthis.maxWidth = maxWidth || 2000;\n\t\tthis.color = color || 0xffffff;\n\t\tthis.opacity = opacity !== undefined ? opacity : 1;\n\t\tthis.options = options || {};\n\n\t\tthis.animationDuration = 500;\n\t\tthis.animationFadeOut = undefined;\n\t\tthis.animationFadeIn = undefined;\n\t\tthis.tweens = {};\n\n\t\tthis.addText( text );\n\n\t}\n\n\tPANOLENS.SpriteText.prototype = Object.create( THREE.Object3D.prototype );\n\n\tPANOLENS.SpriteText.prototype.constructor = PANOLENS.SpriteText;\n\n\t// Reference function will be overwritten by Bmfont.js\n\tPANOLENS.SpriteText.prototype.generateTextGeometry = function () {};\n\tPANOLENS.SpriteText.prototype.generateSDFShader = function () {};\n\n\t/**\n\t * Set BMFont\n\t * @param {Function} callback - Callback after font is loaded\n\t * @param {object}   font     - The font to be loaded\n\t * @param {THREE.Texture}   texture  - Font texture\n\t */\n\tPANOLENS.SpriteText.prototype.setBMFont = function ( callback, font, texture ) {\n\n\t\ttexture.needsUpdate = true;\n\t  \ttexture.minFilter = THREE.LinearMipMapLinearFilter;\n\t\ttexture.magFilter = THREE.LinearFilter;\n\t\ttexture.generateMipmaps = true;\n\t\ttexture.anisotropy = 8;\n\n\t\tsharedFont = font;\n\t\tsharedTexture = texture;\n\n\t\tfor ( var i = pendingQueue.length - 1; i >= 0; i-- ) {\n\t\t\tpendingQueue[ i ].target.addText( pendingQueue[ i ].text );\n\t\t}\n\n\t\twhile ( pendingQueue.length > 0 ) {\n\t\t\tpendingQueue.pop();\n\t\t}\n\n\t\tcallback && callback();\n\n\t};\n\n\t/**\n\t * Add text mesh\n\t * @param {string} text - Text to be displayed\n\t */\n\tPANOLENS.SpriteText.prototype.addText = function ( text ) {\n\n\t\tif ( !sharedFont || !sharedTexture ) {\n\t\t\tpendingQueue.push( { target: this, text: text } );\n\t\t\treturn;\n\t\t}\n\n\t\tvar textAnchor = new THREE.Object3D();\n\n\t\tthis.options.text = text;\n\t\tthis.options.font = sharedFont;\n\t\tthis.options.width = this.maxWidth;\n\n\t\tvar geometry = this.generateTextGeometry( this.options );\n\t\tgeometry.computeBoundingBox();\n\t\tgeometry.computeBoundingSphere();\n\n\t\tvar material = new THREE.RawShaderMaterial(this.generateSDFShader({\n\t\t    map: sharedTexture,\n\t\t    side: THREE.DoubleSide,\n\t\t    transparent: true,\n\t\t    color: this.color,\n\t\t    opacity: this.opacity\n\t\t}));\n\n\t\tvar layout = geometry.layout;\n\t\tvar textMesh = new THREE.Mesh( geometry, material );\n\n\t\ttextMesh.entity = this;\n\t\ttextMesh.position.x = -layout.width / 2;\n\t\ttextMesh.position.y = layout.height * 1.035;\n\n\t\ttextAnchor.scale.x = textAnchor.scale.y = -0.05;\n\t\ttextAnchor.add( textMesh );\n\n\t\tthis.mesh = textMesh;\n\t\tthis.add( textAnchor );\n\n\t};\n\n\t/**\n\t * Update text geometry\n\t * @param  {object} options - Geometry options based on\n\t *  https://github.com/Jam3/three-bmfont-text#geometry--createtextopt\n\t */\n\tPANOLENS.SpriteText.prototype.update = function ( options ) {\n\n\t\tvar mesh;\n\n\t\toptions = options || {};\n\n\t\tmesh = this.mesh;\n\n\t\tmesh.geometry.update( options );\n\t\tmesh.position.x = -mesh.geometry.layout.width / 2;\n\t\tmesh.position.y = mesh.geometry.layout.height * 1.035;\n\n\t};\n\n\t/**\n\t * Create a tween object for animation\n\t * based on - {@link https://github.com/tweenjs/tween.js}\n\t * @param  {string} name       - Name of the tween animation\n\t * @param  {object} object     - Object to be tweened\n\t * @param  {object} toState    - Final state of the object's properties\n\t * @param  {number} duration   - Tweening duration\n\t * @param  {TWEEN.Easing} easing     - Easing function\n\t * @param  {number} delay      - Animation delay time\n\t * @param  {Function} onStart    - On start function\n\t * @param  {Function} onUpdate   - On update function\n\t * @param  {Function} onComplete - On complete function\n\t * @return {TWEEN.Tween}         - Tween object\n\t */\n\tPANOLENS.SpriteText.prototype.tween = function ( name, object, toState, duration, easing, delay, onStart, onUpdate, onComplete ) {\n\n\t\tobject = object || this;\n\t\ttoState = toState || {};\n\t\tduration = duration || this.animationDuration;\n\t\teasing = easing || TWEEN.Easing.Exponential.Out;\n\t\tdelay = delay !== undefined ? delay : 0;\n\t\tonStart = onStart ? onStart : null;\n\t\tonUpdate = onUpdate ? onUpdate : null;\n\t\tonComplete = onComplete ? onComplete : null;\n\n\t\tif ( !this.tweens[name] ) {\n\t\t\tthis.tweens[name] = new TWEEN.Tween( object )\n\t\t\t\t.to( toState, duration )\n\t        \t.easing( easing )\n\t        \t.delay( delay )\n\t        \t.onStart( onStart )\n\t        \t.onUpdate( onUpdate )\n\t        \t.onComplete( onComplete );\n\t\t}\n\n\t\treturn this.tweens[name];\n\n\t};\n\n\t/**\n\t * Get geometry layout\n\t * @return {object} Text geometry layout \n\t */\n\tPANOLENS.SpriteText.prototype.getLayout = function () {\n\n\t\treturn this.mesh && this.mesh.geometry && this.mesh.geometry.layout || {};\n\n\t};\n\n\t/**\n\t * Set entity if multiple objects are considered as one entity\n\t * @param {object} entity - Entity represents whole group structure\n\t */\n\tPANOLENS.SpriteText.prototype.setEntity = function ( entity ) {\n\n\t\tthis.entity = entity;\n\n\t};\n\n})();;(function () {\n\t\n\t/**\n\t * Widget for controls\n\t * @constructor\n\t * @param {HTMLElement} container - A domElement where default control widget will be attached to\n\t */\n\tPANOLENS.Widget = function ( container ) {\n\n\t\tTHREE.EventDispatcher.call( this );\n\n\t\tthis.DEFAULT_TRANSITION  = 'all 0.27s ease';\n\t\tthis.TOUCH_ENABLED = PANOLENS.Utils.checkTouchSupported();\n\t\tthis.PREVENT_EVENT_HANDLER = function ( event ) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t};\n\n\t\tthis.container = container;\n\n\t\tthis.barElement;\n\t\tthis.fullscreenElement;\n\t\tthis.videoElement;\n\t\tthis.settingElement;\n\n\t\tthis.mainMenu;\n\n\t\tthis.activeMainItem;\n\t\tthis.activeSubMenu;\n\t\tthis.mask;\n\n\t}\n\n\tPANOLENS.Widget.prototype = Object.create( THREE.EventDispatcher.prototype );\n\n\tPANOLENS.Widget.prototype.constructor = PANOLENS.Widget;\n\n\t/**\n\t * Add control bar\n\t */\n\tPANOLENS.Widget.prototype.addControlBar = function () {\n\n\t\tif ( !this.container ) {\n\n\t\t\tconsole.warn( 'Widget container not set' ); \n\t\t\treturn; \n\t\t}\n\n\t\tvar scope = this, bar, styleTranslate, styleOpacity, gradientStyle;\n\n\t\tgradientStyle = 'linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))';\n\n\t\tbar = document.createElement( 'div' );\n\t\tbar.style.width = '100%';\n\t\tbar.style.height = '44px';\n\t\tbar.style.float = 'left';\n\t\tbar.style.transform = bar.style.webkitTransform = bar.style.msTransform = 'translateY(-100%)';\n\t\tbar.style.background = '-webkit-' + gradientStyle;\n\t\tbar.style.background = '-moz-' + gradientStyle;\n\t\tbar.style.background = '-o-' + gradientStyle;\n\t\tbar.style.background = '-ms-' + gradientStyle;\n\t\tbar.style.background = gradientStyle;\n\t\tbar.style.transition = this.DEFAULT_TRANSITION;\n\t\tbar.style.pointerEvents = 'none';\n\t\tbar.isHidden = false;\n\t\tbar.toggle = function () {\n\t\t\tbar.isHidden = !bar.isHidden;\n\t\t\tstyleTranslate = bar.isHidden ? 'translateY(0)' : 'translateY(-100%)';\n\t\t\tstyleOpacity = bar.isHidden ? 0 : 1;\n\t\t\tbar.style.transform = bar.style.webkitTransform = bar.style.msTransform = styleTranslate;\n\t\t\tbar.style.opacity = styleOpacity;\n\t\t};\n\n\t\t// Menu\n\t\tvar menu = this.createDefaultMenu();\n\t\tthis.mainMenu = this.createMainMenu( menu );\n\t\tbar.appendChild( this.mainMenu );\n\n\t\t// Mask\n\t\tvar mask = this.createMask();\n\t\tthis.mask = mask;\n\t\tthis.container.appendChild( mask );\n\n\t\t// Dispose\n\t\tbar.dispose = function () {\n\n\t\t\tif ( scope.fullscreenElement ) {\n\n\t\t\t\tbar.removeChild( scope.fullscreenElement );\n\t\t\t\tscope.fullscreenElement.dispose();\n\t\t\t\tscope.fullscreenElement = null;\n\n\t\t\t}\n\n\t\t\tif ( scope.settingElement ) {\n\n\t\t\t\tbar.removeChild( scope.settingElement );\n\t\t\t\tscope.settingElement.dispose();\n\t\t\t\tscope.settingElement = null;\n\n\t\t\t}\n\n\t\t\tif ( scope.videoElement ) {\n\n\t\t\t\tbar.removeChild( scope.videoElement );\n\t\t\t\tscope.videoElement.dispose();\n\t\t\t\tscope.videoElement = null;\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.container.appendChild( bar );\n\n\t\t// Mask events\n\t\tthis.mask.addEventListener( 'mousemove', this.PREVENT_EVENT_HANDLER, true );\n\t\tthis.mask.addEventListener( 'mouseup', this.PREVENT_EVENT_HANDLER, true );\n\t\tthis.mask.addEventListener( 'mousedown', this.PREVENT_EVENT_HANDLER, true );\n\t\tthis.mask.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', function ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tscope.mask.hide();\n\t\t\tscope.settingElement.deactivate();\n\n\t\t}, false );\n\n\t\t// Event listener\n\t\tthis.addEventListener( 'control-bar-toggle', bar.toggle );\n\n\t\tthis.barElement = bar;\n\n\t};\n\n\t/**\n\t * Create default menu\n\t */\n\tPANOLENS.Widget.prototype.createDefaultMenu = function () {\n\n\t\tvar scope = this, handler;\n\n\t\thandler = function ( method, data ) {\n\n\t\t\treturn function () {\n\n\t\t\t\tscope.dispatchEvent( { \n\n\t\t\t\t\ttype: 'panolens-viewer-handler', \n\t\t\t\t\tmethod: method, \n\t\t\t\t\tdata: data \n\n\t\t\t\t} ); \n\n\t\t\t}\n\n\t\t};\n\n\t\treturn [\n\n\t\t\t{ \n\t\t\t\ttitle: 'Control', \n\t\t\t\tsubMenu: [ \n\t\t\t\t\t{ \n\t\t\t\t\t\ttitle: this.TOUCH_ENABLED ? 'Touch' : 'Mouse', \n\t\t\t\t\t\thandler: handler( 'enableControl', PANOLENS.Controls.ORBIT )\n\t\t\t\t\t},\n\t\t\t\t\t{ \n\t\t\t\t\t\ttitle: 'Sensor', \n\t\t\t\t\t\thandler: handler( 'enableControl', PANOLENS.Controls.DEVICEORIENTATION ) \n\t\t\t\t\t} \n\t\t\t\t]\n\t\t\t},\n\n\t\t\t{ \n\t\t\t\ttitle: 'Mode', \n\t\t\t\tsubMenu: [ \n\t\t\t\t\t{ \n\t\t\t\t\t\ttitle: 'Normal',\n\t\t\t\t\t\thandler: handler( 'disableEffect' )\n\t\t\t\t\t}, \n\t\t\t\t\t{ \n\t\t\t\t\t\ttitle: 'Cardboard',\n\t\t\t\t\t\thandler: handler( 'enableEffect', PANOLENS.Modes.CARDBOARD )\n\t\t\t\t\t},\n\t\t\t\t\t{ \n\t\t\t\t\t\ttitle: 'Stereoscopic',\n\t\t\t\t\t\thandler: handler( 'enableEffect', PANOLENS.Modes.STEREO )\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\n\t\t];\n\n\t};\n\n\t/**\n\t * Add buttons on top of control bar\n\t * @param {string} name - The control button name to be created\n\t */\n\tPANOLENS.Widget.prototype.addControlButton = function ( name ) {\n\n\t\tvar element;\n\n\t\tswitch( name ) {\n\n\t\t\tcase 'fullscreen':\n\n\t\t\t\telement = this.createFullscreenButton();\n\t\t\t\tthis.fullscreenElement = element; \n\n\t\t\t\tbreak;\n\n\t\t\tcase 'setting':\n\n\t\t\t\telement = this.createSettingButton();\n\t\t\t\tthis.settingElement = element;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'video':\n\n\t\t\t\telement = this.createVideoControl();\n\t\t\t\tthis.videoElement = element;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\treturn;\n\n\t\t}\n\n\t\tif ( !element ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.barElement.appendChild( element );\n\n\t};\n\n\tPANOLENS.Widget.prototype.createMask = function () {\n\n\t\tvar element = document.createElement( 'div' );\n\t\telement.style.position = 'absolute';\n\t\telement.style.top = 0;\n\t\telement.style.left = 0;\n\t\telement.style.width = '100%';\n\t\telement.style.height = '100%';\n\t\telement.style.background = 'transparent';\n\t\telement.style.display = 'none';\n\n\t\telement.show = function () {\n\n\t\t\tthis.style.display = 'block';\n\n\t\t};\n\n\t\telement.hide = function () {\n\n\t\t\tthis.style.display = 'none';\n\n\t\t};\n\n\t\treturn element;\n\n\t};\n\n\t/**\n\t * Create Setting button to toggle menu\n\t */\n\tPANOLENS.Widget.prototype.createSettingButton = function () {\n\n\t\tvar scope = this, item;\n\n\t\tfunction onTap ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tscope.mainMenu.toggle();\n\n\t\t\tif ( this.activated ) {\n\t\n\t\t\t\tthis.deactivate();\n\n\t\t\t} else {\n\n\t\t\t\tthis.activate();\n\n\t\t\t}\n\n\t\t}\n\n\t\titem = this.createCustomItem( { \n\n\t\t\tstyle : { \n\n\t\t\t\tbackgroundImage : 'url(\"' + PANOLENS.DataImage.Setting + '\")',\n\t\t\t\twebkitTransition : this.DEFAULT_TRANSITION,\n\t\t\t\ttransition : this.DEFAULT_TRANSITION\n\n\t\t\t},\n\n\t\t\tonTap: onTap\n\n\t\t} );\n\n\t\titem.activate = function () {\n\n\t\t\tthis.style.transform = 'rotate3d(0,0,1,90deg)';\n\t\t\tthis.activated = true;\n\t\t\tscope.mask.show();\n\n\t\t};\n\n\t\titem.deactivate = function () {\n\n\t\t\tthis.style.transform = 'rotate3d(0,0,0,0)';\n\t\t\tthis.activated = false;\n\t\t\tscope.mask.hide();\n\n\t\t\tif ( scope.mainMenu && scope.mainMenu.visible ) {\n\n\t\t\t\tscope.mainMenu.hide();\n\t\t\t\t\n\t\t\t}\n\n\t\t\tif ( scope.activeSubMenu && scope.activeSubMenu.visible ) {\n\n\t\t\t\tscope.activeSubMenu.hide();\n\n\t\t\t}\n\n\t\t\tif ( scope.mainMenu && scope.mainMenu._width ) {\n\n\t\t\t\tscope.mainMenu.changeSize( scope.mainMenu._width );\n\t\t\t\tscope.mainMenu.unslideAll();\n\n\t\t\t}\n\t\t\t\n\t\t};\n\n\t\titem.activated = false;\n\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Create Fullscreen button\n\t * @return {HTMLSpanElement} - The dom element icon for fullscreen\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n\tPANOLENS.Widget.prototype.createFullscreenButton = function () {\n\n\t\tvar scope = this, item, isFullscreen = false, tapSkipped = true, stylesheetId;\n\n\t\tstylesheetId = 'panolens-style-addon';\n\n\t\t// Don't create button if no support\n\t\tif ( !document.fullscreenEnabled       && \n\t\t\t !document.webkitFullscreenEnabled &&\n\t\t\t !document.mozFullScreenEnabled    &&\n\t\t\t !document.msFullscreenEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction onTap ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\ttapSkipped = false;\n\n\t\t\tif ( !isFullscreen ) {\n\t\t\t    scope.container.requestFullscreen && scope.container.requestFullscreen();\n\t\t\t    scope.container.msRequestFullscreen && scope.container.msRequestFullscreen();\n\t\t\t    scope.container.mozRequestFullScreen && scope.container.mozRequestFullScreen();\n\t\t\t    scope.container.webkitRequestFullscreen && scope.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n\t\t\t\tisFullscreen = true;\n\t\t\t} else {\n\t\t\t    document.exitFullscreen && document.exitFullscreen();\n\t\t\t    document.msExitFullscreen && document.msExitFullscreen();\n\t\t\t    document.mozCancelFullScreen && document.mozCancelFullScreen();\n\t\t\t    document.webkitExitFullscreen && document.webkitExitFullscreen();\n\t\t\t\tisFullscreen = false;\n\t\t\t}\n\n\t\t\tthis.style.backgroundImage = ( isFullscreen ) \n\t\t\t\t? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' \n\t\t\t\t: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n\n\t\t}\n\n\t\tfunction onFullScreenChange (e) {\n\n\t\t\tif ( tapSkipped ) {\n\n\t\t\t\tisFullscreen = !isFullscreen; \n\n\t\t\t\titem.style.backgroundImage = ( isFullscreen ) \n\t\t\t\t? 'url(\"' + PANOLENS.DataImage.FullscreenLeave + '\")' \n\t\t\t\t: 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")';\n\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'onWindowResize' function call on PANOLENS.Viewer\n\t\t\t */\n\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'onWindowResize', data: false } );\n\n\t\t\ttapSkipped = true;\n\n\t\t}\n\n\t\tdocument.addEventListener( 'fullscreenchange', onFullScreenChange, false );\n\t\tdocument.addEventListener( 'webkitfullscreenchange', onFullScreenChange, false );\n\t\tdocument.addEventListener( 'mozfullscreenchange', onFullScreenChange, false );\n\t\tdocument.addEventListener( 'MSFullscreenChange', onFullScreenChange, false );\n\n\t\titem = this.createCustomItem( { \n\n\t\t\tstyle : { \n\n\t\t\t\tbackgroundImage : 'url(\"' + PANOLENS.DataImage.FullscreenEnter + '\")' \n\n\t\t\t},\n\n\t\t\tonTap : onTap\n\n\t\t} );\n\n\t\t// Add fullscreen stlye if not exists\n\t\tif ( !document.querySelector( stylesheetId ) ) {\n\t\t\tvar sheet = document.createElement( 'style' );\n\t\t\tsheet.id = stylesheetId;\n\t\t\tsheet.innerHTML = ':-webkit-full-screen { width: 100% !important; height: 100% !important }';\n\t\t\tdocument.body.appendChild( sheet );\n\t\t}\n\t\t\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Create video control container\n\t * @return {HTMLSpanElement} - The dom element icon for video control\n\t */\n\tPANOLENS.Widget.prototype.createVideoControl = function () {\n\n\t\tvar item;\n\n\t\titem = document.createElement( 'span' );\n\t\titem.style.display = 'none';\n\t\titem.show = function () { \n\n\t\t\titem.style.display = '';\n\n\t\t};\n\n\t\titem.hide = function () { \n\n\t\t\titem.style.display = 'none';\n\t\t\titem.controlButton.paused = true;\n\t\t\titem.controlButton.update();\n\n\t\t};\n\n\t\titem.controlButton = this.createVideoControlButton();\n\t\titem.seekBar = this.createVideoControlSeekbar();\n\t\t\n\t\titem.appendChild( item.controlButton );\n\t\titem.appendChild( item.seekBar );\n\n\t\titem.dispose = function () {\n\n\t\t\titem.removeChild( item.controlButton );\n\t\t\titem.removeChild( item.seekBar );\n\n\t\t\titem.controlButton.dispose();\n\t\t\titem.controlButton = null;\n\n\t\t\titem.seekBar.dispose();\n\t\t\titem.seekBar = null;\n\n\t\t};\n\n\t\tthis.addEventListener( 'video-control-show', item.show );\n\t\tthis.addEventListener( 'video-control-hide', item.hide );\n\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Create video control button\n\t * @return {HTMLSpanElement} - The dom element icon for video control\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n\tPANOLENS.Widget.prototype.createVideoControlButton = function () {\n\n\t\tvar scope = this, item;\n\n\t\tfunction onTap ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\t/**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'toggleVideoPlay' function call on PANOLENS.Viewer\n\t\t\t */\n\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'toggleVideoPlay', data: !this.paused } );\n\n\t\t\tthis.paused = !this.paused;\n\n\t\t\titem.update();\n\n\t\t};\n\n\t\titem = this.createCustomItem( { \n\n\t\t\tstyle : { \n\n\t\t\t\tfloat : 'left',\n\t\t\t\tbackgroundImage : 'url(\"' + PANOLENS.DataImage.VideoPlay + '\")'\n\n\t\t\t},\n\n\t\t\tonTap : onTap\n\n\t\t} );\n\n\t\titem.paused = true;\n\n\t\titem.update = function ( paused ) {\n\n\t\t\tthis.paused = paused !== undefined ? paused : this.paused;\n\n\t\t\tthis.style.backgroundImage = 'url(\"' + ( this.paused \n\t\t\t\t? PANOLENS.DataImage.VideoPlay \n\t\t\t\t: PANOLENS.DataImage.VideoPause ) + '\")';\n\n\t\t};\n\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Create video seekbar\n\t * @return {HTMLSpanElement} - The dom element icon for video seekbar\n\t * @fires PANOLENS.Widget#panolens-viewer-handler\n\t */\n\tPANOLENS.Widget.prototype.createVideoControlSeekbar = function () {\n\n\t\tvar scope = this, item, progressElement, progressElementControl,\n\t\t\tisDragging = false, mouseX, percentageNow, percentageNext;\n\n\t\tprogressElement = document.createElement( 'div' );\n\t\tprogressElement.style.width = '0%';\n\t\tprogressElement.style.height = '100%';\n\t\tprogressElement.style.backgroundColor = '#fff';\n\n\t\tprogressElementControl = document.createElement( 'div' );\n\t\tprogressElementControl.style.float = 'right';\n\t\tprogressElementControl.style.width = '14px';\n\t\tprogressElementControl.style.height = '14px';\n\t\tprogressElementControl.style.transform = 'translate(7px, -5px)';\n\t\tprogressElementControl.style.borderRadius = '50%';\n\t\tprogressElementControl.style.backgroundColor = '#ddd';\n\n\t\tprogressElementControl.addEventListener( 'mousedown', onMouseDown, false );\n\t\tprogressElementControl.addEventListener( 'touchstart', onMouseDown, false );\n\n\t\tfunction onMouseDown ( event ) {\n\n\t\t\tevent.stopPropagation();\n\t\t\t\n\t\t\tisDragging = true;\n\t\t\t\n\t\t\tmouseX = event.clientX || ( event.changedTouches && event.changedTouches[0].clientX );\n\n\t\t\tpercentageNow = parseInt( progressElement.style.width ) / 100;\n\n\t\t\taddControlListeners();\n\t\t}\n\n\t\tfunction onVideoControlDrag ( event ) {\n\n\t\t\tvar clientX;\n\n\t\t\tif( isDragging ){\n\n\t\t\t\tclientX = event.clientX || ( event.changedTouches && event.changedTouches[0].clientX );\n\t\t\t\t\n\t\t\t\tpercentageNext = ( clientX - mouseX ) / item.clientWidth;\n\n\t\t\t\tpercentageNext = percentageNow + percentageNext;\n\n\t\t\t\tpercentageNext = percentageNext > 1 ? 1 : ( ( percentageNext < 0 ) ? 0 : percentageNext );\n\n\t\t\t\titem.setProgress ( percentageNext );\n\n\t\t\t\t/**\n\t\t\t\t * Viewer handler event\n\t\t\t\t * @type {object}\n\t\t\t\t * @property {string} method - 'setVideoCurrentTime' function call on PANOLENS.Viewer\n\t\t\t\t * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t\t\t\t */\n\t\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentageNext } );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onVideoControlStop ( event ) {\n\n\t\t\tevent.stopPropagation();\n\n\t\t\tisDragging = false;\n\n\t\t\tremoveControlListeners();\n\n\t\t}\n\n\t\tfunction addControlListeners () {\n\n\t\t\tscope.container.addEventListener( 'mousemove', onVideoControlDrag, false );\n\t\t\tscope.container.addEventListener( 'mouseup', onVideoControlStop, false );\n\t\t\tscope.container.addEventListener( 'touchmove', onVideoControlDrag, false );\n\t\t\tscope.container.addEventListener( 'touchend', onVideoControlStop, false );\n\n\n\t\t}\n\n\t\tfunction removeControlListeners () {\n\n\t\t\tscope.container.removeEventListener( 'mousemove', onVideoControlDrag, false );\n\t\t\tscope.container.removeEventListener( 'mouseup', onVideoControlStop, false );\n\t\t\tscope.container.removeEventListener( 'touchmove', onVideoControlDrag, false );\n\t\t\tscope.container.removeEventListener( 'touchend', onVideoControlStop, false );\n\n\t\t}\n\n\t\tfunction onTap ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar percentage;\n\n\t\t\tif ( event.target === progressElementControl ) { return; }\n\n\t\t\tpercentage = ( event.changedTouches && event.changedTouches.length > 0 )\n\t\t\t\t? ( event.changedTouches[0].pageX - event.target.getBoundingClientRect().left ) / this.clientWidth\n\t\t\t\t: event.offsetX / this.clientWidth;\n\n\t\t\t/**\n\t\t\t * Viewer handler event\n\t\t\t * @type {object}\n\t\t\t * @property {string} method - 'setVideoCurrentTime' function call on PANOLENS.Viewer\n\t\t\t * @property {number} data - Percentage of current video. Range from 0.0 to 1.0\n\t\t\t */\n\t\t\tscope.dispatchEvent( { type: 'panolens-viewer-handler', method: 'setVideoCurrentTime', data: percentage } );\n\n\t\t\titem.setProgress( event.offsetX / this.clientWidth );\n\n\t\t};\n\n\t\tfunction onDispose () {\n\n\t\t\tremoveControlListeners();\n\t\t\tprogressElement = null;\n\t\t\tprogressElementControl = null;\n\n\t\t}\n\n\t\tprogressElement.appendChild( progressElementControl );\n\n\t\titem = this.createCustomItem( {\n\n\t\t\tstyle : { \n\n\t\t\t\tfloat : 'left',\n\t\t\t\twidth : '30%',\n\t\t\t\theight : '4px',\n\t\t\t\tmarginTop : '20px',\n\t\t\t\tbackgroundColor : 'rgba(188,188,188,0.8)'\n\n\t\t\t},\n\n\t\t\tonTap : onTap,\n\t\t\tonDispose: onDispose\n\n\t\t} );\n\n\t\titem.appendChild( progressElement );\n\n\t\titem.setProgress = function( percentage ) {\n\n\t\t\tprogressElement.style.width = percentage * 100 + '%';\n\n\t\t};\t\t\n\n\t\tthis.addEventListener( 'video-update', function ( event ) { \n\n\t\t\titem.setProgress( event.percentage ); \n\n\t\t} );\n\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Create menu item\n\t * @param  {string} title - Title to display\n\t * @return {HTMLDomElement} - An anchor tag element\n\t */\n\tPANOLENS.Widget.prototype.createMenuItem = function ( title ) {\n\n\t\tvar scope = this, item = document.createElement( 'a' );\n\t\titem.textContent = title;\n\t\titem.style.display = 'block';\n\t\titem.style.padding = '10px';\n\t\titem.style.textDecoration = 'none';\n\t\titem.style.cursor = 'pointer';\n\t\titem.style.pointerEvents = 'auto';\n\t\titem.style.transition = this.DEFAULT_TRANSITION;\n\n\t\titem.slide = function ( right ) {\n\n\t\t\tthis.style.transform = 'translateX(' + ( right ? '' : '-' ) + '100%)';\n\n\t\t};\n\n\t\titem.unslide = function () {\n\n\t\t\tthis.style.transform = 'translateX(0)';\n\n\t\t};\n\n\t\titem.setIcon = function ( url ) {\n\n\t\t\tif ( this.icon ) {\n\n\t\t\t\tthis.icon.style.backgroundImage = 'url(' + url + ')';\n\n\t\t\t}\n\n\t\t};\n\n\t\titem.setSelectionTitle = function ( title ) {\n\n\t\t\tif ( this.selection ) {\n\n\t\t\t\tthis.selection.textContent = title;\n\n\t\t\t}\n\n\t\t};\n\n\t\titem.addSelection = function ( name ) {\n\t\t\t\n\t\t\tvar selection = document.createElement( 'span' );\n\t\t\tselection.style.fontSize = '13px';\n\t\t\tselection.style.fontWeight = '300';\n\t\t\tselection.style.float = 'right';\n\n\t\t\tthis.selection = selection;\n\t\t\tthis.setSelectionTitle( name );\n\t\t\tthis.appendChild( selection );\n\t\t\t\n\t\t\treturn this;\n\n\t\t};\n\n\t\titem.addIcon = function ( url, left, flip ) {\n\n\t\t\turl = url || PANOLENS.DataImage.ChevronRight;\n\t\t\tleft = left || false;\n\t\t\tflip = flip || false;\n\t\t\t\n\t\t\tvar element = document.createElement( 'span' );\n\t\t\telement.style.float = left ? 'left' : 'right';\n\t\t\telement.style.width = '17px';\n\t\t\telement.style.height = '17px';\n\t\t\telement.style[ 'margin' + ( left ? 'Right' : 'Left' ) ] = '12px';\n\t\t\telement.style.backgroundSize = 'cover';\n\n\t\t\tif ( flip ) {\n\n\t\t\t\telement.style.transform = 'rotateZ(180deg)';\n\n\t\t\t}\n\n\t\t\tthis.icon = element;\n\t\t\tthis.setIcon( url );\n\t\t\tthis.appendChild( element );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\titem.addSubMenu = function ( title, items ) {\n\n\t\t\tthis.subMenu = scope.createSubMenu( title, items );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\titem.addEventListener( 'mouseenter', function () {\n\t\t\t\n\t\t\tthis.style.backgroundColor = '#e0e0e0';\n\n\t\t}, false );\n\n\t\titem.addEventListener( 'mouseleave', function () {\n\t\t\t\n\t\t\tthis.style.backgroundColor = '#fafafa';\n\n\t\t}, false );\n\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Create menu item header\n\t * @param  {string} title - Title to display\n\t * @return {HTMLDomElement} - An anchor tag element\n\t */\n\tPANOLENS.Widget.prototype.createMenuItemHeader = function ( title ) {\n\n\t\tvar header = this.createMenuItem( title );\n\n\t\theader.style.borderBottom = '1px solid #333';\n\t\theader.style.paddingBottom = '15px';\n\n\t\treturn header;\n\n\t};\n\n\t/**\n\t * Create main menu\n\t * @param  {array} menus - Menu array list\n\t * @return {HTMLDomElement} - A span element\n\t */\n\tPANOLENS.Widget.prototype.createMainMenu = function ( menus ) {\n\t\t\n\t\tvar scope = this, menu = this.createMenu(), subMenu;\n\n\t\tmenu._width = 200;\n\t\tmenu.changeSize( menu._width );\n\n\t\tfunction onTap ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar mainMenu = scope.mainMenu, subMenu = this.subMenu;\n\n\t\t\tfunction onNextTick () {\n\n\t\t\t\tmainMenu.changeSize( subMenu.clientWidth );\n\t\t\t\tsubMenu.show();\n\t\t\t\tsubMenu.unslideAll();\n\n\t\t\t}\n\n\t\t\tmainMenu.hide();\n\t\t\tmainMenu.slideAll();\n\t\t\tmainMenu.parentElement.appendChild( subMenu );\n\n\t\t\tscope.activeMainItem = this;\n\t\t\tscope.activeSubMenu = subMenu;\n\n\t\t\twindow.requestAnimationFrame( onNextTick );\n\n\t\t};\n\n\t\tfor ( var i = 0; i < menus.length; i++ ) {\n\n\t\t\tvar item = menu.addItem( menus[ i ].title );\n\n\t\t\titem.style.paddingLeft = '20px';\n\n\t\t\titem.addIcon()\n\t\t\t\t.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false );\n\n\t\t\tif ( menus[ i ].subMenu && menus[ i ].subMenu.length > 0 ) {\n\n\t\t\t\tvar title = menus[ i ].subMenu[ 0 ].title;\n\n\t\t\t\titem.addSelection( title )\n\t\t\t\t\t.addSubMenu( menus[ i ].title, menus[ i ].subMenu );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn menu;\n\n\t};\n\n\t/**\n\t * Create sub menu\n\t * @param {string} title - Sub menu title\n\t * @param {array} items - Item array list\n\t * @return {HTMLDomElement} - A span element\n\t */\n\tPANOLENS.Widget.prototype.createSubMenu = function ( title, items ) {\n\n\t\tvar scope = this, menu, subMenu = this.createMenu();\n\n\t\tsubMenu.items = items;\n\t\tsubMenu.activeItem;\n\n\t\tfunction onTap ( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tmenu = scope.mainMenu;\n\t\t\tmenu.changeSize( menu._width );\n\t\t\tmenu.unslideAll();\n\t\t\tmenu.show();\n\t\t\tsubMenu.slideAll( true );\n\t\t\tsubMenu.hide();\n\n\t\t\tif ( this.type !== 'header' ) {\n\n\t\t\t\tsubMenu.setActiveItem( this );\n\t\t\t\tscope.activeMainItem.setSelectionTitle( this.textContent );\n\n\t\t\t\tthis.handler && this.handler();\n\n\t\t\t}\n\n\t\t}\n\n\t\tsubMenu.addHeader( title ).addIcon( undefined, true, true ).addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false );\n\n\t\tfor ( var i = 0; i < items.length; i++ ) {\n\n\t\t\tvar item = subMenu.addItem( items[ i ].title );\n\n\t\t\titem.style.fontWeight = 300;\n\t\t\titem.handler = items[ i ].handler;\n\t\t\titem.addIcon( ' ', true );\n\t\t\titem.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', onTap, false );\n\n\t\t\tif ( !subMenu.activeItem ) {\n\n\t\t\t\tsubMenu.setActiveItem( item );\n\n\t\t\t}\n\n\t\t}\n\n\t\tsubMenu.slideAll( true );\n\n\t\treturn subMenu;\n\t\t\n\t};\n\n\t/**\n\t * Create general menu\n\t * @return {HTMLDomElement} - A span element\n\t */\n\tPANOLENS.Widget.prototype.createMenu = function () {\n\n\t\tvar scope = this, menu = document.createElement( 'span' ), style;\n\n\t\tstyle = menu.style;\n\n\t\tstyle.padding = '5px 0';\n\t\tstyle.position = 'fixed';\n\t\tstyle.bottom = '100%';\n\t\tstyle.right = '14px';\n\t\tstyle.backgroundColor = '#fafafa';\n\t\tstyle.fontFamily = 'Helvetica Neue';\n\t\tstyle.fontSize = '14px';\n\t\tstyle.visibility = 'hidden';\n\t\tstyle.opacity = 0;\n\t\tstyle.boxShadow = '0 0 12pt rgba(0,0,0,0.25)';\n  \t\tstyle.borderRadius = '2px';\n\t\tstyle.overflow = 'hidden';\n\t\tstyle.willChange = 'width, height, opacity';\n\t\tstyle.pointerEvents = 'auto';\n\t\tstyle.transition = this.DEFAULT_TRANSITION;\n\n\t\tmenu.visible = false;\n\n\t\tmenu.changeSize = function ( width, height ) {\n\n\t\t\tif ( width ) {\n\n\t\t\t\tthis.style.width = width + 'px';\n\n\t\t\t}\n\n\t\t\tif ( height ) {\n\n\t\t\t\tthis.style.height = height + 'px';\n\n\t\t\t}\n\n\t\t};\n\n\t\tmenu.show = function () {\n\n\t\t\tthis.style.opacity = 1;\n\t\t\tthis.style.visibility = 'visible';\n\t\t\tthis.visible = true;\n\n\t\t};\n\n\t\tmenu.hide = function () {\n\n\t\t\tthis.style.opacity = 0;\n\t\t\tthis.style.visibility = 'hidden';\n\t\t\tthis.visible = false;\n\n\t\t};\n\n\t\tmenu.toggle = function () {\n\n\t\t\tif ( this.visible ) {\n\n\t\t\t\tthis.hide();\n\n\t\t\t} else {\n\n\t\t\t\tthis.show();\n\n\t\t\t}\n\n\t\t};\n\n\t\tmenu.slideAll = function ( right ) {\n\n\t\t\tfor ( var i = 0; i < menu.children.length; i++ ){\n\n\t\t\t\tif ( menu.children[ i ].slide ) {\n\n\t\t\t\t\tmenu.children[ i ].slide( right );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tmenu.unslideAll = function () {\n\n\t\t\tfor ( var i = 0; i < menu.children.length; i++ ){\n\n\t\t\t\tif ( menu.children[ i ].unslide ) {\n\n\t\t\t\t\tmenu.children[ i ].unslide();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tmenu.addHeader = function ( title ) {\n\n\t\t\tvar header = scope.createMenuItemHeader( title );\n\t\t\theader.type = 'header';\n\n\t\t\tthis.appendChild( header );\n\n\t\t\treturn header;\n\n\t\t};\n\n\t\tmenu.addItem = function ( title ) {\n\n\t\t\tvar item = scope.createMenuItem( title );\n\t\t\titem.type = 'item';\n\n\t\t\tthis.appendChild( item );\n\n\t\t\treturn item;\n\n\t\t};\n\n\t\tmenu.setActiveItem = function ( item ) {\n\n\t\t\tif ( this.activeItem ) {\n\n\t\t\t\tthis.activeItem.setIcon( ' ' );\n\n\t\t\t}\n\n\t\t\titem.setIcon( PANOLENS.DataImage.Check );\n\n\t\t\tthis.activeItem = item;\n\n\t\t};\n\n\t\tmenu.addEventListener( 'mousemove', this.PREVENT_EVENT_HANDLER, true );\n\t\tmenu.addEventListener( 'mouseup', this.PREVENT_EVENT_HANDLER, true );\n\t\tmenu.addEventListener( 'mousedown', this.PREVENT_EVENT_HANDLER, true );\n\n\t\treturn menu;\n\n\t};\n\n\t/**\n\t * Create custom item element\n\t * @return {HTMLSpanElement} - The dom element icon\n\t */\n\tPANOLENS.Widget.prototype.createCustomItem = function ( options ) {\n\n\t\toptions = options || {};\n\n\t\tvar scope = this,\n\t\t\titem = options.element || document.createElement( 'span' );\n\n\t\titem.style.cursor = 'pointer';\n\t\titem.style.float = 'right';\n\t\titem.style.width = '44px';\n\t\titem.style.height = '100%';\n\t\titem.style.backgroundSize = '60%';\n\t\titem.style.backgroundRepeat = 'no-repeat';\n\t\titem.style.backgroundPosition = 'center';\n\t\titem.style.webkitUserSelect = \n\t\titem.style.MozUserSelect = \n\t\titem.style.userSelect = 'none';\n\t\titem.style.position = 'relative';\n\t\titem.style.pointerEvents = 'auto';\n\n\t\t// White glow on icon\n\t\titem.addEventListener( scope.TOUCH_ENABLED ? 'touchstart' : 'mouseenter', function() {\n\t\t\titem.style.filter = \n\t\t\titem.style.webkitFilter = 'drop-shadow(0 0 5px rgba(255,255,255,1))';\n\t\t});\n\t\titem.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'mouseleave', function() {\n\t\t\titem.style.filter = \n\t\t\titem.style.webkitFilter = '';\n\t\t});\n\n\t\titem = this.mergeStyleOptions( item, options.style );\n\n\t\tif ( options.onTap ) {\n\n\t\t\titem.addEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false );\n\n\t\t}\n\n\t\titem.dispose = function () {\n\n\t\t\titem.removeEventListener( scope.TOUCH_ENABLED ? 'touchend' : 'click', options.onTap, false );\n\n\t\t\toptions.onDispose && options.onDispose();\n\n\t\t};\n\t\t\n\t\treturn item;\n\n\t};\n\n\t/**\n\t * Merge item css style\n\t * @param  {HTMLDOMElement} element - The element to be merged with style\n\t * @param  {object} options - The style options\n\t * @return {HTMLDOMElement} - The same element with merged styles\n\t */\n\tPANOLENS.Widget.prototype.mergeStyleOptions = function ( element, options ) {\n\n\t\toptions = options || {};\n\n\t\tfor ( var property in options ){\n\n\t\t\tif ( options.hasOwnProperty( property ) ) {\n\n\t\t\t\telement.style[ property ] = options[ property ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn element;\n\n\t};\n\n\t/**\n\t * Dispose widgets by detaching dom elements from container\n\t */\n\tPANOLENS.Widget.prototype.dispose = function () {\n\n\t\tif ( this.barElement ) {\n\t\t\tthis.container.removeChild( this.barElement );\n\t\t\tthis.barElement.dispose();\n\t\t\tthis.barElement = null;\n\n\t\t}\n\n\t};\n\n})();;( function () {\n\n\t/**\n\t * Information spot attached to panorama\n\t * @constructor\n\t * @param {number} [scale=300] - Infospot scale\n\t * @param {imageSrc} [imageSrc=PANOLENS.DataImage.Info] - Image overlay info\n\t * @param {boolean} [animated=true] - Enable default hover animation\n\t */\n\tPANOLENS.Infospot = function ( scale, imageSrc, animated ) {\n\t\t\n\t\tvar scope = this, ratio, startScale, endScale, duration;\n\n\t\tscale = scale || 300;\n\t\timageSrc = imageSrc || PANOLENS.DataImage.Info;\n\t\tduration = 500;\n\n\t\tTHREE.Sprite.call( this );\n\n\t\tthis.type = 'infospot';\n\n\t\tthis.animated = animated !== undefined ? animated : true;\n\t\tthis.isHovering = false;\n\t\tthis.visible = false;\n\n\t\tthis.element;\n\t\tthis.toPanorama;\n\t\tthis.cursorStyle;\n\n\t\tthis.mode = PANOLENS.Modes.UNKNOWN;\n\n\t\tthis.scale.set( scale, scale, 1 );\n\t\tthis.rotation.y = Math.PI;\n\t\tthis.scaleFactor = 1.3;\n\n\t\tthis.container;\n\n\t\t// Event Handler\n\t\tthis.HANDLER_FOCUS;\n\n\t\tPANOLENS.Utils.TextureLoader.load( imageSrc, postLoad );\t\t\n\n\t\tfunction postLoad ( texture ) {\n\n\t\t\ttexture.wrapS = THREE.RepeatWrapping;\n\t\t\ttexture.repeat.x = - 1;\n\n\t\t\ttexture.image.width = texture.image.naturalWidth || 64;\n\t\t\ttexture.image.height = texture.image.naturalHeight || 64;\n\n\t\t\tratio = texture.image.width / texture.image.height;\n\t\t\tscope.scale.set( ratio * scale, scale, 1 );\n\n\t\t\tstartScale = scope.scale.clone();\n\n\t\t\tscope.scaleUpAnimation = new TWEEN.Tween( scope.scale )\n\t\t\t\t.to( { x: startScale.x * scope.scaleFactor, y: startScale.y * scope.scaleFactor }, duration )\n\t\t\t\t.easing( TWEEN.Easing.Elastic.Out );\n\n\t\t\tscope.scaleDownAnimation = new TWEEN.Tween( scope.scale )\n\t\t\t\t.to( { x: startScale.x, y: startScale.y }, duration )\n\t\t\t\t.easing( TWEEN.Easing.Elastic.Out );\n\n\t\t\tscope.material.side = THREE.DoubleSide;\n\t\t\tscope.material.map = texture;\n\t\t\tscope.material.depthTest = false;\n\t\t\tscope.material.needsUpdate = true;\n\n\t\t}\n\n\t\tfunction show () {\n\n\t\t\tthis.visible = true;\n\n\t\t}\n\n\t\tfunction hide () {\n\n\t\t\tthis.visible = false;\n\n\t\t}\n\n\t\t// Add show and hide animations\n\t\tthis.showAnimation = new TWEEN.Tween( this.material )\n\t\t\t.to( { opacity: 1 }, duration )\n\t\t\t.onStart( show.bind( this ) )\n\t\t\t.easing( TWEEN.Easing.Quartic.Out );\n\n\t\tthis.hideAnimation = new TWEEN.Tween( this.material )\n\t\t\t.to( { opacity: 0 }, duration )\n\t\t\t.onComplete( hide.bind( this ) )\n\t\t\t.easing( TWEEN.Easing.Quartic.Out );\n\n\t\t// Attach event listeners\n\t\tthis.addEventListener( 'click', this.onClick );\n\t\tthis.addEventListener( 'hover', this.onHover );\n\t\tthis.addEventListener( 'hoverenter', this.onHoverStart );\n\t\tthis.addEventListener( 'hoverleave', this.onHoverEnd );\n\t\tthis.addEventListener( 'panolens-dual-eye-effect', this.onDualEyeEffect );\n\t\tthis.addEventListener( 'panolens-container', this.setContainer.bind( this ) );\n\t\tthis.addEventListener( 'dismiss', this.onDismiss );\n\t\tthis.addEventListener( 'panolens-infospot-focus', this.setFocusMethod );\n\n\t};\n\n\tPANOLENS.Infospot.prototype = Object.create( THREE.Sprite.prototype );\n\n\t/**\n\t * Set infospot container\n\t * @param {HTMLElement|object} data - Data with container information\n\t */\n\tPANOLENS.Infospot.prototype.setContainer = function ( data ) {\n\n\t\tvar container;\n\n\t\tif ( data instanceof HTMLElement ) {\n\n\t\t\tcontainer = data;\n\n\t\t} else if ( data && data.container ) {\n\n\t\t\tcontainer = data.container;\n\n\t\t}\n\n\t\t// Append element if exists\n\t\tif ( container && this.element ) {\n\n\t\t\tcontainer.appendChild( this.element );\n\n\t\t}\n\n\t\tthis.container = container;\n\n\t};\n\n\t/**\n\t * Get container\n\t * @return {HTMLElement} - The container of this infospot\n\t */\n\tPANOLENS.Infospot.prototype.getContainer = function () {\n\n\t\treturn this.container;\n\n\t};\n\n\t/**\n\t * This will be called by a click event\n\t * Translate and lock the hovering element if any\n\t * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t */\n\tPANOLENS.Infospot.prototype.onClick = function ( event ) {\n\n\t\tif ( this.element && this.getContainer() ) {\n\n\t\t\tthis.onHoverStart( event );\n\n\t\t\t// Lock element\n\t\t\tthis.lockHoverElement();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Dismiss current element if any\n\t * @param  {object} event - Dismiss event\n\t */\n\tPANOLENS.Infospot.prototype.onDismiss = function ( event ) {\n\n\t\tif ( this.element ) {\n\n\t\t\tthis.unlockHoverElement();\n\t\t\tthis.onHoverEnd();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * This will be called by a mouse hover event\n\t * Translate the hovering element if any\n\t * @param  {object} event - Event containing mouseEvent with clientX and clientY\n\t */\n\tPANOLENS.Infospot.prototype.onHover = function ( event ) {\n\n\t};\n\n\t/**\n\t * This will be called on a mouse hover start\n\t * Sets cursor style to 'pointer', display the element and scale up the infospot\n\t */\n\tPANOLENS.Infospot.prototype.onHoverStart = function ( event ) {\n\n\t\tif ( !this.getContainer() ) { return; }\n\n\t\tvar cursorStyle = this.cursorStyle || ( this.mode === PANOLENS.Modes.NORMAL ? 'pointer' : 'default' );\n\n\t\tthis.isHovering = true;\n\t\tthis.container.style.cursor = cursorStyle;\n\t\t\n\t\tif ( this.animated ) {\n\n\t\t\tthis.scaleDownAnimation && this.scaleDownAnimation.stop();\n\t\t\tthis.scaleUpAnimation && this.scaleUpAnimation.start();\n\n\t\t}\n\t\t\n\t\tif ( this.element && event.mouseEvent.clientX >= 0 && event.mouseEvent.clientY >= 0 ) {\n\n\t\t\tif ( this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO ) {\n\n\t\t\t\tthis.element.style.display = 'none';\n\t\t\t\tthis.element.left && ( this.element.left.style.display = 'block' );\n\t\t\t\tthis.element.right && ( this.element.right.style.display = 'block' );\n\n\t\t\t\t// Store element width for reference\n\t\t\t\tthis.element._width = this.element.left.clientWidth;\n\t\t\t\tthis.element._height = this.element.left.clientHeight;\n\n\t\t\t} else {\n\n\t\t\t\tthis.element.style.display = 'block';\n\t\t\t\tthis.element.left && ( this.element.left.style.display = 'none' );\n\t\t\t\tthis.element.right && ( this.element.right.style.display = 'none' );\n\n\t\t\t\t// Store element width for reference\n\t\t\t\tthis.element._width = this.element.clientWidth;\n\t\t\t\tthis.element._height = this.element.clientHeight;\n\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t};\n\n\t/**\n\t * This will be called on a mouse hover end\n\t * Sets cursor style to 'default', hide the element and scale down the infospot\n\t */\n\tPANOLENS.Infospot.prototype.onHoverEnd = function () {\n\n\t\tif ( !this.getContainer() ) { return; }\n\n\t\tthis.isHovering = false;\n\t\tthis.container.style.cursor = 'default';\n\n\t\tif ( this.animated ) {\n\n\t\t\tthis.scaleUpAnimation && this.scaleUpAnimation.stop();\n\t\t\tthis.scaleDownAnimation && this.scaleDownAnimation.start();\n\n\t\t}\n\n\t\tif ( this.element && !this.element.locked ) {\n\n\t\t\tthis.element.style.display = 'none';\n\t\t\tthis.element.left && ( this.element.left.style.display = 'none' );\n\t\t\tthis.element.right && ( this.element.right.style.display = 'none' );\n\n\t\t\tthis.unlockHoverElement();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * On dual eye effect handler\n\t * Creates duplicate left and right element\n\t * @param  {object} event - panolens-dual-eye-effect event\n\t */\n\tPANOLENS.Infospot.prototype.onDualEyeEffect = function ( event ) {\n\t\t\n\t\tif ( !this.getContainer() ) { return; }\n\n\t\tvar element, halfWidth, halfHeight;\n\n\t\tthis.mode = event.mode;\n\n\t\telement = this.element;\n\n\t\thalfWidth = this.container.clientWidth / 2;\n\t\thalfHeight = this.container.clientHeight / 2;\n\n\t\tif ( !element ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( !element.left || !element.right ) {\n\n\t\t\telement.left = element.cloneNode( true );\n\t\t\telement.right = element.cloneNode( true );\n\n\t\t}\n\n\t\tif ( this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO ) {\n\n\t\t\telement.left.style.display = element.style.display;\n\t\t\telement.right.style.display = element.style.display;\n\t\t\telement.style.display = 'none';\n\n\t\t} else {\n\n\t\t\telement.style.display = element.left.style.display;\n\t\t\telement.left.style.display = 'none';\n\t\t\telement.right.style.display = 'none';\n\n\t\t}\n\n\t\t// Update elements translation\n\t\tthis.translateElement( halfWidth, halfHeight );\n\n\t\tthis.container.appendChild( element.left );\n\t\tthis.container.appendChild( element.right );\n\n\t};\n\n\t/**\n\t * Translate the hovering element by css transform\n\t * @param  {number} x - X position on the window screen\n\t * @param  {number} y - Y position on the window screen\n\t */\n\tPANOLENS.Infospot.prototype.translateElement = function ( x, y ) {\n\n\t\tif ( !this.element._width || !this.element._height || !this.getContainer() ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar left, top, element, width, height, delta, container;\n\n\t\tcontainer = this.container;\n\t\telement = this.element;\n\t\twidth = element._width / 2;\n\t\theight = element._height / 2;\n\t\tdelta = element.verticalDelta !== undefined ? element.verticalDelta : 40;\n\n\t\tleft = x - width;\n\t\ttop = y - height - delta;\n\n\t\tif ( ( this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO ) \n\t\t\t\t&& element.left && element.right\n\t\t\t\t&& !( x === container.clientWidth / 2 && y === container.clientHeight / 2 ) ) {\n\n\t\t\tleft = container.clientWidth / 4 - width + ( x - container.clientWidth / 2 );\n\t\t\ttop = container.clientHeight / 2 - height - delta + ( y - container.clientHeight / 2 );\n\n\t\t\tthis.setElementStyle( 'transform', element.left, 'translate(' + left + 'px, ' + top + 'px)' );\n\n\t\t\tleft += container.clientWidth / 2;\n\n\t\t\tthis.setElementStyle( 'transform', element.right, 'translate(' + left + 'px, ' + top + 'px)' );\n\n\t\t} else {\n\n\t\t\tthis.setElementStyle( 'transform', element, 'translate(' + left + 'px, ' + top + 'px)' );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set vendor specific css\n\t * @param {string} type - CSS style name\n\t * @param {HTMLElement} element - The element to be modified\n\t * @param {string} value - Style value\n\t */\n\tPANOLENS.Infospot.prototype.setElementStyle = function ( type, element, value ) {\n\n\t\tvar style = element.style;\n\n\t\tif ( type === 'transform' ) {\n\n\t\t\tstyle.webkitTransform = style.msTransform = style.transform = value;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set hovering text content\n\t * @param {string} text - Text to be displayed\n\t */\n\tPANOLENS.Infospot.prototype.setText = function ( text ) {\n\n\t\tif ( this.element ) {\n\n\t\t\tthis.element.textContent = text;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set cursor css style on hover\n\t */\n\tPANOLENS.Infospot.prototype.setCursorHoverStyle = function ( style ) {\n\n\t\tthis.cursorStyle = style;\n\n\t};\n\n\t/**\n\t * Add hovering text element\n\t * @param {string} text - Text to be displayed\n\t * @param {number} [delta=40] - Vertical delta to the infospot\n\t */\n\tPANOLENS.Infospot.prototype.addHoverText = function ( text, delta ) {\n\n\t\tif ( !this.element ) {\n\n\t\t\tthis.element = document.createElement( 'div' );\n\t\t\tthis.element.style.display = 'none';\n\t\t\tthis.element.style.color = '#fff';\n\t\t\tthis.element.style.top = 0;\n\t\t\tthis.element.style.maxWidth = '50%';\n\t\t\tthis.element.style.maxHeight = '50%';\n\t\t\tthis.element.style.textShadow = '0 0 3px #000000';\n\t\t\tthis.element.style.fontFamily = '\"Trebuchet MS\", Helvetica, sans-serif';\n\t\t\tthis.element.style.position = 'absolute';\n\t\t\tthis.element.classList.add( 'panolens-infospot' );\n\t\t\tthis.element.verticalDelta = delta !== undefined ? delta : 40;\n\n\t\t}\n\n\t\tthis.setText( text );\n\n\t};\n\n\t/**\n\t * Add hovering element by cloning an element\n\t * @param {HTMLDOMElement} el - Element to be cloned and displayed\n\t * @param {number} [delta=40] - Vertical delta to the infospot\n\t */\n\tPANOLENS.Infospot.prototype.addHoverElement = function ( el, delta ) {\n\n\t\tif ( !this.element ) { \n\n\t\t\tthis.element = el.cloneNode( true );\n\t\t\tthis.element.style.display = 'none';\n\t\t\tthis.element.style.top = 0;\n\t\t\tthis.element.style.position = 'absolute';\n\t\t\tthis.element.classList.add( 'panolens-infospot' );\n\t\t\tthis.element.verticalDelta = delta !== undefined ? delta : 40;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Remove hovering element\n\t */\n\tPANOLENS.Infospot.prototype.removeHoverElement = function () {\n\n\t\tif ( this.element ) { \n\n\t\t\tif ( this.element.left ) {\n\n\t\t\t\tthis.container.removeChild( this.element.left );\n\t\t\t\tthis.element.left = null;\n\n\t\t\t}\n\n\t\t\tif ( this.element.right ) {\n\n\t\t\t\tthis.container.removeChild( this.element.right );\n\t\t\t\tthis.element.right = null;\n\n\t\t\t}\n\n\t\t\tthis.container.removeChild( this.element );\n\t\t\tthis.element = null;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Lock hovering element\n\t */\n\tPANOLENS.Infospot.prototype.lockHoverElement = function () {\n\n\t\tif ( this.element ) { \n\n\t\t\tthis.element.locked = true;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Unlock hovering element\n\t */\n\tPANOLENS.Infospot.prototype.unlockHoverElement = function () {\n\n\t\tif ( this.element ) { \n\n\t\t\tthis.element.locked = false;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Show infospot\n\t * @param  {number} [delay=0] - Delay time to show\n\t */\n\tPANOLENS.Infospot.prototype.show = function ( delay ) {\n\n\t\tdelay = delay || 0;\n\n\t\tif ( this.animated ) {\n\n\t\t\tthis.hideAnimation && this.hideAnimation.stop();\n\t\t\tthis.showAnimation && this.showAnimation.delay( delay ).start();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Hide infospot\n\t * @param  {number} [delay=0] - Delay time to hide\n\t */\n\tPANOLENS.Infospot.prototype.hide = function ( delay ) {\n\n\t\tdelay = delay || 0;\n\n\t\tif ( this.animated ) {\n\n\t\t\tthis.showAnimation && this.showAnimation.stop();\n\t\t\tthis.hideAnimation && this.hideAnimation.delay( delay ).start();\n\n\t\t}\n\t\t\n\t\t\n\t};\n\n\t/**\n\t * Set focus event handler\n\t */\n\tPANOLENS.Infospot.prototype.setFocusMethod = function ( event ) {\n\n\t\tif ( event ) {\n\n\t\t\tthis.HANDLER_FOCUS = event.method;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Focus camera center to this infospot\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n\tPANOLENS.Infospot.prototype.focus = function ( duration, easing ) {\n\n\t\tif ( this.HANDLER_FOCUS ) {\n\n\t\t\tthis.HANDLER_FOCUS( this.position, duration, easing );\n\t\t\tthis.onDismiss();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Dispose infospot\n\t */\n\tPANOLENS.Infospot.prototype.dispose = function () {\n\n\t\tthis.removeHoverElement();\n\t\tthis.material.dispose();\n\n\t\tif ( this.parent ) {\n\n\t\t\tthis.parent.remove( this );\n\n\t\t}\n\n\t};\n\n} )();;( function () {\n\n\t'use strict';\n\n\t/**\n\t * Viewer contains pre-defined scene, camera and renderer\n\t * @constructor\n\t * @param {object} [options] - Use custom or default config options\n\t * @param {HTMLElement} [options.container] - A HTMLElement to host the canvas\n\t * @param {THREE.Scene} [options.scene=THREE.Scene] - A THREE.Scene which contains panorama and 3D objects\n\t * @param {THREE.Camera} [options.camera=THREE.PerspectiveCamera] - A THREE.Camera to view the scene\n\t * @param {THREE.WebGLRenderer} [options.renderer=THREE.WebGLRenderer] - A THREE.WebGLRenderer to render canvas\n\t * @param {boolean} [options.controlBar=true] - Show/hide control bar on the bottom of the container\n\t * @param {array}   [options.controlButtons=[]] - Button names to mount on controlBar if controlBar exists, Defaults to ['fullscreen', 'setting', 'video']\n\t * @param {boolean} [options.autoHideControlBar=false] - Auto hide control bar when click on non-active area\n\t * @param {boolean} [options.autoHideInfospot=true] - Auto hide infospots when click on non-active area\n\t * @param {boolean} [options.horizontalView=false] - Allow only horizontal camera control\n\t * @param {number}  [options.clickTolerance=10] - Distance tolerance to tigger click / tap event\n\t * @param {number}  [options.cameraFov=60] - Camera field of view value\n\t * @param {boolean} [options.reverseDragging=false] - Reverse dragging direction\n\t * @param {boolean} [options.enableReticle=false] - Enable reticle for mouseless interaction other than VR mode\n\t * @param {number}  [options.dwellTime=1500] - Dwell time for reticle selection\n\t * @param {boolean} [options.autoReticleSelect=true] - Auto select a clickable target after dwellTime\n\t * @param {boolean} [options.viewIndicator=false] - Adds an angle view indicator in upper left corner\n\t * @param {number}  [options.indicatorSize=30] - Size of View Indicator\n\t * @param {string}  [options.output='none'] - Whether and where to output raycast position. Could be 'console' or 'overlay'\n\t */\n\tPANOLENS.Viewer = function ( options ) {\n\n\t\tTHREE.EventDispatcher.call( this );\n\n\t\tif ( !THREE ) {\n\n\t\t\tconsole.error('Three.JS not found');\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar container;\n\n\t\toptions = options || {};\n\t\toptions.controlBar = options.controlBar !== undefined ? options.controlBar : true;\n\t\toptions.controlButtons = options.controlButtons || [ 'fullscreen', 'setting', 'video' ];\n\t\toptions.autoHideControlBar = options.autoHideControlBar !== undefined ? options.autoHideControlBar : false;\n\t\toptions.autoHideInfospot = options.autoHideInfospot !== undefined ? options.autoHideInfospot : true;\n\t\toptions.horizontalView = options.horizontalView !== undefined ? options.horizontalView : false;\n\t\toptions.clickTolerance = options.clickTolerance || 10;\n\t\toptions.cameraFov = options.cameraFov || 60;\n\t\toptions.reverseDragging = options.reverseDragging || false;\n\t\toptions.enableReticle = options.enableReticle || false;\n\t\toptions.dwellTime = options.dwellTime || 1500;\n\t\toptions.autoReticleSelect = options.autoReticleSelect !== undefined ? options.autoReticleSelect : true;\n\t\toptions.viewIndicator = options.viewIndicator !== undefined ? options.viewIndicator : false;\n\t\toptions.indicatorSize = options.indicatorSize || 30;\n\t\toptions.output = options.output ? options.output : 'none';\n\n\t\tthis.options = options;\n\n\t\t// Container\n\t\tif ( options.container ) {\n\n\t\t\tcontainer = options.container;\n\t\t\tcontainer._width = container.clientWidth;\n\t\t\tcontainer._height = container.clientHeight;\n\n\t\t} else {\n\n\t\t\tcontainer = document.createElement( 'div' );\n\t\t\tcontainer.classList.add( 'panolens-container' );\n\t\t\tcontainer.style.width = '100%';\n\t\t\tcontainer.style.height = '100%';\n\t\t\tcontainer._width = window.innerWidth;\n\t\t\tcontainer._height = window.innerHeight;\n\t\t\tdocument.body.appendChild( container );\n\n\t\t}\n\n\t\tthis.container = container;\n\n\t\tthis.camera = options.camera || new THREE.PerspectiveCamera( this.options.cameraFov, this.container.clientWidth / this.container.clientHeight, 1, 10000 );\n\t\tthis.scene = options.scene || new THREE.Scene();\n\t\tthis.renderer = options.renderer || new THREE.WebGLRenderer( { alpha: true, antialias: false } );\n\n\t\tthis.viewIndicatorSize = options.indicatorSize;\n\n\t\tthis.reticle = {};\n\t\tthis.tempEnableReticle = this.options.enableReticle;\n\n\t\tthis.mode = PANOLENS.Modes.NORMAL;\n\n\t\tthis.OrbitControls;\n\t\tthis.DeviceOrientationControls;\n\n\t\tthis.CardboardEffect;\n\t\tthis.StereoEffect;\n\n\t\tthis.controls;\n\t\tthis.effect;\n\t\tthis.panorama;\n\t\tthis.widget;\n\n\t\tthis.hoverObject;\n\t\tthis.infospot;\n\t\tthis.pressEntityObject;\n\t\tthis.pressObject;\n\n\t\tthis.raycaster = new THREE.Raycaster();\n\t\tthis.raycasterPoint = new THREE.Vector2();\n\t\tthis.userMouse = new THREE.Vector2();\n\t\tthis.updateCallbacks = [];\n\t\tthis.requestAnimationId;\n\n\t\tthis.cameraFrustum = new THREE.Frustum();\n\t\tthis.cameraViewProjectionMatrix = new THREE.Matrix4();\n\n\t\tthis.outputDivElement;\n\n\t\t// Handler references\n\t\tthis.HANDLER_MOUSE_DOWN = this.onMouseDown.bind( this );\n\t\tthis.HANDLER_MOUSE_UP = this.onMouseUp.bind( this );\n\t\tthis.HANDLER_MOUSE_MOVE = this.onMouseMove.bind( this );\n\t\tthis.HANDLER_WINDOW_RESIZE = this.onWindowResize.bind( this );\n\t\tthis.HANDLER_KEY_DOWN = this.onKeyDown.bind( this );\n\t\tthis.HANDLER_KEY_UP = this.onKeyUp.bind( this );\n\t\tthis.HANDLER_TAP = this.onTap.bind( this, {\n\t\t\tclientX: this.container.clientWidth / 2,\n\t\t\tclientY: this.container.clientHeight / 2\n\t\t} );\n\n\t\t// Flag for infospot output\n\t\tthis.OUTPUT_INFOSPOT = false;\n\n\t\t// Animations\n\t\tthis.tweenLeftAnimation = new TWEEN.Tween();\n\t\tthis.tweenUpAnimation = new TWEEN.Tween();\n\n\t\t// Renderer\n\t\tthis.renderer.setPixelRatio( window.devicePixelRatio );\n\t\tthis.renderer.setSize( this.container.clientWidth, this.container.clientHeight );\n\t\tthis.renderer.setClearColor( 0x000000, 1 );\n\t\tthis.renderer.sortObjects = false;\n\n\t\t// Append Renderer Element to container\n\t\tthis.renderer.domElement.classList.add( 'panolens-canvas' );\n\t\tthis.renderer.domElement.style.display = 'block';\n\t\tthis.container.style.backgroundColor = '#000';\n\t\tthis.container.appendChild( this.renderer.domElement );\n\n\t\t// Camera Controls\n\t\tthis.OrbitControls = new THREE.OrbitControls( this.camera, this.container );\n\t\tthis.OrbitControls.name = 'orbit';\n\t\tthis.OrbitControls.minDistance = 1;\n\t\tthis.OrbitControls.noPan = true;\n\t\tthis.DeviceOrientationControls = new THREE.DeviceOrientationControls( this.camera, this.container );\n\t\tthis.DeviceOrientationControls.name = 'device-orientation';\n\t\tthis.DeviceOrientationControls.enabled = false;\n\t\tthis.camera.position.z = 1;\n\n\t\t// Register change event if passiveRenering\n\t\tif ( this.options.passiveRendering ) {\n\n\t\t\tconsole.warn( 'passiveRendering is now deprecated' );\n\n\t\t}\n\n\t\t// Controls\n\t\tthis.controls = [ this.OrbitControls, this.DeviceOrientationControls ];\n\t\tthis.control = this.OrbitControls;\n\n\t\t// Cardboard effect\n\t\tthis.CardboardEffect = new THREE.CardboardEffect( this.renderer );\n\t\tthis.CardboardEffect.setSize( this.container.clientWidth, this.container.clientHeight );\n\n\t\t// Stereo effect\n\t\tthis.StereoEffect = new THREE.StereoEffect( this.renderer );\n\t\tthis.StereoEffect.setSize( this.container.clientWidth, this.container.clientHeight );\n\n\t\tthis.effect = this.CardboardEffect;\n\n\t\t// Add default hidden reticle\n\t\tthis.addReticle();\n\n\t\t// Lock horizontal view\n\t\tif ( this.options.horizontalView ) {\n\t\t\tthis.OrbitControls.minPolarAngle = Math.PI / 2;\n\t\t\tthis.OrbitControls.maxPolarAngle = Math.PI / 2;\n\t\t}\n\n\t\t// Add Control UI\n\t\tif ( this.options.controlBar !== false ) {\n\t\t\tthis.addDefaultControlBar( this.options.controlButtons );\n\t\t}\n\n\t\t// Add View Indicator\n\t\tif ( this.options.viewIndicator ) {\n\t\t\tthis.addViewIndicator();\n\t\t}\n\n\t\t// Reverse dragging direction\n\t\tif ( this.options.reverseDragging ) {\n\t\t\tthis.reverseDraggingDirection();\n\t\t}\n\n\t\t// Register event if reticle is enabled, otherwise defaults to mouse\n\t\tif ( this.options.enableReticle ) {\n\t\t\tthis.enableReticleControl();\n\t\t} else {\n\t\t\tthis.registerMouseAndTouchEvents();\n\t\t}\n\n\t\tif ( this.options.output === 'overlay' ) {\n\t\t\tthis.addOutputElement();\n\t\t}\n\n\t\t// Register dom event listeners\n\t\tthis.registerEventListeners();\n\n\t\t// Animate\n\t\tthis.animate.call( this );\n\n\t};\n\n\tPANOLENS.Viewer.prototype = Object.create( THREE.EventDispatcher.prototype );\n\n\tPANOLENS.Viewer.prototype.constructor = PANOLENS.Viewer;\n\n\t/**\n\t * Add an object to the scene\n\t * Automatically hookup with panolens-viewer-handler listener\n\t * to communicate with viewer method\n\t * @param {THREE.Object3D} object - The object to be added\n\t */\n\tPANOLENS.Viewer.prototype.add = function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.scene.add( object );\n\n\t\t// All object added to scene has 'panolens-viewer-handler' event to handle viewer communication\n\t\tif ( object.addEventListener ) {\n\n\t\t\tobject.addEventListener( 'panolens-viewer-handler', this.eventHandler.bind( this ) );\n\n\t\t}\n\n\t\t// All object added to scene being passed with container\n\t\tif ( object instanceof PANOLENS.Panorama && object.dispatchEvent ) {\n\n\t\t\tobject.dispatchEvent( { type: 'panolens-container', container: this.container } );\n\n\t\t}\n\n\t\t// Hookup default panorama event listeners\n\t\tif ( object.type === 'panorama' ) {\n\n\t\t\tthis.addPanoramaEventListener( object );\n\n\t\t\tif ( !this.panorama ) {\n\n\t\t\t\tthis.setPanorama( object );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Remove an object from the scene\n\t * @param  {THREE.Object3D} object - Object to be removed\n\t */\n\tPANOLENS.Viewer.prototype.remove = function ( object ) {\n\n\t\tif ( object.removeEventListener ) {\n\n\t\t\tobject.removeEventListener( 'panolens-viewer-handler', this.eventHandler.bind( this ) );\n\n\t\t}\n\n\t\tthis.scene.remove( object );\n\n\t};\n\n\t/**\n\t * Add default control bar\n\t * @param {array} array - The control buttons array\n\t */\n\tPANOLENS.Viewer.prototype.addDefaultControlBar = function ( array ) {\n\n\t\tvar scope = this;\n\n\t\tif ( this.widget ) {\n\n\t\t\tconsole.warn( 'Default control bar exists' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.widget = new PANOLENS.Widget( this.container );\n\t\tthis.widget.addEventListener( 'panolens-viewer-handler', this.eventHandler.bind( this ) );\n\t\tthis.widget.addControlBar();\n\t\tarray.forEach( function( buttonName ){\n\n\t\t\tscope.widget.addControlButton( buttonName );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Set a panorama to be the current one\n\t * @param {PANOLENS.Panorama} pano - Panorama to be set\n\t */\n\tPANOLENS.Viewer.prototype.setPanorama = function ( pano ) {\n\n\t\tvar scope = this, leavingPanorama = this.panorama;\n\n\t\tif ( pano.type === 'panorama' && leavingPanorama !== pano ) {\n\n\t\t\t// Clear exisiting infospot\n\t\t\tthis.hideInfospot();\n\n\t\t\tvar afterEnterComplete = function () {\n\n\t\t\t\tleavingPanorama && leavingPanorama.onLeave();\n\t\t\t\tpano.removeEventListener( 'enter-fade-start', afterEnterComplete );\n\n\t\t\t};\n\n\t\t\tpano.addEventListener( 'enter-fade-start', afterEnterComplete );\n\n\t\t\t// Assign and enter panorama\n\t\t\t(this.panorama = pano).onEnter();\n\t\t\t\n\t\t}\n\n\t};\n\n\t/**\n\t * Event handler to execute commands from child objects\n\t * @param {object} event - The dispatched event with method as function name and data as an argument\n\t */\n\tPANOLENS.Viewer.prototype.eventHandler = function ( event ) {\n\n\t\tif ( event.method && this[ event.method ] ) {\n\n\t\t\tthis[ event.method ]( event.data );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Dispatch event to all descendants\n\t * @param  {object} event - Event to be passed along\n\t */\n\tPANOLENS.Viewer.prototype.dispatchEventToChildren = function ( event ) {\n\n\t\tthis.scene.traverse( function ( object ) {\n\n\t\t\tif ( object.dispatchEvent ) {\n\n\t\t\t\tobject.dispatchEvent( event );\n\n\t\t\t}\n\n\t\t});\n\n\t};\n\n\t/**\n\t * Set widget content\n\t * @param  {integer} controlIndex - Control index\n\t * @param  {PANOLENS.Modes} mode - Modes for effects\n\t */\n\tPANOLENS.Viewer.prototype.activateWidgetItem = function ( controlIndex, mode ) {\n\n\t\tvar mainMenu = this.widget.mainMenu;\n\t\tvar ControlMenuItem = mainMenu.children[ 0 ];\n\t\tvar ModeMenuItem = mainMenu.children[ 1 ];\n\n\t\tvar item;\n\n\t\tif ( controlIndex !== undefined ) {\n\n\t\t\tswitch ( controlIndex ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\titem = ControlMenuItem.subMenu.children[ 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\titem = ControlMenuItem.subMenu.children[ 2 ];\n\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tdefault:\n\n\t\t\t\t\titem = ControlMenuItem.subMenu.children[ 1 ];\n\n\t\t\t\t\tbreak;\t\n\n\t\t\t}\n\n\t\t\tControlMenuItem.subMenu.setActiveItem( item )\n\t\t\tControlMenuItem.setSelectionTitle( item.textContent );\n\n\t\t}\n\n\t\tif ( mode !== undefined ) {\n\n\t\t\tswitch( mode ) {\n\n\t\t\t\tcase PANOLENS.Modes.CARDBOARD:\n\n\t\t\t\t\titem = ModeMenuItem.subMenu.children[ 2 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase PANOLENS.Modes.STEREO:\n\n\t\t\t\t\titem = ModeMenuItem.subMenu.children[ 3 ];\n\t\t\t\t\t\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\titem = ModeMenuItem.subMenu.children[ 1 ];\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tModeMenuItem.subMenu.setActiveItem( item )\n\t\t\tModeMenuItem.setSelectionTitle( item.textContent );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Enable rendering effect\n\t * @param  {PANOLENS.Modes} mode - Modes for effects\n\t */\n\tPANOLENS.Viewer.prototype.enableEffect = function ( mode ) {\n\n\t\tif ( this.mode === mode ) { return; }\n\t\tif ( mode === PANOLENS.Modes.NORMAL ) { this.disableEffect(); return; }\n\t\telse { this.mode = mode; }\n\n\t\tvar fov = this.camera.fov;\n\n\t\tswitch( mode ) {\n\n\t\t\tcase PANOLENS.Modes.CARDBOARD:\n\n\t\t\t\tthis.effect = this.CardboardEffect;\n\t\t\t\tthis.enableReticleControl();\n\n\t\t\t\tbreak;\n\n\t\t\tcase PANOLENS.Modes.STEREO:\n\n\t\t\t\tthis.effect = this.StereoEffect;\n\t\t\t\tthis.enableReticleControl();\n\t\t\t\t\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tthis.effect = null;\n\t\t\t\tthis.disableReticleControl();\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tthis.activateWidgetItem( undefined, this.mode );\n\n\t\t/**\n\t\t * Dual eye effect event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#panolens-dual-eye-effect\n\t\t * @event PANOLENS.Infospot#panolens-dual-eye-effect\n\t\t * @property {PANOLENS.Modes} mode - Current display mode\n\t\t */\n\t\tthis.dispatchEventToChildren( { type: 'panolens-dual-eye-effect', mode: this.mode } );\n\n\t\t// Force effect stereo camera to update by refreshing fov\n\t\tthis.camera.fov = fov + 10e-3;\n\t\tthis.effect.setSize( this.container.clientWidth, this.container.clientHeight );\n\t\tthis.render();\n\t\tthis.camera.fov = fov;\n\n\t};\n\n\t/**\n\t * Disable additional rendering effect\n\t */\n\tPANOLENS.Viewer.prototype.disableEffect = function () {\n\n\t\tif ( this.mode === PANOLENS.Modes.NORMAL ) { return; }\n\n\t\tthis.mode = PANOLENS.Modes.NORMAL;\n\t\tthis.disableReticleControl();\n\n\t\tthis.activateWidgetItem( undefined, this.mode );\n\n\t\t/**\n\t\t * Dual eye effect event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#panolens-dual-eye-effect\n\t\t * @event PANOLENS.Infospot#panolens-dual-eye-effect\n\t\t * @property {PANOLENS.Modes} mode - Current display mode\n\t\t */\n\t\tthis.dispatchEventToChildren( { type: 'panolens-dual-eye-effect', mode: this.mode } );\n\n\t\tthis.renderer.setSize( this.container.clientWidth, this.container.clientHeight );\n\t\tthis.render();\n\t};\n\n\t/**\n\t * Enable reticle control\n\t */\n\tPANOLENS.Viewer.prototype.enableReticleControl = function () {\n\n\t\tif ( this.reticle.visible ) { return; }\n\t\tif ( !this.reticle.textureLoaded ) { this.reticle.loadTextures(); }\n\n\t\tthis.tempEnableReticle = true;\n\n\t\t// Register reticle event and unregister mouse event\n\t\tthis.unregisterMouseAndTouchEvents();\n\t\tthis.reticle.show();\n\t\tthis.registerReticleEvent();\n\t\tthis.updateReticleEvent();\n\n\t};\n\n\t/**\n\t * Disable reticle control\n\t */\n\tPANOLENS.Viewer.prototype.disableReticleControl = function () {\n\n\t\tthis.tempEnableReticle = false;\n\n\t\t// Register mouse event and unregister reticle event\n\t\tif ( !this.options.enableReticle ) {\n\n\t\t\tthis.reticle.hide();\n\t\t\tthis.unregisterReticleEvent();\n\t\t\tthis.registerMouseAndTouchEvents();\n\n\t\t} else {\n\n\t\t\tthis.updateReticleEvent();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Toggle video play or stop\n\t * @fires PANOLENS.Viewer#video-toggle\n\t */\n\tPANOLENS.Viewer.prototype.toggleVideoPlay = function ( pause ) {\n\n\t\tif ( this.panorama instanceof PANOLENS.VideoPanorama ) {\n\n\t\t\t/**\n\t\t\t * Toggle video event\n\t\t\t * @type {object}\n\t\t\t * @event PANOLENS.Viewer#video-toggle\n\t\t\t */\n\t\t\tthis.panorama.dispatchEvent( { type: 'video-toggle', pause: pause } );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set currentTime in a video\n\t * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t * @fires PANOLENS.Viewer#video-time\n\t */\n\tPANOLENS.Viewer.prototype.setVideoCurrentTime = function ( percentage ) {\n\n\t\tif ( this.panorama instanceof PANOLENS.VideoPanorama ) {\n\n\t\t\t/**\n\t\t\t * Setting video time event\n\t\t\t * @type {object}\n\t\t\t * @event PANOLENS.Viewer#video-time\n\t\t\t * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t\t\t */\n\t\t\tthis.panorama.dispatchEvent( { type: 'video-time', percentage: percentage } );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * This will be called when video updates if an widget is present\n\t * @param {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t * @fires PANOLENS.Viewer#video-update\n\t */\n\tPANOLENS.Viewer.prototype.onVideoUpdate = function ( percentage ) {\n\n\t\t/**\n\t\t * Video update event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-update\n\t\t * @property {number} percentage - Percentage of a video. Range from 0.0 to 1.0\n\t\t */\n\t\tthis.widget && this.widget.dispatchEvent( { type: 'video-update', percentage: percentage } );\n\n\t};\n\n\t/**\n\t * Add update callback to be called every animation frame\n\t */\n\tPANOLENS.Viewer.prototype.addUpdateCallback = function ( fn ) {\n\n\t\tif ( fn ) {\n\n\t\t\tthis.updateCallbacks.push( fn );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Remove update callback\n\t * @param  {Function} fn - The function to be removed\n\t */\n\tPANOLENS.Viewer.prototype.removeUpdateCallback = function ( fn ) {\n\n\t\tvar index = this.updateCallbacks.indexOf( fn );\n\n\t\tif ( fn && index >= 0 ) {\n\n\t\t\tthis.updateCallbacks.splice( index, 1 );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Show video widget\n\t */\n\tPANOLENS.Viewer.prototype.showVideoWidget = function () {\n\n\t\t/**\n\t\t * Show video widget event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-control-show\n\t\t */\n\t\tthis.widget && this.widget.dispatchEvent( { type: 'video-control-show' } );\n\n\t};\n\n\t/**\n\t * Hide video widget\n\t */\n\tPANOLENS.Viewer.prototype.hideVideoWidget = function () {\n\n\t\t/**\n\t\t * Hide video widget\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#video-control-hide\n\t\t */\n\t\tthis.widget && this.widget.dispatchEvent( { type: 'video-control-hide' } );\n\n\t};\n\n\tPANOLENS.Viewer.prototype.updateVideoPlayButton = function ( paused ) {\n\n\t\tif ( this.widget && \n\t\t\t this.widget.videoElement && \n\t\t\t this.widget.videoElement.controlButton ) {\n\n\t\t\tthis.widget.videoElement.controlButton.update( paused );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Add default panorama event listeners\n\t * @param {PANOLENS.Panorama} pano - The panorama to be added with event listener\n\t */\n\tPANOLENS.Viewer.prototype.addPanoramaEventListener = function ( pano ) {\n\n\t\tvar scope = this;\n\n\t\t// Set camera control on every panorama\n\t\tpano.addEventListener( 'enter-fade-start', this.setCameraControl.bind( this ) );\n\n\t\t// Show and hide widget event only when it's PANOLENS.VideoPanorama\n\t\tif ( pano instanceof PANOLENS.VideoPanorama ) {\n\n\t\t\tpano.addEventListener( 'enter-fade-start', this.showVideoWidget.bind( this ) );\n\t\t\tpano.addEventListener( 'leave', function () {\n\n\t\t\t\tif ( !(this.panorama instanceof PANOLENS.VideoPanorama) ) {\n\n\t\t\t\t\tthis.hideVideoWidget.call( this );\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}.bind( this ) );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Set camera control\n\t */\n\tPANOLENS.Viewer.prototype.setCameraControl = function () {\n\n\t\tthis.OrbitControls.target.copy( this.panorama.position );\n\n\t};\n\n\t/**\n\t * Get current camera control\n\t * @return {object} - Current navigation control. THREE.OrbitControls or THREE.DeviceOrientationControls\n\t */\n\tPANOLENS.Viewer.prototype.getControl = function () {\n\n\t\treturn this.control;\n\n\t},\n\n\t/**\n\t * Get scene\n\t * @return {THREE.Scene} - Current scene which the viewer is built on\n\t */\n\tPANOLENS.Viewer.prototype.getScene = function () {\n\n\t\treturn this.scene;\n\n\t};\n\n\t/**\n\t * Get camera\n\t * @return {THREE.Camera} - The scene camera\n\t */\n\tPANOLENS.Viewer.prototype.getCamera = function () {\n\n\t\treturn this.camera;\n\n\t},\n\n\t/**\n\t * Get renderer\n\t * @return {THREE.WebGLRenderer} - The renderer using webgl\n\t */\n\tPANOLENS.Viewer.prototype.getRenderer = function () {\n\n\t\treturn this.renderer;\n\n\t};\n\n\t/**\n\t * Get container\n\t * @return {HTMLDOMElement} - The container holds rendererd canvas\n\t */\n\tPANOLENS.Viewer.prototype.getContainer = function () {\n\n\t\treturn this.container;\n\n\t};\n\n\t/**\n\t * Get control name\n\t * @return {string} - Control name. 'orbit' or 'device-orientation'\n\t */\n\tPANOLENS.Viewer.prototype.getControlName = function () {\n\n\t\treturn this.control.name;\n\n\t};\n\n\t/**\n\t * Get next navigation control name\n\t * @return {string} - Next control name\n\t */\n\tPANOLENS.Viewer.prototype.getNextControlName = function () {\n\n\t\treturn this.controls[ this.getNextControlIndex() ].name;\n\n\t};\n\n\t/**\n\t * Get next navigation control index\n\t * @return {number} - Next control index\n\t */\n\tPANOLENS.Viewer.prototype.getNextControlIndex = function () {\n\n\t\tvar controls, control, nextIndex;\n\n\t\tcontrols = this.controls;\n\t\tcontrol = this.control;\n\t\tnextIndex = controls.indexOf( control ) + 1;\n\n\t\treturn ( nextIndex >= controls.length ) ? 0 : nextIndex;\n\n\t};\n\n\t/**\n\t * Set field of view of camera\n\t */\n\tPANOLENS.Viewer.prototype.setCameraFov = function ( fov ) {\n\n\t\tthis.camera.fov = fov;\n\t\tthis.camera.updateProjectionMatrix();\n\n\t};\n\n\t/**\n\t * Enable control by index\n\t * @param  {PANOLENS.Controls} index - Index of camera control\n\t */\n\tPANOLENS.Viewer.prototype.enableControl = function ( index ) {\n\n\t\tindex = ( index >= 0 && index < this.controls.length ) ? index : 0;\n\n\t\tthis.control.enabled = false;\n\n\t\tthis.control = this.controls[ index ];\n\n\t\tthis.control.enabled = true;\n\n\t\tswitch ( index ) {\n\n\t\t\tcase PANOLENS.Controls.ORBIT:\n\n\t\t\t\tthis.camera.position.copy( this.panorama.position );\n\t\t\t\tthis.camera.position.z += 1;\n\n\t\t\t\tbreak;\n\n\t\t\tcase PANOLENS.Controls.DEVICEORIENTATION:\n\n\t\t\t\tthis.camera.position.copy( this.panorama.position );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.control.update();\n\n\t\tthis.activateWidgetItem( index, undefined );\n\n\t};\n\n\t/**\n\t * Disable current control\n\t */\n\tPANOLENS.Viewer.prototype.disableControl = function () {\n\n\t\tthis.control.enabled = false;\n\n\t};\n\n\t/**\n\t * Toggle next control\n\t */\n\tPANOLENS.Viewer.prototype.toggleNextControl = function () {\n\n\t\tthis.enableControl( this.getNextControlIndex() );\n\n\t};\n\n\t/**\n\t * Screen Space Projection\n\t */\n\tPANOLENS.Viewer.prototype.getScreenVector = function ( worldVector ) {\n\n\t\tvar vector = worldVector.clone();\n\t\tvar widthHalf = ( this.container.clientWidth ) / 2;\n\t\tvar heightHalf = this.container.clientHeight / 2;\n\n\t\tvector.project( this.camera );\n\n\t\tvector.x = ( vector.x * widthHalf ) + widthHalf;\n\t\tvector.y = - ( vector.y * heightHalf ) + heightHalf;\n\t\tvector.z = 0;\n\n\t\treturn vector;\n\n\t};\n\n\t/**\n\t * Check Sprite in Viewport\n\t */\n\tPANOLENS.Viewer.prototype.checkSpriteInViewport = function ( sprite ) {\n\n\t\tthis.camera.matrixWorldInverse.getInverse( this.camera.matrixWorld );\n\t\tthis.cameraViewProjectionMatrix.multiplyMatrices( this.camera.projectionMatrix, this.camera.matrixWorldInverse );\n\t\tthis.cameraFrustum.setFromMatrix( this.cameraViewProjectionMatrix );\n\n\t\treturn sprite.visible && this.cameraFrustum.intersectsSprite( sprite );\n\n\t};\n\n\t/**\n\t * Reverse dragging direction\n\t */\n\tPANOLENS.Viewer.prototype.reverseDraggingDirection = function () {\n\n\t\tthis.OrbitControls.rotateSpeed *= -1;\n\t\tthis.OrbitControls.momentumScalingFactor *= -1;\n\n\t};\n\n\t/**\n\t * Add reticle \n\t */\n\tPANOLENS.Viewer.prototype.addReticle = function () {\n\n\t\tthis.reticle = new PANOLENS.Reticle( 0xffffff, \n\t\t\tthis.options.autoReticleSelect,\n\t\t\tPANOLENS.DataImage.ReticleIdle, \n\t\t\tPANOLENS.DataImage.ReticleDwell, \n\t\t\tthis.options.dwellTime,\n\t\t\t45 );\n\t\tthis.reticle.position.z = -10;\n\t\tthis.camera.add( this.reticle );\n\t\tthis.scene.add( this.camera );\n\n\t};\n\n\t/**\n\t * Tween control looking center\n\t * @param {THREE.Vector3} vector - Vector to be looked at the center\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n\tPANOLENS.Viewer.prototype.tweenControlCenter = function ( vector, duration, easing ) {\n\n\t\tif ( this.control !== this.OrbitControls ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Pass in arguments as array\n\t\tif ( vector instanceof Array ) {\n\n\t\t\tduration = vector[ 1 ];\n\t\t\teasing = vector[ 2 ];\n\t\t\tvector = vector[ 0 ];\n\n\t\t}\n\n\t\tduration = duration !== undefined ? duration : 1000;\n\t\teasing = easing || TWEEN.Easing.Exponential.Out;\n\n\t\tvar scope, ha, va, chv, cvv, hv, vv, vptc, ov, nv;\n\n\t\tscope = this;\n\n\t\tchv = this.camera.getWorldDirection();\n\t\tcvv = chv.clone();\n\n\t\tvptc = this.panorama.getWorldPosition().sub( this.camera.getWorldPosition() );\n\n\t\thv = vector.clone();\n\t\t// Scale effect\n\t\thv.x *= -1;\n\t\thv.add( vptc ).normalize();\n\t\tvv = hv.clone();\n\n\t\tchv.y = 0;\n\t\thv.y = 0;\n\n\t\tha = Math.atan2( hv.z, hv.x ) - Math.atan2( chv.z, chv.x );\n\t\tha = ha > Math.PI ? ha - 2 * Math.PI : ha;\n\t\tha = ha < -Math.PI ? ha + 2 * Math.PI : ha;\n\t\tva = Math.abs( cvv.angleTo( chv ) + ( cvv.y * vv.y <= 0 ? vv.angleTo( hv ) : -vv.angleTo( hv ) ) );\n\t\tva *= vv.y < cvv.y ? 1 : -1;\n\n\t\tov = { left: 0, up: 0 };\n\t\tnv = { left: 0, up: 0 };\n\n\t\tthis.tweenLeftAnimation.stop();\n\t\tthis.tweenUpAnimation.stop();\n\n\t\tthis.tweenLeftAnimation = new TWEEN.Tween( ov )\n\t\t\t.to( { left: ha }, duration )\n\t\t\t.easing( easing )\n\t\t\t.onUpdate(function(){\n\t\t\t\tscope.control.rotateLeft( this.left - nv.left );\n\t\t\t\tnv.left = this.left;\n\t\t\t})\n\t\t\t.start();\n\n\t\tthis.tweenUpAnimation = new TWEEN.Tween( ov )\n\t\t\t.to( { up: va }, duration )\n\t\t\t.easing( easing )\n\t\t\t.onUpdate(function(){\n\t\t\t\tscope.control.rotateUp( this.up - nv.up );\n\t\t\t\tnv.up = this.up;\n\t\t\t})\n\t\t\t.start();\n\n\t};\n\n\t/**\n\t * Tween control looking center by object\n\t * @param {THREE.Object3D} object - Object to be looked at the center\n\t * @param {number} [duration=1000] - Duration to tween\n\t * @param {function} [easing=TWEEN.Easing.Exponential.Out] - Easing function\n\t */\n\tPANOLENS.Viewer.prototype.tweenControlCenterByObject = function ( object, duration, easing ) {\n\n\t\tvar isUnderScalePlaceHolder = false;\n\n\t\tobject.traverseAncestors( function ( ancestor ) {\n\n\t\t\tif ( ancestor.scalePlaceHolder ) {\n\n\t\t\t\tisUnderScalePlaceHolder = true;\n\n\t\t\t}\n\t\t} );\n\n\t\tif ( isUnderScalePlaceHolder ) {\n\n\t\t\tvar invertXVector = new THREE.Vector3( -1, 1, 1 );\n\n\t\t\tthis.tweenControlCenter( object.getWorldPosition().multiply( invertXVector ), duration, easing );\n\n\t\t} else {\n\n\t\t\tthis.tweenControlCenter( object.getWorldPosition(), duration, easing );\n\n\t\t}\n\n\t};\n\n\t/**\n\t * This is called when window size is changed\n\t * @fires PANOLENS.Viewer#window-resize\n\t * @param {number} [windowWidth] - Specify if custom element has changed width\n\t * @param {number} [windowHeight] - Specify if custom element has changed height\n\t */\n\tPANOLENS.Viewer.prototype.onWindowResize = function ( windowWidth, windowHeight ) {\n\n\t\tvar width, height, expand;\n\n\t\texpand = this.container.classList.contains( 'panolens-container' ) || this.container.isFullscreen;\n\n\t\tif ( windowWidth !== undefined && windowHeight !== undefined ) {\n\n\t\t\twidth = windowWidth;\n\t\t\theight = windowHeight;\n\t\t\tthis.container._width = windowWidth;\n\t\t\tthis.container._height = windowHeight;\n\n\t\t} else {\n\n\t\t\twidth = expand ? Math.max(document.documentElement.clientWidth, window.innerWidth || 0) : this.container.clientWidth;\n\t\t\theight = expand ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : this.container.clientHeight;\n\t\t\tthis.container._width = width;\n\t\t\tthis.container._height = height;\n\n\t\t}\n\n\t\tthis.camera.aspect = width / height;\n\t\tthis.camera.updateProjectionMatrix();\n\n\t\tthis.renderer.setSize( width, height );\n\n\t\t// Update reticle\n\t\tif ( this.options.enableReticle || this.tempEnableReticle ) {\n\n\t\t\tthis.updateReticleEvent();\n\n\t\t}\n\n\t\t/**\n\t\t * Window resizing event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#window-resize\n\t\t * @property {number} width  - Width of the window\n\t\t * @property {number} height - Height of the window\n\t\t */\n\t\tthis.dispatchEvent( { type: 'window-resize', width: width, height: height });\n\t\tthis.scene.traverse( function ( object ) {\n\n\t\t\tif ( object.dispatchEvent ) {\n\n\t\t\t\tobject.dispatchEvent( { type: 'window-resize', width: width, height: height });\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\tPANOLENS.Viewer.prototype.addOutputElement = function () {\n\n\t\tvar element = document.createElement( 'div' );\n\t\telement.style.position = 'absolute';\n\t\telement.style.right = '10px';\n\t\telement.style.top = '10px';\n\t\telement.style.color = \"#fff\";\n\t\tthis.container.appendChild( element );\n\t\tthis.outputDivElement = element;\n\n\t};\n\n\t/**\n\t * Output infospot attach position in developer console by holding down Ctrl button\n\t */\n\tPANOLENS.Viewer.prototype.outputInfospotPosition = function () {\n\n\t\tvar intersects, point, panoramaWorldPosition, outputPosition;\n\n\t\tintersects = this.raycaster.intersectObject( this.panorama, true );\n\n\t\tif ( intersects.length > 0 ) {\n\n\t\t\tpoint = intersects[0].point;\n\t\t\tpanoramaWorldPosition = this.panorama.getWorldPosition();\n\n\t\t\t// Panorama is scaled -1 on X axis\n\t\t\toutputPosition = new THREE.Vector3(\n\t\t\t\t-(point.x - panoramaWorldPosition.x).toFixed(2),\n\t\t\t\t(point.y - panoramaWorldPosition.y).toFixed(2),\n\t\t\t\t(point.z - panoramaWorldPosition.z).toFixed(2)\n\t\t\t);\n\n\t\t\tswitch ( this.options.output ) {\n\n\t\t\t\tcase 'console':\n\t\t\t\t\tconsole.info( outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'overlay':\n\t\t\t\t\tthis.outputDivElement.textContent = outputPosition.x + ', ' + outputPosition.y + ', ' + outputPosition.z;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onMouseDown = function ( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tthis.userMouse.x = ( event.clientX >= 0 ) ? event.clientX : event.touches[0].clientX;\n\t\tthis.userMouse.y = ( event.clientY >= 0 ) ? event.clientY : event.touches[0].clientY;\n\t\tthis.userMouse.type = 'mousedown';\n\t\tthis.onTap( event );\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onMouseMove = function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tthis.userMouse.type = 'mousemove';\n\t\tthis.onTap( event );\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onMouseUp = function ( event ) {\n\n\t\tvar onTarget = false, type;\n\n\t\tthis.userMouse.type = 'mouseup';\n\n\t\ttype = ( this.userMouse.x >= event.clientX - this.options.clickTolerance \n\t\t\t\t&& this.userMouse.x <= event.clientX + this.options.clickTolerance\n\t\t\t\t&& this.userMouse.y >= event.clientY - this.options.clickTolerance\n\t\t\t\t&& this.userMouse.y <= event.clientY + this.options.clickTolerance ) \n\t\t\t\t||  ( event.changedTouches \n\t\t\t\t&& this.userMouse.x >= event.changedTouches[0].clientX - this.options.clickTolerance\n\t\t\t\t&& this.userMouse.x <= event.changedTouches[0].clientX + this.options.clickTolerance \n\t\t\t\t&& this.userMouse.y >= event.changedTouches[0].clientY - this.options.clickTolerance\n\t\t\t\t&& this.userMouse.y <= event.changedTouches[0].clientY + this.options.clickTolerance ) \n\t\t? 'click' : undefined;\n\n\t\t// Event should happen on canvas\n\t\tif ( event && event.target && !event.target.classList.contains( 'panolens-canvas' ) ) { return; }\n\n\t\tevent.preventDefault();\n\n\t\tif ( event.changedTouches && event.changedTouches.length === 1 ) {\n\n\t\t\tonTarget = this.onTap( { clientX : event.changedTouches[0].clientX, clientY : event.changedTouches[0].clientY }, type );\n\t\t\n\t\t} else {\n\n\t\t\tonTarget = this.onTap( event, type );\n\n\t\t}\n\n\t\tthis.userMouse.type = 'none';\n\n\t\tif ( onTarget ) { \n\n\t\t\treturn; \n\n\t\t}\n\n\t\tif ( type === 'click' ) {\n\n\t\t\tthis.options.autoHideInfospot && this.panorama && this.panorama.toggleInfospotVisibility();\n\t\t\tthis.options.autoHideControlBar && this.toggleControlBar();\n\n\t\t}\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onTap = function ( event, type ) {\n\n\t\tvar intersects, intersect_entity, intersect;\n\n\t\tthis.raycasterPoint.x = ( ( event.clientX - this.container.offsetLeft ) / this.container.clientWidth ) * 2 - 1;\n\t\tthis.raycasterPoint.y = - ( ( event.clientY - this.container.offsetTop ) / this.container.clientHeight ) * 2 + 1;\n\n\t\tthis.raycaster.setFromCamera( this.raycasterPoint, this.camera );\n\n\t\t// Return if no panorama \n\t\tif ( !this.panorama ) { \n\n\t\t\treturn; \n\n\t\t}\n\n\t\t// output infospot information\n\t\tif ( event.type !== 'mousedown' && PANOLENS.Utils.checkTouchSupported() || this.OUTPUT_INFOSPOT ) { \n\n\t\t\tthis.outputInfospotPosition(); \n\n\t\t}\n\n\t\tintersects = this.raycaster.intersectObjects( this.panorama.children, true );\n\n\t\tintersect_entity = this.getConvertedIntersect( intersects );\n\n\t\tintersect = ( intersects.length > 0 ) ? intersects[0].object : intersect;\n\n\t\tif ( this.userMouse.type === 'mouseup'  ) {\n\n\t\t\tif ( intersect_entity && this.pressEntityObject === intersect_entity && this.pressEntityObject.dispatchEvent ) {\n\n\t\t\t\tthis.pressEntityObject.dispatchEvent( { type: 'pressstop-entity', mouseEvent: event } );\n\n\t\t\t}\n\n\t\t\tthis.pressEntityObject = undefined;\n\n\t\t}\n\n\t\tif ( this.userMouse.type === 'mouseup'  ) {\n\n\t\t\tif ( intersect && this.pressObject === intersect && this.pressObject.dispatchEvent ) {\n\n\t\t\t\tthis.pressObject.dispatchEvent( { type: 'pressstop', mouseEvent: event } );\n\n\t\t\t}\n\n\t\t\tthis.pressObject = undefined;\n\n\t\t}\n\n\t\tif ( type === 'click' ) {\n\n\t\t\tthis.panorama.dispatchEvent( { type: 'click', intersects: intersects, mouseEvent: event } );\n\n\t\t\tif ( intersect_entity && intersect_entity.dispatchEvent ) {\n\n\t\t\t\tintersect_entity.dispatchEvent( { type: 'click-entity', mouseEvent: event } );\n\n\t\t\t}\n\n\t\t\tif ( intersect && intersect.dispatchEvent ) {\n\n\t\t\t\tintersect.dispatchEvent( { type: 'click', mouseEvent: event } );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.panorama.dispatchEvent( { type: 'hover', intersects: intersects, mouseEvent: event } );\n\n\t\t\tif ( ( this.hoverObject && intersects.length > 0 && this.hoverObject !== intersect_entity )\n\t\t\t\t|| ( this.hoverObject && intersects.length === 0 ) ){\n\n\t\t\t\tif ( this.hoverObject.dispatchEvent ) {\n\n\t\t\t\t\tthis.hoverObject.dispatchEvent( { type: 'hoverleave', mouseEvent: event } );\n\n\t\t\t\t\t// Cancel dwelling\n\t\t\t\t\tthis.reticle.cancelDwelling();\n\n\t\t\t\t}\n\n\t\t\t\tthis.hoverObject = undefined;\n\n\t\t\t}\n\n\t\t\tif ( intersect_entity && intersects.length > 0 ) {\n\n\t\t\t\tif ( this.hoverObject !== intersect_entity ) {\n\n\t\t\t\t\tthis.hoverObject = intersect_entity;\n\n\t\t\t\t\tif ( this.hoverObject.dispatchEvent ) {\n\n\t\t\t\t\t\tthis.hoverObject.dispatchEvent( { type: 'hoverenter', mouseEvent: event } );\n\n\t\t\t\t\t\t// Start reticle timer\n\t\t\t\t\t\tif ( this.options.autoReticleSelect && this.options.enableReticle || this.tempEnableReticle ) {\n\t\t\t\t\t\t\tthis.reticle.startDwelling( this.onTap.bind( this, event, 'click' ) );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.userMouse.type === 'mousedown' && this.pressEntityObject != intersect_entity ) {\n\n\t\t\t\t\tthis.pressEntityObject = intersect_entity;\n\n\t\t\t\t\tif ( this.pressEntityObject.dispatchEvent ) {\n\n\t\t\t\t\t\tthis.pressEntityObject.dispatchEvent( { type: 'pressstart-entity', mouseEvent: event } );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.userMouse.type === 'mousedown' && this.pressObject != intersect ) {\n\n\t\t\t\t\tthis.pressObject = intersect;\n\n\t\t\t\t\tif ( this.pressObject.dispatchEvent ) {\n\n\t\t\t\t\t\tthis.pressObject.dispatchEvent( { type: 'pressstart', mouseEvent: event } );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.userMouse.type === 'mousemove' || this.options.enableReticle ) {\n\n\t\t\t\t\tif ( intersect && intersect.dispatchEvent ) {\n\n\t\t\t\t\t\tintersect.dispatchEvent( { type: 'hover', mouseEvent: event } );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.pressEntityObject && this.pressEntityObject.dispatchEvent ) {\n\n\t\t\t\t\t\tthis.pressEntityObject.dispatchEvent( { type: 'pressmove-entity', mouseEvent: event } );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.pressObject && this.pressObject.dispatchEvent ) {\n\n\t\t\t\t\t\tthis.pressObject.dispatchEvent( { type: 'pressmove', mouseEvent: event } );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( !intersect_entity && this.pressEntityObject && this.pressEntityObject.dispatchEvent ) {\n\n\t\t\t\tthis.pressEntityObject.dispatchEvent( { type: 'pressstop-entity', mouseEvent: event } );\n\n\t\t\t\tthis.pressEntityObject = undefined;\n\n\t\t\t}\n\n\t\t\tif ( !intersect && this.pressObject && this.pressObject.dispatchEvent ) {\n\n\t\t\t\tthis.pressObject.dispatchEvent( { type: 'pressstop', mouseEvent: event } );\n\n\t\t\t\tthis.pressObject = undefined;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Infospot handler\n\t\tif ( intersect && intersect instanceof PANOLENS.Infospot ) {\n\n\t\t\tthis.infospot = intersect;\n\t\t\t\n\t\t\tif ( type === 'click' ) {\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\t\t\t\n\n\t\t} else if ( this.infospot ) {\n\n\t\t\tthis.hideInfospot();\n\n\t\t}\n\n\t};\n\n\tPANOLENS.Viewer.prototype.getConvertedIntersect = function ( intersects ) {\n\n\t\tvar intersect;\n\n\t\tfor ( var i = 0; i < intersects.length; i++ ) {\n\n\t\t\tif ( intersects[i].distance >= 0 && intersects[i].object && !intersects[i].object.passThrough ) {\n\n\t\t\t\tif ( intersects[i].object.entity && intersects[i].object.entity.passThrough ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if ( intersects[i].object.entity && !intersects[i].object.entity.passThrough ) {\n\t\t\t\t\tintersect = intersects[i].object.entity;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tintersect = intersects[i].object;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn intersect;\n\n\t};\n\n\tPANOLENS.Viewer.prototype.hideInfospot = function ( intersects ) {\n\n\t\tif ( this.infospot ) {\n\n\t\t\tthis.infospot.onHoverEnd();\n\n\t\t\tthis.infospot = undefined;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Toggle control bar\n\t * @fires [PANOLENS.Viewer#control-bar-toggle]\n\t */\n\tPANOLENS.Viewer.prototype.toggleControlBar = function () {\n\n\t\t/**\n\t\t * Toggle control bar event\n\t\t * @type {object}\n\t\t * @event PANOLENS.Viewer#control-bar-toggle\n\t\t */\n\t\tthis.widget && this.widget.dispatchEvent( { type: 'control-bar-toggle' } );\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onKeyDown = function ( event ) {\n\n\t\tif ( this.options.output && this.options.output !== 'none' && event.key === 'Control' ) {\n\n\t\t\tthis.OUTPUT_INFOSPOT = true;\n\n\t\t}\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onKeyUp = function ( event ) {\n\n\t\tthis.OUTPUT_INFOSPOT = false;\n\n\t};\n\n\t/**\n\t * Update control and callbacks\n\t */\n\tPANOLENS.Viewer.prototype.update = function () {\n\n\t\tTWEEN.update();\n\n\t\tthis.updateCallbacks.forEach( function( callback ){ callback(); } );\n\n\t\tthis.control.update();\n\n\t\tthis.scene.traverse( function( child ){\n\t\t\tif ( child instanceof PANOLENS.Infospot \n\t\t\t\t&& child.element \n\t\t\t\t&& ( this.hoverObject === child \n\t\t\t\t\t|| child.element.style.display !== 'none' \n\t\t\t\t\t|| (child.element.left && child.element.left.style.display !== 'none')\n\t\t\t\t\t|| (child.element.right && child.element.right.style.display !== 'none') ) ) {\n\t\t\t\tif ( this.checkSpriteInViewport( child ) ) {\n\t\t\t\t\tvar vector = this.getScreenVector( child.getWorldPosition() );\n\t\t\t\t\tchild.translateElement( vector.x, vector.y );\n\t\t\t\t} else {\n\t\t\t\t\tchild.onDismiss();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}.bind(this) );\n\n\t};\n\n\t/**\n\t * Rendering function to be called on every animation frame\n\t */\n\tPANOLENS.Viewer.prototype.render = function () {\n\n\t\tif ( this.mode === PANOLENS.Modes.CARDBOARD || this.mode === PANOLENS.Modes.STEREO ) {\n\n\t\t\tthis.effect.render( this.scene, this.camera );\n\n\t\t} else {\n\n\t\t\tthis.renderer.render( this.scene, this.camera );\n\n\t\t}\n\n\t};\n\n\tPANOLENS.Viewer.prototype.animate = function () {\n\n\t\tthis.requestAnimationId = window.requestAnimationFrame( this.animate.bind( this ) );\n\n\t\tthis.onChange();\n\n\t};\n\n\tPANOLENS.Viewer.prototype.onChange = function () {\n\n\t\tthis.update();\n\t\tthis.render();\n\n\t};\n\n\t/**\n\t * Register mouse and touch event on container\n\t */\n\tPANOLENS.Viewer.prototype.registerMouseAndTouchEvents = function () {\n\n\t\tthis.container.addEventListener( 'mousedown' , \tthis.HANDLER_MOUSE_DOWN, false );\n\t\tthis.container.addEventListener( 'mousemove' , \tthis.HANDLER_MOUSE_MOVE, false );\n\t\tthis.container.addEventListener( 'mouseup'\t , \tthis.HANDLER_MOUSE_UP  , false );\n\t\tthis.container.addEventListener( 'touchstart', \tthis.HANDLER_MOUSE_DOWN, false );\n\t\tthis.container.addEventListener( 'touchend'  , \tthis.HANDLER_MOUSE_UP  , false );\n\n\t};\n\n\t/**\n\t * Unregister mouse and touch event on container\n\t */\n\tPANOLENS.Viewer.prototype.unregisterMouseAndTouchEvents = function () {\n\n\t\tthis.container.removeEventListener( 'mousedown' ,  this.HANDLER_MOUSE_DOWN, false );\n\t\tthis.container.removeEventListener( 'mousemove' ,  this.HANDLER_MOUSE_MOVE, false );\n\t\tthis.container.removeEventListener( 'mouseup'\t,  this.HANDLER_MOUSE_UP  , false );\n\t\tthis.container.removeEventListener( 'touchstart',  this.HANDLER_MOUSE_DOWN, false );\n\t\tthis.container.removeEventListener( 'touchend'  ,  this.HANDLER_MOUSE_UP  , false );\n\t};\n\n\t/**\n\t * Register reticle event\n\t */\n\tPANOLENS.Viewer.prototype.registerReticleEvent = function () {\n\n\t\tthis.addUpdateCallback( this.HANDLER_TAP );\n\n\t};\n\n\t/**\n\t * Unregister reticle event\n\t */\n\tPANOLENS.Viewer.prototype.unregisterReticleEvent = function () {\n\n\t\tthis.removeUpdateCallback( this.HANDLER_TAP );\n\n\t};\n\n\t/**\n\t * Update reticle event\n\t */\n\tPANOLENS.Viewer.prototype.updateReticleEvent = function () {\n\n\t\tvar centerX, centerY;\n\n\t\tcenterX = this.container.clientWidth / 2 + this.container.offsetLeft;\n\t\tcenterY = this.container.clientHeight / 2;\n\n\t\tthis.removeUpdateCallback( this.HANDLER_TAP );\n\t\tthis.HANDLER_TAP = this.onTap.bind( this, { clientX: centerX, clientY: centerY } );\n\t\tthis.addUpdateCallback( this.HANDLER_TAP );\n\n\t};\n\n\t/**\n\t * Register container and window listeners\n\t */\n\tPANOLENS.Viewer.prototype.registerEventListeners = function () {\n\n\t\t// Resize Event\n\t\twindow.addEventListener( 'resize' , this.HANDLER_WINDOW_RESIZE, true );\n\n\t\t// Keyboard Event\n\t\twindow.addEventListener( 'keydown', this.HANDLER_KEY_DOWN, true );\n\t\twindow.addEventListener( 'keyup'  , this.HANDLER_KEY_UP\t , true );\n\n\t};\n\n\t/**\n\t * Unregister container and window listeners\n\t */\n\tPANOLENS.Viewer.prototype.unregisterEventListeners = function () {\n\n\t\t// Resize Event\n\t\twindow.removeEventListener( 'resize' , this.HANDLER_WINDOW_RESIZE, true );\n\n\t\t// Keyboard Event\n\t\twindow.removeEventListener( 'keydown', this.HANDLER_KEY_DOWN, true );\n\t\twindow.removeEventListener( 'keyup'  , this.HANDLER_KEY_UP  , true );\n\n\t};\n\n\t/**\n\t * Dispose all scene objects and clear cache\n\t */\n\tPANOLENS.Viewer.prototype.dispose = function () {\n\n\t\t// Unregister dom event listeners\n\t\tthis.unregisterEventListeners();\n\n\t\t// recursive disposal on 3d objects\n\t\tfunction recursiveDispose ( object ) {\n\n\t\t\tfor ( var i = object.children.length - 1; i >= 0; i-- ) {\n\n\t\t\t\trecursiveDispose( object.children[i] );\n\t\t\t\tobject.remove( object.children[i] );\n\n\t\t\t}\n\n\t\t\tif ( object instanceof PANOLENS.Infospot ) {\n\n\t\t\t\tobject.dispose();\n\n\t\t\t}\n\n\t\t\tobject.geometry && object.geometry.dispose();\n\t\t\tobject.material && object.material.dispose();\n\t\t}\n\n\t\trecursiveDispose( this.scene );\n\n\t\t// dispose widget\n\t\tif ( this.widget ) {\n\n\t\t\tthis.widget.dispose();\n\t\t\tthis.widget = null;\n\n\t\t}\n\n\t\t// clear cache\n\t\tif ( THREE.Cache && THREE.Cache.enabled ) {\n\n\t\t\tTHREE.Cache.clear();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Destory viewer by disposing and stopping requestAnimationFrame\n\t */\n\tPANOLENS.Viewer.prototype.destory = function () {\n\n\t\tthis.dispose();\n\t\tthis.render();\n\t\twindow.cancelAnimationFrame( this.requestAnimationId );\t\t\n\n\t};\n\n\t/**\n\t * On panorama dispose\n\t */\n\tPANOLENS.Viewer.prototype.onPanoramaDispose = function ( panorama ) {\n\n\t\tif ( panorama instanceof PANOLENS.VideoPanorama ) {\n\n\t\t\tthis.hideVideoWidget();\n\n\t\t}\n\n\t\tif ( panorama === this.panorama ) {\n\n\t\t\tthis.panorama = null;\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Load ajax call\n\t * @param {string} url - URL to be requested\n\t * @param {function} [callback] - Callback after request completes\n\t */\n\tPANOLENS.Viewer.prototype.loadAsyncRequest = function ( url, callback ) {\n\n\t\tvar request = new XMLHttpRequest();\n\t\trequest.onloadend = function ( event ) {\n\t\t\tcallback && callback( event );\n\t\t};\n\t\trequest.open( \"GET\", url, true );\n\t\trequest.send( null );\n\n\t};\n\n\t/**\n\t * View indicator in upper left\n\t * */\n\tPANOLENS.Viewer.prototype.addViewIndicator = function () {\n\n\t\tvar scope = this;\n\n\t\tfunction loadViewIndicator ( asyncEvent ) {\n\n\t\t\tif ( asyncEvent.loaded === 0 ) return;\n\n\t\t\tvar viewIndicatorDiv = asyncEvent.target.responseXML.documentElement;\n\t\t\tviewIndicatorDiv.style.width = scope.viewIndicatorSize + \"px\";\n\t\t\tviewIndicatorDiv.style.height = scope.viewIndicatorSize + \"px\";\n\t\t\tviewIndicatorDiv.style.position = \"absolute\";\n\t\t\tviewIndicatorDiv.style.top = \"10px\";\n\t\t\tviewIndicatorDiv.style.left = \"10px\";\n\t\t\tviewIndicatorDiv.style.opacity = \"0.5\";\n\t\t\tviewIndicatorDiv.style.cursor = \"pointer\";\n\t\t\tviewIndicatorDiv.id = \"panolens-view-indicator-container\";\n\n\t\t\tscope.container.appendChild( viewIndicatorDiv );\n\n\t\t\tvar indicator = viewIndicatorDiv.querySelector( \"#indicator\" );\n\t\t\tvar setIndicatorD = function () {\n\n\t\t\t\tscope.radius = scope.viewIndicatorSize * 0.225;\n\t\t\t\tscope.currentPanoAngle = scope.camera.rotation.y - THREE.Math.degToRad( 90 );\n\t\t\t\tscope.fovAngle = THREE.Math.degToRad( scope.camera.fov ) ;\n\t\t\t\tscope.leftAngle = -scope.currentPanoAngle - scope.fovAngle / 2;\n\t\t\t\tscope.rightAngle = -scope.currentPanoAngle + scope.fovAngle / 2;\n\t\t\t\tscope.leftX = scope.radius * Math.cos( scope.leftAngle );\n\t\t\t\tscope.leftY = scope.radius * Math.sin( scope.leftAngle );\n\t\t\t\tscope.rightX = scope.radius * Math.cos( scope.rightAngle );\n\t\t\t\tscope.rightY = scope.radius * Math.sin( scope.rightAngle );\n\t\t\t\tscope.indicatorD = \"M \" + scope.leftX + \" \" + scope.leftY + \" A \" + scope.radius + \" \" + scope.radius + \" 0 0 1 \" + scope.rightX + \" \" + scope.rightY;\n\n\t\t\t\tif ( scope.leftX && scope.leftY && scope.rightX && scope.rightY && scope.radius ) {\n\n\t\t\t\t\tindicator.setAttribute( \"d\", scope.indicatorD );\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tscope.addUpdateCallback( setIndicatorD );\n\n\t\t\tvar indicatorOnMouseEnter = function () {\n\n\t\t\t\tthis.style.opacity = \"1\";\n\n\t\t\t};\n\n\t\t\tvar indicatorOnMouseLeave = function () {\n\n\t\t\t\tthis.style.opacity = \"0.5\";\n\n\t\t\t};\n\n\t\t\tviewIndicatorDiv.addEventListener( \"mouseenter\", indicatorOnMouseEnter );\n\t\t\tviewIndicatorDiv.addEventListener( \"mouseleave\", indicatorOnMouseLeave );\n\t\t}\n\n\t\tthis.loadAsyncRequest( PANOLENS.DataImage.ViewIndicator, loadViewIndicator );\n\n\t};\n\n\t/**\n\t * Append custom control item to existing control bar\n\t * @param {object} [option={}] - Style object to overwirte default element style. It takes 'style', 'onTap' and 'group' properties.\n\t */\n\tPANOLENS.Viewer.prototype.appendControlItem = function ( option ) {\n\n\t\tvar item = this.widget.createCustomItem( option );\t\t\n\n\t\tif ( option.group === 'video' ) {\n\n\t\t\tthis.widget.videoElement.appendChild( item );\n\n\t\t} else {\n\n\t\t\tthis.widget.barElement.appendChild( item );\n\n\t\t}\n\n\t\treturn item;\n\n\t};\n\n} )();\n;(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\tvar createLayout = require('layout-bmfont-text')\n\tvar inherits = require('inherits')\n\tvar createIndices = require('quad-indices')\n\tvar buffer = require('three-buffer-vertex-data')\n\tvar assign = require('object-assign')\n\n\tvar vertices = require('./lib/vertices')\n\tvar utils = require('./lib/utils')\n\n\tvar Base = THREE.BufferGeometry\n\n\tmodule.exports = function createTextGeometry (opt) {\n\t  return new TextGeometry(opt)\n\t}\n\n\tfunction TextGeometry (opt) {\n\t  Base.call(this)\n\n\t  if (typeof opt === 'string') {\n\t    opt = { text: opt }\n\t  }\n\n\t  // use these as default values for any subsequent\n\t  // calls to update()\n\t  this._opt = assign({}, opt)\n\n\t  // also do an initial setup...\n\t  if (opt) this.update(opt)\n\t}\n\n\tinherits(TextGeometry, Base)\n\n\tTextGeometry.prototype.update = function (opt) {\n\t  if (typeof opt === 'string') {\n\t    opt = { text: opt }\n\t  }\n\n\t  // use constructor defaults\n\t  opt = assign({}, this._opt, opt)\n\n\t  if (!opt.font) {\n\t    throw new TypeError('must specify a { font } in options')\n\t  }\n\n\t  this.layout = createLayout(opt)\n\n\t  // get vec2 texcoords\n\t  var flipY = opt.flipY !== false\n\n\t  // the desired BMFont data\n\t  var font = opt.font\n\n\t  // determine texture size from font file\n\t  var texWidth = font.common.scaleW\n\t  var texHeight = font.common.scaleH\n\n\t  // get visible glyphs\n\t  var glyphs = this.layout.glyphs.filter(function (glyph) {\n\t    var bitmap = glyph.data\n\t    return bitmap.width * bitmap.height > 0\n\t  })\n\n\t  // provide visible glyphs for convenience\n\t  this.visibleGlyphs = glyphs\n\n\t  // get common vertex data\n\t  var positions = vertices.positions(glyphs)\n\t  var uvs = vertices.uvs(glyphs, texWidth, texHeight, flipY)\n\t  var indices = createIndices({\n\t    clockwise: true,\n\t    type: 'uint16',\n\t    count: glyphs.length\n\t  })\n\n\t  // update vertex data\n\t  buffer.index(this, indices, 1, 'uint16')\n\t  buffer.attr(this, 'position', positions, 2)\n\t  buffer.attr(this, 'uv', uvs, 2)\n\n\t  // update multipage data\n\t  if (!opt.multipage && 'page' in this.attributes) {\n\t    // disable multipage rendering\n\t    this.removeAttribute('page')\n\t  } else if (opt.multipage) {\n\t    var pages = vertices.pages(glyphs)\n\t    // enable multipage rendering\n\t    buffer.attr(this, 'page', pages, 1)\n\t  }\n\t}\n\n\tTextGeometry.prototype.computeBoundingSphere = function () {\n\t  if (this.boundingSphere === null) {\n\t    this.boundingSphere = new THREE.Sphere()\n\t  }\n\n\t  var positions = this.attributes.position.array\n\t  var itemSize = this.attributes.position.itemSize\n\t  if (!positions || !itemSize || positions.length < 2) {\n\t    this.boundingSphere.radius = 0\n\t    this.boundingSphere.center.set(0, 0, 0)\n\t    return\n\t  }\n\t  utils.computeSphere(positions, this.boundingSphere)\n\t  if (isNaN(this.boundingSphere.radius)) {\n\t    console.error('THREE.BufferGeometry.computeBoundingSphere(): ' +\n\t      'Computed radius is NaN. The ' +\n\t      '\"position\" attribute is likely to have NaN values.')\n\t  }\n\t}\n\n\tTextGeometry.prototype.computeBoundingBox = function () {\n\t  if (this.boundingBox === null) {\n\t    this.boundingBox = new THREE.Box3()\n\t  }\n\n\t  var bbox = this.boundingBox\n\t  var positions = this.attributes.position.array\n\t  var itemSize = this.attributes.position.itemSize\n\t  if (!positions || !itemSize || positions.length < 2) {\n\t    bbox.makeEmpty()\n\t    return\n\t  }\n\t  utils.computeBox(positions, bbox)\n\t}\n\n\t},{\"./lib/utils\":2,\"./lib/vertices\":3,\"inherits\":4,\"layout-bmfont-text\":5,\"object-assign\":26,\"quad-indices\":27,\"three-buffer-vertex-data\":31}],2:[function(require,module,exports){\n\tvar itemSize = 2\n\tvar box = { min: [0, 0], max: [0, 0] }\n\n\tfunction bounds (positions) {\n\t  var count = positions.length / itemSize\n\t  box.min[0] = positions[0]\n\t  box.min[1] = positions[1]\n\t  box.max[0] = positions[0]\n\t  box.max[1] = positions[1]\n\n\t  for (var i = 0; i < count; i++) {\n\t    var x = positions[i * itemSize + 0]\n\t    var y = positions[i * itemSize + 1]\n\t    box.min[0] = Math.min(x, box.min[0])\n\t    box.min[1] = Math.min(y, box.min[1])\n\t    box.max[0] = Math.max(x, box.max[0])\n\t    box.max[1] = Math.max(y, box.max[1])\n\t  }\n\t}\n\n\tmodule.exports.computeBox = function (positions, output) {\n\t  bounds(positions)\n\t  output.min.set(box.min[0], box.min[1], 0)\n\t  output.max.set(box.max[0], box.max[1], 0)\n\t}\n\n\tmodule.exports.computeSphere = function (positions, output) {\n\t  bounds(positions)\n\t  var minX = box.min[0]\n\t  var minY = box.min[1]\n\t  var maxX = box.max[0]\n\t  var maxY = box.max[1]\n\t  var width = maxX - minX\n\t  var height = maxY - minY\n\t  var length = Math.sqrt(width * width + height * height)\n\t  output.center.set(minX + width / 2, minY + height / 2, 0)\n\t  output.radius = length / 2\n\t}\n\n\t},{}],3:[function(require,module,exports){\n\tmodule.exports.pages = function pages (glyphs) {\n\t  var pages = new Float32Array(glyphs.length * 4 * 1)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var id = glyph.data.page || 0\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t    pages[i++] = id\n\t  })\n\t  return pages\n\t}\n\n\tmodule.exports.uvs = function uvs (glyphs, texWidth, texHeight, flipY) {\n\t  var uvs = new Float32Array(glyphs.length * 4 * 2)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var bitmap = glyph.data\n\t    var bw = (bitmap.x + bitmap.width)\n\t    var bh = (bitmap.y + bitmap.height)\n\n\t    // top left position\n\t    var u0 = bitmap.x / texWidth\n\t    var v1 = bitmap.y / texHeight\n\t    var u1 = bw / texWidth\n\t    var v0 = bh / texHeight\n\n\t    if (flipY) {\n\t      v1 = (texHeight - bitmap.y) / texHeight\n\t      v0 = (texHeight - bh) / texHeight\n\t    }\n\n\t    // BL\n\t    uvs[i++] = u0\n\t    uvs[i++] = v1\n\t    // TL\n\t    uvs[i++] = u0\n\t    uvs[i++] = v0\n\t    // TR\n\t    uvs[i++] = u1\n\t    uvs[i++] = v0\n\t    // BR\n\t    uvs[i++] = u1\n\t    uvs[i++] = v1\n\t  })\n\t  return uvs\n\t}\n\n\tmodule.exports.positions = function positions (glyphs) {\n\t  var positions = new Float32Array(glyphs.length * 4 * 2)\n\t  var i = 0\n\t  glyphs.forEach(function (glyph) {\n\t    var bitmap = glyph.data\n\n\t    // bottom left position\n\t    var x = glyph.position[0] + bitmap.xoffset\n\t    var y = glyph.position[1] + bitmap.yoffset\n\n\t    // quad size\n\t    var w = bitmap.width\n\t    var h = bitmap.height\n\n\t    // BL\n\t    positions[i++] = x\n\t    positions[i++] = y\n\t    // TL\n\t    positions[i++] = x\n\t    positions[i++] = y + h\n\t    // TR\n\t    positions[i++] = x + w\n\t    positions[i++] = y + h\n\t    // BR\n\t    positions[i++] = x + w\n\t    positions[i++] = y\n\t  })\n\t  return positions\n\t}\n\n\t},{}],4:[function(require,module,exports){\n\tif (typeof Object.create === 'function') {\n\t  // implementation from standard node.js 'util' module\n\t  module.exports = function inherits(ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    ctor.prototype = Object.create(superCtor.prototype, {\n\t      constructor: {\n\t        value: ctor,\n\t        enumerable: false,\n\t        writable: true,\n\t        configurable: true\n\t      }\n\t    });\n\t  };\n\t} else {\n\t  // old school shim for old browsers\n\t  module.exports = function inherits(ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    var TempCtor = function () {}\n\t    TempCtor.prototype = superCtor.prototype\n\t    ctor.prototype = new TempCtor()\n\t    ctor.prototype.constructor = ctor\n\t  }\n\t}\n\n\t},{}],5:[function(require,module,exports){\n\tvar wordWrap = require('word-wrapper')\n\tvar xtend = require('xtend')\n\tvar findChar = require('indexof-property')('id')\n\tvar number = require('as-number')\n\n\tvar X_HEIGHTS = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z']\n\tvar M_WIDTHS = ['m', 'w']\n\tvar CAP_HEIGHTS = ['H', 'I', 'N', 'E', 'F', 'K', 'L', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']\n\n\n\tvar TAB_ID = '\\t'.charCodeAt(0)\n\tvar SPACE_ID = ' '.charCodeAt(0)\n\tvar ALIGN_LEFT = 0, \n\t    ALIGN_CENTER = 1, \n\t    ALIGN_RIGHT = 2\n\n\tmodule.exports = function createLayout(opt) {\n\t  return new TextLayout(opt)\n\t}\n\n\tfunction TextLayout(opt) {\n\t  this.glyphs = []\n\t  this._measure = this.computeMetrics.bind(this)\n\t  this.update(opt)\n\t}\n\n\tTextLayout.prototype.update = function(opt) {\n\t  opt = xtend({\n\t    measure: this._measure\n\t  }, opt)\n\t  this._opt = opt\n\t  this._opt.tabSize = number(this._opt.tabSize, 4)\n\n\t  if (!opt.font)\n\t    throw new Error('must provide a valid bitmap font')\n\n\t  var glyphs = this.glyphs\n\t  var text = opt.text||'' \n\t  var font = opt.font\n\t  this._setupSpaceGlyphs(font)\n\t  \n\t  var lines = wordWrap.lines(text, opt)\n\t  var minWidth = opt.width || 0\n\n\t  //clear glyphs\n\t  glyphs.length = 0\n\n\t  //get max line width\n\t  var maxLineWidth = lines.reduce(function(prev, line) {\n\t    return Math.max(prev, line.width, minWidth)\n\t  }, 0)\n\n\t  //the pen position\n\t  var x = 0\n\t  var y = 0\n\t  var lineHeight = number(opt.lineHeight, font.common.lineHeight)\n\t  var baseline = font.common.base\n\t  var descender = lineHeight-baseline\n\t  var letterSpacing = opt.letterSpacing || 0\n\t  var height = lineHeight * lines.length - descender\n\t  var align = getAlignType(this._opt.align)\n\n\t  //draw text along baseline\n\t  y -= height\n\t  \n\t  //the metrics for this text layout\n\t  this._width = maxLineWidth\n\t  this._height = height\n\t  this._descender = lineHeight - baseline\n\t  this._baseline = baseline\n\t  this._xHeight = getXHeight(font)\n\t  this._capHeight = getCapHeight(font)\n\t  this._lineHeight = lineHeight\n\t  this._ascender = lineHeight - descender - this._xHeight\n\t    \n\t  //layout each glyph\n\t  var self = this\n\t  lines.forEach(function(line, lineIndex) {\n\t    var start = line.start\n\t    var end = line.end\n\t    var lineWidth = line.width\n\t    var lastGlyph\n\t    \n\t    //for each glyph in that line...\n\t    for (var i=start; i<end; i++) {\n\t      var id = text.charCodeAt(i)\n\t      var glyph = self.getGlyph(font, id)\n\t      if (glyph) {\n\t        if (lastGlyph) \n\t          x += getKerning(font, lastGlyph.id, glyph.id)\n\n\t        var tx = x\n\t        if (align === ALIGN_CENTER) \n\t          tx += (maxLineWidth-lineWidth)/2\n\t        else if (align === ALIGN_RIGHT)\n\t          tx += (maxLineWidth-lineWidth)\n\n\t        glyphs.push({\n\t          position: [tx, y],\n\t          data: glyph,\n\t          index: i,\n\t          line: lineIndex\n\t        })  \n\n\t        //move pen forward\n\t        x += glyph.xadvance + letterSpacing\n\t        lastGlyph = glyph\n\t      }\n\t    }\n\n\t    //next line down\n\t    y += lineHeight\n\t    x = 0\n\t  })\n\t  this._linesTotal = lines.length;\n\t}\n\n\tTextLayout.prototype._setupSpaceGlyphs = function(font) {\n\t  //These are fallbacks, when the font doesn't include\n\t  //' ' or '\\t' glyphs\n\t  this._fallbackSpaceGlyph = null\n\t  this._fallbackTabGlyph = null\n\n\t  if (!font.chars || font.chars.length === 0)\n\t    return\n\n\t  //try to get space glyph\n\t  //then fall back to the 'm' or 'w' glyphs\n\t  //then fall back to the first glyph available\n\t  var space = getGlyphById(font, SPACE_ID) \n\t          || getMGlyph(font) \n\t          || font.chars[0]\n\n\t  //and create a fallback for tab\n\t  var tabWidth = this._opt.tabSize * space.xadvance\n\t  this._fallbackSpaceGlyph = space\n\t  this._fallbackTabGlyph = xtend(space, {\n\t    x: 0, y: 0, xadvance: tabWidth, id: TAB_ID, \n\t    xoffset: 0, yoffset: 0, width: 0, height: 0\n\t  })\n\t}\n\n\tTextLayout.prototype.getGlyph = function(font, id) {\n\t  var glyph = getGlyphById(font, id)\n\t  if (glyph)\n\t    return glyph\n\t  else if (id === TAB_ID) \n\t    return this._fallbackTabGlyph\n\t  else if (id === SPACE_ID) \n\t    return this._fallbackSpaceGlyph\n\t  return null\n\t}\n\n\tTextLayout.prototype.computeMetrics = function(text, start, end, width) {\n\t  var letterSpacing = this._opt.letterSpacing || 0\n\t  var font = this._opt.font\n\t  var curPen = 0\n\t  var curWidth = 0\n\t  var count = 0\n\t  var glyph\n\t  var lastGlyph\n\n\t  if (!font.chars || font.chars.length === 0) {\n\t    return {\n\t      start: start,\n\t      end: start,\n\t      width: 0\n\t    }\n\t  }\n\n\t  end = Math.min(text.length, end)\n\t  for (var i=start; i < end; i++) {\n\t    var id = text.charCodeAt(i)\n\t    var glyph = this.getGlyph(font, id)\n\n\t    if (glyph) {\n\t      //move pen forward\n\t      var xoff = glyph.xoffset\n\t      var kern = lastGlyph ? getKerning(font, lastGlyph.id, glyph.id) : 0\n\t      curPen += kern\n\n\t      var nextPen = curPen + glyph.xadvance + letterSpacing\n\t      var nextWidth = curPen + glyph.width\n\n\t      //we've hit our limit; we can't move onto the next glyph\n\t      if (nextWidth >= width || nextPen >= width)\n\t        break\n\n\t      //otherwise continue along our line\n\t      curPen = nextPen\n\t      curWidth = nextWidth\n\t      lastGlyph = glyph\n\t    }\n\t    count++\n\t  }\n\t  \n\t  //make sure rightmost edge lines up with rendered glyphs\n\t  if (lastGlyph)\n\t    curWidth += lastGlyph.xoffset\n\n\t  return {\n\t    start: start,\n\t    end: start + count,\n\t    width: curWidth\n\t  }\n\t}\n\n\t//getters for the private vars\n\t;['width', 'height', \n\t  'descender', 'ascender',\n\t  'xHeight', 'baseline',\n\t  'capHeight',\n\t  'lineHeight' ].forEach(addGetter)\n\n\tfunction addGetter(name) {\n\t  Object.defineProperty(TextLayout.prototype, name, {\n\t    get: wrapper(name),\n\t    configurable: true\n\t  })\n\t}\n\n\t//create lookups for private vars\n\tfunction wrapper(name) {\n\t  return (new Function([\n\t    'return function '+name+'() {',\n\t    '  return this._'+name,\n\t    '}'\n\t  ].join('\\n')))()\n\t}\n\n\tfunction getGlyphById(font, id) {\n\t  if (!font.chars || font.chars.length === 0)\n\t    return null\n\n\t  var glyphIdx = findChar(font.chars, id)\n\t  if (glyphIdx >= 0)\n\t    return font.chars[glyphIdx]\n\t  return null\n\t}\n\n\tfunction getXHeight(font) {\n\t  for (var i=0; i<X_HEIGHTS.length; i++) {\n\t    var id = X_HEIGHTS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) \n\t      return font.chars[idx].height\n\t  }\n\t  return 0\n\t}\n\n\tfunction getMGlyph(font) {\n\t  for (var i=0; i<M_WIDTHS.length; i++) {\n\t    var id = M_WIDTHS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) \n\t      return font.chars[idx]\n\t  }\n\t  return 0\n\t}\n\n\tfunction getCapHeight(font) {\n\t  for (var i=0; i<CAP_HEIGHTS.length; i++) {\n\t    var id = CAP_HEIGHTS[i].charCodeAt(0)\n\t    var idx = findChar(font.chars, id)\n\t    if (idx >= 0) \n\t      return font.chars[idx].height\n\t  }\n\t  return 0\n\t}\n\n\tfunction getKerning(font, left, right) {\n\t  if (!font.kernings || font.kernings.length === 0)\n\t    return 0\n\n\t  var table = font.kernings\n\t  for (var i=0; i<table.length; i++) {\n\t    var kern = table[i]\n\t    if (kern.first === left && kern.second === right)\n\t      return kern.amount\n\t  }\n\t  return 0\n\t}\n\n\tfunction getAlignType(align) {\n\t  if (align === 'center')\n\t    return ALIGN_CENTER\n\t  else if (align === 'right')\n\t    return ALIGN_RIGHT\n\t  return ALIGN_LEFT\n\t}\n\t},{\"as-number\":6,\"indexof-property\":7,\"word-wrapper\":8,\"xtend\":9}],6:[function(require,module,exports){\n\tmodule.exports = function numtype(num, def) {\n\t  return typeof num === 'number'\n\t    ? num \n\t    : (typeof def === 'number' ? def : 0)\n\t}\n\t},{}],7:[function(require,module,exports){\n\tmodule.exports = function compile(property) {\n\t  if (!property || typeof property !== 'string')\n\t    throw new Error('must specify property for indexof search')\n\n\t  return new Function('array', 'value', 'start', [\n\t    'start = start || 0',\n\t    'for (var i=start; i<array.length; i++)',\n\t    '  if (array[i][\"' + property +'\"] === value)',\n\t    '      return i',\n\t    'return -1'\n\t  ].join('\\n'))\n\t}\n\t},{}],8:[function(require,module,exports){\n\tvar newline = /\\n/\n\tvar newlineChar = '\\n'\n\tvar whitespace = /\\s/\n\n\tmodule.exports = function(text, opt) {\n\t    var lines = module.exports.lines(text, opt)\n\t    return lines.map(function(line) {\n\t        return text.substring(line.start, line.end)\n\t    }).join('\\n')\n\t}\n\n\tmodule.exports.lines = function wordwrap(text, opt) {\n\t    opt = opt||{}\n\n\t    //zero width results in nothing visible\n\t    if (opt.width === 0 && opt.mode !== 'nowrap') \n\t        return []\n\n\t    text = text||''\n\t    var width = typeof opt.width === 'number' ? opt.width : Number.MAX_VALUE\n\t    var start = Math.max(0, opt.start||0)\n\t    var end = typeof opt.end === 'number' ? opt.end : text.length\n\t    var mode = opt.mode\n\n\t    var measure = opt.measure || monospace\n\t    if (mode === 'pre')\n\t        return pre(measure, text, start, end, width)\n\t    else\n\t        return greedy(measure, text, start, end, width, mode)\n\t}\n\n\tfunction idxOf(text, chr, start, end) {\n\t    var idx = text.indexOf(chr, start)\n\t    if (idx === -1 || idx > end)\n\t        return end\n\t    return idx\n\t}\n\n\tfunction isWhitespace(chr) {\n\t    return whitespace.test(chr)\n\t}\n\n\tfunction pre(measure, text, start, end, width) {\n\t    var lines = []\n\t    var lineStart = start\n\t    for (var i=start; i<end && i<text.length; i++) {\n\t        var chr = text.charAt(i)\n\t        var isNewline = newline.test(chr)\n\n\t        //If we've reached a newline, then step down a line\n\t        //Or if we've reached the EOF\n\t        if (isNewline || i===end-1) {\n\t            var lineEnd = isNewline ? i : i+1\n\t            var measured = measure(text, lineStart, lineEnd, width)\n\t            lines.push(measured)\n\t            \n\t            lineStart = i+1\n\t        }\n\t    }\n\t    return lines\n\t}\n\n\tfunction greedy(measure, text, start, end, width, mode) {\n\t    //A greedy word wrapper based on LibGDX algorithm\n\t    //https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/BitmapFontCache.java\n\t    var lines = []\n\n\t    var testWidth = width\n\t    //if 'nowrap' is specified, we only wrap on newline chars\n\t    if (mode === 'nowrap')\n\t        testWidth = Number.MAX_VALUE\n\n\t    while (start < end && start < text.length) {\n\t        //get next newline position\n\t        var newLine = idxOf(text, newlineChar, start, end)\n\n\t        //eat whitespace at start of line\n\t        while (start < newLine) {\n\t            if (!isWhitespace( text.charAt(start) ))\n\t                break\n\t            start++\n\t        }\n\n\t        //determine visible # of glyphs for the available width\n\t        var measured = measure(text, start, newLine, testWidth)\n\n\t        var lineEnd = start + (measured.end-measured.start)\n\t        var nextStart = lineEnd + newlineChar.length\n\n\t        //if we had to cut the line before the next newline...\n\t        if (lineEnd < newLine) {\n\t            //find char to break on\n\t            while (lineEnd > start) {\n\t                if (isWhitespace(text.charAt(lineEnd)))\n\t                    break\n\t                lineEnd--\n\t            }\n\t            if (lineEnd === start) {\n\t                if (nextStart > start + newlineChar.length) nextStart--\n\t                lineEnd = nextStart // If no characters to break, show all.\n\t            } else {\n\t                nextStart = lineEnd\n\t                //eat whitespace at end of line\n\t                while (lineEnd > start) {\n\t                    if (!isWhitespace(text.charAt(lineEnd - newlineChar.length)))\n\t                        break\n\t                    lineEnd--\n\t                }\n\t            }\n\t        }\n\t        if (lineEnd >= start) {\n\t            var result = measure(text, start, lineEnd, testWidth)\n\t            lines.push(result)\n\t        }\n\t        start = nextStart\n\t    }\n\t    return lines\n\t}\n\n\t//determines the visible number of glyphs within a given width\n\tfunction monospace(text, start, end, width) {\n\t    var glyphs = Math.min(width, end-start)\n\t    return {\n\t        start: start,\n\t        end: start+glyphs\n\t    }\n\t}\n\t},{}],9:[function(require,module,exports){\n\tmodule.exports = extend\n\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n\tfunction extend() {\n\t    var target = {}\n\n\t    for (var i = 0; i < arguments.length; i++) {\n\t        var source = arguments[i]\n\n\t        for (var key in source) {\n\t            if (hasOwnProperty.call(source, key)) {\n\t                target[key] = source[key]\n\t            }\n\t        }\n\t    }\n\n\t    return target\n\t}\n\n\t},{}],10:[function(require,module,exports){\n\t(function (Buffer){\n\tvar xhr = require('xhr')\n\tvar noop = function(){}\n\tvar parseASCII = require('parse-bmfont-ascii')\n\tvar parseXML = require('parse-bmfont-xml')\n\tvar readBinary = require('parse-bmfont-binary')\n\tvar isBinaryFormat = require('./lib/is-binary')\n\tvar xtend = require('xtend')\n\n\tvar xml2 = (function hasXML2() {\n\t  return window.XMLHttpRequest && \"withCredentials\" in new XMLHttpRequest\n\t})()\n\n\tmodule.exports = function(opt, cb) {\n\t  cb = typeof cb === 'function' ? cb : noop\n\n\t  if (typeof opt === 'string')\n\t    opt = { uri: opt }\n\t  else if (!opt)\n\t    opt = {}\n\n\t  var expectBinary = opt.binary\n\t  if (expectBinary)\n\t    opt = getBinaryOpts(opt)\n\n\t  xhr(opt, function(err, res, body) {\n\t    if (err)\n\t      return cb(err)\n\t    if (!/^2/.test(res.statusCode))\n\t      return cb(new Error('http status code: '+res.statusCode))\n\t    if (!body)\n\t      return cb(new Error('no body result'))\n\n\t    var binary = false \n\n\t    //if the response type is an array buffer,\n\t    //we need to convert it into a regular Buffer object\n\t    if (isArrayBuffer(body)) {\n\t      var array = new Uint8Array(body)\n\t      body = new Buffer(array, 'binary')\n\t    }\n\n\t    //now check the string/Buffer response\n\t    //and see if it has a binary BMF header\n\t    if (isBinaryFormat(body)) {\n\t      binary = true\n\t      //if we have a string, turn it into a Buffer\n\t      if (typeof body === 'string') \n\t        body = new Buffer(body, 'binary')\n\t    } \n\n\t    //we are not parsing a binary format, just ASCII/XML/etc\n\t    if (!binary) {\n\t      //might still be a buffer if responseType is 'arraybuffer'\n\t      if (Buffer.isBuffer(body))\n\t        body = body.toString(opt.encoding)\n\t      body = body.trim()\n\t    }\n\n\t    var result\n\t    try {\n\t      var type = res.headers['content-type']\n\t      if (binary)\n\t        result = readBinary(body)\n\t      else if (/json/.test(type) || body.charAt(0) === '{')\n\t        result = JSON.parse(body)\n\t      else if (/xml/.test(type)  || body.charAt(0) === '<')\n\t        result = parseXML(body)\n\t      else\n\t        result = parseASCII(body)\n\t    } catch (e) {\n\t      cb(new Error('error parsing font '+e.message))\n\t      cb = noop\n\t    }\n\t    cb(null, result)\n\t  })\n\t}\n\n\tfunction isArrayBuffer(arr) {\n\t  var str = Object.prototype.toString\n\t  return str.call(arr) === '[object ArrayBuffer]'\n\t}\n\n\tfunction getBinaryOpts(opt) {\n\t  //IE10+ and other modern browsers support array buffers\n\t  if (xml2)\n\t    return xtend(opt, { responseType: 'arraybuffer' })\n\t  \n\t  if (typeof window.XMLHttpRequest === 'undefined')\n\t    throw new Error('your browser does not support XHR loading')\n\n\t  //IE9 and XML1 browsers could still use an override\n\t  var req = new window.XMLHttpRequest()\n\t  req.overrideMimeType('text/plain; charset=x-user-defined')\n\t  return xtend({\n\t    xhr: req\n\t  }, opt)\n\t}\n\t}).call(this,require(\"buffer\").Buffer)\n\t},{\"./lib/is-binary\":11,\"buffer\":37,\"parse-bmfont-ascii\":13,\"parse-bmfont-binary\":14,\"parse-bmfont-xml\":15,\"xhr\":18,\"xtend\":25}],11:[function(require,module,exports){\n\t(function (Buffer){\n\tvar equal = require('buffer-equal')\n\tvar HEADER = new Buffer([66, 77, 70, 3])\n\n\tmodule.exports = function(buf) {\n\t  if (typeof buf === 'string')\n\t    return buf.substring(0, 3) === 'BMF'\n\t  return buf.length > 4 && equal(buf.slice(0, 4), HEADER)\n\t}\n\t}).call(this,require(\"buffer\").Buffer)\n\t},{\"buffer\":37,\"buffer-equal\":12}],12:[function(require,module,exports){\n\tvar Buffer = require('buffer').Buffer; // for use with browserify\n\n\tmodule.exports = function (a, b) {\n\t    if (!Buffer.isBuffer(a)) return undefined;\n\t    if (!Buffer.isBuffer(b)) return undefined;\n\t    if (typeof a.equals === 'function') return a.equals(b);\n\t    if (a.length !== b.length) return false;\n\t    \n\t    for (var i = 0; i < a.length; i++) {\n\t        if (a[i] !== b[i]) return false;\n\t    }\n\t    \n\t    return true;\n\t};\n\n\t},{\"buffer\":37}],13:[function(require,module,exports){\n\tmodule.exports = function parseBMFontAscii(data) {\n\t  if (!data)\n\t    throw new Error('no data provided')\n\t  data = data.toString().trim()\n\n\t  var output = {\n\t    pages: [],\n\t    chars: [],\n\t    kernings: []\n\t  }\n\n\t  var lines = data.split(/\\r\\n?|\\n/g)\n\n\t  if (lines.length === 0)\n\t    throw new Error('no data in BMFont file')\n\n\t  for (var i = 0; i < lines.length; i++) {\n\t    var lineData = splitLine(lines[i], i)\n\t    if (!lineData) //skip empty lines\n\t      continue\n\n\t    if (lineData.key === 'page') {\n\t      if (typeof lineData.data.id !== 'number')\n\t        throw new Error('malformed file at line ' + i + ' -- needs page id=N')\n\t      if (typeof lineData.data.file !== 'string')\n\t        throw new Error('malformed file at line ' + i + ' -- needs page file=\"path\"')\n\t      output.pages[lineData.data.id] = lineData.data.file\n\t    } else if (lineData.key === 'chars' || lineData.key === 'kernings') {\n\t      //... do nothing for these two ...\n\t    } else if (lineData.key === 'char') {\n\t      output.chars.push(lineData.data)\n\t    } else if (lineData.key === 'kerning') {\n\t      output.kernings.push(lineData.data)\n\t    } else {\n\t      output[lineData.key] = lineData.data\n\t    }\n\t  }\n\n\t  return output\n\t}\n\n\tfunction splitLine(line, idx) {\n\t  line = line.replace(/\\t+/g, ' ').trim()\n\t  if (!line)\n\t    return null\n\n\t  var space = line.indexOf(' ')\n\t  if (space === -1) \n\t    throw new Error(\"no named row at line \" + idx)\n\n\t  var key = line.substring(0, space)\n\n\t  line = line.substring(space + 1)\n\t  //clear \"letter\" field as it is non-standard and\n\t  //requires additional complexity to parse \" / = symbols\n\t  line = line.replace(/letter=[\\'\\\"]\\S+[\\'\\\"]/gi, '')  \n\t  line = line.split(\"=\")\n\t  line = line.map(function(str) {\n\t    return str.trim().match((/(\".*?\"|[^\"\\s]+)+(?=\\s*|\\s*$)/g))\n\t  })\n\n\t  var data = []\n\t  for (var i = 0; i < line.length; i++) {\n\t    var dt = line[i]\n\t    if (i === 0) {\n\t      data.push({\n\t        key: dt[0],\n\t        data: \"\"\n\t      })\n\t    } else if (i === line.length - 1) {\n\t      data[data.length - 1].data = parseData(dt[0])\n\t    } else {\n\t      data[data.length - 1].data = parseData(dt[0])\n\t      data.push({\n\t        key: dt[1],\n\t        data: \"\"\n\t      })\n\t    }\n\t  }\n\n\t  var out = {\n\t    key: key,\n\t    data: {}\n\t  }\n\n\t  data.forEach(function(v) {\n\t    out.data[v.key] = v.data;\n\t  })\n\n\t  return out\n\t}\n\n\tfunction parseData(data) {\n\t  if (!data || data.length === 0)\n\t    return \"\"\n\n\t  if (data.indexOf('\"') === 0 || data.indexOf(\"'\") === 0)\n\t    return data.substring(1, data.length - 1)\n\t  if (data.indexOf(',') !== -1)\n\t    return parseIntList(data)\n\t  return parseInt(data, 10)\n\t}\n\n\tfunction parseIntList(data) {\n\t  return data.split(',').map(function(val) {\n\t    return parseInt(val, 10)\n\t  })\n\t}\n\t},{}],14:[function(require,module,exports){\n\tvar HEADER = [66, 77, 70]\n\n\tmodule.exports = function readBMFontBinary(buf) {\n\t  if (buf.length < 6)\n\t    throw new Error('invalid buffer length for BMFont')\n\n\t  var header = HEADER.every(function(byte, i) {\n\t    return buf.readUInt8(i) === byte\n\t  })\n\n\t  if (!header)\n\t    throw new Error('BMFont missing BMF byte header')\n\n\t  var i = 3\n\t  var vers = buf.readUInt8(i++)\n\t  if (vers > 3)\n\t    throw new Error('Only supports BMFont Binary v3 (BMFont App v1.10)')\n\t  \n\t  var target = { kernings: [], chars: [] }\n\t  for (var b=0; b<5; b++)\n\t    i += readBlock(target, buf, i)\n\t  return target\n\t}\n\n\tfunction readBlock(target, buf, i) {\n\t  if (i > buf.length-1)\n\t    return 0\n\n\t  var blockID = buf.readUInt8(i++)\n\t  var blockSize = buf.readInt32LE(i)\n\t  i += 4\n\n\t  switch(blockID) {\n\t    case 1: \n\t      target.info = readInfo(buf, i)\n\t      break\n\t    case 2:\n\t      target.common = readCommon(buf, i)\n\t      break\n\t    case 3:\n\t      target.pages = readPages(buf, i, blockSize)\n\t      break\n\t    case 4:\n\t      target.chars = readChars(buf, i, blockSize)\n\t      break\n\t    case 5:\n\t      target.kernings = readKernings(buf, i, blockSize)\n\t      break\n\t  }\n\t  return 5 + blockSize\n\t}\n\n\tfunction readInfo(buf, i) {\n\t  var info = {}\n\t  info.size = buf.readInt16LE(i)\n\n\t  var bitField = buf.readUInt8(i+2)\n\t  info.smooth = (bitField >> 7) & 1\n\t  info.unicode = (bitField >> 6) & 1\n\t  info.italic = (bitField >> 5) & 1\n\t  info.bold = (bitField >> 4) & 1\n\t  \n\t  //fixedHeight is only mentioned in binary spec \n\t  if ((bitField >> 3) & 1)\n\t    info.fixedHeight = 1\n\t  \n\t  info.charset = buf.readUInt8(i+3) || ''\n\t  info.stretchH = buf.readUInt16LE(i+4)\n\t  info.aa = buf.readUInt8(i+6)\n\t  info.padding = [\n\t    buf.readInt8(i+7),\n\t    buf.readInt8(i+8),\n\t    buf.readInt8(i+9),\n\t    buf.readInt8(i+10)\n\t  ]\n\t  info.spacing = [\n\t    buf.readInt8(i+11),\n\t    buf.readInt8(i+12)\n\t  ]\n\t  info.outline = buf.readUInt8(i+13)\n\t  info.face = readStringNT(buf, i+14)\n\t  return info\n\t}\n\n\tfunction readCommon(buf, i) {\n\t  var common = {}\n\t  common.lineHeight = buf.readUInt16LE(i)\n\t  common.base = buf.readUInt16LE(i+2)\n\t  common.scaleW = buf.readUInt16LE(i+4)\n\t  common.scaleH = buf.readUInt16LE(i+6)\n\t  common.pages = buf.readUInt16LE(i+8)\n\t  var bitField = buf.readUInt8(i+10)\n\t  common.packed = 0\n\t  common.alphaChnl = buf.readUInt8(i+11)\n\t  common.redChnl = buf.readUInt8(i+12)\n\t  common.greenChnl = buf.readUInt8(i+13)\n\t  common.blueChnl = buf.readUInt8(i+14)\n\t  return common\n\t}\n\n\tfunction readPages(buf, i, size) {\n\t  var pages = []\n\t  var text = readNameNT(buf, i)\n\t  var len = text.length+1\n\t  var count = size / len\n\t  for (var c=0; c<count; c++) {\n\t    pages[c] = buf.slice(i, i+text.length).toString('utf8')\n\t    i += len\n\t  }\n\t  return pages\n\t}\n\n\tfunction readChars(buf, i, blockSize) {\n\t  var chars = []\n\n\t  var count = blockSize / 20\n\t  for (var c=0; c<count; c++) {\n\t    var char = {}\n\t    var off = c*20\n\t    char.id = buf.readUInt32LE(i + 0 + off)\n\t    char.x = buf.readUInt16LE(i + 4 + off)\n\t    char.y = buf.readUInt16LE(i + 6 + off)\n\t    char.width = buf.readUInt16LE(i + 8 + off)\n\t    char.height = buf.readUInt16LE(i + 10 + off)\n\t    char.xoffset = buf.readInt16LE(i + 12 + off)\n\t    char.yoffset = buf.readInt16LE(i + 14 + off)\n\t    char.xadvance = buf.readInt16LE(i + 16 + off)\n\t    char.page = buf.readUInt8(i + 18 + off)\n\t    char.chnl = buf.readUInt8(i + 19 + off)\n\t    chars[c] = char\n\t  }\n\t  return chars\n\t}\n\n\tfunction readKernings(buf, i, blockSize) {\n\t  var kernings = []\n\t  var count = blockSize / 10\n\t  for (var c=0; c<count; c++) {\n\t    var kern = {}\n\t    var off = c*10\n\t    kern.first = buf.readUInt32LE(i + 0 + off)\n\t    kern.second = buf.readUInt32LE(i + 4 + off)\n\t    kern.amount = buf.readInt16LE(i + 8 + off)\n\t    kernings[c] = kern\n\t  }\n\t  return kernings\n\t}\n\n\tfunction readNameNT(buf, offset) {\n\t  var pos=offset\n\t  for (; pos<buf.length; pos++) {\n\t    if (buf[pos] === 0x00) \n\t      break\n\t  }\n\t  return buf.slice(offset, pos)\n\t}\n\n\tfunction readStringNT(buf, offset) {\n\t  return readNameNT(buf, offset).toString('utf8')\n\t}\n\t},{}],15:[function(require,module,exports){\n\tvar parseAttributes = require('./parse-attribs')\n\tvar parseFromString = require('xml-parse-from-string')\n\n\t//In some cases element.attribute.nodeName can return\n\t//all lowercase values.. so we need to map them to the correct \n\t//case\n\tvar NAME_MAP = {\n\t  scaleh: 'scaleH',\n\t  scalew: 'scaleW',\n\t  stretchh: 'stretchH',\n\t  lineheight: 'lineHeight',\n\t  alphachnl: 'alphaChnl',\n\t  redchnl: 'redChnl',\n\t  greenchnl: 'greenChnl',\n\t  bluechnl: 'blueChnl'\n\t}\n\n\tmodule.exports = function parse(data) {\n\t  data = data.toString()\n\t  \n\t  var xmlRoot = parseFromString(data)\n\t  var output = {\n\t    pages: [],\n\t    chars: [],\n\t    kernings: []\n\t  }\n\n\t  //get config settings\n\t  ;['info', 'common'].forEach(function(key) {\n\t    var element = xmlRoot.getElementsByTagName(key)[0]\n\t    if (element)\n\t      output[key] = parseAttributes(getAttribs(element))\n\t  })\n\n\t  //get page info\n\t  var pageRoot = xmlRoot.getElementsByTagName('pages')[0]\n\t  if (!pageRoot)\n\t    throw new Error('malformed file -- no <pages> element')\n\t  var pages = pageRoot.getElementsByTagName('page')\n\t  for (var i=0; i<pages.length; i++) {\n\t    var p = pages[i]\n\t    var id = parseInt(p.getAttribute('id'), 10)\n\t    var file = p.getAttribute('file')\n\t    if (isNaN(id))\n\t      throw new Error('malformed file -- page \"id\" attribute is NaN')\n\t    if (!file)\n\t      throw new Error('malformed file -- needs page \"file\" attribute')\n\t    output.pages[parseInt(id, 10)] = file\n\t  }\n\n\t  //get kernings / chars\n\t  ;['chars', 'kernings'].forEach(function(key) {\n\t    var element = xmlRoot.getElementsByTagName(key)[0]\n\t    if (!element)\n\t      return\n\t    var childTag = key.substring(0, key.length-1)\n\t    var children = element.getElementsByTagName(childTag)\n\t    for (var i=0; i<children.length; i++) {      \n\t      var child = children[i]\n\t      output[key].push(parseAttributes(getAttribs(child)))\n\t    }\n\t  })\n\t  return output\n\t}\n\n\tfunction getAttribs(element) {\n\t  var attribs = getAttribList(element)\n\t  return attribs.reduce(function(dict, attrib) {\n\t    var key = mapName(attrib.nodeName)\n\t    dict[key] = attrib.nodeValue\n\t    return dict\n\t  }, {})\n\t}\n\n\tfunction getAttribList(element) {\n\t  //IE8+ and modern browsers\n\t  var attribs = []\n\t  for (var i=0; i<element.attributes.length; i++)\n\t    attribs.push(element.attributes[i])\n\t  return attribs\n\t}\n\n\tfunction mapName(nodeName) {\n\t  return NAME_MAP[nodeName.toLowerCase()] || nodeName\n\t}\n\t},{\"./parse-attribs\":16,\"xml-parse-from-string\":17}],16:[function(require,module,exports){\n\t//Some versions of GlyphDesigner have a typo\n\t//that causes some bugs with parsing. \n\t//Need to confirm with recent version of the software\n\t//to see whether this is still an issue or not.\n\tvar GLYPH_DESIGNER_ERROR = 'chasrset'\n\n\tmodule.exports = function parseAttributes(obj) {\n\t  if (GLYPH_DESIGNER_ERROR in obj) {\n\t    obj['charset'] = obj[GLYPH_DESIGNER_ERROR]\n\t    delete obj[GLYPH_DESIGNER_ERROR]\n\t  }\n\n\t  for (var k in obj) {\n\t    if (k === 'face' || k === 'charset') \n\t      continue\n\t    else if (k === 'padding' || k === 'spacing')\n\t      obj[k] = parseIntList(obj[k])\n\t    else\n\t      obj[k] = parseInt(obj[k], 10) \n\t  }\n\t  return obj\n\t}\n\n\tfunction parseIntList(data) {\n\t  return data.split(',').map(function(val) {\n\t    return parseInt(val, 10)\n\t  })\n\t}\n\t},{}],17:[function(require,module,exports){\n\tmodule.exports = (function xmlparser() {\n\t  //common browsers\n\t  if (typeof window.DOMParser !== 'undefined') {\n\t    return function(str) {\n\t      var parser = new window.DOMParser()\n\t      return parser.parseFromString(str, 'application/xml')\n\t    }\n\t  } \n\n\t  //IE8 fallback\n\t  if (typeof window.ActiveXObject !== 'undefined'\n\t      && new window.ActiveXObject('Microsoft.XMLDOM')) {\n\t    return function(str) {\n\t      var xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\")\n\t      xmlDoc.async = \"false\"\n\t      xmlDoc.loadXML(str)\n\t      return xmlDoc\n\t    }\n\t  }\n\n\t  //last resort fallback\n\t  return function(str) {\n\t    var div = document.createElement('div')\n\t    div.innerHTML = str\n\t    return div\n\t  }\n\t})()\n\t},{}],18:[function(require,module,exports){\n\t\"use strict\";\n\tvar window = require(\"global/window\")\n\tvar once = require(\"once\")\n\tvar isFunction = require(\"is-function\")\n\tvar parseHeaders = require(\"parse-headers\")\n\tvar xtend = require(\"xtend\")\n\n\tmodule.exports = createXHR\n\tcreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\n\tcreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\n\tforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n\t    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n\t        options = initParams(uri, options, callback)\n\t        options.method = method.toUpperCase()\n\t        return _createXHR(options)\n\t    }\n\t})\n\n\tfunction forEachArray(array, iterator) {\n\t    for (var i = 0; i < array.length; i++) {\n\t        iterator(array[i])\n\t    }\n\t}\n\n\tfunction isEmpty(obj){\n\t    for(var i in obj){\n\t        if(obj.hasOwnProperty(i)) return false\n\t    }\n\t    return true\n\t}\n\n\tfunction initParams(uri, options, callback) {\n\t    var params = uri\n\n\t    if (isFunction(options)) {\n\t        callback = options\n\t        if (typeof uri === \"string\") {\n\t            params = {uri:uri}\n\t        }\n\t    } else {\n\t        params = xtend(options, {uri: uri})\n\t    }\n\n\t    params.callback = callback\n\t    return params\n\t}\n\n\tfunction createXHR(uri, options, callback) {\n\t    options = initParams(uri, options, callback)\n\t    return _createXHR(options)\n\t}\n\n\tfunction _createXHR(options) {\n\t    var callback = options.callback\n\t    if(typeof callback === \"undefined\"){\n\t        throw new Error(\"callback argument missing\")\n\t    }\n\t    callback = once(callback)\n\n\t    function readystatechange() {\n\t        if (xhr.readyState === 4) {\n\t            loadFunc()\n\t        }\n\t    }\n\n\t    function getBody() {\n\t        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n\t        var body = undefined\n\n\t        if (xhr.response) {\n\t            body = xhr.response\n\t        } else if (xhr.responseType === \"text\" || !xhr.responseType) {\n\t            body = xhr.responseText || xhr.responseXML\n\t        }\n\n\t        if (isJson) {\n\t            try {\n\t                body = JSON.parse(body)\n\t            } catch (e) {}\n\t        }\n\n\t        return body\n\t    }\n\n\t    var failureResponse = {\n\t                body: undefined,\n\t                headers: {},\n\t                statusCode: 0,\n\t                method: method,\n\t                url: uri,\n\t                rawRequest: xhr\n\t            }\n\n\t    function errorFunc(evt) {\n\t        clearTimeout(timeoutTimer)\n\t        if(!(evt instanceof Error)){\n\t            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n\t        }\n\t        evt.statusCode = 0\n\t        callback(evt, failureResponse)\n\t    }\n\n\t    // will load the data & process the response in a special response object\n\t    function loadFunc() {\n\t        if (aborted) return\n\t        var status\n\t        clearTimeout(timeoutTimer)\n\t        if(options.useXDR && xhr.status===undefined) {\n\t            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n\t            status = 200\n\t        } else {\n\t            status = (xhr.status === 1223 ? 204 : xhr.status)\n\t        }\n\t        var response = failureResponse\n\t        var err = null\n\n\t        if (status !== 0){\n\t            response = {\n\t                body: getBody(),\n\t                statusCode: status,\n\t                method: method,\n\t                headers: {},\n\t                url: uri,\n\t                rawRequest: xhr\n\t            }\n\t            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n\t                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n\t            }\n\t        } else {\n\t            err = new Error(\"Internal XMLHttpRequest Error\")\n\t        }\n\t        callback(err, response, response.body)\n\n\t    }\n\n\t    var xhr = options.xhr || null\n\n\t    if (!xhr) {\n\t        if (options.cors || options.useXDR) {\n\t            xhr = new createXHR.XDomainRequest()\n\t        }else{\n\t            xhr = new createXHR.XMLHttpRequest()\n\t        }\n\t    }\n\n\t    var key\n\t    var aborted\n\t    var uri = xhr.url = options.uri || options.url\n\t    var method = xhr.method = options.method || \"GET\"\n\t    var body = options.body || options.data || null\n\t    var headers = xhr.headers = options.headers || {}\n\t    var sync = !!options.sync\n\t    var isJson = false\n\t    var timeoutTimer\n\n\t    if (\"json\" in options) {\n\t        isJson = true\n\t        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n\t        if (method !== \"GET\" && method !== \"HEAD\") {\n\t            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n\t            body = JSON.stringify(options.json)\n\t        }\n\t    }\n\n\t    xhr.onreadystatechange = readystatechange\n\t    xhr.onload = loadFunc\n\t    xhr.onerror = errorFunc\n\t    // IE9 must have onprogress be set to a unique function.\n\t    xhr.onprogress = function () {\n\t        // IE must die\n\t    }\n\t    xhr.ontimeout = errorFunc\n\t    xhr.open(method, uri, !sync, options.username, options.password)\n\t    //has to be after open\n\t    if(!sync) {\n\t        xhr.withCredentials = !!options.withCredentials\n\t    }\n\t    // Cannot set timeout with sync request\n\t    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n\t    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n\t    if (!sync && options.timeout > 0 ) {\n\t        timeoutTimer = setTimeout(function(){\n\t            aborted=true//IE9 may still call readystatechange\n\t            xhr.abort(\"timeout\")\n\t            var e = new Error(\"XMLHttpRequest timeout\")\n\t            e.code = \"ETIMEDOUT\"\n\t            errorFunc(e)\n\t        }, options.timeout )\n\t    }\n\n\t    if (xhr.setRequestHeader) {\n\t        for(key in headers){\n\t            if(headers.hasOwnProperty(key)){\n\t                xhr.setRequestHeader(key, headers[key])\n\t            }\n\t        }\n\t    } else if (options.headers && !isEmpty(options.headers)) {\n\t        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n\t    }\n\n\t    if (\"responseType\" in options) {\n\t        xhr.responseType = options.responseType\n\t    }\n\n\t    if (\"beforeSend\" in options &&\n\t        typeof options.beforeSend === \"function\"\n\t    ) {\n\t        options.beforeSend(xhr)\n\t    }\n\n\t    xhr.send(body)\n\n\t    return xhr\n\n\n\t}\n\n\tfunction noop() {}\n\n\t},{\"global/window\":19,\"is-function\":20,\"once\":21,\"parse-headers\":24,\"xtend\":25}],19:[function(require,module,exports){\n\t(function (global){\n\tif (typeof window !== \"undefined\") {\n\t    module.exports = window;\n\t} else if (typeof global !== \"undefined\") {\n\t    module.exports = global;\n\t} else if (typeof self !== \"undefined\"){\n\t    module.exports = self;\n\t} else {\n\t    module.exports = {};\n\t}\n\n\t}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\t},{}],20:[function(require,module,exports){\n\tmodule.exports = isFunction\n\n\tvar toString = Object.prototype.toString\n\n\tfunction isFunction (fn) {\n\t  var string = toString.call(fn)\n\t  return string === '[object Function]' ||\n\t    (typeof fn === 'function' && string !== '[object RegExp]') ||\n\t    (typeof window !== 'undefined' &&\n\t     // IE8 and below\n\t     (fn === window.setTimeout ||\n\t      fn === window.alert ||\n\t      fn === window.confirm ||\n\t      fn === window.prompt))\n\t};\n\n\t},{}],21:[function(require,module,exports){\n\tmodule.exports = once\n\n\tonce.proto = once(function () {\n\t  Object.defineProperty(Function.prototype, 'once', {\n\t    value: function () {\n\t      return once(this)\n\t    },\n\t    configurable: true\n\t  })\n\t})\n\n\tfunction once (fn) {\n\t  var called = false\n\t  return function () {\n\t    if (called) return\n\t    called = true\n\t    return fn.apply(this, arguments)\n\t  }\n\t}\n\n\t},{}],22:[function(require,module,exports){\n\tvar isFunction = require('is-function')\n\n\tmodule.exports = forEach\n\n\tvar toString = Object.prototype.toString\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty\n\n\tfunction forEach(list, iterator, context) {\n\t    if (!isFunction(iterator)) {\n\t        throw new TypeError('iterator must be a function')\n\t    }\n\n\t    if (arguments.length < 3) {\n\t        context = this\n\t    }\n\t    \n\t    if (toString.call(list) === '[object Array]')\n\t        forEachArray(list, iterator, context)\n\t    else if (typeof list === 'string')\n\t        forEachString(list, iterator, context)\n\t    else\n\t        forEachObject(list, iterator, context)\n\t}\n\n\tfunction forEachArray(array, iterator, context) {\n\t    for (var i = 0, len = array.length; i < len; i++) {\n\t        if (hasOwnProperty.call(array, i)) {\n\t            iterator.call(context, array[i], i, array)\n\t        }\n\t    }\n\t}\n\n\tfunction forEachString(string, iterator, context) {\n\t    for (var i = 0, len = string.length; i < len; i++) {\n\t        // no such thing as a sparse string.\n\t        iterator.call(context, string.charAt(i), i, string)\n\t    }\n\t}\n\n\tfunction forEachObject(object, iterator, context) {\n\t    for (var k in object) {\n\t        if (hasOwnProperty.call(object, k)) {\n\t            iterator.call(context, object[k], k, object)\n\t        }\n\t    }\n\t}\n\n\t},{\"is-function\":20}],23:[function(require,module,exports){\n\n\texports = module.exports = trim;\n\n\tfunction trim(str){\n\t  return str.replace(/^\\s*|\\s*$/g, '');\n\t}\n\n\texports.left = function(str){\n\t  return str.replace(/^\\s*/, '');\n\t};\n\n\texports.right = function(str){\n\t  return str.replace(/\\s*$/, '');\n\t};\n\n\t},{}],24:[function(require,module,exports){\n\tvar trim = require('trim')\n\t  , forEach = require('for-each')\n\t  , isArray = function(arg) {\n\t      return Object.prototype.toString.call(arg) === '[object Array]';\n\t    }\n\n\tmodule.exports = function (headers) {\n\t  if (!headers)\n\t    return {}\n\n\t  var result = {}\n\n\t  forEach(\n\t      trim(headers).split('\\n')\n\t    , function (row) {\n\t        var index = row.indexOf(':')\n\t          , key = trim(row.slice(0, index)).toLowerCase()\n\t          , value = trim(row.slice(index + 1))\n\n\t        if (typeof(result[key]) === 'undefined') {\n\t          result[key] = value\n\t        } else if (isArray(result[key])) {\n\t          result[key].push(value)\n\t        } else {\n\t          result[key] = [ result[key], value ]\n\t        }\n\t      }\n\t  )\n\n\t  return result\n\t}\n\t},{\"for-each\":22,\"trim\":23}],25:[function(require,module,exports){\n\targuments[4][9][0].apply(exports,arguments)\n\t},{\"dup\":9}],26:[function(require,module,exports){\n\t/* eslint-disable no-unused-vars */\n\t'use strict';\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n\tfunction toObject(val) {\n\t  if (val === null || val === undefined) {\n\t    throw new TypeError('Object.assign cannot be called with null or undefined');\n\t  }\n\n\t  return Object(val);\n\t}\n\n\tmodule.exports = Object.assign || function (target, source) {\n\t  var from;\n\t  var to = toObject(target);\n\t  var symbols;\n\n\t  for (var s = 1; s < arguments.length; s++) {\n\t    from = Object(arguments[s]);\n\n\t    for (var key in from) {\n\t      if (hasOwnProperty.call(from, key)) {\n\t        to[key] = from[key];\n\t      }\n\t    }\n\n\t    if (Object.getOwnPropertySymbols) {\n\t      symbols = Object.getOwnPropertySymbols(from);\n\t      for (var i = 0; i < symbols.length; i++) {\n\t        if (propIsEnumerable.call(from, symbols[i])) {\n\t          to[symbols[i]] = from[symbols[i]];\n\t        }\n\t      }\n\t    }\n\t  }\n\n\t  return to;\n\t};\n\n\t},{}],27:[function(require,module,exports){\n\tvar dtype = require('dtype')\n\tvar anArray = require('an-array')\n\tvar isBuffer = require('is-buffer')\n\n\tvar CW = [0, 2, 3]\n\tvar CCW = [2, 1, 3]\n\n\tmodule.exports = function createQuadElements(array, opt) {\n\t    //if user didn't specify an output array\n\t    if (!array || !(anArray(array) || isBuffer(array))) {\n\t        opt = array || {}\n\t        array = null\n\t    }\n\n\t    if (typeof opt === 'number') //backwards-compatible\n\t        opt = { count: opt }\n\t    else\n\t        opt = opt || {}\n\n\t    var type = typeof opt.type === 'string' ? opt.type : 'uint16'\n\t    var count = typeof opt.count === 'number' ? opt.count : 1\n\t    var start = (opt.start || 0) \n\n\t    var dir = opt.clockwise !== false ? CW : CCW,\n\t        a = dir[0], \n\t        b = dir[1],\n\t        c = dir[2]\n\n\t    var numIndices = count * 6\n\n\t    var indices = array || new (dtype(type))(numIndices)\n\t    for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n\t        var x = i + start\n\t        indices[x + 0] = j + 0\n\t        indices[x + 1] = j + 1\n\t        indices[x + 2] = j + 2\n\t        indices[x + 3] = j + a\n\t        indices[x + 4] = j + b\n\t        indices[x + 5] = j + c\n\t    }\n\t    return indices\n\t}\n\t},{\"an-array\":28,\"dtype\":29,\"is-buffer\":30}],28:[function(require,module,exports){\n\tvar str = Object.prototype.toString\n\n\tmodule.exports = anArray\n\n\tfunction anArray(arr) {\n\t  return (\n\t       arr.BYTES_PER_ELEMENT\n\t    && str.call(arr.buffer) === '[object ArrayBuffer]'\n\t    || Array.isArray(arr)\n\t  )\n\t}\n\n\t},{}],29:[function(require,module,exports){\n\tmodule.exports = function(dtype) {\n\t  switch (dtype) {\n\t    case 'int8':\n\t      return Int8Array\n\t    case 'int16':\n\t      return Int16Array\n\t    case 'int32':\n\t      return Int32Array\n\t    case 'uint8':\n\t      return Uint8Array\n\t    case 'uint16':\n\t      return Uint16Array\n\t    case 'uint32':\n\t      return Uint32Array\n\t    case 'float32':\n\t      return Float32Array\n\t    case 'float64':\n\t      return Float64Array\n\t    case 'array':\n\t      return Array\n\t    case 'uint8_clamped':\n\t      return Uint8ClampedArray\n\t  }\n\t}\n\n\t},{}],30:[function(require,module,exports){\n\t/**\n\t * Determine if an object is Buffer\n\t *\n\t * Author:   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * License:  MIT\n\t *\n\t * `npm install is-buffer`\n\t */\n\n\tmodule.exports = function (obj) {\n\t  return !!(obj != null &&\n\t    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)\n\t      (obj.constructor &&\n\t      typeof obj.constructor.isBuffer === 'function' &&\n\t      obj.constructor.isBuffer(obj))\n\t    ))\n\t}\n\n\t},{}],31:[function(require,module,exports){\n\tvar flatten = require('flatten-vertex-data')\n\n\tmodule.exports.attr = setAttribute\n\tmodule.exports.index = setIndex\n\n\tfunction setIndex (geometry, data, itemSize, dtype) {\n\t  if (typeof itemSize !== 'number') itemSize = 1\n\t  if (typeof dtype !== 'number') dtype = 'uint16'\n\n\t  var isR69 = !geometry.index && typeof geometry.setIndex !== 'function'\n\t  var attrib = isR69 ? geometry.getAttribute('index') : geometry.index\n\t  var newAttrib = updateAttribute(attrib, data, itemSize, dtype)\n\t  if (newAttrib) {\n\t    if (isR69) geometry.addAttribute('index', newAttrib)\n\t    else geometry.index = newAttrib\n\t  }\n\t}\n\n\tfunction setAttribute (geometry, key, data, itemSize, dtype) {\n\t  if (typeof itemSize !== 'number') itemSize = 3\n\t  if (typeof dtype !== 'number') dtype = 'float32'\n\t  if (Array.isArray(data) &&\n\t    Array.isArray(data[0]) &&\n\t    data[0].length !== itemSize) {\n\t    throw new Error('Nested vertex array has unexpected size; expected ' +\n\t      itemSize + ' but found ' + data[0].length)\n\t  }\n\n\t  var attrib = geometry.getAttribute(key)\n\t  var newAttrib = updateAttribute(attrib, data, itemSize, dtype)\n\t  if (newAttrib) {\n\t    geometry.addAttribute(key, newAttrib)\n\t  }\n\t}\n\n\tfunction updateAttribute (attrib, data, itemSize, dtype) {\n\t  data = data || []\n\t  if (!attrib || rebuildAttribute(attrib, data, itemSize)) {\n\t    // create a new array with desired type\n\t    data = flatten(data, dtype)\n\t    attrib = new THREE.BufferAttribute(data, itemSize)\n\t    attrib.needsUpdate = true\n\t    return attrib\n\t  } else {\n\t    // copy data into the existing array\n\t    flatten(data, attrib.array)\n\t    attrib.needsUpdate = true\n\t    return null\n\t  }\n\t}\n\n\t// Test whether the attribute needs to be re-created,\n\t// returns false if we can re-use it as-is.\n\tfunction rebuildAttribute (attrib, data, itemSize) {\n\t  if (attrib.itemSize !== itemSize) return true\n\t  if (!attrib.array) return true\n\t  var attribLength = attrib.array.length\n\t  if (Array.isArray(data) && Array.isArray(data[0])) {\n\t    // [ [ x, y, z ] ]\n\t    return attribLength !== data.length * itemSize\n\t  } else {\n\t    // [ x, y, z ]\n\t    return attribLength !== data.length\n\t  }\n\t}\n\n\t},{\"flatten-vertex-data\":32}],32:[function(require,module,exports){\n\t/*eslint new-cap:0*/\n\tvar dtype = require('dtype')\n\tmodule.exports = flattenVertexData\n\tfunction flattenVertexData (data, output, offset) {\n\t  if (!data) throw new TypeError('must specify data as first parameter')\n\t  offset = +(offset || 0) | 0\n\n\t  if (Array.isArray(data) && Array.isArray(data[0])) {\n\t    var dim = data[0].length\n\t    var length = data.length * dim\n\n\t    // no output specified, create a new typed array\n\t    if (!output || typeof output === 'string') {\n\t      output = new (dtype(output || 'float32'))(length + offset)\n\t    }\n\n\t    var dstLength = output.length - offset\n\t    if (length !== dstLength) {\n\t      throw new Error('source length ' + length + ' (' + dim + 'x' + data.length + ')' +\n\t        ' does not match destination length ' + dstLength)\n\t    }\n\n\t    for (var i = 0, k = offset; i < data.length; i++) {\n\t      for (var j = 0; j < dim; j++) {\n\t        output[k++] = data[i][j]\n\t      }\n\t    }\n\t  } else {\n\t    if (!output || typeof output === 'string') {\n\t      // no output, create a new one\n\t      var Ctor = dtype(output || 'float32')\n\t      if (offset === 0) {\n\t        output = new Ctor(data)\n\t      } else {\n\t        output = new Ctor(data.length + offset)\n\t        output.set(data, offset)\n\t      }\n\t    } else {\n\t      // store output in existing array\n\t      output.set(data, offset)\n\t    }\n\t  }\n\n\t  return output\n\t}\n\n\t},{\"dtype\":33}],33:[function(require,module,exports){\n\targuments[4][29][0].apply(exports,arguments)\n\t},{\"dup\":29}],34:[function(require,module,exports){\n\tvar assign = require('object-assign')\n\n\tmodule.exports = function createSDFShader (opt) {\n\t  opt = opt || {}\n\t  var opacity = typeof opt.opacity === 'number' ? opt.opacity : 1\n\t  var alphaTest = typeof opt.alphaTest === 'number' ? opt.alphaTest : 0.0001\n\t  var precision = opt.precision || 'highp'\n\t  var color = opt.color\n\t  var map = opt.map\n\n\t  // remove to satisfy r73\n\t  delete opt.map\n\t  delete opt.color\n\t  delete opt.precision\n\t  delete opt.opacity\n\n\t  return assign({\n\t    uniforms: {\n\t      opacity: { type: 'f', value: opacity },\n\t      map: { type: 't', value: map || new THREE.Texture() },\n\t      color: { type: 'c', value: new THREE.Color(color) }\n\t    },\n\t    vertexShader: [\n\t      'attribute vec2 uv;',\n\t      'attribute vec4 position;',\n\t      'uniform mat4 projectionMatrix;',\n\t      'uniform mat4 modelViewMatrix;',\n\t      'varying vec2 vUv;',\n\t      'void main() {',\n\t      'vUv = uv;',\n\t      'gl_Position = projectionMatrix * modelViewMatrix * position;',\n\t      '}'\n\t    ].join('\\n'),\n\t    fragmentShader: [\n\t      '#ifdef GL_OES_standard_derivatives',\n\t      '#extension GL_OES_standard_derivatives : enable',\n\t      '#endif',\n\t      'precision ' + precision + ' float;',\n\t      'uniform float opacity;',\n\t      'uniform vec3 color;',\n\t      'uniform sampler2D map;',\n\t      'varying vec2 vUv;',\n\n\t      'float aastep(float value) {',\n\t      '  #ifdef GL_OES_standard_derivatives',\n\t      '    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;',\n\t      '  #else',\n\t      '    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));',\n\t      '  #endif',\n\t      '  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);',\n\t      '}',\n\n\t      'void main() {',\n\t      '  vec4 texColor = texture2D(map, vUv);',\n\t      '  float alpha = aastep(texColor.a);',\n\t      '  gl_FragColor = vec4(color, opacity * alpha);',\n\t      alphaTest === 0\n\t        ? ''\n\t        : '  if (gl_FragColor.a < ' + alphaTest + ') discard;',\n\t      '}'\n\t    ].join('\\n')\n\t  }, opt)\n\t}\n\n\t},{\"object-assign\":26}],35:[function(require,module,exports){\n\tvar loadFont = require('load-bmfont')\n\t//global.THREE = require('three')\n\n\t// A utility to load a font, then a texture\n\tmodule.exports = function (opt, cb) {\n\t  loadFont(opt.font, function (err, font) {\n\t    if (err) throw err\n\t\tPANOLENS.Utils.TextureLoader.load( opt.image, function (tex) {\n\t      cb(font, tex)\n\t    } );\n\t  })\n\t}\n\n\t},{\"load-bmfont\":10}],36:[function(require,module,exports){\n\n\tvar createText = require('../')\n\tvar SDFShader = require('../shaders/sdf')\n\n\tif ( PANOLENS && PANOLENS.Utils && PANOLENS.SpriteText ) {\n\t\tPANOLENS.Utils.loadBMFont = function(fontObject, callback){\n\t\t\trequire('./load')(fontObject, PANOLENS.SpriteText.prototype.setBMFont.bind(PANOLENS.SpriteText.prototype, callback));\n\t\t};\n\t\tPANOLENS.SpriteText.prototype.generateTextGeometry = createText;\n\t\tPANOLENS.SpriteText.prototype.generateSDFShader = SDFShader;\n\t}\n\n\t},{\"../\":1,\"../shaders/sdf\":34,\"./load\":35}],37:[function(require,module,exports){\n\t(function (global){\n\t/*!\n\t * The buffer module from node.js, for the browser.\n\t *\n\t * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n\t * @license  MIT\n\t */\n\t/* eslint-disable no-proto */\n\n\t'use strict'\n\n\tvar base64 = require('base64-js')\n\tvar ieee754 = require('ieee754')\n\tvar isArray = require('isarray')\n\n\texports.Buffer = Buffer\n\texports.SlowBuffer = SlowBuffer\n\texports.INSPECT_MAX_BYTES = 50\n\tBuffer.poolSize = 8192 // not used by this implementation\n\n\tvar rootParent = {}\n\n\t/**\n\t * If `Buffer.TYPED_ARRAY_SUPPORT`:\n\t *   === true    Use Uint8Array implementation (fastest)\n\t *   === false   Use Object implementation (most compatible, even IE6)\n\t *\n\t * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n\t * Opera 11.6+, iOS 4.2+.\n\t *\n\t * Due to various browser bugs, sometimes the Object implementation will be used even\n\t * when the browser supports typed arrays.\n\t *\n\t * Note:\n\t *\n\t *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n\t *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n\t *\n\t *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n\t *\n\t *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n\t *     incorrect length in some situations.\n\n\t * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n\t * get the Object implementation, which is slower but behaves correctly.\n\t */\n\tBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n\t  ? global.TYPED_ARRAY_SUPPORT\n\t  : typedArraySupport()\n\n\tfunction typedArraySupport () {\n\t  try {\n\t    var arr = new Uint8Array(1)\n\t    arr.foo = function () { return 42 }\n\t    return arr.foo() === 42 && // typed array instances can be augmented\n\t        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n\t        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n\t  } catch (e) {\n\t    return false\n\t  }\n\t}\n\n\tfunction kMaxLength () {\n\t  return Buffer.TYPED_ARRAY_SUPPORT\n\t    ? 0x7fffffff\n\t    : 0x3fffffff\n\t}\n\n\t/**\n\t * Class: Buffer\n\t * =============\n\t *\n\t * The Buffer constructor returns instances of `Uint8Array` that are augmented\n\t * with function properties for all the node `Buffer` API functions. We use\n\t * `Uint8Array` so that square bracket notation works as expected -- it returns\n\t * a single octet.\n\t *\n\t * By augmenting the instances, we can avoid modifying the `Uint8Array`\n\t * prototype.\n\t */\n\tfunction Buffer (arg) {\n\t  if (!(this instanceof Buffer)) {\n\t    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n\t    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n\t    return new Buffer(arg)\n\t  }\n\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this.length = 0\n\t    this.parent = undefined\n\t  }\n\n\t  // Common case.\n\t  if (typeof arg === 'number') {\n\t    return fromNumber(this, arg)\n\t  }\n\n\t  // Slightly less common case.\n\t  if (typeof arg === 'string') {\n\t    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n\t  }\n\n\t  // Unusual.\n\t  return fromObject(this, arg)\n\t}\n\n\tfunction fromNumber (that, length) {\n\t  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n\t    for (var i = 0; i < length; i++) {\n\t      that[i] = 0\n\t    }\n\t  }\n\t  return that\n\t}\n\n\tfunction fromString (that, string, encoding) {\n\t  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n\t  // Assumption: byteLength() return value is always < kMaxLength.\n\t  var length = byteLength(string, encoding) | 0\n\t  that = allocate(that, length)\n\n\t  that.write(string, encoding)\n\t  return that\n\t}\n\n\tfunction fromObject (that, object) {\n\t  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n\t  if (isArray(object)) return fromArray(that, object)\n\n\t  if (object == null) {\n\t    throw new TypeError('must start with number, buffer, array or string')\n\t  }\n\n\t  if (typeof ArrayBuffer !== 'undefined') {\n\t    if (object.buffer instanceof ArrayBuffer) {\n\t      return fromTypedArray(that, object)\n\t    }\n\t    if (object instanceof ArrayBuffer) {\n\t      return fromArrayBuffer(that, object)\n\t    }\n\t  }\n\n\t  if (object.length) return fromArrayLike(that, object)\n\n\t  return fromJsonObject(that, object)\n\t}\n\n\tfunction fromBuffer (that, buffer) {\n\t  var length = checked(buffer.length) | 0\n\t  that = allocate(that, length)\n\t  buffer.copy(that, 0, 0, length)\n\t  return that\n\t}\n\n\tfunction fromArray (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n\t}\n\n\t// Duplicate of fromArray() to keep fromArray() monomorphic.\n\tfunction fromTypedArray (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  // Truncating the elements is probably not what people expect from typed\n\t  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n\t  // of the old Buffer constructor.\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n\t}\n\n\tfunction fromArrayBuffer (that, array) {\n\t  //array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(array)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that = fromTypedArray(that, new Uint8Array(array))\n\t  }\n\t  return that\n\t}\n\n\tfunction fromArrayLike (that, array) {\n\t  var length = checked(array.length) | 0\n\t  that = allocate(that, length)\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n\t}\n\n\t// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n\t// Returns a zero-length buffer for inputs that don't conform to the spec.\n\tfunction fromJsonObject (that, object) {\n\t  var array\n\t  var length = 0\n\n\t  if (object.type === 'Buffer' && isArray(object.data)) {\n\t    array = object.data\n\t    length = checked(array.length) | 0\n\t  }\n\t  that = allocate(that, length)\n\n\t  for (var i = 0; i < length; i += 1) {\n\t    that[i] = array[i] & 255\n\t  }\n\t  return that\n\t}\n\n\tif (Buffer.TYPED_ARRAY_SUPPORT) {\n\t  Buffer.prototype.__proto__ = Uint8Array.prototype\n\t  Buffer.__proto__ = Uint8Array\n\t} else {\n\t  // pre-set for values that may exist in the future\n\t  Buffer.prototype.length = undefined\n\t  Buffer.prototype.parent = undefined\n\t}\n\n\tfunction allocate (that, length) {\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // Return an augmented `Uint8Array` instance, for best performance\n\t    that = new Uint8Array(length)\n\t    that.__proto__ = Buffer.prototype\n\t  } else {\n\t    // Fallback: Return an object instance of the Buffer class\n\t    that.length = length\n\t  }\n\n\t  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n\t  if (fromPool) that.parent = rootParent\n\n\t  return that\n\t}\n\n\tfunction checked (length) {\n\t  // Note: cannot use `length < kMaxLength` here because that fails when\n\t  // length is NaN (which is otherwise coerced to zero.)\n\t  if (length >= kMaxLength()) {\n\t    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n\t                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n\t  }\n\t  return length | 0\n\t}\n\n\tfunction SlowBuffer (subject, encoding) {\n\t  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n\t  var buf = new Buffer(subject, encoding)\n\t  delete buf.parent\n\t  return buf\n\t}\n\n\tBuffer.isBuffer = function isBuffer (b) {\n\t  return !!(b != null && b._isBuffer)\n\t}\n\n\tBuffer.compare = function compare (a, b) {\n\t  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n\t    throw new TypeError('Arguments must be Buffers')\n\t  }\n\n\t  if (a === b) return 0\n\n\t  var x = a.length\n\t  var y = b.length\n\n\t  var i = 0\n\t  var len = Math.min(x, y)\n\t  while (i < len) {\n\t    if (a[i] !== b[i]) break\n\n\t    ++i\n\t  }\n\n\t  if (i !== len) {\n\t    x = a[i]\n\t    y = b[i]\n\t  }\n\n\t  if (x < y) return -1\n\t  if (y < x) return 1\n\t  return 0\n\t}\n\n\tBuffer.isEncoding = function isEncoding (encoding) {\n\t  switch (String(encoding).toLowerCase()) {\n\t    case 'hex':\n\t    case 'utf8':\n\t    case 'utf-8':\n\t    case 'ascii':\n\t    case 'binary':\n\t    case 'base64':\n\t    case 'raw':\n\t    case 'ucs2':\n\t    case 'ucs-2':\n\t    case 'utf16le':\n\t    case 'utf-16le':\n\t      return true\n\t    default:\n\t      return false\n\t  }\n\t}\n\n\tBuffer.concat = function concat (list, length) {\n\t  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n\t  if (list.length === 0) {\n\t    return new Buffer(0)\n\t  }\n\n\t  var i\n\t  if (length === undefined) {\n\t    length = 0\n\t    for (i = 0; i < list.length; i++) {\n\t      length += list[i].length\n\t    }\n\t  }\n\n\t  var buf = new Buffer(length)\n\t  var pos = 0\n\t  for (i = 0; i < list.length; i++) {\n\t    var item = list[i]\n\t    item.copy(buf, pos)\n\t    pos += item.length\n\t  }\n\t  return buf\n\t}\n\n\tfunction byteLength (string, encoding) {\n\t  if (typeof string !== 'string') string = '' + string\n\n\t  var len = string.length\n\t  if (len === 0) return 0\n\n\t  // Use a for loop to avoid recursion\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'ascii':\n\t      case 'binary':\n\t      // Deprecated\n\t      case 'raw':\n\t      case 'raws':\n\t        return len\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8ToBytes(string).length\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return len * 2\n\t      case 'hex':\n\t        return len >>> 1\n\t      case 'base64':\n\t        return base64ToBytes(string).length\n\t      default:\n\t        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n\t}\n\tBuffer.byteLength = byteLength\n\n\tfunction slowToString (encoding, start, end) {\n\t  var loweredCase = false\n\n\t  start = start | 0\n\t  end = end === undefined || end === Infinity ? this.length : end | 0\n\n\t  if (!encoding) encoding = 'utf8'\n\t  if (start < 0) start = 0\n\t  if (end > this.length) end = this.length\n\t  if (end <= start) return ''\n\n\t  while (true) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexSlice(this, start, end)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Slice(this, start, end)\n\n\t      case 'ascii':\n\t        return asciiSlice(this, start, end)\n\n\t      case 'binary':\n\t        return binarySlice(this, start, end)\n\n\t      case 'base64':\n\t        return base64Slice(this, start, end)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return utf16leSlice(this, start, end)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = (encoding + '').toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n\t}\n\n\t// Even though this property is private, it shouldn't be removed because it is\n\t// used by `is-buffer` to detect buffer instances in Safari 5-7.\n\tBuffer.prototype._isBuffer = true\n\n\tBuffer.prototype.toString = function toString () {\n\t  var length = this.length | 0\n\t  if (length === 0) return ''\n\t  if (arguments.length === 0) return utf8Slice(this, 0, length)\n\t  return slowToString.apply(this, arguments)\n\t}\n\n\tBuffer.prototype.equals = function equals (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return true\n\t  return Buffer.compare(this, b) === 0\n\t}\n\n\tBuffer.prototype.inspect = function inspect () {\n\t  var str = ''\n\t  var max = exports.INSPECT_MAX_BYTES\n\t  if (this.length > 0) {\n\t    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n\t    if (this.length > max) str += ' ... '\n\t  }\n\t  return '<Buffer ' + str + '>'\n\t}\n\n\tBuffer.prototype.compare = function compare (b) {\n\t  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n\t  if (this === b) return 0\n\t  return Buffer.compare(this, b)\n\t}\n\n\tBuffer.prototype.indexOf = function indexOf (val, byteOffset) {\n\t  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n\t  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n\t  byteOffset >>= 0\n\n\t  if (this.length === 0) return -1\n\t  if (byteOffset >= this.length) return -1\n\n\t  // Negative offsets start from the end of the buffer\n\t  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n\t  if (typeof val === 'string') {\n\t    if (val.length === 0) return -1 // special case: looking for empty string always fails\n\t    return String.prototype.indexOf.call(this, val, byteOffset)\n\t  }\n\t  if (Buffer.isBuffer(val)) {\n\t    return arrayIndexOf(this, val, byteOffset)\n\t  }\n\t  if (typeof val === 'number') {\n\t    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n\t      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n\t    }\n\t    return arrayIndexOf(this, [ val ], byteOffset)\n\t  }\n\n\t  function arrayIndexOf (arr, val, byteOffset) {\n\t    var foundIndex = -1\n\t    for (var i = 0; byteOffset + i < arr.length; i++) {\n\t      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n\t        if (foundIndex === -1) foundIndex = i\n\t        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n\t      } else {\n\t        foundIndex = -1\n\t      }\n\t    }\n\t    return -1\n\t  }\n\n\t  throw new TypeError('val must be string, number or Buffer')\n\t}\n\n\tfunction hexWrite (buf, string, offset, length) {\n\t  offset = Number(offset) || 0\n\t  var remaining = buf.length - offset\n\t  if (!length) {\n\t    length = remaining\n\t  } else {\n\t    length = Number(length)\n\t    if (length > remaining) {\n\t      length = remaining\n\t    }\n\t  }\n\n\t  // must be an even number of digits\n\t  var strLen = string.length\n\t  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n\t  if (length > strLen / 2) {\n\t    length = strLen / 2\n\t  }\n\t  for (var i = 0; i < length; i++) {\n\t    var parsed = parseInt(string.substr(i * 2, 2), 16)\n\t    if (isNaN(parsed)) throw new Error('Invalid hex string')\n\t    buf[offset + i] = parsed\n\t  }\n\t  return i\n\t}\n\n\tfunction utf8Write (buf, string, offset, length) {\n\t  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n\t}\n\n\tfunction asciiWrite (buf, string, offset, length) {\n\t  return blitBuffer(asciiToBytes(string), buf, offset, length)\n\t}\n\n\tfunction binaryWrite (buf, string, offset, length) {\n\t  return asciiWrite(buf, string, offset, length)\n\t}\n\n\tfunction base64Write (buf, string, offset, length) {\n\t  return blitBuffer(base64ToBytes(string), buf, offset, length)\n\t}\n\n\tfunction ucs2Write (buf, string, offset, length) {\n\t  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n\t}\n\n\tBuffer.prototype.write = function write (string, offset, length, encoding) {\n\t  // Buffer#write(string)\n\t  if (offset === undefined) {\n\t    encoding = 'utf8'\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, encoding)\n\t  } else if (length === undefined && typeof offset === 'string') {\n\t    encoding = offset\n\t    length = this.length\n\t    offset = 0\n\t  // Buffer#write(string, offset[, length][, encoding])\n\t  } else if (isFinite(offset)) {\n\t    offset = offset | 0\n\t    if (isFinite(length)) {\n\t      length = length | 0\n\t      if (encoding === undefined) encoding = 'utf8'\n\t    } else {\n\t      encoding = length\n\t      length = undefined\n\t    }\n\t  // legacy write(string, encoding, offset, length) - remove in v0.13\n\t  } else {\n\t    var swap = encoding\n\t    encoding = offset\n\t    offset = length | 0\n\t    length = swap\n\t  }\n\n\t  var remaining = this.length - offset\n\t  if (length === undefined || length > remaining) length = remaining\n\n\t  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n\t    throw new RangeError('attempt to write outside buffer bounds')\n\t  }\n\n\t  if (!encoding) encoding = 'utf8'\n\n\t  var loweredCase = false\n\t  for (;;) {\n\t    switch (encoding) {\n\t      case 'hex':\n\t        return hexWrite(this, string, offset, length)\n\n\t      case 'utf8':\n\t      case 'utf-8':\n\t        return utf8Write(this, string, offset, length)\n\n\t      case 'ascii':\n\t        return asciiWrite(this, string, offset, length)\n\n\t      case 'binary':\n\t        return binaryWrite(this, string, offset, length)\n\n\t      case 'base64':\n\t        // Warning: maxLength not taken into account in base64Write\n\t        return base64Write(this, string, offset, length)\n\n\t      case 'ucs2':\n\t      case 'ucs-2':\n\t      case 'utf16le':\n\t      case 'utf-16le':\n\t        return ucs2Write(this, string, offset, length)\n\n\t      default:\n\t        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n\t        encoding = ('' + encoding).toLowerCase()\n\t        loweredCase = true\n\t    }\n\t  }\n\t}\n\n\tBuffer.prototype.toJSON = function toJSON () {\n\t  return {\n\t    type: 'Buffer',\n\t    data: Array.prototype.slice.call(this._arr || this, 0)\n\t  }\n\t}\n\n\tfunction base64Slice (buf, start, end) {\n\t  if (start === 0 && end === buf.length) {\n\t    return base64.fromByteArray(buf)\n\t  } else {\n\t    return base64.fromByteArray(buf.slice(start, end))\n\t  }\n\t}\n\n\tfunction utf8Slice (buf, start, end) {\n\t  end = Math.min(buf.length, end)\n\t  var res = []\n\n\t  var i = start\n\t  while (i < end) {\n\t    var firstByte = buf[i]\n\t    var codePoint = null\n\t    var bytesPerSequence = (firstByte > 0xEF) ? 4\n\t      : (firstByte > 0xDF) ? 3\n\t      : (firstByte > 0xBF) ? 2\n\t      : 1\n\n\t    if (i + bytesPerSequence <= end) {\n\t      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n\t      switch (bytesPerSequence) {\n\t        case 1:\n\t          if (firstByte < 0x80) {\n\t            codePoint = firstByte\n\t          }\n\t          break\n\t        case 2:\n\t          secondByte = buf[i + 1]\n\t          if ((secondByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n\t            if (tempCodePoint > 0x7F) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 3:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n\t            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t          break\n\t        case 4:\n\t          secondByte = buf[i + 1]\n\t          thirdByte = buf[i + 2]\n\t          fourthByte = buf[i + 3]\n\t          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n\t            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n\t            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n\t              codePoint = tempCodePoint\n\t            }\n\t          }\n\t      }\n\t    }\n\n\t    if (codePoint === null) {\n\t      // we did not generate a valid codePoint so insert a\n\t      // replacement char (U+FFFD) and advance only 1 byte\n\t      codePoint = 0xFFFD\n\t      bytesPerSequence = 1\n\t    } else if (codePoint > 0xFFFF) {\n\t      // encode to utf16 (surrogate pair dance)\n\t      codePoint -= 0x10000\n\t      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n\t      codePoint = 0xDC00 | codePoint & 0x3FF\n\t    }\n\n\t    res.push(codePoint)\n\t    i += bytesPerSequence\n\t  }\n\n\t  return decodeCodePointsArray(res)\n\t}\n\n\t// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n\t// the lowest limit is Chrome, with 0x10000 args.\n\t// We go 1 magnitude less, for safety\n\tvar MAX_ARGUMENTS_LENGTH = 0x1000\n\n\tfunction decodeCodePointsArray (codePoints) {\n\t  var len = codePoints.length\n\t  if (len <= MAX_ARGUMENTS_LENGTH) {\n\t    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n\t  }\n\n\t  // Decode in chunks to avoid \"call stack size exceeded\".\n\t  var res = ''\n\t  var i = 0\n\t  while (i < len) {\n\t    res += String.fromCharCode.apply(\n\t      String,\n\t      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n\t    )\n\t  }\n\t  return res\n\t}\n\n\tfunction asciiSlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\n\t  for (var i = start; i < end; i++) {\n\t    ret += String.fromCharCode(buf[i] & 0x7F)\n\t  }\n\t  return ret\n\t}\n\n\tfunction binarySlice (buf, start, end) {\n\t  var ret = ''\n\t  end = Math.min(buf.length, end)\n\n\t  for (var i = start; i < end; i++) {\n\t    ret += String.fromCharCode(buf[i])\n\t  }\n\t  return ret\n\t}\n\n\tfunction hexSlice (buf, start, end) {\n\t  var len = buf.length\n\n\t  if (!start || start < 0) start = 0\n\t  if (!end || end < 0 || end > len) end = len\n\n\t  var out = ''\n\t  for (var i = start; i < end; i++) {\n\t    out += toHex(buf[i])\n\t  }\n\t  return out\n\t}\n\n\tfunction utf16leSlice (buf, start, end) {\n\t  var bytes = buf.slice(start, end)\n\t  var res = ''\n\t  for (var i = 0; i < bytes.length; i += 2) {\n\t    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n\t  }\n\t  return res\n\t}\n\n\tBuffer.prototype.slice = function slice (start, end) {\n\t  var len = this.length\n\t  start = ~~start\n\t  end = end === undefined ? len : ~~end\n\n\t  if (start < 0) {\n\t    start += len\n\t    if (start < 0) start = 0\n\t  } else if (start > len) {\n\t    start = len\n\t  }\n\n\t  if (end < 0) {\n\t    end += len\n\t    if (end < 0) end = 0\n\t  } else if (end > len) {\n\t    end = len\n\t  }\n\n\t  if (end < start) end = start\n\n\t  var newBuf\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    newBuf = this.subarray(start, end)\n\t    newBuf.__proto__ = Buffer.prototype\n\t  } else {\n\t    var sliceLen = end - start\n\t    newBuf = new Buffer(sliceLen, undefined)\n\t    for (var i = 0; i < sliceLen; i++) {\n\t      newBuf[i] = this[i + start]\n\t    }\n\t  }\n\n\t  if (newBuf.length) newBuf.parent = this.parent || this\n\n\t  return newBuf\n\t}\n\n\t/*\n\t * Need to make sure that buffer isn't trying to write out of bounds.\n\t */\n\tfunction checkOffset (offset, ext, length) {\n\t  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n\t  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n\t}\n\n\tBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\n\t  return val\n\t}\n\n\tBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) {\n\t    checkOffset(offset, byteLength, this.length)\n\t  }\n\n\t  var val = this[offset + --byteLength]\n\t  var mul = 1\n\t  while (byteLength > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --byteLength] * mul\n\t  }\n\n\t  return val\n\t}\n\n\tBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  return this[offset]\n\t}\n\n\tBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return this[offset] | (this[offset + 1] << 8)\n\t}\n\n\tBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  return (this[offset] << 8) | this[offset + 1]\n\t}\n\n\tBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return ((this[offset]) |\n\t      (this[offset + 1] << 8) |\n\t      (this[offset + 2] << 16)) +\n\t      (this[offset + 3] * 0x1000000)\n\t}\n\n\tBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset] * 0x1000000) +\n\t    ((this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    this[offset + 3])\n\t}\n\n\tBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var val = this[offset]\n\t  var mul = 1\n\t  var i = 0\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    val += this[offset + i] * mul\n\t  }\n\t  mul *= 0x80\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n\t  return val\n\t}\n\n\tBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n\t  var i = byteLength\n\t  var mul = 1\n\t  var val = this[offset + --i]\n\t  while (i > 0 && (mul *= 0x100)) {\n\t    val += this[offset + --i] * mul\n\t  }\n\t  mul *= 0x80\n\n\t  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n\t  return val\n\t}\n\n\tBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 1, this.length)\n\t  if (!(this[offset] & 0x80)) return (this[offset])\n\t  return ((0xff - this[offset] + 1) * -1)\n\t}\n\n\tBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset] | (this[offset + 1] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n\t}\n\n\tBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 2, this.length)\n\t  var val = this[offset + 1] | (this[offset] << 8)\n\t  return (val & 0x8000) ? val | 0xFFFF0000 : val\n\t}\n\n\tBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset]) |\n\t    (this[offset + 1] << 8) |\n\t    (this[offset + 2] << 16) |\n\t    (this[offset + 3] << 24)\n\t}\n\n\tBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\n\t  return (this[offset] << 24) |\n\t    (this[offset + 1] << 16) |\n\t    (this[offset + 2] << 8) |\n\t    (this[offset + 3])\n\t}\n\n\tBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, true, 23, 4)\n\t}\n\n\tBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 4, this.length)\n\t  return ieee754.read(this, offset, false, 23, 4)\n\t}\n\n\tBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, true, 52, 8)\n\t}\n\n\tBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n\t  if (!noAssert) checkOffset(offset, 8, this.length)\n\t  return ieee754.read(this, offset, false, 52, 8)\n\t}\n\n\tfunction checkInt (buf, value, offset, ext, max, min) {\n\t  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n\t  if (value > max || value < min) throw new RangeError('value is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('index out of range')\n\t}\n\n\tBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n\t  var mul = 1\n\t  var i = 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\n\t  return offset + byteLength\n\t}\n\n\tBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  byteLength = byteLength | 0\n\t  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = (value / mul) & 0xFF\n\t  }\n\n\t  return offset + byteLength\n\t}\n\n\tBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n\t}\n\n\tfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n\t    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n\t      (littleEndian ? i : 1 - i) * 8\n\t  }\n\t}\n\n\tBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n\t}\n\n\tBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n\t}\n\n\tfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n\t    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n\t  }\n\t}\n\n\tBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset + 3] = (value >>> 24)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n\t}\n\n\tBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n\t}\n\n\tBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\n\t  var i = 0\n\t  var mul = 1\n\t  var sub = value < 0 ? 1 : 0\n\t  this[offset] = value & 0xFF\n\t  while (++i < byteLength && (mul *= 0x100)) {\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\n\t  return offset + byteLength\n\t}\n\n\tBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) {\n\t    var limit = Math.pow(2, 8 * byteLength - 1)\n\n\t    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n\t  }\n\n\t  var i = byteLength - 1\n\t  var mul = 1\n\t  var sub = value < 0 ? 1 : 0\n\t  this[offset + i] = value & 0xFF\n\t  while (--i >= 0 && (mul *= 0x100)) {\n\t    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n\t  }\n\n\t  return offset + byteLength\n\t}\n\n\tBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n\t  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n\t  if (value < 0) value = 0xff + value + 1\n\t  this[offset] = (value & 0xff)\n\t  return offset + 1\n\t}\n\n\tBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, true)\n\t  }\n\t  return offset + 2\n\t}\n\n\tBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 8)\n\t    this[offset + 1] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt16(this, value, offset, false)\n\t  }\n\t  return offset + 2\n\t}\n\n\tBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value & 0xff)\n\t    this[offset + 1] = (value >>> 8)\n\t    this[offset + 2] = (value >>> 16)\n\t    this[offset + 3] = (value >>> 24)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, true)\n\t  }\n\t  return offset + 4\n\t}\n\n\tBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n\t  value = +value\n\t  offset = offset | 0\n\t  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n\t  if (value < 0) value = 0xffffffff + value + 1\n\t  if (Buffer.TYPED_ARRAY_SUPPORT) {\n\t    this[offset] = (value >>> 24)\n\t    this[offset + 1] = (value >>> 16)\n\t    this[offset + 2] = (value >>> 8)\n\t    this[offset + 3] = (value & 0xff)\n\t  } else {\n\t    objectWriteUInt32(this, value, offset, false)\n\t  }\n\t  return offset + 4\n\t}\n\n\tfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n\t  if (value > max || value < min) throw new RangeError('value is out of bounds')\n\t  if (offset + ext > buf.length) throw new RangeError('index out of range')\n\t  if (offset < 0) throw new RangeError('index out of range')\n\t}\n\n\tfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n\t  return offset + 4\n\t}\n\n\tBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, true, noAssert)\n\t}\n\n\tBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n\t  return writeFloat(this, value, offset, false, noAssert)\n\t}\n\n\tfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n\t  if (!noAssert) {\n\t    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n\t  }\n\t  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n\t  return offset + 8\n\t}\n\n\tBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, true, noAssert)\n\t}\n\n\tBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n\t  return writeDouble(this, value, offset, false, noAssert)\n\t}\n\n\t// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\tBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n\t  if (!start) start = 0\n\t  if (!end && end !== 0) end = this.length\n\t  if (targetStart >= target.length) targetStart = target.length\n\t  if (!targetStart) targetStart = 0\n\t  if (end > 0 && end < start) end = start\n\n\t  // Copy 0 bytes; we're done\n\t  if (end === start) return 0\n\t  if (target.length === 0 || this.length === 0) return 0\n\n\t  // Fatal error conditions\n\t  if (targetStart < 0) {\n\t    throw new RangeError('targetStart out of bounds')\n\t  }\n\t  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n\t  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n\t  // Are we oob?\n\t  if (end > this.length) end = this.length\n\t  if (target.length - targetStart < end - start) {\n\t    end = target.length - targetStart + start\n\t  }\n\n\t  var len = end - start\n\t  var i\n\n\t  if (this === target && start < targetStart && targetStart < end) {\n\t    // descending copy from end\n\t    for (i = len - 1; i >= 0; i--) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n\t    // ascending copy from start\n\t    for (i = 0; i < len; i++) {\n\t      target[i + targetStart] = this[i + start]\n\t    }\n\t  } else {\n\t    Uint8Array.prototype.set.call(\n\t      target,\n\t      this.subarray(start, start + len),\n\t      targetStart\n\t    )\n\t  }\n\n\t  return len\n\t}\n\n\t// fill(value, start=0, end=buffer.length)\n\tBuffer.prototype.fill = function fill (value, start, end) {\n\t  if (!value) value = 0\n\t  if (!start) start = 0\n\t  if (!end) end = this.length\n\n\t  if (end < start) throw new RangeError('end < start')\n\n\t  // Fill 0 bytes; we're done\n\t  if (end === start) return\n\t  if (this.length === 0) return\n\n\t  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n\t  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n\t  var i\n\t  if (typeof value === 'number') {\n\t    for (i = start; i < end; i++) {\n\t      this[i] = value\n\t    }\n\t  } else {\n\t    var bytes = utf8ToBytes(value.toString())\n\t    var len = bytes.length\n\t    for (i = start; i < end; i++) {\n\t      this[i] = bytes[i % len]\n\t    }\n\t  }\n\n\t  return this\n\t}\n\n\t// HELPER FUNCTIONS\n\t// ================\n\n\tvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\n\tfunction base64clean (str) {\n\t  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n\t  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n\t  // Node converts strings with length < 2 to ''\n\t  if (str.length < 2) return ''\n\t  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\t  while (str.length % 4 !== 0) {\n\t    str = str + '='\n\t  }\n\t  return str\n\t}\n\n\tfunction stringtrim (str) {\n\t  if (str.trim) return str.trim()\n\t  return str.replace(/^\\s+|\\s+$/g, '')\n\t}\n\n\tfunction toHex (n) {\n\t  if (n < 16) return '0' + n.toString(16)\n\t  return n.toString(16)\n\t}\n\n\tfunction utf8ToBytes (string, units) {\n\t  units = units || Infinity\n\t  var codePoint\n\t  var length = string.length\n\t  var leadSurrogate = null\n\t  var bytes = []\n\n\t  for (var i = 0; i < length; i++) {\n\t    codePoint = string.charCodeAt(i)\n\n\t    // is surrogate component\n\t    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n\t      // last char was a lead\n\t      if (!leadSurrogate) {\n\t        // no lead yet\n\t        if (codePoint > 0xDBFF) {\n\t          // unexpected trail\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        } else if (i + 1 === length) {\n\t          // unpaired lead\n\t          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t          continue\n\t        }\n\n\t        // valid lead\n\t        leadSurrogate = codePoint\n\n\t        continue\n\t      }\n\n\t      // 2 leads in a row\n\t      if (codePoint < 0xDC00) {\n\t        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t        leadSurrogate = codePoint\n\t        continue\n\t      }\n\n\t      // valid surrogate pair\n\t      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n\t    } else if (leadSurrogate) {\n\t      // valid bmp char, but last char was a lead\n\t      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n\t    }\n\n\t    leadSurrogate = null\n\n\t    // encode utf8\n\t    if (codePoint < 0x80) {\n\t      if ((units -= 1) < 0) break\n\t      bytes.push(codePoint)\n\t    } else if (codePoint < 0x800) {\n\t      if ((units -= 2) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x6 | 0xC0,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x10000) {\n\t      if ((units -= 3) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0xC | 0xE0,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else if (codePoint < 0x110000) {\n\t      if ((units -= 4) < 0) break\n\t      bytes.push(\n\t        codePoint >> 0x12 | 0xF0,\n\t        codePoint >> 0xC & 0x3F | 0x80,\n\t        codePoint >> 0x6 & 0x3F | 0x80,\n\t        codePoint & 0x3F | 0x80\n\t      )\n\t    } else {\n\t      throw new Error('Invalid code point')\n\t    }\n\t  }\n\n\t  return bytes\n\t}\n\n\tfunction asciiToBytes (str) {\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; i++) {\n\t    // Node's code seems to be doing this and not & 0x7F..\n\t    byteArray.push(str.charCodeAt(i) & 0xFF)\n\t  }\n\t  return byteArray\n\t}\n\n\tfunction utf16leToBytes (str, units) {\n\t  var c, hi, lo\n\t  var byteArray = []\n\t  for (var i = 0; i < str.length; i++) {\n\t    if ((units -= 2) < 0) break\n\n\t    c = str.charCodeAt(i)\n\t    hi = c >> 8\n\t    lo = c % 256\n\t    byteArray.push(lo)\n\t    byteArray.push(hi)\n\t  }\n\n\t  return byteArray\n\t}\n\n\tfunction base64ToBytes (str) {\n\t  return base64.toByteArray(base64clean(str))\n\t}\n\n\tfunction blitBuffer (src, dst, offset, length) {\n\t  for (var i = 0; i < length; i++) {\n\t    if ((i + offset >= dst.length) || (i >= src.length)) break\n\t    dst[i + offset] = src[i]\n\t  }\n\t  return i\n\t}\n\n\t}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\t},{\"base64-js\":38,\"ieee754\":39,\"isarray\":40}],38:[function(require,module,exports){\n\t;(function (exports) {\n\t  'use strict'\n\n\t  var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n\n\t  var Arr = (typeof Uint8Array !== 'undefined')\n\t    ? Uint8Array\n\t    : Array\n\n\t  var PLUS = '+'.charCodeAt(0)\n\t  var SLASH = '/'.charCodeAt(0)\n\t  var NUMBER = '0'.charCodeAt(0)\n\t  var LOWER = 'a'.charCodeAt(0)\n\t  var UPPER = 'A'.charCodeAt(0)\n\t  var PLUS_URL_SAFE = '-'.charCodeAt(0)\n\t  var SLASH_URL_SAFE = '_'.charCodeAt(0)\n\n\t  function decode (elt) {\n\t    var code = elt.charCodeAt(0)\n\t    if (code === PLUS || code === PLUS_URL_SAFE) return 62 // '+'\n\t    if (code === SLASH || code === SLASH_URL_SAFE) return 63 // '/'\n\t    if (code < NUMBER) return -1 // no match\n\t    if (code < NUMBER + 10) return code - NUMBER + 26 + 26\n\t    if (code < UPPER + 26) return code - UPPER\n\t    if (code < LOWER + 26) return code - LOWER + 26\n\t  }\n\n\t  function b64ToByteArray (b64) {\n\t    var i, j, l, tmp, placeHolders, arr\n\n\t    if (b64.length % 4 > 0) {\n\t      throw new Error('Invalid string. Length must be a multiple of 4')\n\t    }\n\n\t    // the number of equal signs (place holders)\n\t    // if there are two placeholders, than the two characters before it\n\t    // represent one byte\n\t    // if there is only one, then the three characters before it represent 2 bytes\n\t    // this is just a cheap hack to not do indexOf twice\n\t    var len = b64.length\n\t    placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0\n\n\t    // base64 is 4/3 + up to two characters of the original data\n\t    arr = new Arr(b64.length * 3 / 4 - placeHolders)\n\n\t    // if there are placeholders, only get up to the last complete 4 chars\n\t    l = placeHolders > 0 ? b64.length - 4 : b64.length\n\n\t    var L = 0\n\n\t    function push (v) {\n\t      arr[L++] = v\n\t    }\n\n\t    for (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t      tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\n\t      push((tmp & 0xFF0000) >> 16)\n\t      push((tmp & 0xFF00) >> 8)\n\t      push(tmp & 0xFF)\n\t    }\n\n\t    if (placeHolders === 2) {\n\t      tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\n\t      push(tmp & 0xFF)\n\t    } else if (placeHolders === 1) {\n\t      tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\n\t      push((tmp >> 8) & 0xFF)\n\t      push(tmp & 0xFF)\n\t    }\n\n\t    return arr\n\t  }\n\n\t  function uint8ToBase64 (uint8) {\n\t    var i\n\t    var extraBytes = uint8.length % 3 // if we have 1 byte left, pad 2 bytes\n\t    var output = ''\n\t    var temp, length\n\n\t    function encode (num) {\n\t      return lookup.charAt(num)\n\t    }\n\n\t    function tripletToBase64 (num) {\n\t      return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)\n\t    }\n\n\t    // go through the array every three bytes, we'll deal with trailing stuff later\n\t    for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t      temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n\t      output += tripletToBase64(temp)\n\t    }\n\n\t    // pad the end with zeros, but make sure to not forget the extra bytes\n\t    switch (extraBytes) {\n\t      case 1:\n\t        temp = uint8[uint8.length - 1]\n\t        output += encode(temp >> 2)\n\t        output += encode((temp << 4) & 0x3F)\n\t        output += '=='\n\t        break\n\t      case 2:\n\t        temp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])\n\t        output += encode(temp >> 10)\n\t        output += encode((temp >> 4) & 0x3F)\n\t        output += encode((temp << 2) & 0x3F)\n\t        output += '='\n\t        break\n\t      default:\n\t        break\n\t    }\n\n\t    return output\n\t  }\n\n\t  exports.toByteArray = b64ToByteArray\n\t  exports.fromByteArray = uint8ToBase64\n\t}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))\n\n\t},{}],39:[function(require,module,exports){\n\texports.read = function (buffer, offset, isLE, mLen, nBytes) {\n\t  var e, m\n\t  var eLen = nBytes * 8 - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var nBits = -7\n\t  var i = isLE ? (nBytes - 1) : 0\n\t  var d = isLE ? -1 : 1\n\t  var s = buffer[offset + i]\n\n\t  i += d\n\n\t  e = s & ((1 << (-nBits)) - 1)\n\t  s >>= (-nBits)\n\t  nBits += eLen\n\t  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t  m = e & ((1 << (-nBits)) - 1)\n\t  e >>= (-nBits)\n\t  nBits += mLen\n\t  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n\t  if (e === 0) {\n\t    e = 1 - eBias\n\t  } else if (e === eMax) {\n\t    return m ? NaN : ((s ? -1 : 1) * Infinity)\n\t  } else {\n\t    m = m + Math.pow(2, mLen)\n\t    e = e - eBias\n\t  }\n\t  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n\t}\n\n\texports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n\t  var e, m, c\n\t  var eLen = nBytes * 8 - mLen - 1\n\t  var eMax = (1 << eLen) - 1\n\t  var eBias = eMax >> 1\n\t  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n\t  var i = isLE ? 0 : (nBytes - 1)\n\t  var d = isLE ? 1 : -1\n\t  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n\t  value = Math.abs(value)\n\n\t  if (isNaN(value) || value === Infinity) {\n\t    m = isNaN(value) ? 1 : 0\n\t    e = eMax\n\t  } else {\n\t    e = Math.floor(Math.log(value) / Math.LN2)\n\t    if (value * (c = Math.pow(2, -e)) < 1) {\n\t      e--\n\t      c *= 2\n\t    }\n\t    if (e + eBias >= 1) {\n\t      value += rt / c\n\t    } else {\n\t      value += rt * Math.pow(2, 1 - eBias)\n\t    }\n\t    if (value * c >= 2) {\n\t      e++\n\t      c /= 2\n\t    }\n\n\t    if (e + eBias >= eMax) {\n\t      m = 0\n\t      e = eMax\n\t    } else if (e + eBias >= 1) {\n\t      m = (value * c - 1) * Math.pow(2, mLen)\n\t      e = e + eBias\n\t    } else {\n\t      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n\t      e = 0\n\t    }\n\t  }\n\n\t  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n\t  e = (e << mLen) | m\n\t  eLen += mLen\n\t  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n\t  buffer[offset + i - d] |= s * 128\n\t}\n\n\t},{}],40:[function(require,module,exports){\n\tvar toString = {}.toString;\n\n\tmodule.exports = Array.isArray || function (arr) {\n\t  return toString.call(arr) == '[object Array]';\n\t};\n\n},{}]},{},[36]);\n\nexport default PANOLENS;\n\n\n// WEBPACK FOOTER //\n// ./src/lib/panolens.js","import { Box3, Vector3, Vector2, BufferAttribute } from 'three';\n\nlet box = new Box3();\n\nfunction getSize( object ) {\n\n    box.setFromObject( object );\n\n    return box.getSize();\n}\n\nfunction getCenter( object ) {\n\n    box.setFromObject( object );\n\n    return box.getCenter();\n}\n\nfunction lightsDiff( lights, oldLights ) {\n\n}\n\nfunction toIndexed ( bufferGeometry ) {\n\n    var raw_positions = bufferGeometry.getAttribute( 'position' ).array;\n\n    var raw_uvs;\n    var hasUV = bufferGeometry.getAttribute( 'uv' ) !== undefined;\n    if ( hasUV ) raw_uvs = bufferGeometry.getAttribute( 'uv' ).array;\n\n    var raw_normals;\n    var hasNormal = bufferGeometry.getAttribute( 'normal' ) !== undefined;\n    if ( hasNormal ) raw_normals = bufferGeometry.getAttribute( 'normal' ).array;\n\n    var indices = [];\n    var vertices = [];\n    var normals = [];\n    var uvs = [];\n\n    var face, face_normalss, face_uvs, tmp_indices;\n\n    var v0 = new Vector3();\n    var v1 = new Vector3();\n    var v2 = new Vector3();\n\n    var n0 = new Vector3();\n    var n1 = new Vector3();\n    var n2 = new Vector3();\n\n    var uv0 = new Vector2();\n    var uv1 = new Vector2();\n    var uv2 = new Vector2();\n\n    for ( var i = 0; i < raw_positions.length; i += 9 ) {\n\n        v0.x = raw_positions[ i ];\n        v0.y = raw_positions[ i + 1 ];\n        v0.z = raw_positions[ i + 2 ];\n\n        v1.x = raw_positions[ i + 3 ];\n        v1.y = raw_positions[ i + 4 ];\n        v1.z = raw_positions[ i + 5 ];\n\n        v2.x = raw_positions[ i + 6 ];\n        v2.y = raw_positions[ i + 7 ];\n        v2.z = raw_positions[ i + 8 ];\n\n        face = [ v0, v1, v2 ];\n\n        if ( hasNormal ) {\n\n            n0.x = raw_normals[ i ];\n            n0.y = raw_normals[ i + 1 ];\n            n0.z = raw_normals[ i + 2 ];\n\n            n1.x = raw_normals[ i + 3 ];\n            n1.y = raw_normals[ i + 4 ];\n            n1.z = raw_normals[ i + 5 ];\n\n            n2.x = raw_normals[ i + 6 ];\n            n2.y = raw_normals[ i + 7 ];\n            n2.z = raw_normals[ i + 8 ];\n\n            face_normalss = [ n0, n1, n2 ];\n\n        }\n\n        if ( hasUV ) {\n\n            uv0.x = raw_uvs[ i ];\n            uv0.y = raw_uvs[ i + 1 ];\n\n            uv1.x = raw_uvs[ i + 2 ];\n            uv1.y = raw_uvs[ i + 3 ];\n\n            uv2.x = raw_uvs[ i + 4 ];\n            uv2.y = raw_uvs[ i + 5 ];\n\n            face_uvs = [ uv0, uv1, uv2 ];\n\n        }\n\n        tmp_indices = [];\n\n        face.forEach( function ( v, i ) {\n\n            var id = exists( v, vertices );\n            if ( id == -1 ) {\n\n                id = vertices.length;\n                vertices.push( v.clone() );\n\n                if ( hasNormal ) normals.push( face_normalss[ i ].clone() );\n                if ( hasUV ) uvs.push( face_uvs[ i ].clone() );\n\n            }\n            tmp_indices.push( id );\n\n        } );\n\n        indices.push( tmp_indices[ 0 ], tmp_indices[ 1 ], tmp_indices[ 2 ] );\n\n    }\n\n    var positionBuffer = new Float32Array( vertices.length * 3 );\n    if ( hasNormal ) var normalBuffer = new Float32Array( vertices.length * 3 );\n    if ( hasUV ) var uvBuffer = new Float32Array( vertices.length * 2 );\n\n    var i2 = 0;\n    var i3 = 0;\n    for ( i = 0; i < vertices.length; i++ ) {\n\n        i3 = i * 3;\n\n        positionBuffer[ i3 ] = vertices[ i ].x;\n        positionBuffer[ i3 + 1 ] = vertices[ i ].y;\n        positionBuffer[ i3 + 2 ] = vertices[ i ].z;\n\n        if ( hasNormal ) {\n\n            normalBuffer[ i3 ] = normals[ i ].x;\n            normalBuffer[ i3 + 1 ] = normals[ i ].y;\n            normalBuffer[ i3 + 2 ] = normals[ i ].z;\n\n        }\n\n        if ( hasUV ) {\n\n            i2 = i * 2;\n            uvBuffer[ i2 ] = uvs[ i ].x;\n            uvBuffer[ i2 + 1 ] = uvs[ i ].y;\n\n        }\n\n    }\n\n    bufferGeometry.addAttribute( 'position', new BufferAttribute( positionBuffer, 3 ) );\n    if ( hasNormal ) bufferGeometry.addAttribute( 'normal', new BufferAttribute( normalBuffer, 3 ) );\n    if ( hasUV ) bufferGeometry.addAttribute( 'uv', new BufferAttribute( uvBuffer, 2 ) );\n    bufferGeometry.setIndex( new BufferAttribute( new Uint32Array( indices ), 1 ) );\n    return bufferGeometry;\n\n    function exists( v, vertices ) {\n        for ( var i = 0; i < vertices.length; i++ ) {\n            if ( v.equals( vertices[ i ] ) ) return i;\n        }\n        return -1;\n    }\n}\n\nexport { getSize, getCenter, toIndexed }\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js"],"sourceRoot":""}