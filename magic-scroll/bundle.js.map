{"version":3,"file":"bundle.js","sources":["../src/MagicScroll.js","../src/main.js"],"sourcesContent":["class MagicScroll {\n  constructor(options) {\n    Object.assign(this, options);\n\n    if (this.target === document)\n      this.target =\n        document.scrollingElement ||\n        document.documentElement ||\n        document.body.parentNode ||\n        document.body; // cross browser support for document scrolling\n\n    this.speed = this.speed || 80;\n    this.smooth = this.smooth || 12;\n    this.pos = this.current || 0;\n    this.frame =\n      this.target === document.body && document.documentElement\n        ? document.documentElement\n        : this.target; // safari is the new IE\n\n    this.min = this.min || 0;\n    this.max = this.target.scrollHeight - this.target.clientHeight;\n\n    this.moving = false;\n\n    this.target.scrollTop = this.pos;\n\n    this.target.addEventListener(\"mousewheel\", scrolled, { passive: false });\n    this.target.addEventListener(\"DOMMouseScroll\", scrolled, {\n      passive: false\n    });\n    this.target.addEventListener(\n      \"scroll\",\n      e => {\n        if (!this.moving) {\n          this.pos = e.target.scrollTop;\n        }\n      },\n      { passive: false }\n    );\n    const scope = this;\n    function scrolled(e) {\n      //e.preventDefault(); // disable default scrolling\n\n      var delta = scope.normalizeWheelDelta(e);\n\n      scope.pos += -delta * scope.speed;\n      scope.pos = Math.max(0, Math.min(scope.pos, scope.max)); // limit scrolling\n\n      if (!scope.moving) scope.update();\n    }\n  }\n\n  normalizeWheelDelta(e) {\n    if (e.detail) {\n      if (e.wheelDelta)\n        return (e.wheelDelta / e.detail / 40) * (e.detail > 0 ? 1 : -1);\n      // Opera\n      else return -e.detail / 3; // Firefox\n    } else return e.wheelDelta / 120; // IE,Safari,Chrome\n  }\n\n  update() {\n    this.moving = true;\n    console.log(this.pos - this.target.scrollTop);\n\n    var delta = (this.pos - this.target.scrollTop) / this.smooth;\n    console.log(delta);\n\n    this.target.scrollTop += delta;\n\n    if (this.onUpdate) {\n      this.onUpdate(this.target.scrollTop);\n    }\n    const scope = this;\n    if (Math.abs(delta) > 0.5)\n      requestFrame(() => {\n        scope.update();\n      });\n    else this.moving = false;\n  }\n}\n\nvar requestFrame = (function() {\n  // requestAnimationFrame cross browser\n  return (\n    window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    function(func) {\n      window.setTimeout(func, 1000);\n    }\n  );\n})();\n\nexport default MagicScroll;\n","import MagicScroll from \"./MagicScroll.js\";\n\nlet magicScroll = new MagicScroll({\n  target: document.querySelector(\".scroll-view.after\"),\n  speed: 80,\n  smooth: 12\n});\n\nmagicScroll.onUpdate = a => {\n  console.log(a);\n  document.querySelector(\"#after-scroll\").innerHTML = Math.round(a);\n};\n\nconst beforeEl = document.querySelector(\".scroll-view.before\");\nbeforeEl.addEventListener(\"scroll\", e => {\n  document.querySelector(\"#before-scroll\").innerHTML = e.target.scrollTop;\n});\n"],"names":[],"mappings":"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"}